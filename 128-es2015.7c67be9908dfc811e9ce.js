(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{zpyf:function(e,t,i){"use strict";i.r(t),i.d(t,"CONTAINERS",(function(){return li})),i.d(t,"COMPONENTS",(function(){return ri})),i.d(t,"HoReservationListOtaModule",(function(){return di}));var o={};i.r(o),i.d(o,"setFunctionAuths",(function(){return P})),i.d(o,"loadDateRangeTypeAction",(function(){return x})),i.d(o,"loadDateRangeTypeSuccessAction",(function(){return V})),i.d(o,"loadDateRangeTypeFailureAction",(function(){return A})),i.d(o,"loadStationTypeAction",(function(){return D})),i.d(o,"loadStationTypeSuccessAction",(function(){return W})),i.d(o,"loadStationTypeFailureAction",(function(){return F})),i.d(o,"loadDeviceTypeAction",(function(){return _})),i.d(o,"loadDeviceTypeSuccessAction",(function(){return B})),i.d(o,"loadDeviceTypeFailureAction",(function(){return E})),i.d(o,"loadBookingStatusAction",(function(){return $})),i.d(o,"loadBookingStatusSuccessAction",(function(){return M})),i.d(o,"loadBookingStatusFailureAction",(function(){return H})),i.d(o,"loadContractTypeAction",(function(){return Y})),i.d(o,"loadContractTypesSuccessAction",(function(){return K})),i.d(o,"loadPaymentStatusListAction",(function(){return z})),i.d(o,"loadPaymentStatusListSuccessAction",(function(){return G})),i.d(o,"initThisStateAction",(function(){return U})),i.d(o,"loadMainListAction",(function(){return Q})),i.d(o,"loadMainListSuccessAction",(function(){return q})),i.d(o,"loadMainListFailureAction",(function(){return X})),i.d(o,"changeSearchConditionAction",(function(){return J})),i.d(o,"changeMainListPageSizeAction",(function(){return Z})),i.d(o,"changeMainListPageIndexAction",(function(){return ee})),i.d(o,"setGridStateAction",(function(){return te})),i.d(o,"updateAssignPicItems",(function(){return ie})),i.d(o,"openAssignPicModalAction",(function(){return oe})),i.d(o,"closeAssignPicModalAction",(function(){return ne})),i.d(o,"updateAssignPicItemsSuccess",(function(){return ae})),i.d(o,"updateAssignPicItemsFailure",(function(){return ce})),i.d(o,"openOffRegistPopup",(function(){return se})),i.d(o,"closeOffRegistPopup",(function(){return le})),i.d(o,"openUmsPopup",(function(){return re})),i.d(o,"closeUmsPopup",(function(){return de}));var n=i("ofXK"),a=i("3Pt+"),c=i("snw9"),s=i("kt0X"),l=i("WG3B"),r=i("wPo9"),d=i("7rOj"),u=i("6LsY"),p=i("l1P7"),b=i("v7zA"),m=i("hHe4"),h=i("1OXJ"),g=i("5hwk"),C=i("kKjH"),f=i("qXPF"),y=i("/AQM"),v=i("YyVL"),k=i("9kH+"),O=i("vu/V"),S=i("tyNb"),R=i("XNiG"),j=i("itXk"),L=i("zP0r"),N=i("Kj3r"),T=i("pLZG"),I=i("1G5W"),w=i("LvDl");const P=Object(s.o)("[HoReservationListOta] set function auths",Object(s.t)()),x=Object(s.o)("[HoReservationListOta] load date range type",Object(s.t)()),V=Object(s.o)("[HoReservationListOta] load date range type success",Object(s.t)()),A=Object(s.o)("[HoReservationListOta] load date range type failure",Object(s.t)()),D=Object(s.o)("[HoReservationListOta] load station type",Object(s.t)()),W=Object(s.o)("[HoReservationListOta] load station type success",Object(s.t)()),F=Object(s.o)("[HoReservationListOta] load station type failure",Object(s.t)()),_=Object(s.o)("[HoReservationListOta] load device type",Object(s.t)()),B=Object(s.o)("[HoReservationListOta] load device type success",Object(s.t)()),E=Object(s.o)("[HoReservationListOta] load device type failure",Object(s.t)()),$=Object(s.o)("[HoReservationListOta] load booking status",Object(s.t)()),M=Object(s.o)("[HoReservationListOta] load booking status success",Object(s.t)()),H=Object(s.o)("[HoReservationListOta] load booking status failure",Object(s.t)()),Y=Object(s.o)("[HoReservationListOta] load contractTypeList",Object(s.t)()),K=Object(s.o)("[HoReservationListOta] load contractTypeList success",Object(s.t)()),z=Object(s.o)("[HoReservationListOta] load paymentStatusList",Object(s.t)()),G=Object(s.o)("[HoReservationListOta] load paymentStatusList success",Object(s.t)()),U=Object(s.o)("[HoReservationListOta] init hotel reservation list ota"),Q=Object(s.o)("[HoReservationListOta] load hotel reservation list ota",Object(s.t)()),q=Object(s.o)("[HoReservationListOta] load hotel reservation list success",Object(s.t)()),X=Object(s.o)("[HoReservationListOta] load hotel reservation list failure",Object(s.t)()),J=Object(s.o)("[HoReservationListOta] change search condition",Object(s.t)()),Z=Object(s.o)("[HoReservationListOta] change hotel reservation list ota page size",Object(s.t)()),ee=Object(s.o)("[HoReservationListOta] change hotel reservation list ota page index",Object(s.t)()),te=Object(s.o)("[HoReservationListOta] set grid state",Object(s.t)()),ie=Object(s.o)("[HoReservationListOta/AssignPicUpdate] \uc77c\uad04\ubcc0\uacbd \ud31d\uc5c5\uc5d0\uc11c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(s.t)()),oe=Object(s.o)("[HoReservationListOta] open assign pic modal"),ne=Object(s.o)("[HoReservationListOta] close assign pic modal"),ae=Object(s.o)("[HoReservationListOta] update items success",Object(s.t)()),ce=Object(s.o)("[HoReservationListOta] update items failure",Object(s.t)()),se=Object(s.o)("[HoReservationListOta] open off regist popup"),le=Object(s.o)("[HoReservationListOta] close off regist popup"),re=Object(s.o)("[HoReservationListOta] open ums popup"),de=Object(s.o)("[HoReservationListOta] close ums popup");var ue=i("EVqC");const pe=Object(ue.a)({selectId:e=>e.rowid,sortComparer:!1}),be=pe.getInitialState({dateRangeTypeList:null,stationTypeList:null,deviceTypeList:null,onOffManualList:null,bookingStatusList:null,vendorList:null,continentList:null,loading:!1,searchCondition:null,otherSearchInfo:null,mainSummaryInfo:null,mainDataTotalCount:0,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},contractTypeList:null,paymentStatusList:null,pageSize:20}),me=Object(s.q)(be,Object(s.s)(o.loadDateRangeTypeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{dateRangeTypeList:t})),Object(s.s)(o.loadStationTypeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{stationTypeList:t})),Object(s.s)(o.loadDeviceTypeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{deviceTypeList:t})),Object(s.s)(o.loadBookingStatusSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{bookingStatusList:t})),Object(s.s)(o.loadContractTypesSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{contractTypeList:t})),Object(s.s)(o.loadPaymentStatusListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{paymentStatusList:t})),Object(s.s)(o.changeSearchConditionAction,(e,{searchCondition:t,otherSearchInfo:i})=>Object.assign(Object.assign({},e),{searchCondition:w.cloneDeep(t),otherSearchInfo:i})),Object(s.s)(o.initThisStateAction,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(s.s)(o.loadMainListAction,e=>Object.assign(Object.assign({},e),{loading:!0,checkedRowIds:[]})),Object(s.s)(o.loadMainListSuccessAction,(e,{dataCollection:t})=>pe.setAll(t.list,Object.assign(Object.assign({},e),{loading:!1,mainSummaryInfo:t.summary,mainDataTotalCount:t.totalCount}))),Object(s.s)(o.loadMainListFailureAction,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(s.s)(o.changeMainListPageSizeAction,(e,{pageSize:t})=>Object.assign(Object.assign({},e),{gridState:w.set(w.cloneDeep(e.gridState),["pageInfo","take"],t),pageSize:t})),Object(s.s)(o.changeMainListPageIndexAction,(e,{pageIndex:t})=>Object.assign(Object.assign({},e),{gridState:w.set(w.cloneDeep(e.gridState),["pageInfo","skip"],t)})),Object(s.s)(o.setGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{gridState:t})),Object(s.s)(o.updateAssignPicItemsSuccess,(e,{updateList:t})=>pe.upsertMany(t,Object.assign(Object.assign({},e),{checkedRowIds:[]}))));function he(e,t){return Object(s.m)({hoReservationListOtaMain:me})(e,t)}const ge=Object(s.p)("hoReservationListOta"),Ce=Object(s.r)(ge,e=>e.hoReservationListOtaMain),fe=Object(s.r)(Ce,e=>e.dateRangeTypeList),ye=Object(s.r)(Ce,e=>e.stationTypeList),ve=Object(s.r)(Ce,e=>e.deviceTypeList),ke=Object(s.r)(Ce,e=>e.bookingStatusList),Oe=(Object(s.r)(Ce,e=>e.vendorList),Object(s.r)(Ce,e=>e.contractTypeList)),Se=Object(s.r)(Ce,e=>e.paymentStatusList),Re=Object(s.r)(Ce,e=>e.searchCondition),je=Object(s.r)(Ce,e=>e.otherSearchInfo),Le=Object(s.r)(Ce,e=>e.loading),Ne=pe.getSelectors(Ce).selectAll,Te=Object(s.r)(Ce,e=>e.mainSummaryInfo),Ie=Object(s.r)(Ce,e=>e.mainDataTotalCount),we=Object(s.r)(Ce,e=>e.gridState),Pe=Object(s.r)(Ce,e=>e.pageSize);var xe=i("YY+H"),Ve=i("AytR");const{API_URL:Ae}=Ve.a,De={postCommonDetailCode:`${Ae}/common/detail-code`,postCommonComp:`${Ae}/common/comp`,postBasicContinent:`${Ae}/admin/basis/continent`,postHotelList:`${Ae}/admin/booking/hotel/list`,putAssignPicItems:`${Ae}/admin/booking/pic-assign`,excelDownload:`${Ae}/admin/booking/hotel/excel`,postFunction:`${Ae}/admin/basis/function`};var We=i("fXoL"),Fe=i("pfiq"),_e=i("/uUt"),Be=i("wd/R"),Ee=i("6UzV");let $e=(()=>{class e{constructor(e){this.fb=e,this.generateGridColumns=()=>[{field:"firstInsertDatetime",title:"Booking Date",type:"text",style:{"text-align":"center"}},{field:"stationTypeName",title:"Station",type:"text",style:{"text-align":"center"}},{field:"bookingItemCode",title:"Booking Item Code",type:"text",template:"bookingItemCodeTpl",style:{"text-align":"center"}},{field:"bookingStatusName",title:"Booking Status",type:"text",template:"statusTpl"},{field:"hotelNameEn",title:"Hotel Name",type:"text",template:"hotelNameTpl"},{field:"clientCancelDeadline",title:"Client Cancel D/L",type:"text",style:{"text-align":"center"}},{field:"checkInDate",title:"C/ In Date & Nts",type:"text",template:"checkInDateTpl",style:{"text-align":"center"}},{field:"roomTypeNameEn",title:"  Room Type & Count  ",type:"text",template:"roomCountTpl"},{field:"travelerName",title:"1st Traveler Name",type:"text"},{field:"billingSumAmount",title:"Billing Sum Amt",type:"text",template:"billingSumAmountTpl",style:{"text-align":"right"}},{field:"billingBalanceAmount",title:"Billing Balance",type:"text",template:"billingBalanceAmountTpl",style:{"text-align":"right"}},{field:"cancelDatetime",title:"BKG Cancel Date",type:"text",style:{"text-align":"center"}},{field:"bookerCompName",title:"Seller Name",type:"text"},{field:"sellerBookingCode",title:"Seller BKG Code",type:"text",style:{"text-align":"center"}},{field:"vendorCompName",title:"Vendor Name",type:"text"},{field:"vendorBookingCode",title:"Vendor BKG Code",type:"text"},{field:"vendorBookingItemCode",title:"Vendor CNFM No.",type:"text"},{field:"vendorPaymentStatusName",title:"V.Payment Status",type:"text"},{field:"hotelContractTypeName",title:"Contract Type",type:"text"},{field:"bookingCmsPmsCompName",title:"CMS/PMS Name",type:"text"},{field:"sendCmsPmsCompName",title:"Notify CMS/PMS",type:"text"},{field:"mutualContractBookingYn",title:"Mutual YN",type:"boolean",template:"mutualContractBookingYnTpl",style:{"text-align":"center"}},{field:"domainAddress",title:"B2C BKG Domain",type:"text"},{field:"cancelConfirmUno",title:"Cancel Confirm User",type:"text"},{field:"cancelConfirmNo",title:"Cancel Cofirm No.",type:"text"}],this.generateHoReservationListOtaSearchForm=()=>this.fb.group({searchTypeCode:[null],dateRange1:this.fb.group({rangeType:[null],dates:this.fb.array([new a.g(null,[a.z.required]),new a.g(null,[a.z.required])])},{validators:[Ee.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),dateRange2:this.fb.group({rangeType:[null],dates:this.fb.array([new a.g(null),new a.g(null)])},{validators:[Ee.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),dateRange3:this.fb.group({rangeType:[null],dates:this.fb.array([new a.g(null),new a.g(null)])},{validators:[Ee.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),stationTypeCode:null,domainAddresses:null,deviceTypeCode:null,onOffManual:null,bookingItemCode:null,bookerId:null,travelerName:null,bookerMobileNo:null,bookerName:null,bookingStatusCodes:null,hotelContractTypeCode:null,mutualContractBookingYn:null,countryCode:null,hotelName:null,hotelCode:null,bookerCompCode:null,sellerBookingCode:null,vendorPaymentStatusCode:null,vendorCompCodes:null,vendorBookingCode:null,vendorBookingItemCode:null,bookingCmsPmsCompCode:null,cancelConfirmYn:null,bookingPicName:null,bookingPicUno:null,destinationCountryCode:null,selectedBookerDropdown:null,groupYn:null}),this.initHoReservationListOtaSearchForm=()=>({dateRange1:{rangeType:"HDA01",dates:[Be().format("YYYY-MM-DD"),Be().format("YYYY-MM-DD")]},dateRange2:{rangeType:"HDA02",dates:[null,null]},dateRange3:{rangeType:"HDA03",dates:[null,null]},stationTypeCode:null,domainAddresses:null,deviceTypeCode:null,onOffManual:null,bookingItemCode:null,bookerId:null,travelerName:null,bookerMobileNo:null,bookerName:null,bookingStatusCodes:null,hotelContractTypeCode:null,mutualContractBookingYn:null,countryCode:null,hotelName:null,hotelCode:null,bookerCompCode:null,sellerBookingCode:null,vendorPaymentStatusCode:null,vendorCompCodes:null,vendorBookingCode:null,vendorBookingItemCode:null,bookingCmsPmsCompCode:null,cancelConfirmYn:null,bookingPicName:null,bookingPicUno:null,destinationCountryCode:null,selectedBookerDropdown:"bookerName",groupYn:null}),this.generateAssignPicPutForm=()=>this.fb.group({itemCategoryCode:[null],picTypeCode:[null],picUno:[null,[a.z.required]],picName:[null]}),this.initAssignPicPutForm=()=>({itemCategoryCode:"IC02",picTypeCode:"PIC01",picUno:null,picName:null})}}return e.\u0275fac=function(t){return new(t||e)(We.bc(a.f))},e.\u0275prov=We.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Me=i("LRne"),He=i("z6cu"),Ye=i("eIep"),Ke=i("tpT/");let ze=(()=>{class e{constructor(e){this.api=e}getCommonDetailCodeList(e){const t=w.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.postCommonDetailCode,t).pipe(Object(Ye.a)(e=>e.succeedYn?Object(Me.a)(e.result.list):Object(He.a)(e||"api response error")))}getVendorList(e){const t=w.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.postCommonComp,t).pipe(Object(Ye.a)(e=>e.succeedYn?Object(Me.a)(e.result.list):Object(He.a)(e||"api response error")))}getContinentList(e){const t=w.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.postBasicContinent,t).pipe(Object(Ye.a)(e=>e.succeedYn?Object(Me.a)(e.result.list):Object(He.a)(e||"api response error")))}getMainList(e){const t=w.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.postHotelList,t).pipe(Object(Ye.a)(e=>{var t,i,o;if(e.succeedYn){const n=this._addRowid(null===(t=e.result)||void 0===t?void 0:t.list),a=(null===(i=e.result)||void 0===i?void 0:i.summary)?e.result.summary:{},c=(null===(o=e.result)||void 0===o?void 0:o.totalCount)||0;return Object(Me.a)({list:n,summary:a,totalCount:c})}return Object(He.a)(e||"api response error")}))}updateAssignPicItems(e){const t=w.assign({},this.api.defaultParams,{condition:e});return this.api.put(De.putAssignPicItems,t).pipe(Object(Ye.a)(e=>e.succeedYn?Object(Me.a)(e.result.list.map(e=>({id:e.bookingItemCode,bookingPicUno:e.picUno,bookingPicName:e.picName,bookingItemCode:e.bookingItemCode}))):Object(He.a)(e||"api response error")))}getBasisFunctions(e){const t=w.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.postFunction,t).pipe(Object(Ye.a)(e=>e.succeedYn&&e.result?Object(Me.a)(e.result.list||[]):Object(He.a)(e||"api response error")))}_addRowid(e){return w.isNil(e)?[]:e.map((e,t)=>Object.assign(Object.assign({},e),{rowid:String(t)}))}}return e.\u0275fac=function(t){return new(t||e)(We.bc(Ke.a))},e.\u0275prov=We.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ge=i("EsKh"),Ue=i("+Sob"),Qe=i("nMd8"),qe=i("rbKv"),Xe=i("kd+X"),Je=i("LVFn"),Ze=i("U2QM"),et=i("U6NN"),tt=i("0xcq"),it=i("gbCm"),ot=i("pb6r");function nt(e,t){1&e&&We.Rb(0,"app-input-text",54)}function at(e,t){1&e&&We.Rb(0,"app-input-text",55)}function ct(e,t){1&e&&We.Rb(0,"app-input-text",56)}function st(e,t){1&e&&We.Rb(0,"app-input-text",57)}const lt=function(){return{userTypeCode:"U01"}},rt=function(){return["userNo","name","deptName","positionName"]},dt=function(){return["countryCode","countryNameEn"]},ut=function(){return["CMP04","CMP05","CMP06","CMP11"]},pt=function(e){return{compTypeCodes:e}},bt=function(){return["compCode","compName"]},mt=function(){return["CMP07","CMP08"]},ht=function(){return["compName","compCode"]},gt=function(){return["CMP02","CMP03"]};let Ct=(()=>{class e{constructor(e,t){this._dataService=e,this._alertService=t,this.clickSearchEvent=new We.n,this.clickResetEvent=new We.n,this.isShowmore=!1,this._$unsubscribe=new R.a,this.searchForm=e.generateHoReservationListOtaSearchForm()}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(e){this._otherSearchInfo=e,this._setOtherSearchInfo(e)}get dateRangeTypeList(){return this._dataRangeTypeList}set dateRangeTypeList(e){this._dataRangeTypeList=e,this._initDateRangeList(e)}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}get dateRange1Dates(){return this.searchForm.get("dateRange1").get("dates").value}get dateRange2Dates(){return this.searchForm.get("dateRange2").get("dates").value}get dateRange3Dates(){return this.searchForm.get("dateRange3").get("dates").value}get formValue(){return this.searchForm&&this.searchForm.value}ngOnInit(){this._initOptionLists(),this._initSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}checkIsInvalidDateRange(e){var t;return this._checkValid&&(!0===(null===(t=e.errors)||void 0===t?void 0:t.rangeCompare)||e.invalid)}onSubmit(){if(this.searchForm.invalid)return Object.keys(this.searchForm.controls).forEach(e=>{this.searchForm.controls[e].invalid&&console.log(e+" is invalid")}),void(this._checkValid=!0);const e=this.setSearchCondition(),t=this._setOtherSearchCondition(),i=["handleStatusCode","bookingCode","bookingItemCode","vendorBookingCode","bookerName","bookerId","travelerName","bookerMobileNo"];let o=0;Object.keys(e).forEach(e=>{i.includes(e)&&o++}),o>1?this._alertService.alert("Booking TAG, Unified Booking Code, Booking Code, V.Booking Code, Booking Name, Booking ID, Guest Name, Mobile Number\nThese conditions cannot be used together."):(this.clickSearchEvent.emit({searchCondition:e,otherSearchInfo:t}),this._checkValid=!1)}onReset(){this.clickResetEvent.emit()}onChangerangeType1({value:e}){const t=e;this.dateRangeTypeList2=this.dateRangeTypeList.filter(e=>e.detailCode!==t);const i=this.dateRangeTypeList2[0].detailCode;this.dateRangeTypeList3=this.dateRangeTypeList.filter(e=>e.detailCode!==t&&e.detailCode!==i);const o=this.dateRangeTypeList3[0].detailCode;this.searchForm.get("dateRange2").get("rangeType").setValue(i),this.searchForm.get("dateRange3").get("rangeType").setValue(o)}onChangerangeType2({value:e}){this.dateRangeTypeList3=this.dateRangeTypeList2.filter(t=>t.detailCode!==e),this.searchForm.get("dateRange3").get("rangeType").setValue(this.dateRangeTypeList2[0].detailCode)}setSearchCondition(){const e=this._dataService.initHoReservationListOtaSearchForm(),t=Object.assign({},w.pick(this.searchForm.value,Object.keys(e)));return t.vendorCompCodes&&(t.vendorCompCodes=t.vendorCompCodes.length>0?t.vendorCompCodes:[t.vendorCompCodes]),w.omitBy(t,w.isNil)}_setOtherSearchInfo(e){this.bookingPicUnoInputFieldValue=(null==e?void 0:e.picUnoInput)||null,this.countryInputFieldValue=(null==e?void 0:e.countryInput)||null,this.vendorCompCodesInputFieldValue=(null==e?void 0:e.vendorCompInput)||null,this.bookingCmsPmsCompCodeInputFieldValue=(null==e?void 0:e.cmsPmsCompInput)||null,this.bookerCompCodeInputFieldValue=(null==e?void 0:e.sellerCompInput)||null}_setOtherSearchCondition(){const e={};return this.autoCopmpletes.forEach(t=>{Object.assign(e,t.getInputValue())}),e}_setSearchFormData(e){const t=this._dataService.initHoReservationListOtaSearchForm();return this.bookingPicUnoInputFieldValue=w.isNil(null==e?void 0:e.bookingPicUno)?"":null==e?void 0:e.bookingPicUno.toString(),this.countryInputFieldValue=w.isNil(null==e?void 0:e.destinationCountryCode)?"":null==e?void 0:e.destinationCountryCode,this.vendorCompCodesInputFieldValue=w.isNil(null==e?void 0:e.vendorCompCodes)?"":null==e?void 0:e.vendorCompCodes.toString(),this.bookingCmsPmsCompCodeInputFieldValue=w.isNil(null==e?void 0:e.bookingCmsPmsCompCode)?"":null==e?void 0:e.bookingCmsPmsCompCode.toString(),this.bookerCompCodeInputFieldValue=w.isNil(null==e?void 0:e.bookerCompCode)?"":null==e?void 0:e.bookerCompCode.toString(),Object.assign({},t,w.pick(e,Object.keys(t)))}_initDateRangeList(e){var t,i;const o=null===(t=this.searchCondition)||void 0===t?void 0:t.dateRange1.rangeType,n=null===(i=this.searchCondition)||void 0===i?void 0:i.dateRange2.rangeType;this.dateRangeTypeList2=null==e?void 0:e.filter(e=>e.detailCode!==o),this.dateRangeTypeList3=null==e?void 0:e.filter(e=>e.detailCode!==o&&e.detailCode!==n)}_initOptionLists(){this.regionList=[{value:"I",label:"\ud574\uc678\ud638\ud154"},{value:"D",label:"\uad6d\ub0b4\uc219\ubc15"}],this.onOffList=[{value:"O",label:"Online"},{value:"F",label:"Offline"}],this.bookerDropdownOptions=[{value:"bookerName",label:"Booker Name"},{value:"bookerId",label:"Booker ID"},{value:"travelerName",label:"Traveler"},{value:"bookerMobileNo",label:"Mobile No."}],this.domainTypeList=[{value:"www.ohmyhotel.com"},{value:"www.ohmytrip.com"},{value:"www.ohmyhotel.biz"},{value:"m.ohmytrip.com"},{value:"m.ohmyhotel.com"}],this.useYnOptions=[{value:!0,label:"Y"},{value:!1,label:"N"}]}_initSubscription(){this.searchForm.get("dateRange1").get("rangeType").valueChanges.pipe(Object(I.a)(this._$unsubscribe)).subscribe(e=>{this.dateRangeTypeList2=this.dateRangeTypeList?this.dateRangeTypeList.filter(t=>t.detailCode!==e):[];const t=this.dateRangeTypeList2.length?this.dateRangeTypeList2[0].detailCode:null;this.searchForm.get("dateRange2").get("rangeType").setValue(t)}),this.searchForm.get("dateRange2").get("rangeType").valueChanges.pipe(Object(I.a)(this._$unsubscribe)).subscribe(e=>{this.dateRangeTypeList3=this.dateRangeTypeList2?this.dateRangeTypeList2.filter(t=>t.detailCode!==e):[];const t=this.dateRangeTypeList3.length?this.dateRangeTypeList3[0].detailCode:null;this.searchForm.get("dateRange3").get("rangeType").setValue(t)}),this.searchForm.get("selectedBookerDropdown").valueChanges.pipe(Object(_e.a)(),Object(I.a)(this._$unsubscribe)).subscribe(()=>{this.searchForm.get("bookerId").reset(),this.searchForm.get("travelerName").reset(),this.searchForm.get("bookerMobileNo").reset(),this.searchForm.get("bookerName").reset()})}}return e.\u0275fac=function(t){return new(t||e)(We.Qb($e),We.Qb(Ge.a))},e.\u0275cmp=We.Kb({type:e,selectors:[["app-ho-reservation-list-ota-search"]],viewQuery:function(e,t){var i;1&e&&We.Xc(Fe.a,!0),2&e&&We.Dc(i=We.gc())&&(t.autoCopmpletes=i)},inputs:{stationTypeList:"stationTypeList",deviceTypeList:"deviceTypeList",bookingStatusList:"bookingStatusList",contractTypeList:"contractTypeList",paymentList:"paymentList",otherSearchInfo:"otherSearchInfo",dateRangeTypeList:"dateRangeTypeList",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:149,vars:101,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],["formGroupName","dateRange1",1,"col-2","flex-shrink1"],["formControlName","rangeType","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-shrink-0",3,"options","useAllOptionYn","onChange"],["formArrayName","dates",1,"calendar-set","flex-fill"],[1,"input","calendar","d-inline-flex","flex-fill"],[3,"for"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","formControlName"],["fromDate1",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","min","formControlName"],["toDate1",""],[1,"col-1"],[1,"form-label"],["formControlName","stationTypeCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["displayKey","value","formControlName","domainAddresses",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","selectedBookerDropdown","displayKey","label",1,"d-inline-flex","flex-shrink-0","mr5",3,"options","useAllOptionYn"],[3,"ngSwitch"],["formControlName","bookerId","class","d-inline-flex flex-fill",4,"ngSwitchCase"],["formControlName","travelerName","class","d-inline-flex flex-fill",4,"ngSwitchCase"],["formControlName","bookerMobileNo","class","d-inline-flex flex-fill",4,"ngSwitchCase"],["formControlName","bookerName","class","d-inline-flex flex-fill",4,"ngSwitchDefault"],["formGroupName","dateRange2",1,"col-2","flex-shrink1"],["fromDate2",""],["toDate2",""],["formControlName","bookingStatusCodes","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options","useAllOptionYn"],["formControlName","bookingItemCode",1,"d-inline-flex","flex-fill"],["formControlName","bookingPicUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formGroupName","dateRange3",1,"col-2","flex-shrink1"],["formControlName","rangeType","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-shrink-0",3,"options","useAllOptionYn"],["fromDate3",""],["toDate3",""],["apiUrl","admin/common/country","formControlName","destinationCountryCode","dataKey","countryCode","inputFieldFormat","[{0}] {1}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","hotelName","placeholder","Name",1,"d-inline-flex","flex-fill"],["formControlName","hotelCode","valueType","number",1,"d-inline-flex","flex-fill"],[1,"d-inline-flex","flex-fill"],["apiUrl","common/comp","formControlName","vendorCompCodes","dataKey","compCode","inputFieldFormat","[{0}] {1}","placeholder","Name",2,"width","60%",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","groupYn","label","Group Y",1,"flex-glow-0","ml5",3,"binary"],["formControlName","vendorBookingCode","placeholder","Vendor Booking Code",1,"d-inline-flex","flex-fill"],["formControlName","vendorBookingItemCode","placeholder","Hotel Confirm No",1,"d-inline-flex","flex-fill"],["displayWord","detailCodeName","dataKey","detailCode","formControlName","vendorPaymentStatusCode",1,"d-inline-flex","flex-fill",3,"options"],["apiUrl","common/comp","formControlName","bookingCmsPmsCompCode","dataKey","compCode","inputFieldFormat","{0} - {1}","placeholder","Name",1,"flex-fill",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","bookerCompCode","apiUrl","common/comp","dataKey","compCode","inputFieldFormat","{0} - {1}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","sellerBookingCode","placeholder","Seller Booking Code",1,"d-inline-flex","flex-fill"],["formControlName","cancelConfirmYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","mutualContractBookingYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","deviceTypeCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","onOffManual",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","hotelContractTypeCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],[1,"form-button-area"],["type","submit","data-function","2000032","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"],[1,"btn-searchbox-extend",3,"click"],["formControlName","bookerId",1,"d-inline-flex","flex-fill"],["formControlName","travelerName",1,"d-inline-flex","flex-fill"],["formControlName","bookerMobileNo",1,"d-inline-flex","flex-fill"],["formControlName","bookerName",1,"d-inline-flex","flex-fill"]],template:function(e,t){if(1&e&&(We.Wb(0,"form",0),We.fc("ngSubmit",(function(){return t.onSubmit()})),We.Wb(1,"div",1),We.Wb(2,"div",2),We.Wb(3,"div",3),We.Wb(4,"app-selectbox-detailcode",4),We.fc("onChange",(function(e){return t.onChangerangeType1(e)})),We.Vb(),We.Wb(5,"div",5),We.Wb(6,"div",6),We.Rb(7,"mat-datepicker-toggle",7),We.Rb(8,"input",8),We.Rb(9,"mat-datepicker",null,9),We.Vb(),We.Wb(11,"span",10),We.Pc(12,"~"),We.Vb(),We.Wb(13,"div",6),We.Rb(14,"mat-datepicker-toggle",7),We.Rb(15,"input",11),We.Rb(16,"mat-datepicker",null,12),We.Vb(),We.Vb(),We.Vb(),We.Wb(18,"div",13),We.Wb(19,"span",14),We.Pc(20,"Station"),We.Vb(),We.Rb(21,"app-selectbox-detailcode",15),We.Vb(),We.Wb(22,"div",13),We.Wb(23,"span",14),We.Pc(24,"Domain"),We.Vb(),We.Rb(25,"app-multi-select",16),We.Vb(),We.Wb(26,"div",13),We.Rb(27,"app-selectbox",17),We.Ub(28,18),We.Nc(29,nt,1,0,"app-input-text",19),We.Nc(30,at,1,0,"app-input-text",20),We.Nc(31,ct,1,0,"app-input-text",21),We.Nc(32,st,1,0,"app-input-text",22),We.Tb(),We.Vb(),We.Vb(),We.Wb(33,"div",2),We.Wb(34,"div",23),We.Wb(35,"app-selectbox-detailcode",4),We.fc("onChange",(function(e){return t.onChangerangeType2(e)})),We.Vb(),We.Wb(36,"div",5),We.Wb(37,"div",6),We.Rb(38,"mat-datepicker-toggle",7),We.Rb(39,"input",8),We.Rb(40,"mat-datepicker",null,24),We.Vb(),We.Wb(42,"span",10),We.Pc(43,"~"),We.Vb(),We.Wb(44,"div",6),We.Rb(45,"mat-datepicker-toggle",7),We.Rb(46,"input",11),We.Rb(47,"mat-datepicker",null,25),We.Vb(),We.Vb(),We.Vb(),We.Wb(49,"div",13),We.Wb(50,"span",14),We.Pc(51,"BKG Status"),We.Vb(),We.Rb(52,"app-multi-select-detailcode",26),We.Vb(),We.Wb(53,"div",13),We.Wb(54,"span",14),We.Pc(55,"BKG Item Code"),We.Vb(),We.Rb(56,"app-input-text",27),We.Vb(),We.Wb(57,"div",13),We.Wb(58,"span",14),We.Pc(59,"BKG PIC"),We.Vb(),We.Rb(60,"app-auto-complete",28),We.Vb(),We.Vb(),We.Wb(61,"div",2),We.Wb(62,"div",29),We.Rb(63,"app-selectbox-detailcode",30),We.Wb(64,"div",5),We.Wb(65,"div",6),We.Rb(66,"mat-datepicker-toggle",7),We.Rb(67,"input",8),We.Rb(68,"mat-datepicker",null,31),We.Vb(),We.Wb(70,"span",10),We.Pc(71,"~"),We.Vb(),We.Wb(72,"div",6),We.Rb(73,"mat-datepicker-toggle",7),We.Rb(74,"input",11),We.Rb(75,"mat-datepicker",null,32),We.Vb(),We.Vb(),We.Vb(),We.Wb(77,"div",13),We.Wb(78,"span",14),We.Pc(79,"Country"),We.Vb(),We.Rb(80,"app-auto-complete",33),We.Vb(),We.Wb(81,"div",13),We.Wb(82,"span",14),We.Pc(83,"Hotel Name"),We.Vb(),We.Rb(84,"app-input-text",34),We.Vb(),We.Wb(85,"div",13),We.Wb(86,"span",14),We.Pc(87,"Hotel Code"),We.Vb(),We.Rb(88,"app-input-text",35),We.Vb(),We.Vb(),We.Wb(89,"div",2),We.Wb(90,"div",13),We.Wb(91,"span",14),We.Pc(92,"Vendor"),We.Vb(),We.Wb(93,"div",36),We.Rb(94,"app-auto-complete",37),We.Rb(95,"app-checkbox",38),We.Vb(),We.Vb(),We.Wb(96,"div",13),We.Wb(97,"span",14),We.Pc(98,"V. BKG Code"),We.Vb(),We.Rb(99,"app-input-text",39),We.Vb(),We.Wb(100,"div",13),We.Wb(101,"span",14),We.Pc(102,"CNFM No."),We.Vb(),We.Rb(103,"app-input-text",40),We.Vb(),We.Wb(104,"div",13),We.Wb(105,"span",14),We.Pc(106,"V. P. Status"),We.Vb(),We.Rb(107,"app-selectbox-detailcode",41),We.Vb(),We.Vb(),We.Wb(108,"div",2),We.Wb(109,"div",13),We.Wb(110,"span",14),We.Pc(111,"CMS/PMS"),We.Vb(),We.Rb(112,"app-auto-complete",42),We.Vb(),We.Wb(113,"div",13),We.Wb(114,"span",14),We.Pc(115,"Seller"),We.Vb(),We.Rb(116,"app-auto-complete",43),We.Vb(),We.Wb(117,"div",13),We.Wb(118,"span",14),We.Pc(119,"S.BKG Code"),We.Vb(),We.Rb(120,"app-input-text",44),We.Vb(),We.Wb(121,"div",13),We.Wb(122,"span",14),We.Pc(123,"CXL CNFM YN"),We.Vb(),We.Rb(124,"app-selectbox",45),We.Vb(),We.Vb(),We.Wb(125,"div",2),We.Wb(126,"div",13),We.Wb(127,"span",14),We.Pc(128,"Mutual YN"),We.Vb(),We.Rb(129,"app-selectbox",46),We.Vb(),We.Wb(130,"div",13),We.Wb(131,"span",14),We.Pc(132,"Device"),We.Vb(),We.Rb(133,"app-selectbox-detailcode",47),We.Vb(),We.Wb(134,"div",13),We.Wb(135,"span",14),We.Pc(136,"On/Off"),We.Vb(),We.Rb(137,"app-selectbox",48),We.Vb(),We.Wb(138,"div",13),We.Wb(139,"span",14),We.Pc(140,"Contract"),We.Vb(),We.Rb(141,"app-selectbox-detailcode",49),We.Vb(),We.Vb(),We.Vb(),We.Wb(142,"div",50),We.Wb(143,"button",51),We.Pc(144,"Search"),We.Vb(),We.Wb(145,"button",52),We.fc("click",(function(){return t.onReset()})),We.Pc(146,"Reset"),We.Vb(),We.Wb(147,"a",53),We.fc("click",(function(){return t.isShowmore=!t.isShowmore})),We.Pc(148,"\uac80\uc0c9 \uc635\uc158 \ub354\ubcf4\uae30"),We.Vb(),We.Vb(),We.Vb()),2&e){const e=We.Ec(10),i=We.Ec(17),o=We.Ec(41),n=We.Ec(48),a=We.Ec(69),c=We.Ec(76);We.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),We.Cb(4),We.pc("options",t.dateRangeTypeList)("useAllOptionYn",!1),We.Cb(1),We.Gb("valid-error",t.checkIsInvalidDateRange(t.searchForm.get("dateRange1"))),We.Cb(2),We.pc("for",e),We.Cb(1),We.pc("matDatepicker",e)("formControlName",0),We.Cb(6),We.pc("for",i),We.Cb(1),We.pc("matDatepicker",i)("min",t.dateRange1Dates[0])("formControlName",1),We.Cb(6),We.pc("options",t.stationTypeList),We.Cb(4),We.pc("options",t.domainTypeList),We.Cb(2),We.pc("options",t.bookerDropdownOptions)("useAllOptionYn",!1),We.Cb(1),We.pc("ngSwitch",t.searchForm.get("selectedBookerDropdown").value),We.Cb(1),We.pc("ngSwitchCase","bookerId"),We.Cb(1),We.pc("ngSwitchCase","travelerName"),We.Cb(1),We.pc("ngSwitchCase","bookerMobileNo"),We.Cb(4),We.pc("options",t.dateRangeTypeList2)("useAllOptionYn",!1),We.Cb(1),We.Gb("valid-error",t.checkIsInvalidDateRange(t.searchForm.get("dateRange2"))),We.Cb(2),We.pc("for",o),We.Cb(1),We.pc("matDatepicker",o)("formControlName",0),We.Cb(6),We.pc("for",n),We.Cb(1),We.pc("matDatepicker",n)("min",t.dateRange2Dates[0])("formControlName",1),We.Cb(6),We.pc("options",t.bookingStatusList)("useAllOptionYn",!0),We.Cb(8),We.pc("inputFieldValue",t.bookingPicUnoInputFieldValue)("inputId","picUnoInput")("apiCondition",We.tc(86,lt))("apiSearchTerm","name")("inputFieldFormatKeyList",We.tc(87,rt)),We.Cb(1),We.Gb("hide",!t.isShowmore),We.Cb(2),We.pc("options",t.dateRangeTypeList3)("useAllOptionYn",!1),We.Cb(1),We.Gb("valid-error",t.checkIsInvalidDateRange(t.searchForm.get("dateRange3"))),We.Cb(2),We.pc("for",a),We.Cb(1),We.pc("matDatepicker",a)("formControlName",0),We.Cb(6),We.pc("for",c),We.Cb(1),We.pc("matDatepicker",c)("min",t.dateRange3Dates[0])("formControlName",1),We.Cb(6),We.pc("inputFieldValue",t.countryInputFieldValue)("inputId","countryInput")("apiSearchTerm","keyword")("inputFieldFormatKeyList",We.tc(88,dt)),We.Cb(9),We.Gb("hide",!t.isShowmore),We.Cb(5),We.pc("inputFieldValue",t.vendorCompCodesInputFieldValue)("inputId","vendorCompInput")("apiCondition",We.uc(90,pt,We.tc(89,ut)))("apiSearchTerm","compName")("inputFieldFormatKeyList",We.tc(92,bt)),We.Cb(1),We.pc("binary",!0),We.Cb(12),We.pc("options",t.paymentList),We.Cb(1),We.Gb("hide",!t.isShowmore),We.Cb(4),We.pc("inputFieldValue",t.bookingCmsPmsCompCodeInputFieldValue)("inputId","cmsPmsCompInput")("apiCondition",We.uc(94,pt,We.tc(93,mt)))("apiSearchTerm","compName")("inputFieldFormatKeyList",We.tc(96,ht)),We.Cb(4),We.pc("inputFieldValue",t.bookerCompCodeInputFieldValue)("inputId","sellerCompInput")("apiCondition",We.uc(98,pt,We.tc(97,gt)))("apiSearchTerm","compName")("inputFieldFormatKeyList",We.tc(100,ht)),We.Cb(8),We.pc("options",t.useYnOptions),We.Cb(1),We.Gb("hide",!t.isShowmore),We.Cb(4),We.pc("options",t.useYnOptions),We.Cb(4),We.pc("options",t.deviceTypeList),We.Cb(4),We.pc("options",t.onOffList),We.Cb(4),We.pc("options",t.contractTypeList),We.Cb(6),We.Gb("active",t.isShowmore)}},directives:[a.B,a.s,a.k,Ue.a,a.l,Qe.a,a.r,a.i,a.e,qe.a,Xe.a,a.c,Je.a,Ze.a,et.a,n.q,n.r,n.s,tt.a,it.a,Fe.a,ot.a],styles:[""],changeDetection:0}),e})(),ft=(()=>{class e{constructor(){this.changePageSizeEvent=new We.n,this.excelDownloadEvent=new We.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onChangePageSize({value:e}){this.changePageSizeEvent.emit(e)}onClickExcel(){this.excelDownloadEvent.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=We.Kb({type:e,selectors:[["app-ho-reservation-list-ota-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{changePageSizeEvent:"changePageSizeEvent",excelDownloadEvent:"excelDownloadEvent"},decls:7,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],["data-function","2000036",1,"btn","btn-outline-dark","sm","d-inline-flex","flex-glow-0",3,"click"],[1,"sm","d-inline-flex","flex-glow-0","sm",3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&(We.Wb(0,"div",0),We.Wb(1,"strong",1),We.Pc(2),We.Vb(),We.Wb(3,"div",2),We.Wb(4,"button",3),We.fc("click",(function(){return t.onClickExcel()})),We.Pc(5,"Excel"),We.Vb(),We.Wb(6,"app-selectbox",4),We.fc("onChange",(function(e){return t.onChangePageSize(e)})),We.Vb(),We.Vb(),We.Vb()),2&e&&(We.Cb(2),We.Qc(t.loading?"":t.totalCount),We.Cb(4),We.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[et.a,a.r,a.u],styles:[""],changeDetection:0}),e})();var yt=i("2QGa");function vt(e,t){if(1&e){const e=We.Xb();We.Wb(0,"a",27),We.fc("click",(function(){We.Fc(e);const i=t.$implicit;return We.hc().onClickBookingItemCode(i)})),We.Pc(1),We.Vb()}if(2&e){const e=t.$implicit;We.Cb(1),We.Qc(e.bookingItemCode)}}function kt(e,t){if(1&e&&We.Pc(0),2&e){const e=t.$implicit;We.Rc(" ",e.hotelNameEn||e.hotelNameLn," ")}}function Ot(e,t){if(1&e&&We.Pc(0),2&e){const e=t.$implicit;We.Sc(" ",e.checkInDate,"[",e.nightCount,"] ")}}function St(e,t){if(1&e&&We.Pc(0),2&e){const e=t.$implicit;We.Sc(" ",e.roomTypeNameEn,"[",e.roomCount,"] ")}}function Rt(e,t){1&e&&(We.Pc(0),We.ic(1,"number")),2&e&&We.Rc(" ",We.jc(1,1,t.$implicit.billingSumAmount)," ")}function jt(e,t){1&e&&(We.Pc(0),We.ic(1,"number")),2&e&&We.Rc(" ",We.jc(1,1,t.$implicit.billingBalanceAmount)," ")}function Lt(e,t){1&e&&(We.Ub(0),We.Pc(1," Y "),We.Tb())}function Nt(e,t){1&e&&(We.Ub(0),We.Pc(1," N "),We.Tb())}function Tt(e,t){if(1&e&&(We.Nc(0,Lt,2,0,"ng-container",28),We.Nc(1,Nt,2,0,"ng-container",28)),2&e){const e=t.$implicit;We.pc("ngIf",e.mutualContractBookingYn),We.Cb(1),We.pc("ngIf",!e.mutualContractBookingYn)}}const It=function(){return{allowUnsort:!0,mode:"multiple"}};let wt=(()=>{class e{constructor(){this.pageChangeEvent=new We.n,this.sortChangeEvent=new We.n,this.checkRowEvent=new We.n,this.clickRowEvent=new We.n,this.checkAllEvent=new We.n,this.clickedRowSubject=new R.a,this.unsubscribe$=new R.a,this.getIsRowSelected=e=>{var t;return(null===(t=this.checkedRows)||void 0===t?void 0:t.indexOf(e.dataItem.rowid))>-1||e.index===this._singleClickedRowIndex}}get checkedState(){return this._checkedState}set checkedState(e){this._checkedState=e,this._setCheckedState()}get checkedRows(){return this._checkedRows}set checkedRows(e){this._checkedRows=e.length>0?e:null}get gridView(){return{data:this.dataList||[],total:this.totalCount||0}}get currentPageSize(){var e;return null===(e=this.pageInfo)||void 0===e?void 0:e.take}get isAllChecked(){return this.checkedRows&&this.checkedRows.length===this.dataList.length}get checkedStateOutput(){return w.isNil(this._singleClickedRowIndex)?null:{clickedRowIndex:w.isNil(this._singleClickedRowIndex)?null:this._singleClickedRowIndex}}get thisGridState(){return{pageInfo:this.pageInfo,sortInfo:this.sortInfo}}ngOnInit(){this._initClickSubscription()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onPageChange(e){this.pageChangeEvent.emit(e)}onSortChange(e){setTimeout(()=>{this.sortChangeEvent.emit(e),this.pageChangeEvent.emit({skip:0,take:this.pageInfo.take})},0)}onCheckAll(e){if(!e)return void this.checkAllEvent.emit({isChecked:e});if(this.dataList.length<1)return;const t=this.dataList.map(e=>e&&e.rowid);this.checkAllEvent.emit({isChecked:e,rowids:t})}onCheckRow(e,t){this.checkRowEvent.emit({rowid:t.rowid,isChecked:e})}onDblClick(e){this.clickedRowItem&&(this.isDbClick=!0,this.clickedRowSubject.next("double"))}displayRequests(e){return null==e?void 0:e.map(e=>{const{requestTypeCode:t,requestValue:i,requestTypeName:o}=e;return"BRQ99"===t?i:o}).join(", ")}onClickBookingItemCode(e){this.clickedRowItem=e,this.clickedRowSubject.next("single")}onCellClick(e){var t,i,o;0===e.columnIndex&&(null===(o=null===(i=null===(t=null==e?void 0:e.originalEvent)||void 0===t?void 0:t.target)||void 0===i?void 0:i.className)||void 0===o?void 0:o.indexOf("checkbox-control-text"))>-1||(this._singleClickedRowIndex=null==e?void 0:e.rowIndex)}_setCheckedState(){if(this._singleClickedRowIndex=null,!w.isEmpty(this.checkedState)){const{clickedRowIndex:e}=this.checkedState;this._singleClickedRowIndex=w.isNil(e)?null:e}}_initClickSubscription(){const e=this.clickedRowSubject.pipe(Object(N.a)(500),Object(I.a)(this.unsubscribe$)),[t,i]=Object(yt.a)(e,e=>"single"===e);t.subscribe(()=>{this.clickRowEvent.emit(w.cloneDeep(this.clickedRowItem)),this.clickedRowItem=void 0}),i.subscribe(()=>{})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=We.Kb({type:e,selectors:[["app-ho-reservation-list-ota-grid"]],viewQuery:function(e,t){var i;1&e&&We.Xc(l.l,!0),2&e&&We.Dc(i=We.gc())&&(t.grid=i.first)},inputs:{loading:"loading",totalCount:"totalCount",checkedState:"checkedState",dataList:"dataList",pageInfo:"pageInfo",sortInfo:"sortInfo",checkedRows:"checkedRows"},outputs:{pageChangeEvent:"pageChangeEvent",sortChangeEvent:"sortChangeEvent",checkRowEvent:"checkRowEvent",clickRowEvent:"clickRowEvent",checkAllEvent:"checkAllEvent"},decls:34,vars:37,consts:[[1,"grid-max-height-650",3,"loading","data","resizable","reorderable","pageable","skip","pageSize","sortable","sort","selectable","rowSelected","pageChange","sortChange","cellClick"],["field","firstInsertDatetime","title","Booking Date",3,"width"],["field","stationTypeName","title","Station",3,"width"],["field","bookingItemCode","title","Booking Item Code",3,"width"],["kendoGridCellTemplate",""],["field","bookingStatusName","title","Booking Status",3,"width"],["field","hotelNameEn","title","Hotel Name","format","{0:n}",3,"width"],["field","clientCancelDeadline","title","Client Cancel D/L",3,"width"],["field","checkInDate","title","C/ In Date & Nts",3,"width"],["field","roomCount","title","Room Type & Count",3,"width"],["field","travelerName","title","1st Traveler Name",3,"width"],["field","billingSumAmount","title","Billing Sum Amt",3,"width"],["field","billingBalanceAmount","title","Billing Balance",3,"width"],["field","cancelDatetime","title","BKG Cancel Date",3,"width"],["field","bookerCompName","title","Seller Name",3,"width"],["field","sellerBookingCode","title","Seller BKG Code",3,"width"],["field","vendorCompName","title","Vendor Name",3,"width"],["field","vendorBookingCode","title","Vendor BKG Code",3,"width"],["field","vendorBookingItemCode","title","Vendor CNFM No.",3,"width"],["field","vendorPaymentStatusName","title","V.Payment Status",3,"width"],["field","hotelContractTypeName","title","Contract Type",3,"width"],["field","bookingCmsPmsCompName","title","CMS/PMS Name",3,"width"],["field","sendCmsPmsCompName","title","Notify CMS/PMS",3,"width"],["field","mutualContractBookingYn","title","Mutual YN",3,"width"],["field","domainAddress","title","B2C BKG Domain",3,"width"],["field","cancelConfirmUno","title","Cancel Confirm User",3,"width"],["field","cancelConfirmNo","title","Cancel Cofirm No.",3,"width"],[1,"text-underline",3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&(We.Wb(0,"kendo-grid",0),We.fc("pageChange",(function(e){return t.onPageChange(e)}))("sortChange",(function(e){return t.onSortChange(e)}))("cellClick",(function(e){return t.onCellClick(e)})),We.Rb(1,"kendo-grid-column",1),We.Rb(2,"kendo-grid-column",2),We.Wb(3,"kendo-grid-column",3),We.Nc(4,vt,2,1,"ng-template",4),We.Vb(),We.Rb(5,"kendo-grid-column",5),We.Wb(6,"kendo-grid-column",6),We.Nc(7,kt,1,1,"ng-template",4),We.Vb(),We.Rb(8,"kendo-grid-column",7),We.Wb(9,"kendo-grid-column",8),We.Nc(10,Ot,1,2,"ng-template",4),We.Vb(),We.Pc(11,"+ "),We.Wb(12,"kendo-grid-column",9),We.Nc(13,St,1,2,"ng-template",4),We.Vb(),We.Rb(14,"kendo-grid-column",10),We.Wb(15,"kendo-grid-column",11),We.Nc(16,Rt,2,3,"ng-template",4),We.Vb(),We.Wb(17,"kendo-grid-column",12),We.Nc(18,jt,2,3,"ng-template",4),We.Vb(),We.Rb(19,"kendo-grid-column",13),We.Rb(20,"kendo-grid-column",14),We.Rb(21,"kendo-grid-column",15),We.Rb(22,"kendo-grid-column",16),We.Rb(23,"kendo-grid-column",17),We.Rb(24,"kendo-grid-column",18),We.Rb(25,"kendo-grid-column",19),We.Rb(26,"kendo-grid-column",20),We.Rb(27,"kendo-grid-column",21),We.Rb(28,"kendo-grid-column",22),We.Wb(29,"kendo-grid-column",23),We.Nc(30,Tt,2,2,"ng-template",4),We.Vb(),We.Rb(31,"kendo-grid-column",24),We.Rb(32,"kendo-grid-column",25),We.Rb(33,"kendo-grid-column",26),We.Vb()),2&e&&(We.pc("loading",t.loading)("data",t.gridView)("resizable",!0)("reorderable",!0)("pageable",!0)("skip",t.pageInfo.skip)("pageSize",t.pageInfo.take)("sortable",We.tc(36,It))("sort",t.sortInfo)("selectable",!0)("rowSelected",t.getIsRowSelected),We.Cb(1),We.pc("width",100),We.Cb(1),We.pc("width",70),We.Cb(1),We.pc("width",140),We.Cb(2),We.pc("width",120),We.Cb(1),We.pc("width",90),We.Cb(2),We.pc("width",120),We.Cb(1),We.pc("width",120),We.Cb(3),We.pc("width",140),We.Cb(2),We.pc("width",130),We.Cb(1),We.pc("width",120),We.Cb(2),We.pc("width",120),We.Cb(2),We.pc("width",120),We.Cb(1),We.pc("width",100),We.Cb(1),We.pc("width",120),We.Cb(1),We.pc("width",100),We.Cb(1),We.pc("width",130),We.Cb(1),We.pc("width",130),We.Cb(1),We.pc("width",120),We.Cb(1),We.pc("width",120),We.Cb(1),We.pc("width",120),We.Cb(1),We.pc("width",120),We.Cb(1),We.pc("width",80),We.Cb(2),We.pc("width",130),We.Cb(1),We.pc("width",140),We.Cb(1),We.pc("width",140))},directives:[l.l,l.d,l.c,n.o],pipes:[n.f],styles:[""],changeDetection:0}),e})(),Pt=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=We.Kb({type:e,selectors:[["app-ho-reservation-list-ota-summary"]],inputs:{summary:"summary",totalCount:"totalCount"},decls:80,vars:36,consts:[[1,"table","table-bordered","mt30"],["width","8%"],["scope","row",1,"th-bg"]],template:function(e,t){1&e&&(We.Wb(0,"div",0),We.Wb(1,"table"),We.Wb(2,"caption"),We.Pc(3," \ud638\ud154 OTA \ud1b5\ud569\uc608\uc57d\uc870\ud68c summary "),We.Vb(),We.Wb(4,"colgroup"),We.Rb(5,"col",1),We.Rb(6,"col",1),We.Rb(7,"col",1),We.Rb(8,"col",1),We.Rb(9,"col",1),We.Rb(10,"col",1),We.Rb(11,"col",1),We.Rb(12,"col",1),We.Rb(13,"col",1),We.Rb(14,"col",1),We.Rb(15,"col",1),We.Rb(16,"col",1),We.Vb(),We.Wb(17,"tbody"),We.Wb(18,"tr"),We.Wb(19,"th",2),We.Pc(20,"\ucd1d \uac74\uc218"),We.Vb(),We.Wb(21,"td"),We.Pc(22),We.ic(23,"number"),We.Vb(),We.Wb(24,"th",2),We.Pc(25,"\ucd1d\uc0c1\ud488\uac00"),We.Vb(),We.Wb(26,"td"),We.Pc(27),We.ic(28,"number"),We.Vb(),We.Wb(29,"th",2),We.Pc(30,"\ucd1d \uacf5\uae09\uac00"),We.Vb(),We.Wb(31,"td"),We.Pc(32),We.ic(33,"number"),We.Vb(),We.Wb(34,"th",2),We.Pc(35,"\uacb0\uc81c\uae08\uc561"),We.Vb(),We.Wb(36,"td"),We.Pc(37),We.ic(38,"number"),We.Vb(),We.Wb(39,"th",2),We.Pc(40,"\ucd1d \uc778\uc6d0"),We.Vb(),We.Wb(41,"td"),We.Pc(42),We.ic(43,"number"),We.Vb(),We.Wb(44,"th",2),We.Pc(45,"\ub8f8\ub098\uc787"),We.Vb(),We.Wb(46,"td"),We.Pc(47),We.ic(48,"number"),We.Vb(),We.Vb(),We.Wb(49,"tr"),We.Wb(50,"th",2),We.Pc(51,"\ud504\ub85c\ubaa8\uc158"),We.Vb(),We.Wb(52,"td"),We.Pc(53),We.ic(54,"number"),We.Vb(),We.Wb(55,"th",2),We.Pc(56,"\ucfe0\ud3f0\ud560\uc778"),We.Vb(),We.Wb(57,"td"),We.Pc(58),We.ic(59,"number"),We.Vb(),We.Wb(60,"th",2),We.Pc(61,"\ud310\ub9e4\uac00"),We.Vb(),We.Wb(62,"td"),We.Pc(63),We.ic(64,"number"),We.Vb(),We.Wb(65,"th",2),We.Pc(66,"\uc218\uc775"),We.Vb(),We.Wb(67,"td"),We.Pc(68),We.ic(69,"number"),We.Vb(),We.Wb(70,"th",2),We.Pc(71,"\ucee4\ubbf8\uc158(\uc81c)\uae08\uc561"),We.Vb(),We.Wb(72,"td"),We.Pc(73),We.ic(74,"number"),We.Vb(),We.Wb(75,"th",2),We.Pc(76,"\uc2e4\uc218\uc775"),We.Vb(),We.Wb(77,"td"),We.Pc(78),We.ic(79,"number"),We.Vb(),We.Vb(),We.Vb(),We.Vb(),We.Vb()),2&e&&(We.Cb(22),We.Qc(We.jc(23,12,t.totalCount)),We.Cb(5),We.Qc(We.jc(28,14,null==t.summary?null:t.summary.salesAmount)),We.Cb(5),We.Qc(We.jc(33,16,null==t.summary?null:t.summary.sumNetAmount)),We.Cb(5),We.Qc(We.jc(38,18,null==t.summary?null:t.summary.paidAmount)),We.Cb(5),We.Qc(We.jc(43,20,null==t.summary?null:t.summary.travelerCount)),We.Cb(5),We.Qc(We.jc(48,22,null==t.summary?null:t.summary.roomNightCount)),We.Cb(6),We.Qc(We.jc(54,24,null==t.summary?null:t.summary.discountAmount)),We.Cb(5),We.Qc(We.jc(59,26,null==t.summary?null:t.summary.couponAmount)),We.Cb(5),We.Qc(We.jc(64,28,null==t.summary?null:t.summary.sumAmount)),We.Cb(5),We.Qc(We.jc(69,30,null==t.summary?null:t.summary.revenueNetAmount)),We.Cb(5),We.Qc(We.jc(74,32,null==t.summary?null:t.summary.affiliateCommAmount)),We.Cb(5),We.Qc(We.jc(79,34,null==t.summary?null:t.summary.revenueAmount)))},pipes:[n.f],encapsulation:2,changeDetection:0}),e})();var xt=i("7G9D"),Vt=i("bMKz"),At=i("UIHd");function Dt(e,t){if(1&e){const e=We.Xb();We.Wb(0,"a",12),We.fc("click",(function(){We.Fc(e);const i=t.$implicit;return We.hc().onClickBookingItemCode(i)})),We.Pc(1),We.Vb()}if(2&e){const e=t.$implicit;We.Cb(1),We.Qc(e.bookingItemCode)}}function Wt(e,t){if(1&e&&We.Pc(0),2&e){const e=t.$implicit;We.Rc(" ",e.hotelNameEn||e.hotelNameLn,"\n")}}function Ft(e,t){if(1&e&&(We.Pc(0),We.Wb(1,"span",13),We.Pc(2),We.Vb()),2&e){const e=t.$implicit;We.Rc(" ",e.checkInDate," "),We.Cb(2),We.Rc("[",e.nightCount,"]")}}function _t(e,t){if(1&e&&(We.Pc(0),We.Wb(1,"span",13),We.Pc(2),We.Vb()),2&e){const e=t.$implicit;We.Rc(" ",e.roomTypeNameEn,""),We.Cb(2),We.Rc("[",e.roomCount,"]")}}function Bt(e,t){if(1&e&&(We.Pc(0),We.ic(1,"number")),2&e){const e=t.$implicit;We.Sc(" ",e.billingCurrencyCode," ",We.jc(1,2,e.billingSumAmount),"\n")}}function Et(e,t){if(1&e&&(We.Pc(0),We.ic(1,"number")),2&e){const e=t.$implicit;We.Sc(" ",e.billingCurrencyCode," ",We.jc(1,2,e.billingBalanceAmount),"\n")}}function $t(e,t){1&e&&(We.Ub(0),We.Pc(1," Y "),We.Tb())}function Mt(e,t){1&e&&(We.Ub(0),We.Pc(1," N "),We.Tb())}function Ht(e,t){if(1&e&&(We.Nc(0,$t,2,0,"ng-container",14),We.Nc(1,Mt,2,0,"ng-container",14)),2&e){const e=t.$implicit;We.pc("ngIf",e.mutualContractBookingYn),We.Cb(1),We.pc("ngIf",!e.mutualContractBookingYn)}}function Yt(e,t){if(1&e&&(We.Ub(0),We.Wb(1,"span",17),We.Pc(2),We.Vb(),We.Tb()),2&e){const e=We.hc().$implicit;We.Cb(2),We.Qc(e.bookingStatusName)}}function Kt(e,t){if(1&e&&We.Pc(0),2&e){const e=We.hc().$implicit;We.Rc(" ",e.bookingStatusName," ")}}function zt(e,t){if(1&e&&(We.Nc(0,Yt,3,1,"ng-container",15),We.Nc(1,Kt,1,1,"ng-template",null,16,We.Oc)),2&e){const e=t.$implicit,i=We.Ec(2);We.pc("ngIf","BKS03"===e.bookingStatusCode||"BKS04"===e.bookingStatusCode||"BKS03"===e.bookingStatusCode||"BKS12"===e.bookingStatusCode||"BKS14"===e.bookingStatusCode||"BKS19"===e.bookingStatusCode)("ngIfElse",i)}}const Gt=function(e,t,i,o,n,a,c,s){return{bookingItemCodeTpl:e,hotelNameTpl:t,checkInDateTpl:i,roomCountTpl:o,billingSumAmountTpl:n,billingBalanceAmountTpl:a,mutualContractBookingYnTpl:c,statusTpl:s}};let Ut=(()=>{class e{constructor(e,t,i,n,a){this.store=e,this._dataService=t,this._fileService=i,this.authStore=n,this.UserConditionService=a,this._$unsubscribe=new R.a,this.columns=this._dataService.generateGridColumns(),this.pageSize$=e.pipe(Object(s.u)(Pe)),this.dateRangeTypeList$=e.pipe(Object(s.u)(fe)),this.stationTypeList$=e.pipe(Object(s.u)(ye)),this.deviceTypeList$=e.pipe(Object(s.u)(ve)),this.bookingStatusList$=e.pipe(Object(s.u)(ke)),this.contractTypeList$=e.pipe(Object(s.u)(Oe)),this.mainLoading$=e.pipe(Object(s.u)(Le)),this.searchCondition$=e.pipe(Object(s.u)(Re)),this.otherSearchInfo$=e.pipe(Object(s.u)(je)),this.mainDataList$=e.pipe(Object(s.u)(Ne)),this.mainSummaryInfo$=e.pipe(Object(s.u)(Te)),this.mainDataTotalCount$=e.pipe(Object(s.u)(Ie)),this.gridState$=e.pipe(Object(s.u)(we)),this.paymentStatusList$=e.pipe(Object(s.u)(Se)),this.storeId$=n.pipe(Object(s.u)(xe.o)),e.dispatch(o.initThisStateAction())}ngAfterContentInit(){this._requestCommonDetailCodes(),this._initSubscription()}ngOnInit(){this._initSearchCondition(),this.storeId$.subscribe(e=>this._storeId=e)}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}gridPageChangeHandler(e){this._isSearchClick=!0,this.store.dispatch(o.changeMainListPageIndexAction({pageIndex:e}))}changePageSizeHandler(e){this._isSearchClick=!0,this.store.dispatch(o.changeMainListPageSizeAction({pageSize:e})),this.store.dispatch(o.changeMainListPageIndexAction({pageIndex:0}))}clickOffRegistHandler(){this.store.dispatch(o.openOffRegistPopup())}closeOffRegistHandler(){this.store.dispatch(o.closeOffRegistPopup())}clickAssignPicHandler(){this.store.dispatch(o.openAssignPicModalAction())}closeAssignPicHandler(){this.store.dispatch(o.closeAssignPicModalAction())}submitAssignPicHandler(e){const t=w.cloneDeep(e);this.store.dispatch(o.updateAssignPicItems({updateCondition:t})),this.closeAssignPicHandler()}clickSearchHandler({searchCondition:e,otherSearchInfo:t}){this._isSearchClick=!0,this.store.dispatch(o.changeSearchConditionAction({searchCondition:e,otherSearchInfo:t})),this.store.dispatch(o.changeMainListPageIndexAction({pageIndex:0}))}clickResetHandler(){const e=this._dataService.initHoReservationListOtaSearchForm();this.store.dispatch(o.changeSearchConditionAction({searchCondition:e,otherSearchInfo:null}))}excelDownloadHandler(){const e=this._setSearchCondition(this.searchFormEl.formValue);this._fileService.fileDownload({url:De.excelDownload,filename:"\ud638\ud154\uc608\uc57d\uc870\ud68c\ub9ac\uc2a4\ud2b8",type:"excel",params:e,requestMethod:"post"})}onClickBookingItemCode(e){window.open(`${window.location.origin}/reservation/hotel/${e.bookingItemCode}?tabName=BOOKING_DETAIL`,"_blank","height=950,width=1800,left=0,top=0,toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=no,status=no")}gridStateChangeHandler(e){this._isSearchClick=!0,this.store.dispatch(o.setGridStateAction({gridState:e}))}_initSubscription(){if(Object(j.a)([this.searchCondition$,this.gridState$]).pipe(Object(L.a)(1),Object(N.a)(200),Object(T.a)(()=>!0===this._isSearchClick),Object(I.a)(this._$unsubscribe)).subscribe(([e,{pageInfo:t}])=>{const i=[t.skip,t.skip+t.take],n=Object.assign({},this._setSearchCondition(e),{limits:i});this._isSearchClick=!1,this.store.dispatch(o.loadMainListAction({condition:n}))}),this.searchCondition$.subscribe(e=>this._searchCondition=e),this.mainDataList$.subscribe(e=>this._searchGridDataList=e),this.otherSearchInfo$.subscribe(e=>this._otherSearchInfo=e),0===w.size(this._searchCondition)&&0===w.size(this._searchGridDataList)){const e=this._dataService.initHoReservationListOtaSearchForm(),t=this.UserConditionService.selectSearchSetting(e,this._storeId,this._otherSearchInfo);this.store.dispatch(o.changeSearchConditionAction({searchCondition:t[0],otherSearchInfo:t[1]}))}}_setSearchCondition(e){const t=(e.dateRange2.dates.some(e=>w.isNil(e))?null:e.dateRange2.dates)&&e.dateRange2,i=e.dateRange3.dates.some(e=>w.isNil(e))?null:e.dateRange3.dates,o=Object.assign({},e,{dateRange2:t,dateRange3:i&&e.dateRange3});return w.omitBy(o,w.isNil)}_requestCommonDetailCodes(){this.store.dispatch(o.loadDateRangeTypeAction({condition:{masterCode:"HO017"}})),this.store.dispatch(o.loadStationTypeAction({condition:{masterCode:"BS002"}})),this.store.dispatch(o.loadDeviceTypeAction({condition:{masterCode:"BS037"}})),this.store.dispatch(o.loadBookingStatusAction({condition:{masterCode:"BK001",referCode1:"IC02"}})),this.store.dispatch(o.loadContractTypeAction({condition:{masterCode:"HO023"}})),this.store.dispatch(o.loadPaymentStatusListAction({condition:{masterCode:"BK014"}}))}_initSearchCondition(){}}return e.\u0275fac=function(t){return new(t||e)(We.Qb(s.h),We.Qb($e),We.Qb(xt.a),We.Qb(s.h),We.Qb(Vt.a))},e.\u0275cmp=We.Kb({type:e,selectors:[["app-ho-reservation-list-ota"]],viewQuery:function(e,t){var i;1&e&&(We.Xc(Ct,!0),We.Xc(wt,!0)),2&e&&(We.Dc(i=We.gc())&&(t.searchFormEl=i.first),We.Dc(i=We.gc())&&(t.gridEl=i.first))},decls:35,vars:58,consts:[[3,"searchCondition","dateRangeTypeList","stationTypeList","deviceTypeList","bookingStatusList","contractTypeList","paymentList","otherSearchInfo","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","changePageSizeEvent","excelDownloadEvent"],["bookingItemCodeTpl",""],["hotelNameTpl",""],["checkInDateTpl",""],["roomCountTpl",""],["billingSumAmountTpl",""],["billingBalanceAmountTpl",""],["mutualContractBookingYnTpl",""],["statusTpl",""],[3,"gridLoading","columns","gridState","totalCount","checkboxUseYn","dataList","sortable","templates","stateChangeEvent"],["gridEl",""],[1,"text-underline",3,"click"],[2,"font-weight","bold"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["others",""],[1,"color-red"]],template:function(e,t){if(1&e&&(We.Wb(0,"app-ho-reservation-list-ota-search",0),We.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),We.ic(1,"async"),We.ic(2,"async"),We.ic(3,"async"),We.ic(4,"async"),We.ic(5,"async"),We.ic(6,"async"),We.ic(7,"async"),We.ic(8,"async"),We.Vb(),We.Wb(9,"app-ho-reservation-list-ota-control",1),We.fc("changePageSizeEvent",(function(e){return t.changePageSizeHandler(e)}))("excelDownloadEvent",(function(){return t.excelDownloadHandler()})),We.ic(10,"async"),We.ic(11,"async"),We.ic(12,"async"),We.Vb(),We.Nc(13,Dt,2,1,"ng-template",null,2,We.Oc),We.Nc(15,Wt,1,1,"ng-template",null,3,We.Oc),We.Nc(17,Ft,3,2,"ng-template",null,4,We.Oc),We.Nc(19,_t,3,2,"ng-template",null,5,We.Oc),We.Nc(21,Bt,2,4,"ng-template",null,6,We.Oc),We.Nc(23,Et,2,4,"ng-template",null,7,We.Oc),We.Nc(25,Ht,2,2,"ng-template",null,8,We.Oc),We.Nc(27,zt,3,2,"ng-template",null,9,We.Oc),We.Wb(29,"app-grid-simple",10,11),We.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)})),We.ic(31,"async"),We.ic(32,"async"),We.ic(33,"async"),We.ic(34,"async"),We.Vb()),2&e){const e=We.Ec(14),i=We.Ec(16),o=We.Ec(18),n=We.Ec(20),a=We.Ec(22),c=We.Ec(24),s=We.Ec(26),l=We.Ec(28);We.pc("searchCondition",We.jc(1,19,t.searchCondition$))("dateRangeTypeList",We.jc(2,21,t.dateRangeTypeList$))("stationTypeList",We.jc(3,23,t.stationTypeList$))("deviceTypeList",We.jc(4,25,t.deviceTypeList$))("bookingStatusList",We.jc(5,27,t.bookingStatusList$))("contractTypeList",We.jc(6,29,t.contractTypeList$))("paymentList",We.jc(7,31,t.paymentStatusList$))("otherSearchInfo",We.jc(8,33,t.otherSearchInfo$)),We.Cb(9),We.pc("loading",We.jc(10,35,t.mainLoading$))("currentPageSize",We.jc(11,37,t.pageSize$))("totalCount",We.jc(12,39,t.mainDataTotalCount$)),We.Cb(20),We.pc("gridLoading",We.jc(31,41,t.mainLoading$))("columns",t.columns)("gridState",We.jc(32,43,t.gridState$))("totalCount",We.jc(33,45,t.mainDataTotalCount$))("checkboxUseYn",!1)("dataList",We.jc(34,47,t.mainDataList$))("sortable",!0)("templates",We.Bc(49,Gt,e,i,o,n,a,c,s,l))}},directives:[Ct,ft,At.a,n.o],pipes:[n.b,n.f],encapsulation:2,changeDetection:0}),e})();const Qt=[{path:"",component:Ut}];let qt=(()=>{class e{}return e.\u0275mod=We.Ob({type:e}),e.\u0275inj=We.Nb({factory:function(t){return new(t||e)},imports:[[S.f.forChild(Qt)],S.f]}),e})();var Xt=i("bOdf"),Jt=i("zp1y"),Zt=i("IzEk"),ei=i("lJxs"),ti=i("JIr8"),ii=i("vkgz"),oi=i("Xb6A");let ni=(()=>{class e{constructor(e,t,i,n,a){this._actions=e,this._apiService=t,this._errorService=i,this._alertService=n,this._store=a,this.loadDateRangeType$=Object(c.c)(()=>this._actions.pipe(Object(c.d)(o.loadDateRangeTypeAction),Object(Xt.a)(e=>Object(Me.a)(e).pipe(Object(Jt.a)(this.dateRangeTypeList$.pipe(Object(Zt.a)(1))))),Object(Ye.a)(([{condition:e},t])=>w.isNil(t)||0===t.length?this._apiService.getCommonDetailCodeList(e).pipe(Object(ei.a)(e=>o.loadDateRangeTypeSuccessAction({dataList:e})),Object(ti.a)(e=>{const t="DateRangeType list lookup failed.",i=[o.loadDateRangeTypeFailureAction({error:t})];return this._catchErr(e,t,i),[]})):Object(Me.a)(o.loadDateRangeTypeSuccessAction({dataList:t}))))),this.loadStationType$=Object(c.c)(()=>this._actions.pipe(Object(c.d)(o.loadStationTypeAction),Object(Xt.a)(e=>Object(Me.a)(e).pipe(Object(Jt.a)(this.stationTypeList$.pipe(Object(Zt.a)(1))))),Object(Ye.a)(([{condition:e},t])=>w.isNil(t)||0===t.length?this._apiService.getCommonDetailCodeList(e).pipe(Object(ei.a)(e=>o.loadStationTypeSuccessAction({dataList:e})),Object(ti.a)(e=>{const t="The StationType list lookup failed.",i=[o.loadStationTypeFailureAction({error:t})];return this._catchErr(e,t,i),[]})):Object(Me.a)(o.loadStationTypeSuccessAction({dataList:t}))))),this.loadDeviceType$=Object(c.c)(()=>this._actions.pipe(Object(c.d)(o.loadDeviceTypeAction),Object(Xt.a)(e=>Object(Me.a)(e).pipe(Object(Jt.a)(this.deviceTypeList$.pipe(Object(Zt.a)(1))))),Object(Ye.a)(([{condition:e},t])=>w.isNil(t)||0===t.length?this._apiService.getCommonDetailCodeList(e).pipe(Object(ei.a)(e=>o.loadDeviceTypeSuccessAction({dataList:e})),Object(ti.a)(e=>{const t="The DeviceType list lookup failed.",i=[o.loadDeviceTypeFailureAction({error:t})];return this._catchErr(e,t,i),[]})):Object(Me.a)(o.loadDeviceTypeSuccessAction({dataList:t}))))),this.loadBookingStatus$=Object(c.c)(()=>this._actions.pipe(Object(c.d)(o.loadBookingStatusAction),Object(Xt.a)(e=>Object(Me.a)(e).pipe(Object(Jt.a)(this.bookingStatusList$.pipe(Object(Zt.a)(1))))),Object(Ye.a)(([{condition:e},t])=>w.isNil(t)||0===t.length?this._apiService.getCommonDetailCodeList(e).pipe(Object(ei.a)(e=>o.loadBookingStatusSuccessAction({dataList:e})),Object(ti.a)(e=>{const t="The BookingStatus list lookup failed.",i=[o.loadBookingStatusFailureAction({error:t})];return this._catchErr(e,t,i),[]})):Object(Me.a)(o.loadBookingStatusSuccessAction({dataList:t}))))),this.loadMainList$=Object(c.c)(()=>this._actions.pipe(Object(c.d)(o.loadMainListAction),Object(Ye.a)(({condition:e})=>(e=w.omit(e,["selectedBookerDropdown"]),this._apiService.getMainList(e).pipe(Object(ei.a)(e=>o.loadMainListSuccessAction({dataCollection:e})),Object(ti.a)(e=>{const t="List lookup failed. Please try again in a momentarily.",i=[o.loadMainListFailureAction({error:t})];return this._catchErr(e,t,i),[]})))))),this.updateAssignPicItems$=Object(c.c)(()=>this._actions.pipe(Object(c.d)(o.updateAssignPicItems),Object(Ye.a)(({updateCondition:e})=>this._apiService.updateAssignPicItems(e).pipe(Object(ei.a)(e=>({succeedYn:!0,updateList:e})),Object(ti.a)(e=>Object(Me.a)({succeedYn:!1,error:e})))),Object(ii.a)(({succeedYn:e,error:t,updateList:i})=>{if(e){const e="The bulk change of assignee was successful.",t=[o.updateAssignPicItemsSuccess({updateList:i}),o.closeAssignPicModalAction()];this._runPage(e,t)}else{const e="The bulk change of assignee failed.",i=[o.updateAssignPicItemsFailure({error:e})];this._catchErr(t,e,i)}})),{dispatch:!1}),this.loadPaymentStatusList$=Object(c.c)(()=>this._actions.pipe(Object(c.d)(o.loadPaymentStatusListAction),Object(Ye.a)(({condition:e})=>this._apiService.getCommonDetailCodeList(e).pipe(Object(ei.a)(e=>o.loadPaymentStatusListSuccessAction({dataList:e})),Object(ti.a)(e=>(this._catchErr(e,"List lookup failed. Please try again in a momentarily.",[]),[])))))),this.loadContractTypeAction$=Object(c.c)(()=>this._actions.pipe(Object(c.d)(o.loadContractTypeAction),Object(Ye.a)(({condition:e})=>this._apiService.getCommonDetailCodeList(e).pipe(Object(ei.a)(e=>o.loadContractTypesSuccessAction({dataList:e})),Object(ti.a)(e=>(this._catchErr(e,"List lookup failed. Please try again in a momentarily.",[]),[])))))),this.dateRangeTypeList$=this._store.select(fe),this.stationTypeList$=this._store.select(ye),this.deviceTypeList$=this._store.select(ve),this.bookingStatusList$=this._store.select(ke)}_runPage(e,t){this._alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this._store.dispatch(e)})}:()=>{}})}_catchErr(e,t,i){const o=this._errorService.errorHandler(e,t);w.isNil(o)||(w.isNil(o.accept)&&(o.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(e=>{this._store.dispatch(e)})}:()=>{}),this._alertService.alert(o))}}return e.\u0275fac=function(t){return new(t||e)(We.bc(c.a),We.bc(ze),We.bc(oi.a),We.bc(Ge.a),We.bc(s.h))},e.\u0275prov=We.Mb({token:e,factory:e.\u0275fac}),e})();var ai=i("w8np"),ci=i("YH7L"),si=i("FGZR");const li=[Ut],ri=[Ct,ft,wt,Pt];let di=(()=>{class e{}return e.\u0275mod=We.Ob({type:e}),e.\u0275inj=We.Nb({factory:function(t){return new(t||e)},imports:[[n.c,a.m,a.w,l.m,r.a,d.a,u.a,p.a,b.a,m.a,h.a,g.a,C.a,f.a,y.a,v.a,k.a,O.a,qt,ci.a,si.a,s.j.forFeature("hoReservationListOta",he),c.b.forFeature([ni]),ai.a]]}),e})()}}]);