(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"/Bmo":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var s=i("XNiG"),n=i("1G5W"),a=i("kt0X"),o=i("Dwql"),r=i("LpL+"),c=i("YY+H"),l=i("fXoL"),p=i("sW+t"),d=i("ofXK");let u=(()=>{class e{constructor(e,t){this.store=e,this.authStore=t,this._$unsubscribe=new s.a,this.templateTypeList$=e.pipe(Object(a.u)(r.e)),this.templateList$=e.pipe(Object(a.u)(r.d)),this.selectedTemplateInfo$=e.pipe(Object(a.u)(r.c)),this.loginUserInfo$=t.pipe(Object(a.u)(c.r))}ngOnInit(){this._initSubscribe()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}changeSendTypeHandler(e){}changeTemplateHandler(e){this._loadUmsTemplateInfo(e)}sendUmsHandler(e){this.store.dispatch(o.a.sendUmsAction({condition:e}))}_loadUmsTemplateInfo(e){this.store.dispatch(o.a.loadTemplateInfoAction({condition:Object.assign(Object.assign({},e),{stationTypeCode:this.stationTypeCode,bookingItemCode:this.bookingItemCode})}))}_initSubscribe(){this.loginUserInfo$.pipe(Object(n.a)(this._$unsubscribe)).subscribe(e=>{const{userNo:t}=e;this.senderInfo={userNo:t,name:"\uc624\ub9c8\uc774\ud638\ud154",phoneNo:"02-733-0550",emailAddress:"cscenter@ohmyhotel.com"}})}}return e.\u0275fac=function(t){return new(t||e)(l.Qb(a.h),l.Qb(a.h))},e.\u0275cmp=l.Kb({type:e,selectors:[["app-ums"]],hostAttrs:[1,"tab-pane"],hostVars:2,hostBindings:function(e,t){2&e&&l.Gb("active",t.active)},inputs:{active:"active",itemCategoryCode:"itemCategoryCode",stationTypeCode:"stationTypeCode",bookingItemCode:"bookingItemCode",bookingCode:"bookingCode",booker:"booker",bookers:"bookers"},decls:4,vars:14,consts:[[3,"itemCategoryCode","bookingItemCode","bookingCode","bookers","sender","sendTypeList","templateList","templateInfo","changeSendTypeEvent","changeTemplateEvent","submitEvent"]],template:function(e,t){1&e&&(l.Wb(0,"app-ums-form",0),l.fc("changeSendTypeEvent",(function(e){return t.changeSendTypeHandler(e)}))("changeTemplateEvent",(function(e){return t.changeTemplateHandler(e)}))("submitEvent",(function(e){return t.sendUmsHandler(e)})),l.ic(1,"async"),l.ic(2,"async"),l.ic(3,"async"),l.Vb()),2&e&&l.pc("itemCategoryCode",t.itemCategoryCode)("bookingItemCode",t.bookingItemCode)("bookingCode",t.bookingCode)("bookers",t.bookers)("sender",t.senderInfo)("sendTypeList",l.jc(1,8,t.templateTypeList$))("templateList",l.jc(2,10,t.templateList$))("templateInfo",l.jc(3,12,t.selectedTemplateInfo$))},directives:[p.a],pipes:[d.b],encapsulation:2,changeDetection:0}),e})()},"7G9D":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("tk/3"),n=i("IzEk"),a=i("LvDl"),o=i("fXoL"),r=i("tpT/"),c=i("EsKh");let l=(()=>{class e{constructor(e,t){this.api=e,this.alertService=t}imageCheck(e){if(0===e.target.files.length)return!1;const t=e.target.files[0];if(t.size>2e6)return this.alertService.alert("\ud30c\uc77c \uc0ac\uc774\uc988\ub294 2MB\ub97c \ub118\uae38 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"),!1;let i=this.parseFileName(t.name);const s=i.toLowerCase(),n=s.lastIndexOf("."),a=s.substring(n+1);if(n<0)i+=".jpg";else if("jpg"!==a&&"png"!==a&&"jpeg"!==a)return this.alertService.alert("\uc774\ubbf8\uc9c0 \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return t}pdfCheck(e){if(0===e.target.files.length)return!1;const t=e.target.files[0];let i=this.parseFileName(t.name);const s=i.toLowerCase(),n=s.lastIndexOf("."),a=s.substring(n+1);if(n<0)i+=".pdf";else if("pdf"!==a)return this.alertService.alert("PDF \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return t}excelCheck(e){if(0===e.target.files.length)return!1;const t=e.target.files[0];let i=this.parseFileName(t.name);const s=i.toLowerCase(),n=s.lastIndexOf("."),a=s.substring(n+1);if(n<0)i+=".xls";else if("xls"!==a&&"xlsx"!==a)return this.alertService.alert("\uc5d1\uc140 \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return t}imageUpload(e,t){const i=new FormData;for(const n in t)if(t.hasOwnProperty(n))try{i.set(n,t[n])}catch(s){i.append(n,t[n])}return this.api.post(e,i)}fileUpload(e,t){const i=new FormData;for(const n in t)if(t.hasOwnProperty(n))try{i.set(n,t[n])}catch(s){i.append(n,t[n])}return this.api.put(e,i)}fileDelete(e,t){const i=Object.assign({},this.api.defaultParams,{condition:t});return this.api.delete(e,i)}fileDownload(e){let t,i;switch(e.params||(e=Object.assign(e,{params:""})),e.type||(e.type="excel"),e.type){case"excel":t=".xls",i="application/vnd.ms-excel";break;case"pdf":t=".pdf",i="application/pdf"}const o=s=>{const n=document.createElement("a"),a=new Blob([s],{type:i});n.href=URL.createObjectURL(a),n.download=e.filename+t,n.click()};if("post"===e.requestMethod){const t=a.assign({},this.api.defaultParams,{condition:e.params});return this.api.postBlob(e.url,t).pipe(Object(n.a)(1)).subscribe(e=>{"application/json"===e.type?this.alertService.alert("You must wait a minute before making another request."):o(e)})}return this.api.get(e.url,e.params,{responseType:"blob",headers:new s.e({"Content-Type":"application/json",Accept:"application/json"})}).pipe(Object(n.a)(1)).subscribe(e=>{o(e)})}parseFileName(e){const t=/[\{\}\[\]\/?,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"' ']/gi,i=e;return t.test(i)?i.replace(t,""):i}}return e.\u0275fac=function(t){return new(t||e)(o.bc(r.a),o.bc(c.a))},e.\u0275prov=o.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"8A7v":function(e,t,i){"use strict";i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return h}));var s=i("LRne"),n=i("z6cu"),a=i("eIep"),o=i("LvDl"),r=i("AytR");const{API_URL:c}=r.a,l={selectDetailCode:`${c}/common/detail-code`,postBasisWordSetup:`${c}/admin/basis/word-setup`,postUms:`${c}/common/ums/send`};var p=i("fXoL"),d=i("tpT/");let u=(()=>{class e{constructor(e){this.api=e}getTemplateTypeList(e){const t=o.assign({},this.api.defaultParams,{condition:e});return this.api.post(l.selectDetailCode,t).pipe(Object(a.a)(e=>e.succeedYn?Object(s.a)(e.result.list):Object(n.a)(e||"api response error")))}getBasisWordSetupList(e){const t=o.assign({},this.api.defaultParams,{condition:e});return this.api.post(l.postBasisWordSetup,t).pipe(Object(a.a)(e=>e.succeedYn?Object(s.a)(e.result.list):Object(n.a)(e||"api response error")))}sendUms(e){const t=o.assign({},this.api.defaultParams,{condition:e});return this.api.post(l.postUms,t).pipe(Object(a.a)(e=>e.succeedYn?Object(s.a)(e.result):Object(n.a)(e||"api response error")))}}return e.\u0275fac=function(t){return new(t||e)(p.bc(d.a))},e.\u0275prov=p.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=i("3Pt+"),b=i("6UzV");let h=(()=>{class e{constructor(e){this.fb=e,this.generateUmsPutForm=()=>this.fb.group({bookingCode:[null],bookingItemCode:[null],sender:this.fb.group({userNo:[null],name:[{value:null,disabled:!0},[m.z.required]],phoneNo:[null,[m.z.required]],emailAddress:[null,[m.z.required,b.a.email()]]}),receivers:this.fb.array([this.generateUmsReceiver({smsSendYn:!0,emailSendYn:!1})]),smsSendYn:[null],emailSendYn:[null],itemCategoryCode:[null],sendTypeCode:[null,[m.z.required]],alimTalkTemplateCode:[null],smsTitle:[null],smsDetail:[null,[m.z.required]],emailTitle:[null],emailDetail:[null]}),this.initUmsPutForm=()=>({bookingCode:null,bookingItemCode:null,sender:{userNo:null,name:null,phoneNo:null,emailAddress:null},receivers:[{userNo:null,name:null,phoneNo:null,emailAddress:null}],smsSendYn:!0,emailSendYn:!1,itemCategoryCode:null,sendTypeCode:"UMH01",alimTalkTemplateCode:null,smsTitle:null,smsDetail:null,emailTitle:null,emailDetail:null})}generateUmsReceiver({smsSendYn:e,emailSendYn:t}){const i=e?[m.z.required,b.a.mobile()]:[b.a.mobile()],s=t?[m.z.required,b.a.email()]:[b.a.email()];return this.fb.group({userNo:[null],name:[null],phoneNo:[null,i],emailAddress:[null,s]})}}return e.\u0275fac=function(t){return new(t||e)(p.bc(m.f))},e.\u0275prov=p.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},Dwql:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var s={};i.r(s),i.d(s,"loadTemplateTypeAction",(function(){return a})),i.d(s,"loadTemplateTypeSuccessAction",(function(){return o})),i.d(s,"loadTemplateTypeFailureAction",(function(){return r})),i.d(s,"loadTemplateListAction",(function(){return c})),i.d(s,"loadTemplateListSuccessAction",(function(){return l})),i.d(s,"loadTemplateListFailureAction",(function(){return p})),i.d(s,"loadTemplateInfoAction",(function(){return d})),i.d(s,"loadTemplateInfoSuccessAction",(function(){return u})),i.d(s,"loadTemplateInfoFailureAction",(function(){return m})),i.d(s,"sendUmsAction",(function(){return b})),i.d(s,"sendUmsSuccessAction",(function(){return h})),i.d(s,"sendUmsFailureAction",(function(){return f}));var n=i("kt0X");const a=Object(n.o)("[Ums] load template type",Object(n.t)()),o=Object(n.o)("[Ums] load template type success",Object(n.t)()),r=Object(n.o)("[Ums] load template type failure",Object(n.t)()),c=Object(n.o)("[Ums] load template list",Object(n.t)()),l=Object(n.o)("[Ums] load template list success",Object(n.t)()),p=Object(n.o)("[Ums] load template list failure",Object(n.t)()),d=Object(n.o)("[Ums] load template info",Object(n.t)()),u=Object(n.o)("[Ums] load template info success",Object(n.t)()),m=Object(n.o)("[Ums] load template info failure",Object(n.t)()),b=Object(n.o)("[Ums] load send ums",Object(n.t)()),h=Object(n.o)("[Ums] load send ums success"),f=Object(n.o)("[Ums] load send ums failure",Object(n.t)())},"LpL+":function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return r})),i.d(t,"e",(function(){return p})),i.d(t,"d",(function(){return d})),i.d(t,"c",(function(){return u}));var s=i("kt0X"),n=i("Dwql");const a=Object(s.q)({templateTypeList:null,templateList:null,selectedTemplateInfo:null},Object(s.s)(n.a.loadTemplateTypeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{templateTypeList:t})),Object(s.s)(n.a.loadTemplateListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{templateList:t})),Object(s.s)(n.a.loadTemplateInfoSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{selectedTemplateInfo:t[0]||null}))),o="ums";function r(e,t){return Object(s.m)({main:a})(e,t)}const c=Object(s.p)(o),l=Object(s.r)(c,e=>e.main),p=Object(s.r)(l,e=>e.templateTypeList),d=Object(s.r)(l,e=>e.templateList),u=Object(s.r)(l,e=>e.selectedTemplateInfo)},YyVL:function(e,t,i){"use strict";i.d(t,"a",(function(){return N}));var s=i("ofXK"),n=i("3Pt+"),a=i("snw9"),o=i("kt0X"),r=i("WG3B"),c=i("xoAz"),l=i("wPo9"),p=i("7rOj"),d=i("+NQf"),u=i("6LsY"),m=i("l1P7"),b=i("v7zA"),h=i("7UZF"),f=i("hHe4"),v=i("1OXJ"),g=i("5hwk"),T=i("lxvf"),y=i("vu/V"),O=(i("/Bmo"),i("sW+t"),i("LpL+")),j=i("LRne"),C=i("bOdf"),S=i("zp1y"),I=i("IzEk"),k=i("eIep"),V=i("lJxs"),L=i("JIr8"),F=i("LvDl"),A=i("Dwql"),_=i("fXoL"),U=i("8A7v"),W=i("Xb6A"),D=i("EsKh");let w=(()=>{class e{constructor(e,t,i,s,n){this._actions$=e,this._apiService=t,this.store=i,this._errorService=s,this.alertService=n,this.loadTemplateType$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(A.a.loadTemplateTypeAction),Object(C.a)(e=>Object(j.a)(e).pipe(Object(S.a)(this.templateTypeList$.pipe(Object(I.a)(1))))),Object(k.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getTemplateTypeList(e).pipe(Object(V.a)(e=>A.a.loadTemplateTypeSuccessAction({dataList:e})),Object(L.a)(e=>{const t="TemplateType list lookup failed.",i=[A.a.loadTemplateTypeFailureAction({error:t})];return this._catchErr(e,t,i),[]})):Object(j.a)(A.a.loadTemplateTypeSuccessAction({dataList:F.cloneDeep(i)}))))),this.loadTemplateList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(A.a.loadTemplateListAction),Object(k.a)(({condition:e})=>this._apiService.getBasisWordSetupList(e).pipe(Object(V.a)(e=>A.a.loadTemplateListSuccessAction({dataList:e})),Object(L.a)(e=>{const t="Template list lookup failed.",i=[A.a.loadTemplateListFailureAction({error:t})];return this._catchErr(e,t,i),[]}))))),this.loadTemplateInfo$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(A.a.loadTemplateInfoAction),Object(k.a)(({condition:e})=>this._apiService.getBasisWordSetupList(e).pipe(Object(V.a)(e=>A.a.loadTemplateInfoSuccessAction({dataList:e})),Object(L.a)(e=>{const t="Failed to retrieve template information.",i=[A.a.loadTemplateInfoFailureAction({error:t})];return this._catchErr(e,t,i),[]}))))),this.sendUms$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(A.a.sendUmsAction),Object(k.a)(({condition:e})=>this._apiService.sendUms(e).pipe(Object(V.a)(e=>{const t=[A.a.sendUmsSuccessAction()];this._runPage("The message was successfully sent.",t)}),Object(L.a)(e=>{const t="UMS dispatch failed.",i=[A.a.sendUmsFailureAction({error:t})];return this._catchErr(e,t,i),[]})))),{dispatch:!1}),this.templateTypeList$=i.pipe(Object(o.u)(O.e))}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this.store.dispatch(e)})}:()=>{}})}_catchErr(e,t,i){const s=this._errorService.errorHandler(e,t);F.isNil(s)||(F.isNil(s.accept)&&(s.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(e=>{this.store.dispatch(e)})}:()=>{}),this.alertService.alert(s))}}return e.\u0275fac=function(t){return new(t||e)(_.bc(a.a),_.bc(U.b),_.bc(o.h),_.bc(W.a),_.bc(D.a))},e.\u0275prov=_.Mb({token:e,factory:e.\u0275fac}),e})(),N=(()=>{class e{}return e.\u0275mod=_.Ob({type:e}),e.\u0275inj=_.Nb({factory:function(t){return new(t||e)},imports:[[s.c,n.m,n.w,r.m,c.a,l.a,p.a,g.a,d.a,u.a,m.a,b.a,h.a,f.a,v.a,T.a,y.a,o.j.forFeature(O.a,O.b),a.b.forFeature([w])]]}),e})()},"sW+t":function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var s=i("fXoL"),n=i("XNiG"),a=i("1G5W"),o=i("LvDl"),r=i("3Pt+"),c=i("6UzV"),l=i("8A7v"),p=i("EsKh"),d=i("+Sob"),u=i("gbCm"),m=i("ofXK"),b=i("pb6r");const h=["templateSearch"];function f(e,t){if(1&e){const e=s.Xb();s.Wb(0,"a",30),s.fc("click",(function(){return s.Fc(e),s.hc(2).onAddReceiver()})),s.Pc(1,"\ucd94\uac00"),s.Vb()}}function v(e,t){if(1&e){const e=s.Xb();s.Wb(0,"a",31),s.fc("click",(function(){s.Fc(e);const t=s.hc().index;return s.hc().onDelReceiver(t)})),s.Pc(1,"\uc0ad\uc81c"),s.Vb()}}const g=function(e){return["receivers",e,"name"]},T=function(e){return["receivers",e,"phoneNo"]},y=function(e){return["receivers",e,"emailAddress"]};function O(e,t){if(1&e&&(s.Wb(0,"tr",27),s.Wb(1,"th",8),s.Pc(2," RECP "),s.Nc(3,f,2,0,"a",28),s.Nc(4,v,2,0,"a",29),s.Vb(),s.Wb(5,"td"),s.Rb(6,"app-input-text",9),s.Vb(),s.Wb(7,"th",8),s.Pc(8,"No."),s.Vb(),s.Wb(9,"td"),s.Rb(10,"app-input-text",10),s.Vb(),s.Wb(11,"th",8),s.Pc(12,"Email"),s.Vb(),s.Wb(13,"td"),s.Rb(14,"app-input-text",11),s.Vb(),s.Vb()),2&e){const e=t.index,i=s.hc();s.pc("formGroupName",e),s.Cb(3),s.pc("ngIf",0===e),s.Cb(1),s.pc("ngIf",e>0),s.Cb(2),s.pc("isInvalid",i.checkIsInvalid(s.uc(6,g,e))),s.Cb(4),s.pc("isInvalid",i.checkIsInvalid(s.uc(8,T,e))),s.Cb(4),s.pc("isInvalid",i.checkIsInvalid(s.uc(10,y,e)))}}const j=function(){return["sender","name"]},C=function(){return["sender","phoneNo"]},S=function(){return["sender","emailAddress"]};let I=(()=>{class e{constructor(e,t,i){this._dataService=e,this._cd=t,this.alertService=i,this.changeSendTypeEvent=new s.n,this.changeTemplateEvent=new s.n,this.submitEvent=new s.n,this._$unsubscribe=new n.a,this.putForm=this._dataService.generateUmsPutForm(),this.putFormData=this._dataService.initUmsPutForm(),this.categoryOptionList=[{value:"IC01",label:"\ud56d\uacf5"},{value:"IC02",label:"\ud638\ud154"},{value:"IC03",label:"\ub80c\ud130\uce74"},{value:"IC04",label:"\uc561\ud2f0\ube44\ud2f0"}],this._initFormSub()}get sendTypeList(){return this._sendTypeList}set sendTypeList(e){this._sendTypeList=null==e?void 0:e.filter(e=>["UFL99","UHT99","URT99","UAT99","UMS01"].indexOf(e.detailCode)<0)}get receivers(){return this.putForm.get("receivers")}ngOnChanges(e){(null==e?void 0:e.sendTypeList)&&!1===e.sendTypeList.firstChange?this._setDefaultSendType():(null==e?void 0:e.templateList)&&!1===e.templateList.firstChange?(this.filteredTemplateList=o.cloneDeep(e.templateList.currentValue),this.templateKeyword=""):(null==e?void 0:e.templateInfo)&&!1===e.templateInfo.firstChange?this._setTemplate():(this.putFormData=this._setPutFormData(),this._setReceivers())}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onAddReceiver(){if(this.receivers.length>4)return void this.alertService.alert("No more can be added.");const e=this.putForm.get("smsSendYn").value,t=this.putForm.get("emailSendYn").value;this.receivers.push(this._dataService.generateUmsReceiver({smsSendYn:e,emailSendYn:t}))}onDelReceiver(e){this.receivers.removeAt(e)}onChangeTemplateCode(e,t){const{wordingSetupSeq:i}=t;this.changeTemplateEvent.emit({wordingSetupSeq:i})}onSubmit(){if(this.putForm.invalid){this._checkValid=!0;const{smsSendYn:e,emailSendYn:t,receivers:i}=this.putForm.value;return e&&(i.every(e=>!o.isNil(e.phoneNo))||this.alertService.alert("Enter your correct mobile phone number.")),void(t&&(i.every(e=>!o.isNil(e.emailAddress))||this.alertService.alert("Enter your correct mobile phone number.")))}const e=this._setPutCondition();this.submitEvent.emit(e),this._checkValid=!1}checkIsInvalid(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}_setPutFormData(){var e;const t=this._dataService.initUmsPutForm(),i={bookingCode:this.bookingCode||null,bookingItemCode:this.bookingItemCode||null,sender:this.sender||o.cloneDeep(t.sender),receivers:(null===(e=this.bookers)||void 0===e?void 0:e.length)>0?o.cloneDeep(this.bookers):o.cloneDeep(t.receivers),itemCategoryCode:this.itemCategoryCode||null};return Object.assign({},t,i)}_setReceivers(){var e;if((null===(e=this.bookers)||void 0===e?void 0:e.length)>0){const e=this.putForm.get("smsSendYn").value,t=this.putForm.get("emailSendYn").value;this.receivers.clear();for(let i=0;i<this.bookers.length;i++)this.receivers.push(this._dataService.generateUmsReceiver({smsSendYn:e,emailSendYn:t}))}}_setPutCondition(){const e=this._dataService.initUmsPutForm(),t=this.putForm.getRawValue(),i=t.receivers.map(e=>o.omitBy(e,o.isNil)),s=Object.assign({},o.pick(Object.assign(Object.assign({},t),{receivers:i}),Object.keys(e)));return o.omitBy(s,o.isNil)}_setDefaultSendType(){var e;(null===(e=this.sendTypeList)||void 0===e?void 0:e.length)>0&&(this.putFormData=Object.assign({},this.putFormData,{sendTypeCode:this.sendTypeList[0].detailCode}))}_setTemplate(){if(!o.isNil(this.templateInfo)){const{alimTalkTemplateCode:e,smsTitle:t,smsDetail:i,emailTitle:s,emailDetail:n}=this.templateInfo;this.putForm.patchValue({alimTalkTemplateCode:e,smsTitle:t,smsDetail:i,emailTitle:s,emailDetail:n})}}_initFormSub(){this.putForm.get("sendTypeCode").valueChanges.pipe(Object(a.a)(this._$unsubscribe)).subscribe(e=>{e&&this.changeSendTypeEvent.emit(e)}),this.putForm.get("smsSendYn").valueChanges.pipe(Object(a.a)(this._$unsubscribe)).subscribe(e=>{!0===e?(this.putForm.get("smsDetail").setValidators([r.z.required]),this.receivers.controls.forEach(e=>{e.get("phoneNo").setValidators([r.z.required,c.a.mobile()]),e.get("phoneNo").updateValueAndValidity()})):(this.putForm.get("smsDetail").clearValidators(),this.receivers.controls.forEach(e=>{e.get("phoneNo").setValidators([c.a.mobile()]),e.get("phoneNo").updateValueAndValidity()})),this.putForm.get("smsDetail").updateValueAndValidity()}),this.putForm.get("emailSendYn").valueChanges.pipe(Object(a.a)(this._$unsubscribe)).subscribe(e=>{!0===e?(this.putForm.get("emailDetail").setValidators([r.z.required]),this.putForm.get("emailTitle").setValidators([r.z.required]),this.receivers.controls.forEach(e=>{e.get("emailAddress").setValidators([r.z.required,c.a.email()]),e.get("emailAddress").updateValueAndValidity()})):(this.putForm.get("emailDetail").clearValidators(),this.putForm.get("emailTitle").clearValidators(),this.receivers.controls.forEach(e=>{e.get("emailAddress").setValidators([c.a.email()]),e.get("emailAddress").updateValueAndValidity()})),this.putForm.get("emailDetail").updateValueAndValidity(),this.putForm.get("emailTitle").updateValueAndValidity()})}}return e.\u0275fac=function(t){return new(t||e)(s.Qb(l.a),s.Qb(s.h),s.Qb(p.a))},e.\u0275cmp=s.Kb({type:e,selectors:[["app-ums-form"]],viewQuery:function(e,t){var i;1&e&&s.Xc(h,!0),2&e&&s.Dc(i=s.gc())&&(t.searchInput=i.first)},inputs:{itemCategoryCode:"itemCategoryCode",bookingItemCode:"bookingItemCode",bookingCode:"bookingCode",bookers:"bookers",sender:"sender",sendTypeList:"sendTypeList",templateList:"templateList",templateInfo:"templateInfo"},outputs:{changeSendTypeEvent:"changeSendTypeEvent",changeTemplateEvent:"changeTemplateEvent",submitEvent:"submitEvent"},features:[s.Ab],decls:65,vars:14,consts:[[3,"formGroup","connectForm","ngSubmit"],[1,"page-item"],[1,"page-item-header"],[1,"title"],[1,"table","table-bordered","table-responsive",2,"max-height","258px","overflow","auto"],["width","100px"],["width","160px"],["formGroupName","sender"],["scope","row",1,"th-bg"],["formControlName","name",3,"isInvalid"],["formControlName","phoneNo","inputFormat","phone",3,"isInvalid"],["formControlName","emailAddress",3,"isInvalid"],["formArrayName","receivers"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"page-item-header","justify-content-between"],[1,"form-group"],["formControlName","smsSendYn","binary","true","label","SMS"],["formControlName","emailSendYn","binary","true","label","email"],[1,"table","table-bordered","table-responsive"],[1,"td-bg","align-t"],[1,"textarea"],["cols","30","rows","20","formControlName","smsDetail","placeholder","Please enter the contents"],[1,"pd10"],["formControlName","emailTitle","placeholder","Email title",3,"isInvalid"],["cols","30","rows","15","placeholder","Please enter the contents of the mail","formControlName","emailDetail"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],[3,"formGroupName"],["class","icon xs plus align-m ml10",3,"click",4,"ngIf"],["class","icon xs minus align-m ml10",3,"click",4,"ngIf"],[1,"icon","xs","plus","align-m","ml10",3,"click"],[1,"icon","xs","minus","align-m","ml10",3,"click"]],template:function(e,t){1&e&&(s.Wb(0,"form",0),s.fc("ngSubmit",(function(){return t.onSubmit()})),s.Wb(1,"div",1),s.Wb(2,"div",2),s.Wb(3,"p",3),s.Pc(4,"Set up UMS"),s.Vb(),s.Vb(),s.Wb(5,"div",4),s.Wb(6,"table"),s.Wb(7,"caption"),s.Pc(8," Set up UMS "),s.Vb(),s.Wb(9,"colgroup"),s.Rb(10,"col",5),s.Rb(11,"col",6),s.Rb(12,"col",5),s.Rb(13,"col"),s.Rb(14,"col",5),s.Rb(15,"col"),s.Vb(),s.Wb(16,"tbody"),s.Wb(17,"tr",7),s.Wb(18,"th",8),s.Pc(19,"From"),s.Vb(),s.Wb(20,"td"),s.Rb(21,"app-input-text",9),s.Vb(),s.Wb(22,"th",8),s.Pc(23,"No."),s.Vb(),s.Wb(24,"td"),s.Rb(25,"app-input-text",10),s.Vb(),s.Wb(26,"th",8),s.Pc(27,"Email"),s.Vb(),s.Wb(28,"td"),s.Rb(29,"app-input-text",11),s.Vb(),s.Vb(),s.Ub(30,12),s.Nc(31,O,15,12,"tr",13),s.Tb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(32,"div",1),s.Wb(33,"div",14),s.Wb(34,"p",3),s.Pc(35,"SMS & Email"),s.Vb(),s.Wb(36,"div",15),s.Rb(37,"app-checkbox",16),s.Rb(38,"app-checkbox",17),s.Vb(),s.Vb(),s.Wb(39,"div",18),s.Wb(40,"table"),s.Wb(41,"caption"),s.Pc(42," SMS & Email "),s.Vb(),s.Wb(43,"colgroup"),s.Rb(44,"col"),s.Rb(45,"col"),s.Vb(),s.Wb(46,"tbody"),s.Wb(47,"tr"),s.Wb(48,"td",19),s.Wb(49,"div",20),s.Rb(50,"textarea",21),s.Vb(),s.Vb(),s.Wb(51,"div",22),s.Wb(52,"div"),s.Pc(53,"Title"),s.Vb(),s.Wb(54,"div"),s.Rb(55,"app-input-text",23),s.Vb(),s.Vb(),s.Wb(56,"div",22),s.Wb(57,"div"),s.Pc(58,"Detail"),s.Vb(),s.Wb(59,"div"),s.Wb(60,"div",20),s.Rb(61,"textarea",24),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(62,"div",25),s.Wb(63,"button",26),s.Pc(64,"Send"),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&e&&(s.pc("formGroup",t.putForm)("connectForm",t.putFormData),s.Cb(21),s.pc("isInvalid",t.checkIsInvalid(s.tc(11,j))),s.Cb(4),s.pc("isInvalid",t.checkIsInvalid(s.tc(12,C))),s.Cb(4),s.pc("isInvalid",t.checkIsInvalid(s.tc(13,S))),s.Cb(2),s.pc("ngForOf",t.receivers.controls),s.Cb(18),s.Gb("valid-error",t.checkIsInvalid("smsDetail")),s.Cb(6),s.pc("isInvalid",t.checkIsInvalid("emailTitle")),s.Cb(5),s.Gb("valid-error",t.checkIsInvalid("emailDetail")))},directives:[r.B,r.s,r.k,d.a,r.l,u.a,r.r,r.i,r.e,m.n,b.a,r.c,m.o],encapsulation:2,changeDetection:0}),e})()}}]);