function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(i=(r=c.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{UVSK:function(e,t,n){"use strict";n.r(t),n.d(t,"CONTAINERS",(function(){return ft})),n.d(t,"COMPONENTS",(function(){return yt})),n.d(t,"BsPolygonModule",(function(){return mt}));var i={};n.r(i),n.d(i,"initComponentStateAction",(function(){return F})),n.d(i,"loadSourceTypeList",(function(){return W})),n.d(i,"loadSourceTypeListSuccess",(function(){return T})),n.d(i,"changeSearchCondition",(function(){return N})),n.d(i,"reloadList",(function(){return R})),n.d(i,"loadList",(function(){return A})),n.d(i,"getListSuccess",(function(){return $})),n.d(i,"getListFailure",(function(){return x})),n.d(i,"setGridStateAction",(function(){return z})),n.d(i,"setGridCheckStateAction",(function(){return M})),n.d(i,"changePageIndex",(function(){return B})),n.d(i,"changePageSize",(function(){return G})),n.d(i,"addSelectedDetailRowInfo",(function(){return U})),n.d(i,"delSelectedDetailRowInfo",(function(){return H})),n.d(i,"openDetailPopup",(function(){return Y})),n.d(i,"closeDetailPopup",(function(){return K})),n.d(i,"upsertPolygon",(function(){return q})),n.d(i,"upsertPolygonSuccess",(function(){return X})),n.d(i,"upsertPolygonFailure",(function(){return Q})),n.d(i,"removePolygons",(function(){return J}));var o=n("ofXK"),a=n("3Pt+"),r=n("snw9"),c=n("kt0X"),s=n("pxUr"),l=n("WG3B"),u=n("xoAz"),d=n("wPo9"),p=n("7rOj"),b=n("+NQf"),h=n("6LsY"),g=n("l1P7"),f=n("v7zA"),y=n("7UZF"),m=n("hHe4"),v=n("1OXJ"),O=n("5hwk"),C=n("kKjH"),S=n("eXiR"),k=n("w8np"),j=n("vu/V"),P=n("tyNb"),I=n("XNiG"),L=n("itXk"),_=n("zP0r"),V=n("1G5W"),D=n("Kj3r"),E=n("pLZG"),w=n("LvDl"),F=Object(c.o)("[BsPolygon/List] init component state"),W=Object(c.o)("[BsPolygon/List] load source type list"),T=Object(c.o)("[BsPolygon/List] load source type list success",Object(c.t)()),N=Object(c.o)("[BsPolygon/List] change search condition",Object(c.t)()),R=Object(c.o)("[BsPolygon/List] reload grid data list"),A=Object(c.o)("[BsPolygon/List] load grid data list",Object(c.t)()),$=Object(c.o)("[BsPolygon/List] get list success",Object(c.t)()),x=Object(c.o)("[BsPolygon/List] get list failure",Object(c.t)()),z=Object(c.o)("[BsPolygon/List] set grid state",Object(c.t)()),M=Object(c.o)("[BsPolygon/List] set grid check state",Object(c.t)()),B=Object(c.o)("[BsPolygon/List] change page index",Object(c.t)()),G=Object(c.o)("[BsPolygon/List] change page size",Object(c.t)()),U=Object(c.o)("[BsPolygon/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc120\ud0dd",Object(c.t)()),H=Object(c.o)("[BsPolygon/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc81c\uac70"),Y=Object(c.o)("[BsPolygon/Detail] polygon \ud31d\uc5c5 \uc5f4\uae30"),K=Object(c.o)("[BsPolygon/Detail] polygon \ud31d\uc5c5 \ub2eb\uae30"),q=Object(c.o)("[BsPolygon/Detail] polygon \uc815\ubcf4 \uc800\uc7a5",Object(c.t)()),X=Object(c.o)("[BsPolygon/List] upsert polygon success",Object(c.t)()),Q=Object(c.o)("[BsPolygon/List] upsert polygon failure",Object(c.t)()),J=Object(c.o)("[BsPolygon/List] \uc0ad\uc81c\ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(c.t)()),Z=n("EVqC"),ee=Object(Z.a)({selectId:function(e){return e.id},sortComparer:!1}),te=ee.getInitialState({sourceTypeList:null,loading:null,reloadToggle:null,searchCondition:null,otherSearchInfo:null,gridDataTotal:null,gridState:{pageInfo:{skip:0,take:20},sortInfo:[{field:"firstInsertDatetime",dir:"desc"}]},gridCheckedState:null,isOpenDetailPopup:null,selectedDetailRowInfo:null}),ne=Object(c.q)(te,Object(c.s)(i.initComponentStateAction,(function(e){return Object.assign(Object.assign({},e),{loading:null,isOpenDetailPopup:null})})),Object(c.s)(i.loadSourceTypeListSuccess,(function(e,t){var n=t.dataList;return Object.assign(Object.assign({},e),{sourceTypeList:n})})),Object(c.s)(i.reloadList,(function(e){return Object.assign(Object.assign({},e),{reloadToggle:!e.reloadToggle})})),Object(c.s)(i.changeSearchCondition,(function(e,t){var n=t.searchCondition,i=t.otherSearchInfo;return Object.assign(Object.assign({},e),{searchCondition:n,otherSearchInfo:i})})),Object(c.s)(i.loadList,(function(e){return Object.assign(Object.assign({},e),{loading:!0})})),Object(c.s)(i.getListSuccess,(function(e,t){var n=t.dataList,i=t.totalCount;return ee.setAll(n,Object.assign(Object.assign({},e),{loading:!1,gridDataTotal:i}))})),Object(c.s)(i.getListFailure,(function(e){return Object.assign(Object.assign({},e),{loading:!1})})),Object(c.s)(i.setGridStateAction,(function(e,t){var n=t.gridState;return Object.assign(Object.assign({},e),{GridState:n})})),Object(c.s)(i.setGridCheckStateAction,(function(e,t){var n=t.gridCheckedState;return Object.assign(Object.assign({},e),{masterGridCheckedState:n})})),Object(c.s)(i.changePageIndex,(function(e,t){var n=t.pageIndex;return Object.assign(Object.assign({},e),{gridState:w.set(w.cloneDeep(e.gridState),["pageInfo","skip"],n)})})),Object(c.s)(i.changePageIndex,(function(e,t){var n=t.pageIndex;return Object.assign(Object.assign({},e),{gridState:w.set(w.cloneDeep(e.gridState),["pageInfo","skip"],n)})})),Object(c.s)(i.openDetailPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenDetailPopup:!0})})),Object(c.s)(i.closeDetailPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenDetailPopup:!1})})),Object(c.s)(i.addSelectedDetailRowInfo,(function(e,t){var n=t.info;return Object.assign(Object.assign({},e),{selectedDetailRowInfo:n})})),Object(c.s)(i.delSelectedDetailRowInfo,(function(e){return Object.assign(Object.assign({},e),{selectedDetailRowInfo:null})})),Object(c.s)(i.upsertPolygonSuccess,(function(e,t){var n=t.upsertItem;return ee.upsertOne(n,Object.assign({},e))})));function ie(e,t){return Object(c.m)({bsPolygonList:ne})(e,t)}var oe,ae,re,ce,se=Object(c.p)("bsPolygon"),le=Object(c.r)(se,(function(e){return e.bsPolygonList})),ue=Object(c.r)(le,(function(e){return e.sourceTypeList})),de=Object(c.r)(le,(function(e){return e.loading})),pe=Object(c.r)(le,(function(e){return e.reloadToggle})),be=Object(c.r)(le,(function(e){return e.searchCondition})),he=Object(c.r)(le,(function(e){return e.otherSearchInfo})),ge=ee.getSelectors(le).selectAll,fe=Object(c.r)(le,(function(e){return e.gridState})),ye=Object(c.r)(le,(function(e){return e.gridCheckedState})),me=Object(c.r)(le,(function(e){return e.gridDataTotal})),ve=Object(c.r)(fe,(function(e){return w.get(e,["pageInfo","take"],20)})),Oe=Object(c.r)(le,(function(e){return e.selectedDetailRowInfo})),Ce=Object(c.r)(le,(function(e){return e.isOpenDetailPopup})),Se=n("fXoL"),ke=n("pfiq"),je=n("LRne"),Pe=n("z6cu"),Ie=n("eIep"),Le=n("AytR").a.API_URL,_e={selectDetailCodes:"".concat(Le,"/common/detail-code"),selectEntities:"".concat(Le,"/admin/basis/polygon"),putRegionPolygon:"".concat(Le,"/admin/basis/polygon"),deleteRegionPolygon:"".concat(Le,"/admin/basis/polygon")},Ve=n("tpT/"),De=n("VMfx"),Ee=((ae=function(){function e(t,n){_classCallCheck(this,e),this.api=t,this.languageService=n}return _createClass(e,[{key:"getCommonDetailCodeList",value:function(e){var t=this,n=w.assign({},this.api.defaultParams,{condition:e});return this.api.post(_e.selectDetailCodes,n).pipe(Object(Ie.a)((function(e){return e.succeedYn?Object(je.a)(e.result.list.map((function(e){return{label:"".concat("KO"===t.languageService.currentLanguage?e.detailCodeNameLn:e.detailCodeNameEn),value:e.detailCode}}))):Object(Pe.a)(e||"api response error")})))}},{key:"getList",value:function(e){var t=w.assign({},this.api.defaultParams,{condition:e});return this.api.post(_e.selectEntities,t).pipe(Object(Ie.a)((function(e){var t,n;if(e.succeedYn&&e.result){var i=(null===(n=null===(t=e.result)||void 0===t?void 0:t.list)||void 0===n?void 0:n.length)>0?e.result.list.map((function(e){return Object.assign({id:e.rowid},e)})):[],o=e.result.totalCount;return Object(je.a)({list:i,totalCount:o})}return Object(Pe.a)(e||"api response error")})))}},{key:"putRegionPolygon",value:function(e){var t=w.assign({},this.api.defaultParams,{condition:e});return this.api.put(_e.putRegionPolygon,t).pipe(Object(Ie.a)((function(e){if(e.succeedYn&&e.result){var t=Object.assign({id:e.result.rowid},e.result);return Object(je.a)(t)}return Object(Pe.a)(e||"api response error")})))}},{key:"removeItems",value:function(e){var t=w.assign({},this.api.defaultParams,{condition:e});return this.api.delete(_e.deleteRegionPolygon,t).pipe(Object(Ie.a)((function(e){return e.succeedYn?Object(je.a)(!0):Object(Pe.a)(e||"api response error")})))}}]),e}()).\u0275fac=function(e){return new(e||ae)(Se.bc(Ve.a),Se.bc(De.a))},ae.\u0275prov=Se.Mb({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae),we=((oe=_createClass((function e(t){var n=this;_classCallCheck(this,e),this.fb=t,this.generateGridColumns=function(){return[{field:"regionCode",title:"\uc9c0\uc5ed\ucf54\ub4dc",width:100},{field:"regionNameLn",title:"\uc9c0\uc5ed\uc774\ub984(\ud55c\uad6d\uc5b4)",width:120},{field:"regionNameEn",title:"\uc9c0\uc5ed\uc774\ub984(\uc601\uc5b4)",width:120},{field:"polygonSeq",title:"\ud3f4\ub9ac\uace4 \uc21c\ubc88",width:100},{field:"sourceTypeName",title:"\uc18c\uc2a4\uad6c\ubd84",width:120},{field:"polygonDataOrigin",title:"Polygon\ub370\uc774\ud130"},{field:"lastUpdateName",title:"\ucd5c\uc885\uc785\ub825\uc790",width:120},{field:"lastUpdateDatetime",title:"\ucd5c\uc885\uc785\ub825\ub0a0\uc9dc",width:180},{field:"firstInsertName",title:"\ucd5c\ucd08\uc785\ub825\uc790",width:120},{field:"firstInsertDatetime",title:"\ucd5c\ucd08\uc785\ub825\ub0a0\uc9dc",width:180}]},this.generateListSearchForm=function(){return n.fb.group({countryCode:[null,[a.z.required]],regionCode:[null]})},this.initListSearch=function(){return{countryCode:null,regionCode:null}},this.generatePolygonUpsertForm=function(){return n.fb.group({rowid:[null],polygonSeq:[null],regionCode:[null,[a.z.required]],polygonNameEn:[null,[a.z.required]],polygonNameLn:[null,[a.z.required]],sourceTypeCode:[null,[a.z.required]],polygonDataOrigin:[null],multiPolygonYn:[null]})},this.initPolygonUpsertFormData=function(){return{rowid:null,polygonSeq:null,regionCode:null,polygonNameEn:null,polygonNameLn:null,sourceTypeCode:null,polygonDataOrigin:null,multiPolygonYn:!1}}}))).\u0275fac=function(e){return new(e||oe)(Se.bc(a.f))},oe.\u0275prov=Se.Mb({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe),Fe=n("+Sob"),We=function(){return["countryCode","countryNameLn","countryNameEn"]},Te=function(){return{itemCategoryCode:"IC02"}},Ne=function(){return["regions"]},Re=function(){return["regionNameEn","regionNameLn","countryNameLn","stateCode"]},Ae=((re=function(){function e(t){_classCallCheck(this,e),this._dataService=t,this.clickSearchEvent=new Se.n,this.clickResetEvent=new Se.n,this.searchForm=this._dataService.generateListSearchForm()}return _createClass(e,[{key:"otherSearchInfo",get:function(){return this._otherSearchInfo},set:function(e){this._otherSearchInfo=e,this._setOtherSearchInfo(e)}},{key:"searchCondition",get:function(){return this._searchCondition},set:function(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e),this._initThisState(e)}},{key:"searchFormValid",get:function(){return this.searchForm.valid}},{key:"onSubmit",value:function(){if(this.searchForm.invalid)this._checkValid=!0;else{var e=this.setSearchCondition(),t=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:e,otherSearchInfo:t}),this._checkValid=!1}}},{key:"checkIsInvalid",value:function(e){return this._checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}},{key:"setSearchCondition",value:function(){return w.omitBy(this.searchForm.value,w.isNil)}},{key:"_initThisState",value:function(e){this._checkValid=!1}},{key:"_setSearchFormData",value:function(e){var t=this._dataService.initListSearch();return w.isEmpty(e)?t:e}},{key:"_setOtherSearchInfo",value:function(e){this.countryInput=(null==e?void 0:e.countryInput)||null,this.regionInput=(null==e?void 0:e.regionInput)||null}},{key:"_setOtherSearchCondition",value:function(){var e={};return this.autoCompletes.forEach((function(t){Object.assign(e,t.getInputValue())})),e}}]),e}()).\u0275fac=function(e){return new(e||re)(Se.Qb(we))},re.\u0275cmp=Se.Kb({type:re,selectors:[["app-bs-polygon-search"]],viewQuery:function(e,t){var n;1&e&&Se.Xc(ke.a,!0),2&e&&Se.Dc(n=Se.gc())&&(t.autoCompletes=n)},inputs:{otherSearchInfo:"otherSearchInfo",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:17,vars:18,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-1"],[1,"form-label"],["formControlName","countryCode","dataKey","countryCode","inputFieldFormat","{0}& - {1}&_{2}","apiUrl","admin/common/country","placeholder","\uad6d\uac00\uac80\uc0c9",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","inputFieldFormatKeyList","isInvalid"],["formControlName","regionCode","apiUrl","common/destination","dataKey","regionCode","inputFieldFormat","{0}, {1}&, {2}&, {3}","placeholder","\uc9c0\uc5ed\uc774\ub984 \uac80\uc0c9",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","searchResultPath","inputFieldFormatKeyList","isInvalid"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(e,t){1&e&&(Se.Wb(0,"form",0),Se.fc("ngSubmit",(function(){return t.onSubmit()})),Se.Wb(1,"div",1),Se.Wb(2,"div",2),Se.Wb(3,"div",3),Se.Wb(4,"span",4),Se.Wb(5,"sup"),Se.Pc(6,"\uad6d\uac00\uba85"),Se.Vb(),Se.Vb(),Se.Rb(7,"app-auto-complete",5),Se.Vb(),Se.Wb(8,"div",3),Se.Wb(9,"span",4),Se.Pc(10,"\uc9c0\uc5ed\uc774\ub984"),Se.Vb(),Se.Rb(11,"app-auto-complete",6),Se.Vb(),Se.Vb(),Se.Vb(),Se.Wb(12,"div",7),Se.Wb(13,"button",8),Se.Pc(14,"\uac80\uc0c9"),Se.Vb(),Se.Wb(15,"button",9),Se.fc("click",(function(){return t.clickResetEvent.emit()})),Se.Pc(16,"Reset"),Se.Vb(),Se.Vb(),Se.Vb()),2&e&&(Se.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),Se.Cb(7),Se.pc("inputFieldValue",t.countryInput)("inputId","countryInput")("apiSearchTerm","keyword")("inputFieldFormatKeyList",Se.tc(14,We))("isInvalid",t.checkIsInvalid("countryCode")),Se.Cb(4),Se.pc("inputFieldValue",t.regionInput)("inputId","regionInput")("apiCondition",Se.tc(15,Te))("apiSearchTerm","keyword")("searchResultPath",Se.tc(16,Ne))("inputFieldFormatKeyList",Se.tc(17,Re))("isInvalid",t.checkIsInvalid("regionCode")))},directives:[a.B,a.s,a.k,Fe.a,ke.a,a.r,a.i],styles:[""],changeDetection:0}),re),$e=n("UIHd"),xe=n("EsKh"),ze=n("U6NN"),Me=((ce=function(){function e(){_classCallCheck(this,e),this.clickAddEvent=new Se.n,this.clickDelEvent=new Se.n,this.changePageSizeEvent=new Se.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onClickAdd",value:function(){this.clickAddEvent.emit()}},{key:"onClickDel",value:function(){this.clickDelEvent.emit()}},{key:"onChangePageSize",value:function(e){this.changePageSizeEvent.emit(e.value)}}]),e}()).\u0275fac=function(e){return new(e||ce)},ce.\u0275cmp=Se.Kb({type:ce,selectors:[["app-bs-polygon-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{clickAddEvent:"clickAddEvent",clickDelEvent:"clickDelEvent",changePageSizeEvent:"changePageSizeEvent"},decls:10,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&(Se.Wb(0,"div",0),Se.Wb(1,"strong",1),Se.Pc(2),Se.Vb(),Se.Wb(3,"div",2),Se.Wb(4,"button",3),Se.fc("click",(function(){return t.onClickAdd()})),Se.Pc(5,"\ucd94\uac00"),Se.Vb(),Se.Wb(6,"button",3),Se.fc("click",(function(){return t.onClickDel()})),Se.Pc(7,"\uc0ad\uc81c"),Se.Vb(),Se.Wb(8,"div",4),Se.Wb(9,"app-selectbox",5),Se.fc("onChange",(function(e){return t.onChangePageSize(e)})),Se.Vb(),Se.Vb(),Se.Vb(),Se.Vb()),2&e&&(Se.Cb(2),Se.Qc(t.loading?"":t.totalCount),Se.Cb(7),Se.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[ze.a,a.r,a.u],styles:[""],changeDetection:0}),ce),Be=n("kDLv"),Ge=n("gbCm");function Ue(e,t){if(1&e){var n=Se.Xb();Se.Ub(0),Se.Wb(1,"agm-marker",27),Se.fc("dragEnd",(function(e){return Se.Fc(n),Se.hc().onDragEndMaker(e)})),Se.Vb(),Se.Tb()}if(2&e){var i=Se.hc();Se.Cb(1),Se.pc("latitude",i.markerInfo.lat)("longitude",i.markerInfo.lng)("markerDraggable",!0)}}function He(e,t){if(1&e){var n=Se.Xb();Se.Wb(0,"div",31),Se.Wb(1,"span",32),Se.fc("click",(function(){Se.Fc(n);var e=t.index;return Se.hc(2).onClickPath(e)})),Se.Pc(2),Se.Vb(),Se.Wb(3,"a",33),Se.fc("click",(function(){Se.Fc(n);var e=t.index;return Se.hc(2).onRemovePath(e)})),Se.Pc(4,"\uc0ad\uc81c"),Se.Vb(),Se.Vb()}if(2&e){var i=t.$implicit,o=t.index,a=Se.hc(2);Se.Gb("active",o===a.selectedPathIndex),Se.Cb(2),Se.Sc("",i.lat,", ",i.lng,"")}}function Ye(e,t){if(1&e&&(Se.Ub(0),Se.Wb(1,"div",28),Se.Wb(2,"div",29),Se.Nc(3,He,5,4,"div",30),Se.Vb(),Se.Vb(),Se.Tb()),2&e){var n=Se.hc();Se.Cb(3),Se.pc("ngForOf",n.paths)}}function Ke(e,t){1&e&&(Se.Wb(0,"div",34),Se.Pc(1,"\ub4f1\ub85d\ub41c \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),Se.Vb())}var qe,Xe=function(){return{itemCategoryCode:"IC02"}},Qe=function(){return["regions"]},Je=function(){return["regionNameLn","regionNameEn","countryNameLn","stateCode"]},Ze=function(){return{standalone:!0}},et=((qe=function(){function e(t,n,i){_classCallCheck(this,e),this._dataService=t,this.alertService=n,this.cd=i,this.submitEvent=new Se.n,this.closeEvent=new Se.n,this.zoom=12,this.centerLatitude=37.5723309,this.centerLongitude=127.0142533,this.paths=[],this._$unsubscribe=new I.a,this.putForm=this._dataService.generatePolygonUpsertForm(),this._initSubscription()}return _createClass(e,[{key:"rowItem",get:function(){return this._rowitem},set:function(e){this._rowitem=e,this.putFormData=this._setPutFormData(e),this.paths=this._setPaths(e),this._initThisState(e)}},{key:"polygonSeqValue",get:function(){return this.putForm.get("polygonSeq").value}},{key:"markerInfo",get:function(){return w.isEmpty(this.paths)||w.isNil(this.selectedPathIndex)?null:this.paths[this.selectedPathIndex]}},{key:"ngAfterContentInit",value:function(){}},{key:"ngOnDestroy",value:function(){this._$unsubscribe.next(),this._$unsubscribe.complete()}},{key:"onSelectRegion",value:function(e){var t=e.regionNameEn,n=e.regionNameLn;this.putForm.patchValue({polygonNameEn:t||null,polygonNameLn:n||null})}},{key:"onSubmit",value:function(){if(this.putForm.invalid)this._checkValid=!0;else if(w.isEmpty(this.paths))this.alertService.alert("\ud3f4\ub9ac\uace4\uc815\ubcf4\ub97c \ub4f1\ub85d\ud574 \uc8fc\uc138\uc694.");else{var e=this._setPutCondition();this.submitEvent.emit(e),this._checkValid=!1}}},{key:"onDragEndMaker",value:function(e){var t=this,n=e.coords,i=n.lat,o=n.lng;w.isEmpty(this.paths[this.selectedPathIndex])||(this.paths=this.paths.map((function(e,n){return n===t.selectedPathIndex?{lat:i,lng:o}:Object.assign({},e)})))}},{key:"onClickPath",value:function(e){var t=this.paths[e];if(!w.isEmpty(t)){var n=t.lat,i=t.lng;this.selectedPathIndex=e,this.addLatitude=n,this.addLongitude=i,this._setGoogleMapCenter({lat:n,lng:i})}}},{key:"onRemovePath",value:function(e){w.isEmpty(this.paths[e])||(this.paths=this.paths.filter((function(t,n){return n!==e})),this.selectedPathIndex=null,this.addLatitude=null,this.addLongitude=null)}},{key:"onAddPath",value:function(){if(w.isNil(this.addLatitude)||w.isNil(this.addLongitude))this.alertService.alert("\uc704\ub3c4 \ubc0f \uacbd\ub3c4\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694.");else{var e=this.addLatitude,t=this.addLongitude;this.paths=w.concat(this.paths,[{lat:e,lng:t}]),this._setGoogleMapCenter({lat:e,lng:t})}}},{key:"onClearPath",value:function(){this.paths=[]}},{key:"checkIsInvalid",value:function(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}},{key:"_initThisState",value:function(e){this._checkValid=!1,this.regionCodeInput=(null==e?void 0:e.regionNameLn)||null}},{key:"_setPutFormData",value:function(e){var t=this._dataService.initPolygonUpsertFormData();return w.isEmpty(e)?t:w.pick(e,Object.keys(t))}},{key:"_setPutCondition",value:function(){var e=this.putForm.value,t="POLYGON((".concat(this.paths.map((function(e){return"".concat(e.lng," ").concat(e.lat)})).join(","),"))"),n=Object.assign({},e,{polygonDataOrigin:t});return w.isNil(n.rowid)&&(n=w.omit(n,["rowid","polygonSeq"])),n}},{key:"_setPaths",value:function(e){var t=this,n=null==e?void 0:e.polygonDataOrigin;return w.isNil(n)?[]:n.replace(/[POLYGON(())]/gi,"").split(",").map((function(e,n){var i=e.indexOf(" "),o=parseFloat(e.substring(i+1)),a=parseFloat(e.substring(0,i));return 0===n&&t._setGoogleMapCenter({lat:o,lng:a}),{lat:o,lng:a}}))}},{key:"_initSubscription",value:function(){}},{key:"_setGoogleMapCenter",value:function(e){var t=e.lat,n=e.lng;this.centerLatitude=t,this.centerLongitude=n}}]),e}()).\u0275fac=function(e){return new(e||qe)(Se.Qb(we),Se.Qb(xe.a),Se.Qb(Se.h))},qe.\u0275cmp=Se.Kb({type:qe,selectors:[["app-bs-polygon-form"]],inputs:{polygonSourceTypeList:"polygonSourceTypeList",rowItem:"rowItem"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:74,vars:34,consts:[[1,"modal-body"],[3,"formGroup","connectForm","ngSubmit"],[1,"table","table-bordered"],["width","15%"],["width","35%"],["scope","row",1,"th-bg"],[1,"form-group"],["formControlName","regionCode","apiUrl","common/destination","dataKey","regionCode","inputFieldFormat","{0}, {1}&, {2}&, {3}","placeholder","\uc9c0\uc5ed\uc774\ub984 \uac80\uc0c9",3,"inputFieldValue","apiCondition","apiSearchTerm","searchResultPath","inputFieldFormatKeyList","isInvalid","onSelect"],[1,"dash"],[3,"ngModel","ngModelOptions","disabled"],["formControlName","sourceTypeCode",3,"options","isInvalid","useAllOptionName"],["colspan","3"],["formControlName","polygonNameLn",3,"isInvalid"],["formControlName","polygonNameEn",3,"isInvalid"],["colspan","4"],[1,"googlemap-area"],[2,"width","100%","height","100%",3,"latitude","longitude","zoom","disableDefaultUI"],[4,"ngIf"],[3,"paths"],["valueType","number","inputFormat","numberOnly","placeholder","\uc704\ub3c4 \uc785\ub825",3,"ngModel","ngModelOptions","ngModelChange"],["valueType","number","inputFormat","numberOnly","placeholder","\uacbd\ub3c4 \uc785\ub825",3,"ngModel","ngModelOptions","ngModelChange"],["type","button",1,"btn","btn-light","sm",3,"click"],["type","button",1,"btn","btn-light","sm","mt5",3,"click"],[4,"ngIf","ngIfElse"],["emptyPaths",""],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],[3,"latitude","longitude","markerDraggable","dragEnd"],[1,"auto-complete"],[1,"selected-label-area"],["class","selected-label",3,"active",4,"ngFor","ngForOf"],[1,"selected-label"],[1,"cursor-pointer",3,"click"],[1,"btn-label-del",3,"click"],[1,"align-c"]],template:function(e,t){if(1&e&&(Se.Wb(0,"div",0),Se.Wb(1,"form",1),Se.fc("ngSubmit",(function(){return t.onSubmit()})),Se.Wb(2,"div",2),Se.Wb(3,"table"),Se.Wb(4,"caption"),Se.Pc(5," Polygon \uc815\ubcf4 "),Se.Vb(),Se.Wb(6,"colgroup"),Se.Rb(7,"col",3),Se.Rb(8,"col",4),Se.Rb(9,"col",3),Se.Rb(10,"col",4),Se.Vb(),Se.Wb(11,"tbody"),Se.Wb(12,"tr"),Se.Wb(13,"th",5),Se.Wb(14,"sup"),Se.Pc(15,"\uc9c0\uc5ed\ucf54\ub4dc/ \ud3f4\ub9ac\uace4\uc21c\ubc88"),Se.Vb(),Se.Vb(),Se.Wb(16,"td"),Se.Wb(17,"div",6),Se.Wb(18,"app-auto-complete",7),Se.fc("onSelect",(function(e){return t.onSelectRegion(e)})),Se.Vb(),Se.Wb(19,"span",8),Se.Pc(20,"/"),Se.Vb(),Se.Rb(21,"app-input-text",9),Se.Vb(),Se.Vb(),Se.Wb(22,"th",5),Se.Wb(23,"sup"),Se.Pc(24,"\uc18c\uc2a4\ud0c0\uc785"),Se.Vb(),Se.Vb(),Se.Wb(25,"td"),Se.Rb(26,"app-selectbox",10),Se.Vb(),Se.Vb(),Se.Wb(27,"tr"),Se.Wb(28,"th",5),Se.Wb(29,"sup"),Se.Pc(30,"\ud3f4\ub9ac\uace4\uc774\ub984(\ud55c\uad6d\uc5b4)"),Se.Vb(),Se.Vb(),Se.Wb(31,"td",11),Se.Rb(32,"app-input-text",12),Se.Vb(),Se.Vb(),Se.Wb(33,"tr"),Se.Wb(34,"th",5),Se.Wb(35,"sup"),Se.Pc(36,"\ud3f4\ub9ac\uace4\uc774\ub984(\uc601\uc5b4)"),Se.Vb(),Se.Vb(),Se.Wb(37,"td",11),Se.Rb(38,"app-input-text",13),Se.Vb(),Se.Vb(),Se.Wb(39,"tr"),Se.Wb(40,"td",14),Se.Wb(41,"div",15),Se.Wb(42,"agm-map",16),Se.Nc(43,Ue,2,3,"ng-container",17),Se.Rb(44,"agm-polygon",18),Se.Vb(),Se.Vb(),Se.Vb(),Se.Vb(),Se.Wb(45,"tr"),Se.Wb(46,"th",5),Se.Pc(47,"\ucd94\uac00"),Se.Vb(),Se.Wb(48,"td",11),Se.Wb(49,"div",6),Se.Wb(50,"app-input-text",19),Se.fc("ngModelChange",(function(e){return t.addLatitude=e})),Se.Vb(),Se.Wb(51,"span",8),Se.Pc(52,","),Se.Vb(),Se.Wb(53,"app-input-text",20),Se.fc("ngModelChange",(function(e){return t.addLongitude=e})),Se.Vb(),Se.Rb(54,"span",8),Se.Wb(55,"button",21),Se.fc("click",(function(){return t.onAddPath()})),Se.Pc(56,"\ud3f4\ub9ac\uace4 \ucd94\uac00"),Se.Vb(),Se.Vb(),Se.Vb(),Se.Vb(),Se.Wb(57,"tr"),Se.Wb(58,"th",5),Se.Wb(59,"span"),Se.Wb(60,"sup"),Se.Pc(61,"Polygon\uc815\ubcf4"),Se.Vb(),Se.Vb(),Se.Rb(62,"br"),Se.Wb(63,"button",22),Se.fc("click",(function(){return t.onClearPath()})),Se.Pc(64,"Reset"),Se.Vb(),Se.Vb(),Se.Wb(65,"td",11),Se.Nc(66,Ye,4,1,"ng-container",23),Se.Nc(67,Ke,2,0,"ng-template",null,24,Se.Oc),Se.Vb(),Se.Vb(),Se.Vb(),Se.Vb(),Se.Vb(),Se.Wb(69,"div",25),Se.Wb(70,"button",26),Se.Pc(71,"\uc800\uc7a5"),Se.Vb(),Se.Wb(72,"button",21),Se.fc("click",(function(){return t.closeEvent.emit()})),Se.Pc(73,"\ucde8\uc18c"),Se.Vb(),Se.Vb(),Se.Vb(),Se.Vb()),2&e){var n=Se.Ec(68);Se.Cb(1),Se.pc("formGroup",t.putForm)("connectForm",t.putFormData),Se.Cb(17),Se.pc("inputFieldValue",t.regionCodeInput)("apiCondition",Se.tc(28,Xe))("apiSearchTerm","keyword")("searchResultPath",Se.tc(29,Qe))("inputFieldFormatKeyList",Se.tc(30,Je))("isInvalid",t.checkIsInvalid("regionCode")),Se.Cb(3),Se.pc("ngModel",t.polygonSeqValue)("ngModelOptions",Se.tc(31,Ze))("disabled",!0),Se.Cb(5),Se.pc("options",t.polygonSourceTypeList)("isInvalid",t.checkIsInvalid("sourceTypeCode"))("useAllOptionName","_\uc120\ud0dd_"),Se.Cb(6),Se.pc("isInvalid",t.checkIsInvalid("polygonNameLn")),Se.Cb(6),Se.pc("isInvalid",t.checkIsInvalid("polygonNameEn")),Se.Cb(4),Se.pc("latitude",t.centerLatitude)("longitude",t.centerLongitude)("zoom",t.zoom)("disableDefaultUI",!1),Se.Cb(1),Se.pc("ngIf",t.markerInfo),Se.Cb(1),Se.pc("paths",t.paths),Se.Cb(6),Se.pc("ngModel",t.addLatitude)("ngModelOptions",Se.tc(32,Ze)),Se.Cb(3),Se.pc("ngModel",t.addLongitude)("ngModelOptions",Se.tc(33,Ze)),Se.Cb(13),Se.pc("ngIf",(null==t.paths?null:t.paths.length)>0)("ngIfElse",n)}},directives:[a.B,a.s,a.k,Fe.a,ke.a,a.r,a.i,Ge.a,a.u,ze.a,s.b,o.o,s.d,s.c,o.n],encapsulation:2,changeDetection:0}),qe);function tt(e,t){if(1&e){var n=Se.Xb();Se.Wb(0,"app-bs-polygon-form",6),Se.fc("submitEvent",(function(e){return Se.Fc(n),Se.hc().submitPolygonHandler(e)}))("closeEvent",(function(){return Se.Fc(n),Se.hc().closeDetailPopup()})),Se.ic(1,"async"),Se.ic(2,"async"),Se.Vb()}if(2&e){var i=Se.hc();Se.pc("rowItem",Se.jc(1,2,i.selectedItem$))("polygonSourceTypeList",Se.jc(2,4,i.sourceTypeList$))}}var nt,it,ot,at,rt=((nt=function(){function e(t,n,i){_classCallCheck(this,e),this.store=t,this._dataServive=n,this.alertService=i,this.unsubscribe$=new I.a,this.sourceTypeList$=t.pipe(Object(c.u)(ue)),this.loading$=t.pipe(Object(c.u)(de)),this.reloadToggle$=t.pipe(Object(c.u)(pe)),this.searchCondition$=t.pipe(Object(c.u)(be)),this.otherSearchInfo$=t.pipe(Object(c.u)(he)),this.gridDataList$=t.pipe(Object(c.u)(ge)),this.listPageSize$=t.pipe(Object(c.u)(ve)),this.gridState$=t.pipe(Object(c.u)(fe)),this.gridCheckedState$=t.pipe(Object(c.u)(ye)),this.gridDataTotalCount$=t.pipe(Object(c.u)(me)),this.isOpenDetailPopup$=t.pipe(Object(c.u)(Ce)),this.selectedItem$=t.pipe(Object(c.u)(Oe)),this.columns=this._dataServive.generateGridColumns(),this._initSubscription()}return _createClass(e,[{key:"ngOnInit",value:function(){this.store.dispatch(i.loadSourceTypeList())}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(i.initComponentStateAction()),this.store.dispatch(i.setGridCheckStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}},{key:"changePageSizeHandler",value:function(e){this.store.dispatch(i.changePageSize({pageSize:e}))}},{key:"clickSearchHandler",value:function(e){var t=e.searchCondition,n=e.otherSearchInfo;this.store.dispatch(i.changeSearchCondition({searchCondition:t,otherSearchInfo:n})),this.store.dispatch(i.changePageIndex({pageIndex:0}))}},{key:"clickResetHandler",value:function(){this.store.dispatch(i.changeSearchCondition({searchCondition:{},otherSearchInfo:null}))}},{key:"gridStateChangeHandler",value:function(e){this.store.dispatch(i.setGridStateAction({gridState:e}))}},{key:"openDetailPopup",value:function(){this.store.dispatch(i.openDetailPopup())}},{key:"closeDetailPopup",value:function(){this.store.dispatch(i.closeDetailPopup()),this.store.dispatch(i.delSelectedDetailRowInfo())}},{key:"clickAddHandler",value:function(){this.store.dispatch(i.delSelectedDetailRowInfo()),this.openDetailPopup()}},{key:"dbClickRowHandler",value:function(e){this.store.dispatch(i.addSelectedDetailRowInfo({info:w.cloneDeep(e)})),this.openDetailPopup()}},{key:"submitPolygonHandler",value:function(e){this.store.dispatch(i.upsertPolygon({condition:Object.assign({},e)}))}},{key:"clickDelHandler",value:function(){var e=this.gridEl.checkedDataList;if((null==e?void 0:e.length)<1)this.alertService.alert("No data is selected.");else{var t=e.map((function(e){return e.rowid}));this.store.dispatch(i.removePolygons({rowids:t}))}}},{key:"_initSubscription",value:function(){var e=this;this.reloadToggle$.pipe(Object(_.a)(1),Object(V.a)(this.unsubscribe$)).subscribe((function(){e.searchFormEl.searchFormValid&&e.searchFormEl.onSubmit()})),Object(L.a)([this.searchCondition$,this.gridState$]).pipe(Object(_.a)(1),Object(D.a)(200),Object(E.a)((function(e){var t=_slicedToArray(e,2),n=t[0];return t[1],!w.isEmpty(n)})),Object(V.a)(this.unsubscribe$)).subscribe((function(t){var n=_slicedToArray(t,2),o=n[0],a=n[1],r=a.pageInfo,c=a.sortInfo,s=e._setSortOrder(c),l=Object.assign({},o,{limits:[r.skip,r.skip+r.take],sortOrder:s});e.store.dispatch(i.loadList({condition:l}))}))}},{key:"_setSortOrder",value:function(e){return e.filter((function(e){return!w.isNil(e.dir)})).map((function(e){return{keyName:e.field,sort:e.dir}}))}}]),e}()).\u0275fac=function(e){return new(e||nt)(Se.Qb(c.h),Se.Qb(we),Se.Qb(xe.a))},nt.\u0275cmp=Se.Kb({type:nt,selectors:[["app-bs-polygon"]],viewQuery:function(e,t){var n;1&e&&(Se.Xc(Ae,!0),Se.Xc($e.a,!0)),2&e&&(Se.Dc(n=Se.gc())&&(t.searchFormEl=n.first),Se.Dc(n=Se.gc())&&(t.gridEl=n.first))},decls:18,vars:39,consts:[[3,"searchCondition","otherSearchInfo","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","clickAddEvent","clickDelEvent"],[3,"gridLoading","columns","gridState","checkedState","totalCount","dataList","checkboxUseYn","stateChangeEvent","dbClickRowEvent"],["grid",""],["modalSize","lg","modalContentClass","pd-all","header","Polygon \uc815\ubcf4",3,"visible","modal","visibleChange"],[3,"rowItem","polygonSourceTypeList","submitEvent","closeEvent",4,"ngIf"],[3,"rowItem","polygonSourceTypeList","submitEvent","closeEvent"]],template:function(e,t){1&e&&(Se.Wb(0,"app-bs-polygon-search",0),Se.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),Se.ic(1,"async"),Se.ic(2,"async"),Se.Vb(),Se.Wb(3,"app-bs-polygon-control",1),Se.fc("clickAddEvent",(function(){return t.clickAddHandler()}))("clickDelEvent",(function(){return t.clickDelHandler()})),Se.ic(4,"async"),Se.ic(5,"async"),Se.ic(6,"async"),Se.Vb(),Se.Wb(7,"app-grid-simple",2,3),Se.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)}))("dbClickRowEvent",(function(e){return t.dbClickRowHandler(e)})),Se.ic(9,"async"),Se.ic(10,"async"),Se.ic(11,"async"),Se.ic(12,"async"),Se.ic(13,"async"),Se.Vb(),Se.Wb(14,"app-dialog",4),Se.fc("visibleChange",(function(){return t.closeDetailPopup()})),Se.ic(15,"async"),Se.Nc(16,tt,3,6,"app-bs-polygon-form",5),Se.ic(17,"async"),Se.Vb()),2&e&&(Se.pc("searchCondition",Se.jc(1,15,t.searchCondition$))("otherSearchInfo",Se.jc(2,17,t.otherSearchInfo$)),Se.Cb(3),Se.pc("loading",Se.jc(4,19,t.loading$))("currentPageSize",Se.jc(5,21,t.listPageSize$))("totalCount",Se.jc(6,23,t.gridDataTotalCount$)),Se.Cb(4),Se.pc("gridLoading",Se.jc(9,25,t.loading$))("columns",t.columns)("gridState",Se.jc(10,27,t.gridState$))("checkedState",Se.jc(11,29,t.gridCheckedState$))("totalCount",Se.jc(12,31,t.gridDataTotalCount$))("dataList",Se.jc(13,33,t.gridDataList$))("checkboxUseYn",!0),Se.Cb(7),Se.pc("visible",Se.jc(15,35,t.isOpenDetailPopup$))("modal",!0),Se.Cb(2),Se.pc("ngIf",Se.jc(17,37,t.isOpenDetailPopup$)))},directives:[Ae,Me,$e.a,Be.a,o.o,et],pipes:[o.b],encapsulation:2,changeDetection:0}),nt),ct=[{path:"",component:rt,data:{title:"Polygon \uad00\ub9ac"}}],st=((it=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=Se.Ob({type:it}),it.\u0275inj=Se.Nb({factory:function(e){return new(e||it)},imports:[[P.f.forChild(ct)],P.f]}),it),lt=n("bOdf"),ut=n("zp1y"),dt=n("lJxs"),pt=n("JIr8"),bt=n("vkgz"),ht=n("Xb6A"),gt=((ot=function(){function e(t,n,o,a,s){var l=this;_classCallCheck(this,e),this._actions$=t,this._service=n,this._errorService=o,this.alertService=a,this.store=s,this.loadSourceTypeList$=Object(r.c)((function(){return l._actions$.pipe(Object(r.d)(i.loadSourceTypeList),Object(lt.a)((function(e){return Object(je.a)(e).pipe(Object(ut.a)(l.sourceTypeList$))})),Object(Ie.a)((function(e){var t=_slicedToArray(e,2),n=(t[0],t[1]);return w.isNil(n)?l._service.getCommonDetailCodeList({masterCode:"BS013"}).pipe(Object(dt.a)((function(e){return i.loadSourceTypeListSuccess({dataList:e})})),Object(pt.a)((function(e){return l._catchErr(e,"\uc18c\uc2a4\ud0c0\uc785 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]}))):[]})))})),this.loadList$=Object(r.c)((function(){return l._actions$.pipe(Object(r.d)(i.loadList),Object(Ie.a)((function(e){var t=e.condition;return l._service.getList(t).pipe(Object(dt.a)((function(e){var t=e.list,n=e.totalCount;return i.getListSuccess({dataList:t,totalCount:n})})),Object(pt.a)((function(e){var t="Polygon \ub9ac\uc2a4\ud2b8 \uc870\ud68c\ub97c \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",n=[i.getListFailure({error:t})];return l._catchErr(e,t,n),[]})))})))})),this.upsertPolygon$=Object(r.c)((function(){return l._actions$.pipe(Object(r.d)(i.upsertPolygon),Object(Ie.a)((function(e){var t=e.condition;return l._service.putRegionPolygon(t).pipe(Object(dt.a)((function(e){return{succeedYn:!0,upsertItem:e}})),Object(pt.a)((function(e){return Object(je.a)({succeedYn:!1,error:e})})))})),Object(bt.a)((function(e){var t=e.succeedYn,n=e.error,o=e.upsertItem;if(t){var a=[i.upsertPolygonSuccess({upsertItem:o}),i.closeDetailPopup()];l._runPage("Polygon \uc815\ubcf4\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",a)}else{var r="Polygon \uc815\ubcf4 \uc800\uc7a5\uc744 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",c=[i.upsertPolygonFailure({error:r})];l._catchErr(n,r,c)}})))}),{dispatch:!1}),this.removePolygons$=Object(r.c)((function(){return l._actions$.pipe(Object(r.d)(i.removePolygons),Object(Ie.a)((function(e){var t=e.rowids;return l._service.removeItems({rowids:t}).pipe(Object(dt.a)((function(){return{succeedYn:!0}})),Object(pt.a)((function(e){return Object(je.a)({succeedYn:!1,error:e})})))})),Object(bt.a)((function(e){var t=e.succeedYn,n=e.error;if(t){var o=[i.reloadList()];l._runPage("Your data has been deleted.",o)}else l._catchErr(n,"Deletion failed.")})))}),{dispatch:!1}),this.sourceTypeList$=s.pipe(Object(c.u)(ue))}return _createClass(e,[{key:"_runPage",value:function(e,t){var n=this;this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?function(){t.forEach((function(e){n.store.dispatch(e)}))}:function(){}})}},{key:"_catchErr",value:function(e,t,n){var i=this,o=this._errorService.errorHandler(e,t);w.isNil(o)||(w.isNil(o.accept)&&(o.accept=(null==n?void 0:n.length)>0?function(){n.forEach((function(e){i.store.dispatch(e)}))}:function(){}),this.alertService.alert(o))}}]),e}()).\u0275fac=function(e){return new(e||ot)(Se.bc(r.a),Se.bc(Ee),Se.bc(ht.a),Se.bc(xe.a),Se.bc(c.h))},ot.\u0275prov=Se.Mb({token:ot,factory:ot.\u0275fac}),ot),ft=[rt],yt=[Me,Ae,et],mt=((at=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=Se.Ob({type:at}),at.\u0275inj=Se.Nb({factory:function(e){return new(e||at)},imports:[[o.c,a.m,a.w,l.m,u.a,d.a,p.a,O.a,b.a,h.a,g.a,f.a,y.a,m.a,v.a,C.a,k.a,S.a,j.a,st,s.a,c.j.forFeature("bsPolygon",ie),r.b.forFeature([gt])]]}),at)}}]);