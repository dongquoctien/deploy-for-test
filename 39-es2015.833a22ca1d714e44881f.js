(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{LVFn:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var a=i("3qRM"),n=i("W1wq"),o=i("fXoL");let s=(()=>{class t extends a.b{}return t.\u0275fac=function(e){return l(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[o.Bb([n.b]),o.zb],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();const l=o.Yb(s)},Onn4:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var a=i("fXoL"),n=i("3Pt+"),o=i("ofXK");const s=["rb"],l=function(){return{radio:!0}},c={provide:n.p,useExisting:Object(a.U)(()=>r),multi:!0};let r=(()=>{class t{constructor(t){this.cd=t,this.onClick=new a.n,this.onFocus=new a.n,this.onBlur=new a.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}handleClick(t,e,i){t.preventDefault(),this.disabled||(this.select(t),i&&e.focus())}select(t){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.onClick.emit(t))}writeValue(t){this.checked=t===this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t}onInputFocus(t){this.focused=!0,this.onFocus.emit(t)}onInputBlur(t){this.focused=!1,this.onModelTouched(),this.onBlur.emit(t)}onChange(t){this.select(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(a.h))},t.\u0275cmp=a.Kb({type:t,selectors:[["app-radio"]],viewQuery:function(t,e){var i;1&t&&a.Kc(s,!0),2&t&&a.Dc(i=a.gc())&&(e.inputViewChild=i.first)},inputs:{value:"value",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",checked:"checked"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[a.Bb([c])],decls:5,vars:11,consts:[[3,"ngClass","click"],["type","radio",1,"radio-control-input",3,"checked","disabled","change","focus","blur"],["rb",""],[1,"radio-control-text"]],template:function(t,e){1&t&&(a.Wb(0,"label",0),a.fc("click",(function(t){return e.select(t)})),a.Wb(1,"input",1,2),a.fc("change",(function(t){return e.onChange(t)}))("focus",(function(t){return e.onInputFocus(t)}))("blur",(function(t){return e.onInputBlur(t)})),a.Vb(),a.Wb(3,"span",3),a.Pc(4),a.Vb(),a.Vb()),2&t&&(a.Eb(e.styleClass),a.pc("ngClass",a.tc(10,l)),a.Cb(1),a.pc("checked",e.checked)("disabled",e.disabled),a.Db("id",e.inputId)("name",e.name)("value",e.value)("tabindex",e.tabindex),a.Cb(3),a.Qc(e.label))},directives:[o.l],encapsulation:2}),t})()},RZm8:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var a=i("YDFv");class n{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=a.a.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}},hna1:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var a=i("LvDl"),n=i("fXoL");let o=(()=>{class t{constructor(){}openDetailWindow(t,e){if(a.isNil(t)||0===t.length)return void console.error("parameter bookingItemList is empty. check please.");t=a.uniqBy(t,"bookingItemCode");const{bookingItemCode:i}=t[0],n=i.split("-")[1].slice(0,1),o=t.map(t=>`bookingItemCodes=${t.bookingItemCode}`).join("&"),s=`${window.location.origin}/reservation/${{F:"flight",H:"hotel",C:"car",A:"activity"}[n]}/${i}?`+o+(e?`&tabName=${e}`:"");window.open(s,"_blank","height=950,width=1600,left=0,top=0,toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=no,status=no")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"kd+X":function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var a=i("fXoL"),n=i("3Pt+"),o=i("baeO"),s=i("8LU1"),l=i("FtGj"),c=i("quSY"),r=i("95bG");class d{constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}}let p=(()=>{class t{constructor(t,e,i){if(this._elementRef=t,this._dateAdapter=e,this._dateFormats=i,this.dateChange=new a.n,this.dateInput=new a.n,this._valueChange=new a.n,this._disabledChange=new a.n,this._valueChangesSubscription=c.a.EMPTY,this._localeSubscription=c.a.EMPTY,this._lastValueValid=!1,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=t=>{const e=this._getValidDateOrNull(this._dateAdapter.deserialize(t.value)),i=this._getDateFilter();return i&&e&&!i(e)?{matDatepickerFilter:!0}:null},this._minValidator=t=>{const e=this._getValidDateOrNull(this._dateAdapter.deserialize(t.value)),i=this._getMinDate();return!i||!e||this._dateAdapter.compareDate(i,e)<=0?null:{matDatepickerMin:{min:i,actual:e}}},this._maxValidator=t=>{const e=this._getValidDateOrNull(this._dateAdapter.deserialize(t.value)),i=this._getMaxDate();return!i||!e||this._dateAdapter.compareDate(i,e)>=0?null:{matDatepickerMax:{max:i,actual:e}}},!this._dateAdapter)throw Object(r.a)("DateAdapter");if(!this._dateFormats)throw Object(r.a)("MAT_DATE_FORMATS");this._localeSubscription=e.localeChanges.subscribe(()=>{this.value=this.value})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(t){t=this._dateAdapter.deserialize(t),this._lastValueValid=!t||this._dateAdapter.isValid(t),t=this._getValidDateOrNull(t);const e=this.value;this._assignValue(t),this._formatValue(t),this._dateAdapter.sameDate(e,t)||this._valueChange.emit(t)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(t){const e=Object(s.c)(t),i=this._elementRef.nativeElement;this._disabled!==e&&(this._disabled=e,this._disabledChange.emit(e)),e&&this._isInitialized&&i.blur&&i.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(t){this._model=t,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(t=>{if(t.source!==this){const e=this._getValueFromModel(t.selection);this._cvaOnChange(this._dateAdapter.format(e,this._dateFormats.display.dateInput)),this._onTouched(),this._formatValue(e),this.dateInput.emit(new d(this,this._elementRef.nativeElement)),this.dateChange.emit(new d(this,this._elementRef.nativeElement)),this._outsideValueChanged&&this._outsideValueChanged()}})}ngAfterViewInit(){this._isInitialized=!0}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}writeValue(t){this.value=t}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onKeydown(t){t.altKey&&t.keyCode===l.b&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),t.preventDefault())}_onInput(t){const e=this._lastValueValid;let i=this._dateAdapter.parse(t,this._dateFormats.parse.dateInput);this._lastValueValid=!i||this._dateAdapter.isValid(i),i=this._getValidDateOrNull(i),this._dateAdapter.sameDate(i,this.value)?e!==this._lastValueValid&&this._validatorOnChange():(this._assignValue(i),this._cvaOnChange(i?this._dateAdapter.format(i,this._dateFormats.display.dateInput):null),this._valueChange.emit(i),this.dateInput.emit(new d(this,this._elementRef.nativeElement)));const a=this._convertDateInput(t);this._elementRef.nativeElement.value=a}_onChange(){this.dateChange.emit(new d(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=t?this._dateAdapter.format(t,this._dateFormats.display.dateInput):""}_getValidDateOrNull(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}_assignValue(t){this._model?(this._assignValueToModel(t),this._pendingValue=null):this._pendingValue=t}_parentDisabled(){return!1}_convertDateInput(t){if(t.length>10)return t.substr(0,10);let e=t.replace(/[^\d]/g,"");return e=e.length<7?e.replace(/(\d{4})(\d{1,2})/g,"$1-$2"):e.replace(/(\d{4})(\d{2})(\d{1,2})/g,"$1-$2-$3"),e}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(a.l),a.Qb(o.a,8),a.Qb(o.c,8))},t.\u0275dir=a.Lb({type:t,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"}}),t})();const u={provide:n.p,useExisting:Object(a.U)(()=>h),multi:!0},b={provide:n.o,useExisting:Object(a.U)(()=>h),multi:!0};let h=(()=>{class t extends p{constructor(t,e,i){super(t,e,i),this._validator=n.z.compose(super._getValidators())}set matDatepicker(t){t&&(this._datepicker=t,this._registerModel(t._registerInput(this)))}get min(){return this._min}set min(t){this._min=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._validatorOnChange()}get max(){return this._max}set max(t){this._max=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._validatorOnChange()}get dateFilter(){return this._dateFilter}set dateFilter(t){this._dateFilter=t,this._validatorOnChange()}getConnectedOverlayOrigin(){return this._elementRef}getThemePalette(){}getStartValue(){return this.value}getPopupConnectionElementRef(){return this.getConnectedOverlayOrigin()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(t){return t}_assignValueToModel(t){this._model&&this._model.updateSelection(t,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(a.l),a.Qb(o.a,8),a.Qb(o.c,8))},t.\u0275dir=a.Lb({type:t,selectors:[["input","matDatepicker",""]],hostVars:5,hostBindings:function(t,e){1&t&&a.fc("input",(function(t){return e._onInput(t.target.value)}))("change",(function(){return e._onChange()}))("blur",(function(){return e._onBlur()}))("keydown",(function(t){return e._onKeydown(t)})),2&t&&(a.Zb("disabled",e.disabled),a.Db("aria-haspopup",e._datepicker?"dialog":null)("aria-owns",(null==e._datepicker?null:e._datepicker.opened)&&e._datepicker.id||null)("min",e.min?e._dateAdapter.toIso8601(e.min):null)("max",e.max?e._dateAdapter.toIso8601(e.max):null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[a.Bb([u,b]),a.zb]}),t})()},kkTz:function(t,e,i){"use strict";i.r(e),i.d(e,"CONTAINERS",(function(){return ti})),i.d(e,"COMPONENTS",(function(){return ei})),i.d(e,"FlReservationListOtaModule",(function(){return ii}));var a={};i.r(a),i.d(a,"loadDateRangeTypeAction",(function(){return I})),i.d(a,"loadDateRangeTypeSuccessAction",(function(){return T})),i.d(a,"loadDateRangeTypeFailureAction",(function(){return D})),i.d(a,"loadStationTypeAction",(function(){return A})),i.d(a,"loadStationTypeSuccessAction",(function(){return N})),i.d(a,"loadStationTypeFailureAction",(function(){return P})),i.d(a,"loadBookingStatusAction",(function(){return V})),i.d(a,"loadBookingStatusSuccessAction",(function(){return w})),i.d(a,"loadBookingStatusFailureAction",(function(){return $})),i.d(a,"loadGdsCompAction",(function(){return E})),i.d(a,"loadGdsCompSuccessAction",(function(){return M})),i.d(a,"loadGdsCompFailureAction",(function(){return W})),i.d(a,"loadRoutingTypeAction",(function(){return Y})),i.d(a,"loadRoutingTypeSuccessAction",(function(){return K})),i.d(a,"loadRoutingTypeFailureAction",(function(){return z})),i.d(a,"loadCabinClassAction",(function(){return B})),i.d(a,"loadCabinClassSuccessAction",(function(){return U})),i.d(a,"loadCabinClassFailureAction",(function(){return G})),i.d(a,"loadPromotionCardAction",(function(){return H})),i.d(a,"loadPromotionCardSuccessAction",(function(){return X})),i.d(a,"loadPromotionCardFailureAction",(function(){return q})),i.d(a,"loadTicketingStatusCodeListAction",(function(){return Q})),i.d(a,"loadTicketingStatusCodeListSuccessAction",(function(){return J})),i.d(a,"loadTicketingStatusCodeListFailureAction",(function(){return Z})),i.d(a,"loadPaymentStatusCodeListAction",(function(){return tt})),i.d(a,"loadPaymentStatusCodeListSuccessAction",(function(){return et})),i.d(a,"loadPaymentStatusCodeListFailureAction",(function(){return it})),i.d(a,"initThisStateAction",(function(){return at})),i.d(a,"reloadListAction",(function(){return nt})),i.d(a,"loadMainListAction",(function(){return ot})),i.d(a,"loadMainListSuccessAction",(function(){return st})),i.d(a,"loadMainListFailureAction",(function(){return lt})),i.d(a,"changeSearchCondition",(function(){return ct})),i.d(a,"changeOtherSearchInfo",(function(){return rt})),i.d(a,"changeMainListPageSizeAction",(function(){return dt})),i.d(a,"changeMainListPageIndexAction",(function(){return pt})),i.d(a,"setGridStateAction",(function(){return ut})),i.d(a,"openOffRegistPopup",(function(){return bt})),i.d(a,"closeOffRegistPopup",(function(){return ht}));var n=i("ofXK"),o=i("3Pt+"),s=i("snw9"),l=i("kt0X"),c=i("WG3B"),r=i("wPo9"),d=i("7rOj"),p=i("6LsY"),u=i("l1P7"),b=i("v7zA"),h=i("hHe4"),g=i("1OXJ"),m=i("5hwk"),f=i("kKjH"),C=i("qXPF"),O=i("HxJV"),v=i("YyVL"),S=i("vu/V"),y=i("tyNb"),k=i("XNiG"),j=i("itXk"),L=i("zP0r"),_=i("Kj3r"),R=i("pLZG"),x=i("1G5W"),F=i("LvDl");const I=Object(l.o)("[FlReservationListOta] load date range type",Object(l.t)()),T=Object(l.o)("[FlReservationListOta] load date range type success",Object(l.t)()),D=Object(l.o)("[FlReservationListOta] load date range type failure",Object(l.t)()),A=Object(l.o)("[FlReservationListOta] load station type",Object(l.t)()),N=Object(l.o)("[FlReservationListOta] load station type success",Object(l.t)()),P=Object(l.o)("[FlReservationListOta] load station type failure",Object(l.t)()),V=Object(l.o)("[FlReservationListOta] load booking status",Object(l.t)()),w=Object(l.o)("[FlReservationListOta] load booking status success",Object(l.t)()),$=Object(l.o)("[FlReservationListOta] load booking status failure",Object(l.t)()),E=Object(l.o)("[FlReservationListOta] load gds comp",Object(l.t)()),M=Object(l.o)("[FlReservationListOta] load gds comp success",Object(l.t)()),W=Object(l.o)("[FlReservationListOta] load gds comp failure",Object(l.t)()),Y=Object(l.o)("[FlReservationListOta] load routing type",Object(l.t)()),K=Object(l.o)("[FlReservationListOta] load routing type success",Object(l.t)()),z=Object(l.o)("[FlReservationListOta] load routing type failure",Object(l.t)()),B=Object(l.o)("[FlReservationListOta] load cabin class",Object(l.t)()),U=Object(l.o)("[FlReservationListOta] load cabin class success",Object(l.t)()),G=Object(l.o)("[FlReservationListOta] load cabin class failure",Object(l.t)()),H=Object(l.o)("[FlReservationListOta] load promotion card",Object(l.t)()),X=Object(l.o)("[FlReservationListOta] load promotion card success",Object(l.t)()),q=Object(l.o)("[FlReservationListOta] load promotion card failure",Object(l.t)()),Q=Object(l.o)("[FlReservationListOta] load ticketing status code list",Object(l.t)()),J=Object(l.o)("[FlReservationListOta] load ticketing status code list success",Object(l.t)()),Z=Object(l.o)("[FlReservationListOta] load ticketing status code list failure",Object(l.t)()),tt=Object(l.o)("[FlReservationListOta] load payment status code list",Object(l.t)()),et=Object(l.o)("[FlReservationListOta] load payment status code list success",Object(l.t)()),it=Object(l.o)("[FlReservationListOta] load payment status code list failure",Object(l.t)()),at=Object(l.o)("[FlReservationListOta] init flight reservation list ota"),nt=Object(l.o)("[FlReservationListOta] reload grid data list"),ot=Object(l.o)("[FlReservationListOta] load flight reservation list ota",Object(l.t)()),st=Object(l.o)("[FlReservationListOta] load flight reservation list success",Object(l.t)()),lt=Object(l.o)("[FlReservationListOta] load flight reservation list failure",Object(l.t)()),ct=Object(l.o)("[FlReservationListOta] change search condition with limit",Object(l.t)()),rt=Object(l.o)("[FlReservationListOta] change other search info",Object(l.t)()),dt=Object(l.o)("[FlReservationListOta] change flight reservation list ota page size",Object(l.t)()),pt=Object(l.o)("[FlReservationListOta] change flight reservation list ota page index",Object(l.t)()),ut=Object(l.o)("[FlReservationListOta] set grid state",Object(l.t)()),bt=Object(l.o)("[FlReservationListOta] open off regist popup"),ht=Object(l.o)("[FlReservationListOta] close off regist popup");var gt=i("EVqC");const mt=Object(gt.a)({selectId:t=>t.rowid,sortComparer:!1}),ft=mt.getInitialState({auths:{},dateRangeTypeList:null,stationTypeList:null,ticketingStatusCodeList:null,paymentStatusCodeList:null,onOffManualList:null,bookingStatusList:null,gdsCompList:null,routingTypeList:null,cabinClassList:null,promotionCardList:null,reloadToggle:!1,loading:!1,searchCondition:null,otherSearchInfo:null,mainSummaryInfo:null,mainDataTotalCount:0,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},mainDataListSortInfo:[],pageSize:20,isOpenOffRegistModal:!1}),Ct=Object(l.q)(ft,Object(l.s)(a.loadDateRangeTypeSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{dateRangeTypeList:e})),Object(l.s)(a.loadStationTypeSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{stationTypeList:e})),Object(l.s)(a.loadTicketingStatusCodeListSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{ticketingStatusCodeList:e})),Object(l.s)(a.loadPaymentStatusCodeListSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{paymentStatusCodeList:e})),Object(l.s)(a.loadBookingStatusSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{bookingStatusList:e})),Object(l.s)(a.loadGdsCompSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{gdsCompList:e})),Object(l.s)(a.loadRoutingTypeSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{routingTypeList:e})),Object(l.s)(a.loadCabinClassSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{cabinClassList:e})),Object(l.s)(a.loadPromotionCardSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{promotionCardList:e})),Object(l.s)(a.changeSearchCondition,(t,{searchCondition:e})=>Object.assign(Object.assign({},t),{searchCondition:F.cloneDeep(e)})),Object(l.s)(a.changeOtherSearchInfo,(t,{otherSearchInfo:e})=>Object.assign(Object.assign({},t),{otherSearchInfo:F.cloneDeep(e)})),Object(l.s)(a.initThisStateAction,t=>Object.assign(Object.assign({},t),{reloadToggle:!1,loading:!1,isOpenOffRegistModal:!1})),Object(l.s)(a.reloadListAction,t=>Object.assign(Object.assign({},t),{reloadToggle:!t.reloadToggle})),Object(l.s)(a.loadMainListAction,t=>Object.assign(Object.assign({},t),{loading:!0})),Object(l.s)(a.loadMainListSuccessAction,(t,{dataCollection:e})=>mt.setAll(e.list,Object.assign(Object.assign({},t),{loading:!1,mainSummaryInfo:e.summary,mainDataTotalCount:e.totalCount}))),Object(l.s)(a.loadMainListFailureAction,t=>Object.assign(Object.assign({},t),{loading:!1})),Object(l.s)(a.changeMainListPageSizeAction,(t,{pageSize:e})=>Object.assign(Object.assign({},t),{gridState:F.set(F.cloneDeep(t.gridState),["pageInfo","take"],e),pageSize:e})),Object(l.s)(a.changeMainListPageIndexAction,(t,{pageIndex:e})=>Object.assign(Object.assign({},t),{gridState:F.set(F.cloneDeep(t.gridState),["pageInfo","skip"],e)})),Object(l.s)(a.setGridStateAction,(t,{gridState:e})=>Object.assign(Object.assign({},t),{gridState:F.cloneDeep(e)})),Object(l.s)(a.openOffRegistPopup,t=>Object.assign(Object.assign({},t),{isOpenOffRegistModal:!0})),Object(l.s)(a.closeOffRegistPopup,t=>Object.assign(Object.assign({},t),{isOpenOffRegistModal:!1})));function Ot(t,e){return Object(l.m)({flReservationListOtaMain:Ct})(t,e)}const vt=Object(l.p)("flReservationListOta"),St=Object(l.r)(vt,t=>t.flReservationListOtaMain),yt=Object(l.r)(St,t=>t.dateRangeTypeList),kt=Object(l.r)(St,t=>t.stationTypeList),jt=Object(l.r)(St,t=>t.bookingStatusList),Lt=Object(l.r)(St,t=>t.gdsCompList),_t=Object(l.r)(St,t=>t.routingTypeList),Rt=Object(l.r)(St,t=>t.cabinClassList),xt=Object(l.r)(St,t=>t.promotionCardList),Ft=Object(l.r)(St,t=>t.ticketingStatusCodeList),It=Object(l.r)(St,t=>t.paymentStatusCodeList),Tt=Object(l.r)(St,t=>t.searchCondition),Dt=Object(l.r)(St,t=>t.otherSearchInfo),At=Object(l.r)(St,t=>t.reloadToggle),Nt=Object(l.r)(St,t=>t.loading),Pt=mt.getSelectors(St).selectAll,Vt=Object(l.r)(St,t=>t.mainSummaryInfo),wt=Object(l.r)(St,t=>t.mainDataTotalCount),$t=(Object(l.r)(St,t=>t.mainDataListSortInfo),Object(l.r)(St,t=>t.gridState)),Et=Object(l.r)(St,t=>t.pageSize),Mt=Object(l.r)(St,t=>t.isOpenOffRegistModal);mt.getSelectors(St);var Wt=i("AytR");const{API_URL:Yt}=Wt.a,Kt={postCommonDetailCode:`${Yt}/common/detail-code`,postCommonComp:`${Yt}/common/comp`,postBasicContinent:`${Yt}/admin/basis/continent`,postBookingFlightList:`${Yt}/admin/booking/flight/list`,excelDownload:`${Yt}/admin/booking/flight/excel`,postFunction:`${Yt}/admin/basis/function`};var zt=i("fXoL"),Bt=i("pfiq"),Ut=i("/uUt"),Gt=i("wd/R"),Ht=i.n(Gt),Xt=i("6UzV");let qt=(()=>{class t{constructor(t){this.fb=t,this.generateGridColumns=()=>[{field:"firstInsertDatetime",title:"Booking Date",type:"text",style:{"text-align":"center"}},{field:"bookingItemCode",title:"Booking Item Code",type:"text",template:"bookingItemCodeTpl"},{field:"gdsSubPnr",title:"PNR",type:"text"},{field:"gdsCompName",title:"GDS",type:"text"},{field:"bookingStatusName",title:"Booking Status",type:"text",style:{"text-align":"center"}},{field:"paymentStatusName",title:"C.Payment Status",type:"text",style:{"text-align":"center"}},{field:"ticketingStatusName",title:"Issued Status",style:{"text-align":"center"}},{field:"clientCancelDeadline",title:"Client TL",type:"text",template:"clientCancelDeadlineTpl",style:{"text-align":"center"}},{field:"bookerName",title:"Booker",type:"text"},{field:"departureDatetime",title:"Departure Date",type:"text",template:"departureDatetimeTpl",style:{"text-align":"center"}},{field:"airlineCode",title:"Airline",type:"text",style:{"text-align":"center"}},{field:"salesNetAmount",title:"Sales Net",type:"text",template:"salesNetAmountTpl",style:{"text-align":"right"}},{field:"salesTaxAmount",title:"Sales Tax",type:"text",template:"salesTaxAmountTpl",style:{"text-align":"right"}},{field:"totalPaxCount",title:"No. of Pax",type:"text"},{field:"originAirportCode",title:"Origin",type:"text",style:{"text-align":"center"}},{field:"destinationAirportCode",title:"Destination",type:"text",style:{"text-align":"center"}},{field:"itinerary",title:"Itinerary",type:"text"}],this.generateFlReservationListOtaSearchForm=()=>this.fb.group({searchTypeCode:[null,o.z.required],dateRange1:this.fb.group({rangeType:[null],dates:this.fb.array([new o.g(null,[o.z.required]),new o.g(null,[o.z.required])])},{validators:[Xt.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),dateRange2:this.fb.group({rangeType:[null],dates:this.fb.array([new o.g(null),new o.g(null)])},{validators:[Xt.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),codeTypeOption:[null],bookingCode:[null],bookingItemCode:[null],gdsSubPnr:[null],airlinePnr:[null],bookerName:[null],bookerId:[null],travelerName:[null],ticketNo:[null],bookerMobileNo:[null],fareConfirmYn:[null],domesticYn:[null],bookingStatusCodes:[null],bookingPicUno:[null],lastTicketingPicUno:[null],lastRefundPicUno:[null],originAirportCode:[null,[o.z.minLength(3),o.z.maxLength(3),Xt.a.eng()]],destinationAirportCode:[null,[o.z.minLength(3),o.z.maxLength(3),Xt.a.eng()]],airlineCodes:[null,[Xt.a.airlineCodesWithAsteriskStringValidator]],gdsCompCode:[null],promotionCardCode:[null],routingTypeCode:[null],cabinClassCode:[null],fareRuleNotExistYn:[null],picTypeOption:[null],ticketingStatusCode:[null],paymentStatusCode:[null],deviceTypeCode:[null]}),this.initFlReservationListOtaSearchForm=()=>({searchTypeCode:"BFT04",dateRange1:{rangeType:"FDD01",dates:[Gt().format("YYYY-MM-DD"),Gt().format("YYYY-MM-DD")]},dateRange2:{rangeType:"FDD02",dates:[null,null]},codeTypeOption:"bookingItemCode",bookingCode:null,bookingItemCode:null,gdsSubPnr:null,airlinePnr:null,bookerName:null,bookerId:null,travelerName:null,ticketNo:null,bookerMobileNo:null,fareConfirmYn:null,domesticYn:null,bookingStatusCodes:null,bookingPicUno:null,lastTicketingPicUno:null,lastRefundPicUno:null,originAirportCode:null,destinationAirportCode:null,airlineCodes:null,gdsCompCode:null,promotionCardCode:null,routingTypeCode:null,cabinClassCode:null,fareRuleNotExistYn:!1,picTypeOption:"bookingPicUno",ticketingStatusCode:null,paymentStatusCode:null,deviceTypeCode:null}),this.generateChangeTlPutForm=()=>this.fb.group({clientCancelDeadlineDate:[null,[o.z.required]],clientCancelDeadlineTime:[null,[o.z.required]],smsSendYn:[!1,[o.z.required]]}),this.generateCancelForm=()=>this.fb.group({smsSendYn:[!1,[o.z.required]]})}}return t.\u0275fac=function(e){return new(e||t)(zt.bc(o.f))},t.\u0275prov=zt.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Qt=i("LRne"),Jt=i("z6cu"),Zt=i("eIep"),te=i("tpT/");let ee=(()=>{class t{constructor(t){this.api=t}getCommonDetailCodeList(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(Kt.postCommonDetailCode,e).pipe(Object(Zt.a)(t=>t.succeedYn?Object(Qt.a)(t.result.list):Object(Jt.a)(t||"api response error")))}getGdsCompList(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(Kt.postCommonComp,e).pipe(Object(Zt.a)(t=>t.succeedYn?Object(Qt.a)(t.result.list):Object(Jt.a)(t||"api response error")))}getContinentList(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(Kt.postBasicContinent,e).pipe(Object(Zt.a)(t=>t.succeedYn?Object(Qt.a)(t.result.list):Object(Jt.a)(t||"api response error")))}getMainList(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(Kt.postBookingFlightList,e).pipe(Object(Zt.a)(t=>{var e,i,a;if(t.succeedYn){const n=this._addRowid(null===(e=t.result)||void 0===e?void 0:e.list),o=(null===(i=t.result)||void 0===i?void 0:i.summary)?F.cloneDeep(t.result.summary):{},s=(null===(a=t.result)||void 0===a?void 0:a.totalCount)||0;return Object(Qt.a)({list:n,summary:o,totalCount:s})}return Object(Jt.a)(t||"api response error")}))}getBasisFunctions(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(Kt.postFunction,e).pipe(Object(Zt.a)(t=>t.succeedYn&&t.result?Object(Qt.a)(t.result.list||[]):Object(Jt.a)(t||"api response error")))}_addRowid(t){return F.isNil(t)?[]:t.map((t,e)=>Object.assign(Object.assign({},t),{rowid:String(e)}))}}return t.\u0275fac=function(e){return new(e||t)(zt.bc(te.a))},t.\u0275prov=zt.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ie=i("+Sob"),ae=i("nMd8"),ne=i("rbKv"),oe=i("kd+X"),se=i("LVFn"),le=i("U6NN"),ce=i("0xcq"),re=i("gbCm"),de=i("pb6r");function pe(t,e){if(1&t&&zt.Rb(0,"app-input-text",53),2&t){const t=zt.hc();zt.pc("isInvalid",t.checkIsInvalid("bookingCode"))}}function ue(t,e){if(1&t&&zt.Rb(0,"app-input-text",54),2&t){const t=zt.hc();zt.pc("isInvalid",t.checkIsInvalid("bookingItemCode"))}}function be(t,e){if(1&t&&zt.Rb(0,"app-input-text",55),2&t){const t=zt.hc();zt.pc("isInvalid",t.checkIsInvalid("gdsSubPnr"))}}function he(t,e){if(1&t&&zt.Rb(0,"app-input-text",56),2&t){const t=zt.hc();zt.pc("isInvalid",t.checkIsInvalid("airlinePnr"))}}function ge(t,e){if(1&t&&zt.Rb(0,"app-input-text",57),2&t){const t=zt.hc();zt.pc("isInvalid",t.checkIsInvalid("bookerName"))}}function me(t,e){if(1&t&&zt.Rb(0,"app-input-text",58),2&t){const t=zt.hc();zt.pc("isInvalid",t.checkIsInvalid("bookerId"))}}function fe(t,e){if(1&t&&zt.Rb(0,"app-input-text",59),2&t){const t=zt.hc();zt.pc("isInvalid",t.checkIsInvalid("travelerName"))}}function Ce(t,e){if(1&t&&zt.Rb(0,"app-input-text",60),2&t){const t=zt.hc();zt.pc("isInvalid",t.checkIsInvalid("ticketNo"))}}function Oe(t,e){if(1&t&&zt.Rb(0,"app-input-text",61),2&t){const t=zt.hc();zt.pc("isInvalid",t.checkIsInvalid("bookerMobileNo"))}}const ve=function(){return{userTypeCode:"U01"}},Se=function(){return["userNo","name","deptName","positionName"]};function ye(t,e){if(1&t&&zt.Rb(0,"app-auto-complete",62),2&t){const t=zt.hc();zt.pc("inputFieldValue",t.bookingPicUnoString)("inputId","bookingPicUnoString")("apiSearchTerm","name")("apiCondition",zt.tc(5,ve))("inputFieldFormatKeyList",zt.tc(6,Se))}}function ke(t,e){if(1&t&&zt.Rb(0,"app-auto-complete",63),2&t){const t=zt.hc();zt.pc("inputFieldValue",t.lastTicketingPicUnoString)("inputId","lastTicketingPicUnoString")("apiSearchTerm","name")("apiCondition",zt.tc(5,ve))("inputFieldFormatKeyList",zt.tc(6,Se))}}function je(t,e){if(1&t&&zt.Rb(0,"app-auto-complete",64),2&t){const t=zt.hc();zt.pc("inputFieldValue",t.lastRefundPicUnoString)("inputId","lastRefundPicUnoString")("apiSearchTerm","name")("apiCondition",zt.tc(5,ve))("inputFieldFormatKeyList",zt.tc(6,Se))}}let Le=(()=>{class t{constructor(t){this._dataService=t,this.clickSearchEvent=new zt.n,this.clickResetEvent=new zt.n,this.isShowmore=!1,this.currentSearchKeywordType="bookingCode",this.bookingPicUnoString="",this.lastTicketingPicUnoString="",this.lastRefundPicUnoString="",this.deviceTypeList=[{detailCode:"PC",detailCodeNameEn:"PC"},{detailCode:"MO",detailCodeNameEn:"Mobile"}],this._$unsubscribe=new k.a,this.searchForm=t.generateFlReservationListOtaSearchForm()}get dateRangeTypeList(){return this._dataRangeTypeList||[]}set dateRangeTypeList(t){this._dataRangeTypeList=t,this._initDateRangeList(t)}get searchCondition(){return this._searchCondition}set searchCondition(t){this._searchCondition=t,this.searchFormData=this._setSearchFormData(t),this._initDateRangeList(this.searchFormData.dateRangeTypeList)}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(t){this._otherSearchInfo=t,this._setOtherSearchInfo(t)}get dateRange1Dates(){return this.searchForm.get("dateRange1").get("dates").value}get dateRange2Dates(){return this.searchForm.get("dateRange2").get("dates").value}get formValue(){return this.searchForm&&this.searchForm.value}get searchFormValid(){return this.searchForm.valid}ngOnInit(){this._initState(),this._initDetailSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.searchForm.invalid)return Object.keys(this.searchForm.controls).forEach(t=>{this.searchForm.controls[t].invalid&&console.error(t+" is invalid")}),void(this._checkValid=!0);const t=this._setSearchCondition(),e=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:t,otherSearchInfo:e}),this._checkValid=!1}onReset(){this.clickResetEvent.emit()}_setSearchCondition(){const t=this._dataService.initFlReservationListOtaSearchForm();let e=Object.assign({},F.pick(this.searchForm.value,Object.keys(t)));return!1===e.fareRuleNotExistYn&&(e=F.omit(e,["fareRuleNotExistYn"])),F.omitBy(e,F.isNil)}checkIsInvalidDateRange(t){var e;return this._checkValid&&(!0===(null===(e=t.errors)||void 0===e?void 0:e.rangeCompare)||t.invalid)}checkIsInvalid(t){return this._checkValid&&this.searchForm.get(t)&&this.searchForm.get(t).invalid}_setSearchFormData(t){const e=this._dataService.initFlReservationListOtaSearchForm();return Object.assign({},e,F.pick(t,Object.keys(e)))}_initDateRangeList(t){const e=this.searchCondition.dateRange1.rangeType;this.dateRangeTypeList2=null==t?void 0:t.filter(t=>t.detailCode!==e),this.searchForm.get("dateRange2").get("rangeType").setValue(this.searchCondition.dateRange2.rangeType)}_initState(){this.codeTypeOptions=[{label:"Booking Code",value:"bookingCode"},{label:"Booking Item Code",value:"bookingItemCode"},{label:"GDS PNR",value:"gdsSubPnr"},{label:"Airline PNR",value:"airlinePnr"},{label:"Booker",value:"bookerName"},{label:"BookerID",value:"bookerId"},{label:"Traveler",value:"travelerName"},{label:"Ticket No.",value:"ticketNo"},{label:"Mobile No.",value:"bookerMobileNo"}],this.picTypeOptions=[{value:"bookingPicUno",label:"BKG PIC"},{value:"lastTicketingPicUno",label:"TKT PIC"},{value:"lastRefundPicUno",label:"RFND PIC"}],this.fareConfirmOptions=[{value:!0,label:"Y"},{value:!1,label:"N"}],this.domesticOptions=[{value:!1,label:"International"},{value:!0,label:"Domestic"}]}_initDetailSubscription(){this.searchForm.get("dateRange1").get("rangeType").valueChanges.pipe(Object(x.a)(this._$unsubscribe)).subscribe(t=>{this.dateRangeTypeList2=this.dateRangeTypeList.filter(e=>e.detailCode!==t)||[];const e=this.dateRangeTypeList2.length?this.dateRangeTypeList2[0].detailCode:null;this.searchForm.get("dateRange2").get("rangeType").setValue(e)}),this.searchForm.get("picTypeOption").valueChanges.pipe(Object(Ut.a)(),Object(x.a)(this._$unsubscribe)).subscribe(t=>{this.searchForm.get("bookingPicUno").setValue(null),this.searchForm.get("lastTicketingPicUno").setValue(null),this.searchForm.get("lastRefundPicUno").setValue(null)})}_setOtherSearchInfo(t){this.bookingPicUnoString=null==t?void 0:t.bookingPicUnoString,this.lastTicketingPicUnoString=null==t?void 0:t.lastTicketingPicUnoString,this.lastRefundPicUnoString=null==t?void 0:t.lastRefundPicUnoString}_setOtherSearchCondition(){const t={};return this.autoCopmpletes.forEach(e=>{Object.assign(t,e.getInputValue())}),t}}return t.\u0275fac=function(e){return new(e||t)(zt.Qb(qt))},t.\u0275cmp=zt.Kb({type:t,selectors:[["app-fl-reservation-list-ota-search"]],viewQuery:function(t,e){var i;1&t&&zt.Xc(Bt.a,!0),2&t&&zt.Dc(i=zt.gc())&&(e.autoCopmpletes=i)},inputs:{stationTypeList:"stationTypeList",bookingStatusList:"bookingStatusList",gdsCompList:"gdsCompList",routingTypeList:"routingTypeList",cabinClassList:"cabinClassList",promotionCardList:"promotionCardList",ticketingStatusCodeList:"ticketingStatusCodeList",paymentStatusCodeList:"paymentStatusCodeList",dateRangeTypeList:"dateRangeTypeList",searchCondition:"searchCondition",otherSearchInfo:"otherSearchInfo"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:118,vars:66,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],["formGroupName","dateRange1",1,"col-2","flex-shrink1"],["formControlName","rangeType","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-shrink-0",3,"options","useAllOptionYn"],["formArrayName","dates",1,"calendar-set","flex-fill"],[1,"input","calendar","d-inline-flex","flex-fill"],[3,"for"],["type","text",3,"matDatepicker","formControlName"],["fromDate1",""],[1,"dash"],["type","text",3,"matDatepicker","min","formControlName"],["toDate1",""],["formGroupName","dateRange2",1,"col-2","flex-shrink1"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","formControlName"],["fromDate2",""],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","min","formControlName"],["toDate2",""],[1,"col-1"],["formControlName","codeTypeOption",1,"mr5",3,"options","useAllOptionYn"],[3,"ngSwitch"],["formControlName","bookingCode","class","d-inline-flex flex-fill","inputFormat","upperCase",3,"isInvalid",4,"ngSwitchCase"],["formControlName","bookingItemCode","class","d-inline-flex flex-fill","inputFormat","upperCase",3,"isInvalid",4,"ngSwitchCase"],["formControlName","gdsSubPnr","class","d-inline-flex flex-fill","inputFormat","upperCase",3,"isInvalid",4,"ngSwitchCase"],["formControlName","airlinePnr","class","d-inline-flex flex-fill","inputFormat","upperCase",3,"isInvalid",4,"ngSwitchCase"],["formControlName","bookerName","class","d-inline-flex flex-fill","inputFormat","upperCase",3,"isInvalid",4,"ngSwitchCase"],["formControlName","bookerId","class","d-inline-flex flex-fill","inputFormat","upperCase",3,"isInvalid",4,"ngSwitchCase"],["formControlName","travelerName","class","d-inline-flex flex-fill","inputFormat","upperCase",3,"isInvalid",4,"ngSwitchCase"],["formControlName","ticketNo","class","d-inline-flex flex-fill","inputFormat","upperCase",3,"isInvalid",4,"ngSwitchCase"],["formControlName","bookerMobileNo","class","d-inline-flex flex-fill","inputFormat","upperCase",3,"isInvalid",4,"ngSwitchCase"],[1,"form-label"],["formControlName","fareConfirmYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","bookingStatusCodes","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options","useAllOptionYn"],["formControlName","paymentStatusCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","ticketingStatusCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","originAirportCode","placeholder","e.g. ICN","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","destinationAirportCode","placeholder","e.g. ICN","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","airlineCodes","inputFormat","upperCase","placeholder","e.g. KE","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","picTypeOption",1,"d-inline-flex","flex-shrink-0","mr5",3,"options","useAllOptionYn"],["formControlName","bookingPicUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name","class","d-inline-flex flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","apiCondition","inputFieldFormatKeyList",4,"ngSwitchCase"],["formControlName","lastTicketingPicUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name","class","d-inline-flex flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","apiCondition","inputFieldFormatKeyList",4,"ngSwitchCase"],["formControlName","lastRefundPicUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name","class","d-inline-flex flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","apiCondition","inputFieldFormatKeyList",4,"ngSwitchCase"],["formControlName","promotionCardCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","routingTypeCode","dataKey","detailCode","displayKey","detailCode",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","cabinClassCode","dataKey","detailCode","displayKey","detailCode",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","gdsCompCode","dataKey","compCode","displayKey","compName",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","domesticYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","fareRuleNotExistYn",3,"binary"],["formControlName","deviceTypeCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"],[1,"btn-searchbox-extend",3,"click"],["formControlName","bookingCode","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","bookingItemCode","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","gdsSubPnr","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","airlinePnr","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","bookerName","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","bookerId","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","travelerName","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","ticketNo","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","bookerMobileNo","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","bookingPicUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","apiCondition","inputFieldFormatKeyList"],["formControlName","lastTicketingPicUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","apiCondition","inputFieldFormatKeyList"],["formControlName","lastRefundPicUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","apiCondition","inputFieldFormatKeyList"]],template:function(t,e){if(1&t&&(zt.Wb(0,"form",0),zt.fc("ngSubmit",(function(){return e.onSubmit()})),zt.Wb(1,"div",1),zt.Wb(2,"div",2),zt.Wb(3,"div",3),zt.Rb(4,"app-selectbox-detailcode",4),zt.Wb(5,"div",5),zt.Wb(6,"div",6),zt.Rb(7,"mat-datepicker-toggle",7),zt.Rb(8,"input",8),zt.Rb(9,"mat-datepicker",null,9),zt.Vb(),zt.Wb(11,"span",10),zt.Pc(12,"~"),zt.Vb(),zt.Wb(13,"div",6),zt.Rb(14,"mat-datepicker-toggle",7),zt.Rb(15,"input",11),zt.Rb(16,"mat-datepicker",null,12),zt.Vb(),zt.Vb(),zt.Vb(),zt.Wb(18,"div",13),zt.Rb(19,"app-selectbox-detailcode",4),zt.Wb(20,"div",5),zt.Wb(21,"div",6),zt.Rb(22,"mat-datepicker-toggle",7),zt.Rb(23,"input",14),zt.Rb(24,"mat-datepicker",null,15),zt.Vb(),zt.Wb(26,"span",10),zt.Pc(27,"~"),zt.Vb(),zt.Wb(28,"div",6),zt.Rb(29,"mat-datepicker-toggle",7),zt.Rb(30,"input",16),zt.Rb(31,"mat-datepicker",null,17),zt.Vb(),zt.Vb(),zt.Vb(),zt.Vb(),zt.Wb(33,"div",2),zt.Wb(34,"div",18),zt.Rb(35,"app-selectbox",19),zt.Ub(36,20),zt.Nc(37,pe,1,1,"app-input-text",21),zt.Nc(38,ue,1,1,"app-input-text",22),zt.Nc(39,be,1,1,"app-input-text",23),zt.Nc(40,he,1,1,"app-input-text",24),zt.Nc(41,ge,1,1,"app-input-text",25),zt.Nc(42,me,1,1,"app-input-text",26),zt.Nc(43,fe,1,1,"app-input-text",27),zt.Nc(44,Ce,1,1,"app-input-text",28),zt.Nc(45,Oe,1,1,"app-input-text",29),zt.Tb(),zt.Vb(),zt.Wb(46,"div",18),zt.Wb(47,"span",30),zt.Pc(48,"Fare Confirm YN"),zt.Vb(),zt.Rb(49,"app-selectbox",31),zt.Vb(),zt.Wb(50,"div",18),zt.Wb(51,"span",30),zt.Pc(52,"Booking Status"),zt.Vb(),zt.Rb(53,"app-multi-select-detailcode",32),zt.Vb(),zt.Wb(54,"div",18),zt.Wb(55,"span",30),zt.Pc(56,"C.Payment Status"),zt.Vb(),zt.Rb(57,"app-selectbox-detailcode",33),zt.Vb(),zt.Vb(),zt.Wb(58,"div",2),zt.Wb(59,"div",18),zt.Wb(60,"span",30),zt.Pc(61,"Issued Status"),zt.Vb(),zt.Rb(62,"app-selectbox-detailcode",34),zt.Vb(),zt.Wb(63,"div",18),zt.Wb(64,"span",30),zt.Pc(65,"Departure Airport"),zt.Vb(),zt.Rb(66,"app-input-text",35),zt.Vb(),zt.Wb(67,"div",18),zt.Wb(68,"span",30),zt.Pc(69,"Destination Airport"),zt.Vb(),zt.Rb(70,"app-input-text",36),zt.Vb(),zt.Wb(71,"div",18),zt.Wb(72,"span",30),zt.Pc(73,"Airline"),zt.Vb(),zt.Rb(74,"app-input-text",37),zt.Vb(),zt.Vb(),zt.Wb(75,"div",2),zt.Wb(76,"div",18),zt.Rb(77,"app-selectbox",38),zt.Ub(78,20),zt.Nc(79,ye,1,7,"app-auto-complete",39),zt.Nc(80,ke,1,7,"app-auto-complete",40),zt.Nc(81,je,1,7,"app-auto-complete",41),zt.Tb(),zt.Vb(),zt.Wb(82,"div",18),zt.Wb(83,"span",30),zt.Pc(84,"Promo. Card"),zt.Vb(),zt.Rb(85,"app-selectbox-detailcode",42),zt.Vb(),zt.Wb(86,"div",18),zt.Wb(87,"span",30),zt.Pc(88,"Routing Type"),zt.Vb(),zt.Rb(89,"app-selectbox",43),zt.Vb(),zt.Wb(90,"div",18),zt.Wb(91,"span",30),zt.Pc(92,"C.CLS"),zt.Vb(),zt.Rb(93,"app-selectbox",44),zt.Vb(),zt.Vb(),zt.Wb(94,"div",2),zt.Wb(95,"div",18),zt.Wb(96,"span",30),zt.Pc(97,"GDS"),zt.Vb(),zt.Rb(98,"app-selectbox",45),zt.Vb(),zt.Wb(99,"div",18),zt.Wb(100,"span",30),zt.Pc(101,"I/D"),zt.Vb(),zt.Rb(102,"app-selectbox",46),zt.Vb(),zt.Wb(103,"div",18),zt.Rb(104,"app-checkbox",47),zt.Wb(105,"span",30),zt.Pc(106,"Bookings without Fare Rule"),zt.Vb(),zt.Vb(),zt.Wb(107,"div",18),zt.Wb(108,"span",30),zt.Pc(109,"Device"),zt.Vb(),zt.Rb(110,"app-selectbox-detailcode",48),zt.Vb(),zt.Vb(),zt.Vb(),zt.Wb(111,"div",49),zt.Wb(112,"button",50),zt.Pc(113,"Search"),zt.Vb(),zt.Wb(114,"button",51),zt.fc("click",(function(){return e.onReset()})),zt.Pc(115,"Reset"),zt.Vb(),zt.Wb(116,"a",52),zt.fc("click",(function(){return e.isShowmore=!e.isShowmore})),zt.Pc(117,"\uac80\uc0c9 \uc635\uc158 \ub354\ubcf4\uae30"),zt.Vb(),zt.Vb(),zt.Vb()),2&t){const t=zt.Ec(10),i=zt.Ec(17),a=zt.Ec(25),n=zt.Ec(32);zt.pc("formGroup",e.searchForm)("connectForm",e.searchFormData),zt.Cb(4),zt.pc("options",e.dateRangeTypeList)("useAllOptionYn",!1),zt.Cb(1),zt.Gb("valid-error",e.checkIsInvalidDateRange(e.searchForm.get("dateRange1"))),zt.Cb(2),zt.pc("for",t),zt.Cb(1),zt.pc("matDatepicker",t)("formControlName",0),zt.Cb(6),zt.pc("for",i),zt.Cb(1),zt.pc("matDatepicker",i)("min",e.dateRange1Dates[0])("formControlName",1),zt.Cb(4),zt.pc("options",e.dateRangeTypeList2)("useAllOptionYn",!1),zt.Cb(1),zt.Gb("valid-error",e.checkIsInvalidDateRange(e.searchForm.get("dateRange2"))),zt.Cb(2),zt.pc("for",a),zt.Cb(1),zt.pc("matDatepicker",a)("formControlName",0),zt.Cb(6),zt.pc("for",n),zt.Cb(1),zt.pc("matDatepicker",n)("min",e.dateRange2Dates[0])("formControlName",1),zt.Cb(5),zt.pc("options",e.codeTypeOptions)("useAllOptionYn",!1),zt.Cb(1),zt.pc("ngSwitch",e.searchForm.get("codeTypeOption").value),zt.Cb(1),zt.pc("ngSwitchCase","bookingCode"),zt.Cb(1),zt.pc("ngSwitchCase","bookingItemCode"),zt.Cb(1),zt.pc("ngSwitchCase","gdsSubPnr"),zt.Cb(1),zt.pc("ngSwitchCase","airlinePnr"),zt.Cb(1),zt.pc("ngSwitchCase","bookerName"),zt.Cb(1),zt.pc("ngSwitchCase","bookerId"),zt.Cb(1),zt.pc("ngSwitchCase","travelerName"),zt.Cb(1),zt.pc("ngSwitchCase","ticketNo"),zt.Cb(1),zt.pc("ngSwitchCase","bookerMobileNo"),zt.Cb(4),zt.pc("options",e.fareConfirmOptions),zt.Cb(4),zt.pc("options",e.bookingStatusList)("useAllOptionYn",!0),zt.Cb(4),zt.pc("options",e.paymentStatusCodeList),zt.Cb(1),zt.Gb("hide",!e.isShowmore),zt.Cb(4),zt.pc("options",e.ticketingStatusCodeList),zt.Cb(4),zt.pc("isInvalid",e.checkIsInvalid("originAirportCode")),zt.Cb(4),zt.pc("isInvalid",e.checkIsInvalid("destinationAirportCode")),zt.Cb(4),zt.pc("isInvalid",e.checkIsInvalid("airlineCodes"))("isInvalid",e.checkIsInvalid("airlineCodes")),zt.Cb(1),zt.Gb("hide",!e.isShowmore),zt.Cb(2),zt.pc("options",e.picTypeOptions)("useAllOptionYn",!1),zt.Cb(1),zt.pc("ngSwitch",e.searchForm.get("picTypeOption").value),zt.Cb(1),zt.pc("ngSwitchCase","bookingPicUno"),zt.Cb(1),zt.pc("ngSwitchCase","lastTicketingPicUno"),zt.Cb(1),zt.pc("ngSwitchCase","lastRefundPicUno"),zt.Cb(4),zt.pc("options",e.promotionCardList),zt.Cb(4),zt.pc("options",e.routingTypeList),zt.Cb(4),zt.pc("options",e.cabinClassList),zt.Cb(1),zt.Gb("hide",!e.isShowmore),zt.Cb(4),zt.pc("options",e.gdsCompList),zt.Cb(4),zt.pc("options",e.domesticOptions),zt.Cb(2),zt.pc("binary",!0),zt.Cb(6),zt.pc("options",e.deviceTypeList),zt.Cb(6),zt.Gb("active",e.isShowmore)}},directives:[o.B,o.s,o.k,ie.a,o.l,ae.a,o.r,o.i,o.e,ne.a,oe.a,o.c,se.a,le.a,n.q,n.r,ce.a,re.a,de.a,Bt.a],styles:[""],changeDetection:0}),t})(),_e=(()=>{class t{constructor(){this.clickOffRegistEvent=new zt.n,this.changePageSizeEvent=new zt.n,this.excelDownloadEvent=new zt.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}onChangePageSize({value:t}){this.changePageSizeEvent.emit(t)}onClickOffRegist(){this.clickOffRegistEvent.emit()}onClickExcel(){this.excelDownloadEvent.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=zt.Kb({type:t,selectors:[["app-fl-reservation-list-ota-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{clickOffRegistEvent:"clickOffRegistEvent",changePageSizeEvent:"changePageSizeEvent",excelDownloadEvent:"excelDownloadEvent"},decls:9,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],["data-function","2000029",1,"btn","btn-outline-dark","sm","d-inline-flex","flex-glow-0",3,"click"],["data-function","2000030",1,"btn","btn-outline-dark","sm","d-inline-flex","flex-glow-0",3,"click"],[1,"sm","d-inline-flex","flex-glow-0","sm",3,"options","ngModel","useAllOptionYn","onChange"]],template:function(t,e){1&t&&(zt.Wb(0,"div",0),zt.Wb(1,"strong",1),zt.Pc(2),zt.Vb(),zt.Wb(3,"div",2),zt.Wb(4,"button",3),zt.fc("click",(function(){return e.onClickOffRegist()})),zt.Pc(5,"OFF PNR"),zt.Vb(),zt.Wb(6,"button",4),zt.fc("click",(function(){return e.onClickExcel()})),zt.Pc(7,"Excel"),zt.Vb(),zt.Wb(8,"app-selectbox",5),zt.fc("onChange",(function(t){return e.onChangePageSize(t)})),zt.Vb(),zt.Vb(),zt.Vb()),2&t&&(zt.Cb(2),zt.Qc(e.loading?"":e.totalCount),zt.Cb(6),zt.pc("options",e.pageSizeOptions)("ngModel",e.currentPageSize)("useAllOptionYn",!1))},directives:[le.a,o.r,o.u],styles:[""],changeDetection:0}),t})();var Re=i("7G9D"),xe=i("hna1"),Fe=i("UIHd"),Ie=i("kDLv"),Te=i("iO9o"),De=i("B4Xv");function Ae(t,e){if(1&t){const t=zt.Xb();zt.Wb(0,"a",11),zt.fc("click",(function(){zt.Fc(t);const i=e.$implicit;return zt.hc().onClickBookingItemCode(i)})),zt.Pc(1),zt.Vb()}if(2&t){const t=e.$implicit;zt.Gb("type5",!0===t.fareRuleNotExistYn&&!1===t.domesticYn),zt.Cb(1),zt.Rc(" ",t.bookingItemCode," ")}}function Ne(t,e){if(1&t&&(zt.Wb(0,"span"),zt.Pc(1),zt.ic(2,"formatDate"),zt.Vb()),2&t){const t=e.$implicit,i=zt.hc();zt.Gb("color-red",i.isInValidDeadline(t))("font-weight-bold",i.isInValidDeadline(t)),zt.Cb(1),zt.Rc(" ",zt.kc(2,5,t.clientCancelDeadline,"YYYY-MM-DD HH:mm")," ")}}function Pe(t,e){1&t&&(zt.Pc(0),zt.ic(1,"formatDate")),2&t&&zt.Rc(" ",zt.kc(1,1,e.$implicit.departureDatetime,"YYYY-MM-DD HH:mm"),"\n")}function Ve(t,e){1&t&&(zt.Pc(0),zt.ic(1,"number")),2&t&&zt.Rc(" ",zt.kc(1,1,e.$implicit.salesNetAmount,"2."),"\n")}function we(t,e){1&t&&(zt.Pc(0),zt.ic(1,"number")),2&t&&zt.Rc(" ",zt.kc(1,1,e.$implicit.salesTaxAmount,"2."),"\n")}function $e(t,e){if(1&t){const t=zt.Xb();zt.Wb(0,"app-fl-manual-booking",12),zt.fc("clickCloseEvent",(function(){return zt.Fc(t),zt.hc().closeOffRegistHandler()})),zt.Vb()}}const Ee=function(t,e,i,a,n){return{bookingItemCodeTpl:t,clientCancelDeadlineTpl:e,departureDatetimeTpl:i,salesNetAmountTpl:a,salesTaxAmountTpl:n}};let Me=(()=>{class t{constructor(t,e,i,a){this.store=t,this._dataService=e,this._fileService=i,this._reservationService=a,this._$unsubscribe=new k.a,this.columns=this._dataService.generateGridColumns(),this.dateRangeTypeList$=t.pipe(Object(l.u)(yt)),this.stationTypeList$=t.pipe(Object(l.u)(kt)),this.bookingStatusList$=t.pipe(Object(l.u)(jt)),this.gdsCompList$=t.pipe(Object(l.u)(Lt)),this.routingTypeList$=t.pipe(Object(l.u)(_t)),this.cabinClassList$=t.pipe(Object(l.u)(Rt)),this.promotionCardList$=t.pipe(Object(l.u)(xt)),this.reloadToggle$=t.pipe(Object(l.u)(At)),this.ticketingStatusCodeList$=t.pipe(Object(l.u)(Ft)),this.paymentStatusCodeList$=t.pipe(Object(l.u)(It)),this.mainLoading$=t.pipe(Object(l.u)(Nt)),this.searchCondition$=t.pipe(Object(l.u)(Tt)),this.otherSearchInfo$=t.pipe(Object(l.u)(Dt)),this.mainDataList$=t.pipe(Object(l.u)(Pt)),this.mainSummaryInfo$=t.pipe(Object(l.u)(Vt)),this.mainDataTotalCount$=t.pipe(Object(l.u)(wt)),this.gridState$=t.pipe(Object(l.u)($t)),this.pageSize$=t.pipe(Object(l.u)(Et)),this.isOpenOffRegistModal$=t.pipe(Object(l.u)(Mt))}ngAfterContentInit(){this._requestCommonDetailCodes(),this._initSubscription()}ngOnInit(){this._initSearchCondition()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}gridPageChangeIndexHandler(t){this._isSearchClick=!0,this.store.dispatch(a.changeMainListPageIndexAction({pageIndex:t}))}gridStateChangeHandler(t){this._isSearchClick=!0,this.store.dispatch(a.setGridStateAction({gridState:t}))}changePageSizeHandler(t){this._isSearchClick=!0,this.store.dispatch(a.changeMainListPageSizeAction({pageSize:t})),this.store.dispatch(a.changeMainListPageIndexAction({pageIndex:0}))}clickOffRegistHandler(){this.store.dispatch(a.openOffRegistPopup())}closeOffRegistHandler(){this.store.dispatch(a.closeOffRegistPopup())}clickViewBookingsHandler(t){this._reservationService.openDetailWindow(t,"MEMO")}clickSearchHandler({searchCondition:t,otherSearchInfo:e}){this._isSearchClick=!0,this.store.dispatch(a.changeSearchCondition({searchCondition:t})),this.store.dispatch(a.changeMainListPageIndexAction({pageIndex:0})),this.store.dispatch(a.changeOtherSearchInfo({otherSearchInfo:e}))}clickResetHandler(){const t=this._dataService.initFlReservationListOtaSearchForm(),e=Object.assign({},t);this.store.dispatch(a.changeSearchCondition({searchCondition:e}))}onClickBookingItemCode(t){const{onOffManual:e,stationTypeCode:i,changeRequestSeq:a}=t,n=F.isNil(a)?"":`&changeRequestSeq=${a}`;window.open(`${window.location.origin}/reservation/flight/${t.bookingItemCode}?tabName=${"STN04"===i&&"F"===e?"TICKET_REFUND":"BASIS"}${n}`,"_blank","height=950,width=1800,left=0,top=0,toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=no,status=no")}excelDownloadHandler(){const t=this._changeConditionType(this.searchFormEl.formValue),e=this._setSearchCondition(t);this._fileService.fileDownload({url:Kt.excelDownload,filename:"flightReservationList",type:"excel",params:e,requestMethod:"post"})}isInValidDeadline(t){if(!t)return!1;const{firstInsertDatetime:e,clientCancelDeadline:i,bookingStatusCode:a}=t,n=Ht()(e);return Ht()(i).isBefore(n)&&["BKS01","BKS02"].indexOf(a)>-1}_initSubscription(){Object(j.a)([this.searchCondition$,this.gridState$]).pipe(Object(L.a)(1),Object(_.a)(200),Object(R.a)(()=>!0===this._isSearchClick),Object(x.a)(this._$unsubscribe)).subscribe(([t,{pageInfo:e}])=>{const i=[e.skip,e.skip+e.take];let n=Object.assign({},this._setSearchCondition(t),{limits:i});n=this._changeConditionType(n),this._isSearchClick=!1,this.store.dispatch(a.loadMainListAction({condition:n}))}),this.reloadToggle$.pipe(Object(L.a)(1),Object(x.a)(this._$unsubscribe)).subscribe(()=>{this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()})}_setSearchCondition(t){const e=t.dateRange2.dates.some(t=>F.isNil(t))?null:t.dateRange2.dates,i=Object.assign({},t,{dateRange2:e&&t.dateRange2});return F.omitBy(i,F.isNil)}_changeConditionType(t){const e=F.isNil(t.airlineCodes)?null:t.airlineCodes.replace(/\s+/g,"").split(",").filter(t=>t),i=F.isNil(t.excludeAirlineCodes)?null:t.excludeAirlineCodes.replace(/\s+/g,"").split(",").filter(t=>t),a=(F.isNil(t.bookerCompCodes)?[]:t.bookerCompCodes).concat("number"==typeof t.bookerCompCodes2?[t.bookerCompCodes2]:[],"number"==typeof t.bookerCompCodes3?[t.bookerCompCodes3]:[]),n=a.length>0?a:null,o=F.isNil(t.gdsCompCode)?null:[t.gdsCompCode],s=Object.assign({},F.omit(t,["bookerCompCodes2","bookerCompCodes3","gdsCompCode"]),{airlineCodes:e,excludeAirlineCodes:i,bookerCompCodes:n,gdsCompCodes:o});return F.omitBy(s,F.isNil)}_requestCommonDetailCodes(){this.store.dispatch(a.loadDateRangeTypeAction({condition:{masterCode:"FL067",useYn:!0}})),this.store.dispatch(a.loadStationTypeAction({condition:{masterCode:"BS002",useYn:!0}})),this.store.dispatch(a.loadBookingStatusAction({condition:{masterCode:"BK001",referCode1:"IC01",useYn:!0}})),this.store.dispatch(a.loadGdsCompAction({condition:{compTypeCodes:["CMP10"],limits:[0,1e4]}})),this.store.dispatch(a.loadRoutingTypeAction({condition:{masterCode:"BS012",useYn:!0}})),this.store.dispatch(a.loadCabinClassAction({condition:{masterCode:"FL001",useYn:!0}})),this.store.dispatch(a.loadPromotionCardAction({condition:{masterCode:"PM003",useYn:!0}})),this.store.dispatch(a.loadTicketingStatusCodeListAction({condition:{masterCode:"FL002"}})),this.store.dispatch(a.loadPaymentStatusCodeListAction({condition:{masterCode:"BK002",referCode1:"IC01"}}))}_initSearchCondition(){if(this.searchCondition$.subscribe(t=>this._searchCondition=t),this.mainDataList$.subscribe(t=>this._searchGridDataList=t),0===F.size(this._searchCondition)&&0===F.size(this._searchGridDataList)){const t=this._dataService.initFlReservationListOtaSearchForm(),e=Object.assign({},t);this.store.dispatch(a.changeSearchCondition({searchCondition:e}))}}}return t.\u0275fac=function(e){return new(e||t)(zt.Qb(l.h),zt.Qb(qt),zt.Qb(Re.a),zt.Qb(xe.a))},t.\u0275cmp=zt.Kb({type:t,selectors:[["app-fl-reservation-list-ota"]],viewQuery:function(t,e){var i;1&t&&zt.Xc(Le,!0),2&t&&zt.Dc(i=zt.gc())&&(e.searchFormEl=i.first)},decls:36,vars:71,consts:[[3,"searchCondition","otherSearchInfo","dateRangeTypeList","stationTypeList","bookingStatusList","gdsCompList","routingTypeList","cabinClassList","promotionCardList","ticketingStatusCodeList","paymentStatusCodeList","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","clickOffRegistEvent","changePageSizeEvent","excelDownloadEvent"],["bookingItemCodeTpl",""],["clientCancelDeadlineTpl",""],["departureDatetimeTpl",""],["salesNetAmountTpl",""],["salesTaxAmountTpl",""],[3,"gridLoading","columns","gridState","totalCount","checkboxUseYn","dataList","sortable","templates","stateChangeEvent"],["gridEl",""],["header","Flight Off PNR Register","modalSize","md","modalContentClass","pd-all",3,"visible","modal","visibleChange"],[3,"clickCloseEvent",4,"ngIf"],[1,"text-underline","text-label",3,"click"],[3,"clickCloseEvent"]],template:function(t,e){if(1&t&&(zt.Wb(0,"app-fl-reservation-list-ota-search",0),zt.fc("clickSearchEvent",(function(t){return e.clickSearchHandler(t)}))("clickResetEvent",(function(){return e.clickResetHandler()})),zt.ic(1,"async"),zt.ic(2,"async"),zt.ic(3,"async"),zt.ic(4,"async"),zt.ic(5,"async"),zt.ic(6,"async"),zt.ic(7,"async"),zt.ic(8,"async"),zt.ic(9,"async"),zt.ic(10,"async"),zt.ic(11,"async"),zt.Vb(),zt.Wb(12,"app-fl-reservation-list-ota-control",1),zt.fc("clickOffRegistEvent",(function(){return e.clickOffRegistHandler()}))("changePageSizeEvent",(function(t){return e.changePageSizeHandler(t)}))("excelDownloadEvent",(function(){return e.excelDownloadHandler()})),zt.ic(13,"async"),zt.ic(14,"async"),zt.ic(15,"async"),zt.Vb(),zt.Nc(16,Ae,2,3,"ng-template",null,2,zt.Oc),zt.Nc(18,Ne,3,8,"ng-template",null,3,zt.Oc),zt.Nc(20,Pe,2,4,"ng-template",null,4,zt.Oc),zt.Nc(22,Ve,2,4,"ng-template",null,5,zt.Oc),zt.Nc(24,we,2,4,"ng-template",null,6,zt.Oc),zt.Wb(26,"app-grid-simple",7,8),zt.fc("stateChangeEvent",(function(t){return e.gridStateChangeHandler(t)})),zt.ic(28,"async"),zt.ic(29,"async"),zt.ic(30,"async"),zt.ic(31,"async"),zt.Vb(),zt.Wb(32,"app-dialog",9),zt.fc("visibleChange",(function(){return e.closeOffRegistHandler()})),zt.ic(33,"async"),zt.Nc(34,$e,1,0,"app-fl-manual-booking",10),zt.ic(35,"async"),zt.Vb()),2&t){const t=zt.Ec(17),i=zt.Ec(19),a=zt.Ec(21),n=zt.Ec(23),o=zt.Ec(25);zt.pc("searchCondition",zt.jc(1,25,e.searchCondition$))("otherSearchInfo",zt.jc(2,27,e.otherSearchInfo$))("dateRangeTypeList",zt.jc(3,29,e.dateRangeTypeList$))("stationTypeList",zt.jc(4,31,e.stationTypeList$))("bookingStatusList",zt.jc(5,33,e.bookingStatusList$))("gdsCompList",zt.jc(6,35,e.gdsCompList$))("routingTypeList",zt.jc(7,37,e.routingTypeList$))("cabinClassList",zt.jc(8,39,e.cabinClassList$))("promotionCardList",zt.jc(9,41,e.promotionCardList$))("ticketingStatusCodeList",zt.jc(10,43,e.ticketingStatusCodeList$))("paymentStatusCodeList",zt.jc(11,45,e.paymentStatusCodeList$)),zt.Cb(12),zt.pc("loading",zt.jc(13,47,e.mainLoading$))("currentPageSize",zt.jc(14,49,e.pageSize$))("totalCount",zt.jc(15,51,e.mainDataTotalCount$)),zt.Cb(14),zt.pc("gridLoading",zt.jc(28,53,e.mainLoading$))("columns",e.columns)("gridState",zt.jc(29,55,e.gridState$))("totalCount",zt.jc(30,57,e.mainDataTotalCount$))("checkboxUseYn",!1)("dataList",zt.jc(31,59,e.mainDataList$))("sortable",!0)("templates",zt.yc(65,Ee,t,i,a,n,o)),zt.Cb(6),zt.pc("visible",zt.jc(33,61,e.isOpenOffRegistModal$))("modal",!0),zt.Cb(2),zt.pc("ngIf",zt.jc(35,63,e.isOpenOffRegistModal$))}},directives:[Le,_e,Fe.a,Ie.a,n.o,Te.a],pipes:[n.b,De.a,n.f],encapsulation:2,changeDetection:0}),t})();const We=[{path:"",component:Me}];let Ye=(()=>{class t{}return t.\u0275mod=zt.Ob({type:t}),t.\u0275inj=zt.Nb({factory:function(e){return new(e||t)},imports:[[y.f.forChild(We)],y.f]}),t})();var Ke=i("bOdf"),ze=i("zp1y"),Be=i("IzEk"),Ue=i("lJxs"),Ge=i("JIr8"),He=i("Xb6A"),Xe=i("EsKh");let qe=(()=>{class t{constructor(t,e,i,n,o){this._actions$=t,this._apiService=e,this._errorService=i,this.alertService=n,this.store=o,this.loadDateRangeType$=Object(s.c)(()=>this._actions$.pipe(Object(s.d)(a.loadDateRangeTypeAction),Object(Ke.a)(t=>Object(Qt.a)(t).pipe(Object(ze.a)(this.dateRangeTypeList$.pipe(Object(Be.a)(1))))),Object(Zt.a)(([{condition:t,isForceLoad:e},i])=>!0===e||null===i?this._apiService.getCommonDetailCodeList(t).pipe(Object(Ue.a)(t=>a.loadDateRangeTypeSuccessAction({dataList:t})),Object(Ge.a)(t=>{const e="DateRangeType lookup failed.",i=[a.loadDateRangeTypeFailureAction({error:e})];return this._catchErr(t,e,i),[]})):Object(Qt.a)(a.loadDateRangeTypeSuccessAction({dataList:F.cloneDeep(i)}))))),this.loadStationType$=Object(s.c)(()=>this._actions$.pipe(Object(s.d)(a.loadStationTypeAction),Object(Ke.a)(t=>Object(Qt.a)(t).pipe(Object(ze.a)(this.stationTypeList$.pipe(Object(Be.a)(1))))),Object(Zt.a)(([{condition:t,isForceLoad:e},i])=>!0===e||null===i?this._apiService.getCommonDetailCodeList(t).pipe(Object(Ue.a)(t=>a.loadStationTypeSuccessAction({dataList:t})),Object(Ge.a)(t=>{const e="The StationType lookup failed.",i=[a.loadStationTypeFailureAction({error:e})];return this._catchErr(t,e,i),[]})):Object(Qt.a)(a.loadStationTypeSuccessAction({dataList:F.cloneDeep(i)}))))),this.loadBookingStatus$=Object(s.c)(()=>this._actions$.pipe(Object(s.d)(a.loadBookingStatusAction),Object(Ke.a)(t=>Object(Qt.a)(t).pipe(Object(ze.a)(this.bookingStatusList$.pipe(Object(Be.a)(1))))),Object(Zt.a)(([{condition:t,isForceLoad:e},i])=>!0===e||null===i?this._apiService.getCommonDetailCodeList(t).pipe(Object(Ue.a)(t=>a.loadBookingStatusSuccessAction({dataList:t})),Object(Ge.a)(t=>{const e="BookingStatus lookup failed.",i=[a.loadBookingStatusFailureAction({error:e})];return this._catchErr(t,e,i),[]})):Object(Qt.a)(a.loadBookingStatusSuccessAction({dataList:F.cloneDeep(i)}))))),this.loadGdsComp$=Object(s.c)(()=>this._actions$.pipe(Object(s.d)(a.loadGdsCompAction),Object(Ke.a)(t=>Object(Qt.a)(t).pipe(Object(ze.a)(this.gdsCompList$.pipe(Object(Be.a)(1))))),Object(Zt.a)(([{condition:t,isForceLoad:e},i])=>!0===e||null===i?this._apiService.getGdsCompList(t).pipe(Object(Ue.a)(t=>a.loadGdsCompSuccessAction({dataList:t})),Object(Ge.a)(t=>{const e="The GdsComp lookup failed.",i=[a.loadGdsCompFailureAction({error:e})];return this._catchErr(t,e,i),[]})):Object(Qt.a)(a.loadGdsCompSuccessAction({dataList:F.cloneDeep(i)}))))),this.loadRoutingType$=Object(s.c)(()=>this._actions$.pipe(Object(s.d)(a.loadRoutingTypeAction),Object(Ke.a)(t=>Object(Qt.a)(t).pipe(Object(ze.a)(this.routingTypeList$.pipe(Object(Be.a)(1))))),Object(Zt.a)(([{condition:t,isForceLoad:e},i])=>!0===e||null===i?this._apiService.getCommonDetailCodeList(t).pipe(Object(Ue.a)(t=>a.loadRoutingTypeSuccessAction({dataList:t})),Object(Ge.a)(t=>{const e="RoutingType lookup failed.",i=[a.loadRoutingTypeFailureAction({error:e})];return this._catchErr(t,e,i),[]})):Object(Qt.a)(a.loadRoutingTypeSuccessAction({dataList:F.cloneDeep(i)}))))),this.loadCabinClass$=Object(s.c)(()=>this._actions$.pipe(Object(s.d)(a.loadCabinClassAction),Object(Ke.a)(t=>Object(Qt.a)(t).pipe(Object(ze.a)(this.cabinClassList$.pipe(Object(Be.a)(1))))),Object(Zt.a)(([{condition:t,isForceLoad:e},i])=>!0===e||null===i?this._apiService.getCommonDetailCodeList(t).pipe(Object(Ue.a)(t=>a.loadCabinClassSuccessAction({dataList:t})),Object(Ge.a)(t=>{const e="CabinClass lookup failed.",i=[a.loadCabinClassFailureAction({error:e})];return this._catchErr(t,e,i),[]})):Object(Qt.a)(a.loadCabinClassSuccessAction({dataList:F.cloneDeep(i)}))))),this.loadPromotionCard$=Object(s.c)(()=>this._actions$.pipe(Object(s.d)(a.loadPromotionCardAction),Object(Ke.a)(t=>Object(Qt.a)(t).pipe(Object(ze.a)(this.promotionCardList$.pipe(Object(Be.a)(1))))),Object(Zt.a)(([{condition:t,isForceLoad:e},i])=>!0===e||null===i?this._apiService.getCommonDetailCodeList(t).pipe(Object(Ue.a)(t=>{const e=t.reduce((t,e)=>("FLIGHT_PROMOTION"===e.referCode2&&t.push(e),t),[]);return a.loadPromotionCardSuccessAction({dataList:e})}),Object(Ge.a)(t=>{const e="PromotionCard lookup failed.",i=[a.loadPromotionCardFailureAction({error:e})];return this._catchErr(t,e,i),[]})):Object(Qt.a)(a.loadPromotionCardSuccessAction({dataList:F.cloneDeep(i)}))))),this.loadTicketingStatusCodeList$=Object(s.c)(()=>this._actions$.pipe(Object(s.d)(a.loadTicketingStatusCodeListAction),Object(Ke.a)(t=>Object(Qt.a)(t).pipe(Object(ze.a)(this.ticketingStatusCodeList$.pipe(Object(Be.a)(1))))),Object(Zt.a)(([{condition:t,isForceLoad:e},i])=>!0===e||null===i?this._apiService.getCommonDetailCodeList(t).pipe(Object(Ue.a)(t=>a.loadTicketingStatusCodeListSuccessAction({dataList:t})),Object(Ge.a)(t=>{const e="TicketingStatusCode lookup failed.",i=[a.loadTicketingStatusCodeListFailureAction({error:e})];return this._catchErr(t,e,i),[]})):Object(Qt.a)(a.loadTicketingStatusCodeListSuccessAction({dataList:i}))))),this.loadPaymentStatusCodeList$=Object(s.c)(()=>this._actions$.pipe(Object(s.d)(a.loadPaymentStatusCodeListAction),Object(Ke.a)(t=>Object(Qt.a)(t).pipe(Object(ze.a)(this.paymentStatusCodeList$.pipe(Object(Be.a)(1))))),Object(Zt.a)(([{condition:t,isForceLoad:e},i])=>!0===e||null===i?this._apiService.getCommonDetailCodeList(t).pipe(Object(Ue.a)(t=>a.loadPaymentStatusCodeListSuccessAction({dataList:t})),Object(Ge.a)(t=>{const e="PaymentStatusCode lookup failed.",i=[a.loadPaymentStatusCodeListFailureAction({error:e})];return this._catchErr(t,e,i),[]})):Object(Qt.a)(a.loadPaymentStatusCodeListSuccessAction({dataList:i}))))),this.loadMainList$=Object(s.c)(()=>this._actions$.pipe(Object(s.d)(a.loadMainListAction),Object(Zt.a)(({condition:t})=>(t=F.omit(t,["codeTypeOption","picTypeOption"]),this._apiService.getMainList(t).pipe(Object(Ue.a)(t=>({succeedYn:!0,dataCollection:t})),Object(Ge.a)(t=>Object(Qt.a)({succeedYn:!1,error:t}))))),Object(Zt.a)(({succeedYn:t,dataCollection:e,error:i})=>{if(t)return[a.loadMainListSuccessAction({dataCollection:e})];{const t="List lookup failed. Please try again in a momentarily.",e=[a.loadMainListFailureAction({error:t})];return this._catchErr(i,t,e),[]}}))),this.dateRangeTypeList$=o.pipe(Object(l.u)(yt)),this.stationTypeList$=o.pipe(Object(l.u)(kt)),this.bookingStatusList$=o.pipe(Object(l.u)(jt)),this.gdsCompList$=o.pipe(Object(l.u)(Lt)),this.routingTypeList$=o.pipe(Object(l.u)(_t)),this.cabinClassList$=o.pipe(Object(l.u)(Rt)),this.promotionCardList$=o.pipe(Object(l.u)(xt)),this.ticketingStatusCodeList$=o.pipe(Object(l.u)(Ft)),this.paymentStatusCodeList$=o.pipe(Object(l.u)(It))}_runPage(t,e){this.alertService.alert({message:t,accept:(null==e?void 0:e.length)>0?()=>{e.forEach(t=>{this.store.dispatch(t)})}:()=>{}})}_catchErr(t,e,i){const a=this._errorService.errorHandler(t,e);F.isNil(a)||(F.isNil(a.accept)&&(a.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(t=>{this.store.dispatch(t)})}:()=>{}),this.alertService.alert(a))}}return t.\u0275fac=function(e){return new(e||t)(zt.bc(s.a),zt.bc(ee),zt.bc(He.a),zt.bc(Xe.a),zt.bc(l.h))},t.\u0275prov=zt.Mb({token:t,factory:t.\u0275fac}),t})();var Qe=i("w8np"),Je=i("YH7L"),Ze=i("FGZR");const ti=[Me],ei=[Le,_e];let ii=(()=>{class t{}return t.\u0275mod=zt.Ob({type:t}),t.\u0275inj=zt.Nb({factory:function(e){return new(e||t)},imports:[[n.c,o.m,o.w,c.m,r.a,d.a,p.a,u.a,b.a,h.a,g.a,m.a,f.a,C.a,O.a,v.a,S.a,Ye,Je.a,Ze.a,l.j.forFeature("flReservationListOta",Ot),s.b.forFeature([qe]),Qe.a]]}),t})()},nMd8:function(t,e,i){"use strict";i.d(e,"a",(function(){return m}));var a=i("fXoL"),n=i("3Pt+"),o=i("LvDl"),s=i("XNiG"),l=i("itXk"),c=i("1G5W"),r=i("pLZG"),d=i("YY+H"),p=i("kt0X"),u=i("ofXK");function b(t,e){if(1&t&&(a.Wb(0,"option",3),a.Pc(1),a.Vb()),2&t){const t=a.hc();a.pc("ngValue",null),a.Cb(1),a.Qc(t.useAllOptionName)}}function h(t,e){if(1&t&&(a.Wb(0,"option",3),a.Pc(1),a.Vb()),2&t){const t=e.$implicit,i=a.hc();a.pc("ngValue",t),a.Cb(1),a.Qc(i.displayKey?t[i.displayKey]:t)}}const g={provide:n.p,useExisting:Object(a.U)(()=>m),multi:!0};let m=(()=>{class t{constructor(t,e){this._store=t,this._cdr=e,this.useAllOptionYn=!0,this.useAllOptionName="All",this.dataKey="detailCode",this.onChange=new a.n,this._unsubscribe$=new s.a,this._options$=new s.a,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.selectedLanguage$=this._store.select(d.f)}get invalid(){return this.isInvalid}get disabled(){return this._disabled}set disabled(t){this._disabled=t}get options(){return this._options}set options(t){this._options=t,this._options$.next(t),this.updateSelectedOption(this.value)}ngOnInit(){this.updateSelectedOption(null),this._initSubscription()}ngAfterViewInit(){this.options&&this._options$.next(this.options)}ngOnDestroy(){this._options$.next(null),this._options$.complete(),this._unsubscribe$.next(),this._unsubscribe$.complete()}writeValue(t){this.value=t,this.updateSelectedOption(t)}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t}compareFn(t,e){return this.dataKey?t[this.dataKey]===e[this.dataKey]:t===e}selectItem(t){this.selectedOption=t,this.value=this._getValue(t),this.onModelChange(this.value),this.onChange.emit({value:this.value,option:t})}updateSelectedOption(t){this.selectedOption=this._findOption(t,this.options)}_findOption(t,e){return this.dataKey?o.find(e,e=>e[this.dataKey]===t)||null:t}_getValue(t){return o.isNil(t)?null:t[this.dataKey]}_initSubscription(){if(this.displayKey)return;let t=null;Object(l.a)([this.selectedLanguage$,this._options$]).pipe(Object(c.a)(this._unsubscribe$),Object(r.a)(([t,e])=>e&&e.length>0)).subscribe(([e,i])=>{let a;if(o.isNil(e)&&(e="EN"),!t&&i&&(t=e),t===e&&(this.displayKey=this.displayWord+"Ln",Object.keys(i[0]).includes(this.displayKey)))this._cdr.detectChanges();else{switch(e){case"EN":a=this._findDisplayKey(i,this.displayWord,["En"]);break;case"KO":a=this._findDisplayKey(i,this.displayWord,["Ko","Kr"]);break;case"JA":a=this._findDisplayKey(i,this.displayWord,["Ja","Jp"]);break;case"ZH":a=this._findDisplayKey(i,this.displayWord,["Zh","Cn"]);break;case"VI":a=this._findDisplayKey(i,this.displayWord,["Vi","Vn"])}this.displayKey=a||this.displayWord+"En",this._cdr.detectChanges()}})}_findDisplayKey(t,e,i){if(!t||0===t.length)return null;if(console.log(e,"displayWord"),!e)return null;const a=Object.keys(t[0]);for(const n of i){const t=e+n;if(a.includes(t))return t;if(a.includes(e))return t}return null}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(p.h),a.Qb(a.h))},t.\u0275cmp=a.Kb({type:t,selectors:[["app-selectbox-detailcode"]],hostAttrs:[1,"select-box"],hostVars:2,hostBindings:function(t,e){2&t&&a.Gb("valid-error",e.invalid)},inputs:{name:"name",useAllOptionYn:"useAllOptionYn",useAllOptionName:"useAllOptionName",dataKey:"dataKey",displayKey:"displayKey",displayWord:"displayWord",isInvalid:"isInvalid",disabled:"disabled",options:"options"},outputs:{onChange:"onChange"},features:[a.Bb([g])],decls:3,vars:6,consts:[[3,"compareWith","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngIf"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,e){1&t&&(a.Wb(0,"select",0),a.fc("ngModelChange",(function(t){return e.selectItem(t)})),a.Nc(1,b,2,2,"option",1),a.Nc(2,h,2,2,"option",2),a.Vb()),2&t&&(a.pc("compareWith",e.compareFn)("ngModel",e.selectedOption)("disabled",e.disabled),a.Db("name",e.name),a.Cb(1),a.pc("ngIf",e.useAllOptionYn),a.Cb(1),a.pc("ngForOf",e.options))},directives:[n.y,n.r,n.u,u.o,u.n,n.v,n.A],encapsulation:2}),t})()},rbKv:function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var a=i("8LU1"),n=i("quSY"),o=i("LRne"),s=i("VRyK"),l=i("fXoL"),c=i("tfFa");const r=["button"];let d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=l.Lb({type:t,selectors:[["","matDatepickerToggleIcon",""]]}),t})(),p=(()=>{class t{constructor(t,e,i){this._intl=t,this._changeDetectorRef=e,this._stateChanges=n.a.EMPTY;const a=Number(i);this.tabIndex=a||0===a?a:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(t){this._disabled=Object(a.c)(t)}ngOnChanges(t){t.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(t){this.datepicker&&!this.disabled&&(this.datepicker.open(),t.stopPropagation())}_watchStateChanges(){const t=this.datepicker?this.datepicker._disabledChange:Object(o.a)(),e=this.datepicker&&this.datepicker._datepickerInput?this.datepicker._datepickerInput._disabledChange:Object(o.a)(),i=this.datepicker?Object(s.a)(this.datepicker.openedStream,this.datepicker.closedStream):Object(o.a)();this._stateChanges.unsubscribe(),this._stateChanges=Object(s.a)(this._intl.changes,t,e,i).subscribe(()=>this._changeDetectorRef.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(l.Qb(c.a),l.Qb(l.h),l.cc("tabindex"))},t.\u0275cmp=l.Kb({type:t,selectors:[["mat-datepicker-toggle"]],contentQueries:function(t,e,i){var a;1&t&&l.Ib(i,d,!0),2&t&&l.Dc(a=l.gc())&&(e._customIcon=a.first)},viewQuery:function(t,e){var i;1&t&&l.Xc(r,!0),2&t&&l.Dc(i=l.gc())&&(e._button=i.first)},hostVars:1,hostBindings:function(t,e){1&t&&l.fc("focus",(function(){return e._button.focus()})),2&t&&l.Db("tabindex",e.disabled?null:-1)},inputs:{disabled:"disabled",datepicker:["for","datepicker"],tabIndex:"tabIndex",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[l.Ab],decls:3,vars:3,consts:[[1,"ico-calendar",3,"click"],["button",""]],template:function(t,e){1&t&&(l.Wb(0,"a",0,1),l.fc("click",(function(t){return e._open(t)})),l.Pc(2,"\uce98\ub9b0\ub354 \uc5f4\uae30"),l.Vb()),2&t&&l.Db("aria-haspopup",e.datepicker?"dialog":null)("aria-label",e._intl.openCalendarLabel)("tabindex",e.disabled?-1:e.tabIndex)},encapsulation:2,changeDetection:0}),t})()}}]);