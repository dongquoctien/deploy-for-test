function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(u){o=!0,a=u}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){r=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"2QGa":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("F97/"),o=n("SeVD"),a=n("pLZG"),r=n("HDdC");function s(e,t,n){return[Object(a.a)(t,n)(new r.a(Object(o.a)(e))),Object(a.a)(Object(i.a)(t,n))(new r.a(Object(o.a)(e)))]}},U6NN:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("fXoL"),o=n("3Pt+"),a=n("LvDl"),r=n("ofXK");function s(e,t){if(1&e&&(i.Wb(0,"option",3),i.Pc(1),i.Vb()),2&e){var n=i.hc();i.pc("ngValue",null),i.Cb(1),i.Qc(n.useAllOptionName)}}function u(e,t){if(1&e&&(i.Wb(0,"option",3),i.Pc(1),i.Vb()),2&e){var n=t.$implicit,o=i.hc();i.pc("ngValue",n),i.Cb(1),i.Qc(o.displayKey?n[o.displayKey]:n)}}var l={provide:o.p,useExisting:Object(i.U)((function(){return c})),multi:!0},c=function(){var e=function(){function e(t,n,o,a){_classCallCheck(this,e),this.el=t,this.renderer=n,this.cd=o,this.zone=a,this.dataKey="value",this.displayKey="label",this.useAllOptionYn=!0,this.useAllOptionName="All",this.onChange=new i.n,this.onModelChange=function(){},this.onModelTouched=function(){}}return _createClass(e,[{key:"invalid",get:function(){return this.isInvalid}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}},{key:"options",get:function(){return this._options},set:function(e){this._options=e,this.updateSelectedOption(this.value)}},{key:"ngOnInit",value:function(){this.updateSelectedOption(null)}},{key:"ngOnDestroy",value:function(){}},{key:"compareFn",value:function(e,t){return this.dataKey?e[this.dataKey]===t[this.dataKey]:e===t}},{key:"selectItem",value:function(e){this.selectedOption=e,this.value=this._getValue(e),this.onModelChange(this.value),this.onChange.emit({value:this.value,option:e})}},{key:"writeValue",value:function(e){this.value=e,this.updateSelectedOption(e),this.cd.markForCheck()}},{key:"registerOnChange",value:function(e){this.onModelChange=e}},{key:"registerOnTouched",value:function(e){this.onModelTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"updateSelectedOption",value:function(e){this.selectedOption=this._findOption(e,this.options)}},{key:"_findOption",value:function(e,t){var n=this;return this.dataKey?a.find(t,(function(t){return t[n.dataKey]===e}))||null:e}},{key:"_getValue",value:function(e){return a.isNil(e)?null:e[this.dataKey]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(i.E),i.Qb(i.h),i.Qb(i.z))},e.\u0275cmp=i.Kb({type:e,selectors:[["app-selectbox"]],hostAttrs:[1,"select-box"],hostVars:2,hostBindings:function(e,t){2&e&&i.Gb("valid-error",t.invalid)},inputs:{name:"name",styleClass:"styleClass",required:"required",tabindex:"tabindex",dataKey:"dataKey",displayKey:"displayKey",isInvalid:"isInvalid",useAllOptionYn:"useAllOptionYn",useAllOptionName:"useAllOptionName",disabled:"disabled",options:"options"},outputs:{onChange:"onChange"},features:[i.Bb([l])],decls:3,vars:8,consts:[[3,"compareWith","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngIf"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(e,t){1&e&&(i.Wb(0,"select",0),i.fc("ngModelChange",(function(e){return t.selectItem(e)})),i.Nc(1,s,2,2,"option",1),i.Nc(2,u,2,2,"option",2),i.Vb()),2&e&&(i.pc("compareWith",t.compareFn)("ngModel",t.selectedOption)("disabled",t.disabled),i.Db("name",t.name)("required",t.required)("tabindex",t.tabindex),i.Cb(1),i.pc("ngIf",t.useAllOptionYn),i.Cb(1),i.pc("ngForOf",t.options))},directives:[o.y,o.r,o.u,o.x,r.o,r.n,o.v,o.A],encapsulation:2}),e}()},pfiq:function(e,t,n){"use strict";n.d(t,"a",(function(){return Z}));var i,o=n("fXoL"),a=n("3Pt+"),r=n("R0Ic"),s=n("XNiG"),u=n("2QGa"),l=n("Kj3r"),c=n("/uUt"),h=n("w1tV"),p=n("vkgz"),d=n("pLZG"),f=n("lJxs"),v=n("eIep"),y=n("7o/Q"),g=function(){function e(t,n){_classCallCheck(this,e),this.count=t,this.source=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new m(e,this.count,this.source))}}]),e}(),m=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o){var a;return _classCallCheck(this,n),(a=t.call(this,e)).count=i,a.source=o,a}return _createClass(n,[{key:"error",value:function(e){if(!this.isStopped){var t=this.source,i=this.count;if(0===i)return _get(_getPrototypeOf(n.prototype),"error",this).call(this,e);i>-1&&(this.count=i-1),t.subscribe(this._unsubscribeAndRecycle())}}}]),n}(y.a),b=n("nYR2"),C=n("LvDl"),k=n("YDFv"),O=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"equals",value:function(e,t,n){return n?this.resolveFieldData(e,n)===this.resolveFieldData(t,n):this.equalsByValue(e,t)}},{key:"equalsByValue",value:function(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,i,o,a=Array.isArray(e),r=Array.isArray(t);if(a&&r){if((i=e.length)!=t.length)return!1;for(n=i;0!=n--;)if(!this.equalsByValue(e[n],t[n]))return!1;return!0}if(a!=r)return!1;var s=e instanceof Date,u=t instanceof Date;if(s!=u)return!1;if(s&&u)return e.getTime()==t.getTime();var l=e instanceof RegExp,c=t instanceof RegExp;if(l!=c)return!1;if(l&&c)return e.toString()==t.toString();var h=Object.keys(e);if((i=h.length)!==Object.keys(t).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(t,h[n]))return!1;for(n=i;0!=n--;)if(!this.equalsByValue(e[o=h[n]],t[o]))return!1;return!0}return e!=e&&t!=t}},{key:"resolveFieldData",value:function(e,t){if(e&&t){if(this.isFunction(t))return t(e);if(-1==t.indexOf("."))return e[t];for(var n=t.split("."),i=e,o=0,a=n.length;o<a;++o){if(null==i)return null;i=i[n[o]]}return i}return null}},{key:"isFunction",value:function(e){return!!(e&&e.constructor&&e.call&&e.apply)}},{key:"reorderArray",value:function(e,t,n){e&&t!==n&&(n>=e.length&&(n%=e.length,t%=e.length),e.splice(n,0,e.splice(t,1)[0]))}},{key:"generateSelectItems",value:function(e,t){var n;if(e&&e.length){n=[];var i,o=_createForOfIteratorHelper(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.push({label:this.resolveFieldData(a,t),value:a})}}catch(r){o.e(r)}finally{o.f()}}return n}},{key:"insertIntoOrderedArray",value:function(e,t,n,i){if(n.length>0){for(var o=!1,a=0;a<n.length;a++)if(this.findIndexInList(n[a],i)>t){n.splice(a,0,e),o=!0;break}o||n.push(e)}else n.push(e)}},{key:"findIndexInList",value:function(e,t){var n=-1;if(t)for(var i=0;i<t.length;i++)if(t[i]==e){n=i;break}return n}},{key:"removeAccents",value:function(e){return e&&e.search(/[\xC0-\xFF]/g)>-1&&(e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),e}}]),e}(),F=n("LRne"),I=n("z6cu"),E=n("JIr8"),_=n("AytR"),w=n("tpT/"),L=_.a.API_URL,x=((i=function(){function e(t){_classCallCheck(this,e),this.api=t}return _createClass(e,[{key:"getSuggestions",value:function(e,t){var n=C.assign({},this.api.defaultParams,{condition:t});return this.api.post(this.getFullApiUrl(e),n).pipe(Object(v.a)((function(e){return(null==e?void 0:e.succeedYn)?Object(F.a)(e.result):Object(I.a)(e)})),Object(E.a)((function(e){return console.error(e),Object(F.a)({})})))}},{key:"getFullApiUrl",value:function(e){return"".concat(L,"/").concat(e)}}]),e}()).\u0275fac=function(e){return new(e||i)(o.bc(w.a))},i.\u0275prov=o.Mb({token:i,factory:i.\u0275fac}),i),S=/^[a-zA-Z]*$/,A=/^[a-zA-Z_\xc0\xc1\xc2\xc3\xc8\xc9\xca\u1ebe\xcc\xcd\xd2\xd3\xd4\xd5\xd9\xda\u0102\u0110\u0128\u0168\u01a0\xe0\xe1\xe2\xe3\xe8\xe9\xea\u1ebf\xec\xed\xf2\xf3\xf4\xf5\xf9\xfa\u0103\u0111\u0129\u0169\u01a1\u01af\u0102\u1ea0\u1ea2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\u1eb8\u1eba\u1ebc\u1ec0\u1ec0\u1ec2\u01b0\u0103\u1ea1\u1ea3\u1ea5\u1ea7\u1ea9\u1eab\u1ead\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\u1eb9\u1ebb\u1ebd\u1ec1\u1ec1\u1ec3\u1ec4\u1ec6\u1ec8\u1eca\u1ecc\u1ece\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u1eda\u1edc\u1ede\u1ee0\u1ee2\u1ee4\u1ee6\u1ee8\u1eea\u1ec5\u1ec7\u1ec9\u1ecb\u1ecd\u1ecf\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u1edb\u1edd\u1edf\u1ee1\u1ee3\u1ee5\u1ee7\u1ee9\u1eeb\u1eec\u1eee\u1ef0\u1ef2\u1ef4\xdd\u1ef6\u1ef8\u1eed\u1eef\u1ef1\u1ef3\u1ef5\u1ef7\u1ef9\ ]+$/,j=/^[\u3131-\u314e|\u314f-\u3163]*$/,N=function(e){return e.Airports="airports",e.Cities="cities",e.Hotels="hotels",e.Pois="pois",e.Regions="regions",e.ServiceActivities="serviceActivities",e.ServiceCities="serviceCities",e.Vehicles="vehicles",e}({}),D=n("ofXK"),T=["in"],V=["multiIn"];function P(e,t){if(1&e){var n=o.Xb();o.Wb(0,"a",10),o.fc("click",(function(){o.Fc(n),o.hc();var e=o.Ec(1);return o.hc(2).removeItem(e)})),o.Pc(1,"\uc0ad\uc81c"),o.Vb()}}function K(e,t){if(1&e&&(o.Wb(0,"div",7,8),o.Wb(2,"span"),o.Pc(3),o.Vb(),o.Nc(4,P,2,0,"a",9),o.Vb()),2&e){var n=t.$implicit,i=o.hc(2);o.Cb(3),o.Qc(i.resolveFieldData(n)),o.Cb(1),o.pc("ngIf",!i.disabled)}}function R(e,t){if(1&e&&(o.Wb(0,"div",5),o.Nc(1,K,5,2,"div",6),o.Vb()),2&e){var n=o.hc();o.Cb(1),o.pc("ngForOf",n.value)}}function M(e,t){if(1&e){var n=o.Xb();o.Wb(0,"input",11,12),o.fc("click",(function(e){return o.Fc(n),o.hc().onInputClick(e)}))("input",(function(e){return o.Fc(n),o.hc().onInput(e)}))("keydown",(function(e){return o.Fc(n),o.hc().onKeydown(e)}))("keyup",(function(e){return o.Fc(n),o.hc().onKeyup(e)}))("focus",(function(e){return o.Fc(n),o.hc().onInputFocus(e)}))("blur",(function(e){return o.Fc(n),o.hc().onInputBlur(e)}))("change",(function(e){return o.Fc(n),o.hc().onInputChange(e)}))("paste",(function(e){return o.Fc(n),o.hc().onInputPaste(e)}))("focusout",(function(){return o.Fc(n),o.hc().focusOutFunction()})),o.Vb()}if(2&e){var i=o.hc();o.pc("autocomplete",i.autocomplete)("value",i.inputFieldValue)("readonly",i.readonly)("disabled",i.disabled),o.Db("type",i.type)("placeholder",i.placeholder)("maxlength",i.maxlength)("aria-expanded",i.overlayVisible)("autofocus",i.autofocus)("tabindex",i.tabindex)("aria-activedescendant","p-highlighted-option")}}function B(e,t){if(1&e){var n=o.Xb();o.Wb(0,"input",13,14),o.fc("click",(function(e){return o.Fc(n),o.hc().onInputClick(e)}))("input",(function(e){return o.Fc(n),o.hc().onInput(e)}))("keydown",(function(e){return o.Fc(n),o.hc().onKeydown(e)}))("keyup",(function(e){return o.Fc(n),o.hc().onKeyup(e)}))("focus",(function(e){return o.Fc(n),o.hc().onInputFocus(e)}))("blur",(function(e){return o.Fc(n),o.hc().onInputBlur(e)}))("change",(function(e){return o.Fc(n),o.hc().onInputChange(e)}))("paste",(function(e){return o.Fc(n),o.hc().onInputPaste(e)})),o.Vb()}if(2&e){var i=o.hc();o.pc("autocomplete",i.autocomplete)("readonly",i.readonly)("disabled",i.disabled),o.Db("type",i.type)("placeholder",i.placeholder)("maxlength",i.maxlength)("aria-expanded",i.overlayVisible)("autofocus",i.autofocus)("tabindex",i.tabindex)}}var U=function(e){return{hover:e}};function W(e,t){if(1&e){var n=o.Xb();o.Wb(0,"li",18),o.fc("mouseenter",(function(){o.Fc(n);var e=t.$implicit;return o.hc(2).highlightOption=e}))("mouseleave",(function(){return o.Fc(n),o.hc(2).highlightOption=null}))("click",(function(){o.Fc(n);var e=t.$implicit;return o.hc(2).selectItem(e)})),o.Wb(1,"a",19),o.Pc(2),o.Vb(),o.Vb()}if(2&e){var i=t.$implicit,a=o.hc(2);o.pc("ngClass",o.uc(3,U,a.highlightOption==i))("id",a.highlightOption==i?"p-highlighted-option":""),o.Cb(2),o.Qc(a.resolveFieldData(i))}}function z(e,t){if(1&e&&(o.Wb(0,"li",20),o.Pc(1),o.Vb()),2&e){var n=o.hc(2);o.Cb(1),o.Qc(n.emptyMessage)}}var H=function(e){return{"auto-complete-result":!0,shadow:!0,active:e}},Q=function(e,t){return{showTransitionParams:e,hideTransitionParams:t}},q=function(e){return{value:"visible",params:e}};function Y(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",1,15),o.fc("@overlayAnimation.start",(function(e){return o.Fc(n),o.hc().onOverlayAnimationStart(e)}))("@overlayAnimation.done",(function(e){return o.Fc(n),o.hc().onOverlayAnimationDone(e)})),o.Wb(2,"ul"),o.Nc(3,W,3,5,"li",16),o.Nc(4,z,2,1,"li",17),o.Vb(),o.Vb()}if(2&e){var i=o.hc();o.pc("ngClass",o.uc(4,H,i.overlayVisible))("@overlayAnimation",o.uc(9,q,o.vc(6,Q,i.showTransitionOptions,i.hideTransitionOptions))),o.Cb(3),o.pc("ngForOf",i.suggestions),o.Cb(1),o.pc("ngIf",i.noResults&&i.emptyMessage)}}var $,X=function(e){return{"valid-error":e,"input search flex-fill":!0}},G={provide:a.p,useExisting:Object(o.U)((function(){return Z})),multi:!0},J={limits:[0,10]},Z=(($=function(){function e(t,n,i,a,r){_classCallCheck(this,e),this.el=t,this.renderer=n,this.cd=i,this.differs=a,this.service=r,this.minLength=1,this.delay=300,this.forceSelection=!0,this.type="text",this.completeOnFocus=!1,this.scrollHeight="200px",this.dropdownMode="blank",this.multiple=!1,this.listFlag=!0,this.emptyMessage="There are no search results. Please enter another search.",this.showTransitionOptions="0ms ease-out",this.hideTransitionOptions="0ms ease-in",this.autocomplete="off",this.limitConditionNeedYn=!0,this.compTypeCodeFlag=!1,this.completeMethod=new o.n,this.onSelect=new o.n,this.onUnselect=new o.n,this.onFocus=new o.n,this.onBlur=new o.n,this.onClear=new o.n,this.onKeyUp=new o.n,this.onShow=new o.n,this.onHide=new o.n,this.overlayVisible=!1,this.focus=!1,this.itemClicked=!1,this.autoKeyword$=new s.a,this.onModelChange=function(){},this.onModelTouched=function(){},this.differ=a.find([]).create(null),this._initAutoKeywordSub()}return _createClass(e,[{key:"invalid",get:function(){return this.isInvalid}},{key:"suggestions",get:function(){return this._suggestions},set:function(e){this._suggestions=e,this.handleSuggestionsChange()}},{key:"inputFieldValue",get:function(){return this._inputFieldValue},set:function(e){C.isNil(e)?this._inputFieldValue="":(this._inputFieldValue=e,this.updateInputField(e))}},{key:"ngAfterViewInit",value:function(){this.writeValue(this.value)}},{key:"ngAfterContentChecked",value:function(){}},{key:"ngAfterViewChecked",value:function(){var e=this;this.highlightOptionChanged&&(setTimeout((function(){if(e.overlay){var t=k.a.findSingle(e.overlay,"li.hover");t&&k.a.scrollInView(e.overlay,t)}}),1),this.highlightOptionChanged=!1)}},{key:"getInputValue",value:function(){return!this.multiple&&this.inputId?_defineProperty({},this.inputId,C.isEmpty(this.inputEL.nativeElement.value)?null:this.inputEL.nativeElement.value):null}},{key:"handleSuggestionsChange",value:function(){null!=this._suggestions&&(this.highlightOption=null,this._suggestions.length?(this.noResults=!1,this.show()):(this.noResults=!0,this.emptyMessage?this.show():this.hide()))}},{key:"writeValue",value:function(e){var t=this;if(this.value=e,this.filled=this.value&&""!==this.value,!this.inputFieldValue)if(this.inputEL&&"*"===this.value)this.inputEL.nativeElement.value="*";else{if(this.inputEL&&this.value){var n=C.omitBy(this.apiCondition||{},C.isNil),i=Object.assign({},this.limitConditionNeedYn?J:{},n),o=this.value.toString();this.apiSearchTerm&&("admin/common/staff"===this.apiUrl&&parseInt(o)>0?i.userNo=parseInt(o):"admin/basis/region"===this.apiUrl&&parseInt(o)>0?i.regionCode=parseInt(o):i[this.apiSearchTerm]=o),this.compTypeCodeFlag&&(i.compTypeCodes=["CMP01","CMP08"],i.compName=o,i.corporateCompName=void 0),this.suggestions?this.inputEL.nativeElement.value=this.resolveFieldData(this._findItemByDataKey(this.suggestions)):(this.inputEL.nativeElement.value="searching...",this.service.getSuggestions(this.apiUrl,i).subscribe((function(e){var n=C.get(e,t.searchResultPath||["list"]);n&&n.length>0&&(t.inputEL.nativeElement.value=t.resolveFieldData(t._findItemByDataKey(n)))})))}this.updateInputField()}}},{key:"registerOnChange",value:function(e){this.onModelChange=e}},{key:"registerOnTouched",value:function(e){this.onModelTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"onInput",value:function(e){if(this.itemClicked=!1,this.inputKeyDown||!k.a.isIE()){this.timeout&&clearTimeout(this.timeout);var t=e.target.value;0!==t.length||this.multiple||(this.hide(),this.onClear.emit(e),this.onModelChange(null)),this.search(e,t),this.updateFilledState(),this.inputKeyDown=!1}}},{key:"onInputClick",value:function(e){this.documentClickListener&&(this.inputClick=!0)}},{key:"search",value:function(e,t){C.isNil(t)||this.autoKeyword$.next(t)}},{key:"selectItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.multiple?(this.multiInputEL.nativeElement.value="",this.value=this.value||[],this.isSelected(e)||(this.value=[].concat(_toConsumableArray(this.value),[e]),this.onModelChange(this.value))):(this.inputEL.nativeElement.value=this.resolveFieldData(e),this.value=this.dataKey?O.resolveFieldData(e,this.dataKey)||"":e,this.onModelChange(this.value));var n=this.multiple?Object.assign({},e):Object.assign(Object.assign({},e),{value:this.value,label:this.inputEL.nativeElement.value});this.onSelect.emit(n),this.updateFilledState(),this.autoKeyword$.next(null),t&&(this.itemClicked=!0,this.focusInput())}},{key:"updateInputField",value:function(e){null===this.value?(this.inputEL&&this.inputEL.nativeElement&&(this.inputEL.nativeElement.value=""),this.multiInputEL&&this.multiInputEL.nativeElement&&(this.multiInputEL.nativeElement.value="")):e&&(this.inputEL&&this.inputEL.nativeElement&&(this.inputEL.nativeElement.value=e),this.multiInputEL&&this.multiInputEL.nativeElement&&(this.multiInputEL.nativeElement.value=e))}},{key:"show",value:function(){if(this.multiInputEL||this.inputEL){var e=this.multiple?document.activeElement==this.multiInputEL.nativeElement:document.activeElement==this.inputEL.nativeElement;!this.overlayVisible&&e&&(this.overlayVisible=!0)}}},{key:"onOverlayAnimationStart",value:function(e){switch(e.toState){case"visible":this.overlay=e.element,this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.onShow.emit(e);break;case"void":this.onOverlayHide()}}},{key:"onOverlayAnimationDone",value:function(e){"void"===e.toState&&(this._suggestions=null)}},{key:"resolveFieldData",value:function(e){return C.isNil(e)?"":this.inputFieldFormat&&this.inputFieldFormatKeyList&&this.inputFieldFormatKeyList.length>0?this._formatInputField(this.inputFieldFormat,e,this.inputFieldFormatKeyList):e}},{key:"hide",value:function(){this.overlayVisible=!1,this.cd.markForCheck()}},{key:"focusInput",value:function(){this.multiple?this.multiInputEL.nativeElement.focus():this.inputEL.nativeElement.focus()}},{key:"removeItem",value:function(e){var t=k.a.index(e),n=this.value[t];this.value=this.value.filter((function(e,n){return n!==t})),this.onModelChange(this.value.length>0?this.value:null),this.updateFilledState(),this.onUnselect.emit(n)}},{key:"onKeydown",value:function(e){if(this.overlayVisible){var t=this.findOptionIndex(this.highlightOption);switch(e.which){case 40:if(-1!==t){var n=t+1;n!==this.suggestions.length&&(this.highlightOption=this.suggestions[n],this.highlightOptionChanged=!0)}else this.highlightOption=this.suggestions[0];e.preventDefault();break;case 38:t>0&&(this.highlightOption=this.suggestions[t-1],this.highlightOptionChanged=!0),e.preventDefault();break;case 13:this.highlightOption?(this.selectItem(this.highlightOption),this.hide()):this.suggestions&&(1!=this.suggestions.length||this.noResults||(this.selectItem(this.suggestions[0]),this.hide())),e.preventDefault();break;case 27:this.hide(),e.preventDefault();break;case 9:this.highlightOption&&this.selectItem(this.highlightOption),this.hide()}}else 40===e.which&&this.suggestions&&this.search(e,e.target.value),13!==e.which||this.value||e.preventDefault();this.inputKeyDown=!0}},{key:"onKeyup",value:function(e){this.onKeyUp.emit(e)}},{key:"onInputFocus",value:function(e){this.focus=!0,this.onFocus.emit(e)}},{key:"onInputBlur",value:function(e){this.focus=!1,this.onModelTouched(),this.onBlur.emit(e)}},{key:"onInputChange",value:function(e){}},{key:"onInputPaste",value:function(e){this.onKeydown(e)}},{key:"isSelected",value:function(e){var t=!1;if(this.value&&this.value.length){var n,i=_createForOfIteratorHelper(this.value);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(O.equals(o,e,this.dataKey)){t=!0;break}}}catch(a){i.e(a)}finally{i.f()}}return t}},{key:"findOptionIndex",value:function(e){var t=-1;if(this.suggestions)for(var n=0;n<this.suggestions.length;n++)if(O.equals(e,this.suggestions[n])){t=n;break}return t}},{key:"updateFilledState",value:function(){this.filled=this.multiple?this.value&&this.value.length||this.multiInputEL&&this.multiInputEL.nativeElement&&""!==this.multiInputEL.nativeElement.value:this.inputFieldValue&&""!==this.inputFieldValue||this.inputEL&&this.inputEL.nativeElement&&""!==this.inputEL.nativeElement.value}},{key:"bindDocumentClickListener",value:function(){var e=this;this.documentClickListener||(this.documentClickListener=this.renderer.listen("document","click",(function(t){3!==t.which&&(e.inputClick||e.hide(),e.inputClick=!1,e.cd.markForCheck())})))}},{key:"unbindDocumentClickListener",value:function(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}},{key:"bindDocumentResizeListener",value:function(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}},{key:"unbindDocumentResizeListener",value:function(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}},{key:"onWindowResize",value:function(){this.hide()}},{key:"onOverlayHide",value:function(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.overlay=null,this.onHide.emit()}},{key:"_initAutoKeywordSub",value:function(){var e=this,t=this.autoKeyword$.pipe(Object(l.a)(this.delay),Object(c.a)(),Object(h.a)()),n=_slicedToArray(Object(u.a)(t,(function(t){return t&&t.trim().length>=e.minLength})),2),i=n[0],o=n[1];i=i.pipe(Object(p.a)(this._showLoading),Object(d.a)((function(e){var t=A,n=j;return!((S.test(null==e?void 0:e[0])||t.test(null==e?void 0:e[0]))&&e.length<3||n.test(null==e?void 0:e[0]))})),Object(f.a)((function(t){var n=C.omitBy(e.apiCondition||{},C.isNil),i=Object.assign({},e.limitConditionNeedYn?J:{},n);return t="roleSeq"===e.apiSearchTerm?Number(t):String(t),"admin/common/staff"===e.apiUrl&&parseInt(t)>0?i.userNo=parseInt(t):e.apiSearchTerm&&(i[e.apiSearchTerm]=t),e.compTypeCodeFlag&&(i.compTypeCodes=["CMP01","CMP08"],i.compName=t,i.corporateCompName=void 0),i})),Object(l.a)(500),Object(v.a)((function(t){return e.service.getSuggestions(e.apiUrl,t)})),Object(p.a)(this._hideLoading),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(t){return t.lift(new g(e,t))}}(2),Object(b.a)(this._hideLoading)),o=o.pipe(Object(p.a)((function(t){return e.suggestions=null})),Object(p.a)((function(t){return e.hide()})),Object(b.a)((function(){return e.cd.markForCheck()}))),this.autoKeywordSub=i.subscribe((function(t){var n,i=e.searchResultPath||["list"];if("all"===(null===(n=e.searchResultPath)||void 0===n?void 0:n[0])){var o=[];Object.entries(t).forEach((function(t){var n=_slicedToArray(t,2),i=n[0],a=n[1];o=e.generateSearchObjs(a,i,o)})),e.suggestions=o}else e.suggestions=C.cloneDeep(C.get(t,i))||[];e.cd.markForCheck()})),this.autoResetSub=o.subscribe()}},{key:"generateSearchObjs",value:function(e,t,n){return e.reduce((function(e,n){var i,o,a,r,s,u,l,c,h;switch(t){case N.Airports:if(h=n,e.some((function(e){return e.airportCode===h.airportCode})))break;e.push({type:N.Airports,cityCodeIata:null!==(i=h.cityCodeIata)&&void 0!==i?i:"",airportCode:h.airportCode,airportNameLn:null!==(o=h.airportNameLn)&&void 0!==o?o:"",airportNameEn:h.airportNameEn,regionCode:"",regionNameLn:null!==(a=h.airportNameLn)&&void 0!==a?a:"",regionNameEn:h.airportNameEn,stateNameEn:null!==(r=h.stateNameEn)&&void 0!==r?r:"",countryNameEn:h.countryNameEn,countryCode:h.countryCode});break;case N.Hotels:h=n,e.push({type:N.Hotels,regionCode:h.hotelCode,regionNameLn:h.hotelNameLn,regionNameEn:h.hotelNameEn,stateNameEn:null!==(s=h.stateNameEn)&&void 0!==s?s:"",countryNameEn:h.countryNameEn,countryCode:h.countryCode});break;case N.Regions:h=n,e.push({type:N.Regions,regionNameLn:null!==(u=h.regionNameLn)&&void 0!==u?u:"",regionNameEn:h.regionNameEn,regionCode:h.regionCode,countryNameEn:null!==(l=h.countryNameEn)&&void 0!==l?l:"",stateNameEn:null!==(c=h.stateNameEn)&&void 0!==c?c:"",countryCode:h.countryCode})}return e}),n)}},{key:"_formatInputField",value:function(e,t,n){var i=!0,o=n.map((function(e){return t.hasOwnProperty(e)?t[e]||"***":(i=!1,"")}));if(!i)return"";var a=e.format(o);return a=a.indexOf("***")>-1?a.split("&").filter((function(e){return-1===e.indexOf("***")})).join(""):a.replace(/&/g,"")}},{key:"_showLoading",value:function(){this.loading=!0}},{key:"_hideLoading",value:function(){this.loading=!1}},{key:"_findItemByDataKey",value:function(e){var t=this;return e.find((function(e){return e[t.dataKey]===t.value}))}},{key:"ngOnDestroy",value:function(){this.onOverlayHide(),this.autoKeywordSub.unsubscribe(),this.autoResetSub.unsubscribe()}},{key:"focusOutFunction",value:function(){this.inputEL.nativeElement.value===this._inputFieldValue||this.itemClicked||(this.onModelChange(null),this.inputEL.nativeElement.value="")}}]),e}()).\u0275fac=function(e){return new(e||$)(o.Qb(o.l),o.Qb(o.E),o.Qb(o.h),o.Qb(o.s),o.Qb(x))},$.\u0275cmp=o.Kb({type:$,selectors:[["app-auto-complete"]],viewQuery:function(e,t){var n;1&e&&(o.Xc(T,!0),o.Xc(V,!0)),2&e&&(o.Dc(n=o.gc())&&(t.inputEL=n.first),o.Dc(n=o.gc())&&(t.multiInputEL=n.first))},hostAttrs:[1,"auto-complete"],hostVars:2,hostBindings:function(e,t){2&e&&o.Gb("valid-error",t.invalid)},inputs:{minLength:"minLength",delay:"delay",styleClass:"styleClass",placeholder:"placeholder",readonly:"readonly",disabled:"disabled",maxlength:"maxlength",forceSelection:"forceSelection",type:"type",apiUrl:"apiUrl",apiCondition:"apiCondition",apiSearchTerm:"apiSearchTerm",searchResultPath:"searchResultPath",completeOnFocus:"completeOnFocus",field:"field",scrollHeight:"scrollHeight",dropdown:"dropdown",dropdownMode:"dropdownMode",multiple:"multiple",listFlag:"listFlag",tabindex:"tabindex",dataKey:"dataKey",emptyMessage:"emptyMessage",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autofocus:"autofocus",autocomplete:"autocomplete",isInvalid:"isInvalid",inputId:"inputId",inputFieldFormat:"inputFieldFormat",inputFieldFormatKeyList:"inputFieldFormatKeyList",limitConditionNeedYn:"limitConditionNeedYn",compTypeCodeFlag:"compTypeCodeFlag",suggestions:"suggestions",inputFieldValue:"inputFieldValue"},outputs:{completeMethod:"completeMethod",onSelect:"onSelect",onUnselect:"onUnselect",onFocus:"onFocus",onBlur:"onBlur",onClear:"onClear",onKeyUp:"onKeyUp",onShow:"onShow",onHide:"onHide"},features:[o.Bb([G,x])],decls:5,vars:9,consts:[["class","selected-label-area",4,"ngIf"],[3,"ngClass"],["role","combobox","aria-haspopup","true",3,"autocomplete","value","readonly","disabled","click","input","keydown","keyup","focus","blur","change","paste","focusout",4,"ngIf"],["role","searchbox","aria-autocomplete","list","aria-haspopup","true",3,"autocomplete","readonly","disabled","click","input","keydown","keyup","focus","blur","change","paste",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"selected-label-area"],["class","selected-label",4,"ngFor","ngForOf"],[1,"selected-label"],["token",""],["class","btn-label-del",3,"click",4,"ngIf"],[1,"btn-label-del",3,"click"],["role","combobox","aria-haspopup","true",3,"autocomplete","value","readonly","disabled","click","input","keydown","keyup","focus","blur","change","paste","focusout"],["in",""],["role","searchbox","aria-autocomplete","list","aria-haspopup","true",3,"autocomplete","readonly","disabled","click","input","keydown","keyup","focus","blur","change","paste"],["multiIn",""],["panel",""],[3,"ngClass","id","mouseenter","mouseleave","click",4,"ngFor","ngForOf"],["class","no-result",4,"ngIf"],[3,"ngClass","id","mouseenter","mouseleave","click"],[1,"auto-complete-item"],[1,"no-result"]],template:function(e,t){1&e&&(o.Nc(0,R,2,1,"div",0),o.Wb(1,"div",1),o.Nc(2,M,2,11,"input",2),o.Nc(3,B,2,9,"input",3),o.Vb(),o.Nc(4,Y,5,11,"div",4)),2&e&&(o.pc("ngIf",t.multiple&&null!==t.value&&(null==t.value?null:t.value.length)>0&&t.listFlag),o.Cb(1),o.Eb(t.styleClass),o.pc("ngClass",o.uc(7,X,t.isInvalid)),o.Cb(1),o.pc("ngIf",!t.multiple),o.Cb(1),o.pc("ngIf",t.multiple),o.Cb(1),o.pc("ngIf",t.overlayVisible))},directives:[D.o,D.l,D.n],styles:[".hover[_ngcontent-%COMP%]{color:#000;font-style:italic;font-weight:700}"],data:{animation:[Object(r.k)("overlayAnimation",[Object(r.h)("void",Object(r.i)({opacity:0})),Object(r.h)("visible",Object(r.i)({top:"100%",opacity:1})),Object(r.j)("void => visible",Object(r.e)("{{showTransitionParams}}")),Object(r.j)("visible => void",Object(r.e)("{{hideTransitionParams}}"))])]}}),$)}}]);