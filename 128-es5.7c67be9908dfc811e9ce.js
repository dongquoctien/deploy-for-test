function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,a=void 0;try{for(var c,r=e[Symbol.iterator]();!(i=(c=r.next()).done)&&(n.push(c.value),!t||n.length!==t);i=!0);}catch(l){o=!0,a=l}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{zpyf:function(e,t,n){"use strict";n.r(t),n.d(t,"CONTAINERS",(function(){return Cn})),n.d(t,"COMPONENTS",(function(){return vn})),n.d(t,"HoReservationListOtaModule",(function(){return yn}));var i={};n.r(i),n.d(i,"setFunctionAuths",(function(){return P})),n.d(i,"loadDateRangeTypeAction",(function(){return x})),n.d(i,"loadDateRangeTypeSuccessAction",(function(){return A})),n.d(i,"loadDateRangeTypeFailureAction",(function(){return V})),n.d(i,"loadStationTypeAction",(function(){return _})),n.d(i,"loadStationTypeSuccessAction",(function(){return D})),n.d(i,"loadStationTypeFailureAction",(function(){return W})),n.d(i,"loadDeviceTypeAction",(function(){return F})),n.d(i,"loadDeviceTypeSuccessAction",(function(){return B})),n.d(i,"loadDeviceTypeFailureAction",(function(){return E})),n.d(i,"loadBookingStatusAction",(function(){return M})),n.d(i,"loadBookingStatusSuccessAction",(function(){return $})),n.d(i,"loadBookingStatusFailureAction",(function(){return H})),n.d(i,"loadContractTypeAction",(function(){return Y})),n.d(i,"loadContractTypesSuccessAction",(function(){return K})),n.d(i,"loadPaymentStatusListAction",(function(){return z})),n.d(i,"loadPaymentStatusListSuccessAction",(function(){return G})),n.d(i,"initThisStateAction",(function(){return U})),n.d(i,"loadMainListAction",(function(){return Q})),n.d(i,"loadMainListSuccessAction",(function(){return q})),n.d(i,"loadMainListFailureAction",(function(){return X})),n.d(i,"changeSearchConditionAction",(function(){return J})),n.d(i,"changeMainListPageSizeAction",(function(){return Z})),n.d(i,"changeMainListPageIndexAction",(function(){return ee})),n.d(i,"setGridStateAction",(function(){return te})),n.d(i,"updateAssignPicItems",(function(){return ne})),n.d(i,"openAssignPicModalAction",(function(){return ie})),n.d(i,"closeAssignPicModalAction",(function(){return oe})),n.d(i,"updateAssignPicItemsSuccess",(function(){return ae})),n.d(i,"updateAssignPicItemsFailure",(function(){return ce})),n.d(i,"openOffRegistPopup",(function(){return re})),n.d(i,"closeOffRegistPopup",(function(){return le})),n.d(i,"openUmsPopup",(function(){return se})),n.d(i,"closeUmsPopup",(function(){return ue}));var o=n("ofXK"),a=n("3Pt+"),c=n("snw9"),r=n("kt0X"),l=n("WG3B"),s=n("wPo9"),u=n("7rOj"),d=n("6LsY"),p=n("l1P7"),b=n("v7zA"),m=n("hHe4"),h=n("1OXJ"),f=n("5hwk"),g=n("kKjH"),C=n("qXPF"),v=n("/AQM"),y=n("YyVL"),k=n("9kH+"),O=n("vu/V"),S=n("tyNb"),R=n("XNiG"),j=n("itXk"),L=n("zP0r"),T=n("Kj3r"),N=n("pLZG"),I=n("1G5W"),w=n("LvDl"),P=Object(r.o)("[HoReservationListOta] set function auths",Object(r.t)()),x=Object(r.o)("[HoReservationListOta] load date range type",Object(r.t)()),A=Object(r.o)("[HoReservationListOta] load date range type success",Object(r.t)()),V=Object(r.o)("[HoReservationListOta] load date range type failure",Object(r.t)()),_=Object(r.o)("[HoReservationListOta] load station type",Object(r.t)()),D=Object(r.o)("[HoReservationListOta] load station type success",Object(r.t)()),W=Object(r.o)("[HoReservationListOta] load station type failure",Object(r.t)()),F=Object(r.o)("[HoReservationListOta] load device type",Object(r.t)()),B=Object(r.o)("[HoReservationListOta] load device type success",Object(r.t)()),E=Object(r.o)("[HoReservationListOta] load device type failure",Object(r.t)()),M=Object(r.o)("[HoReservationListOta] load booking status",Object(r.t)()),$=Object(r.o)("[HoReservationListOta] load booking status success",Object(r.t)()),H=Object(r.o)("[HoReservationListOta] load booking status failure",Object(r.t)()),Y=Object(r.o)("[HoReservationListOta] load contractTypeList",Object(r.t)()),K=Object(r.o)("[HoReservationListOta] load contractTypeList success",Object(r.t)()),z=Object(r.o)("[HoReservationListOta] load paymentStatusList",Object(r.t)()),G=Object(r.o)("[HoReservationListOta] load paymentStatusList success",Object(r.t)()),U=Object(r.o)("[HoReservationListOta] init hotel reservation list ota"),Q=Object(r.o)("[HoReservationListOta] load hotel reservation list ota",Object(r.t)()),q=Object(r.o)("[HoReservationListOta] load hotel reservation list success",Object(r.t)()),X=Object(r.o)("[HoReservationListOta] load hotel reservation list failure",Object(r.t)()),J=Object(r.o)("[HoReservationListOta] change search condition",Object(r.t)()),Z=Object(r.o)("[HoReservationListOta] change hotel reservation list ota page size",Object(r.t)()),ee=Object(r.o)("[HoReservationListOta] change hotel reservation list ota page index",Object(r.t)()),te=Object(r.o)("[HoReservationListOta] set grid state",Object(r.t)()),ne=Object(r.o)("[HoReservationListOta/AssignPicUpdate] \uc77c\uad04\ubcc0\uacbd \ud31d\uc5c5\uc5d0\uc11c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(r.t)()),ie=Object(r.o)("[HoReservationListOta] open assign pic modal"),oe=Object(r.o)("[HoReservationListOta] close assign pic modal"),ae=Object(r.o)("[HoReservationListOta] update items success",Object(r.t)()),ce=Object(r.o)("[HoReservationListOta] update items failure",Object(r.t)()),re=Object(r.o)("[HoReservationListOta] open off regist popup"),le=Object(r.o)("[HoReservationListOta] close off regist popup"),se=Object(r.o)("[HoReservationListOta] open ums popup"),ue=Object(r.o)("[HoReservationListOta] close ums popup"),de=n("EVqC"),pe=Object(de.a)({selectId:function(e){return e.rowid},sortComparer:!1}),be=pe.getInitialState({dateRangeTypeList:null,stationTypeList:null,deviceTypeList:null,onOffManualList:null,bookingStatusList:null,vendorList:null,continentList:null,loading:!1,searchCondition:null,otherSearchInfo:null,mainSummaryInfo:null,mainDataTotalCount:0,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},contractTypeList:null,paymentStatusList:null,pageSize:20}),me=Object(r.q)(be,Object(r.s)(i.loadDateRangeTypeSuccessAction,(function(e,t){var n=t.dataList;return Object.assign(Object.assign({},e),{dateRangeTypeList:n})})),Object(r.s)(i.loadStationTypeSuccessAction,(function(e,t){var n=t.dataList;return Object.assign(Object.assign({},e),{stationTypeList:n})})),Object(r.s)(i.loadDeviceTypeSuccessAction,(function(e,t){var n=t.dataList;return Object.assign(Object.assign({},e),{deviceTypeList:n})})),Object(r.s)(i.loadBookingStatusSuccessAction,(function(e,t){var n=t.dataList;return Object.assign(Object.assign({},e),{bookingStatusList:n})})),Object(r.s)(i.loadContractTypesSuccessAction,(function(e,t){var n=t.dataList;return Object.assign(Object.assign({},e),{contractTypeList:n})})),Object(r.s)(i.loadPaymentStatusListSuccessAction,(function(e,t){var n=t.dataList;return Object.assign(Object.assign({},e),{paymentStatusList:n})})),Object(r.s)(i.changeSearchConditionAction,(function(e,t){var n=t.searchCondition,i=t.otherSearchInfo;return Object.assign(Object.assign({},e),{searchCondition:w.cloneDeep(n),otherSearchInfo:i})})),Object(r.s)(i.initThisStateAction,(function(e){return Object.assign(Object.assign({},e),{loading:!1})})),Object(r.s)(i.loadMainListAction,(function(e){return Object.assign(Object.assign({},e),{loading:!0,checkedRowIds:[]})})),Object(r.s)(i.loadMainListSuccessAction,(function(e,t){var n=t.dataCollection;return pe.setAll(n.list,Object.assign(Object.assign({},e),{loading:!1,mainSummaryInfo:n.summary,mainDataTotalCount:n.totalCount}))})),Object(r.s)(i.loadMainListFailureAction,(function(e){return Object.assign(Object.assign({},e),{loading:!1})})),Object(r.s)(i.changeMainListPageSizeAction,(function(e,t){var n=t.pageSize;return Object.assign(Object.assign({},e),{gridState:w.set(w.cloneDeep(e.gridState),["pageInfo","take"],n),pageSize:n})})),Object(r.s)(i.changeMainListPageIndexAction,(function(e,t){var n=t.pageIndex;return Object.assign(Object.assign({},e),{gridState:w.set(w.cloneDeep(e.gridState),["pageInfo","skip"],n)})})),Object(r.s)(i.setGridStateAction,(function(e,t){var n=t.gridState;return Object.assign(Object.assign({},e),{gridState:n})})),Object(r.s)(i.updateAssignPicItemsSuccess,(function(e,t){var n=t.updateList;return pe.upsertMany(n,Object.assign(Object.assign({},e),{checkedRowIds:[]}))})));function he(e,t){return Object(r.m)({hoReservationListOtaMain:me})(e,t)}var fe,ge,Ce=Object(r.p)("hoReservationListOta"),ve=Object(r.r)(Ce,(function(e){return e.hoReservationListOtaMain})),ye=Object(r.r)(ve,(function(e){return e.dateRangeTypeList})),ke=Object(r.r)(ve,(function(e){return e.stationTypeList})),Oe=Object(r.r)(ve,(function(e){return e.deviceTypeList})),Se=Object(r.r)(ve,(function(e){return e.bookingStatusList})),Re=(Object(r.r)(ve,(function(e){return e.vendorList})),Object(r.r)(ve,(function(e){return e.contractTypeList}))),je=Object(r.r)(ve,(function(e){return e.paymentStatusList})),Le=Object(r.r)(ve,(function(e){return e.searchCondition})),Te=Object(r.r)(ve,(function(e){return e.otherSearchInfo})),Ne=Object(r.r)(ve,(function(e){return e.loading})),Ie=pe.getSelectors(ve).selectAll,we=Object(r.r)(ve,(function(e){return e.mainSummaryInfo})),Pe=Object(r.r)(ve,(function(e){return e.mainDataTotalCount})),xe=Object(r.r)(ve,(function(e){return e.gridState})),Ae=Object(r.r)(ve,(function(e){return e.pageSize})),Ve=n("YY+H"),_e=n("AytR").a.API_URL,De={postCommonDetailCode:"".concat(_e,"/common/detail-code"),postCommonComp:"".concat(_e,"/common/comp"),postBasicContinent:"".concat(_e,"/admin/basis/continent"),postHotelList:"".concat(_e,"/admin/booking/hotel/list"),putAssignPicItems:"".concat(_e,"/admin/booking/pic-assign"),excelDownload:"".concat(_e,"/admin/booking/hotel/excel"),postFunction:"".concat(_e,"/admin/basis/function")},We=n("fXoL"),Fe=n("pfiq"),Be=n("/uUt"),Ee=n("wd/R"),Me=n("6UzV"),$e=((fe=_createClass((function e(t){var n=this;_classCallCheck(this,e),this.fb=t,this.generateGridColumns=function(){return[{field:"firstInsertDatetime",title:"Booking Date",type:"text",style:{"text-align":"center"}},{field:"stationTypeName",title:"Station",type:"text",style:{"text-align":"center"}},{field:"bookingItemCode",title:"Booking Item Code",type:"text",template:"bookingItemCodeTpl",style:{"text-align":"center"}},{field:"bookingStatusName",title:"Booking Status",type:"text",template:"statusTpl"},{field:"hotelNameEn",title:"Hotel Name",type:"text",template:"hotelNameTpl"},{field:"clientCancelDeadline",title:"Client Cancel D/L",type:"text",style:{"text-align":"center"}},{field:"checkInDate",title:"C/ In Date & Nts",type:"text",template:"checkInDateTpl",style:{"text-align":"center"}},{field:"roomTypeNameEn",title:"  Room Type & Count  ",type:"text",template:"roomCountTpl"},{field:"travelerName",title:"1st Traveler Name",type:"text"},{field:"billingSumAmount",title:"Billing Sum Amt",type:"text",template:"billingSumAmountTpl",style:{"text-align":"right"}},{field:"billingBalanceAmount",title:"Billing Balance",type:"text",template:"billingBalanceAmountTpl",style:{"text-align":"right"}},{field:"cancelDatetime",title:"BKG Cancel Date",type:"text",style:{"text-align":"center"}},{field:"bookerCompName",title:"Seller Name",type:"text"},{field:"sellerBookingCode",title:"Seller BKG Code",type:"text",style:{"text-align":"center"}},{field:"vendorCompName",title:"Vendor Name",type:"text"},{field:"vendorBookingCode",title:"Vendor BKG Code",type:"text"},{field:"vendorBookingItemCode",title:"Vendor CNFM No.",type:"text"},{field:"vendorPaymentStatusName",title:"V.Payment Status",type:"text"},{field:"hotelContractTypeName",title:"Contract Type",type:"text"},{field:"bookingCmsPmsCompName",title:"CMS/PMS Name",type:"text"},{field:"sendCmsPmsCompName",title:"Notify CMS/PMS",type:"text"},{field:"mutualContractBookingYn",title:"Mutual YN",type:"boolean",template:"mutualContractBookingYnTpl",style:{"text-align":"center"}},{field:"domainAddress",title:"B2C BKG Domain",type:"text"},{field:"cancelConfirmUno",title:"Cancel Confirm User",type:"text"},{field:"cancelConfirmNo",title:"Cancel Cofirm No.",type:"text"}]},this.generateHoReservationListOtaSearchForm=function(){return n.fb.group({searchTypeCode:[null],dateRange1:n.fb.group({rangeType:[null],dates:n.fb.array([new a.g(null,[a.z.required]),new a.g(null,[a.z.required])])},{validators:[Me.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),dateRange2:n.fb.group({rangeType:[null],dates:n.fb.array([new a.g(null),new a.g(null)])},{validators:[Me.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),dateRange3:n.fb.group({rangeType:[null],dates:n.fb.array([new a.g(null),new a.g(null)])},{validators:[Me.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),stationTypeCode:null,domainAddresses:null,deviceTypeCode:null,onOffManual:null,bookingItemCode:null,bookerId:null,travelerName:null,bookerMobileNo:null,bookerName:null,bookingStatusCodes:null,hotelContractTypeCode:null,mutualContractBookingYn:null,countryCode:null,hotelName:null,hotelCode:null,bookerCompCode:null,sellerBookingCode:null,vendorPaymentStatusCode:null,vendorCompCodes:null,vendorBookingCode:null,vendorBookingItemCode:null,bookingCmsPmsCompCode:null,cancelConfirmYn:null,bookingPicName:null,bookingPicUno:null,destinationCountryCode:null,selectedBookerDropdown:null,groupYn:null})},this.initHoReservationListOtaSearchForm=function(){return{dateRange1:{rangeType:"HDA01",dates:[Ee().format("YYYY-MM-DD"),Ee().format("YYYY-MM-DD")]},dateRange2:{rangeType:"HDA02",dates:[null,null]},dateRange3:{rangeType:"HDA03",dates:[null,null]},stationTypeCode:null,domainAddresses:null,deviceTypeCode:null,onOffManual:null,bookingItemCode:null,bookerId:null,travelerName:null,bookerMobileNo:null,bookerName:null,bookingStatusCodes:null,hotelContractTypeCode:null,mutualContractBookingYn:null,countryCode:null,hotelName:null,hotelCode:null,bookerCompCode:null,sellerBookingCode:null,vendorPaymentStatusCode:null,vendorCompCodes:null,vendorBookingCode:null,vendorBookingItemCode:null,bookingCmsPmsCompCode:null,cancelConfirmYn:null,bookingPicName:null,bookingPicUno:null,destinationCountryCode:null,selectedBookerDropdown:"bookerName",groupYn:null}},this.generateAssignPicPutForm=function(){return n.fb.group({itemCategoryCode:[null],picTypeCode:[null],picUno:[null,[a.z.required]],picName:[null]})},this.initAssignPicPutForm=function(){return{itemCategoryCode:"IC02",picTypeCode:"PIC01",picUno:null,picName:null}}}))).\u0275fac=function(e){return new(e||fe)(We.bc(a.f))},fe.\u0275prov=We.Mb({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe),He=n("LRne"),Ye=n("z6cu"),Ke=n("eIep"),ze=n("tpT/"),Ge=((ge=function(){function e(t){_classCallCheck(this,e),this.api=t}return _createClass(e,[{key:"getCommonDetailCodeList",value:function(e){var t=w.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.postCommonDetailCode,t).pipe(Object(Ke.a)((function(e){return e.succeedYn?Object(He.a)(e.result.list):Object(Ye.a)(e||"api response error")})))}},{key:"getVendorList",value:function(e){var t=w.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.postCommonComp,t).pipe(Object(Ke.a)((function(e){return e.succeedYn?Object(He.a)(e.result.list):Object(Ye.a)(e||"api response error")})))}},{key:"getContinentList",value:function(e){var t=w.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.postBasicContinent,t).pipe(Object(Ke.a)((function(e){return e.succeedYn?Object(He.a)(e.result.list):Object(Ye.a)(e||"api response error")})))}},{key:"getMainList",value:function(e){var t=this,n=w.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.postHotelList,n).pipe(Object(Ke.a)((function(e){var n,i,o;if(e.succeedYn){var a=t._addRowid(null===(n=e.result)||void 0===n?void 0:n.list),c=(null===(i=e.result)||void 0===i?void 0:i.summary)?e.result.summary:{},r=(null===(o=e.result)||void 0===o?void 0:o.totalCount)||0;return Object(He.a)({list:a,summary:c,totalCount:r})}return Object(Ye.a)(e||"api response error")})))}},{key:"updateAssignPicItems",value:function(e){var t=w.assign({},this.api.defaultParams,{condition:e});return this.api.put(De.putAssignPicItems,t).pipe(Object(Ke.a)((function(e){return e.succeedYn?Object(He.a)(e.result.list.map((function(e){return{id:e.bookingItemCode,bookingPicUno:e.picUno,bookingPicName:e.picName,bookingItemCode:e.bookingItemCode}}))):Object(Ye.a)(e||"api response error")})))}},{key:"getBasisFunctions",value:function(e){var t=w.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.postFunction,t).pipe(Object(Ke.a)((function(e){return e.succeedYn&&e.result?Object(He.a)(e.result.list||[]):Object(Ye.a)(e||"api response error")})))}},{key:"_addRowid",value:function(e){return w.isNil(e)?[]:e.map((function(e,t){return Object.assign(Object.assign({},e),{rowid:String(t)})}))}}]),e}()).\u0275fac=function(e){return new(e||ge)(We.bc(ze.a))},ge.\u0275prov=We.Mb({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge),Ue=n("EsKh"),Qe=n("+Sob"),qe=n("nMd8"),Xe=n("rbKv"),Je=n("kd+X"),Ze=n("LVFn"),et=n("U2QM"),tt=n("U6NN"),nt=n("0xcq"),it=n("gbCm"),ot=n("pb6r");function at(e,t){1&e&&We.Rb(0,"app-input-text",54)}function ct(e,t){1&e&&We.Rb(0,"app-input-text",55)}function rt(e,t){1&e&&We.Rb(0,"app-input-text",56)}function lt(e,t){1&e&&We.Rb(0,"app-input-text",57)}var st,ut,dt=function(){return{userTypeCode:"U01"}},pt=function(){return["userNo","name","deptName","positionName"]},bt=function(){return["countryCode","countryNameEn"]},mt=function(){return["CMP04","CMP05","CMP06","CMP11"]},ht=function(e){return{compTypeCodes:e}},ft=function(){return["compCode","compName"]},gt=function(){return["CMP07","CMP08"]},Ct=function(){return["compName","compCode"]},vt=function(){return["CMP02","CMP03"]},yt=((ut=function(){function e(t,n){_classCallCheck(this,e),this._dataService=t,this._alertService=n,this.clickSearchEvent=new We.n,this.clickResetEvent=new We.n,this.isShowmore=!1,this._$unsubscribe=new R.a,this.searchForm=t.generateHoReservationListOtaSearchForm()}return _createClass(e,[{key:"otherSearchInfo",get:function(){return this._otherSearchInfo},set:function(e){this._otherSearchInfo=e,this._setOtherSearchInfo(e)}},{key:"dateRangeTypeList",get:function(){return this._dataRangeTypeList},set:function(e){this._dataRangeTypeList=e,this._initDateRangeList(e)}},{key:"searchCondition",get:function(){return this._searchCondition},set:function(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}},{key:"dateRange1Dates",get:function(){return this.searchForm.get("dateRange1").get("dates").value}},{key:"dateRange2Dates",get:function(){return this.searchForm.get("dateRange2").get("dates").value}},{key:"dateRange3Dates",get:function(){return this.searchForm.get("dateRange3").get("dates").value}},{key:"formValue",get:function(){return this.searchForm&&this.searchForm.value}},{key:"ngOnInit",value:function(){this._initOptionLists(),this._initSubscription()}},{key:"ngOnDestroy",value:function(){this._$unsubscribe.next(),this._$unsubscribe.complete()}},{key:"checkIsInvalidDateRange",value:function(e){var t;return this._checkValid&&(!0===(null===(t=e.errors)||void 0===t?void 0:t.rangeCompare)||e.invalid)}},{key:"onSubmit",value:function(){var e=this;if(this.searchForm.invalid)return Object.keys(this.searchForm.controls).forEach((function(t){e.searchForm.controls[t].invalid&&console.log(t+" is invalid")})),void(this._checkValid=!0);var t=this.setSearchCondition(),n=this._setOtherSearchCondition(),i=["handleStatusCode","bookingCode","bookingItemCode","vendorBookingCode","bookerName","bookerId","travelerName","bookerMobileNo"],o=0;Object.keys(t).forEach((function(e){i.includes(e)&&o++})),o>1?this._alertService.alert("Booking TAG, Unified Booking Code, Booking Code, V.Booking Code, Booking Name, Booking ID, Guest Name, Mobile Number\nThese conditions cannot be used together."):(this.clickSearchEvent.emit({searchCondition:t,otherSearchInfo:n}),this._checkValid=!1)}},{key:"onReset",value:function(){this.clickResetEvent.emit()}},{key:"onChangerangeType1",value:function(e){var t=e.value;this.dateRangeTypeList2=this.dateRangeTypeList.filter((function(e){return e.detailCode!==t}));var n=this.dateRangeTypeList2[0].detailCode;this.dateRangeTypeList3=this.dateRangeTypeList.filter((function(e){return e.detailCode!==t&&e.detailCode!==n}));var i=this.dateRangeTypeList3[0].detailCode;this.searchForm.get("dateRange2").get("rangeType").setValue(n),this.searchForm.get("dateRange3").get("rangeType").setValue(i)}},{key:"onChangerangeType2",value:function(e){var t=e.value;this.dateRangeTypeList3=this.dateRangeTypeList2.filter((function(e){return e.detailCode!==t})),this.searchForm.get("dateRange3").get("rangeType").setValue(this.dateRangeTypeList2[0].detailCode)}},{key:"setSearchCondition",value:function(){var e=this._dataService.initHoReservationListOtaSearchForm(),t=Object.assign({},w.pick(this.searchForm.value,Object.keys(e)));return t.vendorCompCodes&&(t.vendorCompCodes=t.vendorCompCodes.length>0?t.vendorCompCodes:[t.vendorCompCodes]),w.omitBy(t,w.isNil)}},{key:"_setOtherSearchInfo",value:function(e){this.bookingPicUnoInputFieldValue=(null==e?void 0:e.picUnoInput)||null,this.countryInputFieldValue=(null==e?void 0:e.countryInput)||null,this.vendorCompCodesInputFieldValue=(null==e?void 0:e.vendorCompInput)||null,this.bookingCmsPmsCompCodeInputFieldValue=(null==e?void 0:e.cmsPmsCompInput)||null,this.bookerCompCodeInputFieldValue=(null==e?void 0:e.sellerCompInput)||null}},{key:"_setOtherSearchCondition",value:function(){var e={};return this.autoCopmpletes.forEach((function(t){Object.assign(e,t.getInputValue())})),e}},{key:"_setSearchFormData",value:function(e){var t=this._dataService.initHoReservationListOtaSearchForm();return this.bookingPicUnoInputFieldValue=w.isNil(null==e?void 0:e.bookingPicUno)?"":null==e?void 0:e.bookingPicUno.toString(),this.countryInputFieldValue=w.isNil(null==e?void 0:e.destinationCountryCode)?"":null==e?void 0:e.destinationCountryCode,this.vendorCompCodesInputFieldValue=w.isNil(null==e?void 0:e.vendorCompCodes)?"":null==e?void 0:e.vendorCompCodes.toString(),this.bookingCmsPmsCompCodeInputFieldValue=w.isNil(null==e?void 0:e.bookingCmsPmsCompCode)?"":null==e?void 0:e.bookingCmsPmsCompCode.toString(),this.bookerCompCodeInputFieldValue=w.isNil(null==e?void 0:e.bookerCompCode)?"":null==e?void 0:e.bookerCompCode.toString(),Object.assign({},t,w.pick(e,Object.keys(t)))}},{key:"_initDateRangeList",value:function(e){var t,n,i=null===(t=this.searchCondition)||void 0===t?void 0:t.dateRange1.rangeType,o=null===(n=this.searchCondition)||void 0===n?void 0:n.dateRange2.rangeType;this.dateRangeTypeList2=null==e?void 0:e.filter((function(e){return e.detailCode!==i})),this.dateRangeTypeList3=null==e?void 0:e.filter((function(e){return e.detailCode!==i&&e.detailCode!==o}))}},{key:"_initOptionLists",value:function(){this.regionList=[{value:"I",label:"\ud574\uc678\ud638\ud154"},{value:"D",label:"\uad6d\ub0b4\uc219\ubc15"}],this.onOffList=[{value:"O",label:"Online"},{value:"F",label:"Offline"}],this.bookerDropdownOptions=[{value:"bookerName",label:"Booker Name"},{value:"bookerId",label:"Booker ID"},{value:"travelerName",label:"Traveler"},{value:"bookerMobileNo",label:"Mobile No."}],this.domainTypeList=[{value:"www.ohmyhotel.com"},{value:"www.ohmytrip.com"},{value:"www.ohmyhotel.biz"},{value:"m.ohmytrip.com"},{value:"m.ohmyhotel.com"}],this.useYnOptions=[{value:!0,label:"Y"},{value:!1,label:"N"}]}},{key:"_initSubscription",value:function(){var e=this;this.searchForm.get("dateRange1").get("rangeType").valueChanges.pipe(Object(I.a)(this._$unsubscribe)).subscribe((function(t){e.dateRangeTypeList2=e.dateRangeTypeList?e.dateRangeTypeList.filter((function(e){return e.detailCode!==t})):[];var n=e.dateRangeTypeList2.length?e.dateRangeTypeList2[0].detailCode:null;e.searchForm.get("dateRange2").get("rangeType").setValue(n)})),this.searchForm.get("dateRange2").get("rangeType").valueChanges.pipe(Object(I.a)(this._$unsubscribe)).subscribe((function(t){e.dateRangeTypeList3=e.dateRangeTypeList2?e.dateRangeTypeList2.filter((function(e){return e.detailCode!==t})):[];var n=e.dateRangeTypeList3.length?e.dateRangeTypeList3[0].detailCode:null;e.searchForm.get("dateRange3").get("rangeType").setValue(n)})),this.searchForm.get("selectedBookerDropdown").valueChanges.pipe(Object(Be.a)(),Object(I.a)(this._$unsubscribe)).subscribe((function(){e.searchForm.get("bookerId").reset(),e.searchForm.get("travelerName").reset(),e.searchForm.get("bookerMobileNo").reset(),e.searchForm.get("bookerName").reset()}))}}]),e}()).\u0275fac=function(e){return new(e||ut)(We.Qb($e),We.Qb(Ue.a))},ut.\u0275cmp=We.Kb({type:ut,selectors:[["app-ho-reservation-list-ota-search"]],viewQuery:function(e,t){var n;1&e&&We.Xc(Fe.a,!0),2&e&&We.Dc(n=We.gc())&&(t.autoCopmpletes=n)},inputs:{stationTypeList:"stationTypeList",deviceTypeList:"deviceTypeList",bookingStatusList:"bookingStatusList",contractTypeList:"contractTypeList",paymentList:"paymentList",otherSearchInfo:"otherSearchInfo",dateRangeTypeList:"dateRangeTypeList",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:149,vars:101,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],["formGroupName","dateRange1",1,"col-2","flex-shrink1"],["formControlName","rangeType","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-shrink-0",3,"options","useAllOptionYn","onChange"],["formArrayName","dates",1,"calendar-set","flex-fill"],[1,"input","calendar","d-inline-flex","flex-fill"],[3,"for"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","formControlName"],["fromDate1",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","min","formControlName"],["toDate1",""],[1,"col-1"],[1,"form-label"],["formControlName","stationTypeCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["displayKey","value","formControlName","domainAddresses",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","selectedBookerDropdown","displayKey","label",1,"d-inline-flex","flex-shrink-0","mr5",3,"options","useAllOptionYn"],[3,"ngSwitch"],["formControlName","bookerId","class","d-inline-flex flex-fill",4,"ngSwitchCase"],["formControlName","travelerName","class","d-inline-flex flex-fill",4,"ngSwitchCase"],["formControlName","bookerMobileNo","class","d-inline-flex flex-fill",4,"ngSwitchCase"],["formControlName","bookerName","class","d-inline-flex flex-fill",4,"ngSwitchDefault"],["formGroupName","dateRange2",1,"col-2","flex-shrink1"],["fromDate2",""],["toDate2",""],["formControlName","bookingStatusCodes","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options","useAllOptionYn"],["formControlName","bookingItemCode",1,"d-inline-flex","flex-fill"],["formControlName","bookingPicUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formGroupName","dateRange3",1,"col-2","flex-shrink1"],["formControlName","rangeType","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-shrink-0",3,"options","useAllOptionYn"],["fromDate3",""],["toDate3",""],["apiUrl","admin/common/country","formControlName","destinationCountryCode","dataKey","countryCode","inputFieldFormat","[{0}] {1}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","hotelName","placeholder","Name",1,"d-inline-flex","flex-fill"],["formControlName","hotelCode","valueType","number",1,"d-inline-flex","flex-fill"],[1,"d-inline-flex","flex-fill"],["apiUrl","common/comp","formControlName","vendorCompCodes","dataKey","compCode","inputFieldFormat","[{0}] {1}","placeholder","Name",2,"width","60%",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","groupYn","label","Group Y",1,"flex-glow-0","ml5",3,"binary"],["formControlName","vendorBookingCode","placeholder","Vendor Booking Code",1,"d-inline-flex","flex-fill"],["formControlName","vendorBookingItemCode","placeholder","Hotel Confirm No",1,"d-inline-flex","flex-fill"],["displayWord","detailCodeName","dataKey","detailCode","formControlName","vendorPaymentStatusCode",1,"d-inline-flex","flex-fill",3,"options"],["apiUrl","common/comp","formControlName","bookingCmsPmsCompCode","dataKey","compCode","inputFieldFormat","{0} - {1}","placeholder","Name",1,"flex-fill",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","bookerCompCode","apiUrl","common/comp","dataKey","compCode","inputFieldFormat","{0} - {1}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","sellerBookingCode","placeholder","Seller Booking Code",1,"d-inline-flex","flex-fill"],["formControlName","cancelConfirmYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","mutualContractBookingYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","deviceTypeCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","onOffManual",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","hotelContractTypeCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],[1,"form-button-area"],["type","submit","data-function","2000032","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"],[1,"btn-searchbox-extend",3,"click"],["formControlName","bookerId",1,"d-inline-flex","flex-fill"],["formControlName","travelerName",1,"d-inline-flex","flex-fill"],["formControlName","bookerMobileNo",1,"d-inline-flex","flex-fill"],["formControlName","bookerName",1,"d-inline-flex","flex-fill"]],template:function(e,t){if(1&e&&(We.Wb(0,"form",0),We.fc("ngSubmit",(function(){return t.onSubmit()})),We.Wb(1,"div",1),We.Wb(2,"div",2),We.Wb(3,"div",3),We.Wb(4,"app-selectbox-detailcode",4),We.fc("onChange",(function(e){return t.onChangerangeType1(e)})),We.Vb(),We.Wb(5,"div",5),We.Wb(6,"div",6),We.Rb(7,"mat-datepicker-toggle",7),We.Rb(8,"input",8),We.Rb(9,"mat-datepicker",null,9),We.Vb(),We.Wb(11,"span",10),We.Pc(12,"~"),We.Vb(),We.Wb(13,"div",6),We.Rb(14,"mat-datepicker-toggle",7),We.Rb(15,"input",11),We.Rb(16,"mat-datepicker",null,12),We.Vb(),We.Vb(),We.Vb(),We.Wb(18,"div",13),We.Wb(19,"span",14),We.Pc(20,"Station"),We.Vb(),We.Rb(21,"app-selectbox-detailcode",15),We.Vb(),We.Wb(22,"div",13),We.Wb(23,"span",14),We.Pc(24,"Domain"),We.Vb(),We.Rb(25,"app-multi-select",16),We.Vb(),We.Wb(26,"div",13),We.Rb(27,"app-selectbox",17),We.Ub(28,18),We.Nc(29,at,1,0,"app-input-text",19),We.Nc(30,ct,1,0,"app-input-text",20),We.Nc(31,rt,1,0,"app-input-text",21),We.Nc(32,lt,1,0,"app-input-text",22),We.Tb(),We.Vb(),We.Vb(),We.Wb(33,"div",2),We.Wb(34,"div",23),We.Wb(35,"app-selectbox-detailcode",4),We.fc("onChange",(function(e){return t.onChangerangeType2(e)})),We.Vb(),We.Wb(36,"div",5),We.Wb(37,"div",6),We.Rb(38,"mat-datepicker-toggle",7),We.Rb(39,"input",8),We.Rb(40,"mat-datepicker",null,24),We.Vb(),We.Wb(42,"span",10),We.Pc(43,"~"),We.Vb(),We.Wb(44,"div",6),We.Rb(45,"mat-datepicker-toggle",7),We.Rb(46,"input",11),We.Rb(47,"mat-datepicker",null,25),We.Vb(),We.Vb(),We.Vb(),We.Wb(49,"div",13),We.Wb(50,"span",14),We.Pc(51,"BKG Status"),We.Vb(),We.Rb(52,"app-multi-select-detailcode",26),We.Vb(),We.Wb(53,"div",13),We.Wb(54,"span",14),We.Pc(55,"BKG Item Code"),We.Vb(),We.Rb(56,"app-input-text",27),We.Vb(),We.Wb(57,"div",13),We.Wb(58,"span",14),We.Pc(59,"BKG PIC"),We.Vb(),We.Rb(60,"app-auto-complete",28),We.Vb(),We.Vb(),We.Wb(61,"div",2),We.Wb(62,"div",29),We.Rb(63,"app-selectbox-detailcode",30),We.Wb(64,"div",5),We.Wb(65,"div",6),We.Rb(66,"mat-datepicker-toggle",7),We.Rb(67,"input",8),We.Rb(68,"mat-datepicker",null,31),We.Vb(),We.Wb(70,"span",10),We.Pc(71,"~"),We.Vb(),We.Wb(72,"div",6),We.Rb(73,"mat-datepicker-toggle",7),We.Rb(74,"input",11),We.Rb(75,"mat-datepicker",null,32),We.Vb(),We.Vb(),We.Vb(),We.Wb(77,"div",13),We.Wb(78,"span",14),We.Pc(79,"Country"),We.Vb(),We.Rb(80,"app-auto-complete",33),We.Vb(),We.Wb(81,"div",13),We.Wb(82,"span",14),We.Pc(83,"Hotel Name"),We.Vb(),We.Rb(84,"app-input-text",34),We.Vb(),We.Wb(85,"div",13),We.Wb(86,"span",14),We.Pc(87,"Hotel Code"),We.Vb(),We.Rb(88,"app-input-text",35),We.Vb(),We.Vb(),We.Wb(89,"div",2),We.Wb(90,"div",13),We.Wb(91,"span",14),We.Pc(92,"Vendor"),We.Vb(),We.Wb(93,"div",36),We.Rb(94,"app-auto-complete",37),We.Rb(95,"app-checkbox",38),We.Vb(),We.Vb(),We.Wb(96,"div",13),We.Wb(97,"span",14),We.Pc(98,"V. BKG Code"),We.Vb(),We.Rb(99,"app-input-text",39),We.Vb(),We.Wb(100,"div",13),We.Wb(101,"span",14),We.Pc(102,"CNFM No."),We.Vb(),We.Rb(103,"app-input-text",40),We.Vb(),We.Wb(104,"div",13),We.Wb(105,"span",14),We.Pc(106,"V. P. Status"),We.Vb(),We.Rb(107,"app-selectbox-detailcode",41),We.Vb(),We.Vb(),We.Wb(108,"div",2),We.Wb(109,"div",13),We.Wb(110,"span",14),We.Pc(111,"CMS/PMS"),We.Vb(),We.Rb(112,"app-auto-complete",42),We.Vb(),We.Wb(113,"div",13),We.Wb(114,"span",14),We.Pc(115,"Seller"),We.Vb(),We.Rb(116,"app-auto-complete",43),We.Vb(),We.Wb(117,"div",13),We.Wb(118,"span",14),We.Pc(119,"S.BKG Code"),We.Vb(),We.Rb(120,"app-input-text",44),We.Vb(),We.Wb(121,"div",13),We.Wb(122,"span",14),We.Pc(123,"CXL CNFM YN"),We.Vb(),We.Rb(124,"app-selectbox",45),We.Vb(),We.Vb(),We.Wb(125,"div",2),We.Wb(126,"div",13),We.Wb(127,"span",14),We.Pc(128,"Mutual YN"),We.Vb(),We.Rb(129,"app-selectbox",46),We.Vb(),We.Wb(130,"div",13),We.Wb(131,"span",14),We.Pc(132,"Device"),We.Vb(),We.Rb(133,"app-selectbox-detailcode",47),We.Vb(),We.Wb(134,"div",13),We.Wb(135,"span",14),We.Pc(136,"On/Off"),We.Vb(),We.Rb(137,"app-selectbox",48),We.Vb(),We.Wb(138,"div",13),We.Wb(139,"span",14),We.Pc(140,"Contract"),We.Vb(),We.Rb(141,"app-selectbox-detailcode",49),We.Vb(),We.Vb(),We.Vb(),We.Wb(142,"div",50),We.Wb(143,"button",51),We.Pc(144,"Search"),We.Vb(),We.Wb(145,"button",52),We.fc("click",(function(){return t.onReset()})),We.Pc(146,"Reset"),We.Vb(),We.Wb(147,"a",53),We.fc("click",(function(){return t.isShowmore=!t.isShowmore})),We.Pc(148,"\uac80\uc0c9 \uc635\uc158 \ub354\ubcf4\uae30"),We.Vb(),We.Vb(),We.Vb()),2&e){var n=We.Ec(10),i=We.Ec(17),o=We.Ec(41),a=We.Ec(48),c=We.Ec(69),r=We.Ec(76);We.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),We.Cb(4),We.pc("options",t.dateRangeTypeList)("useAllOptionYn",!1),We.Cb(1),We.Gb("valid-error",t.checkIsInvalidDateRange(t.searchForm.get("dateRange1"))),We.Cb(2),We.pc("for",n),We.Cb(1),We.pc("matDatepicker",n)("formControlName",0),We.Cb(6),We.pc("for",i),We.Cb(1),We.pc("matDatepicker",i)("min",t.dateRange1Dates[0])("formControlName",1),We.Cb(6),We.pc("options",t.stationTypeList),We.Cb(4),We.pc("options",t.domainTypeList),We.Cb(2),We.pc("options",t.bookerDropdownOptions)("useAllOptionYn",!1),We.Cb(1),We.pc("ngSwitch",t.searchForm.get("selectedBookerDropdown").value),We.Cb(1),We.pc("ngSwitchCase","bookerId"),We.Cb(1),We.pc("ngSwitchCase","travelerName"),We.Cb(1),We.pc("ngSwitchCase","bookerMobileNo"),We.Cb(4),We.pc("options",t.dateRangeTypeList2)("useAllOptionYn",!1),We.Cb(1),We.Gb("valid-error",t.checkIsInvalidDateRange(t.searchForm.get("dateRange2"))),We.Cb(2),We.pc("for",o),We.Cb(1),We.pc("matDatepicker",o)("formControlName",0),We.Cb(6),We.pc("for",a),We.Cb(1),We.pc("matDatepicker",a)("min",t.dateRange2Dates[0])("formControlName",1),We.Cb(6),We.pc("options",t.bookingStatusList)("useAllOptionYn",!0),We.Cb(8),We.pc("inputFieldValue",t.bookingPicUnoInputFieldValue)("inputId","picUnoInput")("apiCondition",We.tc(86,dt))("apiSearchTerm","name")("inputFieldFormatKeyList",We.tc(87,pt)),We.Cb(1),We.Gb("hide",!t.isShowmore),We.Cb(2),We.pc("options",t.dateRangeTypeList3)("useAllOptionYn",!1),We.Cb(1),We.Gb("valid-error",t.checkIsInvalidDateRange(t.searchForm.get("dateRange3"))),We.Cb(2),We.pc("for",c),We.Cb(1),We.pc("matDatepicker",c)("formControlName",0),We.Cb(6),We.pc("for",r),We.Cb(1),We.pc("matDatepicker",r)("min",t.dateRange3Dates[0])("formControlName",1),We.Cb(6),We.pc("inputFieldValue",t.countryInputFieldValue)("inputId","countryInput")("apiSearchTerm","keyword")("inputFieldFormatKeyList",We.tc(88,bt)),We.Cb(9),We.Gb("hide",!t.isShowmore),We.Cb(5),We.pc("inputFieldValue",t.vendorCompCodesInputFieldValue)("inputId","vendorCompInput")("apiCondition",We.uc(90,ht,We.tc(89,mt)))("apiSearchTerm","compName")("inputFieldFormatKeyList",We.tc(92,ft)),We.Cb(1),We.pc("binary",!0),We.Cb(12),We.pc("options",t.paymentList),We.Cb(1),We.Gb("hide",!t.isShowmore),We.Cb(4),We.pc("inputFieldValue",t.bookingCmsPmsCompCodeInputFieldValue)("inputId","cmsPmsCompInput")("apiCondition",We.uc(94,ht,We.tc(93,gt)))("apiSearchTerm","compName")("inputFieldFormatKeyList",We.tc(96,Ct)),We.Cb(4),We.pc("inputFieldValue",t.bookerCompCodeInputFieldValue)("inputId","sellerCompInput")("apiCondition",We.uc(98,ht,We.tc(97,vt)))("apiSearchTerm","compName")("inputFieldFormatKeyList",We.tc(100,Ct)),We.Cb(8),We.pc("options",t.useYnOptions),We.Cb(1),We.Gb("hide",!t.isShowmore),We.Cb(4),We.pc("options",t.useYnOptions),We.Cb(4),We.pc("options",t.deviceTypeList),We.Cb(4),We.pc("options",t.onOffList),We.Cb(4),We.pc("options",t.contractTypeList),We.Cb(6),We.Gb("active",t.isShowmore)}},directives:[a.B,a.s,a.k,Qe.a,a.l,qe.a,a.r,a.i,a.e,Xe.a,Je.a,a.c,Ze.a,et.a,tt.a,o.q,o.r,o.s,nt.a,it.a,Fe.a,ot.a],styles:[""],changeDetection:0}),ut),kt=((st=function(){function e(){_classCallCheck(this,e),this.changePageSizeEvent=new We.n,this.excelDownloadEvent=new We.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onChangePageSize",value:function(e){var t=e.value;this.changePageSizeEvent.emit(t)}},{key:"onClickExcel",value:function(){this.excelDownloadEvent.emit()}}]),e}()).\u0275fac=function(e){return new(e||st)},st.\u0275cmp=We.Kb({type:st,selectors:[["app-ho-reservation-list-ota-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{changePageSizeEvent:"changePageSizeEvent",excelDownloadEvent:"excelDownloadEvent"},decls:7,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],["data-function","2000036",1,"btn","btn-outline-dark","sm","d-inline-flex","flex-glow-0",3,"click"],[1,"sm","d-inline-flex","flex-glow-0","sm",3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&(We.Wb(0,"div",0),We.Wb(1,"strong",1),We.Pc(2),We.Vb(),We.Wb(3,"div",2),We.Wb(4,"button",3),We.fc("click",(function(){return t.onClickExcel()})),We.Pc(5,"Excel"),We.Vb(),We.Wb(6,"app-selectbox",4),We.fc("onChange",(function(e){return t.onChangePageSize(e)})),We.Vb(),We.Vb(),We.Vb()),2&e&&(We.Cb(2),We.Qc(t.loading?"":t.totalCount),We.Cb(4),We.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[tt.a,a.r,a.u],styles:[""],changeDetection:0}),st),Ot=n("2QGa");function St(e,t){if(1&e){var n=We.Xb();We.Wb(0,"a",27),We.fc("click",(function(){We.Fc(n);var e=t.$implicit;return We.hc().onClickBookingItemCode(e)})),We.Pc(1),We.Vb()}if(2&e){var i=t.$implicit;We.Cb(1),We.Qc(i.bookingItemCode)}}function Rt(e,t){if(1&e&&We.Pc(0),2&e){var n=t.$implicit;We.Rc(" ",n.hotelNameEn||n.hotelNameLn," ")}}function jt(e,t){if(1&e&&We.Pc(0),2&e){var n=t.$implicit;We.Sc(" ",n.checkInDate,"[",n.nightCount,"] ")}}function Lt(e,t){if(1&e&&We.Pc(0),2&e){var n=t.$implicit;We.Sc(" ",n.roomTypeNameEn,"[",n.roomCount,"] ")}}function Tt(e,t){1&e&&(We.Pc(0),We.ic(1,"number")),2&e&&We.Rc(" ",We.jc(1,1,t.$implicit.billingSumAmount)," ")}function Nt(e,t){1&e&&(We.Pc(0),We.ic(1,"number")),2&e&&We.Rc(" ",We.jc(1,1,t.$implicit.billingBalanceAmount)," ")}function It(e,t){1&e&&(We.Ub(0),We.Pc(1," Y "),We.Tb())}function wt(e,t){1&e&&(We.Ub(0),We.Pc(1," N "),We.Tb())}function Pt(e,t){if(1&e&&(We.Nc(0,It,2,0,"ng-container",28),We.Nc(1,wt,2,0,"ng-container",28)),2&e){var n=t.$implicit;We.pc("ngIf",n.mutualContractBookingYn),We.Cb(1),We.pc("ngIf",!n.mutualContractBookingYn)}}var xt,At,Vt=function(){return{allowUnsort:!0,mode:"multiple"}},_t=((At=function(){function e(){var t=this;_classCallCheck(this,e),this.pageChangeEvent=new We.n,this.sortChangeEvent=new We.n,this.checkRowEvent=new We.n,this.clickRowEvent=new We.n,this.checkAllEvent=new We.n,this.clickedRowSubject=new R.a,this.unsubscribe$=new R.a,this.getIsRowSelected=function(e){var n;return(null===(n=t.checkedRows)||void 0===n?void 0:n.indexOf(e.dataItem.rowid))>-1||e.index===t._singleClickedRowIndex}}return _createClass(e,[{key:"checkedState",get:function(){return this._checkedState},set:function(e){this._checkedState=e,this._setCheckedState()}},{key:"checkedRows",get:function(){return this._checkedRows},set:function(e){this._checkedRows=e.length>0?e:null}},{key:"gridView",get:function(){return{data:this.dataList||[],total:this.totalCount||0}}},{key:"currentPageSize",get:function(){var e;return null===(e=this.pageInfo)||void 0===e?void 0:e.take}},{key:"isAllChecked",get:function(){return this.checkedRows&&this.checkedRows.length===this.dataList.length}},{key:"checkedStateOutput",get:function(){return w.isNil(this._singleClickedRowIndex)?null:{clickedRowIndex:w.isNil(this._singleClickedRowIndex)?null:this._singleClickedRowIndex}}},{key:"thisGridState",get:function(){return{pageInfo:this.pageInfo,sortInfo:this.sortInfo}}},{key:"ngOnInit",value:function(){this._initClickSubscription()}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"onPageChange",value:function(e){this.pageChangeEvent.emit(e)}},{key:"onSortChange",value:function(e){var t=this;setTimeout((function(){t.sortChangeEvent.emit(e),t.pageChangeEvent.emit({skip:0,take:t.pageInfo.take})}),0)}},{key:"onCheckAll",value:function(e){if(e){if(!(this.dataList.length<1)){var t=this.dataList.map((function(e){return e&&e.rowid}));this.checkAllEvent.emit({isChecked:e,rowids:t})}}else this.checkAllEvent.emit({isChecked:e})}},{key:"onCheckRow",value:function(e,t){this.checkRowEvent.emit({rowid:t.rowid,isChecked:e})}},{key:"onDblClick",value:function(e){this.clickedRowItem&&(this.isDbClick=!0,this.clickedRowSubject.next("double"))}},{key:"displayRequests",value:function(e){return null==e?void 0:e.map((function(e){var t=e.requestTypeCode,n=e.requestValue,i=e.requestTypeName;return"BRQ99"===t?n:i})).join(", ")}},{key:"onClickBookingItemCode",value:function(e){this.clickedRowItem=e,this.clickedRowSubject.next("single")}},{key:"onCellClick",value:function(e){var t,n,i;0===e.columnIndex&&(null===(i=null===(n=null===(t=null==e?void 0:e.originalEvent)||void 0===t?void 0:t.target)||void 0===n?void 0:n.className)||void 0===i?void 0:i.indexOf("checkbox-control-text"))>-1||(this._singleClickedRowIndex=null==e?void 0:e.rowIndex)}},{key:"_setCheckedState",value:function(){if(this._singleClickedRowIndex=null,!w.isEmpty(this.checkedState)){var e=this.checkedState.clickedRowIndex;this._singleClickedRowIndex=w.isNil(e)?null:e}}},{key:"_initClickSubscription",value:function(){var e=this,t=this.clickedRowSubject.pipe(Object(T.a)(500),Object(I.a)(this.unsubscribe$)),n=_slicedToArray(Object(Ot.a)(t,(function(e){return"single"===e})),2),i=n[0],o=n[1];i.subscribe((function(){e.clickRowEvent.emit(w.cloneDeep(e.clickedRowItem)),e.clickedRowItem=void 0})),o.subscribe((function(){}))}}]),e}()).\u0275fac=function(e){return new(e||At)},At.\u0275cmp=We.Kb({type:At,selectors:[["app-ho-reservation-list-ota-grid"]],viewQuery:function(e,t){var n;1&e&&We.Xc(l.l,!0),2&e&&We.Dc(n=We.gc())&&(t.grid=n.first)},inputs:{loading:"loading",totalCount:"totalCount",checkedState:"checkedState",dataList:"dataList",pageInfo:"pageInfo",sortInfo:"sortInfo",checkedRows:"checkedRows"},outputs:{pageChangeEvent:"pageChangeEvent",sortChangeEvent:"sortChangeEvent",checkRowEvent:"checkRowEvent",clickRowEvent:"clickRowEvent",checkAllEvent:"checkAllEvent"},decls:34,vars:37,consts:[[1,"grid-max-height-650",3,"loading","data","resizable","reorderable","pageable","skip","pageSize","sortable","sort","selectable","rowSelected","pageChange","sortChange","cellClick"],["field","firstInsertDatetime","title","Booking Date",3,"width"],["field","stationTypeName","title","Station",3,"width"],["field","bookingItemCode","title","Booking Item Code",3,"width"],["kendoGridCellTemplate",""],["field","bookingStatusName","title","Booking Status",3,"width"],["field","hotelNameEn","title","Hotel Name","format","{0:n}",3,"width"],["field","clientCancelDeadline","title","Client Cancel D/L",3,"width"],["field","checkInDate","title","C/ In Date & Nts",3,"width"],["field","roomCount","title","Room Type & Count",3,"width"],["field","travelerName","title","1st Traveler Name",3,"width"],["field","billingSumAmount","title","Billing Sum Amt",3,"width"],["field","billingBalanceAmount","title","Billing Balance",3,"width"],["field","cancelDatetime","title","BKG Cancel Date",3,"width"],["field","bookerCompName","title","Seller Name",3,"width"],["field","sellerBookingCode","title","Seller BKG Code",3,"width"],["field","vendorCompName","title","Vendor Name",3,"width"],["field","vendorBookingCode","title","Vendor BKG Code",3,"width"],["field","vendorBookingItemCode","title","Vendor CNFM No.",3,"width"],["field","vendorPaymentStatusName","title","V.Payment Status",3,"width"],["field","hotelContractTypeName","title","Contract Type",3,"width"],["field","bookingCmsPmsCompName","title","CMS/PMS Name",3,"width"],["field","sendCmsPmsCompName","title","Notify CMS/PMS",3,"width"],["field","mutualContractBookingYn","title","Mutual YN",3,"width"],["field","domainAddress","title","B2C BKG Domain",3,"width"],["field","cancelConfirmUno","title","Cancel Confirm User",3,"width"],["field","cancelConfirmNo","title","Cancel Cofirm No.",3,"width"],[1,"text-underline",3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&(We.Wb(0,"kendo-grid",0),We.fc("pageChange",(function(e){return t.onPageChange(e)}))("sortChange",(function(e){return t.onSortChange(e)}))("cellClick",(function(e){return t.onCellClick(e)})),We.Rb(1,"kendo-grid-column",1),We.Rb(2,"kendo-grid-column",2),We.Wb(3,"kendo-grid-column",3),We.Nc(4,St,2,1,"ng-template",4),We.Vb(),We.Rb(5,"kendo-grid-column",5),We.Wb(6,"kendo-grid-column",6),We.Nc(7,Rt,1,1,"ng-template",4),We.Vb(),We.Rb(8,"kendo-grid-column",7),We.Wb(9,"kendo-grid-column",8),We.Nc(10,jt,1,2,"ng-template",4),We.Vb(),We.Pc(11,"+ "),We.Wb(12,"kendo-grid-column",9),We.Nc(13,Lt,1,2,"ng-template",4),We.Vb(),We.Rb(14,"kendo-grid-column",10),We.Wb(15,"kendo-grid-column",11),We.Nc(16,Tt,2,3,"ng-template",4),We.Vb(),We.Wb(17,"kendo-grid-column",12),We.Nc(18,Nt,2,3,"ng-template",4),We.Vb(),We.Rb(19,"kendo-grid-column",13),We.Rb(20,"kendo-grid-column",14),We.Rb(21,"kendo-grid-column",15),We.Rb(22,"kendo-grid-column",16),We.Rb(23,"kendo-grid-column",17),We.Rb(24,"kendo-grid-column",18),We.Rb(25,"kendo-grid-column",19),We.Rb(26,"kendo-grid-column",20),We.Rb(27,"kendo-grid-column",21),We.Rb(28,"kendo-grid-column",22),We.Wb(29,"kendo-grid-column",23),We.Nc(30,Pt,2,2,"ng-template",4),We.Vb(),We.Rb(31,"kendo-grid-column",24),We.Rb(32,"kendo-grid-column",25),We.Rb(33,"kendo-grid-column",26),We.Vb()),2&e&&(We.pc("loading",t.loading)("data",t.gridView)("resizable",!0)("reorderable",!0)("pageable",!0)("skip",t.pageInfo.skip)("pageSize",t.pageInfo.take)("sortable",We.tc(36,Vt))("sort",t.sortInfo)("selectable",!0)("rowSelected",t.getIsRowSelected),We.Cb(1),We.pc("width",100),We.Cb(1),We.pc("width",70),We.Cb(1),We.pc("width",140),We.Cb(2),We.pc("width",120),We.Cb(1),We.pc("width",90),We.Cb(2),We.pc("width",120),We.Cb(1),We.pc("width",120),We.Cb(3),We.pc("width",140),We.Cb(2),We.pc("width",130),We.Cb(1),We.pc("width",120),We.Cb(2),We.pc("width",120),We.Cb(2),We.pc("width",120),We.Cb(1),We.pc("width",100),We.Cb(1),We.pc("width",120),We.Cb(1),We.pc("width",100),We.Cb(1),We.pc("width",130),We.Cb(1),We.pc("width",130),We.Cb(1),We.pc("width",120),We.Cb(1),We.pc("width",120),We.Cb(1),We.pc("width",120),We.Cb(1),We.pc("width",120),We.Cb(1),We.pc("width",80),We.Cb(2),We.pc("width",130),We.Cb(1),We.pc("width",140),We.Cb(1),We.pc("width",140))},directives:[l.l,l.d,l.c,o.o],pipes:[o.f],styles:[""],changeDetection:0}),At),Dt=((xt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||xt)},xt.\u0275cmp=We.Kb({type:xt,selectors:[["app-ho-reservation-list-ota-summary"]],inputs:{summary:"summary",totalCount:"totalCount"},decls:80,vars:36,consts:[[1,"table","table-bordered","mt30"],["width","8%"],["scope","row",1,"th-bg"]],template:function(e,t){1&e&&(We.Wb(0,"div",0),We.Wb(1,"table"),We.Wb(2,"caption"),We.Pc(3," \ud638\ud154 OTA \ud1b5\ud569\uc608\uc57d\uc870\ud68c summary "),We.Vb(),We.Wb(4,"colgroup"),We.Rb(5,"col",1),We.Rb(6,"col",1),We.Rb(7,"col",1),We.Rb(8,"col",1),We.Rb(9,"col",1),We.Rb(10,"col",1),We.Rb(11,"col",1),We.Rb(12,"col",1),We.Rb(13,"col",1),We.Rb(14,"col",1),We.Rb(15,"col",1),We.Rb(16,"col",1),We.Vb(),We.Wb(17,"tbody"),We.Wb(18,"tr"),We.Wb(19,"th",2),We.Pc(20,"\ucd1d \uac74\uc218"),We.Vb(),We.Wb(21,"td"),We.Pc(22),We.ic(23,"number"),We.Vb(),We.Wb(24,"th",2),We.Pc(25,"\ucd1d\uc0c1\ud488\uac00"),We.Vb(),We.Wb(26,"td"),We.Pc(27),We.ic(28,"number"),We.Vb(),We.Wb(29,"th",2),We.Pc(30,"\ucd1d \uacf5\uae09\uac00"),We.Vb(),We.Wb(31,"td"),We.Pc(32),We.ic(33,"number"),We.Vb(),We.Wb(34,"th",2),We.Pc(35,"\uacb0\uc81c\uae08\uc561"),We.Vb(),We.Wb(36,"td"),We.Pc(37),We.ic(38,"number"),We.Vb(),We.Wb(39,"th",2),We.Pc(40,"\ucd1d \uc778\uc6d0"),We.Vb(),We.Wb(41,"td"),We.Pc(42),We.ic(43,"number"),We.Vb(),We.Wb(44,"th",2),We.Pc(45,"\ub8f8\ub098\uc787"),We.Vb(),We.Wb(46,"td"),We.Pc(47),We.ic(48,"number"),We.Vb(),We.Vb(),We.Wb(49,"tr"),We.Wb(50,"th",2),We.Pc(51,"\ud504\ub85c\ubaa8\uc158"),We.Vb(),We.Wb(52,"td"),We.Pc(53),We.ic(54,"number"),We.Vb(),We.Wb(55,"th",2),We.Pc(56,"\ucfe0\ud3f0\ud560\uc778"),We.Vb(),We.Wb(57,"td"),We.Pc(58),We.ic(59,"number"),We.Vb(),We.Wb(60,"th",2),We.Pc(61,"\ud310\ub9e4\uac00"),We.Vb(),We.Wb(62,"td"),We.Pc(63),We.ic(64,"number"),We.Vb(),We.Wb(65,"th",2),We.Pc(66,"\uc218\uc775"),We.Vb(),We.Wb(67,"td"),We.Pc(68),We.ic(69,"number"),We.Vb(),We.Wb(70,"th",2),We.Pc(71,"\ucee4\ubbf8\uc158(\uc81c)\uae08\uc561"),We.Vb(),We.Wb(72,"td"),We.Pc(73),We.ic(74,"number"),We.Vb(),We.Wb(75,"th",2),We.Pc(76,"\uc2e4\uc218\uc775"),We.Vb(),We.Wb(77,"td"),We.Pc(78),We.ic(79,"number"),We.Vb(),We.Vb(),We.Vb(),We.Vb(),We.Vb()),2&e&&(We.Cb(22),We.Qc(We.jc(23,12,t.totalCount)),We.Cb(5),We.Qc(We.jc(28,14,null==t.summary?null:t.summary.salesAmount)),We.Cb(5),We.Qc(We.jc(33,16,null==t.summary?null:t.summary.sumNetAmount)),We.Cb(5),We.Qc(We.jc(38,18,null==t.summary?null:t.summary.paidAmount)),We.Cb(5),We.Qc(We.jc(43,20,null==t.summary?null:t.summary.travelerCount)),We.Cb(5),We.Qc(We.jc(48,22,null==t.summary?null:t.summary.roomNightCount)),We.Cb(6),We.Qc(We.jc(54,24,null==t.summary?null:t.summary.discountAmount)),We.Cb(5),We.Qc(We.jc(59,26,null==t.summary?null:t.summary.couponAmount)),We.Cb(5),We.Qc(We.jc(64,28,null==t.summary?null:t.summary.sumAmount)),We.Cb(5),We.Qc(We.jc(69,30,null==t.summary?null:t.summary.revenueNetAmount)),We.Cb(5),We.Qc(We.jc(74,32,null==t.summary?null:t.summary.affiliateCommAmount)),We.Cb(5),We.Qc(We.jc(79,34,null==t.summary?null:t.summary.revenueAmount)))},pipes:[o.f],encapsulation:2,changeDetection:0}),xt),Wt=n("7G9D"),Ft=n("bMKz"),Bt=n("UIHd");function Et(e,t){if(1&e){var n=We.Xb();We.Wb(0,"a",12),We.fc("click",(function(){We.Fc(n);var e=t.$implicit;return We.hc().onClickBookingItemCode(e)})),We.Pc(1),We.Vb()}if(2&e){var i=t.$implicit;We.Cb(1),We.Qc(i.bookingItemCode)}}function Mt(e,t){if(1&e&&We.Pc(0),2&e){var n=t.$implicit;We.Rc(" ",n.hotelNameEn||n.hotelNameLn,"\n")}}function $t(e,t){if(1&e&&(We.Pc(0),We.Wb(1,"span",13),We.Pc(2),We.Vb()),2&e){var n=t.$implicit;We.Rc(" ",n.checkInDate," "),We.Cb(2),We.Rc("[",n.nightCount,"]")}}function Ht(e,t){if(1&e&&(We.Pc(0),We.Wb(1,"span",13),We.Pc(2),We.Vb()),2&e){var n=t.$implicit;We.Rc(" ",n.roomTypeNameEn,""),We.Cb(2),We.Rc("[",n.roomCount,"]")}}function Yt(e,t){if(1&e&&(We.Pc(0),We.ic(1,"number")),2&e){var n=t.$implicit;We.Sc(" ",n.billingCurrencyCode," ",We.jc(1,2,n.billingSumAmount),"\n")}}function Kt(e,t){if(1&e&&(We.Pc(0),We.ic(1,"number")),2&e){var n=t.$implicit;We.Sc(" ",n.billingCurrencyCode," ",We.jc(1,2,n.billingBalanceAmount),"\n")}}function zt(e,t){1&e&&(We.Ub(0),We.Pc(1," Y "),We.Tb())}function Gt(e,t){1&e&&(We.Ub(0),We.Pc(1," N "),We.Tb())}function Ut(e,t){if(1&e&&(We.Nc(0,zt,2,0,"ng-container",14),We.Nc(1,Gt,2,0,"ng-container",14)),2&e){var n=t.$implicit;We.pc("ngIf",n.mutualContractBookingYn),We.Cb(1),We.pc("ngIf",!n.mutualContractBookingYn)}}function Qt(e,t){if(1&e&&(We.Ub(0),We.Wb(1,"span",17),We.Pc(2),We.Vb(),We.Tb()),2&e){var n=We.hc().$implicit;We.Cb(2),We.Qc(n.bookingStatusName)}}function qt(e,t){if(1&e&&We.Pc(0),2&e){var n=We.hc().$implicit;We.Rc(" ",n.bookingStatusName," ")}}function Xt(e,t){if(1&e&&(We.Nc(0,Qt,3,1,"ng-container",15),We.Nc(1,qt,1,1,"ng-template",null,16,We.Oc)),2&e){var n=t.$implicit,i=We.Ec(2);We.pc("ngIf","BKS03"===n.bookingStatusCode||"BKS04"===n.bookingStatusCode||"BKS03"===n.bookingStatusCode||"BKS12"===n.bookingStatusCode||"BKS14"===n.bookingStatusCode||"BKS19"===n.bookingStatusCode)("ngIfElse",i)}}var Jt,Zt,en,tn,nn=function(e,t,n,i,o,a,c,r){return{bookingItemCodeTpl:e,hotelNameTpl:t,checkInDateTpl:n,roomCountTpl:i,billingSumAmountTpl:o,billingBalanceAmountTpl:a,mutualContractBookingYnTpl:c,statusTpl:r}},on=((Jt=function(){function e(t,n,o,a,c){_classCallCheck(this,e),this.store=t,this._dataService=n,this._fileService=o,this.authStore=a,this.UserConditionService=c,this._$unsubscribe=new R.a,this.columns=this._dataService.generateGridColumns(),this.pageSize$=t.pipe(Object(r.u)(Ae)),this.dateRangeTypeList$=t.pipe(Object(r.u)(ye)),this.stationTypeList$=t.pipe(Object(r.u)(ke)),this.deviceTypeList$=t.pipe(Object(r.u)(Oe)),this.bookingStatusList$=t.pipe(Object(r.u)(Se)),this.contractTypeList$=t.pipe(Object(r.u)(Re)),this.mainLoading$=t.pipe(Object(r.u)(Ne)),this.searchCondition$=t.pipe(Object(r.u)(Le)),this.otherSearchInfo$=t.pipe(Object(r.u)(Te)),this.mainDataList$=t.pipe(Object(r.u)(Ie)),this.mainSummaryInfo$=t.pipe(Object(r.u)(we)),this.mainDataTotalCount$=t.pipe(Object(r.u)(Pe)),this.gridState$=t.pipe(Object(r.u)(xe)),this.paymentStatusList$=t.pipe(Object(r.u)(je)),this.storeId$=a.pipe(Object(r.u)(Ve.o)),t.dispatch(i.initThisStateAction())}return _createClass(e,[{key:"ngAfterContentInit",value:function(){this._requestCommonDetailCodes(),this._initSubscription()}},{key:"ngOnInit",value:function(){var e=this;this._initSearchCondition(),this.storeId$.subscribe((function(t){return e._storeId=t}))}},{key:"ngOnDestroy",value:function(){this._$unsubscribe.next(),this._$unsubscribe.complete()}},{key:"gridPageChangeHandler",value:function(e){this._isSearchClick=!0,this.store.dispatch(i.changeMainListPageIndexAction({pageIndex:e}))}},{key:"changePageSizeHandler",value:function(e){this._isSearchClick=!0,this.store.dispatch(i.changeMainListPageSizeAction({pageSize:e})),this.store.dispatch(i.changeMainListPageIndexAction({pageIndex:0}))}},{key:"clickOffRegistHandler",value:function(){this.store.dispatch(i.openOffRegistPopup())}},{key:"closeOffRegistHandler",value:function(){this.store.dispatch(i.closeOffRegistPopup())}},{key:"clickAssignPicHandler",value:function(){this.store.dispatch(i.openAssignPicModalAction())}},{key:"closeAssignPicHandler",value:function(){this.store.dispatch(i.closeAssignPicModalAction())}},{key:"submitAssignPicHandler",value:function(e){var t=w.cloneDeep(e);this.store.dispatch(i.updateAssignPicItems({updateCondition:t})),this.closeAssignPicHandler()}},{key:"clickSearchHandler",value:function(e){var t=e.searchCondition,n=e.otherSearchInfo;this._isSearchClick=!0,this.store.dispatch(i.changeSearchConditionAction({searchCondition:t,otherSearchInfo:n})),this.store.dispatch(i.changeMainListPageIndexAction({pageIndex:0}))}},{key:"clickResetHandler",value:function(){var e=this._dataService.initHoReservationListOtaSearchForm();this.store.dispatch(i.changeSearchConditionAction({searchCondition:e,otherSearchInfo:null}))}},{key:"excelDownloadHandler",value:function(){var e=this._setSearchCondition(this.searchFormEl.formValue);this._fileService.fileDownload({url:De.excelDownload,filename:"\ud638\ud154\uc608\uc57d\uc870\ud68c\ub9ac\uc2a4\ud2b8",type:"excel",params:e,requestMethod:"post"})}},{key:"onClickBookingItemCode",value:function(e){window.open("".concat(window.location.origin,"/reservation/hotel/").concat(e.bookingItemCode,"?tabName=BOOKING_DETAIL"),"_blank","height=950,width=1800,left=0,top=0,toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=no,status=no")}},{key:"gridStateChangeHandler",value:function(e){this._isSearchClick=!0,this.store.dispatch(i.setGridStateAction({gridState:e}))}},{key:"_initSubscription",value:function(){var e=this;if(Object(j.a)([this.searchCondition$,this.gridState$]).pipe(Object(L.a)(1),Object(T.a)(200),Object(N.a)((function(){return!0===e._isSearchClick})),Object(I.a)(this._$unsubscribe)).subscribe((function(t){var n=_slicedToArray(t,2),o=n[0],a=n[1].pageInfo,c=[a.skip,a.skip+a.take],r=Object.assign({},e._setSearchCondition(o),{limits:c});e._isSearchClick=!1,e.store.dispatch(i.loadMainListAction({condition:r}))})),this.searchCondition$.subscribe((function(t){return e._searchCondition=t})),this.mainDataList$.subscribe((function(t){return e._searchGridDataList=t})),this.otherSearchInfo$.subscribe((function(t){return e._otherSearchInfo=t})),0===w.size(this._searchCondition)&&0===w.size(this._searchGridDataList)){var t=this._dataService.initHoReservationListOtaSearchForm(),n=this.UserConditionService.selectSearchSetting(t,this._storeId,this._otherSearchInfo);this.store.dispatch(i.changeSearchConditionAction({searchCondition:n[0],otherSearchInfo:n[1]}))}}},{key:"_setSearchCondition",value:function(e){var t=(e.dateRange2.dates.some((function(e){return w.isNil(e)}))?null:e.dateRange2.dates)&&e.dateRange2,n=e.dateRange3.dates.some((function(e){return w.isNil(e)}))?null:e.dateRange3.dates,i=Object.assign({},e,{dateRange2:t,dateRange3:n&&e.dateRange3});return w.omitBy(i,w.isNil)}},{key:"_requestCommonDetailCodes",value:function(){this.store.dispatch(i.loadDateRangeTypeAction({condition:{masterCode:"HO017"}})),this.store.dispatch(i.loadStationTypeAction({condition:{masterCode:"BS002"}})),this.store.dispatch(i.loadDeviceTypeAction({condition:{masterCode:"BS037"}})),this.store.dispatch(i.loadBookingStatusAction({condition:{masterCode:"BK001",referCode1:"IC02"}})),this.store.dispatch(i.loadContractTypeAction({condition:{masterCode:"HO023"}})),this.store.dispatch(i.loadPaymentStatusListAction({condition:{masterCode:"BK014"}}))}},{key:"_initSearchCondition",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Jt)(We.Qb(r.h),We.Qb($e),We.Qb(Wt.a),We.Qb(r.h),We.Qb(Ft.a))},Jt.\u0275cmp=We.Kb({type:Jt,selectors:[["app-ho-reservation-list-ota"]],viewQuery:function(e,t){var n;1&e&&(We.Xc(yt,!0),We.Xc(_t,!0)),2&e&&(We.Dc(n=We.gc())&&(t.searchFormEl=n.first),We.Dc(n=We.gc())&&(t.gridEl=n.first))},decls:35,vars:58,consts:[[3,"searchCondition","dateRangeTypeList","stationTypeList","deviceTypeList","bookingStatusList","contractTypeList","paymentList","otherSearchInfo","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","changePageSizeEvent","excelDownloadEvent"],["bookingItemCodeTpl",""],["hotelNameTpl",""],["checkInDateTpl",""],["roomCountTpl",""],["billingSumAmountTpl",""],["billingBalanceAmountTpl",""],["mutualContractBookingYnTpl",""],["statusTpl",""],[3,"gridLoading","columns","gridState","totalCount","checkboxUseYn","dataList","sortable","templates","stateChangeEvent"],["gridEl",""],[1,"text-underline",3,"click"],[2,"font-weight","bold"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["others",""],[1,"color-red"]],template:function(e,t){if(1&e&&(We.Wb(0,"app-ho-reservation-list-ota-search",0),We.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),We.ic(1,"async"),We.ic(2,"async"),We.ic(3,"async"),We.ic(4,"async"),We.ic(5,"async"),We.ic(6,"async"),We.ic(7,"async"),We.ic(8,"async"),We.Vb(),We.Wb(9,"app-ho-reservation-list-ota-control",1),We.fc("changePageSizeEvent",(function(e){return t.changePageSizeHandler(e)}))("excelDownloadEvent",(function(){return t.excelDownloadHandler()})),We.ic(10,"async"),We.ic(11,"async"),We.ic(12,"async"),We.Vb(),We.Nc(13,Et,2,1,"ng-template",null,2,We.Oc),We.Nc(15,Mt,1,1,"ng-template",null,3,We.Oc),We.Nc(17,$t,3,2,"ng-template",null,4,We.Oc),We.Nc(19,Ht,3,2,"ng-template",null,5,We.Oc),We.Nc(21,Yt,2,4,"ng-template",null,6,We.Oc),We.Nc(23,Kt,2,4,"ng-template",null,7,We.Oc),We.Nc(25,Ut,2,2,"ng-template",null,8,We.Oc),We.Nc(27,Xt,3,2,"ng-template",null,9,We.Oc),We.Wb(29,"app-grid-simple",10,11),We.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)})),We.ic(31,"async"),We.ic(32,"async"),We.ic(33,"async"),We.ic(34,"async"),We.Vb()),2&e){var n=We.Ec(14),i=We.Ec(16),o=We.Ec(18),a=We.Ec(20),c=We.Ec(22),r=We.Ec(24),l=We.Ec(26),s=We.Ec(28);We.pc("searchCondition",We.jc(1,19,t.searchCondition$))("dateRangeTypeList",We.jc(2,21,t.dateRangeTypeList$))("stationTypeList",We.jc(3,23,t.stationTypeList$))("deviceTypeList",We.jc(4,25,t.deviceTypeList$))("bookingStatusList",We.jc(5,27,t.bookingStatusList$))("contractTypeList",We.jc(6,29,t.contractTypeList$))("paymentList",We.jc(7,31,t.paymentStatusList$))("otherSearchInfo",We.jc(8,33,t.otherSearchInfo$)),We.Cb(9),We.pc("loading",We.jc(10,35,t.mainLoading$))("currentPageSize",We.jc(11,37,t.pageSize$))("totalCount",We.jc(12,39,t.mainDataTotalCount$)),We.Cb(20),We.pc("gridLoading",We.jc(31,41,t.mainLoading$))("columns",t.columns)("gridState",We.jc(32,43,t.gridState$))("totalCount",We.jc(33,45,t.mainDataTotalCount$))("checkboxUseYn",!1)("dataList",We.jc(34,47,t.mainDataList$))("sortable",!0)("templates",We.Bc(49,nn,n,i,o,a,c,r,l,s))}},directives:[yt,kt,Bt.a,o.o],pipes:[o.b,o.f],encapsulation:2,changeDetection:0}),Jt),an=[{path:"",component:on}],cn=((Zt=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=We.Ob({type:Zt}),Zt.\u0275inj=We.Nb({factory:function(e){return new(e||Zt)},imports:[[S.f.forChild(an)],S.f]}),Zt),rn=n("bOdf"),ln=n("zp1y"),sn=n("IzEk"),un=n("lJxs"),dn=n("JIr8"),pn=n("vkgz"),bn=n("Xb6A"),mn=((en=function(){function e(t,n,o,a,r){var l=this;_classCallCheck(this,e),this._actions=t,this._apiService=n,this._errorService=o,this._alertService=a,this._store=r,this.loadDateRangeType$=Object(c.c)((function(){return l._actions.pipe(Object(c.d)(i.loadDateRangeTypeAction),Object(rn.a)((function(e){return Object(He.a)(e).pipe(Object(ln.a)(l.dateRangeTypeList$.pipe(Object(sn.a)(1))))})),Object(Ke.a)((function(e){var t=_slicedToArray(e,2),n=t[0].condition,o=t[1];return w.isNil(o)||0===o.length?l._apiService.getCommonDetailCodeList(n).pipe(Object(un.a)((function(e){return i.loadDateRangeTypeSuccessAction({dataList:e})})),Object(dn.a)((function(e){var t="DateRangeType list lookup failed.",n=[i.loadDateRangeTypeFailureAction({error:t})];return l._catchErr(e,t,n),[]}))):Object(He.a)(i.loadDateRangeTypeSuccessAction({dataList:o}))})))})),this.loadStationType$=Object(c.c)((function(){return l._actions.pipe(Object(c.d)(i.loadStationTypeAction),Object(rn.a)((function(e){return Object(He.a)(e).pipe(Object(ln.a)(l.stationTypeList$.pipe(Object(sn.a)(1))))})),Object(Ke.a)((function(e){var t=_slicedToArray(e,2),n=t[0].condition,o=t[1];return w.isNil(o)||0===o.length?l._apiService.getCommonDetailCodeList(n).pipe(Object(un.a)((function(e){return i.loadStationTypeSuccessAction({dataList:e})})),Object(dn.a)((function(e){var t="The StationType list lookup failed.",n=[i.loadStationTypeFailureAction({error:t})];return l._catchErr(e,t,n),[]}))):Object(He.a)(i.loadStationTypeSuccessAction({dataList:o}))})))})),this.loadDeviceType$=Object(c.c)((function(){return l._actions.pipe(Object(c.d)(i.loadDeviceTypeAction),Object(rn.a)((function(e){return Object(He.a)(e).pipe(Object(ln.a)(l.deviceTypeList$.pipe(Object(sn.a)(1))))})),Object(Ke.a)((function(e){var t=_slicedToArray(e,2),n=t[0].condition,o=t[1];return w.isNil(o)||0===o.length?l._apiService.getCommonDetailCodeList(n).pipe(Object(un.a)((function(e){return i.loadDeviceTypeSuccessAction({dataList:e})})),Object(dn.a)((function(e){var t="The DeviceType list lookup failed.",n=[i.loadDeviceTypeFailureAction({error:t})];return l._catchErr(e,t,n),[]}))):Object(He.a)(i.loadDeviceTypeSuccessAction({dataList:o}))})))})),this.loadBookingStatus$=Object(c.c)((function(){return l._actions.pipe(Object(c.d)(i.loadBookingStatusAction),Object(rn.a)((function(e){return Object(He.a)(e).pipe(Object(ln.a)(l.bookingStatusList$.pipe(Object(sn.a)(1))))})),Object(Ke.a)((function(e){var t=_slicedToArray(e,2),n=t[0].condition,o=t[1];return w.isNil(o)||0===o.length?l._apiService.getCommonDetailCodeList(n).pipe(Object(un.a)((function(e){return i.loadBookingStatusSuccessAction({dataList:e})})),Object(dn.a)((function(e){var t="The BookingStatus list lookup failed.",n=[i.loadBookingStatusFailureAction({error:t})];return l._catchErr(e,t,n),[]}))):Object(He.a)(i.loadBookingStatusSuccessAction({dataList:o}))})))})),this.loadMainList$=Object(c.c)((function(){return l._actions.pipe(Object(c.d)(i.loadMainListAction),Object(Ke.a)((function(e){var t=e.condition;return t=w.omit(t,["selectedBookerDropdown"]),l._apiService.getMainList(t).pipe(Object(un.a)((function(e){return i.loadMainListSuccessAction({dataCollection:e})})),Object(dn.a)((function(e){var t="List lookup failed. Please try again in a momentarily.",n=[i.loadMainListFailureAction({error:t})];return l._catchErr(e,t,n),[]})))})))})),this.updateAssignPicItems$=Object(c.c)((function(){return l._actions.pipe(Object(c.d)(i.updateAssignPicItems),Object(Ke.a)((function(e){var t=e.updateCondition;return l._apiService.updateAssignPicItems(t).pipe(Object(un.a)((function(e){return{succeedYn:!0,updateList:e}})),Object(dn.a)((function(e){return Object(He.a)({succeedYn:!1,error:e})})))})),Object(pn.a)((function(e){var t=e.succeedYn,n=e.error,o=e.updateList;if(t){var a=[i.updateAssignPicItemsSuccess({updateList:o}),i.closeAssignPicModalAction()];l._runPage("The bulk change of assignee was successful.",a)}else{var c="The bulk change of assignee failed.",r=[i.updateAssignPicItemsFailure({error:c})];l._catchErr(n,c,r)}})))}),{dispatch:!1}),this.loadPaymentStatusList$=Object(c.c)((function(){return l._actions.pipe(Object(c.d)(i.loadPaymentStatusListAction),Object(Ke.a)((function(e){var t=e.condition;return l._apiService.getCommonDetailCodeList(t).pipe(Object(un.a)((function(e){return i.loadPaymentStatusListSuccessAction({dataList:e})})),Object(dn.a)((function(e){return l._catchErr(e,"List lookup failed. Please try again in a momentarily.",[]),[]})))})))})),this.loadContractTypeAction$=Object(c.c)((function(){return l._actions.pipe(Object(c.d)(i.loadContractTypeAction),Object(Ke.a)((function(e){var t=e.condition;return l._apiService.getCommonDetailCodeList(t).pipe(Object(un.a)((function(e){return i.loadContractTypesSuccessAction({dataList:e})})),Object(dn.a)((function(e){return l._catchErr(e,"List lookup failed. Please try again in a momentarily.",[]),[]})))})))})),this.dateRangeTypeList$=this._store.select(ye),this.stationTypeList$=this._store.select(ke),this.deviceTypeList$=this._store.select(Oe),this.bookingStatusList$=this._store.select(Se)}return _createClass(e,[{key:"_runPage",value:function(e,t){var n=this;this._alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?function(){t.forEach((function(e){n._store.dispatch(e)}))}:function(){}})}},{key:"_catchErr",value:function(e,t,n){var i=this,o=this._errorService.errorHandler(e,t);w.isNil(o)||(w.isNil(o.accept)&&(o.accept=(null==n?void 0:n.length)>0?function(){n.forEach((function(e){i._store.dispatch(e)}))}:function(){}),this._alertService.alert(o))}}]),e}()).\u0275fac=function(e){return new(e||en)(We.bc(c.a),We.bc(Ge),We.bc(bn.a),We.bc(Ue.a),We.bc(r.h))},en.\u0275prov=We.Mb({token:en,factory:en.\u0275fac}),en),hn=n("w8np"),fn=n("YH7L"),gn=n("FGZR"),Cn=[on],vn=[yt,kt,_t,Dt],yn=((tn=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=We.Ob({type:tn}),tn.\u0275inj=We.Nb({factory:function(e){return new(e||tn)},imports:[[o.c,a.m,a.w,l.m,s.a,u.a,d.a,p.a,b.a,m.a,h.a,f.a,g.a,C.a,v.a,y.a,k.a,O.a,cn,fn.a,gn.a,r.j.forFeature("hoReservationListOta",he),c.b.forFeature([mn]),hn.a]]}),tn)}}]);