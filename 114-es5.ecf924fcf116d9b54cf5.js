function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,c=!1,a=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(s){c=!0,a=s}finally{try{n||null==r.return||r.return()}finally{if(c)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{htEk:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("ofXK"),c=i("3Pt+"),a=i("WG3B"),o=i("wPo9"),r=i("7rOj"),s=i("l1P7"),l=i("fXoL"),u=function(){var e=_createClass((function e(){_classCallCheck(this,e)}));return e.\u0275mod=l.Ob({type:e}),e.\u0275inj=l.Nb({factory:function(t){return new(t||e)},imports:[[n.c,c.m,c.w,a.m,o.a,r.a,s.a]]}),e}()},"o+sh":function(e,t,i){"use strict";i.r(t),i.d(t,"CONTAINERS",(function(){return zn})),i.d(t,"COMPONENTS",(function(){return Qn})),i.d(t,"FlSalesReportModule",(function(){return Kn}));var n={};i.r(n),i.d(n,"loadUserCompBasis",(function(){return U})),i.d(n,"loadUserCompBasisSuccess",(function(){return Y})),i.d(n,"loadUserCompBasisFailure",(function(){return G})),i.d(n,"changePageIndex",(function(){return H})),i.d(n,"setGridStateAction",(function(){return z})),i.d(n,"changeSearchConditionAction",(function(){return Q})),i.d(n,"setDeptList",(function(){return K}));var c={};i.r(c),i.d(c,"initThisState",(function(){return fe})),i.d(c,"changeSearchCondition",(function(){return he})),i.d(c,"loadList",(function(){return me})),i.d(c,"getListSuccess",(function(){return ge})),i.d(c,"getListFailure",(function(){return Ce})),i.d(c,"changePageSize",(function(){return Oe})),i.d(c,"changePageIndex",(function(){return ve})),i.d(c,"setGridStateAction",(function(){return ke})),i.d(c,"setGridCheckStateAction",(function(){return Se})),i.d(c,"mapDsr",(function(){return je})),i.d(c,"mapDsrSuccess",(function(){return ye}));var a={};i.r(a),i.d(a,"initComponent",(function(){return at})),i.d(a,"loadDateRangeTypeList",(function(){return ot})),i.d(a,"getDateRangeTypeListSuccessAction",(function(){return rt})),i.d(a,"loadStationList",(function(){return st})),i.d(a,"getStationListSuccess",(function(){return lt})),i.d(a,"loadBillingTypeList",(function(){return ut})),i.d(a,"getBillingTypeListSuccess",(function(){return pt})),i.d(a,"loadEtEmdOtherTypeList",(function(){return dt})),i.d(a,"getEtEmdOtherTypeListSuccess",(function(){return bt})),i.d(a,"loadGdsCompList",(function(){return ft})),i.d(a,"getGdsCompListSuccess",(function(){return ht})),i.d(a,"loadControlBranchTypeList",(function(){return mt})),i.d(a,"getControlBranchTypeListSuccess",(function(){return gt})),i.d(a,"loadTicketVoidTypeList",(function(){return Ct})),i.d(a,"getTicketVoidTypeListSuccess",(function(){return Ot})),i.d(a,"loadFopCodeList",(function(){return vt})),i.d(a,"getFopCodeListSuccess",(function(){return kt})),i.d(a,"loadAffiliateCompList",(function(){return St})),i.d(a,"getAffiliateCompListSuccess",(function(){return jt})),i.d(a,"loadCheckItemList",(function(){return yt})),i.d(a,"getCheckItemListSuccess",(function(){return Lt})),i.d(a,"loadUploadFileTypeListAction",(function(){return Dt})),i.d(a,"getUploadFileTypeListSuccessAction",(function(){return Tt})),i.d(a,"changeSearchCondition",(function(){return Et})),i.d(a,"changeSelectedDeptList",(function(){return Rt})),i.d(a,"reloadList",(function(){return Pt})),i.d(a,"loadList",(function(){return Ft})),i.d(a,"getListSuccess",(function(){return _t})),i.d(a,"getListFailure",(function(){return It})),i.d(a,"setGridStateAction",(function(){return wt})),i.d(a,"setGridCheckStateAction",(function(){return Vt})),i.d(a,"changePageIndex",(function(){return Nt})),i.d(a,"changePageSize",(function(){return $t})),i.d(a,"openDeptSelectPopup",(function(){return At})),i.d(a,"closeDeptSelectPopup",(function(){return xt})),i.d(a,"openDsrBookingMappingPopup",(function(){return Wt})),i.d(a,"closeDsrBookingMappingPopup",(function(){return Mt})),i.d(a,"openDsrUploadPopup",(function(){return Bt})),i.d(a,"closeDsrUploadPopup",(function(){return Ut})),i.d(a,"closeCommitOrCancel",(function(){return Yt})),i.d(a,"bundleCloseCommitOrCancel",(function(){return Gt})),i.d(a,"getDsrMappingListSuccess",(function(){return Ht})),i.d(a,"getDsrMappingListFailure",(function(){return zt})),i.d(a,"loadDsrMappingList",(function(){return Qt})),i.d(a,"uploadDsr",(function(){return Kt})),i.d(a,"openRemarkPopup",(function(){return Xt})),i.d(a,"closeRemarkPopup",(function(){return qt})),i.d(a,"saveRemark",(function(){return Jt})),i.d(a,"saveRemarkSuccess",(function(){return Zt})),i.d(a,"saveRemarkFailure",(function(){return ei})),i.d(a,"addSalesInfo",(function(){return ti})),i.d(a,"delSalesInfo",(function(){return ii})),i.d(a,"salesSlip",(function(){return ni})),i.d(a,"salesSlipSuccess",(function(){return ci})),i.d(a,"salesSlipAll",(function(){return ai})),i.d(a,"salesSlipAllSuccess",(function(){return oi})),i.d(a,"chorusSlip",(function(){return ri})),i.d(a,"chorusSlipSuccess",(function(){return si})),i.d(a,"chorusSlipAll",(function(){return li})),i.d(a,"chorusSlipAllSuccess",(function(){return ui}));var o,r=i("ofXK"),s=i("3Pt+"),l=i("snw9"),u=i("kt0X"),p=i("WG3B"),d=i("xoAz"),b=i("wPo9"),f=i("7rOj"),h=i("+NQf"),m=i("6LsY"),g=i("l1P7"),C=i("v7zA"),O=i("7UZF"),v=i("hHe4"),k=i("1OXJ"),S=i("5hwk"),j=i("w8np"),y=i("kKjH"),L=i("qXPF"),D=i("htEk"),T=i("vu/V"),E=i("fXoL"),R=i("LvDl"),P=i("LRne"),F=i("z6cu"),_=i("eIep"),I=i("AytR"),w=I.a.API_URL,V={postUserCompBasis:"".concat(w,"/admin/user/comp/basis")},N=i("tpT/"),$=((o=function(){function e(t){_classCallCheck(this,e),this.api=t}return _createClass(e,[{key:"getDeptList",value:function(e){var t=R.assign({},this.api.defaultParams,{condition:e});return this.api.post(V.postUserCompBasis,t).pipe(Object(_.a)((function(e){return e.succeedYn?Object(P.a)(e.result):Object(F.a)("api response error")})))}}]),e}()).\u0275fac=function(e){return new(e||o)(E.bc(N.a))},o.\u0275prov=E.Mb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),A=i("+Sob"),x=i("gbCm"),W=i("pb6r"),M=i("XNiG"),B=i("itXk"),U=Object(u.o)("[DeptSelectModal] load dept select type",Object(u.t)()),Y=Object(u.o)("[DeptSelectModal] load dept select type success",Object(u.t)()),G=Object(u.o)("[DeptSelectModal] load dept select type failure",Object(u.t)()),H=Object(u.o)("[DeptSelectModal] change page index",Object(u.t)()),z=Object(u.o)("[DeptSelectModal] set grid state",Object(u.t)()),Q=Object(u.o)("[DeptSelectModal] change search condition",Object(u.t)()),K=Object(u.o)("[DeptSelectModal] load dept select type success",Object(u.t)()),X=Object(u.q)({loading:!1,totalCount:null,searchCondition:{compCode:11e4,compBasisCodeType:"COB01"},deptList:null,gridState:{pageInfo:{skip:0,take:20},sortInfo:[{field:"lastUpdateDatetime",dir:"desc"}]},gridCheckedState:null},Object(u.s)(n.loadUserCompBasis,(function(e){return Object.assign(Object.assign({},e),{loading:!0})})),Object(u.s)(n.loadUserCompBasisSuccess,(function(e,t){var i=t.list,n=t.totalCount;return Object.assign(Object.assign({},e),{deptList:i,totalCount:n,loading:!1})})),Object(u.s)(n.loadUserCompBasisFailure,(function(e){return Object.assign(Object.assign({},e),{loading:!1})})),Object(u.s)(n.changeSearchConditionAction,(function(e,t){var i=t.searchCondition;return Object.assign(Object.assign({},e),{searchCondition:i})})),Object(u.s)(n.setGridStateAction,(function(e,t){var i=t.gridState;return Object.assign(Object.assign({},e),{gridState:i})})),Object(u.s)(n.changePageIndex,(function(e,t){var i=t.pageIndex;return Object.assign(Object.assign({},e),{gridState:R.set(R.cloneDeep(e.gridState),["pageInfo","skip"],i)})})),Object(u.s)(n.setDeptList,(function(e,t){var i=t.list;return Object.assign(Object.assign({},e),{deptList:i,totalCount:i.length})})));function q(e,t){return Object(u.m)({main:X})(e,t)}var J=Object(u.p)("deptSelectModal"),Z=Object(u.r)(J,(function(e){return e.main}));Object(u.r)(Z,(function(e){return e.loading})),Object(u.r)(Z,(function(e){return e.deptList})),Object(u.r)(Z,(function(e){return e.totalCount})),Object(u.r)(Z,(function(e){return e.searchCondition})),Object(u.r)(Z,(function(e){return e.gridState})),Object(u.r)(Z,(function(e){return e.gridCheckedState}));var ee,te,ie=i("zP0r"),ne=i("Kj3r"),ce=i("pLZG"),ae=i("1G5W"),oe=i("UIHd"),re=i("JIr8"),se=i("Xb6A"),le=i("EsKh"),ue=((te=function(){function e(t,i,c,a,o){var r=this;_classCallCheck(this,e),this._actions$=t,this._apiService=i,this._errorService=c,this._store$=a,this.alertService=o,this.loadUserCompBasis$=Object(l.c)((function(){return r._actions$.pipe(Object(l.d)(n.loadUserCompBasis),Object(_.a)((function(e){var t=e.condition;return r._apiService.getDeptList(t).pipe(Object(_.a)((function(e){var t=e.list,i=e.totalCount;return[n.loadUserCompBasisSuccess({list:t,totalCount:i})]})),Object(re.a)((function(e){var t="\uc561\ud2f0\ube44\ud2f0 \uc0c1\ud488\ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",i=[n.loadUserCompBasisFailure({error:t})];return r._catchErr(e,t,i),[]})))})))}))}return _createClass(e,[{key:"_runPage",value:function(e,t){var i=this;this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?function(){t.forEach((function(e){i._store$.dispatch(e)}))}:function(){}})}},{key:"_catchErr",value:function(e,t,i){var n=this,c=this._errorService.errorHandler(e,t);R.isNil(c)||(R.isNil(c.accept)&&(c.accept=(null==i?void 0:i.length)>0?function(){i.forEach((function(e){n._store$.dispatch(e)}))}:function(){}),this.alertService.alert(c))}}]),e}()).\u0275fac=function(e){return new(e||te)(E.bc(l.a),E.bc($),E.bc(se.a),E.bc(u.h),E.bc(le.a))},te.\u0275prov=E.Mb({token:te,factory:te.\u0275fac}),te),pe=((ee=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=E.Ob({type:ee}),ee.\u0275inj=E.Nb({factory:function(e){return new(e||ee)},imports:[[r.c,s.m,s.w,d.a,m.a,C.a,g.a,j.a,T.a,u.j.forFeature("deptSelectModal",q),l.b.forFeature([ue])]]}),ee),de=i("65ZF"),be=i("VpzQ"),fe=Object(u.o)("[SharedPagesDsrMapping] init component state"),he=Object(u.o)("[SharedPagesDsrMapping] change search condition",Object(u.t)()),me=Object(u.o)("[SharedPagesDsrMapping] load dept data list",Object(u.t)()),ge=Object(u.o)("[SharedPagesDsrMapping] get dept list success",Object(u.t)()),Ce=Object(u.o)("[SharedPagesDsrMapping] get dept list failure",Object(u.t)()),Oe=Object(u.o)("[SharedPagesDsrMapping] change page size",Object(u.t)()),ve=Object(u.o)("[SharedPagesDsrMapping] change page index",Object(u.t)()),ke=Object(u.o)("[SharedPagesDsrMapping] set dept grid state",Object(u.t)()),Se=Object(u.o)("[SharedPagesDsrMapping] set dept grid checked rowids",Object(u.t)()),je=Object(u.o)("[SharedPagesDsrMapping] map dsr",Object(u.t)()),ye=Object(u.o)("[SharedPagesDsrMapping] map dsr success",Object(u.t)()),Le=i("EVqC"),De=Object(Le.a)({selectId:function(e){return e.id},sortComparer:!1}),Te=De.getInitialState({loading:null,searchCondition:null,gridState:{pageInfo:{skip:0,take:40},sortInfo:[]},gridDataTotal:null,gridCheckedState:null,mapSuccessYn:null}),Ee=Object(u.q)(Te,Object(u.s)(c.initThisState,(function(e){return De.removeAll(R.cloneDeep(Te))})),Object(u.s)(c.changeSearchCondition,(function(e,t){var i=t.searchCondition;return Object.assign(Object.assign({},e),{searchCondition:i})})),Object(u.s)(c.loadList,(function(e){return Object.assign(Object.assign({},e),{loading:!0})})),Object(u.s)(c.getListSuccess,(function(e,t){var i=t.dataList,n=t.totalCount;return De.setAll(i,Object.assign(Object.assign({},e),{loading:!1,gridDataTotal:n}))})),Object(u.s)(c.getListFailure,(function(e){return Object.assign(Object.assign({},e),{loading:!1})})),Object(u.s)(c.changePageSize,(function(e,t){var i=t.pageSize;return Object.assign(Object.assign({},e),{gridState:R.set(R.cloneDeep(e.gridState),["pageInfo","take"],i)})})),Object(u.s)(c.changePageIndex,(function(e,t){var i=t.pageIndex;return Object.assign(Object.assign({},e),{gridState:R.set(R.cloneDeep(e.gridState),["pageInfo","skip"],i)})})),Object(u.s)(c.setGridCheckStateAction,(function(e,t){var i=t.gridCheckedState;return Object.assign(Object.assign({},e),{gridCheckedState:i})})),Object(u.s)(c.setGridStateAction,(function(e,t){var i=t.gridState;return Object.assign(Object.assign({},e),{gridState:i})})),Object(u.s)(c.mapDsrSuccess,(function(e,t){return _objectDestructuringEmpty(t),Object.assign(Object.assign({},e),{mapSuccessYn:!0})})));function Re(e,t){return Object(u.m)({dsrMappingList:Ee})(e,t)}var Pe,Fe,_e,Ie=Object(u.p)("dsrMapping"),we=Object(u.r)(Ie,(function(e){return e.dsrMappingList})),Ve=function(e){return Object(u.r)(we,e)},Ne=Ve((function(e){return e.loading})),$e=Ve((function(e){return e.searchCondition})),Ae=De.getSelectors(we).selectAll,xe=Ve((function(e){return e.gridCheckedState})),We=Ve((function(e){return e.gridState})),Me=Ve((function(e){return e.gridDataTotal})),Be=(Object(u.r)(We,(function(e){return R.get(e,["pageInfo","take"],20)})),Ve((function(e){return e.mapSuccessYn}))),Ue=I.a.API_URL,Ye={postBookingList:"".concat(Ue,"/admin/booking/flight/dsr-mapping"),putDsrMapping:"".concat(Ue,"/admin/booking/flight/dsr-mapping")},Ge=((_e=function(){function e(t){_classCallCheck(this,e),this.api=t}return _createClass(e,[{key:"getList",value:function(e){var t=R.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ye.postBookingList,t).pipe(Object(_.a)((function(e){var t,i;if(e.succeedYn&&e.result){var n=(null===(t=e.result.list)||void 0===t?void 0:t.length)>0?e.result.list.map((function(e,t){return Object.assign({id:e.rowid||t.toString(),rowid:e.rowid||t.toString()},e)})):[];return Object(P.a)({dataList:n,totalCount:(null===(i=e.result.list)||void 0===i?void 0:i.length)||0})}return Object(F.a)(e||"api response error")})))}},{key:"putMapping",value:function(e){var t=R.assign({},this.api.defaultParams,{condition:e});return this.api.put(Ye.putDsrMapping,t).pipe(Object(_.a)((function(e){return e.succeedYn&&e.result?Object(P.a)(e.result):Object(F.a)(e||"api response error")})))}}]),e}()).\u0275fac=function(e){return new(e||_e)(E.bc(N.a))},_e.\u0275prov=E.Mb({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e),He=((Fe=_createClass((function e(t){var i=this;_classCallCheck(this,e),this.fb=t,this.generateSearchForm=function(){return i.fb.group({bookingItemCode:[null,[s.z.required]]})},this.initSearchForm=function(){return{bookingItemCode:null}}}))).\u0275fac=function(e){return new(e||Fe)(E.bc(s.f))},Fe.\u0275prov=E.Mb({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe),ze=((Pe=function(){function e(t){_classCallCheck(this,e),this._dataService=t,this.clickSearchEvent=new E.n,this.unsubscribe$=new M.a,this.searchForm=this._dataService.generateSearchForm(),this._initSubscription()}return _createClass(e,[{key:"searchCondition",get:function(){return this._searchCondition},set:function(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}},{key:"formValue",get:function(){return this.searchForm&&this.searchForm.value}},{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"onSubmit",value:function(){if(this.searchForm.invalid)this._checkValid=!0;else{var e=this.setSearchCondition();this.clickSearchEvent.emit({searchCondition:e}),this._checkValid=!1}}},{key:"checkIsInvalid",value:function(e){return this._checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}},{key:"setSearchCondition",value:function(){return R.omitBy(Object.assign({},this.searchForm.value),R.isNil)}},{key:"_initState",value:function(){}},{key:"_setSearchFormData",value:function(e){var t=this._dataService.initSearchForm();return R.isEmpty(e)?t:e}},{key:"_initSubscription",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Pe)(E.Qb(He))},Pe.\u0275cmp=E.Kb({type:Pe,selectors:[["app-dsr-mapping-search"]],inputs:{searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent"},decls:10,vars:4,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-2"],[1,"form-label"],["formControlName","bookingItemCode","placeholder","\ucf54\ub4dc \uc785\ub825",1,"d-inline-flex","flex-fill",3,"isInvalid"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"]],template:function(e,t){1&e&&(E.Wb(0,"form",0),E.fc("ngSubmit",(function(){return t.onSubmit()})),E.Wb(1,"div",1),E.Wb(2,"div",2),E.Wb(3,"div",3),E.Wb(4,"span",4),E.Pc(5,"\uc608\uc57d\ucf54\ub4dc"),E.Vb(),E.Rb(6,"app-input-text",5),E.Vb(),E.Vb(),E.Vb(),E.Wb(7,"div",6),E.Wb(8,"button",7),E.Pc(9,"\uac80\uc0c9"),E.Vb(),E.Vb(),E.Vb()),2&e&&(E.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),E.Cb(6),E.pc("isInvalid",t.checkIsInvalid("bookingItemCode"))("isInvalid",t.checkIsInvalid("bookingItemCode")))},directives:[s.B,s.s,s.k,A.a,x.a,s.r,s.i],encapsulation:2,changeDetection:0}),Pe);function Qe(e,t){if(1&e){var i=E.Xb();E.Wb(0,"tr"),E.Wb(1,"td",5),E.Wb(2,"app-checkbox",6),E.fc("ngModelChange",(function(e){return E.Fc(i),E.hc().checkedRows=e})),E.Vb(),E.Vb(),E.Wb(3,"td",5),E.Pc(4),E.Vb(),E.Wb(5,"td",5),E.Pc(6),E.Vb(),E.Wb(7,"td",5),E.Pc(8),E.Vb(),E.Wb(9,"td",7),E.Pc(10),E.ic(11,"number"),E.Vb(),E.Vb()}if(2&e){var n=t.$implicit,c=t.index,a=E.hc();E.Cb(2),E.pc("value",c)("ngModel",a.checkedRows),E.Cb(2),E.Qc(n.gdsSubPnr),E.Cb(2),E.Tc("",n.lastName," ",n.firstName," ",n.paxTitle,""),E.Cb(2),E.Qc(n.ticketNo),E.Cb(2),E.Qc(E.jc(11,8,n.ticketingNetAmount))}}var Ke,Xe,qe,Je,Ze=((Xe=function(){function e(){_classCallCheck(this,e),this.clickSearchEvent=new E.n}return _createClass(e,[{key:"checkedDataList",get:function(){var e=this;return R.isEmpty(this.checkedRows)?null:this.targetTicketList.filter((function(t,i){return e.checkedRows.indexOf(i)>-1}))}},{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Xe)},Xe.\u0275cmp=E.Kb({type:Xe,selectors:[["app-dsr-mapping-tickets"]],inputs:{targetTicketList:"targetTicketList"},outputs:{clickSearchEvent:"clickSearchEvent"},decls:26,vars:1,consts:[[1,"page-item-header"],[1,"title"],[1,"table","table-bordered","table-responsive"],["scope","col",1,"align-c"],[4,"ngFor","ngForOf"],[1,"align-c"],["styleClass","only",3,"value","ngModel","ngModelChange"],[1,"align-r"]],template:function(e,t){1&e&&(E.Wb(0,"div",0),E.Wb(1,"p",1),E.Pc(2,"\uc120\ud0dd\ud55c DSR \ud2f0\ucf13\ubc88\ud638"),E.Vb(),E.Vb(),E.Wb(3,"div",2),E.Wb(4,"table"),E.Wb(5,"caption"),E.Pc(6," DSR \ud2f0\ucf13 "),E.Vb(),E.Wb(7,"colgroup"),E.Rb(8,"col"),E.Rb(9,"col"),E.Rb(10,"col"),E.Rb(11,"col"),E.Rb(12,"col"),E.Vb(),E.Wb(13,"thead"),E.Wb(14,"tr"),E.Rb(15,"th",3),E.Wb(16,"th",3),E.Pc(17,"PNR"),E.Vb(),E.Wb(18,"th",3),E.Pc(19,"\ud0d1\uc2b9\uc790\uba85"),E.Vb(),E.Wb(20,"th",3),E.Pc(21,"\ud2f0\ucf13\ubc88\ud638"),E.Vb(),E.Wb(22,"th",3),E.Pc(23,"\ubc1c\uad8cNET"),E.Vb(),E.Vb(),E.Vb(),E.Wb(24,"tbody"),E.Nc(25,Qe,12,10,"tr",4),E.Vb(),E.Vb(),E.Vb()),2&e&&(E.Cb(25),E.pc("ngForOf",t.targetTicketList))},directives:[r.n,W.a,s.r,s.u],pipes:[r.f],encapsulation:2,changeDetection:0}),Xe),et=((Ke=function(){function e(t,i){_classCallCheck(this,e),this.store=t,this.alertService=i,this.closeEvent=new E.n,this.columns=[{field:"gdsSubPnr",title:"PNR",width:100},{field:"nameEn",title:"\ud0d1\uc2b9\uc790\uba85"},{field:"bookingFareTypeName",title:"\uc6b4\uc784\uad6c\ubd84",width:100},{field:"ticketingNetAmount",title:"\uc608\uc57d\uc0c1\uc138 \ubc1c\uad8cNET",width:120,format:"currency"}],this.unsubscribe$=new M.a,this.loading$=this.store.pipe(Object(u.u)(Ne)),this.searchCondition$=this.store.pipe(Object(u.u)($e)),this.dataList$=this.store.pipe(Object(u.u)(Ae)),this.totalCount$=this.store.pipe(Object(u.u)(Me)),this.gridState$=this.store.pipe(Object(u.u)(We)),this.gridCheckedState$=this.store.pipe(Object(u.u)(xe)),this.mapSuccessYn$=this.store.pipe(Object(u.u)(Be)),this._initSubscription()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(c.initThisState()),this.store.dispatch(c.setGridCheckStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}},{key:"clickSearchHandler",value:function(e){var t=e.searchCondition;this.store.dispatch(c.changeSearchCondition({searchCondition:t})),this.store.dispatch(c.changePageIndex({pageIndex:0}))}},{key:"gridStateChangeHandler",value:function(e){this.store.dispatch(c.setGridStateAction({gridState:e}))}},{key:"onMapping",value:function(){var e=this.ticketGridEl.checkedDataList;if(R.isEmpty(e))this.alertService.alert("\uc120\ud0dd\ub41c \ud2f0\ucf13\ubc88\ud638\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");else if(e.length>1)this.alertService.alert("\ud2f0\ucf13\ubc88\ud638\ub294 \ud55c\uac1c\ub9cc \uc120\ud0dd \uac00\ub2a5\ud569\ub2c8\ub2e4.");else{var t=this.gridEl.checkedDataList;if(R.isEmpty(t))this.alertService.alert("\uc120\ud0dd\ub41c \uc608\uc57d\ubc88\ud638\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");else if(t.length>1)this.alertService.alert("\uc608\uc57d\ubc88\ud638\ub294 \ud55c\uac1c\ub9cc \uc120\ud0dd \uac00\ub2a5\ud569\ub2c8\ub2e4.");else{var i=e[0],n=i.ticketNo,a=i.ticketingDate,o=t[0],r=o.bookingItemCode,s=o.bookingTravelerCode,l=o.paxFareSeq;this.store.dispatch(c.mapDsr({condition:{ticketingDate:a,ticketNo:n,bookingItemCode:r,bookingTravelerCode:s,paxFareSeq:l}}))}}}},{key:"_initSubscription",value:function(){var e=this;Object(B.a)([this.searchCondition$,this.gridState$]).pipe(Object(ie.a)(1),Object(ne.a)(200),Object(ce.a)((function(e){var t=_slicedToArray(e,2),i=t[0];return t[1],!R.isEmpty(i)})),Object(ae.a)(this.unsubscribe$)).subscribe((function(t){var i=_slicedToArray(t,2),n=i[0],a=i[1].sortInfo;e._setSortOrder(a);var o=Object.assign({},n);e.store.dispatch(c.loadList({condition:o}))})),this.mapSuccessYn$.pipe(Object(ae.a)(this.unsubscribe$)).subscribe((function(t){t&&e.alertService.alert({message:"DSR \uc608\uc57d\ub9e4\ud551\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",accept:function(){e.closeEvent.emit(!0)}})}))}},{key:"_setSortOrder",value:function(e){return e.filter((function(e){return!R.isNil(e.dir)})).map((function(e){return{keyName:e.field,sort:e.dir}}))}}]),e}()).\u0275fac=function(e){return new(e||Ke)(E.Qb(u.h),E.Qb(le.a))},Ke.\u0275cmp=E.Kb({type:Ke,selectors:[["app-dsr-mapping"]],viewQuery:function(e,t){var i;1&e&&(E.Xc(Ze,!0),E.Xc(oe.a,!0)),2&e&&(E.Dc(i=E.gc())&&(t.ticketGridEl=i.first),E.Dc(i=E.gc())&&(t.gridEl=i.first))},inputs:{targetTicketList:"targetTicketList"},outputs:{closeEvent:"closeEvent"},decls:19,vars:25,consts:[[1,"modal-body"],[1,"page-item",3,"targetTicketList"],[1,"page-item"],[3,"searchCondition","clickSearchEvent"],[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[3,"gridLoading","columns","sortable","checkedState","gridState","totalCount","checkboxUseYn","dataList","stateChangeEvent"],["gridBasis",""]],template:function(e,t){1&e&&(E.Wb(0,"div",0),E.Rb(1,"app-dsr-mapping-tickets",1),E.Wb(2,"div",2),E.Wb(3,"app-dsr-mapping-search",3),E.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)})),E.ic(4,"async"),E.Vb(),E.Wb(5,"div",4),E.Wb(6,"strong",5),E.Pc(7),E.ic(8,"async"),E.Vb(),E.Wb(9,"div",6),E.Wb(10,"button",7),E.fc("click",(function(){return t.onMapping()})),E.Pc(11,"\ub9e4\ud551"),E.Vb(),E.Vb(),E.Vb(),E.Wb(12,"app-grid-simple",8,9),E.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)})),E.ic(14,"async"),E.ic(15,"async"),E.ic(16,"async"),E.ic(17,"async"),E.ic(18,"async"),E.Vb(),E.Vb(),E.Vb()),2&e&&(E.Cb(1),E.pc("targetTicketList",t.targetTicketList),E.Cb(2),E.pc("searchCondition",E.jc(4,11,t.searchCondition$)),E.Cb(4),E.Qc(E.jc(8,13,t.totalCount$)||0),E.Cb(5),E.pc("gridLoading",E.jc(14,15,t.loading$))("columns",t.columns)("sortable",!1)("checkedState",E.jc(15,17,t.gridCheckedState$))("gridState",E.jc(16,19,t.gridState$))("totalCount",E.jc(17,21,t.totalCount$))("checkboxUseYn",!0)("dataList",E.jc(18,23,t.dataList$)))},directives:[Ze,ze,oe.a],pipes:[r.b],encapsulation:2,changeDetection:0}),Ke),tt=i("lJxs"),it=((Je=function(){function e(t,i,n,a,o){var r=this;_classCallCheck(this,e),this.actions$=t,this.service=i,this._errorService=n,this.alertService=a,this.store=o,this.loadList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(c.loadList),Object(_.a)((function(e){var t=e.condition;return r.service.getList(t).pipe(Object(tt.a)((function(e){var t=e.dataList,i=e.totalCount;return c.getListSuccess({dataList:t,totalCount:i})})),Object(re.a)((function(e){var t="List lookup failed. Please try again in a momentarily.",i=[c.getListFailure({error:t})];return r._catchErr(e,t,i),[]})))})))})),this.map$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(c.mapDsr),Object(_.a)((function(e){var t=e.condition;return r.service.putMapping(t).pipe(Object(tt.a)((function(e){return c.mapDsrSuccess({dataResult:e})})),Object(re.a)((function(e){return r._catchErr(e,"\ub9e4\ud551\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc\ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694."),[]})))})))}))}return _createClass(e,[{key:"_runPage",value:function(e,t){var i=this;this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?function(){t.forEach((function(e){i.store.dispatch(e)}))}:function(){}})}},{key:"_catchErr",value:function(e,t,i){var n=this,c=this._errorService.errorHandler(e,t);R.isNil(c)||(R.isNil(c.accept)&&(c.accept=(null==i?void 0:i.length)>0?function(){i.forEach((function(e){n.store.dispatch(e)}))}:function(){}),this.alertService.alert(c))}}]),e}()).\u0275fac=function(e){return new(e||Je)(E.bc(l.a),E.bc(Ge),E.bc(se.a),E.bc(le.a),E.bc(u.h))},Je.\u0275prov=E.Mb({token:Je,factory:Je.\u0275fac}),Je),nt=((qe=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=E.Ob({type:qe}),qe.\u0275inj=E.Nb({factory:function(e){return new(e||qe)},imports:[[r.c,s.m,s.w,f.a,g.a,C.a,O.a,T.a,m.a,j.a,u.j.forFeature("dsrMapping",Re),l.b.forFeature([it])]]}),qe),ct=i("tyNb"),at=Object(u.o)("[FlSalesReport/List] init this component"),ot=Object(u.o)("[FlSalesReport/List] load date range type list"),rt=Object(u.o)("[FlSalesReport/List] get date range type list success",Object(u.t)()),st=Object(u.o)("[FlSalesReport/List] load station list"),lt=Object(u.o)("[FlSalesReport/List] get station list success",Object(u.t)()),ut=Object(u.o)("[FlSalesReport/List] load billing type list"),pt=Object(u.o)("[FlSalesReport/List] get billing type list success",Object(u.t)()),dt=Object(u.o)("[FlSalesReport/List] load et emd other type list"),bt=Object(u.o)("[FlSalesReport/List] get et emd other type list success",Object(u.t)()),ft=Object(u.o)("[FlSalesReport/List] load gds comp list"),ht=Object(u.o)("[FlSalesReport/List] get gds list success",Object(u.t)()),mt=Object(u.o)("[PmUnpaid/List] load control branch type list"),gt=Object(u.o)("[PmUnpaid/List] get control branch type list success",Object(u.t)()),Ct=Object(u.o)("[PmUnpaid/List] load ticket void type list"),Ot=Object(u.o)("[PmUnpaid/List] get ticket void type list success",Object(u.t)()),vt=Object(u.o)("[PmUnpaid/List] load fop code list"),kt=Object(u.o)("[PmUnpaid/List] get fop code list success",Object(u.t)()),St=Object(u.o)("[FlSalesReport/List] load affiliate comp list"),jt=Object(u.o)("[FlSalesReport/List] get affiliate comp list success",Object(u.t)()),yt=Object(u.o)("[FlSalesReport/List] load check item list"),Lt=Object(u.o)("[FlSalesReport/List] get check item list success",Object(u.t)()),Dt=Object(u.o)("[FlReservationListB2cTicketing] load upload file type list"),Tt=Object(u.o)("[FlReservationListB2cTicketing] get upload file type list success",Object(u.t)()),Et=Object(u.o)("[FlSalesReport/List] change search condition",Object(u.t)()),Rt=Object(u.o)("[FlSalesReport/List] change selected department list",Object(u.t)()),Pt=Object(u.o)("[FlSalesReport/List] reload grid data list"),Ft=Object(u.o)("[FlSalesReport/List] load grid data list",Object(u.t)()),_t=Object(u.o)("[FlSalesReport/List] get list success",Object(u.t)()),It=Object(u.o)("[FlSalesReport/List] get list failure",Object(u.t)()),wt=Object(u.o)("[FlSalesReport/List] set grid state",Object(u.t)()),Vt=Object(u.o)("[FlSalesReport/List] set grid check state",Object(u.t)()),Nt=Object(u.o)("[FlSalesReport/List] change page index",Object(u.t)()),$t=Object(u.o)("[FlSalesReport/List] change page size",Object(u.t)()),At=Object(u.o)("[FlSalesReport/Detail] \ubd80\uc11c \uc120\ud0dd \ud31d\uc5c5 \uc5f4\uae30"),xt=Object(u.o)("[FlSalesReport/Detail] \ubd80\uc11c \uc120\ud0dd\ud31d\uc5c5 \ub2eb\uae30"),Wt=Object(u.o)("[FlSalesReport/Detail] DSR/\uc608\uc57d\ub9e4\ud551 \ud31d\uc5c5 \uc5f4\uae30"),Mt=Object(u.o)("[FlSalesReport/Detail] DSR/\uc608\uc57d\ub9e4\ud551 \ud31d\uc5c5 \ub2eb\uae30"),Bt=Object(u.o)("[FlSalesReport/Detail] DSR \uc5c5\ub85c\ub4dc \ud31d\uc5c5 \uc5f4\uae30"),Ut=Object(u.o)("[FlSalesReport/Detail] DSR \uc5c5\ub85c\ub4dc \ud31d\uc5c5 \ub2eb\uae30"),Yt=Object(u.o)("[FlSalesReport/Detail] close commit or cancel",Object(u.t)()),Gt=Object(u.o)("[FlSalesReport/Detail] bundle close commit or cancel",Object(u.t)()),Ht=Object(u.o)("[FlSalesReport/List] get dsr mapping list success",Object(u.t)()),zt=Object(u.o)("[FlSalesReport/List] get dsr mapping list failure",Object(u.t)()),Qt=Object(u.o)("[FlSalesReport/List] load dsr mapping list",Object(u.t)()),Kt=Object(u.o)("[FlSalesReport/Detail] upload dsr",Object(u.t)()),Xt=Object(u.o)("[FlSalesReport/List] open remark popup"),qt=Object(u.o)("[FlSalesReport/List] close remark popup"),Jt=Object(u.o)("[FlSalesReport/List] save remark",Object(u.t)()),Zt=Object(u.o)("[FlSalesReport/List] save remark success",Object(u.t)()),ei=Object(u.o)("[FlSalesReport/List] save remark failure",Object(u.t)()),ti=Object(u.o)("[FlSalesReport/List] add sales info",Object(u.t)()),ii=Object(u.o)("[FlSalesReport/List] del sales info"),ni=Object(u.o)("[FlSalesReport/Detail] sales Slip",Object(u.t)()),ci=Object(u.o)("[FlSalesReport/Detail] sales Slip success",Object(u.t)()),ai=Object(u.o)("[FlSalesReport/Detail] sales slip all",Object(u.t)()),oi=Object(u.o)("[FlSalesReport/Detail] sales Slip success",Object(u.t)()),ri=Object(u.o)("[FlSalesReport/Detail] chorusSlip",Object(u.t)()),si=Object(u.o)("[FlSalesReport/Detail] chorusSlip success",Object(u.t)()),li=Object(u.o)("[FlSalesReport/Detail] chorusSlip all",Object(u.t)()),ui=Object(u.o)("[FlSalesReport/Detail] chorusSlip success",Object(u.t)()),pi=Object(Le.a)({selectId:function(e){return e.id},sortComparer:!1}),di=pi.getInitialState({dateRangeTypeList:null,stationList:null,billingTypeList:null,etEmdOtherTypeList:null,gdsCompList:null,controlBranchTypeList:null,ticketVoidTypeList:null,fopCodeList:null,affiliateCompList:null,checkItemList:null,uploadFileTypeList:null,loading:!1,reloadToggle:!1,searchCondition:null,otherSearchInfo:null,selectedDeptList:null,summaryInfo:null,gridDataTotal:null,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},gridCheckedState:null,selectedRowItem:null,isOpenDeptSelectPopup:!1,isOpenDsrBookingMappingPopup:!1,isOpenDsrUploadPopup:!1,isOpenRemarkPopup:!1,selectedSalesInfo:null}),bi=Object(u.q)(di,Object(u.s)(a.initComponent,(function(e){return Object.assign(Object.assign({},e),{loading:!1,reloadToggle:!1,selectedRowItem:null,isOpenDeptSelectPopup:!1,isOpenDsrBookingMappingPopup:!1,isOpenDsrUploadPopup:!1,isOpenRemarkPopup:!1})})),Object(u.s)(a.getDateRangeTypeListSuccessAction,(function(e,t){var i=t.dataList;return Object.assign(Object.assign({},e),{dateRangeTypeList:i})})),Object(u.s)(a.getControlBranchTypeListSuccess,(function(e,t){var i=t.dataList;return Object.assign(Object.assign({},e),{controlBranchTypeList:i})})),Object(u.s)(a.getTicketVoidTypeListSuccess,(function(e,t){var i=t.dataList;return Object.assign(Object.assign({},e),{ticketVoidTypeList:i})})),Object(u.s)(a.getFopCodeListSuccess,(function(e,t){var i=t.dataList;return Object.assign(Object.assign({},e),{fopCodeList:i})})),Object(u.s)(a.getStationListSuccess,(function(e,t){var i=t.dataList;return Object.assign(Object.assign({},e),{stationList:i})})),Object(u.s)(a.getAffiliateCompListSuccess,(function(e,t){var i=t.dataList;return Object.assign(Object.assign({},e),{affiliateCompList:i})})),Object(u.s)(a.getCheckItemListSuccess,(function(e,t){var i=t.dataList;return Object.assign(Object.assign({},e),{checkItemList:i})})),Object(u.s)(a.getBillingTypeListSuccess,(function(e,t){var i=t.dataList;return Object.assign(Object.assign({},e),{billingTypeList:i})})),Object(u.s)(a.getEtEmdOtherTypeListSuccess,(function(e,t){var i=t.dataList;return Object.assign(Object.assign({},e),{etEmdOtherTypeList:i})})),Object(u.s)(a.getGdsCompListSuccess,(function(e,t){var i=t.dataList;return Object.assign(Object.assign({},e),{gdsCompList:i})})),Object(u.s)(a.getUploadFileTypeListSuccessAction,(function(e,t){var i=t.dataList;return Object.assign(Object.assign({},e),{uploadFileTypeList:i})})),Object(u.s)(a.changeSearchCondition,(function(e,t){var i=t.searchCondition,n=t.otherSearchInfo;return Object.assign(Object.assign({},e),{searchCondition:i,otherSearchInfo:n})})),Object(u.s)(a.changeSelectedDeptList,(function(e,t){var i=t.deptList;return Object.assign(Object.assign({},e),{selectedDeptList:i})})),Object(u.s)(a.loadList,(function(e){return Object.assign(Object.assign({},e),{loading:!0})})),Object(u.s)(a.reloadList,(function(e){return Object.assign(Object.assign({},e),{reloadToggle:!e.reloadToggle})})),Object(u.s)(a.getListSuccess,(function(e,t){var i=t.dataList,n=t.totalCount,c=t.summaryInfo;return pi.setAll(i,Object.assign(Object.assign({},e),{loading:!1,gridDataTotal:n,summaryInfo:c}))})),Object(u.s)(a.getListFailure,(function(e){return Object.assign(Object.assign({},e),{loading:!1})})),Object(u.s)(a.setGridStateAction,(function(e,t){var i=t.gridState;return Object.assign(Object.assign({},e),{gridState:i})})),Object(u.s)(a.setGridCheckStateAction,(function(e,t){var i=t.gridCheckedState;return Object.assign(Object.assign({},e),{gridCheckedState:i})})),Object(u.s)(a.changePageSize,(function(e,t){var i=t.pageSize;return Object.assign(Object.assign({},e),{gridState:R.set(R.cloneDeep(e.gridState),["pageInfo","take"],i)})})),Object(u.s)(a.changePageIndex,(function(e,t){var i=t.pageIndex;return Object.assign(Object.assign({},e),{gridState:R.set(R.cloneDeep(e.gridState),["pageInfo","skip"],i)})})),Object(u.s)(a.openDeptSelectPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenDeptSelectPopup:!0})})),Object(u.s)(a.closeDeptSelectPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenDeptSelectPopup:!1})})),Object(u.s)(a.openDsrBookingMappingPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenDsrBookingMappingPopup:!0})})),Object(u.s)(a.closeDsrBookingMappingPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenDsrBookingMappingPopup:!1})})),Object(u.s)(a.openDsrUploadPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenDsrUploadPopup:!0})})),Object(u.s)(a.closeDsrUploadPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenDsrUploadPopup:!1})})),Object(u.s)(a.openRemarkPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenRemarkPopup:!0})})),Object(u.s)(a.closeRemarkPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenRemarkPopup:!1})})),Object(u.s)(a.saveRemarkSuccess,(function(e,t){var i=t.upsertList;return pi.upsertMany(i,Object.assign({},e))})));function fi(e,t){return Object(u.m)({FlSalesReportList:bi})(e,t)}var hi,mi,gi,Ci=Object(u.p)("FlSalesReport"),Oi=Object(u.r)(Ci,(function(e){return e.FlSalesReportList})),vi=Object(u.r)(Oi,(function(e){return e.dateRangeTypeList})),ki=Object(u.r)(Oi,(function(e){return e.stationList})),Si=Object(u.r)(Oi,(function(e){return e.billingTypeList})),ji=Object(u.r)(Oi,(function(e){return e.etEmdOtherTypeList})),yi=Object(u.r)(Oi,(function(e){return e.gdsCompList})),Li=Object(u.r)(Oi,(function(e){return e.controlBranchTypeList})),Di=Object(u.r)(Oi,(function(e){return e.ticketVoidTypeList})),Ti=Object(u.r)(Oi,(function(e){return e.fopCodeList})),Ei=Object(u.r)(Oi,(function(e){return e.affiliateCompList})),Ri=Object(u.r)(Oi,(function(e){return e.checkItemList})),Pi=Object(u.r)(Oi,(function(e){return e.uploadFileTypeList})),Fi=Object(u.r)(Oi,(function(e){return e.loading})),_i=Object(u.r)(Oi,(function(e){return e.reloadToggle})),Ii=Object(u.r)(Oi,(function(e){return e.searchCondition})),wi=Object(u.r)(Oi,(function(e){return e.otherSearchInfo})),Vi=Object(u.r)(Oi,(function(e){return e.selectedDeptList})),Ni=pi.getSelectors(Oi).selectAll,$i=Object(u.r)(Oi,(function(e){return e.summaryInfo})),Ai=Object(u.r)(Oi,(function(e){return e.gridState})),xi=Object(u.r)(Oi,(function(e){return e.gridCheckedState})),Wi=Object(u.r)(Oi,(function(e){return e.gridDataTotal})),Mi=Object(u.r)(Ai,(function(e){return R.get(e,["pageInfo","take"],20)})),Bi=(Object(u.r)(Oi,(function(e){return e.selectedRowItem})),Object(u.r)(Oi,(function(e){return e.isOpenDeptSelectPopup}))),Ui=Object(u.r)(Oi,(function(e){return e.isOpenDsrBookingMappingPopup})),Yi=Object(u.r)(Oi,(function(e){return e.isOpenDsrUploadPopup})),Gi=Object(u.r)(Oi,(function(e){return e.isOpenRemarkPopup})),Hi=Object(u.r)(Oi,(function(e){return e.selectedSalesInfo})),zi=i("YY+H"),Qi=I.a.API_URL,Ki={postFlightSalesReport:"".concat(Qi,"/admin/flight/sales-report"),putRefundAccount:"".concat(Qi,"/admin/account/payments/refund-account"),postCommonDetailCodes:"".concat(Qi,"/common/detail-code"),postCommonComp:"".concat(Qi,"/common/comp"),excelDownload:"".concat(Qi,"/admin/flight/sales-report/excel"),uploadDsr:"".concat(Qi,"/admin/flight/dsr/upload"),putCloseCommitOrCancel:"".concat(Qi,"/admin/flight/sales-report/close"),putBundleCloseCommitOrCancel:"".concat(Qi,"/admin/flight/sales-report/bundle/close"),putSaveRemark:"".concat(Qi,"/admin/flight/sales-report/remark"),putSlipCreate:"".concat(Qi,"/admin/account/slip/sales-create"),putChorusCreate:"".concat(Qi,"/chorus/flight/dsr-send")},Xi=i("U6NN"),qi=((hi=function(){function e(){_classCallCheck(this,e),this.changePageSizeEvent=new E.n,this.excelDownloadEvent=new E.n,this.clickDsrBookingMappingEvent=new E.n,this.clickDsrUploadEvent=new E.n,this.clickCommitOrCancelEvent=new E.n,this.clickBundleCommitOrCancelEvent=new E.n,this.clickRemarkEvent=new E.n,this.clickTotalSlipEvent=new E.n,this.clickSlipEvent=new E.n,this.clickChorusEvent=new E.n,this.clickChorusAllEvent=new E.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onChangePageSize",value:function(e){this.changePageSizeEvent.emit(e.value)}}]),e}()).\u0275fac=function(e){return new(e||hi)},hi.\u0275cmp=E.Kb({type:hi,selectors:[["app-fl-sales-report-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{changePageSizeEvent:"changePageSizeEvent",excelDownloadEvent:"excelDownloadEvent",clickDsrBookingMappingEvent:"clickDsrBookingMappingEvent",clickDsrUploadEvent:"clickDsrUploadEvent",clickCommitOrCancelEvent:"clickCommitOrCancelEvent",clickBundleCommitOrCancelEvent:"clickBundleCommitOrCancelEvent",clickRemarkEvent:"clickRemarkEvent",clickTotalSlipEvent:"clickTotalSlipEvent",clickSlipEvent:"clickSlipEvent",clickChorusEvent:"clickChorusEvent",clickChorusAllEvent:"clickChorusAllEvent"},decls:8,vars:3,consts:[[1,"grid-control-area"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&(E.Wb(0,"div",0),E.Wb(1,"div",1),E.Wb(2,"button",2),E.fc("click",(function(){return t.clickDsrUploadEvent.emit()})),E.Pc(3,"DSR Upload"),E.Vb(),E.Wb(4,"button",2),E.fc("click",(function(){return t.excelDownloadEvent.emit()})),E.Pc(5,"Excel"),E.Vb(),E.Wb(6,"div",3),E.Wb(7,"app-selectbox",4),E.fc("onChange",(function(e){return t.onChangePageSize(e)})),E.Vb(),E.Vb(),E.Vb(),E.Vb()),2&e&&(E.Cb(7),E.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[Xi.a,s.r,s.u],encapsulation:2,changeDetection:0}),hi),Ji=i("pfiq"),Zi=((mi=function(){function e(t,i){_classCallCheck(this,e),this.api=t,this.alertService=i}return _createClass(e,[{key:"getCommonDetailCodeList",value:function(e){var t=R.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ki.postCommonDetailCodes,t).pipe(Object(_.a)((function(e){return e.succeedYn&&e.result?Object(P.a)(e.result.list):Object(F.a)(e||"api response error")})))}},{key:"getCommonComp",value:function(e){var t=R.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ki.postCommonComp,t).pipe(Object(_.a)((function(e){return e.succeedYn&&e.result?Object(P.a)(e.result.list):Object(F.a)(e||"api response error")})))}},{key:"getList",value:function(e){var t=this,i=R.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ki.postFlightSalesReport,i).pipe(Object(_.a)((function(e){if(e.succeedYn&&e.result){var i=t._convertSearchResultList(e.result.list),n=e.result.totalCount,c=e.result.summary||null;return Object(P.a)({dataList:i,totalCount:n,summaryInfo:c})}return Object(F.a)(e||"api response error")})))}},{key:"putRefundAccount",value:function(e){var t=R.assign({},this.api.defaultParams,{condition:e});return this.api.put(Ki.putRefundAccount,t).pipe(Object(_.a)((function(e){return e.succeedYn?Object(P.a)(e.result):Object(F.a)(e||"api response error")})))}},{key:"uploadDsr",value:function(e){var t=R.assign({},this.api.defaultParams,{condition:e});return this.api.put(Ki.uploadDsr,t).pipe(Object(_.a)((function(e){return e.succeedYn?Object(P.a)(e.result):Object(F.a)(e||"api response error")})))}},{key:"closeCommitOrCancel",value:function(e){var t=R.assign({},this.api.defaultParams,{condition:e});return this.api.put(Ki.putCloseCommitOrCancel,t).pipe(Object(_.a)((function(e){return e.succeedYn?Object(P.a)(e.result):Object(F.a)(e||"api response error")})))}},{key:"bundleCloseCommitOrCancel",value:function(e){var t=R.assign({},this.api.defaultParams,{condition:e});return this.api.put(Ki.putBundleCloseCommitOrCancel,t).pipe(Object(_.a)((function(e){return e.succeedYn?Object(P.a)(e.result):Object(F.a)(e||"api response error")})))}},{key:"putSaveRemark",value:function(e){var t=R.assign({},this.api.defaultParams,{condition:e});return this.api.put(Ki.putSaveRemark,t).pipe(Object(_.a)((function(e){if(e.succeedYn){var t=e.result.remarks.map((function(e){return Object.assign({},e,{id:e.rowid})}));return Object(P.a)(t)}return Object(F.a)(e||"api response error")})))}},{key:"_convertSearchResultList",value:function(e){return R.isEmpty(e)?[]:e.map((function(e,t){var i=(null==e?void 0:e.rowid)||t.toString();return Object.assign({},e,{rowid:i,id:i})}))}},{key:"putSlipCreate",value:function(e){var t=this,i=R.assign({},this.api.defaultParams,{condition:e});return this.api.put(Ki.putSlipCreate,i).pipe(Object(_.a)((function(e){return e.succeedYn?(t.alertService.alert(e.result.salesSlipCount+"\uac1c \uc0dd\uc131\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Object(P.a)(e.result)):Object(F.a)(e||"api response error")})))}},{key:"putSlipAllCreate",value:function(e){var t=this,i=R.assign({},this.api.defaultParams,{condition:e});return this.api.put(Ki.putSlipCreate,i).pipe(Object(_.a)((function(e){return e.succeedYn?(t.alertService.alert(e.result.salesSlipCount+"\uac1c \uc0dd\uc131\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Object(P.a)(e.result)):Object(F.a)(e||"api response error")})))}},{key:"putChorusSlipCreate",value:function(e){var t=R.assign({},this.api.defaultParams,{condition:e});return this.api.put(Ki.putChorusCreate,t).pipe(Object(_.a)((function(e){return e.succeedYn?Object(P.a)(e.result):Object(F.a)(e||"api response error")})))}}]),e}()).\u0275fac=function(e){return new(e||mi)(E.bc(N.a),E.bc(le.a))},mi.\u0275prov=E.Mb({token:mi,factory:mi.\u0275fac,providedIn:"root"}),mi),en=i("6UzV"),tn=i("wd/R"),nn=((gi=_createClass((function e(t){var i=this;_classCallCheck(this,e),this.fb=t,this.generateGridColumns=function(){return[{field:"ticketNo",title:"Ticket No.",width:"100",template:"ticketNoTpl"},{field:"airlineCode",title:"Airline No",width:"70"},{field:"airlineNumberCode",title:"Airline",width:"70"},{field:"billingTypeName",title:"ATR/BSP",width:"80"},{field:"internationalOrDomestic",title:"I/D",width:"80"},{field:"ticketVoidTypeName",title:"Sales Type",width:"130"},{field:"ticketingDate",title:"Issued Date",width:"80"},{field:"bookingItemCode",title:"Booking Item Code",width:"130",template:"bookingItemCodeTpl"},{field:"gdsSubPnr",title:"PNR",width:"120",template:"gdsSubPnrTpl"},{field:"conjTicketTypeCode",title:"CONJ",width:"100"},{field:"etEmdOtherTypeName",title:"ET/EMD",width:"100"},{field:"firstName",title:"Traveler",width:"150",template:"nameTpl"},{field:"salesNetAmount",title:"Selling Net",width:"100",format:"currency"},{field:"dsrNetAmount",title:"DSR NET",width:"100",format:"currency"},{field:"salesTaxAmount",title:"Selling Tax",width:"100",format:"currency"},{field:"dsrTaxAmount",title:"DSR Tax",width:"100",format:"currency"},{field:"salesCashAmount",title:"Selling Cash",width:"100",format:"currency"},{field:"dsrCashAmount",title:"DSR Cash",width:"100",format:"currency"},{field:"salesCardAmount",title:"Selling CC",width:"100",format:"currency"},{field:"dsrCardAmount",title:"DSR CC",width:"100",format:"currency"}]},this.generateGridColumnsSRC01=function(){return[{field:"bookingItemCode",title:"\uc608\uc57d\ucf54\ub4dc",width:"130",template:"bookingItemCodeTpl"},{field:"gdsSubPnr",title:"PNR",width:"120",template:"gdsSubPnrTpl"},{field:"airlineCode",title:"\ud56d\uacf5\uc0ac",width:"70"},{field:"airlineNumberCode",title:"\uc22b\uc790\ucf54\ub4dc",width:"80"},{field:"ticketNo",title:"\ud2f0\ucf13\ubc88\ud638",width:"100",template:"ticketNoTpl"},{field:"conjTicketTypeCode",title:"CONJ",width:"100"},{field:"etEmdOtherTypeName",title:"\ud2f0\ucf13\uad6c\ubd84",width:"100"},{field:"sumDifferAmount",title:"\ucd1d\ucc28\uc561",width:"100",format:"currency"},{field:"netDifferAmount",title:"NET\ucc28\uc561",width:"100",format:"currency"},{field:"taxDifferAmount",title:"TAX\ucc28\uc561",width:"100",format:"currency"},{field:"cashDifferAmount",title:"CASH\ucc28\uc561",width:"100",format:"currency"},{field:"cardDifferAmount",title:"CC\ucc28\uc561",width:"100",format:"currency"},{field:"tasfDifferAmount",title:"TASF \ucc28\uc561",width:"100",format:"currency"},{field:"salesDiscountAppliedValue",title:"\ud560\uc778/\ud560\uc99d",width:"100",format:"currency"},{field:"salesOthersAmount",title:"TAX\uc870\uc815",width:"100",format:"currency"},{field:"dsrNetAmount",title:"DSR NET",width:"100",format:"currency"},{field:"ticketingNetAmount",title:"\uc608\uc57d\uc0c1\uc138 \ubc1c\uad8cNET",width:"100",format:"currency"},{field:"salesNetAmount",title:"\ud310\ub9e4NET",width:"100",format:"currency"},{field:"dsrTaxAmount",title:"\ubc1c\uad8cTAX",width:"100",format:"currency"},{field:"salesTaxAmount",title:"\ud310\ub9e4TAX",width:"100",format:"currency"},{field:"dsrCardAmount",title:"\ubc1c\uad8cCC",width:"100",format:"currency"},{field:"salesCardAmount",title:"\ud310\ub9e4CC",width:"100",format:"currency"},{field:"dsrCashAmount",title:"\ubc1c\uad8c CASH",width:"100",format:"currency"},{field:"salesCashAmount",title:"\ud310\ub9e4CASH",width:"100",format:"currency"},{field:"dsrTasfAmount",title:"\uc2b9\uc778TASF",width:"100",format:"currency"},{field:"salesTasfAmount",title:"\ud310\ub9e4TASF",width:"100",format:"currency"},{field:"controlRemark",title:"\ube44\uace0",width:"100"}]},this.generateGridColumnsSRC03=function(){return[{field:"bookingItemCode",title:"\uc608\uc57d\ucf54\ub4dc",width:"130",template:"bookingItemCodeTpl"},{field:"gdsSubPnr",title:"PNR",width:"120",template:"gdsSubPnrTpl"},{field:"airlineCode",title:"\ud56d\uacf5\uc0ac",width:"70"},{field:"airlineNumberCode",title:"\uc22b\uc790\ucf54\ub4dc",width:"80"},{field:"ticketNo",title:"\ud2f0\ucf13\ubc88\ud638",width:"100",template:"ticketNoTpl"},{field:"etEmdOtherTypeName",title:"\ud2f0\ucf13\uad6c\ubd84",width:"100"},{field:"firstName",title:"\ud0d1\uc2b9\uac1d",width:"150",template:"nameTpl"},{field:"cabinClassCode",title:"C.CLS",width:"70"},{field:"bookingClassCode",title:"B.CLS",width:"70"},{field:"departureDate",title:"\ucd9c\ubc1c\uc77c",width:"100"},{field:"itineraryDetail",title:"\uc5ec\uc815",width:"250"},{field:"dsrAirlineCommCode",title:"\ubc1c\uad8c\ucef4",width:"100"},{field:"salesTourCode",title:"\uc608\uc57dAUTH No.",width:"120"},{field:"dsrTourCode",title:"\ubc1c\uad8cAUTH No.",width:"120"}]},this.generateListSearchForm=function(){return i.fb.group({dateRange:i.fb.group({rangeType:["SRD01"],dates:i.fb.array([new s.g(null,[s.z.required]),new s.g(null,[s.z.required])],{validators:[en.a.compareDatesValidators("rangeCompare",[[0],[1]])]})}),stationTypeCodes:[null],ticketingPicUno:[null],refundPicUno:[null],ticketingPicDeptCodes:[null],ticketNo:[null],bookingItemCode:[null],gdsSubPnr:[null],paxName:[null],packageCode:[null],onOffManual:[null],internationalOrDomestic:[null],billingTypeCode:[null],etEmdOtherTypeCodes:[null],gdsCompCodes:[null],controlBranchCode:[null],ticketVoidTypeCode:["N"],airlineCodes:[null,[en.a.airlineCodesStringValidator]],fopCodes:[null],dsrBookingMappedYn:[null],conjTicketYn:[null],bookerCompCode:[null],affiliateCompCodes:[null],dsrFinishYn:[null],slipYn:[null],checkItemCode:[null],checkItemIncludeYn:[null],multiSelector1:[null],multiSelector2:[null],airlineCode:[null]})},this.initListSearchFormData=function(){return{dateRange:{rangeType:"SRD01",dates:[tn().add(-1,"weeks").format("YYYY-MM-DD"),tn().format("YYYY-MM-DD")]},stationTypeCodes:null,ticketingPicUno:null,refundPicUno:null,ticketingPicDeptCodes:null,ticketNo:null,bookingItemCode:null,gdsSubPnr:null,paxName:null,packageCode:null,onOffManual:null,internationalOrDomestic:null,billingTypeCode:null,etEmdOtherTypeCodes:null,gdsCompCodes:null,controlBranchCode:null,ticketVoidTypeCode:null,airlineCodes:null,fopCodes:null,dsrBookingMappedYn:null,conjTicketYn:null,bookerCompCode:null,affiliateCompCodes:null,dsrFinishYn:null,slipYn:null,checkItemCode:null,checkItemIncludeYn:!0,multiSelector1:"ticketingPicUno",multiSelector2:"bookingItemCode",airlineCode:null}},this.initListSearchCondition=function(){return{dateRange:null,stationTypeCodes:null,ticketingPicUno:null,refundPicUno:null,ticketingPicDeptCodes:null,ticketNo:null,bookingItemCode:null,gdsSubPnr:null,paxName:null,packageCode:null,onOffManual:null,internationalOrDomestic:null,billingTypeCode:null,etEmdOtherTypeCodes:null,gdsCompCodes:null,controlBranchCode:null,ticketVoidTypeCode:"N",airlineCodes:null,destinationAirportCodes:null,bookingClassCodes:null,fopCodes:null,dsrBookingMappedYn:null,conjTicketYn:null,bookerCompCode:null,affiliateCompCodes:null,dsrFinishYn:null,slipYn:null,checkItemCode:null,checkItemIncludeYn:null,sortOrder:null,limits:null}},this.generateDsrBookingMappingSearchForm=function(){return i.fb.group({bookingItemCode:[null,[s.z.required]]})},this.initDsrBookingMappingSearchForm=function(){return{bookingItemCode:null}},this.generateDsrUploadForm=function(){return i.fb.group({gdsCompCode:[null],fileTypeCode:[null],fileContent:[null],uploadUserNo:[null]})},this.initDsrUploadForm=function(){return{gdsCompCode:null,fileTypeCode:null,fileContent:null,uploadUserNo:null}},this.generateFlSalesReportRemarkForm=function(){return i.fb.group({controlRemark:[null,[s.z.required]]})},this.initFlSalesReportRemarkForm=function(){return{controlRemark:null}}}))).\u0275fac=function(e){return new(e||gi)(E.bc(s.f))},gi.\u0275prov=E.Mb({token:gi,factory:gi.\u0275fac,providedIn:"root"}),gi),cn=i("rbKv"),an=i("kd+X"),on=i("LVFn"),rn=i("U2QM");function sn(e,t){1&e&&E.Rb(0,"app-input-text",34)}function ln(e,t){1&e&&E.Rb(0,"app-input-text",35)}function un(e,t){1&e&&E.Rb(0,"app-input-text",36)}function pn(e,t){1&e&&E.Rb(0,"app-input-text",37)}function dn(e,t){1&e&&E.Rb(0,"app-input-text",38)}function bn(e,t){1&e&&E.Rb(0,"app-input-text",35)}var fn,hn,mn,gn,Cn=((mn=function(){function e(t){_classCallCheck(this,e),this._dataService=t,this.clickSearchEvent=new E.n,this.clickResetEvent=new E.n,this.clickOpenDeptModalEvent=new E.n,this.clickClearDeptEvent=new E.n,this.isShowmore=!1,this.useYnOptions=[{value:!0,label:"Y"},{value:!1,label:"N"}],this.codeTypeOptions=[{value:"ticketNo",label:"Ticket No."},{value:"bookingItemCode",label:"Booking Item Code"},{value:"firstName",label:"Travelrs"}],this.internationalOrDomesticOptions=[{label:"Domestic",value:"D"},{label:"International",value:"I"}],this.unsubscribe$=new M.a,this.searchForm=this._dataService.generateListSearchForm(),this._initSubscription()}return _createClass(e,[{key:"otherSearchInfo",get:function(){return this._otherSearchInfo},set:function(e){this._otherSearchInfo=e,this._setOtherSearchInfo(e)}},{key:"searchCondition",get:function(){return this._searchCondition},set:function(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}},{key:"selectedDeptList",get:function(){return this._selectedDeptList},set:function(e){this._selectedDeptList=e,this._setDeptCodes(e)}},{key:"searchFormValid",get:function(){return this.searchForm.valid}},{key:"formValue",get:function(){return this.searchForm&&this.searchForm.value}},{key:"dateRange1Dates",get:function(){return this.searchForm.get("dateRange").get("dates").value}},{key:"selectedPicTypeDropdown",get:function(){return this.searchForm.get("multiSelector1").value}},{key:"selectedCodeTypeDropdown",get:function(){return this.searchForm.get("multiSelector2").value}},{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"onSubmit",value:function(){if(this.searchForm.invalid)this._checkValid=!0;else{var e=this.setSearchCondition(),t=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:e,otherSearchInfo:t}),this._checkValid=!1}}},{key:"onReset",value:function(){this.clickResetEvent.emit()}},{key:"clickOpenDeptModal",value:function(){this.clickOpenDeptModalEvent.emit()}},{key:"checkIsInvalid",value:function(e){return this._checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}},{key:"checkIsInvalidDateRange",value:function(e){var t;return this._checkValid&&(!0===(null===(t=e.errors)||void 0===t?void 0:t.rangeCompare)||e.invalid)}},{key:"setSearchCondition",value:function(){var e=this.searchForm.value,t=R.isEmpty(this.selectedDeptList)?null:this.selectedDeptList.map((function(e){return e.compBasisCodeValue})),i=e.dateRange.dates;e.dateRange=void 0;var n=Object.assign({},e,{ticketingPicDeptCodes:t,issueDates:i});return R.omitBy(n,R.isNil)}},{key:"_initState",value:function(){}},{key:"_setSearchFormData",value:function(e){var t=this._dataService.initListSearchFormData();return R.isEmpty(e)?t:e}},{key:"_setOtherSearchInfo",value:function(e){this.ticketingPicInput=(null==e?void 0:e.ticketingPicInput)||null,this.refundPicInput=(null==e?void 0:e.refundPicInput)||null,this.bookerCompInput=(null==e?void 0:e.bookerCompInput)||null}},{key:"_setOtherSearchCondition",value:function(){var e={deptCodesDesc:this.deptCodesDesc||null};return this.autoCompletes.forEach((function(t){Object.assign(e,t.getInputValue())})),e}},{key:"_setDeptCodes",value:function(e){if(R.isEmpty(e))this.deptCodesDesc=null;else{var t=e.map((function(e){return e.compBasisCodeValue}));this.deptCodesDesc=t.length+"\uac1c \uc120\ud0dd"}}},{key:"_initSubscription",value:function(){var e=this;Object(B.a)([this.searchForm.get("bookerCompCode").valueChanges,this.searchForm.get("affiliateCompCodes").valueChanges]).pipe(Object(ae.a)(this.unsubscribe$)).subscribe((function(t){var i=_slicedToArray(t,2),n=i[0],c=i[1],a=e.searchForm.get("bookerCompCode"),o=e.searchForm.get("affiliateCompCodes");R.isNil(n)&&R.isNil(c)?(a.disabled&&a.enable(),o.disabled&&o.enable()):!R.isNil(n)&&R.isNil(c)?o.enabled&&(o.disable(),o.setValue(null)):a.enabled&&(a.disable(),a.setValue(null))})),this.searchForm.get("checkItemCode").valueChanges.pipe(Object(ae.a)(this.unsubscribe$)).subscribe((function(t){var i=e.searchForm.get("checkItemIncludeYn");R.isNil(t)?(i.disable(),i.setValue(!0)):(i.enable(),i.setValue(!0))}))}}]),e}()).\u0275fac=function(e){return new(e||mn)(E.Qb(nn))},mn.\u0275cmp=E.Kb({type:mn,selectors:[["app-fl-sales-report-search"]],viewQuery:function(e,t){var i;1&e&&E.Xc(Ji.a,!0),2&e&&E.Dc(i=E.gc())&&(t.autoCompletes=i)},inputs:{dateRangeTypeList:"dateRangeTypeList",stationList:"stationList",billingTypeList:"billingTypeList",etEmdOtherTypeList:"etEmdOtherTypeList",gdsCompList:"gdsCompList",controlBranchTypeList:"controlBranchTypeList",ticketVoidTypeList:"ticketVoidTypeList",fopCodeList:"fopCodeList",affiliateCompList:"affiliateCompList",checkItemList:"checkItemList",otherSearchInfo:"otherSearchInfo",searchCondition:"searchCondition",selectedDeptList:"selectedDeptList"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent",clickOpenDeptModalEvent:"clickOpenDeptModalEvent",clickClearDeptEvent:"clickClearDeptEvent"},decls:69,vars:32,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],["formGroupName","dateRange",1,"col-1"],[1,"form-label"],["formArrayName","dates",1,"calendar-set","flex-fill"],[1,"input","calendar","d-inline-flex","flex-fill"],[3,"for"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","formControlName"],["fromDate",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","min","formControlName"],["toDate",""],[1,"col-1"],["formControlName","billingTypeCode","dataKey","detailCode","displayKey","detailCodeNameEn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","internationalOrDomestic",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","gdsCompCodes","dataKey","compCode","displayKey","compName",1,"d-inline-flex","flex-fill",3,"useAllOptionYn","options"],["formControlName","multiSelector2",1,"d-inline-flex","flex-fill","ml5",3,"options","useAllOptionYn"],[3,"ngSwitch"],["formControlName","ticketNo","class","d-inline-flex flex-fill ml5",4,"ngSwitchCase"],["formControlName","bookingItemCode","class","d-inline-flex flex-fill ml5",4,"ngSwitchCase"],["formControlName","gdsSubPnr","class","d-inline-flex flex-fill ml5",4,"ngSwitchCase"],["formControlName","paxName","class","d-inline-flex flex-fill ml5",4,"ngSwitchCase"],["formControlName","packageCode","class","d-inline-flex flex-fill ml5",4,"ngSwitchCase"],["formControlName","bookingItemCode","class","d-inline-flex flex-fill ml5",4,"ngSwitchDefault"],["formControlName","ticketVoidTypeCode","dataKey","detailCode","displayKey","detailCodeNameEn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","airlineCode",1,"d-inline-flex","flex-fill"],["formControlName","fopCodes","dataKey","detailCode","displayKey","detailCodeNameEn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","etEmdOtherTypeCodes","dataKey","detailCode","displayKey","detailCodeNameEn",1,"d-inline-flex","flex-fill",3,"useAllOptionYn","options"],["formControlName","conjTicketYn",1,"d-inline-flex","flex-fill",3,"options"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"],[1,"btn-searchbox-extend",3,"click"],["formControlName","ticketNo",1,"d-inline-flex","flex-fill","ml5"],["formControlName","bookingItemCode",1,"d-inline-flex","flex-fill","ml5"],["formControlName","gdsSubPnr",1,"d-inline-flex","flex-fill","ml5"],["formControlName","paxName",1,"d-inline-flex","flex-fill","ml5"],["formControlName","packageCode",1,"d-inline-flex","flex-fill","ml5"]],template:function(e,t){if(1&e&&(E.Wb(0,"form",0),E.fc("ngSubmit",(function(){return t.onSubmit()})),E.Wb(1,"div",1),E.Wb(2,"div",2),E.Wb(3,"div",3),E.Wb(4,"span",4),E.Pc(5,"Issued Date"),E.Vb(),E.Wb(6,"div",5),E.Wb(7,"div",6),E.Rb(8,"mat-datepicker-toggle",7),E.Rb(9,"input",8),E.Rb(10,"mat-datepicker",null,9),E.Vb(),E.Wb(12,"span",10),E.Pc(13,"~"),E.Vb(),E.Wb(14,"div",6),E.Rb(15,"mat-datepicker-toggle",7),E.Rb(16,"input",11),E.Rb(17,"mat-datepicker",null,12),E.Vb(),E.Vb(),E.Vb(),E.Wb(19,"div",13),E.Wb(20,"span",4),E.Pc(21,"ATR/BSP"),E.Vb(),E.Rb(22,"app-selectbox",14),E.Vb(),E.Wb(23,"div",13),E.Wb(24,"span",4),E.Pc(25,"I/D"),E.Vb(),E.Rb(26,"app-selectbox",15),E.Vb(),E.Wb(27,"div",13),E.Wb(28,"span",4),E.Pc(29,"GDS"),E.Vb(),E.Rb(30,"app-selectbox",16),E.Vb(),E.Vb(),E.Wb(31,"div",2),E.Wb(32,"div",13),E.Rb(33,"app-selectbox",17),E.Ub(34,18),E.Nc(35,sn,1,0,"app-input-text",19),E.Nc(36,ln,1,0,"app-input-text",20),E.Nc(37,un,1,0,"app-input-text",21),E.Nc(38,pn,1,0,"app-input-text",22),E.Nc(39,dn,1,0,"app-input-text",23),E.Nc(40,bn,1,0,"app-input-text",24),E.Tb(),E.Vb(),E.Wb(41,"div",13),E.Wb(42,"span",4),E.Pc(43,"Sales Type"),E.Vb(),E.Rb(44,"app-selectbox",25),E.Vb(),E.Wb(45,"div",13),E.Wb(46,"span",4),E.Pc(47,"Airline"),E.Vb(),E.Rb(48,"app-input-text",26),E.Vb(),E.Wb(49,"div",13),E.Wb(50,"span",4),E.Pc(51,"FOP"),E.Vb(),E.Rb(52,"app-multi-select",27),E.Vb(),E.Vb(),E.Wb(53,"div",2),E.Wb(54,"div",13),E.Wb(55,"span",4),E.Pc(56,"ET/EMD"),E.Vb(),E.Rb(57,"app-multi-select",28),E.Vb(),E.Wb(58,"div",13),E.Wb(59,"span",4),E.Pc(60,"CONJ"),E.Vb(),E.Rb(61,"app-selectbox",29),E.Vb(),E.Vb(),E.Vb(),E.Wb(62,"div",30),E.Wb(63,"button",31),E.Pc(64,"Search"),E.Vb(),E.Wb(65,"button",32),E.fc("click",(function(){return t.onReset()})),E.Pc(66,"Reset"),E.Vb(),E.Wb(67,"a",33),E.fc("click",(function(){return t.isShowmore=!t.isShowmore})),E.Pc(68,"\uac80\uc0c9 \uc635\uc158 \ub354\ubcf4\uae30"),E.Vb(),E.Vb(),E.Vb()),2&e){var i=E.Ec(11),n=E.Ec(18);E.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),E.Cb(6),E.Gb("valid-error",t.checkIsInvalidDateRange(t.searchForm.get("dateRange"))),E.Cb(2),E.pc("for",i),E.Cb(1),E.pc("matDatepicker",i)("formControlName",0),E.Cb(6),E.pc("for",n),E.Cb(1),E.pc("matDatepicker",n)("min",t.dateRange1Dates[0])("formControlName",1),E.Cb(6),E.pc("options",t.billingTypeList),E.Cb(4),E.pc("options",t.internationalOrDomesticOptions),E.Cb(4),E.pc("useAllOptionYn",!0)("options",t.gdsCompList),E.Cb(3),E.pc("options",t.codeTypeOptions)("useAllOptionYn",!1),E.Cb(1),E.pc("ngSwitch",t.selectedCodeTypeDropdown),E.Cb(1),E.pc("ngSwitchCase","ticketNo"),E.Cb(1),E.pc("ngSwitchCase","bookingItemCode"),E.Cb(1),E.pc("ngSwitchCase","gdsSubPnr"),E.Cb(1),E.pc("ngSwitchCase","paxName"),E.Cb(1),E.pc("ngSwitchCase","packageCode"),E.Cb(5),E.pc("options",t.ticketVoidTypeList),E.Cb(8),E.pc("options",t.fopCodeList),E.Cb(1),E.Gb("hide",!t.isShowmore),E.Cb(4),E.pc("useAllOptionYn",!0)("options",t.etEmdOtherTypeList),E.Cb(4),E.pc("options",t.useYnOptions),E.Cb(6),E.Gb("active",t.isShowmore)}},directives:[s.B,s.s,s.k,A.a,s.l,s.e,cn.a,an.a,s.c,s.r,s.i,on.a,Xi.a,r.q,r.r,r.s,x.a,rn.a],encapsulation:2,changeDetection:0}),mn),On=((hn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||hn)},hn.\u0275cmp=E.Kb({type:hn,selectors:[["app-fl-sales-report-summary"]],inputs:{summary:"summary"},decls:51,vars:24,consts:[[1,"table","table-bordered","mt30"],["width","150px"],["scope","col",1,"align-c"]],template:function(e,t){1&e&&(E.Wb(0,"div",0),E.Wb(1,"table"),E.Wb(2,"caption"),E.Pc(3," SALES REPORT "),E.Vb(),E.Wb(4,"colgroup"),E.Rb(5,"col",1),E.Rb(6,"col"),E.Vb(),E.Wb(7,"thead"),E.Wb(8,"tr"),E.Wb(9,"th",2),E.Pc(10,"Issued Ticket"),E.Vb(),E.Wb(11,"th",2),E.Pc(12,"Void Ticket"),E.Vb(),E.Wb(13,"th",2),E.Pc(14,"DSR Net"),E.Vb(),E.Wb(15,"th",2),E.Pc(16,"DSR Tax"),E.Vb(),E.Wb(17,"th",2),E.Pc(18,"CC"),E.Vb(),E.Wb(19,"th",2),E.Pc(20,"Cash"),E.Vb(),E.Wb(21,"th",2),E.Pc(22,"COM"),E.Vb(),E.Wb(23,"th",2),E.Pc(24,"VAT"),E.Vb(),E.Vb(),E.Vb(),E.Wb(25,"tbody"),E.Wb(26,"tr"),E.Wb(27,"td"),E.Pc(28),E.ic(29,"number"),E.Vb(),E.Wb(30,"td"),E.Pc(31),E.ic(32,"number"),E.Vb(),E.Wb(33,"td"),E.Pc(34),E.ic(35,"number"),E.Vb(),E.Wb(36,"td"),E.Pc(37),E.ic(38,"number"),E.Vb(),E.Wb(39,"td"),E.Pc(40),E.ic(41,"number"),E.Vb(),E.Wb(42,"td"),E.Pc(43),E.ic(44,"number"),E.Vb(),E.Wb(45,"td"),E.Pc(46),E.ic(47,"number"),E.Vb(),E.Wb(48,"td"),E.Pc(49),E.ic(50,"number"),E.Vb(),E.Vb(),E.Vb(),E.Vb(),E.Vb()),2&e&&(E.Cb(28),E.Qc(E.jc(29,8,null==t.summary?null:t.summary.ticketCount)),E.Cb(3),E.Qc(E.jc(32,10,null==t.summary?null:t.summary.voidTicketCount)),E.Cb(3),E.Qc(E.jc(35,12,null==t.summary?null:t.summary.dsrNetAmount)),E.Cb(3),E.Qc(E.jc(38,14,null==t.summary?null:t.summary.dsrTaxAmount)),E.Cb(3),E.Qc(E.jc(41,16,null==t.summary?null:t.summary.dsrCardAmount)),E.Cb(3),E.Qc(E.jc(44,18,null==t.summary?null:t.summary.dsrCashAmount)),E.Cb(3),E.Qc(E.jc(47,20,null==t.summary?null:t.summary.dsrAirlineCommAmount)),E.Cb(3),E.Qc(E.jc(50,22,null==t.summary?null:t.summary.dsrAirlineCommVat)))},pipes:[r.f],encapsulation:2,changeDetection:0}),hn),vn=((fn=function(){function e(t){_classCallCheck(this,e),this._dataService=t,this.saveEvent=new E.n,this.deleteEvent=new E.n,this.closeEvent=new E.n,this.putForm=t.generateFlSalesReportRemarkForm()}return _createClass(e,[{key:"salesInfo",get:function(){return this._salesInfo},set:function(e){this._salesInfo=e,this.putFormData=this._setPutFormData(e)}},{key:"ngOnInit",value:function(){}},{key:"onClickSave",value:function(){this.putForm.invalid?this._checkValid=!0:(this.saveEvent.emit(this.putForm.value),this._checkValid=!1)}},{key:"onClickDelete",value:function(){this.deleteEvent.emit()}},{key:"onClose",value:function(){this.closeEvent.emit()}},{key:"checkIsInvalid",value:function(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}},{key:"_setPutFormData",value:function(e){var t=this._dataService.initFlSalesReportRemarkForm();return Object.assign({},R.pick(e,Object.keys(t)))}}]),e}()).\u0275fac=function(e){return new(e||fn)(E.Qb(nn))},fn.\u0275cmp=E.Kb({type:fn,selectors:[["app-fl-sales-report-remark-form"]],inputs:{salesInfo:"salesInfo"},outputs:{saveEvent:"saveEvent",deleteEvent:"deleteEvent",closeEvent:"closeEvent"},decls:9,vars:4,consts:[[1,"page-item"],[3,"formGroup","connectForm"],[1,"textarea"],["formControlName","controlRemark","cols","30","rows","3"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm",3,"click"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(e,t){1&e&&(E.Wb(0,"div",0),E.Wb(1,"form",1),E.Wb(2,"div",2),E.Rb(3,"textarea",3),E.Vb(),E.Vb(),E.Wb(4,"div",4),E.Wb(5,"button",5),E.fc("click",(function(){return t.onClickSave()})),E.Pc(6,"\uc800\uc7a5"),E.Vb(),E.Wb(7,"button",6),E.fc("click",(function(){return t.onClose()})),E.Pc(8,"\uc544\ub2c8\uc624"),E.Vb(),E.Vb(),E.Vb()),2&e&&(E.Cb(1),E.pc("formGroup",t.putForm)("connectForm",t.putFormData),E.Cb(1),E.Gb("valid-error",t.checkIsInvalid("controlRemark")))},directives:[s.B,s.s,s.k,A.a,s.c,s.r,s.i],encapsulation:2,changeDetection:0}),fn),kn=i("BA+4"),Sn=((gn=function(){function e(t,i,n){_classCallCheck(this,e),this._dataService=t,this.fb=i,this.alertService=n,this.submitEvent=new E.n,this.closeEvent=new E.n,this.uploadFileEvent=new E.n,this._$unsubscribe=new M.a,this.putForm=t.generateDsrUploadForm(),this.putFormData=t.initDsrUploadForm()}return _createClass(e,[{key:"loginUserNo",get:function(){return this._loginUserNo},set:function(e){this._loginUserNo=e,this.putFormData=Object.assign(Object.assign({},this.putFormData),{uploadUserNo:e})}},{key:"ngAfterContentInit",value:function(){this._initSubscription(),this._initThisState()}},{key:"ngOnDestroy",value:function(){this._$unsubscribe.next(),this._$unsubscribe.complete()}},{key:"onSubmit",value:function(){if(this.putForm.invalid)this._checkValid=!0;else if(R.isNil(this.file))this.alertService.alert("\ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc \ud574 \uc8fc\uc138\uc694.");else{var e=Object.assign(Object.assign({},this.putForm.value),{fileContent:this.file});this.submitEvent.emit(e),this._checkValid=!1}}},{key:"onClose",value:function(){this.closeEvent.emit()}},{key:"onFileError",value:function(e){this.alertService.alert(e)}},{key:"onFileSelect",value:function(e){var t=e.files,i=e.isInvalid;if(t.length>0&&!i){var n=t[0];this.displayFileName=n.name,this.file=n}else this.alertService.alert("It is not a valid file.")}},{key:"checkIsInvalid",value:function(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}},{key:"_initThisState",value:function(){this._checkValid=!1}},{key:"_initSubscription",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||gn)(E.Qb(nn),E.Qb(s.f),E.Qb(le.a))},gn.\u0275cmp=E.Kb({type:gn,selectors:[["app-fl-sales-report-dsr-upload"]],inputs:{gdsCompList:"gdsCompList",uploadFileTypeList:"uploadFileTypeList",loginUserNo:"loginUserNo"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent",uploadFileEvent:"uploadFileEvent"},decls:34,vars:6,consts:[[1,"modal-body"],[3,"formGroup","connectForm","ngSubmit"],[1,"table","table-bordered"],["width","170px"],["scope","row",1,"th-bg"],["formControlName","gdsCompCode","displayKey","compName","dataKey","compCode",3,"options"],["formControlName","fileTypeCode","displayKey","detailCodeNameEn","dataKey","detailCode",3,"options"],[3,"displayValue","maxFileSize","onError","onSelect"],["compFileUpload",""],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(e,t){1&e&&(E.Wb(0,"div",0),E.Wb(1,"form",1),E.fc("ngSubmit",(function(){return t.onSubmit()})),E.Wb(2,"div",2),E.Wb(3,"table"),E.Wb(4,"caption"),E.Pc(5," DSR Upload "),E.Vb(),E.Wb(6,"colgroup"),E.Rb(7,"col",3),E.Rb(8,"col"),E.Vb(),E.Wb(9,"tbody"),E.Wb(10,"tr"),E.Wb(11,"th",4),E.Wb(12,"sup"),E.Pc(13,"Select GDS"),E.Vb(),E.Vb(),E.Wb(14,"td"),E.Rb(15,"app-selectbox",5),E.Vb(),E.Vb(),E.Wb(16,"tr"),E.Wb(17,"th",4),E.Wb(18,"sup"),E.Pc(19,"Data Type"),E.Vb(),E.Vb(),E.Wb(20,"td"),E.Rb(21,"app-selectbox",6),E.Vb(),E.Vb(),E.Wb(22,"tr"),E.Wb(23,"th",4),E.Wb(24,"sup"),E.Pc(25,"File"),E.Vb(),E.Vb(),E.Wb(26,"td"),E.Wb(27,"app-file-upload",7,8),E.fc("onError",(function(e){return t.onFileError(e)}))("onSelect",(function(e){return t.onFileSelect(e)})),E.Vb(),E.Vb(),E.Vb(),E.Vb(),E.Vb(),E.Vb(),E.Wb(29,"div",9),E.Wb(30,"button",10),E.Pc(31,"Upload"),E.Vb(),E.Wb(32,"button",11),E.fc("click",(function(){return t.onClose()})),E.Pc(33,"Cancel"),E.Vb(),E.Vb(),E.Vb(),E.Vb()),2&e&&(E.Cb(1),E.pc("formGroup",t.putForm)("connectForm",t.putFormData),E.Cb(14),E.pc("options",t.gdsCompList),E.Cb(6),E.pc("options",t.uploadFileTypeList),E.Cb(6),E.pc("displayValue",t.displayFileName)("maxFileSize",2e6))},directives:[s.B,s.s,s.k,A.a,Xi.a,s.r,s.i,kn.a],encapsulation:2,changeDetection:0}),gn),jn=i("7G9D"),yn=i("kDLv"),Ln=i("rdgV"),Dn=i("CGgD");function Tn(e,t){if(1&e&&(E.Wb(0,"span"),E.Pc(1),E.Vb()),2&e){var i=t.$implicit;E.Cb(1),E.Tc("",i.lastName," ",i.firstName," ",i.paxTitle,"")}}function En(e,t){if(1&e){var i=E.Xb();E.Wb(0,"a",17),E.fc("click",(function(){E.Fc(i);var e=t.$implicit;return E.hc().clickBookingItemCode(e.bookingItemCode)})),E.Wb(1,"span",18),E.Pc(2),E.Vb(),E.Vb()}if(2&e){var n=t.$implicit;E.Cb(2),E.Qc(n.bookingItemCode)}}function Rn(e,t){if(1&e){var i=E.Xb();E.Wb(0,"a",17),E.fc("click",(function(){E.Fc(i);var e=t.$implicit;return E.hc().clickBookingItemCode(e.bookingItemCode)})),E.Wb(1,"span",18),E.Pc(2),E.Vb(),E.Vb()}if(2&e){var n=t.$implicit;E.Cb(2),E.Qc(n.gdsSubPnr)}}function Pn(e,t){if(1&e){var i=E.Xb();E.Wb(0,"a",17),E.fc("click",(function(){E.Fc(i);var e=E.hc().$implicit;return E.hc().clickTicketNo(e.bookingItemCode)})),E.Wb(1,"span",18),E.Pc(2),E.Vb(),E.Vb()}if(2&e){var n=E.hc().$implicit;E.Cb(2),E.Qc(n.ticketNo)}}function Fn(e,t){1&e&&E.Nc(0,Pn,3,1,"a",19),2&e&&E.pc("ngIf",t.$implicit.ticketNo)}function _n(e,t){if(1&e){var i=E.Xb();E.Wb(0,"app-dsr-mapping",20),E.fc("closeEvent",(function(e){return E.Fc(i),E.hc().closeDsrBookingMappingHandler(e)})),E.Vb()}if(2&e){var n=E.hc();E.pc("targetTicketList",n.selectedMappingList)}}function In(e,t){if(1&e){var i=E.Xb();E.Wb(0,"app-dsr-upload",21),E.fc("closeEvent",(function(e){return E.Fc(i),E.hc().closeDsrUploadHandler(e)})),E.Vb()}}function wn(e,t){if(1&e){var i=E.Xb();E.Wb(0,"app-fl-sales-report-remark-form",22),E.fc("closeEvent",(function(){return E.Fc(i),E.hc().closeRemarkPopup()}))("saveEvent",(function(e){return E.Fc(i),E.hc().saveRemarkHandler(e)})),E.ic(1,"async"),E.Vb()}if(2&e){var n=E.hc();E.pc("salesInfo",E.jc(1,1,n.selectedSalesInfo$))}}var Vn,Nn,$n,An,xn=function(e,t,i,n){return{nameTpl:e,bookingItemCodeTpl:t,gdsSubPnrTpl:i,ticketNoTpl:n}},Wn=((Vn=function(){function e(t,i,n,c,a){_classCallCheck(this,e),this.store=t,this._dataService=i,this._fileService=n,this.alertService=c,this.authStore=a,this.unsubscribe$=new M.a,this.dateRangeTypeList$=t.pipe(Object(u.u)(vi)),this.stationList$=t.pipe(Object(u.u)(ki)),this.billingTypeList$=t.pipe(Object(u.u)(Si)),this.etEmdOtherTypeList$=t.pipe(Object(u.u)(ji)),this.gdsCompList$=t.pipe(Object(u.u)(yi)),this.controlBranchTypeList$=t.pipe(Object(u.u)(Li)),this.ticketVoidTypeList$=t.pipe(Object(u.u)(Di)),this.fopCodeList$=t.pipe(Object(u.u)(Ti)),this.affiliateCompList$=t.pipe(Object(u.u)(Ei)),this.checkItemList$=t.pipe(Object(u.u)(Ri)),this.uploadFileTypeList$=t.pipe(Object(u.u)(Pi)),this.loading$=t.pipe(Object(u.u)(Fi)),this.reloadToggle$=t.pipe(Object(u.u)(_i)),this.searchCondition$=t.pipe(Object(u.u)(Ii)),this.otherSearchInfo$=t.pipe(Object(u.u)(wi)),this.selectedDeptList$=t.pipe(Object(u.u)(Vi)),this.summaryInfo$=t.pipe(Object(u.u)($i)),this.gridDataList$=t.pipe(Object(u.u)(Ni)),this.listPageSize$=t.pipe(Object(u.u)(Mi)),this.gridState$=t.pipe(Object(u.u)(Ai)),this.gridCheckedState$=t.pipe(Object(u.u)(xi)),this.gridDataTotalCount$=t.pipe(Object(u.u)(Wi)),this.isOpenDeptSelectPopup$=t.pipe(Object(u.u)(Bi)),this.isOpenDsrBookingMappingPopup$=t.pipe(Object(u.u)(Ui)),this.isOpenDsrUploadPopup$=t.pipe(Object(u.u)(Yi)),this.isOpenRemarkPopup$=t.pipe(Object(u.u)(Gi)),this.selectedSalesInfo$=t.pipe(Object(u.u)(Hi)),this.loginUserNo$=a.pipe(Object(u.u)(zi.t)),this._initSubscription()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.store.dispatch(a.loadDateRangeTypeList()),this.store.dispatch(a.loadStationList()),this.store.dispatch(a.loadBillingTypeList()),this.store.dispatch(a.loadEtEmdOtherTypeList()),this.store.dispatch(a.loadGdsCompList()),this.store.dispatch(a.loadControlBranchTypeList()),this.store.dispatch(a.loadTicketVoidTypeList()),this.store.dispatch(a.loadFopCodeList()),this.store.dispatch(a.loadAffiliateCompList()),this.store.dispatch(a.loadCheckItemList()),this.store.dispatch(a.loadUploadFileTypeListAction()),this.loginUserNo$.subscribe((function(t){return e.userNo=t}))}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(a.initComponent()),this.store.dispatch(a.setGridCheckStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}},{key:"changePageSizeHandler",value:function(e){this.store.dispatch(a.changePageSize({pageSize:e}))}},{key:"clickSearchHandler",value:function(e){var t=e.searchCondition,i=e.otherSearchInfo;this.searchCondition=t,this.store.dispatch(a.changeSearchCondition({searchCondition:t,otherSearchInfo:i})),this.store.dispatch(a.changePageIndex({pageIndex:0}))}},{key:"clickResetHandler",value:function(){this.store.dispatch(a.changeSearchCondition({searchCondition:{},otherSearchInfo:null})),this.store.dispatch(a.changeSelectedDeptList({deptList:null}))}},{key:"clickBookingItemCode",value:function(e){e?window.open("".concat(window.location.origin,"/reservation/flight/").concat(e,"?tabName=PRICE"),"_blank","height=950,width=1800,left=0,top=0,toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=no,status=no"):this.alertService.alert("\uc720\ud6a8\ud55c \uc608\uc57d\ubc88\ud638\uac00 \uc544\ub2d9\ub2c8\ub2e4.")}},{key:"clickTicketNo",value:function(e){e?window.open("".concat(window.location.origin,"/reservation/flight/").concat(e,"?tabName=SALE_TICKETING"),"_blank","height=950,width=1800,left=0,top=0,toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=no,status=no"):this.alertService.alert("\uc720\ud6a8\ud55c \uc608\uc57d\ubc88\ud638\uac00 \uc544\ub2d9\ub2c8\ub2e4.")}},{key:"gridStateChangeHandler",value:function(e){this.store.dispatch(a.setGridStateAction({gridState:e}))}},{key:"openDeptSelectModalHandler",value:function(){this.store.dispatch(a.openDeptSelectPopup())}},{key:"closeDeptSelectModalHandler",value:function(){this.store.dispatch(a.closeDeptSelectPopup())}},{key:"openDsrBookingMappingHandler",value:function(){var e=this.gridEl.checkedDataList;if((null==e?void 0:e.length)<1)this.alertService.alert("No data is selected.");else{var t=e[0].gdsSubPnr;e.some((function(e){return e.gdsSubPnr!==t}))?this.alertService.alert("PNR\uc774 \ub3d9\uc77c\ud55c \ud56d\ubaa9\ub4e4\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694."):(this.selectedMappingList=R.cloneDeep(e),this.store.dispatch(a.openDsrBookingMappingPopup()))}}},{key:"closeDsrBookingMappingHandler",value:function(e){this.store.dispatch(a.closeDsrBookingMappingPopup()),!0===e&&this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()}},{key:"openDsrUploadHandler",value:function(){this.store.dispatch(a.openDsrUploadPopup())}},{key:"closeDsrUploadHandler",value:function(e){!0===e||this.store.dispatch(a.closeDsrUploadPopup())}},{key:"selectDeptsHandler",value:function(e){this.store.dispatch(a.changeSelectedDeptList({deptList:R.cloneDeep(e)})),this.closeDeptSelectModalHandler()}},{key:"clickClearDeptHandler",value:function(){this.store.dispatch(a.changeSelectedDeptList({deptList:null})),this.deptClearFlag=0===this.deptClearFlag?1:0}},{key:"excelDownloadHandler",value:function(){var e=this._changeConditionType(this.searchFormEl.formValue),t=this._setSearchCondition(e);this._fileService.fileDownload({url:Ki.excelDownload,filename:"SalesReport",type:"excel",params:t,requestMethod:"post"})}},{key:"clickBundleCloseCommitOrCancelHandler",value:function(e){if(this.searchFormEl.searchFormValid){var t=this._changeConditionType(this.searchFormEl.formValue),i=this._setSearchCondition(t);this.store.dispatch(a.bundleCloseCommitOrCancel({condition:Object.assign({},i,{closeYn:e})}))}}},{key:"clickCloseCommitOrCancelHandler",value:function(e){var t=this.gridEl.checkedDataList;if((null==t?void 0:t.length)<1)this.alertService.alert("No data is selected.");else if(t.some((function(t){return function(t){return e?!0===t.dsrFinishYn:!t.dsrFinishYn}(t)})))this.alertService.alert(e?"\ub9c8\uac10\uc644\ub8cc\ub41c \ub370\uc774\ud130\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.":"\ub9c8\uac10\ud574\uc81c\ub41c \ub370\uc774\ud130\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.");else if(t.some((function(e){return R.isNil(e.ticketingDate)||R.isNil(e.ticketingDate)})))this.alertService.alert("\ubc1c\uad8c\ubc88\ud638 \ud639\uc740 \ubc1c\uad8c\uc77c\uc774 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");else if(t.some((function(e){return!R.isNil(e.slipNo)})))this.alertService.alert("\uc804\ud45c\ubc88\ud638\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.");else{var i=t.map((function(e){return{ticketingDate:e.ticketingDate,ticketNo:e.ticketNo}}));this.store.dispatch(a.closeCommitOrCancel({condition:{list:i,closeYn:e}}))}}},{key:"openRemarkPopup",value:function(){this.gridEl.checkedDataList.length<1?this.alertService.alert("No data is selected."):this.gridEl.checkedDataList.length>1?this.alertService.alert("\ud558\ub098\uc758 \ub370\uc774\ud130\ub9cc \uc120\ud0dd \ud574 \uc8fc\uc138\uc694."):(this.store.dispatch(a.addSalesInfo({salesInfo:this.gridEl.checkedDataList[0]})),this.store.dispatch(a.openRemarkPopup()))}},{key:"closeRemarkPopup",value:function(){this.store.dispatch(a.delSalesInfo()),this.store.dispatch(a.closeRemarkPopup())}},{key:"saveRemarkHandler",value:function(e){var t=e.controlRemark,i=this.gridEl.checkedDataList.map((function(e){return{rowid:e.rowid,controlRemark:t}}));this.store.dispatch(a.saveRemark({condition:{remarks:i}}))}},{key:"_initSubscription",value:function(){var e=this;this.reloadToggle$.pipe(Object(ie.a)(1),Object(ae.a)(this.unsubscribe$)).subscribe((function(){e.searchFormEl.searchFormValid&&e.searchFormEl.onSubmit()})),this.searchCondition$.pipe(Object(ae.a)(this.unsubscribe$)).subscribe((function(t){switch(null==t?void 0:t.checkItemCode){case"SRC01":case"SRC02":e.columns=e._dataService.generateGridColumnsSRC01();break;case"IC03":e.columns=e._dataService.generateGridColumnsSRC03();break;default:e.columns=e._dataService.generateGridColumns()}})),Object(B.a)([this.searchCondition$,this.gridState$]).pipe(Object(ie.a)(1),Object(ne.a)(200),Object(ce.a)((function(e){var t=_slicedToArray(e,2),i=t[0];return t[1],!R.isEmpty(i)})),Object(ae.a)(this.unsubscribe$)).subscribe((function(t){var i=_slicedToArray(t,2),n=i[0],c=i[1],o=c.pageInfo,r=c.sortInfo;e._setSortOrder(r);var s=Object.assign({},n,{limits:[o.skip,o.skip+o.take]});e.store.dispatch(a.loadList({condition:e._changeConditionType(s)}))}))}},{key:"_setSortOrder",value:function(e){return e.filter((function(e){return!R.isNil(e.dir)})).map((function(e){return{keyName:e.field,sort:e.dir}}))}},{key:"_setSearchCondition",value:function(e){var t=Object.keys(this._dataService.initListSearchCondition());return R.pick(e,t)}},{key:"_changeConditionType",value:function(e){var t=R.isNil(e.airlineCodes)?null:e.airlineCodes.replace(/\s+/g,"").split(",").filter((function(e){return e})),i=R.isNil(e.destinationAirportCodes)?null:e.destinationAirportCodes.replace(/\s+/g,"").split(",").filter((function(e){return e})),n=R.isNil(e.bookingClassCodes)?null:e.bookingClassCodes.replace(/\s+/g,"").split(",").filter((function(e){return e})),c=Object.assign({},e,{airlineCodes:t,destinationAirportCodes:i,bookingClassCodes:n}),a=R.omit(c,["multiSelector1","multiSelector2"]);return R.omitBy(a,R.isNil)}},{key:"clickSlipEvent",value:function(e){var t=this,i=this.gridEl.checkedDataList;if((null==i?void 0:i.length)<1)this.alertService.alert("No data is selected.");else if(e){var n={salesSlipTypeCode:"SST01",ticketNos:[],accountingDate:e,slipWriterUno:this.userNo};i.forEach((function(e){n.ticketNos.push({ticketingDate:e.ticketingDate,ticketNo:e.ticketNo}),t.store.dispatch(a.salesSlip({condition:n}))}))}else this.alertService.alert("\ub0a0\uc9dc\ub97c \uc120\ud0dd\ud558\uc138\uc694.")}},{key:"clickTotalSlipEvent",value:function(e){if(e){var t=Object.assign(Object.assign({},this.searchCondition),{accountingDate:e,slipWriterUno:this.userNo,salesSlipTypeCode:"SST02"});return t=R.omit(t,["multiSelector1","multiSelector2"]),void this.store.dispatch(a.salesSlipAll({condition:t}))}}},{key:"clickChorusEvent",value:function(e){var t=this.gridEl.checkedDataList;(null==t?void 0:t.length)<1?this.alertService.alert("No data is selected."):this.gridEl.checkedDataList.length>1?this.alertService.alert("\ud558\ub098\uc758 \ub370\uc774\ud130\ub9cc \uc120\ud0dd \ud574 \uc8fc\uc138\uc694."):(this.store.dispatch(a.chorusSlip({condition:{bookingItemCodes:[this.gridEl.checkedDataList[0].bookingItemCode]}})),this.alertService.alert("\ucf54\ub7ec\uc2a4\uc804\uc1a1\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}},{key:"clickChorusAllEvent",value:function(e){var t=this._changeConditionType(this.searchFormEl.formValue),i=this._setSearchCondition(t);this.store.dispatch(a.chorusSlipAll({condition:i})),this.alertService.alert("\ucf54\ub7ec\uc2a4\uc77c\uad04\uc804\uc1a1\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}}]),e}()).\u0275fac=function(e){return new(e||Vn)(E.Qb(u.h),E.Qb(nn),E.Qb(jn.a),E.Qb(le.a),E.Qb(u.h))},Vn.\u0275cmp=E.Kb({type:Vn,selectors:[["app-fl-sales-report"]],viewQuery:function(e,t){var i;1&e&&(E.Xc(Cn,!0),E.Xc(oe.a,!0)),2&e&&(E.Dc(i=E.gc())&&(t.searchFormEl=i.first),E.Dc(i=E.gc())&&(t.gridEl=i.first))},decls:50,vars:101,consts:[[3,"dateRangeTypeList","stationList","billingTypeList","etEmdOtherTypeList","gdsCompList","controlBranchTypeList","ticketVoidTypeList","fopCodeList","affiliateCompList","checkItemList","selectedDeptList","otherSearchInfo","searchCondition","clickSearchEvent","clickResetEvent","clickOpenDeptModalEvent","clickClearDeptEvent"],[3,"loading","currentPageSize","totalCount","changePageSizeEvent","excelDownloadEvent","clickDsrBookingMappingEvent","clickDsrUploadEvent","clickCommitOrCancelEvent","clickSlipEvent","clickTotalSlipEvent","clickChorusAllEvent","clickChorusEvent","clickBundleCommitOrCancelEvent","clickRemarkEvent"],["nameTpl",""],["bookingItemCodeTpl",""],["gdsSubPnrTpl",""],["ticketNoTpl",""],[3,"gridLoading","columns","gridState","checkedState","totalCount","dataList","templates","checkboxUseYn","stateChangeEvent"],["gridBasis",""],[3,"summary"],["modalSize","sm","modalContentClass","pd-all","header","\ubd80\uc11c",3,"visible","modal","visibleChange"],[3,"componentKey","clearSateFlag","clickApplyEvent"],["modalSize","sm","modalContentClass","pd-all","header","DSR/\uc608\uc57d\ub9e4\ud551",3,"visible","modal","visibleChange"],[3,"targetTicketList","closeEvent",4,"ngIf"],["modalSize","sm","modalContentClass","pd-all","header","DSR Upload",3,"visible","modal","visibleChange"],[3,"closeEvent",4,"ngIf"],["modalContentClass","pd-all","header","\ube44\uace0\ub4f1\ub85d","modalSize","sm",3,"visible","modal","visibleChange"],[3,"salesInfo","closeEvent","saveEvent",4,"ngIf"],[3,"click"],[1,"text-underline","color-dark"],[3,"click",4,"ngIf"],[3,"targetTicketList","closeEvent"],[3,"closeEvent"],[3,"salesInfo","closeEvent","saveEvent"]],template:function(e,t){if(1&e&&(E.Wb(0,"app-fl-sales-report-search",0),E.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()}))("clickOpenDeptModalEvent",(function(){return t.openDeptSelectModalHandler()}))("clickClearDeptEvent",(function(){return t.clickClearDeptHandler()})),E.ic(1,"async"),E.ic(2,"async"),E.ic(3,"async"),E.ic(4,"async"),E.ic(5,"async"),E.ic(6,"async"),E.ic(7,"async"),E.ic(8,"async"),E.ic(9,"async"),E.ic(10,"async"),E.ic(11,"async"),E.ic(12,"async"),E.ic(13,"async"),E.Vb(),E.Wb(14,"app-fl-sales-report-control",1),E.fc("changePageSizeEvent",(function(e){return t.changePageSizeHandler(e)}))("excelDownloadEvent",(function(){return t.excelDownloadHandler()}))("clickDsrBookingMappingEvent",(function(){return t.openDsrBookingMappingHandler()}))("clickDsrUploadEvent",(function(){return t.openDsrUploadHandler()}))("clickCommitOrCancelEvent",(function(e){return t.clickCloseCommitOrCancelHandler(e)}))("clickSlipEvent",(function(e){return t.clickSlipEvent(e)}))("clickTotalSlipEvent",(function(e){return t.clickTotalSlipEvent(e)}))("clickChorusAllEvent",(function(e){return t.clickChorusAllEvent(e)}))("clickChorusEvent",(function(e){return t.clickChorusEvent(e)}))("clickBundleCommitOrCancelEvent",(function(e){return t.clickBundleCloseCommitOrCancelHandler(e)}))("clickRemarkEvent",(function(){return t.openRemarkPopup()})),E.ic(15,"async"),E.ic(16,"async"),E.ic(17,"async"),E.Vb(),E.Nc(18,Tn,2,3,"ng-template",null,2,E.Oc),E.Nc(20,En,3,1,"ng-template",null,3,E.Oc),E.Nc(22,Rn,3,1,"ng-template",null,4,E.Oc),E.Nc(24,Fn,1,1,"ng-template",null,5,E.Oc),E.Wb(26,"app-grid-simple",6,7),E.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)})),E.ic(28,"async"),E.ic(29,"async"),E.ic(30,"async"),E.ic(31,"async"),E.ic(32,"async"),E.Vb(),E.Rb(33,"app-fl-sales-report-summary",8),E.ic(34,"async"),E.Wb(35,"app-dialog",9),E.fc("visibleChange",(function(){return t.closeDeptSelectModalHandler()})),E.ic(36,"async"),E.Wb(37,"app-department-selector",10),E.fc("clickApplyEvent",(function(e){return t.selectDeptsHandler(e)})),E.Vb(),E.Vb(),E.Wb(38,"app-dialog",11),E.fc("visibleChange",(function(e){return t.closeDsrBookingMappingHandler(e)})),E.ic(39,"async"),E.Nc(40,_n,1,1,"app-dsr-mapping",12),E.ic(41,"async"),E.Vb(),E.Wb(42,"app-dialog",13),E.fc("visibleChange",(function(e){return t.closeDsrUploadHandler(e)})),E.ic(43,"async"),E.Nc(44,In,1,0,"app-dsr-upload",14),E.ic(45,"async"),E.Vb(),E.Wb(46,"app-dialog",15),E.fc("visibleChange",(function(){return t.closeRemarkPopup()})),E.ic(47,"async"),E.Nc(48,wn,2,3,"app-fl-sales-report-remark-form",16),E.ic(49,"async"),E.Vb()),2&e){var i=E.Ec(19),n=E.Ec(21),c=E.Ec(23),a=E.Ec(25);E.pc("dateRangeTypeList",E.jc(1,38,t.dateRangeTypeList$))("stationList",E.jc(2,40,t.stationList$))("billingTypeList",E.jc(3,42,t.billingTypeList$))("etEmdOtherTypeList",E.jc(4,44,t.etEmdOtherTypeList$))("gdsCompList",E.jc(5,46,t.gdsCompList$))("controlBranchTypeList",E.jc(6,48,t.controlBranchTypeList$))("ticketVoidTypeList",E.jc(7,50,t.ticketVoidTypeList$))("fopCodeList",E.jc(8,52,t.fopCodeList$))("affiliateCompList",E.jc(9,54,t.affiliateCompList$))("checkItemList",E.jc(10,56,t.checkItemList$))("selectedDeptList",E.jc(11,58,t.selectedDeptList$))("otherSearchInfo",E.jc(12,60,t.otherSearchInfo$))("searchCondition",E.jc(13,62,t.searchCondition$)),E.Cb(14),E.pc("loading",E.jc(15,64,t.loading$))("currentPageSize",E.jc(16,66,t.listPageSize$))("totalCount",E.jc(17,68,t.gridDataTotalCount$)),E.Cb(12),E.pc("gridLoading",E.jc(28,70,t.loading$))("columns",t.columns)("gridState",E.jc(29,72,t.gridState$))("checkedState",E.jc(30,74,t.gridCheckedState$))("totalCount",E.jc(31,76,t.gridDataTotalCount$))("dataList",E.jc(32,78,t.gridDataList$))("templates",E.xc(96,xn,i,n,c,a))("checkboxUseYn",!0),E.Cb(7),E.pc("summary",E.jc(34,80,t.summaryInfo$)),E.Cb(2),E.pc("visible",E.jc(36,82,t.isOpenDeptSelectPopup$))("modal",!0),E.Cb(2),E.pc("componentKey","flSalesReport")("clearSateFlag",t.deptClearFlag),E.Cb(1),E.pc("visible",E.jc(39,84,t.isOpenDsrBookingMappingPopup$))("modal",!0),E.Cb(2),E.pc("ngIf",E.jc(41,86,t.isOpenDsrBookingMappingPopup$)),E.Cb(2),E.pc("visible",E.jc(43,88,t.isOpenDsrUploadPopup$))("modal",!0),E.Cb(2),E.pc("ngIf",E.jc(45,90,t.isOpenDsrUploadPopup$)),E.Cb(2),E.pc("visible",E.jc(47,92,t.isOpenRemarkPopup$))("modal",!0),E.Cb(2),E.pc("ngIf",E.jc(49,94,t.isOpenRemarkPopup$))}},directives:[Cn,qi,oe.a,On,yn.a,Ln.a,r.o,et,Dn.a,vn],pipes:[r.b],encapsulation:2,changeDetection:0}),Vn),Mn=[{path:"",component:Wn,data:{title:"Sales Report"}}],Bn=((Nn=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=E.Ob({type:Nn}),Nn.\u0275inj=E.Nb({factory:function(e){return new(e||Nn)},imports:[[ct.f.forChild(Mn)],ct.f]}),Nn),Un=i("bOdf"),Yn=i("zp1y"),Gn=i("vkgz"),Hn=(($n=function(){function e(t,i,n,c,o){var r=this;_classCallCheck(this,e),this.actions$=t,this._store$=i,this._apiService=n,this._errorService=c,this.alertService=o,this.loadDateRangeTypeList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.loadDateRangeTypeList),Object(Un.a)((function(e){return Object(P.a)(e).pipe(Object(Yn.a)(r.dateRangeTypeList$))})),Object(_.a)((function(e){var t=_slicedToArray(e,2),i=(t[0],t[1]);return R.isNil(i)?r._apiService.getCommonDetailCodeList({masterCode:"FL085"}).pipe(Object(tt.a)((function(e){return a.getDateRangeTypeListSuccessAction({dataList:e})})),Object(re.a)((function(e){return r._catchErr(e,"\ub0a0\uc9dc\ud0c0\uc785 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]}))):[]})))})),this.loadStationList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.loadStationList),Object(Un.a)((function(e){return Object(P.a)(e).pipe(Object(Yn.a)(r.stationList$))})),Object(_.a)((function(e){var t=_slicedToArray(e,2),i=(t[0],t[1]);return R.isNil(i)?r._apiService.getCommonDetailCodeList({masterCode:"BS002"}).pipe(Object(tt.a)((function(e){return a.getStationListSuccess({dataList:e})})),Object(re.a)((function(e){return r._catchErr(e,"\uc2a4\ud14c\uc774\uc158 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]}))):[]})))})),this.loadBillingTypeList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.loadBillingTypeList),Object(Un.a)((function(e){return Object(P.a)(e).pipe(Object(Yn.a)(r.billingTypeList$))})),Object(_.a)((function(e){var t=_slicedToArray(e,2),i=(t[0],t[1]);return R.isNil(i)?r._apiService.getCommonDetailCodeList({masterCode:"FL031"}).pipe(Object(tt.a)((function(e){return a.getBillingTypeListSuccess({dataList:e})})),Object(re.a)((function(e){return r._catchErr(e,"ATR/BSP \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]}))):[]})))})),this.loadEtEmdOtherTypeList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.loadEtEmdOtherTypeList),Object(Un.a)((function(e){return Object(P.a)(e).pipe(Object(Yn.a)(r.etEmdOtherTypeList$))})),Object(_.a)((function(e){var t=_slicedToArray(e,2),i=(t[0],t[1]);return R.isNil(i)?r._apiService.getCommonDetailCodeList({masterCode:"FL077"}).pipe(Object(tt.a)((function(e){return a.getEtEmdOtherTypeListSuccess({dataList:e})})),Object(re.a)((function(e){return r._catchErr(e,"\ud2f0\ucf13\uad6c\ubd84 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]}))):[]})))})),this.loadGdsCompList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.loadGdsCompList),Object(Un.a)((function(e){return Object(P.a)(e).pipe(Object(Yn.a)(r.gdsCompList$))})),Object(_.a)((function(e){var t=_slicedToArray(e,2),i=(t[0],t[1]);return R.isNil(i)?r._apiService.getCommonComp({compTypeCodes:["CMP10"],limits:[0,100]}).pipe(Object(tt.a)((function(e){return a.getGdsCompListSuccess({dataList:e})})),Object(re.a)((function(e){return r._catchErr(e,"GdsComp \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]}))):[]})))})),this.loadControlBranchTypeList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.loadControlBranchTypeList),Object(Un.a)((function(e){return Object(P.a)(e).pipe(Object(Yn.a)(r.controlBranchTypeList$))})),Object(_.a)((function(e){var t=_slicedToArray(e,2),i=(t[0],t[1]);return R.isNil(i)?r._apiService.getCommonDetailCodeList({masterCode:"US008"}).pipe(Object(tt.a)((function(e){return a.getControlBranchTypeListSuccess({dataList:e})})),Object(re.a)((function(e){return r._catchErr(e,"ControlBranchType \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]}))):[]})))})),this.loadTicketVoidTypeList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.loadTicketVoidTypeList),Object(Un.a)((function(e){return Object(P.a)(e).pipe(Object(Yn.a)(r.ticketVoidTypeList$))})),Object(_.a)((function(e){var t=_slicedToArray(e,2),i=(t[0],t[1]);return R.isNil(i)?r._apiService.getCommonDetailCodeList({masterCode:"FL027"}).pipe(Object(tt.a)((function(e){return a.getTicketVoidTypeListSuccess({dataList:e})})),Object(re.a)((function(e){return r._catchErr(e,"\ud310\ub9e4\uad6c\ubd84 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]}))):[]})))})),this.loadFopCodeList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.loadFopCodeList),Object(Un.a)((function(e){return Object(P.a)(e).pipe(Object(Yn.a)(r.fopCodeList$))})),Object(_.a)((function(e){var t=_slicedToArray(e,2),i=(t[0],t[1]);return R.isNil(i)?r._apiService.getCommonDetailCodeList({masterCode:"PM015"}).pipe(Object(tt.a)((function(e){return a.getFopCodeListSuccess({dataList:e})})),Object(re.a)((function(e){return r._catchErr(e,"\uacb0\uc81c\uc218\ub2e8 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]}))):[]})))})),this.loadAffiliateCompList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.loadAffiliateCompList),Object(Un.a)((function(e){return Object(P.a)(e).pipe(Object(Yn.a)(r.affiliateCompList$))})),Object(_.a)((function(e){var t=_slicedToArray(e,2),i=(t[0],t[1]);return R.isNil(i)?r._apiService.getCommonComp({compTypeCodes:["CMP03"],limits:[0,100]}).pipe(Object(tt.a)((function(e){return a.getAffiliateCompListSuccess({dataList:e})})),Object(re.a)((function(e){return r._catchErr(e,"AffiliateCompList \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]}))):[]})))})),this.loadCheckItemList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.loadCheckItemList),Object(Un.a)((function(e){return Object(P.a)(e).pipe(Object(Yn.a)(r.checkItemList$))})),Object(_.a)((function(e){var t=_slicedToArray(e,2),i=(t[0],t[1]);return R.isNil(i)?r._apiService.getCommonDetailCodeList({masterCode:"FL086"}).pipe(Object(tt.a)((function(e){return a.getCheckItemListSuccess({dataList:e})})),Object(re.a)((function(e){return r._catchErr(e,"\ud655\uc778\ud56d\ubaa9 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]}))):[]})))})),this.loadUploadFileTypeList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.loadUploadFileTypeListAction),Object(Un.a)((function(e){return Object(P.a)(e).pipe(Object(Yn.a)(r.uploadFileTypeList$))})),Object(_.a)((function(e){var t=_slicedToArray(e,2),i=(t[0],t[1]);return R.isNil(i)?r._apiService.getCommonDetailCodeList({masterCode:"FL029"}).pipe(Object(tt.a)((function(e){return a.getUploadFileTypeListSuccessAction({dataList:e})})),Object(re.a)((function(e){return r._catchErr(e,"GDS/\ud56d\uacf5\uc0ac \ub370\uc774\ud130 \uad6c\ubd84 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]}))):[]})))})),this.loadList$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.loadList),Object(_.a)((function(e){var t=e.condition;return r._apiService.getList(t).pipe(Object(tt.a)((function(e){var t=e.dataList,i=e.totalCount,n=e.summaryInfo;return a.getListSuccess({dataList:t,totalCount:i,summaryInfo:n})})),Object(re.a)((function(e){var t="List lookup failed. Please try again in a momentarily.",i=[a.getListFailure({error:t})];return r._catchErr(e,t,i),[]})))})))})),this.uploadDsr$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.uploadDsr),Object(_.a)((function(e){var t=e.condition;return r._apiService.uploadDsr(t).pipe(Object(tt.a)((function(e){return{succeedYn:!0,updateList:e}})),Object(re.a)((function(e){return Object(P.a)({succeedYn:!1,error:e})})))})),Object(Gn.a)((function(e){var t=e.succeedYn,i=e.error;t?r._runPage("DSR \uc5c5\ub85c\ub4dc\ub97c \uc131\uacf5\ud558\uc600\uc2b5\ub2c8\ub2e4.",[]):r._catchErr(i,"DSR \uc5c5\ub85c\ub4dc\ub97c \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",[])})))}),{dispatch:!1}),this.closeCommitOrCancel$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.closeCommitOrCancel),Object(_.a)((function(e){var t=e.condition;return r._apiService.closeCommitOrCancel(t).pipe(Object(tt.a)((function(){return{succeedYn:!0}})),Object(re.a)((function(e){return Object(P.a)({succeedYn:!1,error:e})})))})),Object(Gn.a)((function(e){var t=e.succeedYn,i=e.error;if(t){var n=[a.reloadList()];r._runPage("\ub9c8\uac10\uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",n)}else r._catchErr(i,"\ub9c8\uac10\uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.")})))}),{dispatch:!1}),this.bundleCloseCommitOrCancel$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.bundleCloseCommitOrCancel),Object(_.a)((function(e){var t=e.condition;return r._apiService.bundleCloseCommitOrCancel(t).pipe(Object(tt.a)((function(){return{succeedYn:!0}})),Object(re.a)((function(e){return Object(P.a)({succeedYn:!1,error:e})})))})),Object(Gn.a)((function(e){var t=e.succeedYn,i=e.error;if(t){var n=[a.reloadList()];r._runPage("\ub9c8\uac10\uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",n)}else r._catchErr(i,"\ub9c8\uac10\uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.")})))}),{dispatch:!1}),this.saveRemark$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.saveRemark),Object(_.a)((function(e){var t=e.condition;return r._apiService.putSaveRemark(t).pipe(Object(tt.a)((function(e){return{succeedYn:!0,upsertList:e}})),Object(re.a)((function(e){return Object(P.a)({succeedYn:!1,error:e})})))})),Object(Gn.a)((function(e){var t=e.succeedYn,i=e.error,n=e.upsertList;if(t){var c=[a.saveRemarkSuccess({upsertList:n}),a.closeRemarkPopup(),a.delSalesInfo()];r._runPage("\ube44\uace0\ub4f1\ub85d\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",c)}else{var o="\ube44\uace0\ub4f1\ub85d\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",s=[a.saveRemarkFailure({error:o})];r._catchErr(i,o,s)}})))}),{dispatch:!1}),this.salesSlip$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.salesSlip),Object(_.a)((function(e){var t=e.condition;return r._apiService.putSlipCreate(t).pipe(Object(tt.a)((function(e){console.log(e,"dataList"),a.salesSlipSuccess({dataList:e})})),Object(re.a)((function(e){var t=[a.saveRemarkFailure({error:"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."})];return r._catchErr(e,"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",t),[]})))})))}),{dispatch:!1}),this.salesSlipAll$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.salesSlipAll),Object(_.a)((function(e){var t=e.condition;return r._apiService.putSlipAllCreate(t).pipe(Object(tt.a)((function(e){console.log(e,"salesSlipAll"),a.salesSlipAllSuccess({dataList:e})})),Object(re.a)((function(e){var t=[a.saveRemarkFailure({error:"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."})];return r._catchErr(e,"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",t),[]})))})))}),{dispatch:!1}),this.chorusSlip$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.chorusSlip),Object(_.a)((function(e){var t=e.condition;return r._apiService.putChorusSlipCreate(t).pipe(Object(tt.a)((function(e){return a.chorusSlipSuccess({dataList:e})})),Object(re.a)((function(e){var t=[a.saveRemarkFailure({error:"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."})];return r._catchErr(e,"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",t),[]})))})))})),this.chorusSlipAll$=Object(l.c)((function(){return r.actions$.pipe(Object(l.d)(a.chorusSlipAll),Object(_.a)((function(e){var t=e.condition;return r._apiService.putChorusSlipCreate(t).pipe(Object(tt.a)((function(e){return a.chorusSlipAllSuccess({dataList:e})})),Object(re.a)((function(e){var t=[a.saveRemarkFailure({error:"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."})];return r._catchErr(e,"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",t),[]})))})))})),this.dateRangeTypeList$=i.pipe(Object(u.u)(vi)),this.stationList$=i.pipe(Object(u.u)(ki)),this.billingTypeList$=i.pipe(Object(u.u)(Si)),this.etEmdOtherTypeList$=i.pipe(Object(u.u)(ji)),this.gdsCompList$=i.pipe(Object(u.u)(yi)),this.controlBranchTypeList$=i.pipe(Object(u.u)(Li)),this.ticketVoidTypeList$=i.pipe(Object(u.u)(Di)),this.fopCodeList$=i.pipe(Object(u.u)(Ti)),this.affiliateCompList$=i.pipe(Object(u.u)(Ei)),this.checkItemList$=i.pipe(Object(u.u)(Ri)),this.uploadFileTypeList$=i.pipe(Object(u.u)(Pi))}return _createClass(e,[{key:"_runPage",value:function(e,t){var i=this;this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?function(){t.forEach((function(e){i._store$.dispatch(e)}))}:function(){}})}},{key:"_catchErr",value:function(e,t,i){var n=this,c=this._errorService.errorHandler(e,t);R.isNil(c)||(R.isNil(c.accept)&&(c.accept=(null==i?void 0:i.length)>0?function(){i.forEach((function(e){n._store$.dispatch(e)}))}:function(){}),this.alertService.alert(c))}}]),e}()).\u0275fac=function(e){return new(e||$n)(E.bc(l.a),E.bc(u.h),E.bc(Zi),E.bc(se.a),E.bc(le.a))},$n.\u0275prov=E.Mb({token:$n,factory:$n.\u0275fac}),$n),zn=[Wn],Qn=[qi,Cn,On,vn,Sn],Kn=((An=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=E.Ob({type:An}),An.\u0275inj=E.Nb({factory:function(e){return new(e||An)},imports:[[r.c,s.m,s.w,p.m,d.a,b.a,f.a,S.a,h.a,m.a,g.a,C.a,O.a,v.a,k.a,y.a,j.a,D.a,T.a,L.a,Bn,pe,de.a,be.a,nt,u.j.forFeature("FlSalesReport",fi),l.b.forFeature([Hn])]]}),An)}}]);