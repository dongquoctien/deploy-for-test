(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{XxRg:function(e,t,i){"use strict";i.r(t),i.d(t,"CONTAINERS",(function(){return Jt})),i.d(t,"COMPONENTS",(function(){return Zt})),i.d(t,"FlReservationListB2cTicketingModule",(function(){return ei}));var n={};i.r(n),i.d(n,"initComponentStateAction",(function(){return x})),i.d(n,"loadDateRangeTypeListAction",(function(){return D})),i.d(n,"loadDateRangeTypeListSuccessAction",(function(){return V})),i.d(n,"loadBookingStatusListAction",(function(){return F})),i.d(n,"loadBookingStatusListSuccessAction",(function(){return E})),i.d(n,"loadFopCodeListAction",(function(){return w})),i.d(n,"loadFopCodeListSuccessAction",(function(){return W})),i.d(n,"loadPaymentStatusCodeListAction",(function(){return $})),i.d(n,"loadPaymentStatusCodeListSuccessAction",(function(){return B})),i.d(n,"loadTicketingStatusCodeListAction",(function(){return Y})),i.d(n,"loadTicketingStatusCodeListSuccessAction",(function(){return _})),i.d(n,"changeSearchConditionAction",(function(){return U})),i.d(n,"reloadList",(function(){return M})),i.d(n,"loadListAction",(function(){return H})),i.d(n,"loadListSuccessAction",(function(){return z})),i.d(n,"loadListFailureAction",(function(){return G})),i.d(n,"setGridStateAction",(function(){return K})),i.d(n,"setGridCheckStateAction",(function(){return Q})),i.d(n,"changePageIndex",(function(){return q})),i.d(n,"changePageSize",(function(){return X})),i.d(n,"openAssignPicPopup",(function(){return J})),i.d(n,"closeAssignPicPopup",(function(){return Z})),i.d(n,"updateAssignPicItems",(function(){return ee})),i.d(n,"updateAssignPicItemsSuccess",(function(){return te})),i.d(n,"openAutoStatusPopupAction",(function(){return ie})),i.d(n,"closeAutoStatusPopupAction",(function(){return ne})),i.d(n,"saveAutoStatusAction",(function(){return oe})),i.d(n,"saveAutoStatusSuccessAction",(function(){return ae})),i.d(n,"saveAutoStatusFailureAction",(function(){return se})),i.d(n,"openUmsPopup",(function(){return ce})),i.d(n,"closeUmsPopup",(function(){return le}));var o=i("ofXK"),a=i("3Pt+"),s=i("snw9"),c=i("kt0X"),l=i("vu/V"),r=i("7rOj"),u=i("6LsY"),d=i("l1P7"),p=i("v7zA"),b=i("hHe4"),g=i("5hwk"),m=i("kKjH"),h=i("qXPF"),C=i("1OXJ"),f=i("7UZF"),k=i("w8np"),S=i("YyVL"),v=i("a7NL"),O=i("tyNb"),j=i("XNiG"),y=i("itXk"),P=i("zP0r"),L=i("Kj3r"),T=i("pLZG"),A=i("1G5W"),N=i("LvDl"),R=i("wd/R"),I=i.n(R);const x=Object(c.o)("[FlReservationListB2cTicketing] init component state"),D=Object(c.o)("[FlReservationListB2cTicketing] load date range type list",Object(c.t)()),V=Object(c.o)("[FlReservationListB2cTicketing] load date range type list success",Object(c.t)()),F=Object(c.o)("[FlReservationListB2cTicketing] load booking status list",Object(c.t)()),E=Object(c.o)("[FlReservationListB2cTicketing] load booking status list success",Object(c.t)()),w=Object(c.o)("[FlReservationListB2cTicketing] load fop code list",Object(c.t)()),W=Object(c.o)("[FlReservationListB2cTicketing] load fop code list success",Object(c.t)()),$=Object(c.o)("[FlReservationListB2cTicketing] load payment status code list",Object(c.t)()),B=Object(c.o)("[FlReservationListB2cTicketing] load payment status code list success",Object(c.t)()),Y=Object(c.o)("[FlReservationListB2cTicketing] load ticketing status code list",Object(c.t)()),_=Object(c.o)("[FlReservationListB2cTicketing] load ticketing status code list success",Object(c.t)()),U=Object(c.o)("[FlReservationListB2cTicketing] change search condition",Object(c.t)()),M=Object(c.o)("[FlReservationListB2cTicketing] reload grid data list"),H=Object(c.o)("[FlReservationListB2cTicketing] load list",Object(c.t)()),z=Object(c.o)("[FlReservationListB2cTicketing] load list success",Object(c.t)()),G=Object(c.o)("[FlReservationListB2cTicketing] load list failure",Object(c.t)()),K=Object(c.o)("[FlReservationListB2cTicketing] set grid state",Object(c.t)()),Q=Object(c.o)("[FlReservationListB2cTicketing] set grid check state",Object(c.t)()),q=Object(c.o)("[FlReservationListB2cTicketing] change page index",Object(c.t)()),X=Object(c.o)("[FlReservationListB2cTicketing] change page size",Object(c.t)()),J=Object(c.o)("[FlReservationListB2cTicketing] open assign pic popup"),Z=Object(c.o)("[FlReservationListB2cTicketing] close assign pic popup"),ee=Object(c.o)("[FlReservationListB2cTicketing/AssignPicUpdate] \uc77c\uad04\ubcc0\uacbd \ud31d\uc5c5\uc5d0\uc11c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(c.t)()),te=Object(c.o)("[FlReservationListB2cTicketing] update items success"),ie=Object(c.o)("[FlReservationListB2cTicketing] open auto status popup"),ne=Object(c.o)("[FlReservationListB2cTicketing] close auto status popup"),oe=Object(c.o)("[FlReservationListB2cTicketing] save auto status",Object(c.t)()),ae=Object(c.o)("[FlReservationListB2cTicketing] save auto status success",Object(c.t)()),se=Object(c.o)("[FlReservationListB2cTicketing] save auto status failure",Object(c.t)()),ce=Object(c.o)("[FlReservationListB2cTicketing] open ums popup"),le=Object(c.o)("[FlReservationListB2cTicketing] close ums popup");var re=i("EVqC");const ue="flReservationListB2cTicketingMain",de=Object(re.a)({selectId:e=>e.rowid,sortComparer:!1}),pe=de.getInitialState({dateRangeTypeList:null,bookingStatusList:null,continentList:null,fopCodeList:null,paymentStatusCodeList:null,ticketingStatusCodeList:null,loading:!1,reloadToggle:!1,searchCondition:null,otherSearchInfo:null,selectedCorporateCompCode:null,selectedRowInfo:null,isOpenAssignPicPopup:!1,isOpenAutoStatusPopup:!1,isOpenRefundCancelPopup:!1,isOpenUmsPopup:!1,gridDataTotal:null,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},gridCheckedState:null,gridSummary:null}),be=Object(c.q)(pe,Object(c.s)(n.initComponentStateAction,e=>Object.assign(Object.assign({},e),{loading:!1,subLoading:!1})),Object(c.s)(n.loadDateRangeTypeListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{dateRangeTypeList:t})),Object(c.s)(n.loadBookingStatusListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{bookingStatusList:t})),Object(c.s)(n.loadFopCodeListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{fopCodeList:t})),Object(c.s)(n.loadPaymentStatusCodeListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{paymentStatusCodeList:t})),Object(c.s)(n.loadTicketingStatusCodeListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{ticketingStatusCodeList:t})),Object(c.s)(n.changeSearchConditionAction,(e,{condition:t,otherSearchInfo:i})=>Object.assign(Object.assign({},e),{searchCondition:t,otherSearchInfo:i})),Object(c.s)(n.reloadList,e=>Object.assign(Object.assign({},e),{reloadToggle:!e.reloadToggle})),Object(c.s)(n.loadListAction,e=>Object.assign(Object.assign({},e),{loading:!0,selectedRowInfo:null})),Object(c.s)(n.loadListSuccessAction,(e,{dataList:t,totalCount:i,summary:n})=>de.setAll(t,Object.assign(Object.assign({},e),{loading:!1,gridDataTotal:i,gridSummary:n}))),Object(c.s)(n.loadListFailureAction,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(c.s)(n.setGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{gridState:t})),Object(c.s)(n.setGridCheckStateAction,(e,{gridCheckedState:t})=>Object.assign(Object.assign({},e),{gridCheckedState:t})),Object(c.s)(n.changePageIndex,(e,{pageIndex:t})=>Object.assign(Object.assign({},e),{gridState:N.set(N.cloneDeep(e.gridState),["pageInfo","skip"],t)})),Object(c.s)(n.changePageSize,(e,{pageSize:t})=>Object.assign(Object.assign({},e),{gridState:N.set(N.cloneDeep(e.gridState),["pageInfo","take"],t)})),Object(c.s)(n.openUmsPopup,e=>Object.assign(Object.assign({},e),{isOpenUmsPopup:!0})),Object(c.s)(n.closeUmsPopup,e=>Object.assign(Object.assign({},e),{isOpenUmsPopup:!1})),Object(c.s)(n.openAssignPicPopup,e=>Object.assign(Object.assign({},e),{isOpenAssignPicPopup:!0})),Object(c.s)(n.closeAssignPicPopup,e=>Object.assign(Object.assign({},e),{isOpenAssignPicPopup:!1})),Object(c.s)(n.openAutoStatusPopupAction,e=>Object.assign(Object.assign({},e),{isOpenAutoStatusPopup:!0})),Object(c.s)(n.closeAutoStatusPopupAction,e=>Object.assign(Object.assign({},e),{isOpenAutoStatusPopup:!1})),Object(c.s)(n.updateAssignPicItemsSuccess,e=>Object.assign(Object.assign({},e),{reloadToggle:!e.reloadToggle})));function ge(e,t){return Object(c.m)({[ue]:be})(e,t)}const me=Object(c.p)("flReservationListB2cTicketing"),he=Object(c.r)(me,e=>e[ue]),Ce=Object(c.r)(he,e=>e.dateRangeTypeList),fe=Object(c.r)(he,e=>e.bookingStatusList),ke=Object(c.r)(he,e=>e.fopCodeList),Se=Object(c.r)(he,e=>e.ticketingStatusCodeList),ve=Object(c.r)(he,e=>e.paymentStatusCodeList),Oe=Object(c.r)(he,e=>e.loading),je=Object(c.r)(he,e=>e.reloadToggle),ye=Object(c.r)(he,e=>e.searchCondition),Pe=Object(c.r)(he,e=>e.otherSearchInfo),Le=de.getSelectors(he).selectAll,Te=Object(c.r)(he,e=>e.gridDataTotal),Ae=Object(c.r)(he,e=>e.gridSummary),Ne=Object(c.r)(he,e=>e.gridState),Re=Object(c.r)(he,e=>e.gridCheckedState),Ie=Object(c.r)(he,e=>e.isOpenUmsPopup),xe=Object(c.r)(he,e=>e.isOpenAssignPicPopup),De=Object(c.r)(he,e=>e.isOpenAutoStatusPopup),Ve=Object(c.r)(he,e=>e.isOpenRefundCancelPopup),Fe=Object(c.r)(he,e=>e.selectedRowInfo),Ee=Object(c.r)(Ne,e=>N.get(e,["pageInfo","take"],20));var we=i("YY+H"),We=i("AytR");const{API_URL:$e}=We.a,Be={postCommonDetail:`${$e}/common/detail-code`,postCommonComp:`${$e}/common/comp`,postBasicContinent:`${$e}/admin/basis/continent`,postBookingFlightList:`${$e}/admin/booking/flight/list`,putAssignPicItems:`${$e}/admin/booking/pic-assign`,putAutoStatus:`${$e}/admin/booking/flight/auto-status`,putBookingStatus:`${$e}/admin/booking/status`,excelDownload:`${$e}/admin/booking/flight/excel`};var Ye=i("fXoL"),_e=i("pfiq"),Ue=i("LRne"),Me=i("z6cu"),He=i("eIep"),ze=i("tpT/");let Ge=(()=>{class e{constructor(e){this.api=e}getCommonDetailCodeList(e){const t=N.assign({},this.api.defaultParams,{condition:e});return this.api.post(Be.postCommonDetail,t).pipe(Object(He.a)(e=>e.succeedYn?Object(Ue.a)(e.result.list):Object(Me.a)(e||"api response error")))}getCommonComp(e){const t=N.assign({},this.api.defaultParams,{condition:e});return this.api.post(Be.postCommonComp,t).pipe(Object(He.a)(e=>e.succeedYn?Object(Ue.a)(e.result.list):Object(Me.a)(e||"api response error")))}getContinentList(e){const t=N.assign({},this.api.defaultParams,{condition:e});return this.api.post(Be.postBasicContinent,t).pipe(Object(He.a)(e=>e.succeedYn?Object(Ue.a)(e.result.list):Object(Me.a)(e||"api response error")))}getList(e){const t=N.assign({},this.api.defaultParams,{condition:e});return this.api.post(Be.postBookingFlightList,t).pipe(Object(He.a)(e=>{if(e.succeedYn&&e.result){const t=this._addRowid(e.result.list),i=e.result.totalCount,n=e.result.summary;return Object(Ue.a)({list:t,totalCount:i,summary:n})}return Object(Me.a)(e||"api response error")}))}putAutoStatus(e){const t=N.assign({},this.api.defaultParams,{condition:e});return this.api.put(Be.putAutoStatus,t).pipe(Object(He.a)(e=>{var t;if(e.succeedYn){const{autoTicketingStatusCode:i,autoTicketingStatusName:n}=null==e?void 0:e.result,o=null===(t=null==e?void 0:e.result)||void 0===t?void 0:t.bookingItemCodes.map(e=>({id:e,bookingItemCode:e,autoTicketingStatusCode:i,autoTicketingStatusName:n}));return Object(Ue.a)(o)}return Object(Me.a)(e||"api response error")}))}putBookingStatus(e){const t=N.assign({},this.api.defaultParams,{condition:e});return this.api.put(Be.putBookingStatus,t).pipe(Object(He.a)(e=>{var t;if(e.succeedYn){const{bookingStatusCode:i,bookingStatusName:n}=null==e?void 0:e.result,o=null===(t=null==e?void 0:e.result)||void 0===t?void 0:t.bookingItemCodes.map(e=>({id:e,bookingItemCode:e,bookingStatusCode:i,bookingStatusName:n}));return Object(Ue.a)(o)}return Object(Me.a)(e||"api response error")}))}putAssignPicItems(e){const t=N.assign({},this.api.defaultParams,{condition:e});return this.api.put(Be.putAssignPicItems,t).pipe(Object(He.a)(e=>e.succeedYn?Object(Ue.a)(!0):Object(Me.a)(e||"api response error")))}_addRowid(e){return N.isNil(e)?[]:e.map((e,t)=>Object.assign(Object.assign({},e),{rowid:String(t)}))}}return e.\u0275fac=function(t){return new(t||e)(Ye.bc(ze.a))},e.\u0275prov=Ye.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ke=i("6UzV");let Qe=(()=>{class e{constructor(e){this.fb=e,this.generateGridColumns=()=>[{field:"requestDatetime",title:"Request Date",style:{"text-align":"center"}},{field:"bookingItemCode",title:"Booking Item Code",template:"bookingItemCodeTpl",style:{"text-align":"center"}},{field:"gdsSubPnr",title:"PNR",style:{"text-align":"center"}},{field:"bookingStatusName",title:"Booking Status",style:{"text-align":"center"}},{field:"paymentStatusName",title:"C.Payment Status",style:{"text-align":"center"}},{field:"ticketingStatusName",title:"Issued Status",style:{"text-align":"center"}},{field:"autoTicketingStatusName",title:"Auto Tickeing Status",style:{"text-align":"center"}},{field:"gdsCompName",title:"GDS"},{field:"airlineCode",title:"Airline",style:{"text-align":"center"}},{field:"itinerary",title:"Itinerary"},{field:"clientCancelDeadline",title:"Client TL",style:{"text-align":"center"}},{field:"fareCancelDeadline",title:"Fare TL",template:"fareCancelDeadlineTpl",style:{"text-align":"center"}},{field:"airlineCancelDeadline",title:"Airline TL",template:"airlineCancelDeadlineTpl",style:{"text-align":"center"}},{field:"salesNetAmount",title:"Sales Net",format:"currency",style:{"text-align":"right"}},{field:"salesTaxAmount",title:"Sales Tax",format:"currency",style:{"text-align":"right"}},{field:"fopName",title:"FOP"},{field:"departureDatetime",title:"Departure Date",format:"dateTime",style:{"text-align":"center"}},{field:"lastTicketingPicName",title:"TKT PIC"}],this.generateListSearchForm=()=>this.fb.group({searchTypeCode:[null],dateRange1:this.fb.group({rangeType:[null],dates:this.fb.array([new a.g(null,[a.z.required]),new a.g(null,[a.z.required])])},{validators:[Ke.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),dateRange2:this.fb.group({rangeType:[null],dates:this.fb.array([new a.g(null),new a.g(null)])},{validators:[Ke.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),lastTicketingPicUno:[null],bookingCode:[null],bookingItemCode:[null],gdsSubPnr:[null],airlinePnr:[null],bookerName:[null],bookerId:[null],travelerName:[null],ticketNo:[null],bookerMobileNo:[null],authCode:[null],promotionSeq:[null],deviceTypeCode:[null],bookingStatusCodes:[null],domesticYn:[null],autoTicketingStatusCodes:[null],requestStatusCodes:[null],controlBranchCode:[null],bookerCompCodes:[null],ticketingStatusCode:[null],paymentStatusCode:[null],destinationContinentCodes:[null],viaAirportCode:[null],airlineCodes:[null,[Ke.a.airlineCodesStringValidator]],fopCode:[null],paymentEvidenceAttachedYn:[null],fareEvidenceAttachedYn:[null],evidenceNeededYn:[null],beforePayTicketingYn:[null]}),this.initSearchFormData=()=>({searchTypeCode:"BFT01",dateRange1:{rangeType:"FDA01",dates:[R().add(-1,"weeks").format("YYYY-MM-DD"),R().format("YYYY-MM-DD")]},dateRange2:{rangeType:"FDA02",dates:[null,null]},lastTicketingPicUno:null,bookingCode:null,bookingItemCode:null,gdsSubPnr:null,airlinePnr:null,bookerName:null,bookerId:null,travelerName:null,ticketNo:null,bookerMobileNo:null,authCode:null,promotionSeq:null,deviceTypeCode:null,bookingStatusCodes:null,domesticYn:null,autoTicketingStatusCodes:null,requestStatusCodes:null,ticketingStatusCode:null,paymentStatusCode:null,airlineCodes:null,fopCode:null,paymentEvidenceAttachedYn:null,fareEvidenceAttachedYn:null,evidenceNeededYn:null,beforePayTicketingYn:null}),this.initSearchCondition=()=>({searchTypeCode:null,dateRange1:{rangeType:null,dates:null},dateRange2:{rangeType:null,dates:null},lastTicketingPicUno:null,bookingCode:null,bookingItemCode:null,gdsSubPnr:null,airlinePnr:null,bookerName:null,bookerId:null,travelerName:null,ticketNo:null,bookerMobileNo:null,authCode:null,promotionSeq:null,stationTypeCode:null,deviceTypeCode:null,bookingStatusCodes:null,domesticYn:null,autoTicketingStatusCodes:null,requestStatusCodes:null,ticketingStatusCode:null,paymentStatusCode:null,airlineCodes:null,fopCode:null,paymentEvidenceAttachedYn:null,fareEvidenceAttachedYn:null,evidenceNeededYn:null,beforePayTicketingYn:null,sortOrder:null,limits:null}),this.generateAssignPicPutForm=()=>this.fb.group({itemCategoryCode:[null],picTypeCode:[null],picUno:[null],picName:[null]}),this.initAssignPicPutForm=()=>({itemCategoryCode:"IC01",picTypeCode:"PIC04",picUno:null,picName:null})}}return e.\u0275fac=function(t){return new(t||e)(Ye.bc(a.f))},e.\u0275prov=Ye.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var qe=i("+Sob"),Xe=i("nMd8"),Je=i("rbKv"),Ze=i("kd+X"),et=i("LVFn"),tt=i("U6NN"),it=i("gbCm"),nt=i("0xcq");function ot(e,t){1&e&&Ye.Rb(0,"app-input-text",46)}function at(e,t){1&e&&Ye.Rb(0,"app-input-text",47)}function st(e,t){1&e&&Ye.Rb(0,"app-input-text",48)}function ct(e,t){1&e&&Ye.Rb(0,"app-input-text",49)}function lt(e,t){1&e&&Ye.Rb(0,"app-input-text",50)}function rt(e,t){1&e&&Ye.Rb(0,"app-input-text",51)}function ut(e,t){1&e&&Ye.Rb(0,"app-input-text",52)}function dt(e,t){1&e&&Ye.Rb(0,"app-input-text",53)}function pt(e,t){1&e&&Ye.Rb(0,"app-input-text",54)}function bt(e,t){1&e&&Ye.Rb(0,"app-input-text",55)}function gt(e,t){1&e&&Ye.Rb(0,"app-input-text",56)}const mt=function(){return{standalone:!0}},ht=function(){return{userTypeCode:"U01"}},Ct=function(){return["userNo","name","deptName","positionName"]};let ft=(()=>{class e{constructor(e,t){this.fb=e,this._dataService=t,this.clickSearchEvent=new Ye.n,this.clickResetEvent=new Ye.n,this.isShowmore=!1,this.searchForm=t.generateListSearchForm()}get dateRangeTypeList(){return this._dataRangeTypeList}set dateRangeTypeList(e){this._dataRangeTypeList=e,this._initDateRangeList(e)}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e),this._initDateRangeList(this.dateRangeTypeList)}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(e){this._otherSearchInfo=e,this._setOtherSearchInfo(e)}get searchFormValid(){return this.searchForm.valid}get dateRange1Dates(){return this.searchForm.get("dateRange1").get("dates").value}get dateRange2Dates(){return this.searchForm.get("dateRange2").get("dates").value}get formValue(){return this.searchForm&&this.searchForm.value}ngOnInit(){this._initState()}ngOnDestroy(){}checkIsInvalidDateRange(e){var t;return this._checkValid&&(!0===(null===(t=e.errors)||void 0===t?void 0:t.rangeCompare)||e.invalid)}checkIsInvalid(e){return this._checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}onSubmit(){if(this.searchForm.invalid)return void(this._checkValid=!0);const e=this.setSearchCondition(),t=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:e,otherSearchInfo:t}),this._checkValid=!1}onReset(){this.clickResetEvent.emit()}setSearchCondition(){const e=this._dataService.initSearchCondition(),t=Object.assign({},N.pick(this.searchForm.value,Object.keys(e)));return N.omitBy(t,N.isNil)}onChangerangeType1({value:e}){this.dateRangeTypeList2=this.dateRangeTypeList.filter(t=>t.detailCode!==e),this.searchForm.get("dateRange2").get("rangeType").setValue(this.dateRangeTypeList2[0].detailCode)}onChangeTextSearchType({value:e}){const t=this.searchForm.get(this.selectedCodeTypeDropdown).value;let i={bookingCode:null,bookingItemCode:null,gdsSubPnr:null,airlinePnr:null,bookerName:null,bookerId:null,travelerName:null,ticketNo:null,bookerMobileNo:null,authCode:null,promotionSeq:null};i[e]=t,this.searchForm.patchValue(i),this.selectedCodeTypeDropdown=e}_setSearchFormData(e){const t=this._dataService.initSearchFormData();return Object.assign({},t,N.pick(e,Object.keys(t)))}_setOtherSearchInfo(e){this.selectedCodeTypeDropdown=(null==e?void 0:e.selectedCodeTypeDropdown)||"bookingCode",this.lastTicketingPicInput=(null==e?void 0:e.lastTicketingPicInput)||null}_setOtherSearchCondition(){const e={selectedCodeTypeDropdown:this.selectedCodeTypeDropdown};return this.autoCopmpletes.forEach(t=>{Object.assign(e,t.getInputValue())}),e}_initDateRangeList(e){var t,i;const n=null===(i=null===(t=this.searchCondition)||void 0===t?void 0:t.dateRange1)||void 0===i?void 0:i.rangeType;this.dateRangeTypeList2=null==e?void 0:e.filter(e=>e.detailCode!==n)}_initState(){this.useYnOptions=[{value:!0,label:"Y"},{value:!1,label:"N"}],this.codeTypeOptions=[{label:"Booking Code",value:"bookingCode"},{label:"Booking Item Code",value:"bookingItemCode"},{label:"GDS PNR",value:"gdsSubPnr"},{label:"Airline PNR",value:"airlinePnr"},{label:"Booker",value:"bookerName"},{label:"BookerID",value:"bookerId"},{label:"Traveler",value:"travelerName"},{label:"Ticket No.",value:"ticketNo"},{label:"Mobile No.",value:"bookerMobileNo"}],this.domesticOptions=[{value:!1,label:"International"},{value:!0,label:"Domestic"}]}}return e.\u0275fac=function(t){return new(t||e)(Ye.Qb(a.f),Ye.Qb(Qe))},e.\u0275cmp=Ye.Kb({type:e,selectors:[["app-fl-reservation-list-b2c-ticketing-search"]],viewQuery:function(e,t){var i;1&e&&Ye.Xc(_e.a,!0),2&e&&Ye.Dc(i=Ye.gc())&&(t.autoCopmpletes=i)},inputs:{dateRangeTypeList:"dateRangeTypeList",bookingStatusList:"bookingStatusList",fopCodeList:"fopCodeList",paymentStatusCodeList:"paymentStatusCodeList",ticketingStatusCodeList:"ticketingStatusCodeList",searchCondition:"searchCondition",otherSearchInfo:"otherSearchInfo"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:89,vars:62,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],["formGroupName","dateRange1",1,"col-2","flex-shrink1"],["formControlName","rangeType","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-shrink-0",3,"options","useAllOptionYn","onChange"],["formArrayName","dates",1,"calendar-set","flex-fill"],[1,"input","calendar","d-inline-flex","flex-fill"],[3,"for"],["type","text",3,"matDatepicker","formControlName"],["fromDate1",""],[1,"dash"],["type","text",3,"matDatepicker","min","formControlName"],["toDate1",""],["formGroupName","dateRange2",1,"col-2","flex-shrink1"],["formControlName","rangeType","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-shrink-0",3,"options","useAllOptionYn"],["type","text","placeholder","yyyy-mm-dd",3,"matDatepicker","formControlName"],["fromDate2",""],["type","text","placeholder","yyyy-mm-dd",3,"matDatepicker","min","formControlName"],["toDate2",""],[1,"col-1"],[1,"d-inline-flex","flex-shrink-0","mr5",3,"options","ngModel","ngModelOptions","useAllOptionYn","onChange"],[3,"ngSwitch"],["formControlName","bookingCode","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","bookingItemCode","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","gdsSubPnr","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","airlinePnr","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","bookerName","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","bookerId","class","d-inline flex-fill","placeholder","","valueType","string",4,"ngSwitchCase"],["formControlName","travelerName","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","ticketNo","class","d-inline flex-fill","placeholder","","valueType","string",4,"ngSwitchCase"],["formControlName","bookerMobileNo","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","authCode","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","promotionSeq","class","d-inline flex-fill","valueType","number",4,"ngSwitchCase"],[1,"form-label"],["formControlName","airlineCodes","placeholder","e.g. KE","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","bookingStatusCodes","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options","useAllOptionYn"],["formControlName","paymentStatusCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","ticketingStatusCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","evidenceNeededYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","fopCode","dataKey","detailCode","displayKey","detailCodeNameEn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","domesticYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","lastTicketingPicUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","apiCondition","inputFieldFormatKeyList"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"],[1,"btn-searchbox-extend",3,"click"],["formControlName","bookingCode","valueType","string",1,"d-inline","flex-fill"],["formControlName","bookingItemCode","valueType","string",1,"d-inline","flex-fill"],["formControlName","gdsSubPnr","valueType","string",1,"d-inline","flex-fill"],["formControlName","airlinePnr","valueType","string",1,"d-inline","flex-fill"],["formControlName","bookerName","valueType","string",1,"d-inline","flex-fill"],["formControlName","bookerId","placeholder","","valueType","string",1,"d-inline","flex-fill"],["formControlName","travelerName","valueType","string",1,"d-inline","flex-fill"],["formControlName","ticketNo","placeholder","","valueType","string",1,"d-inline","flex-fill"],["formControlName","bookerMobileNo","valueType","string",1,"d-inline","flex-fill"],["formControlName","authCode","valueType","string",1,"d-inline","flex-fill"],["formControlName","promotionSeq","valueType","number",1,"d-inline","flex-fill"]],template:function(e,t){if(1&e&&(Ye.Wb(0,"form",0),Ye.fc("ngSubmit",(function(){return t.onSubmit()})),Ye.Wb(1,"div",1),Ye.Wb(2,"div",2),Ye.Wb(3,"div",3),Ye.Wb(4,"app-selectbox-detailcode",4),Ye.fc("onChange",(function(e){return t.onChangerangeType1(e)})),Ye.Vb(),Ye.Wb(5,"div",5),Ye.Wb(6,"div",6),Ye.Rb(7,"mat-datepicker-toggle",7),Ye.Rb(8,"input",8),Ye.Rb(9,"mat-datepicker",null,9),Ye.Vb(),Ye.Wb(11,"span",10),Ye.Pc(12,"~"),Ye.Vb(),Ye.Wb(13,"div",6),Ye.Rb(14,"mat-datepicker-toggle",7),Ye.Rb(15,"input",11),Ye.Rb(16,"mat-datepicker",null,12),Ye.Vb(),Ye.Vb(),Ye.Vb(),Ye.Wb(18,"div",13),Ye.Rb(19,"app-selectbox-detailcode",14),Ye.Wb(20,"div",5),Ye.Wb(21,"div",6),Ye.Rb(22,"mat-datepicker-toggle",7),Ye.Rb(23,"input",15),Ye.Rb(24,"mat-datepicker",null,16),Ye.Vb(),Ye.Wb(26,"span",10),Ye.Pc(27,"~"),Ye.Vb(),Ye.Wb(28,"div",6),Ye.Rb(29,"mat-datepicker-toggle",7),Ye.Rb(30,"input",17),Ye.Rb(31,"mat-datepicker",null,18),Ye.Vb(),Ye.Vb(),Ye.Vb(),Ye.Vb(),Ye.Wb(33,"div",2),Ye.Wb(34,"div",19),Ye.Wb(35,"app-selectbox",20),Ye.fc("onChange",(function(e){return t.onChangeTextSearchType(e)})),Ye.Vb(),Ye.Ub(36,21),Ye.Nc(37,ot,1,0,"app-input-text",22),Ye.Nc(38,at,1,0,"app-input-text",23),Ye.Nc(39,st,1,0,"app-input-text",24),Ye.Nc(40,ct,1,0,"app-input-text",25),Ye.Nc(41,lt,1,0,"app-input-text",26),Ye.Nc(42,rt,1,0,"app-input-text",27),Ye.Nc(43,ut,1,0,"app-input-text",28),Ye.Nc(44,dt,1,0,"app-input-text",29),Ye.Nc(45,pt,1,0,"app-input-text",30),Ye.Nc(46,bt,1,0,"app-input-text",31),Ye.Nc(47,gt,1,0,"app-input-text",32),Ye.Tb(),Ye.Vb(),Ye.Wb(48,"div",19),Ye.Wb(49,"span",33),Ye.Pc(50,"Airline"),Ye.Vb(),Ye.Rb(51,"app-input-text",34),Ye.Vb(),Ye.Wb(52,"div",19),Ye.Wb(53,"span",33),Ye.Pc(54,"Booking Status"),Ye.Vb(),Ye.Rb(55,"app-multi-select-detailcode",35),Ye.Vb(),Ye.Wb(56,"div",19),Ye.Wb(57,"span",33),Ye.Pc(58,"C.Payment Status"),Ye.Vb(),Ye.Rb(59,"app-selectbox-detailcode",36),Ye.Vb(),Ye.Vb(),Ye.Wb(60,"div",2),Ye.Wb(61,"div",19),Ye.Wb(62,"span",33),Ye.Pc(63,"Issued Status"),Ye.Vb(),Ye.Rb(64,"app-selectbox-detailcode",37),Ye.Vb(),Ye.Wb(65,"div",19),Ye.Wb(66,"span",33),Ye.Pc(67,"Evidence Needed YN"),Ye.Vb(),Ye.Rb(68,"app-selectbox",38),Ye.Vb(),Ye.Wb(69,"div",19),Ye.Wb(70,"span",33),Ye.Pc(71,"FOP"),Ye.Vb(),Ye.Rb(72,"app-selectbox",39),Ye.Vb(),Ye.Wb(73,"div",19),Ye.Wb(74,"span",33),Ye.Pc(75,"I/D"),Ye.Vb(),Ye.Rb(76,"app-selectbox",40),Ye.Vb(),Ye.Vb(),Ye.Wb(77,"div",2),Ye.Wb(78,"div",19),Ye.Wb(79,"span",33),Ye.Pc(80,"Ticketing PIC"),Ye.Vb(),Ye.Rb(81,"app-auto-complete",41),Ye.Vb(),Ye.Vb(),Ye.Vb(),Ye.Wb(82,"div",42),Ye.Wb(83,"button",43),Ye.Pc(84,"Search"),Ye.Vb(),Ye.Wb(85,"button",44),Ye.fc("click",(function(){return t.onReset()})),Ye.Pc(86,"Reset"),Ye.Vb(),Ye.Wb(87,"a",45),Ye.fc("click",(function(){return t.isShowmore=!t.isShowmore})),Ye.Pc(88,"\uac80\uc0c9 \uc635\uc158 \ub354\ubcf4\uae30"),Ye.Vb(),Ye.Vb(),Ye.Vb()),2&e){const e=Ye.Ec(10),i=Ye.Ec(17),n=Ye.Ec(25),o=Ye.Ec(32);Ye.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),Ye.Cb(4),Ye.pc("options",t.dateRangeTypeList)("useAllOptionYn",!1),Ye.Cb(1),Ye.Gb("valid-error",t.checkIsInvalidDateRange(t.searchForm.get("dateRange1"))),Ye.Cb(2),Ye.pc("for",e),Ye.Cb(1),Ye.pc("matDatepicker",e)("formControlName",0),Ye.Cb(6),Ye.pc("for",i),Ye.Cb(1),Ye.pc("matDatepicker",i)("min",t.dateRange1Dates[0])("formControlName",1),Ye.Cb(4),Ye.pc("options",t.dateRangeTypeList2)("useAllOptionYn",!1),Ye.Cb(1),Ye.Gb("valid-error",t.checkIsInvalidDateRange(t.searchForm.get("dateRange2"))),Ye.Cb(2),Ye.pc("for",n),Ye.Cb(1),Ye.pc("matDatepicker",n)("formControlName",0),Ye.Cb(6),Ye.pc("for",o),Ye.Cb(1),Ye.pc("matDatepicker",o)("min",t.dateRange2Dates[0])("formControlName",1),Ye.Cb(5),Ye.pc("options",t.codeTypeOptions)("ngModel",t.selectedCodeTypeDropdown)("ngModelOptions",Ye.tc(59,mt))("useAllOptionYn",!1),Ye.Cb(1),Ye.pc("ngSwitch",t.selectedCodeTypeDropdown),Ye.Cb(1),Ye.pc("ngSwitchCase","bookingCode"),Ye.Cb(1),Ye.pc("ngSwitchCase","bookingItemCode"),Ye.Cb(1),Ye.pc("ngSwitchCase","gdsSubPnr"),Ye.Cb(1),Ye.pc("ngSwitchCase","airlinePnr"),Ye.Cb(1),Ye.pc("ngSwitchCase","bookerName"),Ye.Cb(1),Ye.pc("ngSwitchCase","bookerId"),Ye.Cb(1),Ye.pc("ngSwitchCase","travelerName"),Ye.Cb(1),Ye.pc("ngSwitchCase","ticketNo"),Ye.Cb(1),Ye.pc("ngSwitchCase","bookerMobileNo"),Ye.Cb(1),Ye.pc("ngSwitchCase","authCode"),Ye.Cb(1),Ye.pc("ngSwitchCase","promotionSeq"),Ye.Cb(4),Ye.pc("isInvalid",t.checkIsInvalid("airlineCodes")),Ye.Cb(4),Ye.pc("options",t.bookingStatusList)("useAllOptionYn",!0),Ye.Cb(4),Ye.pc("options",t.paymentStatusCodeList),Ye.Cb(1),Ye.Gb("hide",!t.isShowmore),Ye.Cb(4),Ye.pc("options",t.ticketingStatusCodeList),Ye.Cb(4),Ye.pc("options",t.useYnOptions),Ye.Cb(4),Ye.pc("options",t.fopCodeList),Ye.Cb(4),Ye.pc("options",t.domesticOptions),Ye.Cb(1),Ye.Gb("hide",!t.isShowmore),Ye.Cb(4),Ye.pc("inputFieldValue",t.lastTicketingPicInput)("inputId","lastTicketingPicInput")("apiSearchTerm","name")("apiCondition",Ye.tc(60,ht))("inputFieldFormatKeyList",Ye.tc(61,Ct)),Ye.Cb(6),Ye.Gb("active",t.isShowmore)}},directives:[a.B,a.s,a.k,qe.a,a.l,Xe.a,a.r,a.i,a.e,Je.a,Ze.a,a.c,et.a,tt.a,a.u,o.q,o.r,it.a,nt.a,_e.a],encapsulation:2,changeDetection:0}),e})();var kt=i("EsKh");let St=(()=>{class e{constructor(e){this.alertService=e,this.changePageSizeEvent=new Ye.n,this.clickViewBookingsEvent=new Ye.n,this.clickAssignPicEvent=new Ye.n,this.clickUmsEvent=new Ye.n,this.clickAutoStatusEvent=new Ye.n,this.excelDownloadEvent=new Ye.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onChangePageSize(e){this.changePageSizeEvent.emit(e.value)}onClickViewBookings(){this.clickViewBookingsEvent.emit()}onClickAutoStatus(){this.clickAutoStatusEvent.emit()}onClickUMS(){this.clickUmsEvent.emit()}onClickAssignPic(){this.clickAssignPicEvent.emit()}onClickExcel(){this.excelDownloadEvent.emit()}}return e.\u0275fac=function(t){return new(t||e)(Ye.Qb(kt.a))},e.\u0275cmp=Ye.Kb({type:e,selectors:[["app-fl-reservation-list-b2c-ticketing-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{changePageSizeEvent:"changePageSizeEvent",clickViewBookingsEvent:"clickViewBookingsEvent",clickAssignPicEvent:"clickAssignPicEvent",clickUmsEvent:"clickUmsEvent",clickAutoStatusEvent:"clickAutoStatusEvent",excelDownloadEvent:"excelDownloadEvent"},decls:9,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count",2,"min-width","30px"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm","d-inline-flex","flex-glow-0",3,"click"],[1,"sm","d-inline-flex","flex-glow-0","sm",3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&(Ye.Wb(0,"div",0),Ye.Wb(1,"strong",1),Ye.Pc(2),Ye.Vb(),Ye.Wb(3,"div",2),Ye.Wb(4,"button",3),Ye.fc("click",(function(){return t.onClickAssignPic()})),Ye.Pc(5,"Assign Ticketing PIC"),Ye.Vb(),Ye.Wb(6,"button",3),Ye.fc("click",(function(){return t.onClickExcel()})),Ye.Pc(7,"Excel"),Ye.Vb(),Ye.Wb(8,"app-selectbox",4),Ye.fc("onChange",(function(e){return t.onChangePageSize(e)})),Ye.Vb(),Ye.Vb(),Ye.Vb()),2&e&&(Ye.Cb(2),Ye.Qc(t.loading?"":t.totalCount),Ye.Cb(6),Ye.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[tt.a,a.r,a.u],encapsulation:2,changeDetection:0}),e})(),vt=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ye.Kb({type:e,selectors:[["app-fl-reservation-list-b2c-ticketing-summary"]],inputs:{summary:"summary"},decls:68,vars:30,consts:[[1,"table","table-bordered","mt30"],["width","10%"],["scope","row",1,"th-bg"]],template:function(e,t){1&e&&(Ye.Wb(0,"div",0),Ye.Wb(1,"table"),Ye.Wb(2,"caption"),Ye.Pc(3," \ud56d\uacf5 \ubc1c\uad8c\uc608\uc57d\uc870\ud68c summary "),Ye.Vb(),Ye.Wb(4,"colgroup"),Ye.Rb(5,"col",1),Ye.Rb(6,"col",1),Ye.Rb(7,"col",1),Ye.Rb(8,"col",1),Ye.Rb(9,"col",1),Ye.Rb(10,"col",1),Ye.Rb(11,"col",1),Ye.Rb(12,"col",1),Ye.Rb(13,"col",1),Ye.Rb(14,"col",1),Ye.Vb(),Ye.Wb(15,"tbody"),Ye.Wb(16,"tr"),Ye.Wb(17,"th",2),Ye.Pc(18,"\ucd1d \uac74\uc218"),Ye.Vb(),Ye.Wb(19,"td"),Ye.Pc(20),Ye.ic(21,"number"),Ye.Vb(),Ye.Wb(22,"th",2),Ye.Pc(23,"\ucd1d \uc778\uc6d0"),Ye.Vb(),Ye.Wb(24,"td"),Ye.Pc(25),Ye.ic(26,"number"),Ye.Vb(),Ye.Wb(27,"th",2),Ye.Pc(28,"\ucd1d \ud310\ub9e4 \ud569\uacc4"),Ye.Vb(),Ye.Wb(29,"td"),Ye.Pc(30),Ye.ic(31,"number"),Ye.Vb(),Ye.Wb(32,"th",2),Ye.Pc(33,"\ud310\ub9e4NET"),Ye.Vb(),Ye.Wb(34,"td"),Ye.Pc(35),Ye.ic(36,"number"),Ye.Vb(),Ye.Wb(37,"th",2),Ye.Pc(38,"\ud310\ub9e4TAX"),Ye.Vb(),Ye.Wb(39,"td"),Ye.Pc(40),Ye.ic(41,"number"),Ye.Vb(),Ye.Vb(),Ye.Wb(42,"tr"),Ye.Wb(43,"th",2),Ye.Pc(44,"\ubc1c\uad8c TASF \ud569\uacc4"),Ye.Vb(),Ye.Wb(45,"td"),Ye.Pc(46),Ye.ic(47,"number"),Ye.Vb(),Ye.Wb(48,"th",2),Ye.Pc(49,"\uc218\uc785\ucef4"),Ye.Vb(),Ye.Wb(50,"td"),Ye.Pc(51),Ye.ic(52,"number"),Ye.Vb(),Ye.Wb(53,"th",2),Ye.Pc(54,"\ud560\uc778/\ud560\uc99d\uae08\uc561"),Ye.Vb(),Ye.Wb(55,"td"),Ye.Pc(56),Ye.ic(57,"number"),Ye.Vb(),Ye.Wb(58,"th",2),Ye.Pc(59,"\uc9c0\uae09\ucef4"),Ye.Vb(),Ye.Wb(60,"td"),Ye.Pc(61),Ye.ic(62,"number"),Ye.Vb(),Ye.Wb(63,"th",2),Ye.Pc(64,"\uc21c\uc218\uc775"),Ye.Vb(),Ye.Wb(65,"td"),Ye.Pc(66),Ye.ic(67,"number"),Ye.Vb(),Ye.Vb(),Ye.Vb(),Ye.Vb(),Ye.Vb()),2&e&&(Ye.Cb(20),Ye.Qc(Ye.jc(21,10,null==t.summary?null:t.summary.sumItemCount)),Ye.Cb(5),Ye.Qc(Ye.jc(26,12,null==t.summary?null:t.summary.sumPaxCount)),Ye.Cb(5),Ye.Qc(Ye.jc(31,14,null==t.summary?null:t.summary.sumAmount)),Ye.Cb(5),Ye.Qc(Ye.jc(36,16,null==t.summary?null:t.summary.sumNetAmount)),Ye.Cb(5),Ye.Qc(Ye.jc(41,18,null==t.summary?null:t.summary.sumTaxAmount)),Ye.Cb(6),Ye.Qc(Ye.jc(47,20,null==t.summary?null:t.summary.sumTasfAmount)),Ye.Cb(5),Ye.Qc(Ye.jc(52,22,null==t.summary?null:t.summary.sumAirlineCommAmount)),Ye.Cb(5),Ye.Qc(Ye.jc(57,24,null==t.summary?null:t.summary.sumDiscountUpsellAmount)),Ye.Cb(5),Ye.Qc(Ye.jc(62,26,null==t.summary?null:t.summary.sumAgencyCommAmount)),Ye.Cb(5),Ye.Qc(Ye.jc(67,28,null==t.summary?null:t.summary.sumRevenueAmount)))},pipes:[o.f],encapsulation:2,changeDetection:0}),e})();const Ot=function(){return{userTypeCode:"U01"}},jt=function(){return["userNo","name","deptName","positionName"]};let yt=(()=>{class e{constructor(e){this._dataService=e,this.submitEvent=new Ye.n,this.closeEvent=new Ye.n,this._$unsubscribe=new j.a,this.putForm=e.generateAssignPicPutForm(),this.putFormData=e.initAssignPicPutForm()}get loginUser(){return this._loginUser}set loginUser(e){if(e){this.picInput=`${e.userNo}-${e.name}${e.deptName?`,${e.deptName}`:""}${e.positionName?`,${e.positionName}`:""}`;const t=this._dataService.initAssignPicPutForm();this.putFormData=Object.assign(Object.assign({},t),{picUno:e.userNo,picName:e.name})}}ngOnInit(){this._initThisState(),this._initSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.putForm.invalid)return void(this.checkValid=!0);const e=this._setPutCondition(this.putForm.getRawValue());this.submitEvent.emit(e)}onClose(){this.closeEvent.emit()}checkIsInvalid(e){return this.checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}onSelectBookingPicUno(e){this.putForm.get("picName").setValue(e.name)}_initThisState(){this.checkValid=!1}_setPutCondition(e){return{list:this.checkedList.reduce((t,i)=>{const{bookingItemCode:n}=i;return N.isNil(i.firstTicketingPicUno)&&t.push({bookingItemCode:n,itemCategoryCode:"IC01",picTypeCode:"PIC03",picUno:e.picUno,picName:e.picName}),t.push(Object.assign(Object.assign({},e),{bookingItemCode:n})),t},[])}}_initSubscription(){this.putForm.get("picUno").valueChanges.pipe(Object(A.a)(this._$unsubscribe)).subscribe(e=>{N.isNil(e)&&this.putForm.get("picName").setValue(null)})}}return e.\u0275fac=function(t){return new(t||e)(Ye.Qb(Qe))},e.\u0275cmp=Ye.Kb({type:e,selectors:[["app-fl-reservation-list-b2c-ticketing-assign-pic-form"]],inputs:{checkedList:"checkedList",loginUser:"loginUser"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:20,vars:9,consts:[[1,"modal-body"],[3,"formGroup","connectForm","ngSubmit"],[1,"table","table-bordered"],["width","170px"],["scope","row",1,"th-bg"],["formControlName","picUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name",3,"inputFieldValue","apiSearchTerm","apiCondition","inputFieldFormatKeyList","isInvalid","onSelect"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(e,t){1&e&&(Ye.Wb(0,"div",0),Ye.Wb(1,"form",1),Ye.fc("ngSubmit",(function(){return t.onSubmit()})),Ye.Wb(2,"div",2),Ye.Wb(3,"table"),Ye.Wb(4,"caption"),Ye.Pc(5," Ticketing PIC "),Ye.Vb(),Ye.Wb(6,"colgroup"),Ye.Rb(7,"col",3),Ye.Rb(8,"col"),Ye.Vb(),Ye.Wb(9,"tbody"),Ye.Wb(10,"tr"),Ye.Wb(11,"th",4),Ye.Pc(12,"Ticketing PIC"),Ye.Vb(),Ye.Wb(13,"td"),Ye.Wb(14,"app-auto-complete",5),Ye.fc("onSelect",(function(e){return t.onSelectBookingPicUno(e)})),Ye.Vb(),Ye.Vb(),Ye.Vb(),Ye.Vb(),Ye.Vb(),Ye.Vb(),Ye.Wb(15,"div",6),Ye.Wb(16,"button",7),Ye.Pc(17,"Save"),Ye.Vb(),Ye.Wb(18,"button",8),Ye.fc("click",(function(){return t.onClose()})),Ye.Pc(19,"Close"),Ye.Vb(),Ye.Vb(),Ye.Vb(),Ye.Vb()),2&e&&(Ye.Cb(1),Ye.pc("formGroup",t.putForm)("connectForm",t.putFormData),Ye.Cb(13),Ye.pc("inputFieldValue",t.picInput)("apiSearchTerm","name")("apiCondition",Ye.tc(7,Ot))("inputFieldFormatKeyList",Ye.tc(8,jt))("isInvalid",t.checkIsInvalid("picUno")))},directives:[a.B,a.s,a.k,qe.a,_e.a,a.r,a.i],encapsulation:2,changeDetection:0}),e})();var Pt=i("UIHd"),Lt=i("7G9D"),Tt=i("hna1"),At=i("kDLv"),Nt=i("i7jD"),Rt=i("/Bmo"),It=i("B4Xv");function xt(e,t){if(1&e){const e=Ye.Xb();Ye.Wb(0,"a",14),Ye.fc("click",(function(){Ye.Fc(e);const i=t.$implicit;return Ye.hc().clickBookingItemCode(i.bookingItemCode)})),Ye.Wb(1,"span",15),Ye.Pc(2),Ye.Vb(),Ye.Vb()}if(2&e){const e=t.$implicit;Ye.Cb(2),Ye.Qc(e.bookingItemCode)}}function Dt(e,t){if(1&e&&(Ye.Wb(0,"span"),Ye.Pc(1),Ye.Vb()),2&e){const e=t.$implicit;Ye.Cb(1),Ye.Sc("",e.ticketIssuedPaxCount,"/",e.totalPaxCount,"")}}function Vt(e,t){if(1&e&&(Ye.Wb(0,"span"),Ye.Pc(1),Ye.ic(2,"formatDate"),Ye.Vb()),2&e){const e=t.$implicit,i=Ye.hc();Ye.Gb("color-red",i.isToday(e.fareCancelDeadline))("font-weight-bold",i.isToday(e.fareCancelDeadline)),Ye.Cb(1),Ye.Rc(" ",Ye.kc(2,5,e.fareCancelDeadline,"YYYY-MM-DD HH:mm")," ")}}function Ft(e,t){if(1&e&&(Ye.Wb(0,"span"),Ye.Pc(1),Ye.ic(2,"formatDate"),Ye.Vb()),2&e){const e=t.$implicit,i=Ye.hc();Ye.Gb("color-red",i.isToday(e.airlineCancelDeadline))("font-weight-bold",i.isToday(e.airlineCancelDeadline)),Ye.Cb(1),Ye.Rc(" ",Ye.kc(2,5,e.airlineCancelDeadline,"YYYY-MM-DD HH:mm")," ")}}function Et(e,t){if(1&e){const e=Ye.Xb();Ye.Wb(0,"app-auto-status",16),Ye.fc("submitEvent",(function(t){return Ye.Fc(e),Ye.hc().submitAutoStatusHandler(t)}))("closeEvent",(function(){return Ye.Fc(e),Ye.hc().closeAutoStatusHandler()})),Ye.Vb()}if(2&e){const e=Ye.hc();Ye.pc("bookingItemCodes",e.bookingItemCodes)}}function wt(e,t){if(1&e){const e=Ye.Xb();Ye.Wb(0,"app-fl-reservation-list-b2c-ticketing-assign-pic-form",17),Ye.fc("submitEvent",(function(t){return Ye.Fc(e),Ye.hc().submitAssignPicHandler(t)}))("closeEvent",(function(){return Ye.Fc(e),Ye.hc().closeAssignPicHandler()})),Ye.ic(1,"async"),Ye.Vb()}if(2&e){const e=Ye.hc();Ye.pc("checkedList",e.checkedList)("loginUser",Ye.jc(1,2,e.loginUser$))}}function Wt(e,t){if(1&e&&(Ye.Rb(0,"app-ums",18),Ye.ic(1,"async")),2&e){const e=Ye.hc();Ye.pc("active",Ye.jc(1,3,e.isOpenUmsPopup$))("bookers",e.umsReceiver)("bookingItemCode",e.umsBookingItemCode)}}const $t=function(e,t,i,n){return{bookingItemCodeTpl:e,ticketIssuedPaxCountTpl:t,fareCancelDeadlineTpl:i,airlineCancelDeadlineTpl:n}};let Bt=(()=>{class e{constructor(e,t,i,n,o,a){this.store=e,this.dataService=t,this._fileService=i,this.authStore=n,this.alertService=o,this._reservationService=a,this.unsubscribe$=new j.a,this.dateRangeTypeList$=e.pipe(Object(c.u)(Ce)),this.bookingStatusList$=e.pipe(Object(c.u)(fe)),this.fopCodeList$=e.pipe(Object(c.u)(ke)),this.paymentStatusCodeList$=e.pipe(Object(c.u)(ve)),this.ticketingStatusCodeList$=e.pipe(Object(c.u)(Se)),this.loading$=e.pipe(Object(c.u)(Oe)),this.reloadToggle$=e.pipe(Object(c.u)(je)),this.searchCondition$=e.pipe(Object(c.u)(ye)),this.otherSearchInfo$=e.pipe(Object(c.u)(Pe)),this.gridDataList$=e.pipe(Object(c.u)(Le)),this.gridSummary$=e.pipe(Object(c.u)(Ae)),this.gridState$=e.pipe(Object(c.u)(Ne)),this.gridCheckedState$=e.pipe(Object(c.u)(Re)),this.gridDataTotal$=e.pipe(Object(c.u)(Te)),this.listPageSize$=e.pipe(Object(c.u)(Ee)),this.isOpenUmsPopup$=e.pipe(Object(c.u)(Ie)),this.isOpenAssignPicPopup$=e.pipe(Object(c.u)(xe)),this.isOpenAutoStatusPopup$=e.pipe(Object(c.u)(De)),this.isOpenRefundCancelPopup$=e.pipe(Object(c.u)(Ve)),this.selectedRowItem$=e.pipe(Object(c.u)(Fe)),this.loginUser$=n.pipe(Object(c.u)(we.r)),this.columns=this.dataService.generateGridColumns(),this._initSubscription()}get bookingItemCodes(){var e,t;return null===(t=null===(e=this.gridEl)||void 0===e?void 0:e.checkedDataList)||void 0===t?void 0:t.map(e=>e.bookingItemCode)}get checkedList(){var e;return(null===(e=this.gridEl)||void 0===e?void 0:e.checkedDataList)||[]}ngOnInit(){}ngAfterContentInit(){this.store.dispatch(n.loadDateRangeTypeListAction({condition:{masterCode:"FL053",useYn:!0}})),this.store.dispatch(n.loadBookingStatusListAction({condition:{masterCode:"BK001",referCode1:"IC01",useYn:!0}})),this.store.dispatch(n.loadFopCodeListAction({condition:{masterCode:"PM015",useYn:!0}})),this.store.dispatch(n.loadPaymentStatusCodeListAction({condition:{masterCode:"BK002",referCode1:"IC01"}})),this.store.dispatch(n.loadTicketingStatusCodeListAction({condition:{masterCode:"FL002"}}))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(n.initComponentStateAction()),this.store.dispatch(n.setGridCheckStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}changePageSizeHandler(e){this.store.dispatch(n.changePageSize({pageSize:e}))}clickSearchHandler({searchCondition:e,otherSearchInfo:t}){this.store.dispatch(n.changeSearchConditionAction({condition:e,otherSearchInfo:t})),this.store.dispatch(n.changePageIndex({pageIndex:0}))}clickResetHandler(){this.store.dispatch(n.changeSearchConditionAction({condition:{},otherSearchInfo:null}))}gridStateChangeHandler(e){this.store.dispatch(n.setGridStateAction({gridState:e}))}clickViewBookingsHandler(){this.gridEl.checkedDataList.length<1?this.alertService.alert("There are no items selected."):this._reservationService.openDetailWindow(this.gridEl.checkedDataList)}clickAssignPicHandler(){this.gridEl.checkedDataList.length<1?this.alertService.alert("There are no items selected."):this.store.dispatch(n.openAssignPicPopup())}closeAssignPicHandler(){this.store.dispatch(n.closeAssignPicPopup())}submitAssignPicHandler(e){const t=N.cloneDeep(e);this.store.dispatch(n.updateAssignPicItems({updateCondition:t}))}clickUmsHandler(){const e=this.gridEl.checkedDataList;e.length<1?this.alertService.alert("There are no items selected."):e.length>1?this.alertService.alert("UMS \uba54\uc2dc\uc9c0\ub97c \uc5ec\ub7ec \uc0ac\ub78c\uc5d0\uac8c \ubcf4\ub0bc \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."):(this.umsReceiver=e.map(e=>({name:e.bookerName,phoneNo:e.bookerMobileNo,emailAddress:e.bookerEmailAddress})),this.umsBookingItemCode=1===e.length?e[0].bookingItemCode:void 0,this.store.dispatch(n.openUmsPopup()))}closeUmsHandler(){this.umsBookingItemCode=void 0,this.store.dispatch(n.closeUmsPopup())}clickAutoStatusHandler(){this.store.dispatch(n.openAutoStatusPopupAction())}closeAutoStatusHandler(){this.store.dispatch(n.closeAutoStatusPopupAction())}submitAutoStatusHandler(e){this.store.dispatch(n.saveAutoStatusAction({condition:e}))}clickExcelHandler(){const e=this._changeConditionType(this.searchFormEl.formValue),t=this._setSearchCondition(e);this._fileService.fileDownload({url:Be.excelDownload,filename:"\ubc1c\uad8c\uc608\uc57d\uc870\ud68c\ub9ac\uc2a4\ud2b8(B2C)",type:"excel",params:t,requestMethod:"post"})}clickBookingItemCode(e){window.open(`${window.location.origin}/reservation/flight/${e}?tabName=PRICE`,"_blank","height=950,width=1800,left=0,top=0,toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=no,status=no")}isToday(e){return!!e&&I()().format("YYYY-MM-DD")===I()(e).format("YYYY-MM-DD")}_initSubscription(){Object(y.a)([this.searchCondition$,this.gridState$]).pipe(Object(P.a)(1),Object(L.a)(200),Object(T.a)(([e,t])=>!N.isEmpty(e)),Object(A.a)(this.unsubscribe$)).subscribe(([e,{pageInfo:t,sortInfo:i}])=>{const o=this._setSortOrder(i),a=[t.skip,t.skip+t.take],s=Object.assign({},this._setSearchCondition(e),{limits:a,sortOrder:o});this.store.dispatch(n.loadListAction({condition:this._changeConditionType(s)}))}),this.reloadToggle$.pipe(Object(P.a)(1),Object(A.a)(this.unsubscribe$)).subscribe(()=>{this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()})}_setSortOrder(e){return e.filter(e=>!N.isNil(e.dir)).map(e=>({keyName:e.field,sort:e.dir}))}_setSearchCondition(e){const t=e.dateRange2.dates.some(e=>N.isNil(e))?null:e.dateRange2.dates,i=Object.assign({},e,{dateRange2:t&&e.dateRange2});return N.omitBy(i,N.isNil)}_changeConditionType(e){const t=N.isNil(e.airlineCodes)?null:e.airlineCodes.replace(/\s+/g,"").split(",").filter(e=>e),i=Object.assign({},e,{airlineCodes:t});return N.omitBy(i,N.isNil)}}return e.\u0275fac=function(t){return new(t||e)(Ye.Qb(c.h),Ye.Qb(Qe),Ye.Qb(Lt.a),Ye.Qb(c.h),Ye.Qb(kt.a),Ye.Qb(Tt.a))},e.\u0275cmp=Ye.Kb({type:e,selectors:[["app-fl-reservation-list-b2c-ticketing"]],viewQuery:function(e,t){var i;1&e&&(Ye.Xc(ft,!0),Ye.Xc(Pt.a,!0)),2&e&&(Ye.Dc(i=Ye.gc())&&(t.searchFormEl=i.first),Ye.Dc(i=Ye.gc())&&(t.gridEl=i.first))},decls:39,vars:77,consts:[[3,"otherSearchInfo","searchCondition","dateRangeTypeList","bookingStatusList","fopCodeList","paymentStatusCodeList","ticketingStatusCodeList","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","changePageSizeEvent","clickViewBookingsEvent","clickAssignPicEvent","clickUmsEvent","clickAutoStatusEvent","excelDownloadEvent"],["bookingItemCodeTpl",""],["ticketIssuedPaxCountTpl",""],["fareCancelDeadlineTpl",""],["airlineCancelDeadlineTpl",""],[3,"gridLoading","columns","gridState","checkedState","totalCount","checkboxUseYn","sortable","dataList","templates","stateChangeEvent"],["gridEl",""],["modalSize","sm","modalContentClass","pd-all","header","\uc790\ub3d9\uc0c1\ud0dc \ubcc0\uacbd",3,"visible","modal","visibleChange"],[3,"bookingItemCodes","submitEvent","closeEvent",4,"ngIf"],["modalSize","sm","modalContentClass","pd-all","header","Assign Tickeing PIC",3,"visible","modal","hasScroll","visibleChange"],[3,"checkedList","loginUser","submitEvent","closeEvent",4,"ngIf"],["header","UMS \ubc1c\uc1a1 \uc815\ubcf4","modalSize","md","modalContentClass","pd-all",3,"visible","modal","visibleChange"],["itemCategoryCode","IC01",3,"active","bookers","bookingItemCode",4,"ngIf"],[3,"click"],[1,"text-underline","color-dark"],[3,"bookingItemCodes","submitEvent","closeEvent"],[3,"checkedList","loginUser","submitEvent","closeEvent"],["itemCategoryCode","IC01",3,"active","bookers","bookingItemCode"]],template:function(e,t){if(1&e&&(Ye.Wb(0,"app-fl-reservation-list-b2c-ticketing-search",0),Ye.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),Ye.ic(1,"async"),Ye.ic(2,"async"),Ye.ic(3,"async"),Ye.ic(4,"async"),Ye.ic(5,"async"),Ye.ic(6,"async"),Ye.ic(7,"async"),Ye.Vb(),Ye.Wb(8,"app-fl-reservation-list-b2c-ticketing-control",1),Ye.fc("changePageSizeEvent",(function(e){return t.changePageSizeHandler(e)}))("clickViewBookingsEvent",(function(){return t.clickViewBookingsHandler()}))("clickAssignPicEvent",(function(){return t.clickAssignPicHandler()}))("clickUmsEvent",(function(){return t.clickUmsHandler()}))("clickAutoStatusEvent",(function(){return t.clickAutoStatusHandler()}))("excelDownloadEvent",(function(){return t.clickExcelHandler()})),Ye.ic(9,"async"),Ye.ic(10,"async"),Ye.ic(11,"async"),Ye.Vb(),Ye.Nc(12,xt,3,1,"ng-template",null,2,Ye.Oc),Ye.Nc(14,Dt,2,2,"ng-template",null,3,Ye.Oc),Ye.Nc(16,Vt,3,8,"ng-template",null,4,Ye.Oc),Ye.Nc(18,Ft,3,8,"ng-template",null,5,Ye.Oc),Ye.Wb(20,"app-grid-simple",6,7),Ye.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)})),Ye.ic(22,"async"),Ye.ic(23,"async"),Ye.ic(24,"async"),Ye.ic(25,"async"),Ye.ic(26,"async"),Ye.Vb(),Ye.Wb(27,"app-dialog",8),Ye.fc("visibleChange",(function(){return t.closeAutoStatusHandler()})),Ye.ic(28,"async"),Ye.Nc(29,Et,1,1,"app-auto-status",9),Ye.ic(30,"async"),Ye.Vb(),Ye.Wb(31,"app-dialog",10),Ye.fc("visibleChange",(function(){return t.closeAssignPicHandler()})),Ye.ic(32,"async"),Ye.Nc(33,wt,2,4,"app-fl-reservation-list-b2c-ticketing-assign-pic-form",11),Ye.ic(34,"async"),Ye.Vb(),Ye.Wb(35,"app-dialog",12),Ye.fc("visibleChange",(function(){return t.closeUmsHandler()})),Ye.ic(36,"async"),Ye.Nc(37,Wt,2,5,"app-ums",13),Ye.ic(38,"async"),Ye.Vb()),2&e){const e=Ye.Ec(13),i=Ye.Ec(15),n=Ye.Ec(17),o=Ye.Ec(19);Ye.pc("otherSearchInfo",Ye.jc(1,30,t.otherSearchInfo$))("searchCondition",Ye.jc(2,32,t.searchCondition$))("dateRangeTypeList",Ye.jc(3,34,t.dateRangeTypeList$))("bookingStatusList",Ye.jc(4,36,t.bookingStatusList$))("fopCodeList",Ye.jc(5,38,t.fopCodeList$))("paymentStatusCodeList",Ye.jc(6,40,t.paymentStatusCodeList$))("ticketingStatusCodeList",Ye.jc(7,42,t.ticketingStatusCodeList$)),Ye.Cb(8),Ye.pc("loading",Ye.jc(9,44,t.loading$))("currentPageSize",Ye.jc(10,46,t.listPageSize$))("totalCount",Ye.jc(11,48,t.gridDataTotal$)),Ye.Cb(12),Ye.pc("gridLoading",Ye.jc(22,50,t.loading$))("columns",t.columns)("gridState",Ye.jc(23,52,t.gridState$))("checkedState",Ye.jc(24,54,t.gridCheckedState$))("totalCount",Ye.jc(25,56,t.gridDataTotal$))("checkboxUseYn",!1)("sortable",!0)("dataList",Ye.jc(26,58,t.gridDataList$))("checkboxUseYn",!0)("templates",Ye.xc(72,$t,e,i,n,o)),Ye.Cb(7),Ye.pc("visible",Ye.jc(28,60,t.isOpenAutoStatusPopup$))("modal",!0),Ye.Cb(2),Ye.pc("ngIf",Ye.jc(30,62,t.isOpenAutoStatusPopup$)),Ye.Cb(2),Ye.pc("visible",Ye.jc(32,64,t.isOpenAssignPicPopup$))("modal",!0)("hasScroll",!1),Ye.Cb(2),Ye.pc("ngIf",Ye.jc(34,66,t.isOpenAssignPicPopup$)),Ye.Cb(2),Ye.pc("visible",Ye.jc(36,68,t.isOpenUmsPopup$))("modal",!0),Ye.Cb(2),Ye.pc("ngIf",Ye.jc(38,70,t.isOpenUmsPopup$))}},directives:[ft,St,Pt.a,At.a,o.o,Nt.a,yt,Rt.a],pipes:[o.b,It.a],encapsulation:2,changeDetection:0}),e})();const Yt=[{path:"",component:Bt,data:{title:"\ubc1c\uad8c\uc608\uc57d\uc870\ud68c(B2C)"}}];let _t=(()=>{class e{}return e.\u0275mod=Ye.Ob({type:e}),e.\u0275inj=Ye.Nb({factory:function(t){return new(t||e)},imports:[[O.f.forChild(Yt)],O.f]}),e})();var Ut=i("bOdf"),Mt=i("zp1y"),Ht=i("lJxs"),zt=i("JIr8"),Gt=i("vkgz"),Kt=i("Xb6A");let Qt=(()=>{class e{constructor(e,t,i,o,a,l){this.actions$=e,this.service=t,this._errorService=i,this.store=o,this.alertService=a,this._authStore=l,this.loadDateRangeTypeList$=Object(s.c)(()=>this.actions$.pipe(Object(s.d)(n.loadDateRangeTypeListAction),Object(Ut.a)(e=>Object(Ue.a)(e).pipe(Object(Mt.a)(this.dateRangeTypeList$))),Object(He.a)(([{condition:e},t])=>null===t?this.service.getCommonDetailCodeList(e).pipe(Object(Ht.a)(e=>n.loadDateRangeTypeListSuccessAction({dataList:e})),Object(zt.a)(e=>(this._catchErr(e,"Appointment search date code lookup failed."),[]))):Object(Ue.a)(n.loadDateRangeTypeListSuccessAction({dataList:N.cloneDeep(t)}))))),this.loadBookingStatusList$=Object(s.c)(()=>this.actions$.pipe(Object(s.d)(n.loadBookingStatusListAction),Object(Ut.a)(e=>Object(Ue.a)(e).pipe(Object(Mt.a)(this.bookingStatusList$))),Object(He.a)(([{condition:e},t])=>null===t?this.service.getCommonDetailCodeList(e).pipe(Object(Ht.a)(e=>n.loadBookingStatusListSuccessAction({dataList:e})),Object(zt.a)(e=>(this._catchErr(e,"Reservation status code lookup failed."),[]))):Object(Ue.a)(n.loadBookingStatusListSuccessAction({dataList:N.cloneDeep(t)}))))),this.loadFopCodeList$=Object(s.c)(()=>this.actions$.pipe(Object(s.d)(n.loadFopCodeListAction),Object(Ut.a)(e=>Object(Ue.a)(e).pipe(Object(Mt.a)(this.fopCodeList$))),Object(He.a)(([{condition:e},t])=>null===t?this.service.getCommonDetailCodeList(e).pipe(Object(Ht.a)(e=>n.loadFopCodeListSuccessAction({dataList:e})),Object(zt.a)(e=>(this._catchErr(e,"Payment method lookup failed."),[]))):Object(Ue.a)(n.loadFopCodeListSuccessAction({dataList:N.cloneDeep(t)}))))),this.loadPaymentStatusCodeList$=Object(s.c)(()=>this.actions$.pipe(Object(s.d)(n.loadPaymentStatusCodeListAction),Object(Ut.a)(e=>Object(Ue.a)(e).pipe(Object(Mt.a)(this.paymentStatusCodeList$))),Object(He.a)(([{condition:e},t])=>null===t?this.service.getCommonDetailCodeList(e).pipe(Object(Ht.a)(e=>n.loadPaymentStatusCodeListSuccessAction({dataList:e})),Object(zt.a)(e=>(this._catchErr(e,"Payment status code lookup failed."),[]))):Object(Ue.a)(n.loadPaymentStatusCodeListSuccessAction({dataList:N.cloneDeep(t)}))))),this.loadTicketingStatusCodeList$=Object(s.c)(()=>this.actions$.pipe(Object(s.d)(n.loadTicketingStatusCodeListAction),Object(Ut.a)(e=>Object(Ue.a)(e).pipe(Object(Mt.a)(this.ticketingStatusCodeList$))),Object(He.a)(([{condition:e},t])=>null===t?this.service.getCommonDetailCodeList(e).pipe(Object(Ht.a)(e=>n.loadTicketingStatusCodeListSuccessAction({dataList:e})),Object(zt.a)(e=>(this._catchErr(e,"Ticketing status code lookup failed."),[]))):Object(Ue.a)(n.loadTicketingStatusCodeListSuccessAction({dataList:N.cloneDeep(t)}))))),this.loadMasterList$=Object(s.c)(()=>this.actions$.pipe(Object(s.d)(n.loadListAction),Object(He.a)(({condition:e})=>this.service.getList(e).pipe(Object(Ht.a)(({list:e,totalCount:t,summary:i})=>n.loadListSuccessAction({dataList:e,totalCount:t,summary:i})),Object(zt.a)(e=>{const t="Your airline ticket reservation lookup failed, please try again later.",i=[n.loadListFailureAction({error:t})];return this._catchErr(e,t,i),[]}))))),this.updateAssignPicItems$=Object(s.c)(()=>this.actions$.pipe(Object(s.d)(n.updateAssignPicItems),Object(He.a)(({updateCondition:e})=>this.service.putAssignPicItems(e).pipe(Object(Ht.a)(e=>({succeedYn:!0})),Object(zt.a)(e=>Object(Ue.a)({succeedYn:!1,error:e})))),Object(Gt.a)(({succeedYn:e,error:t})=>{if(e){const e="It was saved sucessfully ",t=[n.updateAssignPicItemsSuccess(),n.closeAssignPicPopup()];this._runPage(e,t)}else this._catchErr(t,"The bulk change of ticketers failed.",[])})),{dispatch:!1}),this.saveAutoStatus$=Object(s.c)(()=>this.actions$.pipe(Object(s.d)(n.saveAutoStatusAction),Object(He.a)(({condition:e})=>this.service.putAutoStatus(e).pipe(Object(Ht.a)(e=>({succeedYn:!0,updateList:e})),Object(zt.a)(e=>Object(Ue.a)({succeedYn:!1,error:e})))),Object(Gt.a)(({succeedYn:e,error:t,updateList:i})=>{if(e){const e="Successful bulk change of auto-status.",t=[n.saveAutoStatusSuccessAction({updateList:i}),n.closeAutoStatusPopupAction()];this._runPage(e,t)}else{const e="Failed to bulk change auto-state.",i=[n.saveAutoStatusFailureAction({error:e})];this._catchErr(t,e,i)}})),{dispatch:!1}),this.dateRangeTypeList$=o.pipe(Object(c.u)(Ce)),this.bookingStatusList$=o.pipe(Object(c.u)(fe)),this.fopCodeList$=o.pipe(Object(c.u)(ke)),this.paymentStatusCodeList$=o.pipe(Object(c.u)(ve)),this.ticketingStatusCodeList$=o.pipe(Object(c.u)(Se))}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this.store.dispatch(e)})}:()=>{}})}_catchErr(e,t,i){const n=this._errorService.errorHandler(e,t);N.isNil(n)||(N.isNil(n.accept)&&(n.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(e=>{this.store.dispatch(e)})}:()=>{}),this.alertService.alert(n))}}return e.\u0275fac=function(t){return new(t||e)(Ye.bc(s.a),Ye.bc(Ge),Ye.bc(Kt.a),Ye.bc(c.h),Ye.bc(kt.a),Ye.bc(c.h))},e.\u0275prov=Ye.Mb({token:e,factory:e.\u0275fac}),e})();var qt=i("YH7L"),Xt=i("FGZR");const Jt=[Bt],Zt=[ft,St,vt,yt];let ei=(()=>{class e{}return e.\u0275mod=Ye.Ob({type:e}),e.\u0275inj=Ye.Nb({factory:function(t){return new(t||e)},imports:[[o.c,a.m,a.w,l.a,r.a,p.a,u.a,d.a,b.a,g.a,m.a,h.a,C.a,f.a,k.a,S.a,v.a,_t,qt.a,Xt.a,c.j.forFeature("flReservationListB2cTicketing",ge),s.b.forFeature([Qt])]]}),e})()}}]);