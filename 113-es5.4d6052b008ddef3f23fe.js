function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,a=!1,o=void 0;try{for(var r,c=e[Symbol.iterator]();!(i=(r=c.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(s){a=!0,o=s}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{Onn4:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("fXoL"),a=n("3Pt+"),o=n("ofXK"),r=["rb"],c=function(){return{radio:!0}},s={provide:a.p,useExisting:Object(i.U)((function(){return l})),multi:!0},l=function(){var e=function(){function e(t){_classCallCheck(this,e),this.cd=t,this.onClick=new i.n,this.onFocus=new i.n,this.onBlur=new i.n,this.onModelChange=function(){},this.onModelTouched=function(){}}return _createClass(e,[{key:"handleClick",value:function(e,t,n){e.preventDefault(),this.disabled||(this.select(e),n&&t.focus())}},{key:"select",value:function(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.onClick.emit(e))}},{key:"writeValue",value:function(e){this.checked=e===this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}},{key:"registerOnChange",value:function(e){this.onModelChange=e}},{key:"registerOnTouched",value:function(e){this.onModelTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"onInputFocus",value:function(e){this.focused=!0,this.onFocus.emit(e)}},{key:"onInputBlur",value:function(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}},{key:"onChange",value:function(e){this.select(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.h))},e.\u0275cmp=i.Kb({type:e,selectors:[["app-radio"]],viewQuery:function(e,t){var n;1&e&&i.Kc(r,!0),2&e&&i.Dc(n=i.gc())&&(t.inputViewChild=n.first)},inputs:{value:"value",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",checked:"checked"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[i.Bb([s])],decls:5,vars:11,consts:[[3,"ngClass","click"],["type","radio",1,"radio-control-input",3,"checked","disabled","change","focus","blur"],["rb",""],[1,"radio-control-text"]],template:function(e,t){1&e&&(i.Wb(0,"label",0),i.fc("click",(function(e){return t.select(e)})),i.Wb(1,"input",1,2),i.fc("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onInputFocus(e)}))("blur",(function(e){return t.onInputBlur(e)})),i.Vb(),i.Wb(3,"span",3),i.Pc(4),i.Vb(),i.Vb()),2&e&&(i.Eb(t.styleClass),i.pc("ngClass",i.tc(10,c)),i.Cb(1),i.pc("checked",t.checked)("disabled",t.disabled),i.Db("id",t.inputId)("name",t.name)("value",t.value)("tabindex",t.tabindex),i.Cb(3),i.Qc(t.label))},directives:[o.l],encapsulation:2}),e}()},jyh4:function(e,t,n){"use strict";n.r(t),n.d(t,"CONTAINERS",(function(){return It})),n.d(t,"COMPONENTS",(function(){return jt})),n.d(t,"BsRegionModule",(function(){return Rt}));var i={};n.r(i),n.d(i,"getListSuccess",(function(){return w})),n.d(i,"getListFailure",(function(){return E})),n.d(i,"upsertItemSuccess",(function(){return D})),n.d(i,"upsertItemFailure",(function(){return F})),n.d(i,"removeItemsSuccess",(function(){return L})),n.d(i,"removeItemsFailure",(function(){return T})),n.d(i,"loadList",(function(){return Y})),n.d(i,"reloadList",(function(){return x})),n.d(i,"initList",(function(){return A})),n.d(i,"changeSearchCondition",(function(){return $})),n.d(i,"removeSelectedGridEntities",(function(){return z})),n.d(i,"openDetailPopup",(function(){return U})),n.d(i,"closeDetailPopup",(function(){return B})),n.d(i,"addSelectedDetailRowInfo",(function(){return H})),n.d(i,"delSelectedDetailRowInfo",(function(){return K})),n.d(i,"upsertItem",(function(){return G})),n.d(i,"setGridCheckedRowidsAction",(function(){return Q})),n.d(i,"setGridStateAction",(function(){return M})),n.d(i,"changePageIndex",(function(){return J})),n.d(i,"changePageSize",(function(){return X}));var a=n("ofXK"),o=n("3Pt+"),r=n("snw9"),c=n("kt0X"),s=n("WG3B"),l=n("xoAz"),u=n("wPo9"),d=n("7rOj"),b=n("+NQf"),p=n("6LsY"),h=n("l1P7"),f=n("v7zA"),g=n("7UZF"),m=n("hHe4"),v=n("1OXJ"),C=n("5hwk"),y=n("kKjH"),S=n("qXPF"),O=n("w8np"),k=n("vu/V"),I=n("tyNb"),j=n("XNiG"),R=n("itXk"),V=n("zP0r"),N=n("1G5W"),P=n("Kj3r"),W=n("pLZG"),_=n("LvDl"),w=Object(c.o)("[BsRegion/List] get list success",Object(c.t)()),E=Object(c.o)("[BsRegion/List] get list failure",Object(c.t)()),D=Object(c.o)("[BsRegion/List] upsert item success"),F=Object(c.o)("[BsRegion/List] upsert item failure",Object(c.t)()),L=Object(c.o)("[BsRegion/API] remove items success",Object(c.t)()),T=Object(c.o)("[BsRegion/API] remove items failure",Object(c.t)()),Y=Object(c.o)("[BsRegion/List] load grid data list",Object(c.t)()),x=Object(c.o)("[BsRegion/List] reload grid data list"),A=Object(c.o)("[BsRegion/List] init grid data list"),$=Object(c.o)("[BsRegion/List] change search condition",Object(c.t)()),z=Object(c.o)("[BsRegion/List] \uc0ad\uc81c\ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(c.t)()),U=Object(c.o)("[BsRegion/Detail] \uc0c1\uc138\ud31d\uc5c5 \uc5f4\uae30"),B=Object(c.o)("[BsRegion/Detail] \uc0c1\uc138\ud31d\uc5c5 \ub2eb\uae30"),H=Object(c.o)("[BsRegion/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc120\ud0dd",Object(c.t)()),K=Object(c.o)("[BsRegion/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc81c\uac70"),G=Object(c.o)("[BsRegion/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(c.t)()),Q=Object(c.o)("[BsRegion/List] set grid checked rowids",Object(c.t)()),M=Object(c.o)("[BsRegion/List] set grid state",Object(c.t)()),J=Object(c.o)("[BsRegion/List] change page index",Object(c.t)()),X=Object(c.o)("[BsRegion/List] change page size",Object(c.t)()),q=n("EVqC"),Z=Object(q.a)({selectId:function(e){return e.regionCode},sortComparer:!1}),ee=Z.getInitialState({loading:!1,reloadToggle:!1,searchCondition:{},otherSearchInfo:null,selectedDetailRowInfo:null,isOpenDetailPopup:!1,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},gridDataTotal:null,gridCheckedRowids:null}),te=Object(c.q)(ee,Object(c.s)(i.loadList,(function(e){return Object.assign(Object.assign({},e),{loading:!0})})),Object(c.s)(i.reloadList,(function(e){return Object.assign(Object.assign({},e),{reloadToggle:!e.reloadToggle})})),Object(c.s)(i.initList,(function(e){return Object.assign(Object.assign({},e),{loading:!1,selectedDetailRowInfo:null,isOpenDetailPopup:!1})})),Object(c.s)(i.getListSuccess,(function(e,t){var n=t.dataList,i=t.totalCount,a=Z.setAll(n,Object.assign(Object.assign({},e),{loading:!1,gridDataTotal:i})),o=function(e,t){var n=Object.assign({},e),i=0;return t.forEach((function(e){n[e]=Object.assign(Object.assign({},n[e]),{rowid:i++})})),n}(a.entities,a.ids);return Object.assign(Object.assign({},a),{entities:o})})),Object(c.s)(i.getListFailure,(function(e){return Object.assign(Object.assign({},e),{loading:!1})})),Object(c.s)(i.changeSearchCondition,(function(e,t){var n=t.searchCondition,i=t.otherSearchInfo;return Object.assign(Object.assign({},e),{searchCondition:n,otherSearchInfo:i})})),Object(c.s)(i.openDetailPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenDetailPopup:!0})})),Object(c.s)(i.closeDetailPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenDetailPopup:!1})})),Object(c.s)(i.addSelectedDetailRowInfo,(function(e,t){var n=t.selectedDetailRowInfo;return Object.assign(Object.assign({},e),{selectedDetailRowInfo:n})})),Object(c.s)(i.delSelectedDetailRowInfo,(function(e){return Object.assign(Object.assign({},e),{selectedDetailRowInfo:null})})),Object(c.s)(i.setGridCheckedRowidsAction,(function(e,t){var n=t.rowids;return Object.assign(Object.assign({},e),{gridCheckedRowids:n})})),Object(c.s)(i.setGridStateAction,(function(e,t){var n=t.gridState;return Object.assign(Object.assign({},e),{gridState:n})})),Object(c.s)(i.changePageSize,(function(e,t){var n=t.pageSize;return Object.assign(Object.assign({},e),{pageSize:n,gridState:_.set(_.cloneDeep(e.gridState),["pageInfo","take"],n)})})),Object(c.s)(i.changePageIndex,(function(e,t){var n=t.pageIndex;return Object.assign(Object.assign({},e),{gridState:_.set(_.cloneDeep(e.gridState),["pageInfo","skip"],n)})})));function ne(e,t){return Object(c.m)({bsRegionList:te})(e,t)}var ie,ae,oe,re,ce,se=Object(c.p)("bsRegion"),le=Object(c.r)(se,(function(e){return e.bsRegionList})),ue=Object(c.r)(le,(function(e){return e.loading})),de=Object(c.r)(le,(function(e){return e.reloadToggle})),be=Object(c.r)(le,(function(e){return e.searchCondition})),pe=Object(c.r)(le,(function(e){return e.otherSearchInfo})),he=Object(c.r)(le,(function(e){return e.selectedDetailRowInfo})),fe=Object(c.r)(le,(function(e){return e.isOpenDetailPopup})),ge=Z.getSelectors(le).selectAll,me=(Z.getSelectors(le),Object(c.r)(le,(function(e){return e.gridState}))),ve=Object(c.r)(le,(function(e){return e.gridDataTotal})),Ce=Object(c.r)(le,(function(e){return e.gridCheckedRowids})),ye=Object(c.r)(me,(function(e){return _.get(e,["pageInfo","take"],20)})),Se=n("YY+H"),Oe=n("fXoL"),ke=n("pfiq"),Ie=n("LRne"),je=n("z6cu"),Re=n("eIep"),Ve=n("AytR").a.API_URL,Ne={selectEntities:"".concat(Ve,"/admin/basis/region"),modifyEntities:"".concat(Ve,"/admin/basis/region"),selectCountryCodes:"".concat(Ve,"/admin/basis/country"),selectDetailCodes:"".concat(Ve,"/common/detail-code"),displayEntity:"".concat(Ve,"control/bs/region-code")},Pe=n("tpT/"),We=((ie=function(){function e(t){_classCallCheck(this,e),this.api=t}return _createClass(e,[{key:"getList",value:function(e){var t=this,n=_.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ne.selectEntities,n).pipe(Object(Re.a)((function(e){var n,i;if(e.succeedYn){var a=t._addRowid(null===(n=e.result)||void 0===n?void 0:n.list);return Object(Ie.a)({dataList:a,totalCount:(null===(i=e.result)||void 0===i?void 0:i.totalCount)||0})}return Object(je.a)(e||"api response error")})))}},{key:"removeItems",value:function(e){var t=_.assign({},this.api.defaultParams,{condition:e});return this.api.delete(Ne.modifyEntities,t).pipe(Object(Re.a)((function(e){return e.succeedYn?Object(Ie.a)(e.result&&e.result.counts):Object(je.a)(e||"api response error")})))}},{key:"upsertItem",value:function(e){var t=_.assign({},this.api.defaultParams,{condition:e});return this.api.put(Ne.modifyEntities,t).pipe(Object(Re.a)((function(e){return e.succeedYn?Object(Ie.a)({data:e.result}):Object(je.a)(e||"api response error")})))}},{key:"getCommonDetailCodeList",value:function(e){var t=_.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ne.selectDetailCodes,t).pipe(Object(Re.a)((function(e){return e.succeedYn?Object(Ie.a)(e.result.list):Object(je.a)(e||"api response error")})))}},{key:"_addRowid",value:function(e){return _.isNil(e)?[]:e.map((function(e,t){return Object.assign(Object.assign({},e),{rowid:String(t)})}))}}]),e}()).\u0275fac=function(e){return new(e||ie)(Oe.bc(Pe.a))},ie.\u0275prov=Oe.Mb({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie),_e=n("6UzV"),we=((ae=_createClass((function e(t){var n=this;_classCallCheck(this,e),this.fb=t,this.generateGridColumns=function(){return[{field:"regionCode",title:"Region Code",style:{"text-align":"center"}},{field:"regionType",title:"Region Type"},{field:"regionNameEn",title:"Region Name(EN)"},{field:"regionNameKo",title:"Region Name(KO)"},{field:"regionNameJa",title:"Region Name(JA)"},{field:"regionNameVi",title:"Region Name(VI)"},{field:"regionNameZh",title:"Region Name(ZH)"},{field:"regionNameSearch",title:"Region Name Search"},{field:"parentRegionCode",title:"Parent Region Code"},{field:"parentRegionType",title:"Parent Region Type"},{field:"parentRegionNameEn",title:"Parent Region Name(EN)"},{field:"parentRegionNameKo",title:"Parent Region Name(KO)"},{field:"parentRegionNameJa",title:"Parent Region Name(JA)"},{field:"parentRegionNameVi",title:"Parent Region Name(VI)"},{field:"parentRegionNameZh",title:"Parent Region Name(ZH)"},{field:"countryCode",title:"Country Code",style:{"text-align":"center"}},{field:"displayOrder",title:"Display Order"},{field:"cityCodeIata",title:"City Code IATA",style:{"text-align":"center"}},{field:"firstInsertName",title:"First Insert User"},{field:"firstInsertDatetime",title:"First Insert Time",type:"text",style:{"text-align":"center"}},{field:"lastUpdateName",title:"Last Insert User"},{field:"lastUpdateDatetime",title:"Last Update Time",type:"text",style:{"text-align":"center"}}]},this.generateListSearchForm=function(){return n.fb.group({countryCode:[null,[o.z.required]],regionName:[null],regionCode:[null],parentRegionYn:[null],parentRegionCode:[null],parentRegionName:[null]})},this.initListSearch=function(){return{countryCode:null,regionName:null,regionCode:null,parentRegionYn:null}},this.generatePutForm=function(){return n.fb.group({regionCode:[{value:null,disabled:!0}],regionType:[null],regionNameEn:[null,[o.z.required]],regionNameKo:[null,[o.z.required]],regionNameJa:[null],regionNameVi:[null],regionNameZh:[null],cityCodeIata:[null],parentRegionCode:[null],parentRegionType:[{value:null,disabled:!0}],regionNameSearch:[null,[o.z.required]],countryCode:[null,[o.z.required,_e.a.eng(),o.z.minLength(2),o.z.maxLength(2)]],latitude:[null,[_e.a.latLon()]],longitude:[null,[_e.a.latLon()]],hotelCount:[null,[o.z.required,_e.a.num()]],displayOrder:[null,[o.z.required,_e.a.num()]],deleteYn:[!1,[o.z.required]],updateProhibitYn:[!1,[o.z.required]],controlRemark:[null]})},this.initPutFormData=function(){return{regionCode:null,regionType:"city",regionNameEn:null,regionNameKo:null,regionNameJa:null,regionNameVi:null,regionNameZh:null,cityCodeIata:null,parentRegionCode:null,parentRegionType:null,regionNameSearch:null,latitude:null,longitude:null,countryCode:null,hotelCount:0,displayOrder:9999,deleteYn:!1,updateProhibitYn:!1,controlRemark:null}}}))).\u0275fac=function(e){return new(e||ae)(Oe.bc(o.f))},ae.\u0275prov=Oe.Mb({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae),Ee=n("+Sob"),De=n("gbCm"),Fe=n("U6NN"),Le=function(){return["countryCode","countryNameLn","countryNameEn"]},Te=((oe=function(){function e(t){_classCallCheck(this,e),this._dataService=t,this.clickSearchEvent=new Oe.n,this.clickResetEvent=new Oe.n,this.changeSearchConditionEvent=new Oe.n,this.isShowmore=!1,this.useYnOptions=[{label:"Y",value:!0},{label:"N",value:!1}],this.searchForm=this._dataService.generateListSearchForm()}return _createClass(e,[{key:"otherSearchInfo",get:function(){return this._otherSearchInfo},set:function(e){this._otherSearchInfo=e,this._setOtherSearchInfo(e)}},{key:"searchCondition",get:function(){return this._searchCondition},set:function(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}},{key:"searchFormValid",get:function(){return this.searchForm.valid}},{key:"ngOnInit",value:function(){this._initThisState()}},{key:"onSubmit",value:function(){if(this.searchForm.invalid)this._checkValid=!0;else{var e=_.omitBy(this.searchForm.value,_.isNil),t=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:e,otherSearchInfo:t}),this._checkValid=!1}}},{key:"onReset",value:function(){this.clickResetEvent.emit()}},{key:"checkIsInvalid",value:function(e){return this._checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}},{key:"_initThisState",value:function(){}},{key:"_setSearchFormData",value:function(e){var t=this._dataService.initListSearch();return Object.assign({},t,_.pick(e,Object.keys(t)))}},{key:"_setOtherSearchInfo",value:function(e){this.regionInput=(null==e?void 0:e.regionInput)||null,this.countryInput=(null==e?void 0:e.countryInput)||null,this.cityInput=(null==e?void 0:e.cityInput)||null}},{key:"_setOtherSearchCondition",value:function(){var e={};return this.autoCopmpletes.forEach((function(t){Object.assign(e,t.getInputValue())})),e}}]),e}()).\u0275fac=function(e){return new(e||oe)(Oe.Qb(we))},oe.\u0275cmp=Oe.Kb({type:oe,selectors:[["app-bs-region-search"]],viewQuery:function(e,t){var n;1&e&&Oe.Xc(ke.a,!0),2&e&&Oe.Dc(n=Oe.gc())&&(t.autoCopmpletes=n)},inputs:{otherSearchInfo:"otherSearchInfo",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent",changeSearchConditionEvent:"changeSearchConditionEvent"},decls:34,vars:8,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-1"],[1,"form-label"],["formControlName","countryCode","inputId","countryInput","apiUrl","admin/common/country","dataKey","countryCode","inputFieldFormat","{0} - &{1}_&{2}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","isInvalid","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","regionName",1,"flex-fill"],["formControlName","regionCode","valueType","number",1,"flex-fill"],["formControlName","parentRegionYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","parentRegionName",1,"flex-fill"],["formControlName","parentRegionCode","valueType","number",1,"flex-fill"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(e,t){1&e&&(Oe.Wb(0,"form",0),Oe.fc("ngSubmit",(function(){return t.onSubmit()})),Oe.Wb(1,"div",1),Oe.Wb(2,"div",2),Oe.Wb(3,"div",3),Oe.Wb(4,"span",4),Oe.Wb(5,"sup"),Oe.Pc(6,"Country Name"),Oe.Vb(),Oe.Vb(),Oe.Rb(7,"app-auto-complete",5),Oe.Vb(),Oe.Wb(8,"div",3),Oe.Wb(9,"span",4),Oe.Pc(10,"Region Name"),Oe.Vb(),Oe.Rb(11,"app-input-text",6),Oe.Vb(),Oe.Wb(12,"div",3),Oe.Wb(13,"span",4),Oe.Pc(14,"Region Code"),Oe.Vb(),Oe.Rb(15,"app-input-text",7),Oe.Vb(),Oe.Wb(16,"div",3),Oe.Wb(17,"span",4),Oe.Pc(18,"Parent Region YN"),Oe.Vb(),Oe.Rb(19,"app-selectbox",8),Oe.Vb(),Oe.Vb(),Oe.Wb(20,"div",2),Oe.Wb(21,"div",3),Oe.Wb(22,"span",4),Oe.Pc(23,"Parent Region Name"),Oe.Vb(),Oe.Rb(24,"app-input-text",9),Oe.Vb(),Oe.Wb(25,"div",3),Oe.Wb(26,"span",4),Oe.Pc(27,"Parent Region Code"),Oe.Vb(),Oe.Rb(28,"app-input-text",10),Oe.Vb(),Oe.Vb(),Oe.Vb(),Oe.Wb(29,"div",11),Oe.Wb(30,"button",12),Oe.Pc(31,"Search"),Oe.Vb(),Oe.Wb(32,"button",13),Oe.fc("click",(function(){return t.onReset()})),Oe.Pc(33,"Reset"),Oe.Vb(),Oe.Vb(),Oe.Vb()),2&e&&(Oe.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),Oe.Cb(7),Oe.pc("inputFieldValue",t.countryInput)("isInvalid",t.checkIsInvalid("countryCode"))("apiSearchTerm","keyword")("inputFieldFormatKeyList",Oe.tc(7,Le)),Oe.Cb(12),Oe.pc("options",t.useYnOptions))},directives:[o.B,o.s,o.k,Ee.a,ke.a,o.r,o.i,De.a,Fe.a],encapsulation:2,changeDetection:0}),oe),Ye=n("UIHd"),xe=n("EsKh"),Ae=n("nj7W"),$e=n("bMKz"),ze=((re=function(){function e(t){_classCallCheck(this,e),this.alertService=t,this.clickAddEvent=new Oe.n,this.clickDelEvent=new Oe.n,this.changePageSizeEvent=new Oe.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onClickAdd",value:function(){this.clickAddEvent.emit()}},{key:"onClickDel",value:function(){this.clickDelEvent.emit()}},{key:"onChangePageSize",value:function(e){this.changePageSizeEvent.emit(e.value)}}]),e}()).\u0275fac=function(e){return new(e||re)(Oe.Qb(xe.a))},re.\u0275cmp=Oe.Kb({type:re,selectors:[["app-bs-region-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{clickAddEvent:"clickAddEvent",clickDelEvent:"clickDelEvent",changePageSizeEvent:"changePageSizeEvent"},decls:8,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&(Oe.Wb(0,"div",0),Oe.Wb(1,"strong",1),Oe.Pc(2),Oe.Vb(),Oe.Wb(3,"div",2),Oe.Wb(4,"button",3),Oe.fc("click",(function(){return t.onClickAdd()})),Oe.Pc(5,"New"),Oe.Vb(),Oe.Wb(6,"div",4),Oe.Wb(7,"app-selectbox",5),Oe.fc("onChange",(function(e){return t.onChangePageSize(e)})),Oe.Vb(),Oe.Vb(),Oe.Vb(),Oe.Vb()),2&e&&(Oe.Cb(2),Oe.Qc(t.loading?"":t.totalCount),Oe.Cb(5),Oe.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[Fe.a,o.r,o.u],encapsulation:2,changeDetection:0}),re),Ue=n("kDLv"),Be=n("Onn4"),He=function(){return["countryCode"]},Ke=function(e){return{countryCode:e}},Ge=function(){return["regionCode","regionNameEn"]},Qe=((ce=function(){function e(t,n){_classCallCheck(this,e),this._dataService=t,this.fb=n,this.submitEvent=new Oe.n,this.closeEvent=new Oe.n,this._$unsubscribe=new j.a,this.regionList=[{value:"city",label:"city"},{value:"region",label:"region"}],this.upsertForm=this._dataService.generatePutForm()}return _createClass(e,[{key:"rowItem",get:function(){return this._rowitem},set:function(e){this._rowitem=e,this.upsertFormData=this._setPutFormData(e),e&&(this.upsertForm.get("parentRegionType").setValue(e.regionType),this.upsertFormData.parentRegionType=null==e?void 0:e.regionType),this._initThisState(e)}},{key:"countryCode",get:function(){return this.upsertForm.get("countryCode").value}},{key:"ngAfterContentInit",value:function(){this._initSubscription()}},{key:"ngOnDestroy",value:function(){this._$unsubscribe.next(),this._$unsubscribe.complete()}},{key:"onSelectCityCode",value:function(e){(null==e?void 0:e.cityCodeIata)&&this.upsertForm.get("cityCodeIata").setValue(e.cityCodeIata)}},{key:"onSubmit",value:function(){if(this.upsertForm.invalid)this._checkValid=!0;else{var e=this._setPutCondition();this.submitEvent.emit(e),this._checkValid=!1}}},{key:"onClose",value:function(){this.closeEvent.emit()}},{key:"checkIsInvalid",value:function(e){return this._checkValid&&this.upsertForm.get(e)&&this.upsertForm.get(e).invalid}},{key:"_initThisState",value:function(e){this._checkValid=!1,e&&(this.cityInputField=e.cityCode||null,this.countryInputField=e.countryCode||null)}},{key:"_setPutFormData",value:function(e){var t=this._dataService.initPutFormData();return _.isNil(e)?t:Object.assign({},t,_.pick(e,Object.keys(t)))}},{key:"onSelect",value:function(e){this.upsertForm.get("parentRegionType").setValue(e.regionType)}},{key:"_setPutCondition",value:function(){var e=this._dataService.initPutFormData(),t=this.upsertForm.getRawValue(),n=Object.assign({},_.pick(t,Object.keys(e)));return{condition:n=_.omit(n,"parentRegionType")}}},{key:"_initSubscription",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ce)(Oe.Qb(we),Oe.Qb(o.f))},ce.\u0275cmp=Oe.Kb({type:ce,selectors:[["app-bs-region-form"]],inputs:{rowItem:"rowItem"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:125,vars:34,consts:[[1,"modal-body"],[3,"formGroup","connectForm","ngSubmit"],[1,"table","table-bordered"],["scope","row",1,"th-bg"],["formControlName","regionCode"],["formControlName","regionType",3,"options","useAllOptionYn"],["formControlName","regionNameEn",3,"isInvalid"],["formControlName","regionNameKo",3,"isInvalid"],["formControlName","regionNameJa",3,"isInvalid"],["formControlName","regionNameVi",3,"isInvalid"],["formControlName","regionNameZh",3,"isInvalid"],["formControlName","countryCode","apiUrl","admin/common/country","dataKey","countryCode","inputFieldFormat","{0}","placeholder","e.g.KR",3,"inputFieldValue","apiSearchTerm","inputFieldFormatKeyList","isInvalid"],["placeholder","e.g.SEL","formControlName","cityCodeIata",3,"isInvalid"],["formControlName","parentRegionCode","dataKey","regionCode","apiUrl","admin/basis/region","inputFieldFormat","{0} - &{1}","placeholder","Name",3,"apiCondition","apiSearchTerm","inputFieldFormatKeyList","disabled","onSelect"],["formControlName","parentRegionType",3,"options","useAllOptionYn"],["formControlName","hotelCount","valueType","number",3,"isInvalid"],["formControlName","displayOrder","valueType","number",3,"isInvalid"],[1,"form-group"],[1,"input"],["formControlName","latitude","valueType","number",1,"flex-fill",3,"isInvalid"],[1,"dash"],["formControlName","longitude","valueType","number",1,"flex-fill",3,"isInvalid"],["formControlName","updateProhibitYn","name","updateProhibitYn","label","Y",3,"value"],["formControlName","updateProhibitYn","name","updateProhibitYn","label","N",3,"value"],["formControlName","deleteYn","name","deleteYn","label","Y",3,"value"],["formControlName","deleteYn","name","deleteYn","label","N",3,"value"],["formControlName","regionNameSearch",3,"isInvalid"],["formControlName","controlRemark",3,"isInvalid"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(e,t){1&e&&(Oe.Wb(0,"div",0),Oe.Wb(1,"form",1),Oe.fc("ngSubmit",(function(){return t.onSubmit()})),Oe.Wb(2,"div",2),Oe.Wb(3,"table"),Oe.Wb(4,"caption"),Oe.Pc(5," Region Info "),Oe.Vb(),Oe.Wb(6,"colgroup"),Oe.Rb(7,"col"),Oe.Rb(8,"col"),Oe.Vb(),Oe.Wb(9,"tbody"),Oe.Wb(10,"tr"),Oe.Wb(11,"th",3),Oe.Wb(12,"sup"),Oe.Pc(13,"Region Code"),Oe.Vb(),Oe.Vb(),Oe.Wb(14,"td"),Oe.Rb(15,"app-input-text",4),Oe.Vb(),Oe.Vb(),Oe.Wb(16,"tr"),Oe.Wb(17,"th",3),Oe.Wb(18,"sup"),Oe.Pc(19,"Region Type"),Oe.Vb(),Oe.Vb(),Oe.Wb(20,"td"),Oe.Rb(21,"app-selectbox",5),Oe.Vb(),Oe.Vb(),Oe.Wb(22,"tr"),Oe.Wb(23,"th",3),Oe.Wb(24,"sup"),Oe.Pc(25,"Region Name(EN)"),Oe.Vb(),Oe.Vb(),Oe.Wb(26,"td"),Oe.Rb(27,"app-input-text",6),Oe.Vb(),Oe.Vb(),Oe.Wb(28,"tr"),Oe.Wb(29,"th",3),Oe.Wb(30,"sup"),Oe.Pc(31,"Region Name(KO)"),Oe.Vb(),Oe.Vb(),Oe.Wb(32,"td"),Oe.Rb(33,"app-input-text",7),Oe.Vb(),Oe.Vb(),Oe.Wb(34,"tr"),Oe.Wb(35,"th",3),Oe.Pc(36,"Region Name(JA)"),Oe.Vb(),Oe.Wb(37,"td"),Oe.Rb(38,"app-input-text",8),Oe.Vb(),Oe.Vb(),Oe.Wb(39,"tr"),Oe.Wb(40,"th",3),Oe.Pc(41,"Region Name(VI)"),Oe.Vb(),Oe.Wb(42,"td"),Oe.Rb(43,"app-input-text",9),Oe.Vb(),Oe.Vb(),Oe.Wb(44,"tr"),Oe.Wb(45,"th",3),Oe.Pc(46,"Region Name(ZH)"),Oe.Vb(),Oe.Wb(47,"td"),Oe.Rb(48,"app-input-text",10),Oe.Vb(),Oe.Vb(),Oe.Wb(49,"tr"),Oe.Wb(50,"th",3),Oe.Wb(51,"sup"),Oe.Pc(52,"Country Code"),Oe.Vb(),Oe.Vb(),Oe.Wb(53,"td"),Oe.Rb(54,"app-auto-complete",11),Oe.Vb(),Oe.Vb(),Oe.Wb(55,"tr"),Oe.Wb(56,"th",3),Oe.Pc(57,"City Code Iata"),Oe.Vb(),Oe.Wb(58,"td"),Oe.Rb(59,"app-input-text",12),Oe.Vb(),Oe.Vb(),Oe.Wb(60,"tr"),Oe.Wb(61,"th",3),Oe.Pc(62,"Parent Region Code"),Oe.Vb(),Oe.Wb(63,"td"),Oe.Wb(64,"app-auto-complete",13),Oe.fc("onSelect",(function(e){return t.onSelect(e)})),Oe.Vb(),Oe.Vb(),Oe.Vb(),Oe.Wb(65,"tr"),Oe.Wb(66,"th",3),Oe.Pc(67,"Parent Region Type"),Oe.Vb(),Oe.Wb(68,"td"),Oe.Rb(69,"app-selectbox",14),Oe.Vb(),Oe.Vb(),Oe.Wb(70,"tr"),Oe.Wb(71,"th",3),Oe.Wb(72,"sup"),Oe.Pc(73,"Hotel Count"),Oe.Vb(),Oe.Vb(),Oe.Wb(74,"td"),Oe.Rb(75,"app-input-text",15),Oe.Vb(),Oe.Vb(),Oe.Wb(76,"tr"),Oe.Wb(77,"th",3),Oe.Wb(78,"sup"),Oe.Pc(79,"Display Order"),Oe.Vb(),Oe.Vb(),Oe.Wb(80,"td"),Oe.Rb(81,"app-input-text",16),Oe.Vb(),Oe.Vb(),Oe.Wb(82,"tr"),Oe.Wb(83,"th",3),Oe.Pc(84,"Latitide / Longitude"),Oe.Vb(),Oe.Wb(85,"td"),Oe.Wb(86,"div",17),Oe.Wb(87,"div",18),Oe.Rb(88,"app-input-text",19),Oe.Vb(),Oe.Wb(89,"span",20),Oe.Pc(90,"/"),Oe.Vb(),Oe.Wb(91,"div",18),Oe.Rb(92,"app-input-text",21),Oe.Vb(),Oe.Vb(),Oe.Vb(),Oe.Vb(),Oe.Wb(93,"tr"),Oe.Wb(94,"th",3),Oe.Wb(95,"sup"),Oe.Pc(96,"Update Prohibit YN"),Oe.Vb(),Oe.Vb(),Oe.Wb(97,"td"),Oe.Wb(98,"div",17),Oe.Rb(99,"app-radio",22),Oe.Rb(100,"app-radio",23),Oe.Vb(),Oe.Vb(),Oe.Vb(),Oe.Wb(101,"tr"),Oe.Wb(102,"th",3),Oe.Wb(103,"sup"),Oe.Pc(104,"Delete YN"),Oe.Vb(),Oe.Vb(),Oe.Wb(105,"td"),Oe.Wb(106,"div",17),Oe.Rb(107,"app-radio",24),Oe.Rb(108,"app-radio",25),Oe.Vb(),Oe.Vb(),Oe.Vb(),Oe.Wb(109,"tr"),Oe.Wb(110,"th",3),Oe.Wb(111,"sup"),Oe.Pc(112,"Region Name Search"),Oe.Vb(),Oe.Vb(),Oe.Wb(113,"td"),Oe.Rb(114,"app-input-text",26),Oe.Vb(),Oe.Vb(),Oe.Wb(115,"tr"),Oe.Wb(116,"th",3),Oe.Pc(117,"Control Remark"),Oe.Vb(),Oe.Wb(118,"td"),Oe.Rb(119,"app-input-text",27),Oe.Vb(),Oe.Vb(),Oe.Vb(),Oe.Vb(),Oe.Vb(),Oe.Wb(120,"div",28),Oe.Wb(121,"button",29),Oe.Pc(122,"Save"),Oe.Vb(),Oe.Wb(123,"button",30),Oe.fc("click",(function(){return t.onClose()})),Oe.Pc(124,"Cancel"),Oe.Vb(),Oe.Vb(),Oe.Vb(),Oe.Vb()),2&e&&(Oe.Cb(1),Oe.pc("formGroup",t.upsertForm)("connectForm",t.upsertFormData),Oe.Cb(20),Oe.pc("options",t.regionList)("useAllOptionYn",!1),Oe.Cb(6),Oe.pc("isInvalid",t.checkIsInvalid("regionNameEn")),Oe.Cb(6),Oe.pc("isInvalid",t.checkIsInvalid("regionNameKo")),Oe.Cb(5),Oe.pc("isInvalid",t.checkIsInvalid("regionNameJa")),Oe.Cb(5),Oe.pc("isInvalid",t.checkIsInvalid("regionNameVi")),Oe.Cb(5),Oe.pc("isInvalid",t.checkIsInvalid("regionNameZh")),Oe.Cb(6),Oe.pc("inputFieldValue",t.countryInputField)("apiSearchTerm","keyword")("inputFieldFormatKeyList",Oe.tc(30,He))("isInvalid",t.checkIsInvalid("countryCode")),Oe.Cb(5),Oe.pc("isInvalid",t.checkIsInvalid("cityCodeIata")),Oe.Cb(5),Oe.pc("apiCondition",Oe.uc(31,Ke,t.countryCode))("apiSearchTerm","regionName")("inputFieldFormatKeyList",Oe.tc(33,Ge))("disabled",!t.countryCode),Oe.Cb(5),Oe.pc("options",t.regionList)("useAllOptionYn",!1),Oe.Cb(6),Oe.pc("isInvalid",t.checkIsInvalid("hotelCount")),Oe.Cb(6),Oe.pc("isInvalid",t.checkIsInvalid("displayOrder")),Oe.Cb(7),Oe.pc("isInvalid",t.checkIsInvalid("latitude")),Oe.Cb(4),Oe.pc("isInvalid",t.checkIsInvalid("longitude")),Oe.Cb(7),Oe.pc("value",!0),Oe.Cb(1),Oe.pc("value",!1),Oe.Cb(7),Oe.pc("value",!0),Oe.Cb(1),Oe.pc("value",!1),Oe.Cb(6),Oe.pc("isInvalid",t.checkIsInvalid("regionNameSearch")),Oe.Cb(5),Oe.pc("isInvalid",t.checkIsInvalid("controlRemark")))},directives:[o.B,o.s,o.k,Ee.a,De.a,o.r,o.i,Fe.a,ke.a,Be.a],encapsulation:2,changeDetection:0}),ce);function Me(e,t){1&e&&(Oe.Wb(0,"span"),Oe.Pc(1,"Y"),Oe.Vb())}function Je(e,t){1&e&&(Oe.Wb(0,"span"),Oe.Pc(1,"N"),Oe.Vb())}function Xe(e,t){if(1&e&&(Oe.Nc(0,Me,2,0,"span",11),Oe.Nc(1,Je,2,0,"span",11)),2&e){var n=t.$implicit;Oe.pc("ngIf",!0===n.dynamicSearchUseYn),Oe.Cb(1),Oe.pc("ngIf",!1===n.dynamicSearchUseYn)}}function qe(e,t){1&e&&(Oe.Wb(0,"span"),Oe.Pc(1,"Y"),Oe.Vb())}function Ze(e,t){1&e&&(Oe.Wb(0,"span"),Oe.Pc(1,"N"),Oe.Vb())}function et(e,t){if(1&e&&(Oe.Nc(0,qe,2,0,"span",11),Oe.Nc(1,Ze,2,0,"span",11)),2&e){var n=t.$implicit;Oe.pc("ngIf",!0===n.flightSearchUseYn),Oe.Cb(1),Oe.pc("ngIf",!1===n.flightSearchUseYn)}}function tt(e,t){1&e&&(Oe.Wb(0,"span"),Oe.Pc(1,"Y"),Oe.Vb())}function nt(e,t){1&e&&(Oe.Wb(0,"span"),Oe.Pc(1,"N"),Oe.Vb())}function it(e,t){if(1&e&&(Oe.Nc(0,tt,2,0,"span",11),Oe.Nc(1,nt,2,0,"span",11)),2&e){var n=t.$implicit;Oe.pc("ngIf",!0===n.hotelSearchUseYn),Oe.Cb(1),Oe.pc("ngIf",!1===n.hotelSearchUseYn)}}function at(e,t){1&e&&(Oe.Wb(0,"span"),Oe.Pc(1,"Y"),Oe.Vb())}function ot(e,t){1&e&&(Oe.Wb(0,"span"),Oe.Pc(1,"N"),Oe.Vb())}function rt(e,t){if(1&e&&(Oe.Nc(0,at,2,0,"span",11),Oe.Nc(1,ot,2,0,"span",11)),2&e){var n=t.$implicit;Oe.pc("ngIf",!0===n.deleteYn),Oe.Cb(1),Oe.pc("ngIf",!1===n.deleteYn)}}function ct(e,t){1&e&&(Oe.Wb(0,"span"),Oe.Pc(1,"Y"),Oe.Vb())}function st(e,t){1&e&&(Oe.Wb(0,"span"),Oe.Pc(1,"N"),Oe.Vb())}function lt(e,t){if(1&e&&(Oe.Nc(0,ct,2,0,"span",11),Oe.Nc(1,st,2,0,"span",11)),2&e){var n=t.$implicit;Oe.pc("ngIf",!0===n.updateProhibitYn),Oe.Cb(1),Oe.pc("ngIf",!1===n.updateProhibitYn)}}function ut(e,t){if(1&e){var n=Oe.Xb();Oe.Wb(0,"app-bs-region-form",12),Oe.fc("submitEvent",(function(e){return Oe.Fc(n),Oe.hc().submitUpsertHandler(e)}))("closeEvent",(function(){return Oe.Fc(n),Oe.hc().closeUpsertHandler()})),Oe.ic(1,"async"),Oe.Vb()}if(2&e){var i=Oe.hc();Oe.pc("rowItem",Oe.jc(1,1,i.selectedItem$))}}var dt,bt,pt,ht,ft=function(e,t,n,i,a){return{dynamicSearchUseYnTpl:e,flightSearchUseYnTpl:t,hotelSearchUseYnTpl:n,deleteYnTpl:i,updateProhibitYnTpl:a}},gt=((dt=function(){function e(t,n,i,a,o,r){_classCallCheck(this,e),this.store=t,this.authStore=n,this._dataService=i,this.alertService=a,this._disPlayOrder=o,this.UserConditionService=r,this.unsubscribe$=new j.a,this._isSearchClick=!1,this.loading$=t.pipe(Object(c.u)(ue)),this.reloadToggle$=t.pipe(Object(c.u)(de)),this.searchCondition$=t.pipe(Object(c.u)(be)),this.otherSearchInfo$=t.pipe(Object(c.u)(pe)),this.gridDataList$=t.pipe(Object(c.u)(ge)),this.listPageSize$=t.pipe(Object(c.u)(ye)),this.loginUserNo$=n.pipe(Object(c.u)(Se.t)),this.isOpenDetailPopup$=t.pipe(Object(c.u)(fe)),this.selectedItem$=t.pipe(Object(c.u)(he)),this.gridState$=t.pipe(Object(c.u)(me)),this.gridDataTotalCount$=t.pipe(Object(c.u)(ve)),this.gridCheckedRowids$=t.pipe(Object(c.u)(Ce)),this.columns=this._dataService.generateGridColumns(),this.storeId$=n.pipe(Object(c.u)(Se.o)),this._initSubscription()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.storeId$.subscribe((function(t){return e._storeId=t})),this.initSearchCondition()}},{key:"ngOnDestroy",value:function(){this.store.dispatch(i.initList());var e=_.isEmpty(this.gridEl.checkedRows)?null:_.cloneDeep(this.gridEl.checkedRows);this.store.dispatch(i.setGridCheckedRowidsAction({rowids:e})),this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"changePageSizeHandler",value:function(e){this.store.dispatch(i.changePageSize({pageSize:e})),this.searchFormEl.onSubmit()}},{key:"clickAddHandler",value:function(){this.store.dispatch(i.openDetailPopup())}},{key:"clickDelHandler",value:function(){var e,t=this;(null===(e=this.gridEl.checkedRows)||void 0===e?void 0:e.length)>0?this.alertService.confirm({message:"Are you sure you want to delete the selected items?",accept:function(){t.store.dispatch(i.removeSelectedGridEntities({rowids:t.gridEl.checkedRows}))},reject:function(){}}):this.alertService.alert("There are no items selected.")}},{key:"clickSearchHandler",value:function(e){var t=e.searchCondition,n=e.otherSearchInfo;this._isSearchClick=!0,this.store.dispatch(i.changeSearchCondition({searchCondition:t,otherSearchInfo:n})),this.store.dispatch(i.changePageIndex({pageIndex:0})),this.UserConditionService.setSearchSettingSessionStorage(t,this._storeId,n)}},{key:"clickResetHandler",value:function(){this.store.dispatch(i.changeSearchCondition({searchCondition:this._dataService.initListSearch(),otherSearchInfo:null}))}},{key:"gridStateChangeHandler",value:function(e){this._isSearchClick=!0,this.store.dispatch(i.setGridStateAction({gridState:e}))}},{key:"dbClickRowHandler",value:function(e){this.store.dispatch(i.addSelectedDetailRowInfo({selectedDetailRowInfo:_.cloneDeep(e)})),this.clickAddHandler()}},{key:"submitUpsertHandler",value:function(e){var t=e.condition;t=_.isNil(t.regionCode)?_.omit(t,"regionCode"):t,this.store.dispatch(i.upsertItem({upsertCondition:t}))}},{key:"closeUpsertHandler",value:function(){this.store.dispatch(i.closeDetailPopup()),this.store.dispatch(i.delSelectedDetailRowInfo())}},{key:"_initSubscription",value:function(){var e=this;this.reloadToggle$.pipe(Object(V.a)(1),Object(N.a)(this.unsubscribe$)).subscribe((function(){e.searchFormEl.searchFormValid&&e.searchFormEl.onSubmit()})),Object(R.a)([this.searchCondition$,this.gridState$]).pipe(Object(P.a)(200),Object(W.a)((function(){return!0===e._isSearchClick})),Object(W.a)((function(e){var t=_slicedToArray(e,2),n=t[0];return t[1],!_.isNil(n)})),Object(N.a)(this.unsubscribe$)).subscribe((function(t){var n=_slicedToArray(t,2),a=n[0],o=n[1].pageInfo;e._isSearchClick=!1;var r=Object.assign({},a,{limits:[o.skip,o.skip+o.take]});e.store.dispatch(i.loadList({condition:r}))}))}},{key:"initSearchCondition",value:function(){var e=this;if(this.searchCondition$.subscribe((function(t){return e._searchCondition=t})),this.gridDataList$.subscribe((function(t){return e._searchGridDataList=t})),this.otherSearchInfo$.subscribe((function(t){return e._otherSearchInfo=t})),0===_.size(this._searchCondition)&&0===_.size(this._searchGridDataList)){var t=this._dataService.initListSearch(),n=this.UserConditionService.selectSearchSetting(t,this._storeId,this._otherSearchInfo);this.store.dispatch(i.changeSearchCondition({searchCondition:n[0],otherSearchInfo:n[1]}))}}}]),e}()).\u0275fac=function(e){return new(e||dt)(Oe.Qb(c.h),Oe.Qb(c.h),Oe.Qb(we),Oe.Qb(xe.a),Oe.Qb(Ae.a),Oe.Qb($e.a))},dt.\u0275cmp=Oe.Kb({type:dt,selectors:[["app-bs-region"]],viewQuery:function(e,t){var n;1&e&&(Oe.Xc(Te,!0),Oe.Xc(Ye.a,!0)),2&e&&(Oe.Dc(n=Oe.gc())&&(t.searchFormEl=n.first),Oe.Dc(n=Oe.gc())&&(t.gridEl=n.first))},decls:27,vars:43,consts:[[3,"otherSearchInfo","searchCondition","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","clickAddEvent","clickDelEvent","changePageSizeEvent"],["dynamicSearchUseYnTpl",""],["flightSearchUseYnTpl",""],["hotelSearchUseYnTpl",""],["deleteYnTpl",""],["updateProhibitYnTpl",""],[3,"gridLoading","columns","gridState","totalCount","checkboxUseYn","dataList","templates","stateChangeEvent","dbClickRowEvent"],["gridBasis",""],["modalSize","sm","modalContentClass","pd-all","header","Region Info",3,"visible","modal","visibleChange"],[3,"rowItem","submitEvent","closeEvent",4,"ngIf"],[4,"ngIf"],[3,"rowItem","submitEvent","closeEvent"]],template:function(e,t){if(1&e&&(Oe.Wb(0,"app-bs-region-search",0),Oe.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),Oe.ic(1,"async"),Oe.ic(2,"async"),Oe.Vb(),Oe.Wb(3,"app-bs-region-control",1),Oe.fc("clickAddEvent",(function(){return t.clickAddHandler()}))("clickDelEvent",(function(){return t.clickDelHandler()}))("changePageSizeEvent",(function(e){return t.changePageSizeHandler(e)})),Oe.ic(4,"async"),Oe.ic(5,"async"),Oe.ic(6,"async"),Oe.Vb(),Oe.Nc(7,Xe,2,2,"ng-template",null,2,Oe.Oc),Oe.Nc(9,et,2,2,"ng-template",null,3,Oe.Oc),Oe.Nc(11,it,2,2,"ng-template",null,4,Oe.Oc),Oe.Nc(13,rt,2,2,"ng-template",null,5,Oe.Oc),Oe.Nc(15,lt,2,2,"ng-template",null,6,Oe.Oc),Oe.Wb(17,"app-grid-simple",7,8),Oe.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)}))("dbClickRowEvent",(function(e){return t.dbClickRowHandler(e)})),Oe.ic(19,"async"),Oe.ic(20,"async"),Oe.ic(21,"async"),Oe.ic(22,"async"),Oe.Vb(),Oe.Wb(23,"app-dialog",9),Oe.fc("visibleChange",(function(){return t.closeUpsertHandler()})),Oe.ic(24,"async"),Oe.Nc(25,ut,2,3,"app-bs-region-form",10),Oe.ic(26,"async"),Oe.Vb()),2&e){var n=Oe.Ec(8),i=Oe.Ec(10),a=Oe.Ec(12),o=Oe.Ec(14),r=Oe.Ec(16);Oe.pc("otherSearchInfo",Oe.jc(1,15,t.otherSearchInfo$))("searchCondition",Oe.jc(2,17,t.searchCondition$)),Oe.Cb(3),Oe.pc("loading",Oe.jc(4,19,t.loading$))("currentPageSize",Oe.jc(5,21,t.listPageSize$))("totalCount",Oe.jc(6,23,t.gridDataTotalCount$)),Oe.Cb(14),Oe.pc("gridLoading",Oe.jc(19,25,t.loading$))("columns",t.columns)("gridState",Oe.jc(20,27,t.gridState$))("totalCount",Oe.jc(21,29,t.gridDataTotalCount$))("checkboxUseYn",!1)("dataList",Oe.jc(22,31,t.gridDataList$))("templates",Oe.yc(37,ft,n,i,a,o,r)),Oe.Cb(6),Oe.pc("visible",Oe.jc(24,33,t.isOpenDetailPopup$))("modal",!0),Oe.Cb(2),Oe.pc("ngIf",Oe.jc(26,35,t.isOpenDetailPopup$))}},directives:[Te,ze,Ye.a,Ue.a,a.o,Qe],pipes:[a.b],encapsulation:2,changeDetection:0}),dt),mt=[{path:"",component:gt,data:{title:"Region \uad00\ub9ac"}}],vt=((bt=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=Oe.Ob({type:bt}),bt.\u0275inj=Oe.Nb({factory:function(e){return new(e||bt)},imports:[[I.f.forChild(mt)],I.f]}),bt),Ct=n("lJxs"),yt=n("JIr8"),St=n("vkgz"),Ot=n("Xb6A"),kt=((pt=function(){function e(t,n,a,o,c){var s=this;_classCallCheck(this,e),this.actions$=t,this.service=n,this._errorService=a,this.store=o,this.alertService=c,this.loadList$=Object(r.c)((function(){return s.actions$.pipe(Object(r.d)(i.loadList),Object(Re.a)((function(e){var t=e.condition;return s.service.getList(t).pipe(Object(Ct.a)((function(e){var t=e.dataList,n=e.totalCount;return i.getListSuccess({dataList:t,totalCount:n})})),Object(yt.a)((function(e){var t="List lookup failed. Please try again in a momentarily.",n=[i.getListFailure({error:s._errorService.apiErrorHandler(e,t)})];return s._catchErr(e,t,n),[]})))})))})),this.removeItems$=Object(r.c)((function(){return s.actions$.pipe(Object(r.d)(i.removeSelectedGridEntities),Object(Re.a)((function(e){var t=e.rowids;return s.service.removeItems({rowids:t}).pipe(Object(Ct.a)((function(e){return{succeedYn:!0}})),Object(yt.a)((function(e){return Object(Ie.a)({succeedYn:!1,error:e})})))})),Object(St.a)((function(e){var t=e.succeedYn,n=e.error;if(t){var a=[i.reloadList(),i.delSelectedDetailRowInfo()];s._runPage("Your data has been deleted.",a)}else{var o=[i.removeItemsFailure({error:"Deletion failed."})];s._catchErr(n,"Deletion failed.",o)}})))}),{dispatch:!1}),this.upsertItem$=Object(r.c)((function(){return s.actions$.pipe(Object(r.d)(i.upsertItem),Object(Re.a)((function(e){var t=e.upsertCondition;return s.service.upsertItem(t).pipe(Object(Ct.a)((function(e){return{data:e.data,succeedYn:!0}})),Object(yt.a)((function(e){return Object(Ie.a)({succeedYn:!1,error:e})})))})),Object(St.a)((function(e){var t=e.succeedYn,n=e.error;if(t){var a=[i.reloadList(),i.upsertItemSuccess(),i.closeDetailPopup(),i.delSelectedDetailRowInfo()];s._runPage("Your data has been saved.",a)}else{var o="Failed to save.",r=[i.upsertItemFailure({error:o})];s._catchErr(n,o,r)}})))}),{dispatch:!1})}return _createClass(e,[{key:"_runPage",value:function(e,t){var n=this;this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?function(){t.forEach((function(e){n.store.dispatch(e)}))}:function(){}})}},{key:"_catchErr",value:function(e,t,n){var i=this,a=this._errorService.errorHandler(e,t);_.isNil(a)||(_.isNil(a.accept)&&(a.accept=(null==n?void 0:n.length)>0?function(){n.forEach((function(e){i.store.dispatch(e)}))}:function(){}),this.alertService.alert(a))}}]),e}()).\u0275fac=function(e){return new(e||pt)(Oe.bc(r.a),Oe.bc(We),Oe.bc(Ot.a),Oe.bc(c.h),Oe.bc(xe.a))},pt.\u0275prov=Oe.Mb({token:pt,factory:pt.\u0275fac}),pt),It=[gt],jt=[ze,Qe,Te],Rt=((ht=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=Oe.Ob({type:ht}),ht.\u0275inj=Oe.Nb({factory:function(e){return new(e||ht)},imports:[[a.c,o.m,o.w,s.m,l.a,u.a,d.a,C.a,b.a,p.a,h.a,f.a,g.a,m.a,v.a,y.a,k.a,S.a,O.a,vt,c.j.forFeature("bsRegion",ne),r.b.forFeature([kt])]]}),ht)}}]);