(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{UarX:function(t,e,i){"use strict";i.r(e),i.d(e,"CONTAINERS",(function(){return Zt})),i.d(e,"COMPONENTS",(function(){return te})),i.d(e,"VdCityMappingModule",(function(){return ee}));var n={};i.r(n),i.d(n,"initComponent",(function(){return F})),i.d(n,"loadVendorList",(function(){return P})),i.d(n,"getVendorListSuccess",(function(){return D})),i.d(n,"changeSearchCondition",(function(){return R})),i.d(n,"reloadList",(function(){return N})),i.d(n,"loadList",(function(){return W})),i.d(n,"getListSuccess",(function(){return $})),i.d(n,"getListFailure",(function(){return A})),i.d(n,"setGridStateAction",(function(){return _})),i.d(n,"setGridCheckStateAction",(function(){return M})),i.d(n,"changePageIndex",(function(){return z})),i.d(n,"changePageSize",(function(){return K})),i.d(n,"openAddPopup",(function(){return T})),i.d(n,"closeAddPopup",(function(){return x})),i.d(n,"addCity",(function(){return H})),i.d(n,"removeCity",(function(){return Y}));var c=i("ofXK"),o=i("3Pt+"),a=i("snw9"),s=i("kt0X"),r=i("WG3B"),d=i("xoAz"),l=i("wPo9"),h=i("7rOj"),p=i("+NQf"),u=i("6LsY"),b=i("l1P7"),g=i("v7zA"),m=i("7UZF"),C=i("hHe4"),v=i("1OXJ"),f=i("5hwk"),y=i("kKjH"),O=i("vu/V"),S=i("tyNb"),j=i("XNiG"),k=i("itXk"),V=i("zP0r"),w=i("1G5W"),L=i("Kj3r"),E=i("pLZG"),I=i("LvDl");const F=Object(s.o)("[VdCityMapping] init this component"),P=Object(s.o)("[VdCityMapping] load vendor list"),D=Object(s.o)("[VdCityMapping] get vendor list success",Object(s.t)()),R=Object(s.o)("[VdCityMapping/List] change search condition",Object(s.t)()),N=Object(s.o)("[VdCityMapping/List] reload list"),W=Object(s.o)("[VdCityMapping/List] load grid data list",Object(s.t)()),$=Object(s.o)("[VdCityMapping/List] get list success",Object(s.t)()),A=Object(s.o)("[VdCityMapping/List] get list failure",Object(s.t)()),_=Object(s.o)("[VdCityMapping/List] set grid state",Object(s.t)()),M=Object(s.o)("[VdCityMapping/List] set grid check state",Object(s.t)()),z=Object(s.o)("[VdCityMapping/List] change page index",Object(s.t)()),K=Object(s.o)("[VdCityMapping/List] change page size",Object(s.t)()),T=Object(s.o)("[VdCityMapping/AddForm] \ucd94\uac00 \ud31d\uc5c5 \uc5f4\uae30"),x=Object(s.o)("[VdCityMapping/AddForm] \ucd94\uac00 \ud31d\uc5c5 \ub2eb\uae30"),H=Object(s.o)("[VdCityMapping/List] \ucd94\uac00\ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(s.t)()),Y=Object(s.o)("[VdCityMapping/List] \uc0ad\uc81c\ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(s.t)());var Q=i("EVqC");const U=Object(Q.a)({selectId:t=>t.rowid,sortComparer:!1}),G=U.getInitialState({vendorList:null,loading:!1,reloadToggle:!1,searchCondition:null,otherSearchInfo:null,gridDataTotal:null,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},gridCheckedState:null,selectedDetailRowInfo:null,isOpenAddPopup:!1}),X=Object(s.q)(G,Object(s.s)(n.initComponent,t=>Object.assign(Object.assign({},t),{loading:!1,reloadToggle:!1,selectedDetailRowInfo:null,isOpenAddPopup:!1})),Object(s.s)(n.getVendorListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{vendorList:e})),Object(s.s)(n.reloadList,t=>Object.assign(Object.assign({},t),{reloadToggle:!t.reloadToggle})),Object(s.s)(n.changeSearchCondition,(t,{searchCondition:e,otherSearchInfo:i})=>Object.assign(Object.assign({},t),{searchCondition:e,otherSearchInfo:i})),Object(s.s)(n.loadList,t=>Object.assign(Object.assign({},t),{loading:!0})),Object(s.s)(n.getListSuccess,(t,{dataList:e,totalCount:i})=>U.setAll(e,Object.assign(Object.assign({},t),{loading:!1,gridDataTotal:i}))),Object(s.s)(n.getListFailure,t=>Object.assign(Object.assign({},t),{loading:!1})),Object(s.s)(n.setGridStateAction,(t,{gridState:e})=>Object.assign(Object.assign({},t),{gridState:e})),Object(s.s)(n.setGridCheckStateAction,(t,{gridCheckedState:e})=>Object.assign(Object.assign({},t),{gridCheckedState:e})),Object(s.s)(n.changePageSize,(t,{pageSize:e})=>Object.assign(Object.assign({},t),{gridState:I.set(I.cloneDeep(t.gridState),["pageInfo","take"],e)})),Object(s.s)(n.changePageIndex,(t,{pageIndex:e})=>Object.assign(Object.assign({},t),{gridState:I.set(I.cloneDeep(t.gridState),["pageInfo","skip"],e)})),Object(s.s)(n.openAddPopup,t=>Object.assign(Object.assign({},t),{isOpenAddPopup:!0})),Object(s.s)(n.closeAddPopup,t=>Object.assign(Object.assign({},t),{isOpenAddPopup:!1})));function B(t,e){return Object(s.m)({vdCityMappingList:X})(t,e)}const q=Object(s.p)("vdCityMapping"),J=Object(s.r)(q,t=>t.vdCityMappingList),Z=Object(s.r)(J,t=>t.vendorList),tt=Object(s.r)(J,t=>t.loading),et=Object(s.r)(J,t=>t.reloadToggle),it=Object(s.r)(J,t=>t.searchCondition),nt=Object(s.r)(J,t=>t.otherSearchInfo),ct=U.getSelectors(J).selectAll,ot=Object(s.r)(J,t=>t.gridState),at=Object(s.r)(J,t=>t.gridCheckedState),st=Object(s.r)(J,t=>t.gridDataTotal),rt=Object(s.r)(ot,t=>I.get(t,["pageInfo","take"],20)),dt=Object(s.r)(J,t=>t.selectedDetailRowInfo),lt=Object(s.r)(J,t=>t.isOpenAddPopup);var ht=i("YY+H"),pt=i("fXoL"),ut=i("yl57"),bt=i("EsKh"),gt=i("U6NN");let mt=(()=>{class t{constructor(t,e){this.hotKeysService=t,this.alertService=e,this.clickAddEvent=new pt.n,this.clickDelEvent=new pt.n,this.changePageSizeEvent=new pt.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}],this.hotKeys={add:null,del:null},this.hotKeys.add=this.hotKeysService.add(new ut.a("alt+s",t=>(this.clickAddEvent.emit(),!1))),this.hotKeys.del=this.hotKeysService.add(new ut.a("alt+d",t=>(this.clickDelEvent.emit(),!1)))}ngOnInit(){}ngOnDestroy(){for(const t in this.hotKeys)this.hotKeys[t]&&this.hotKeysService.remove(this.hotKeys[t])}onChangePageSize(t){this.changePageSizeEvent.emit(t.value)}}return t.\u0275fac=function(e){return new(e||t)(pt.Qb(ut.c),pt.Qb(bt.a))},t.\u0275cmp=pt.Kb({type:t,selectors:[["app-vd-city-mapping-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{clickAddEvent:"clickAddEvent",clickDelEvent:"clickDelEvent",changePageSizeEvent:"changePageSizeEvent"},decls:10,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"btn","btn-light","sm",3,"click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(t,e){1&t&&(pt.Wb(0,"div",0),pt.Wb(1,"strong",1),pt.Pc(2),pt.Vb(),pt.Wb(3,"div",2),pt.Wb(4,"button",3),pt.fc("click",(function(){return e.clickAddEvent.emit()})),pt.Pc(5,"Add(alt+s)"),pt.Vb(),pt.Wb(6,"button",4),pt.fc("click",(function(){return e.clickDelEvent.emit()})),pt.Pc(7,"Delete(alt+d)"),pt.Vb(),pt.Wb(8,"div",5),pt.Wb(9,"app-selectbox",6),pt.fc("onChange",(function(t){return e.onChangePageSize(t)})),pt.Vb(),pt.Vb(),pt.Vb(),pt.Vb()),2&t&&(pt.Cb(2),pt.Qc(e.loading?"":e.totalCount),pt.Cb(7),pt.pc("options",e.pageSizeOptions)("ngModel",e.currentPageSize)("useAllOptionYn",!1))},directives:[gt.a,o.r,o.u],styles:[""],changeDetection:0}),t})();var Ct=i("AytR");const{API_URL:vt}=Ct.a,ft={postCommonDetail:`${vt}/common/detail-code`,selectEntities:`${vt}/admin/vendor/city`,saveCityMapping:`${vt}/admin/vendor/city/mapping/save`,deleteCityMapping:`${vt}/admin/vendor/city/mapping/delete`};var yt=i("+Sob"),Ot=i("pfiq");function St(t,e){if(1&t&&(pt.Wb(0,"tr"),pt.Wb(1,"td"),pt.Pc(2),pt.Vb(),pt.Wb(3,"td"),pt.Pc(4),pt.Vb(),pt.Wb(5,"td"),pt.Pc(6),pt.Vb(),pt.Vb()),2&t){const t=e.$implicit;pt.Cb(2),pt.Qc(t.vendorCompName),pt.Cb(2),pt.Qc(t.vendorCityCode),pt.Cb(2),pt.Qc(t.vendorCityNameEn)}}const jt=function(){return["cityCode","cityNameLn"]};let kt=(()=>{class t{constructor(t){this.fb=t,this.submitEvent=new pt.n,this.closeEvent=new pt.n}get checkedRowDataList(){return this._checkedRowDataList}set checkedRowDataList(t){this._checkedRowDataList=t}get autoCompleteValueModel(){return""}ngOnInit(){this._initThisState()}onSubmit(){if(this.upsertForm.invalid)return void(this.checkValid=!0);const t=this._convertFormToItem(this.upsertForm.value,this.checkedRowDataList);this.submitEvent.emit(t)}onClose(){this.closeEvent.emit()}checkIsInvalid(t){return this.checkValid&&this.upsertForm.get(t)&&this.upsertForm.get(t).invalid}_initThisState(){this.checkValid=!1,this.upsertForm=this.fb.group({systemCityCode:[null,o.z.required]})}_convertFormToItem(t,e){return{systemCityCode:t.systemCityCode,list:e.map(t=>({vendorCompCode:t.vendorCompCode,vendorCityCode:t.vendorCityCode}))}}}return t.\u0275fac=function(e){return new(e||t)(pt.Qb(o.f))},t.\u0275cmp=pt.Kb({type:t,selectors:[["app-vd-city-mapping-form"]],inputs:{checkedRowDataList:"checkedRowDataList"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:40,vars:8,consts:[[1,"modal-body"],[3,"formGroup","connectForm","ngSubmit"],[1,"page-item"],[1,"table","table-bordered"],["scope","row",1,"th-bg"],["colspan","3"],["formControlName","systemCityCode","apiUrl","admin/common/city","dataKey","cityCode","inputFieldFormat","[{0}] {1}","placeholder","Name",3,"inputFieldValue","isInvalid","apiSearchTerm","inputFieldFormatKeyList"],[1,"page-item-header"],["scope","col"],[4,"ngFor","ngForOf"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(t,e){1&t&&(pt.Wb(0,"div",0),pt.Wb(1,"form",1),pt.fc("ngSubmit",(function(){return e.onSubmit()})),pt.Wb(2,"div",2),pt.Wb(3,"div",3),pt.Wb(4,"table"),pt.Wb(5,"tbody"),pt.Wb(6,"tr"),pt.Wb(7,"th",4),pt.Pc(8,"Master City"),pt.Rb(9,"sup"),pt.Vb(),pt.Wb(10,"td",5),pt.Rb(11,"app-auto-complete",6),pt.Vb(),pt.Vb(),pt.Vb(),pt.Vb(),pt.Vb(),pt.Vb(),pt.Wb(12,"div",2),pt.Wb(13,"div",7),pt.Wb(14,"p"),pt.Pc(15,"Not Mapped City Name List"),pt.Vb(),pt.Vb(),pt.Wb(16,"div",3),pt.Wb(17,"table"),pt.Wb(18,"caption"),pt.Pc(19," Not Mapped City Name List "),pt.Vb(),pt.Wb(20,"colgroup"),pt.Rb(21,"col"),pt.Rb(22,"col"),pt.Rb(23,"col"),pt.Rb(24,"col"),pt.Vb(),pt.Wb(25,"thead"),pt.Wb(26,"tr"),pt.Wb(27,"th",8),pt.Pc(28,"Vendor"),pt.Vb(),pt.Wb(29,"th",8),pt.Pc(30,"V. City Code"),pt.Vb(),pt.Wb(31,"th",8),pt.Pc(32,"V. City Name"),pt.Vb(),pt.Vb(),pt.Vb(),pt.Wb(33,"tbody"),pt.Nc(34,St,7,3,"tr",9),pt.Vb(),pt.Vb(),pt.Vb(),pt.Wb(35,"div",10),pt.Wb(36,"button",11),pt.Pc(37,"Save"),pt.Vb(),pt.Wb(38,"button",12),pt.fc("click",(function(){return e.onClose()})),pt.Pc(39,"Close"),pt.Vb(),pt.Vb(),pt.Vb(),pt.Vb(),pt.Vb()),2&t&&(pt.Cb(1),pt.pc("formGroup",e.upsertForm)("connectForm",e.upsertFormData),pt.Cb(10),pt.pc("inputFieldValue",e.autoCompleteValueModel)("isInvalid",e.checkIsInvalid("systemCityCode"))("apiSearchTerm","keyword")("inputFieldFormatKeyList",pt.tc(7,jt)),pt.Cb(23),pt.pc("ngForOf",e.checkedRowDataList))},directives:[o.B,o.s,o.k,yt.a,Ot.a,o.r,o.i,c.n],styles:[""],changeDetection:0}),t})();var Vt=i("LRne"),wt=i("z6cu"),Lt=i("eIep"),Et=i("tpT/");let It=(()=>{class t{constructor(t){this.api=t}getDetailCode(t){const e=I.assign({},this.api.defaultParams,{condition:t});return this.api.post(ft.postCommonDetail,e).pipe(Object(Lt.a)(t=>t.succeedYn&&t.result?Object(Vt.a)(t.result.list):Object(wt.a)(t||"api response error")))}getList(t){const e=I.assign({},this.api.defaultParams,{condition:t});return this.api.post(ft.selectEntities,e).pipe(Object(Lt.a)(t=>{if(t.succeedYn&&t.result){const{list:e,totalCount:i}=t.result,n=this._addRowid(e);return Object(Vt.a)({dataList:n,totalCount:i})}return Object(wt.a)(t||"api response error")}))}addCity(t){const e=I.assign({},this.api.defaultParams,{condition:t});return this.api.put(ft.saveCityMapping,e).pipe(Object(Lt.a)(t=>t.succeedYn?Object(Vt.a)(t.result):Object(wt.a)(t||"api response error")))}removeCity(t){const e=I.assign({},this.api.defaultParams,{condition:t});return this.api.delete(ft.deleteCityMapping,e).pipe(Object(Lt.a)(t=>t.succeedYn?Object(Vt.a)(t.result):Object(wt.a)(t||"api response error")))}_addRowid(t){return I.isNil(t)?[]:t.map((t,e)=>Object.assign(Object.assign({},t),{rowid:String(e)}))}}return t.\u0275fac=function(e){return new(e||t)(pt.bc(Et.a))},t.\u0275prov=pt.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ft=(()=>{class t{constructor(t){this.fb=t,this.generateSearchForm=()=>this.fb.group({countryCode:[null,[o.z.required]],vendorCompCode:[null],vendorCityName:[null],notMappedYn:[null]}),this.initSearchFormDataCondition=()=>({countryCode:null,vendorCompCode:null,vendorCityName:null,notMappedYn:null})}}return t.\u0275fac=function(e){return new(e||t)(pt.bc(o.f))},t.\u0275prov=pt.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Pt=i("gbCm");const Dt=function(){return["countryCode","countryNameLn","countryNameEn"]},Rt=function(){return["CMP06"]},Nt=function(t){return{compTypeCodes:t}},Wt=function(){return["compCode","compName"]};let $t=(()=>{class t{constructor(t){this.dataService=t,this.clickSearchEvent=new pt.n,this.clickResetEvent=new pt.n,this.notMappedYnOptions=[{label:"N",value:!1},{label:"Y",value:!0}],this.searchForm=this.dataService.generateSearchForm()}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(t){this._otherSearchInfo=t,this._setOtherSearchInfo(t)}get searchCondition(){return this._searchCondition}set searchCondition(t){this._searchCondition=t,this.searchFormData=this._setSearchFormData(t)}get searchFormValid(){return this.searchForm.valid}get formValue(){return this.searchForm&&this.searchForm.value}ngOnInit(){}onSubmit(){if(this.searchForm.invalid)return void(this.checkValid=!0);const t=this._setSearchCondition(),e=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:t,otherSearchInfo:e}),this.checkValid=!1}checkIsInvalid(t){return this.checkValid&&this.searchForm.get(t)&&this.searchForm.get(t).invalid}_setOtherSearchInfo(t){this.countryInput=(null==t?void 0:t.countryInput)||null,this.vendorInput=(null==t?void 0:t.vendorInput)||null}_setOtherSearchCondition(){const t={};return this.autoCompletes.forEach(e=>{Object.assign(t,e.getInputValue())}),t}_setSearchFormData(t){return I.isEmpty(t)?this.dataService.initSearchFormDataCondition():t}_setSearchCondition(){return I.omitBy(this.searchForm.value,I.isNil)}_initDetailSubscription(){}}return t.\u0275fac=function(e){return new(e||t)(pt.Qb(Ft))},t.\u0275cmp=pt.Kb({type:t,selectors:[["app-vd-city-mapping-search"]],viewQuery:function(t,e){var i;1&t&&pt.Xc(Ot.a,!0),2&t&&pt.Dc(i=pt.gc())&&(e.autoCompletes=i)},inputs:{otherSearchInfo:"otherSearchInfo",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:25,vars:16,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-1"],[1,"form-label"],["inputId","countryInput","formControlName","countryCode","apiUrl","admin/common/country","dataKey","countryCode","inputFieldFormat","{0} - &{1}_&{2}","placeholder","Name",1,"flex-fill",3,"inputFieldValue","apiSearchTerm","inputFieldFormatKeyList","isInvalid"],["formControlName","vendorCityName","placeholder","Name",1,"flex-fill"],["formControlName","vendorCompCode","inputId","vendorInput","apiUrl","common/comp","dataKey","compCode","inputFieldFormat","[{0}] {1}","placeholder","Name",1,"flex-fill",3,"inputFieldValue","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","notMappedYn",1,"flex-fill",3,"options"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(t,e){1&t&&(pt.Wb(0,"form",0),pt.fc("ngSubmit",(function(){return e.onSubmit()})),pt.Wb(1,"div",1),pt.Wb(2,"div",2),pt.Wb(3,"div",3),pt.Wb(4,"span",4),pt.Wb(5,"sup"),pt.Pc(6,"Country Name"),pt.Vb(),pt.Vb(),pt.Rb(7,"app-auto-complete",5),pt.Vb(),pt.Wb(8,"div",3),pt.Wb(9,"span",4),pt.Pc(10,"V.City Name"),pt.Vb(),pt.Rb(11,"app-input-text",6),pt.Vb(),pt.Wb(12,"div",3),pt.Wb(13,"span",4),pt.Pc(14,"Vendor"),pt.Vb(),pt.Rb(15,"app-auto-complete",7),pt.Vb(),pt.Wb(16,"div",3),pt.Wb(17,"span",4),pt.Pc(18,"Mapping YN"),pt.Vb(),pt.Rb(19,"app-selectbox",8),pt.Vb(),pt.Vb(),pt.Vb(),pt.Wb(20,"div",9),pt.Wb(21,"button",10),pt.Pc(22,"Search"),pt.Vb(),pt.Wb(23,"button",11),pt.fc("click",(function(){return e.clickResetEvent.emit()})),pt.Pc(24,"Reset"),pt.Vb(),pt.Vb(),pt.Vb()),2&t&&(pt.pc("formGroup",e.searchForm)("connectForm",e.searchFormData),pt.Cb(7),pt.pc("inputFieldValue",e.countryInput)("apiSearchTerm","keyword")("inputFieldFormatKeyList",pt.tc(11,Dt))("isInvalid",e.checkIsInvalid("countryCode")),pt.Cb(8),pt.pc("inputFieldValue",e.vendorInput)("apiCondition",pt.uc(13,Nt,pt.tc(12,Rt)))("apiSearchTerm","compName")("inputFieldFormatKeyList",pt.tc(15,Wt)),pt.Cb(4),pt.pc("options",e.notMappedYnOptions))},directives:[o.B,o.s,o.k,yt.a,Ot.a,o.r,o.i,Pt.a,gt.a],styles:[""],changeDetection:0}),t})();var At=i("bMKz");const _t=function(){return{allowUnsort:!0,mode:"multiple"}},Mt=function(){return{"text-align":"center"}};let zt=(()=>{class t{constructor(t,e){this._cd=t,this.UserConditionService=e,this.stateChangeEvent=new pt.n,this.checkedRows=[],this.skip=0,this.unsubscribe$=new j.a}get dataList(){return this._dataList}set dataList(t){this._dataList=t,this._loadCurrentView(),this._gridSetting(),this._setCheckedState()}get checkedDataList(){return I.isEmpty(this.checkedRows||I.isNil(this.dataList))?[]:this.dataList.filter(t=>this.checkedRows.indexOf(null==t?void 0:t.rowid)>-1)}get checkedStateOutput(){return I.isEmpty(this.checkedRows)?[]:{checkedRowids:I.isEmpty(this.checkedRows)?[]:this.checkedRows}}get pageInfo(){return this.gridState.pageInfo}get sortInfo(){return this.gridState.sortInfo}ngOnInit(){}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onPageChange(t){const e=Object.assign({},this.gridState.pageInfo,{skip:t.skip}),i=Object.assign({},this.gridState,{pageInfo:I.cloneDeep(e)});this.stateChangeEvent.emit(i)}onSortChange(t){const e=Object.assign({},this.gridState,{sortInfo:I.cloneDeep(t)});this.stateChangeEvent.emit(e)}onSelectedKeysChange(t){this.checkedRows=I.cloneDeep(t)}_loadCurrentView(){this.gridView={data:this.dataList||[],total:this.totalCount||0}}_setCheckedState(){if(this.checkedRows=[],!I.isEmpty(this.checkedState)){const{checkedRowids:t}=this.checkedState;this.checkedRows=I.isEmpty(t)?[]:I.cloneDeep(t)}}_gridSetting(){}}return t.\u0275fac=function(e){return new(e||t)(pt.Qb(pt.h),pt.Qb(At.a))},t.\u0275cmp=pt.Kb({type:t,selectors:[["app-vd-city-mapping-list-grid"]],viewQuery:function(t,e){var i;1&t&&pt.Xc(r.l,!0),2&t&&pt.Dc(i=pt.gc())&&(e.grid=i.first)},inputs:{loading:"loading",gridState:"gridState",checkedState:"checkedState",totalCount:"totalCount",dataList:"dataList"},outputs:{stateChangeEvent:"stateChangeEvent"},decls:12,vars:31,consts:[["kendoGridSelectBy","rowid",2,"max-height","900px",3,"loading","data","resizable","reorderable","pageable","skip","pageSize","sortable","sort","selectedKeys","pageChange","sortChange","selectedKeysChange"],["field","systemCityCode","title","City Code",3,"width"],["field","systemCityNameEn","title","City Name",3,"width"],["field","vendorCityNameEn","title","Vendor Name",3,"width"],["field","vendorCityCode","title","V. City Code",3,"width"],["field","vendorCityNameEn","title","V.City Name",3,"width"],["field","vendorStateCode","title","V.State Code",3,"width"],["field","systemCountryCode","title","Country Code",3,"width"],["field","lastUpdateName","title","Last Update User",3,"width"],["field","lastUpdateDatetime","title","Last Update Time",3,"width"],["field","firstUpdateName","title","First Insert User",3,"width"],["field","firstUpdateDatetime","title","First Insert Time",3,"width"]],template:function(t,e){1&t&&(pt.Wb(0,"kendo-grid",0),pt.fc("pageChange",(function(t){return e.onPageChange(t)}))("sortChange",(function(t){return e.onSortChange(t)}))("selectedKeysChange",(function(t){return e.onSelectedKeysChange(t)})),pt.Rb(1,"kendo-grid-column",1),pt.Rb(2,"kendo-grid-column",2),pt.Rb(3,"kendo-grid-column",3),pt.Rb(4,"kendo-grid-column",4),pt.Rb(5,"kendo-grid-column",5),pt.Rb(6,"kendo-grid-column",6),pt.Rb(7,"kendo-grid-column",7),pt.Rb(8,"kendo-grid-column",8),pt.Rb(9,"kendo-grid-column",9),pt.Rb(10,"kendo-grid-column",10),pt.Rb(11,"kendo-grid-column",11),pt.Vb()),2&t&&(pt.pc("loading",e.loading)("data",e.gridView)("resizable",!0)("reorderable",!0)("pageable",!0)("skip",e.pageInfo.skip)("pageSize",e.pageInfo.take)("sortable",pt.tc(27,_t))("sort",e.sortInfo)("selectedKeys",e.checkedRows),pt.Cb(1),pt.pc("width",100),pt.Cb(1),pt.pc("width",150),pt.Cb(1),pt.pc("width",150),pt.Cb(1),pt.pc("width",150),pt.Cb(1),pt.pc("width",150),pt.Cb(1),pt.pc("width",150),pt.Cb(1),pt.Lc(pt.tc(28,Mt)),pt.pc("width",100),pt.Cb(1),pt.pc("width",150),pt.Cb(1),pt.Lc(pt.tc(29,Mt)),pt.pc("width",150),pt.Cb(1),pt.pc("width",150),pt.Cb(1),pt.Lc(pt.tc(30,Mt)),pt.pc("width",150))},directives:[r.l,r.p,r.d],encapsulation:2,changeDetection:0}),t})();var Kt=i("kDLv");function Tt(t,e){if(1&t){const t=pt.Xb();pt.Wb(0,"app-vd-city-mapping-form",5),pt.fc("submitEvent",(function(e){return pt.Fc(t),pt.hc().submitAddFormHandler(e)}))("closeEvent",(function(){return pt.Fc(t),pt.hc().closeAddFormHandler()})),pt.Vb()}if(2&t){const t=pt.hc();pt.pc("checkedRowDataList",t.checkedRowDataList)}}let xt=(()=>{class t{constructor(t,e,i,n,c){this.store=t,this.authStore=e,this.alertService=i,this._dataService=n,this.UserConditionService=c,this.unsubscribe$=new j.a,this.vendorList$=this.store.pipe(Object(s.u)(Z)),this.loading$=this.store.pipe(Object(s.u)(tt)),this.reloadToggle$=this.store.pipe(Object(s.u)(et)),this.searchCondition$=this.store.pipe(Object(s.u)(it)),this.otherSearchInfo$=this.store.pipe(Object(s.u)(nt)),this.gridDataList$=this.store.pipe(Object(s.u)(ct)),this.listPageSize$=this.store.pipe(Object(s.u)(rt)),this.gridState$=this.store.pipe(Object(s.u)(ot)),this.gridCheckedState$=this.store.pipe(Object(s.u)(at)),this.gridDataTotalCount$=this.store.pipe(Object(s.u)(st)),this.isOpenAddPopup$=this.store.pipe(Object(s.u)(lt)),this.selectedMasterItem$=this.store.pipe(Object(s.u)(dt)),this.loginUserNo$=this.authStore.pipe(Object(s.u)(ht.t)),this.storeId$=this.authStore.pipe(Object(s.u)(ht.o)),this._initSubscription()}ngOnInit(){this.storeId$.subscribe(t=>this._storeId=t),this.initSearchCondition()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(n.initComponent()),this.store.dispatch(n.setGridCheckStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}changePageSizeHandler(t){this.store.dispatch(n.changePageSize({pageSize:t}))}clickSearchHandler({searchCondition:t,otherSearchInfo:e}){this.store.dispatch(n.changeSearchCondition({searchCondition:t,otherSearchInfo:e})),this.store.dispatch(n.changePageIndex({pageIndex:0}))}clickResetHandler(){this.store.dispatch(n.changeSearchCondition({searchCondition:{},otherSearchInfo:null}))}gridStateChangeHandler(t){this.store.dispatch(n.setGridStateAction({gridState:t}))}clickAddHandler(){const t=this.gridEl.checkedDataList;(null==t?void 0:t.length)<1?this.alertService.alert("No data is selected."):(this.checkedRowDataList=I.cloneDeep(t),this.openAddFormHandler())}clickDelHandler(){const t=this.gridEl.checkedDataList;(null==t?void 0:t.length)<1?this.alertService.alert("No data is selected."):1===I.uniqBy(t,"systemCityCode").length?this.alertService.confirm({message:"Are you sure you want to delete the selected items?",accept:()=>{const e={systemCityCode:t[0].systemCityCode,list:t.map(t=>({vendorCompCode:t.vendorCompCode,vendorCityCode:t.vendorCityCode}))};this.store.dispatch(n.removeCity({condition:e}))},reject:()=>{}}):this.alertService.alert("\ub3c4\uc2dc\ucf54\ub4dc\uac00 \uac19\uc740 \ub370\uc774\ud130\ub9cc \uc120\ud0dd \uac00\ub2a5\ud569\ub2c8\ub2e4.")}submitAddFormHandler(t){this.store.dispatch(n.addCity({condition:t})),this.closeAddFormHandler()}openAddFormHandler(){this.store.dispatch(n.openAddPopup())}closeAddFormHandler(){this.checkedRowDataList=null,this.store.dispatch(n.closeAddPopup())}_initSubscription(){this.reloadToggle$.pipe(Object(V.a)(1),Object(w.a)(this.unsubscribe$)).subscribe(()=>{this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()}),Object(k.a)([this.searchCondition$,this.gridState$]).pipe(Object(V.a)(1),Object(L.a)(200),Object(E.a)(([t,e])=>!I.isEmpty(t)),Object(w.a)(this.unsubscribe$)).subscribe(([t,{pageInfo:e,sortInfo:i}])=>{const c=this._setSortOrder(i),o=Object.assign({},t,{limits:[e.skip,e.skip+e.take],sortOrder:c});this.store.dispatch(n.loadList({condition:o}))})}_setSortOrder(t){return t.filter(t=>!I.isNil(t.dir)).map(t=>({keyName:t.field,sort:t.dir}))}initSearchCondition(){}}return t.\u0275fac=function(e){return new(e||t)(pt.Qb(s.h),pt.Qb(s.h),pt.Qb(bt.a),pt.Qb(Ft),pt.Qb(At.a))},t.\u0275cmp=pt.Kb({type:t,selectors:[["app-vd-city-mapping"]],viewQuery:function(t,e){var i;1&t&&(pt.Xc($t,!0),pt.Xc(zt,!0)),2&t&&(pt.Dc(i=pt.gc())&&(e.searchFormEl=i.first),pt.Dc(i=pt.gc())&&(e.gridEl=i.first))},decls:16,vars:34,consts:[[3,"searchCondition","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","clickAddEvent","clickDelEvent","changePageSizeEvent"],[3,"loading","gridState","checkedState","totalCount","dataList","stateChangeEvent"],["modalSize","sm","modalContentClass","pd-all","header","Vendor City Mapping Info.",3,"visible","modal","visibleChange"],[3,"checkedRowDataList","submitEvent","closeEvent",4,"ngIf"],[3,"checkedRowDataList","submitEvent","closeEvent"]],template:function(t,e){1&t&&(pt.Wb(0,"app-vd-city-mapping-search",0),pt.fc("clickSearchEvent",(function(t){return e.clickSearchHandler(t)}))("clickResetEvent",(function(){return e.clickResetHandler()})),pt.ic(1,"async"),pt.Vb(),pt.Wb(2,"app-vd-city-mapping-control",1),pt.fc("clickAddEvent",(function(){return e.clickAddHandler()}))("clickDelEvent",(function(){return e.clickDelHandler()}))("changePageSizeEvent",(function(t){return e.changePageSizeHandler(t)})),pt.ic(3,"async"),pt.ic(4,"async"),pt.ic(5,"async"),pt.Vb(),pt.Wb(6,"app-vd-city-mapping-list-grid",2),pt.fc("stateChangeEvent",(function(t){return e.gridStateChangeHandler(t)})),pt.ic(7,"async"),pt.ic(8,"async"),pt.ic(9,"async"),pt.ic(10,"async"),pt.ic(11,"async"),pt.Vb(),pt.Wb(12,"app-dialog",3),pt.fc("visibleChange",(function(){return e.closeAddFormHandler()})),pt.ic(13,"async"),pt.Nc(14,Tt,1,1,"app-vd-city-mapping-form",4),pt.ic(15,"async"),pt.Vb()),2&t&&(pt.pc("searchCondition",pt.jc(1,12,e.searchCondition$)),pt.Cb(2),pt.pc("loading",pt.jc(3,14,e.loading$))("currentPageSize",pt.jc(4,16,e.listPageSize$))("totalCount",pt.jc(5,18,e.gridDataTotalCount$)),pt.Cb(4),pt.pc("loading",pt.jc(7,20,e.loading$))("gridState",pt.jc(8,22,e.gridState$))("checkedState",pt.jc(9,24,e.gridCheckedState$))("totalCount",pt.jc(10,26,e.gridDataTotalCount$))("dataList",pt.jc(11,28,e.gridDataList$)),pt.Cb(6),pt.pc("visible",pt.jc(13,30,e.isOpenAddPopup$))("modal",!0),pt.Cb(2),pt.pc("ngIf",pt.jc(15,32,e.isOpenAddPopup$)))},directives:[$t,mt,zt,Kt.a,c.o,kt],pipes:[c.b],encapsulation:2,changeDetection:0}),t})();const Ht=[{path:"",component:xt,data:{title:"\uacf5\uae09\uc790 \ub3c4\uc2dc \ub9f5\ud551"}}];let Yt=(()=>{class t{}return t.\u0275mod=pt.Ob({type:t}),t.\u0275inj=pt.Nb({factory:function(e){return new(e||t)},imports:[[S.f.forChild(Ht)],S.f]}),t})();var Qt=i("bOdf"),Ut=i("zp1y"),Gt=i("lJxs"),Xt=i("JIr8"),Bt=i("vkgz"),qt=i("Xb6A");let Jt=(()=>{class t{constructor(t,e,i,c,o){this.actions$=t,this.service=e,this._errorService=i,this.alertService=c,this.store=o,this.loadVendorList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadVendorList),Object(Qt.a)(t=>Object(Vt.a)(t).pipe(Object(Ut.a)(this.vendorList$))),Object(Lt.a)(([t,e])=>I.isEmpty(e)?this.service.getDetailCode({masterCode:"BS002",referCode1:"EVENT"}).pipe(Object(Gt.a)(t=>n.getVendorListSuccess({dataList:t})),Object(Xt.a)(t=>(this._catchErr(t,"\uacf5\uae09\uc790 \uae30\ucd08\ucf54\ub4dc \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[]))),this.loadList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadList),Object(Lt.a)(({condition:t})=>this.service.getList(t).pipe(Object(Gt.a)(({dataList:t,totalCount:e})=>n.getListSuccess({dataList:t,totalCount:e})),Object(Xt.a)(t=>{const e="List lookup failed. Please try again in a momentarily.",i=[n.getListFailure({error:e})];return this._catchErr(t,e,i),[]}))))),this.addCity$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.addCity),Object(Lt.a)(({condition:t})=>this.service.addCity(t).pipe(Object(Gt.a)(()=>({succeedYn:!0})),Object(Xt.a)(t=>Object(Vt.a)({succeedYn:!1,error:t})))),Object(Bt.a)(({succeedYn:t,error:e})=>{if(t){const t=[n.reloadList()];this._runPage("\ucd94\uac00 \ub418\uc5c8\uc2b5\ub2c8\ub2e4.",t)}else this._catchErr(e,"\ucd94\uac00\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.")})),{dispatch:!1}),this.removeCity$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.removeCity),Object(Lt.a)(({condition:t})=>this.service.removeCity(t).pipe(Object(Gt.a)(()=>({succeedYn:!0})),Object(Xt.a)(t=>Object(Vt.a)({succeedYn:!1,error:t})))),Object(Bt.a)(({succeedYn:t,error:e})=>{if(t){const t=[n.reloadList()];this._runPage("\uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4.",t)}else this._catchErr(e,"\uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.")})),{dispatch:!1}),this.vendorList$=this.store.pipe(Object(s.u)(Z))}_runPage(t,e){this.alertService.alert({message:t,accept:(null==e?void 0:e.length)>0?()=>{e.forEach(t=>{this.store.dispatch(t)})}:()=>{}})}_catchErr(t,e,i){const n=this._errorService.errorHandler(t,e);I.isNil(n)||(I.isNil(n.accept)&&(n.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(t=>{this.store.dispatch(t)})}:()=>{}),this.alertService.alert(n))}}return t.\u0275fac=function(e){return new(e||t)(pt.bc(a.a),pt.bc(It),pt.bc(qt.a),pt.bc(bt.a),pt.bc(s.h))},t.\u0275prov=pt.Mb({token:t,factory:t.\u0275fac}),t})();const Zt=[xt],te=[mt,kt,$t,zt];let ee=(()=>{class t{}return t.\u0275mod=pt.Ob({type:t}),t.\u0275inj=pt.Nb({factory:function(e){return new(e||t)},imports:[[c.c,o.m,o.w,r.m,d.a,l.a,h.a,f.a,p.a,u.a,b.a,g.a,m.a,C.a,v.a,y.a,O.a,Yt,ut.b,s.j.forFeature("vdCityMapping",B),a.b.forFeature([Jt])]]}),t})()},wPo9:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("ofXK"),c=i("3Pt+"),o=i("WG3B"),a=i("qXPF"),s=i("fXoL");let r=(()=>{class t{}return t.\u0275mod=s.Ob({type:t}),t.\u0275inj=s.Nb({factory:function(e){return new(e||t)},imports:[[n.c,c.m,c.w,o.m,a.a]]}),t})()}}]);