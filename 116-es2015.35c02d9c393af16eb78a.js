(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{Onn4:function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var n=o("fXoL"),i=o("3Pt+"),r=o("ofXK");const a=["rb"],s=function(){return{radio:!0}},c={provide:i.p,useExisting:Object(n.U)(()=>l),multi:!0};let l=(()=>{class e{constructor(e){this.cd=e,this.onClick=new n.n,this.onFocus=new n.n,this.onBlur=new n.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}handleClick(e,t,o){e.preventDefault(),this.disabled||(this.select(e),o&&t.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.onClick.emit(e))}writeValue(e){this.checked=e===this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}onChange(e){this.select(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(n.h))},e.\u0275cmp=n.Kb({type:e,selectors:[["app-radio"]],viewQuery:function(e,t){var o;1&e&&n.Kc(a,!0),2&e&&n.Dc(o=n.gc())&&(t.inputViewChild=o.first)},inputs:{value:"value",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",checked:"checked"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[n.Bb([c])],decls:5,vars:11,consts:[[3,"ngClass","click"],["type","radio",1,"radio-control-input",3,"checked","disabled","change","focus","blur"],["rb",""],[1,"radio-control-text"]],template:function(e,t){1&e&&(n.Wb(0,"label",0),n.fc("click",(function(e){return t.select(e)})),n.Wb(1,"input",1,2),n.fc("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onInputFocus(e)}))("blur",(function(e){return t.onInputBlur(e)})),n.Vb(),n.Wb(3,"span",3),n.Pc(4),n.Vb(),n.Vb()),2&e&&(n.Eb(t.styleClass),n.pc("ngClass",n.tc(10,s)),n.Cb(1),n.pc("checked",t.checked)("disabled",t.disabled),n.Db("id",t.inputId)("name",t.name)("value",t.value)("tabindex",t.tabindex),n.Cb(3),n.Qc(t.label))},directives:[r.l],encapsulation:2}),e})()},"gx+I":function(e,t,o){"use strict";o.r(t),o.d(t,"CONTAINERS",(function(){return No})),o.d(t,"COMPONENTS",(function(){return Ro})),o.d(t,"HoRoomListModule",(function(){return Fo}));var n={};o.r(n),o.d(n,"loadPolicyActions",(function(){return j})),o.d(n,"loadPolicySuccess",(function(){return k})),o.d(n,"loadCorporateStaffSuccess",(function(){return W})),o.d(n,"initComponentStateAction",(function(){return P})),o.d(n,"loadStationList",(function(){return S})),o.d(n,"loadStationListSuccess",(function(){return L})),o.d(n,"loadCorporateList",(function(){return N})),o.d(n,"loadCorporateListSuccess",(function(){return R})),o.d(n,"loadCardList",(function(){return F})),o.d(n,"loadCardListSuccess",(function(){return T})),o.d(n,"loadArrivalTimeList",(function(){return D})),o.d(n,"loadArrivalTimeListSuccess",(function(){return A})),o.d(n,"loadBedTypeList",(function(){return x})),o.d(n,"loadBedTypeListSuccess",(function(){return $})),o.d(n,"loadCardTypeOptions",(function(){return H})),o.d(n,"loadCardTypeOptionsSuccess",(function(){return B})),o.d(n,"loadCorporateCardList",(function(){return Y})),o.d(n,"loadCorporateCardListSuccess",(function(){return _})),o.d(n,"setStationTypeCode",(function(){return w})),o.d(n,"setBookerCompCode",(function(){return M})),o.d(n,"setHotelCode",(function(){return E})),o.d(n,"setDomainAddress",(function(){return q})),o.d(n,"setCountryCode",(function(){return Q})),o.d(n,"setCurrencyCode",(function(){return z})),o.d(n,"setRegionCode",(function(){return U})),o.d(n,"setLanguageCode",(function(){return K})),o.d(n,"setTransactionSetId",(function(){return G})),o.d(n,"changeRoomSearchFormData",(function(){return X})),o.d(n,"loadHotelInformation",(function(){return J})),o.d(n,"loadHotelInformationSuccess",(function(){return Z})),o.d(n,"loadHotelInformationFailure",(function(){return ee})),o.d(n,"loadRoomList",(function(){return te})),o.d(n,"loadRoomListSuccess",(function(){return oe})),o.d(n,"loadRoomListFailure",(function(){return ne})),o.d(n,"addSelectedRoomInfo",(function(){return ie})),o.d(n,"delSelectedRoomInfo",(function(){return re})),o.d(n,"loadRoomCondition",(function(){return ae})),o.d(n,"loadRoomConditionSuccess",(function(){return se})),o.d(n,"loadRoomConditionFailure",(function(){return ce})),o.d(n,"openBookingFormPopup",(function(){return le})),o.d(n,"closeBookingFormPopup",(function(){return de})),o.d(n,"requestBookingAction",(function(){return be})),o.d(n,"requestBookingSuccess",(function(){return ue})),o.d(n,"requestBookingFailure",(function(){return pe}));var i=o("ofXK"),r=o("3Pt+"),a=o("snw9"),s=o("kt0X"),c=o("pxUr"),l=o("vu/V"),d=o("7rOj"),b=o("l1P7"),u=o("6LsY"),p=o("v7zA"),h=o("hHe4"),m=o("5hwk"),C=o("kKjH"),f=o("qXPF"),g=o("1OXJ"),v=o("7UZF"),y=o("A4Tr"),O=o("AsNq"),I=o("tyNb"),V=o("LvDl");const j=Object(s.o)("[HoRoomList] load policy",Object(s.t)()),k=Object(s.o)("[HoRoomList] load policy success",Object(s.t)()),W=Object(s.o)("[HoRoomList] load corporate staff success",Object(s.t)()),P=Object(s.o)("[HoRoomList] init component state"),S=Object(s.o)("[HoRoomList] load station list"),L=Object(s.o)("[HoRoomList] load station list success",Object(s.t)()),N=Object(s.o)("[HoRoomList] load corporate list"),R=Object(s.o)("[HoRoomList] load corporate list success",Object(s.t)()),F=Object(s.o)("[HoRoomList] load card list"),T=Object(s.o)("[HoRoomList] load card list success",Object(s.t)()),D=Object(s.o)("[HoRoomList] load arrival time list"),A=Object(s.o)("[HoRoomList] load arrival time list success",Object(s.t)()),x=Object(s.o)("[HoRoomList] load bed type list"),$=Object(s.o)("[HoRoomList] load bed type list success",Object(s.t)()),H=Object(s.o)("[HoRoomList] load card type options"),B=Object(s.o)("[HoRoomList] load card type options success",Object(s.t)()),Y=Object(s.o)("[HoRoomList] load corporate card list"),_=Object(s.o)("[HoRoomList] load corporate card list success",Object(s.t)()),w=Object(s.o)("[HoRoomList] set station type code",Object(s.t)()),M=Object(s.o)("[HoRoomList] set booker comp code",Object(s.t)()),E=Object(s.o)("[HoRoomList] set hotel code",Object(s.t)()),q=Object(s.o)("[HoRoomList] set domainaddress",Object(s.t)()),Q=Object(s.o)("[HoRoomList] set country",Object(s.t)()),z=Object(s.o)("[HoRoomList] set currency",Object(s.t)()),U=Object(s.o)("[HoRoomList] set region code",Object(s.t)()),K=Object(s.o)("[HoRoomList] set Language code",Object(s.t)()),G=Object(s.o)("[HoRoomList] set transaction set id",Object(s.t)()),X=Object(s.o)("[HoRoomList] change room search form data",Object(s.t)()),J=Object(s.o)("[HoRoomList] hotel information",Object(s.t)()),Z=Object(s.o)("[HoRoomList] load hotel information success",Object(s.t)()),ee=Object(s.o)("[HoRoomList] load hotel information failure",Object(s.t)()),te=Object(s.o)("[HoRoomList] load room list",Object(s.t)()),oe=Object(s.o)("[HoRoomList] load room list success",Object(s.t)()),ne=Object(s.o)("[HoRoomList] load room list failure",Object(s.t)()),ie=Object(s.o)("[HoRoomList] add selected romm info",Object(s.t)()),re=Object(s.o)("[HoRoomList] del selected romm info"),ae=Object(s.o)("[HoRoomList] load room condition",Object(s.t)()),se=Object(s.o)("[HoRoomList] load room condition success",Object(s.t)()),ce=Object(s.o)("[HoRoomList] load room condition failure",Object(s.t)()),le=Object(s.o)("[HoRoomList] open booking form popup"),de=Object(s.o)("[HoRoomList] close booking form popup"),be=Object(s.o)("[HoRoomList] request booking",Object(s.t)()),ue=Object(s.o)("[HoRoomList] request booking success"),pe=Object(s.o)("[HoRoomList] request booking failure");var he=o("fXoL"),me=o("EsKh"),Ce=o("LRne"),fe=o("z6cu"),ge=o("eIep"),ve=o("AytR");const{API_URL:ye}=ve.a,Oe={postPolicyDetail:`${ye}/admin/corporate/policy/detail`,postCorporateStaff:`${ye}/admin/corporate/staff`,postCommonDetail:`${ye}/common/detail-code`,postCorporateComp:`${ye}/admin/corporate/comp`,postBasicContinent:`${ye}/admin/basis/continent`,corporateCardInfo:`${ye}/admin/corporate/card-info`,postHotelRoomList:`${ye}/hotel/room/list`,postHotelInformation:`${ye}/hotel/information`,postHotelRoomCondition:`${ye}/hotel/room/condition`,requestBooking:`${ye}/booking/v2`};var Ie=o("tpT/");let Ve=(()=>{class e{constructor(e){this.api=e}loadPolicyDetail(e){const t=V.assign({},this.api.defaultParams,{condition:e});return this.api.post(Oe.postPolicyDetail,t).pipe(Object(ge.a)(e=>{var t;return e.succeedYn?Object(Ce.a)((null===(t=e.result)||void 0===t?void 0:t.itemCategories)||[]):Object(fe.a)(e||"api response error")}))}loadCoporateStaff(e){const t=V.assign({},this.api.defaultParams,{condition:e});return this.api.post(Oe.postCorporateStaff,t).pipe(Object(ge.a)(e=>e.succeedYn?Object(Ce.a)(e.result.list[0]):Object(fe.a)(e||"api response error")))}getCommonDetailCodeList(e){const t=V.assign({},this.api.defaultParams,{condition:e});return this.api.post(Oe.postCommonDetail,t).pipe(Object(ge.a)(e=>e.succeedYn?Object(Ce.a)(e.result.list):Object(fe.a)(e||"api response error")))}getCorporateList(e){const t=V.assign({},this.api.defaultParams,{condition:e});return this.api.post(Oe.postCorporateComp,t).pipe(Object(ge.a)(e=>e.succeedYn&&e.result?Object(Ce.a)(e.result.list):Object(fe.a)(e||"api response error")))}loadCorporateCardList(e){const t=V.assign({},this.api.defaultParams,{condition:e});return this.api.post(Oe.corporateCardInfo,t).pipe(Object(ge.a)(e=>{var t;return e.succeedYn?Object(Ce.a)((null===(t=e.result)||void 0===t?void 0:t.list)||[]):Object(fe.a)(e||"api response error")}))}getHotelInformation({condition:e,stationTypeCode:t,transactionSetId:o,country:n,currency:i}){const r=V.assign({},this.api.makeCustomParams({stationTypeCode:t,transactionSetId:o||void 0,country:n,currency:i}),{condition:e});return this.api.post(Oe.postHotelInformation,r).pipe(Object(ge.a)(e=>e.succeedYn&&e.result?Object(Ce.a)({info:e.result.hotel,transactionSetId:e.transactionSetId}):Object(fe.a)(e||"api response error")))}getRoomList({condition:e,stationTypeCode:t,transactionSetId:o,country:n,currency:i}){const r=V.assign({},this.api.makeCustomParams({stationTypeCode:t,transactionSetId:o||void 0,country:n,currency:i}),{condition:e});return this.api.post(Oe.postHotelRoomList,r).pipe(Object(ge.a)(e=>{if(e.succeedYn&&e.result){const t=e.result.roomTypes.map((e,t)=>Object.assign({id:e.index},e));return Object(Ce.a)({roomList:t,transactionSetId:e.transactionSetId})}return Object(fe.a)(e||"api response error")}))}getRoomCondition({condition:e,stationTypeCode:t,transactionSetId:o,country:n,currency:i}){const r=V.assign({},this.api.makeCustomParams({stationTypeCode:t,transactionSetId:o||void 0,country:n,currency:i}),{condition:e});return this.api.post(Oe.postHotelRoomCondition,r).pipe(Object(ge.a)(e=>e.succeedYn&&e.result?Object(Ce.a)({info:e.result,transactionSetId:e.transactionSetId}):Object(fe.a)(e||"api response error")))}requestBooking({condition:e,stationTypeCode:t,transactionSetId:o,country:n,currency:i,language:r}){const a=V.assign({},this.api.makeCustomParams({stationTypeCode:t,transactionSetId:o||void 0,country:n,currency:i,language:r}),{condition:e});return this.api.post(Oe.requestBooking,a).pipe(Object(ge.a)(e=>e.succeedYn?Object(Ce.a)(!0):Object(fe.a)(e||"api response error")))}}return e.\u0275fac=function(t){return new(t||e)(he.bc(Ie.a))},e.\u0275prov=he.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var je=o("wd/R"),ke=o("6UzV");let We=(()=>{class e{constructor(e){this.fb=e,this.generateListSearchForm=()=>this.fb.group({dynamicRateYn:[!1],checkInDate:[null,[r.z.required]],checkOutDate:[null,[r.z.required]],rooms:this.fb.array([this.generateListSearchRoomForm()])},{validators:[ke.a.compareDatesValidators("checkInDateValidator",["checkInDate","checkOutDate"])]}),this.generateListSearchRoomForm=()=>this.fb.group({adultCount:[2],childCount:[0],childAges:this.fb.array([]),travelerUnos:this.fb.array([new r.g({value:null,disabled:!0},[r.z.required])])}),this.generateRequiredFormControl=()=>new r.g(null,[r.z.required]),this.generateNonRequiredFormControl=()=>new r.g(1,[r.z.required]),this.initSearchFormData=()=>({dynamicRateYn:!1,checkInDate:null,checkOutDate:null,rooms:[{adultCount:2,childCount:0,childAges:[],travelerUnos:[]}]}),this.initSearchCondition=()=>({regionCode:null,hotelCode:null,checkInDate:null,checkOutDate:null,rooms:null,dynamicRateYn:null}),this.initRoomConditionRq=()=>({hotelCode:null,checkInDate:null,checkOutDate:null,rooms:null,roomTypeCode:null,roomTypeName:null,roomTypeCodedData:null}),this.generateBookerForm=()=>this.fb.group({userNo:[null,[r.z.required]],compCode:[null],name:[null,[r.z.required]],email:[null,[r.z.required,ke.a.email()]],countryPhoneCode:[null,[r.z.required]],mobileNo:[null,[r.z.required]]}),this.initBookerFormData=()=>({userNo:null,compCode:null,name:null,email:null,countryPhoneCode:null,mobileNo:null}),this.initBookerFormCondition=()=>({userNo:null,compCode:null,name:null,email:null,countryPhoneCode:null,mobileNo:null}),this.generateTravelerForm=()=>this.fb.group({travelers:this.fb.array([])}),this.generateTravelerFormItem=()=>this.fb.group({roomNo:[null],travelerIndex:[null,[r.z.required]],userNo:[null],name:[null,[r.z.required]],lastName:[null,[r.z.required]],firstName:[null,[r.z.required]],gender:[null,[r.z.required]],ageTypeCode:[null,[r.z.required]],birthday:[null],nationalityCode:[null,[r.z.required]],childAge:[null],checkInDate:[null]},{validators:[this.childBirthdayValidator]}),this.initTravelerFormData=()=>({roomNo:null,travelerIndex:null,userNo:null,name:null,lastName:null,firstName:null,gender:"M",ageTypeCode:"ADT",birthday:null,nationalityCode:"KR",childAge:null,checkInDate:null}),this.initTravelerFormCondition=()=>({travelerIndex:null,userNo:null,name:null,lastName:null,firstName:null,gender:null,ageTypeCode:null,birthday:null,nationalityCode:null}),this.initPymentFormDataCondition=()=>({cardHolderTypeCode:null,cardHolderRelationCode:null,cardMasterCode:null,cardNo:null,cardHolderName:null,cardHolderBirthday:null,cardHolderTaxPayerNo:null,cardQuotaMonth:null,cardValidPeriod:null,cardPassword:null}),this.generatePrepayForm=()=>this.fb.group({cardHolderTypeCode:[null,[r.z.required]],cardMasterCode:[null,[r.z.required]],cardNo:[null,[r.z.required,ke.a.cardNoSimpleValidator]],cardHolderName:[null,[r.z.required]],cardValidPeriodYear:[null,[r.z.required]],cardValidPeriodMonth:[null,[r.z.required]],cardPassword:[null,[r.z.required,r.z.maxLength(2),r.z.minLength(2)]],cardHolderBirthday:[null,[r.z.required,ke.a.dateValidator]],cardQuotaMonth:["00",[r.z.required]],cardHolderTaxPayerNo:[null]}),this.generatePostpayForm=()=>this.fb.group({cardHolderTypeCode:[null,[r.z.required]],cardMasterCode:[null,[r.z.required]],cardNo:[null,[r.z.required,ke.a.cardNoSimpleValidator]],cardHolderName:[null,[r.z.required]],cardValidPeriodYear:[null,[r.z.required]],cardValidPeriodMonth:[null,[r.z.required]],cardPassword:[null,[r.z.required,r.z.maxLength(2),r.z.minLength(2)]]}),this.childBirthdayValidator=e=>{if(!e)return null;const t="CHD"===e.get("ageTypeCode").value,o=e.get("childAge").value,n=e.get("birthday").value,i=e.get("checkInDate").value;return t?V.isNil(n)||8!==n.toString().length?{birthdayInvalid:!0}:je(n,"YYYYMMDD").isValid()?this.getOld(i,n)!==o?{birthdayInvalid:!0}:null:{birthdayInvalid:!0}:null}}setTravelerCount(e,t){return e.reduce((e,o)=>{const n=o.birthday;if(!n)return e.adultCount++,e;const i=this.getOld(t,n);return i>=12?e.adultCount++:(e.childCount++,e.childAges.push(i)),e},{adultCount:0,childCount:0,childAges:[]})}getOld(e,t){const o=this.toMoment(e),n=je(t,"YYYYMMDD"),i=Number(o.format("YYYY")),r=Number(n.format("YYYY")),a=Number(o.format("MM")),s=Number(n.format("MM")),c=Number(o.format("DD")),l=Number(n.format("DD")),d=i-r;return s<a?d:s>a||l>c?d-1:d}toMoment(e){return je(e,"YYYY-MM-DD")}}return e.\u0275fac=function(t){return new(t||e)(he.bc(r.f))},e.\u0275prov=he.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Pe=(()=>{class e{constructor(e,t,o,n){this._router=e,this.store=t,this.alertService=o,this.apiService=n}canActivate(e,t){console.log(e.queryParams,"route.queryParams");const o=e.queryParams.domainAddress||e.params.domainAddress,i=e.queryParams.stationTypeCode||e.params.stationTypeCode,r=e.queryParams.countryCode||e.params.countryCode,a=e.queryParams.currencyCode||e.params.currencyCode,s=e.queryParams.languageCode||e.params.languageCode,c=e.queryParams.transactionSetId||e.params.transactionSetId,l=e.queryParams.bookerCompCode||e.params.bookerCompCode,d=e.queryParams.hotelCode||e.params.hotelCode,b=e.queryParams.checkInDate||e.params.checkInDate,u=e.queryParams.checkOutDate||e.params.checkOutDate,p=e.queryParams.rooms||e.params.rooms,h=JSON.parse(e.queryParams.exclude3rdPartyYn||e.params.exclude3rdPartyYn);if(V.isNil(o)||V.isNil(i)||V.isNil(r)||V.isNil(s)||V.isNil(a)||V.isNil(b)||V.isNil(l)||V.isNil(u)||V.isNil(d)||V.isNil(c)||V.isNil(p))return this.alertService.alert("\ub8f8\ub9ac\uc2a4\ud2b8 \uc870\ud68c\ub97c \uc704\ud55c \ub370\uc774\ud130\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),!1;const m={dynamicRateYn:!1,checkInDate:b,checkOutDate:u,rooms:p.split("|").map((e,t)=>{const o=e.split("+"),n=V.parseInt(o[0]);let i=0,r=[];if(!V.isNil(o[1])){const e=o[1].split("~");i=e.length,r=e.map(e=>V.parseInt(e))}return{adultCount:n,childCount:i,childAges:r}}),exclude3rdPartyYn:h};return this.store.dispatch(n.setHotelCode({hotelCode:d})),this.store.dispatch(n.setDomainAddress({domainAddress:o})),this.store.dispatch(n.setCountryCode({countryCode:r})),this.store.dispatch(n.setLanguageCode({languageCode:s})),this.store.dispatch(n.setCurrencyCode({currencyCode:a})),this.store.dispatch(n.setTransactionSetId({transactionSetId:c})),this.store.dispatch(n.setStationTypeCode({stationTypeCode:i})),this.store.dispatch(n.setBookerCompCode({bookerCompCode:V.parseInt(l)})),this.store.dispatch(n.changeRoomSearchFormData({searchFormData:m})),!0}}return e.\u0275fac=function(t){return new(t||e)(he.bc(I.c),he.bc(s.h),he.bc(me.a),he.bc(Ve))},e.\u0275prov=he.Mb({token:e,factory:e.\u0275fac}),e})();var Se=o("XNiG"),Le=o("1G5W"),Ne=o("Kj3r"),Re=o("pLZG"),Fe=o("EVqC");const Te=Object(Fe.a)({selectId:e=>e.id,sortComparer:!1}),De=Te.getInitialState({policyList:null,travelerList:null,stationList:null,corporateList:null,cardList:null,arrivalTimeList:null,bedTypeList:null,cardTypeOptions:null,corporateCardOptions:null,domainAddress:null,countryCode:null,currencyCode:null,languageCode:null,stationTypeCode:null,bookerCompCode:null,hotelCode:null,regionCode:null,infoLoading:!1,roomLoading:!1,searchFormData:null,transactionSetId:null,hotelInfo:null,bookingLoading:!1,selectedRoomInfo:null,roomConditionLoading:!1,roomConditionLoaded:!1,roomConditionInfo:null,isOpenBookingForm:!1}),Ae=Object(s.q)(De,Object(s.s)(n.initComponentStateAction,e=>Object.assign(Object.assign({},e),{infoLoading:!1,roomLoading:!1,roomConditionLoading:!1,roomConditionLoaded:!1,isOpenBookingForm:!1})),Object(s.s)(n.loadPolicySuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{policyList:t})),Object(s.s)(n.loadCorporateStaffSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{travelerList:t})),Object(s.s)(n.loadStationListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{stationList:t})),Object(s.s)(n.loadCorporateListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{corporateList:t})),Object(s.s)(n.loadCardListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{cardList:t})),Object(s.s)(n.loadArrivalTimeListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{arrivalTimeList:t})),Object(s.s)(n.loadBedTypeListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{bedTypeList:t})),Object(s.s)(n.loadCardTypeOptionsSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{cardTypeOptions:t})),Object(s.s)(n.loadCorporateCardListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{corporateCardOptions:t})),Object(s.s)(n.setStationTypeCode,(e,{stationTypeCode:t})=>Object.assign(Object.assign({},e),{stationTypeCode:t})),Object(s.s)(n.setBookerCompCode,(e,{bookerCompCode:t})=>Object.assign(Object.assign({},e),{bookerCompCode:t})),Object(s.s)(n.setHotelCode,(e,{hotelCode:t})=>Object.assign(Object.assign({},e),{hotelCode:t})),Object(s.s)(n.setDomainAddress,(e,{domainAddress:t})=>Object.assign(Object.assign({},e),{domainAddress:t})),Object(s.s)(n.setCountryCode,(e,{countryCode:t})=>Object.assign(Object.assign({},e),{countryCode:t})),Object(s.s)(n.setCurrencyCode,(e,{currencyCode:t})=>Object.assign(Object.assign({},e),{currencyCode:t})),Object(s.s)(n.setRegionCode,(e,{regionCode:t})=>Object.assign(Object.assign({},e),{regionCode:t})),Object(s.s)(n.setLanguageCode,(e,{languageCode:t})=>Object.assign(Object.assign({},e),{languageCode:t})),Object(s.s)(n.setTransactionSetId,(e,{transactionSetId:t})=>Object.assign(Object.assign({},e),{transactionSetId:t})),Object(s.s)(n.changeRoomSearchFormData,(e,{searchFormData:t})=>Object.assign(Object.assign({},e),{searchFormData:t})),Object(s.s)(n.loadHotelInformation,e=>Object.assign(Object.assign({},e),{infoLoading:!0})),Object(s.s)(n.loadHotelInformationSuccess,(e,{info:t,transactionSetId:o})=>Object.assign(Object.assign({},e),{hotelInfo:t,transactionSetId:o,infoLoading:!1})),Object(s.s)(n.loadHotelInformationFailure,(e,{})=>Object.assign(Object.assign({},e),{infoLoading:!1})),Object(s.s)(n.loadRoomList,e=>Object.assign(Object.assign({},e),{roomLoading:!0})),Object(s.s)(n.loadRoomListSuccess,(e,{roomList:t,transactionSetId:o})=>Te.setAll(t,Object.assign(Object.assign({},e),{roomLoading:!1,transactionSetId:o}))),Object(s.s)(n.loadRoomListFailure,(e,{})=>Object.assign(Object.assign({},e),{roomLoading:!1})),Object(s.s)(n.addSelectedRoomInfo,(e,{info:t})=>Object.assign(Object.assign({},e),{selectedRoomInfo:t})),Object(s.s)(n.delSelectedRoomInfo,e=>Object.assign(Object.assign({},e),{selectedRoomInfo:null})),Object(s.s)(n.loadRoomCondition,e=>Object.assign(Object.assign({},e),{roomConditionLoading:!0,roomConditionLoaded:!1})),Object(s.s)(n.loadRoomConditionSuccess,(e,{info:t,transactionSetId:o})=>Object.assign(Object.assign({},e),{roomConditionInfo:t,transactionSetId:o,roomConditionLoading:!1,roomConditionLoaded:!0})),Object(s.s)(n.loadRoomConditionFailure,e=>Object.assign(Object.assign({},e),{roomConditionLoading:!1,roomConditionLoaded:!1})),Object(s.s)(n.openBookingFormPopup,e=>Object.assign(Object.assign({},e),{isOpenBookingForm:!0})),Object(s.s)(n.closeBookingFormPopup,e=>Object.assign(Object.assign({},e),{isOpenBookingForm:!1})),Object(s.s)(n.requestBookingAction,e=>Object.assign(Object.assign({},e),{bookingLoading:!0})),Object(s.s)(n.requestBookingSuccess,e=>Object.assign(Object.assign({},e),{bookingLoading:!1})),Object(s.s)(n.requestBookingFailure,e=>Object.assign(Object.assign({},e),{bookingLoading:!1})));function xe(e,t){return Object(s.m)({hoRoomListList:Ae})(e,t)}const $e=Object(s.p)("hoRoomList"),He=Object(s.r)($e,e=>e.hoRoomListList),Be=Object(s.r)(He,e=>e.policyList),Ye=Object(s.r)(He,e=>e.travelerList),_e=Object(s.r)(He,e=>e.stationList),we=(Object(s.r)(He,e=>e.corporateList),Object(s.r)(He,e=>e.cardList),Object(s.r)(He,e=>e.arrivalTimeList)),Me=Object(s.r)(He,e=>e.bedTypeList),Ee=(Object(s.r)(He,e=>e.cardTypeOptions),Object(s.r)(He,e=>e.corporateCardOptions),Object(s.r)(He,e=>e.infoLoading)),qe=Object(s.r)(He,e=>e.roomLoading),Qe=Object(s.r)(He,e=>e.roomConditionLoading),ze=Object(s.r)(He,e=>e.bookingLoading),Ue=Object(s.r)(Ee,qe,Qe,ze,(e,t,o,n)=>e||t||o||n),Ke=Object(s.r)(He,e=>e.searchFormData),Ge=Object(s.r)(He,e=>e.transactionSetId),Xe=Object(s.r)(He,e=>e.stationTypeCode),Je=Object(s.r)(He,e=>e.bookerCompCode),Ze=Object(s.r)(He,e=>e.hotelCode),et=Object(s.r)(He,e=>e.domainAddress),tt=Object(s.r)(He,e=>e.countryCode),ot=Object(s.r)(He,e=>e.currencyCode),nt=(Object(s.r)(He,e=>e.regionCode),Object(s.r)(He,e=>e.languageCode)),it=Te.getSelectors(He).selectAll,rt=Object(s.r)(He,e=>e.hotelInfo),at=Object(s.r)(He,e=>e.selectedRoomInfo),st=Object(s.r)(He,e=>e.roomConditionInfo),ct=Object(s.r)(He,e=>e.roomConditionLoaded),lt=Object(s.r)(He,e=>e.isOpenBookingForm);var dt=o("7G9D");function bt(e,t){if(1&e&&(he.Wb(0,"strong",5),he.Pc(1),he.Vb()),2&e){const e=he.hc();he.Cb(1),he.Rc("",null==e.hotelInfo?null:e.hotelInfo.starRating," Star")}}let ut=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-summary"]],hostAttrs:[1,"page-item"],inputs:{hotelInfo:"hotelInfo"},decls:8,vars:4,consts:[[1,"main-contents-summary-inner","mb20"],[1,"d-flex","align-items-center","mb10"],[1,"font-size-lg","font-weight-bold"],["class","font-size-lg font-weight-bold color-danger ml10",4,"ngIf"],[1,"d-flex","align-items-center","font-size-sm","color-dark-color2"],[1,"font-size-lg","font-weight-bold","color-danger","ml10"]],template:function(e,t){1&e&&(he.Wb(0,"div",0),he.Wb(1,"p",1),he.Wb(2,"strong",2),he.Pc(3),he.Vb(),he.Nc(4,bt,2,1,"strong",3),he.Vb(),he.Wb(5,"p",4),he.Wb(6,"span"),he.Pc(7),he.Vb(),he.Vb(),he.Vb()),2&e&&(he.Cb(3),he.Sc("[",null==t.hotelInfo?null:t.hotelInfo.hotelCode,"] ",null==t.hotelInfo?null:t.hotelInfo.hotelNameEn,""),he.Cb(1),he.pc("ngIf",null==t.hotelInfo?null:t.hotelInfo.starRating),he.Cb(3),he.Qc(null==t.hotelInfo?null:t.hotelInfo.addressLn))},directives:[i.o],encapsulation:2,changeDetection:0}),e})();var pt=o("pfiq"),ht=o("+Sob"),mt=o("rbKv"),Ct=o("kd+X"),ft=o("LVFn"),gt=o("U6NN");const vt=function(){return{standalone:!0}};function yt(e,t){if(1&e){const e=he.Xb();he.Ub(0),he.Wb(1,"span",4),he.Wb(2,"sup"),he.Pc(3,"Rooms"),he.Vb(),he.Vb(),he.Wb(4,"app-selectbox",25),he.fc("onChange",(function(t){return he.Fc(e),he.hc(2).onChangeRoomCount(t)})),he.Vb(),he.Tb()}if(2&e){const e=he.hc(2);he.Cb(4),he.pc("ngModel",e.roomCount)("ngModelOptions",he.tc(4,vt))("options",e.roomCountOptions)("useAllOptionYn",!1)}}function Ot(e,t){if(1&e&&(he.Ub(0),he.Rb(1,"app-selectbox",26),he.Tb()),2&e){const e=t.index,o=he.hc(2);he.Cb(1),he.pc("options",o.childAgeOptions)("formControlName",e)("useAllOptionYn",!1)}}function It(e,t){if(1&e){const e=he.Xb();he.Wb(0,"div",19),he.Nc(1,yt,5,5,"ng-container",20),he.Wb(2,"span",4),he.Pc(3),he.Vb(),he.Rb(4,"app-selectbox",21),he.Wb(5,"app-selectbox",22),he.fc("onChange",(function(o){he.Fc(e);const n=t.index;return he.hc().onChangeChildCount(o,n)})),he.Vb(),he.Ub(6,23),he.Nc(7,Ot,2,3,"ng-container",24),he.Tb(),he.Vb()}if(2&e){const e=t.index,o=he.hc();he.pc("formGroupName",e),he.Cb(1),he.pc("ngIf",0===e),he.Cb(2),he.Rc("Room ",e+1,""),he.Cb(1),he.pc("options",o.adultCountOptions)("useAllOptionYn",!1),he.Cb(1),he.pc("options",o.childCountOptions)("useAllOptionYn",!1),he.Cb(2),he.pc("ngForOf",o.getChildAgeControls(e).controls)}}let Vt=(()=>{class e{constructor(e,t){this._dataService=e,this.alertService=t,this.resetTravelersEvent=new he.n,this.clickSearchEvent=new he.n,this.clickResetEvent=new he.n,this.todayDateValue=je().format("YYYY-MM-DD"),this.isShowmore=!0,this._$unsubscribe=new Se.a,this.searchForm=this._dataService.generateListSearchForm()}get travelerList(){return this._travelerList}set travelerList(e){this._travelerList=e,this.selectedTravelers={},V.isNil(e)||e.forEach(e=>{this.selectedTravelers[e.userNo]=e})}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this._setSearchFormArray(e),this._setSearchFormData(e)}get searchFormValid(){return this.searchForm.valid}get searchFormValue(){var e;return null===(e=this.searchForm)||void 0===e?void 0:e.value}get checkInDate(){var e;return null===(e=this.searchForm)||void 0===e?void 0:e.get("checkInDate").value}get roomFormArray(){return this.searchForm.get("rooms")}ngOnInit(){this._initDetailSubscription(),this._initState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onChangeNightCount({value:e}){this.nightCount=e;const t=this.searchForm.get("checkInDate").value;if(!V.isNil(t)){const o=je(t).add(e,"days").format("YYYY-MM-DD");this.searchForm.get("checkOutDate").setValue(o)}}onChangeRoomCount({value:e}){const t=this.roomFormArray.length;if(e>t)for(let o=0;o<e-t;o++)this.roomFormArray.push(this._dataService.generateListSearchRoomForm());else for(let o=t-1;o>e-1;o--)this.roomFormArray.removeAt(o)}onChangeChildCount({value:e},t){const o=this.roomFormArray.at(t).get("childAges"),n=o.length;if(0===e)o.clear();else if(e>0)if(e>n)for(let i=0;i<e-n;i++)o.push(this._dataService.generateNonRequiredFormControl());else for(let i=n-1;i>e-1;i--)o.removeAt(i)}onSubmit(){if(this.searchForm.invalid)return void(this._checkValid=!0);let e=this.setSearchCondition();this.clickSearchEvent.emit({searchFormData:e}),this._checkValid=!1}checkIsInvalid(e){return this._checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}setSearchCondition(){return V.omitBy(this.searchForm.value,V.isNil)}getChildAgeControls(e){return this.roomFormArray.at(e).get("childAges")}getTravelControls(e){return this.roomFormArray.at(e).get("travelerUnos")}_setSearchFormArray(e){if(!V.isEmpty(e)){this.roomFormArray.clear();for(const t of e.rooms){const e=this._dataService.generateListSearchRoomForm();if(t.childCount>0){const o=e.get("childAges");o.clear();for(let e=0;e<t.childCount;e++)o.push(this._dataService.generateRequiredFormControl())}this.roomFormArray.push(e)}}}_setSearchFormData(e){const t=this._dataService.initSearchFormData();if(V.isEmpty(e))return this.nightCount=1,this.roomCount=1,void(this.searchFormData=t);this.roomCount=e.rooms.length,this.searchFormData=V.cloneDeep(e)}_initDetailSubscription(){this.searchForm.get("checkInDate").valueChanges.pipe(Object(Le.a)(this._$unsubscribe)).subscribe(e=>{if(!V.isNil(this.nightCount)){const t=je(e).add(this.nightCount,"days").format("YYYY-MM-DD");this.searchForm.get("checkOutDate").setValue(t)}}),this.searchForm.get("checkOutDate").valueChanges.pipe(Object(Le.a)(this._$unsubscribe)).subscribe(e=>{const t=this.searchForm.get("checkInDate").value;V.isNil(t)||(this.nightCount=je(e).diff(je(t),"days"))})}_initState(){this.nightOptions=V.range(1,30).map(e=>({value:e,label:`${e} Nights`})),this.roomCountOptions=V.range(1,6).map(e=>({value:e,label:`${e}`})),this.adultCountOptions=V.range(1,10).map(e=>({value:e,label:`ADT ${e}`})),this.childCountOptions=V.range(0,5).map(e=>({value:e,label:`CHD ${e}`})),this.childAgeOptions=V.range(1,13).map(e=>({value:e,label:`${e}years old`}))}}return e.\u0275fac=function(t){return new(t||e)(he.Qb(We),he.Qb(me.a))},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-search"]],viewQuery:function(e,t){var o;1&e&&he.Xc(pt.a,!0),2&e&&he.Dc(o=he.gc())&&(t.autoCompletes=o)},inputs:{corporateCompCode:"corporateCompCode",travelerList:"travelerList",searchCondition:"searchCondition"},outputs:{resetTravelersEvent:"resetTravelersEvent",clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:31,vars:20,consts:[[1,"grid-search-box","room-search",3,"formGroup","connectForm","submit"],[1,"form-option-area"],[1,"row"],[1,"col-2"],[1,"form-label","md"],[1,"calendar-set","flex-fill"],[1,"input","calendar","d-inline-flex","flex-fill"],[3,"for"],["type","text","placeholder","\uccb4\ud06c\uc778 \ub0a0\uc9dc","formControlName","checkInDate",3,"matDatepicker","min"],["fromDate1",""],["type","text","placeholder","Check Out","formControlName","checkOutDate",3,"matDatepicker","min"],["toDate1",""],[1,"d-inline-flex","ml5",2,"min-width","70px",3,"ngModel","ngModelOptions","options","useAllOptionYn","onChange"],[1,"col-full"],["formArrayName","rooms"],["class","form-block",3,"formGroupName",4,"ngFor","ngForOf"],[1,"form-button-area"],["role","button",1,"btn","btn-primary","sm"],["role","button",1,"btn","btn-reset","sm"],[1,"form-block",3,"formGroupName"],[4,"ngIf"],["formControlName","adultCount",1,"d-inline-flex",3,"options","useAllOptionYn"],["formControlName","childCount",1,"d-inline-flex","ml5",3,"options","useAllOptionYn","onChange"],["formArrayName","childAges"],[4,"ngFor","ngForOf"],[1,"d-inline-flex",2,"width","80px","min-width","80px",3,"ngModel","ngModelOptions","options","useAllOptionYn","onChange"],[1,"d-inline-flex","ml5",3,"options","formControlName","useAllOptionYn"]],template:function(e,t){if(1&e&&(he.Wb(0,"form",0),he.fc("submit",(function(){return t.onSubmit()})),he.Wb(1,"div",1),he.Wb(2,"div",2),he.Wb(3,"div",3),he.Wb(4,"span",4),he.Wb(5,"sup"),he.Pc(6,"Check In"),he.Vb(),he.Vb(),he.Wb(7,"div",5),he.Wb(8,"div",6),he.Rb(9,"mat-datepicker-toggle",7),he.Rb(10,"input",8),he.Rb(11,"mat-datepicker",null,9),he.Vb(),he.Wb(13,"span",4),he.Wb(14,"sup"),he.Pc(15,"Check Out"),he.Vb(),he.Vb(),he.Wb(16,"div",6),he.Rb(17,"mat-datepicker-toggle",7),he.Rb(18,"input",10),he.Rb(19,"mat-datepicker",null,11),he.Vb(),he.Vb(),he.Wb(21,"app-selectbox",12),he.fc("onChange",(function(e){return t.onChangeNightCount(e)})),he.Vb(),he.Vb(),he.Vb(),he.Wb(22,"div",2),he.Wb(23,"div",13),he.Ub(24,14),he.Nc(25,It,8,8,"div",15),he.Tb(),he.Vb(),he.Vb(),he.Vb(),he.Wb(26,"div",16),he.Wb(27,"button",17),he.Pc(28,"Search"),he.Vb(),he.Wb(29,"button",18),he.Pc(30,"Reset"),he.Vb(),he.Vb(),he.Vb()),2&e){const e=he.Ec(12),o=he.Ec(20);he.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),he.Cb(7),he.Gb("valid-error",t.checkIsInvalid("checkInDateValidator")),he.Cb(1),he.Gb("valid-error",t.checkIsInvalid("checkInDate")),he.Cb(1),he.pc("for",e),he.Cb(1),he.pc("matDatepicker",e)("min",t.todayDateValue),he.Cb(6),he.Gb("valid-error",t.checkIsInvalid("checkOutDate")),he.Cb(1),he.pc("for",o),he.Cb(1),he.pc("matDatepicker",o)("min",t.searchForm.get("checkInDate").value),he.Cb(3),he.pc("ngModel",t.nightCount)("ngModelOptions",he.tc(19,vt))("options",t.nightOptions)("useAllOptionYn",!1),he.Cb(4),he.pc("ngForOf",t.roomFormArray.controls)}},directives:[r.B,r.s,r.k,ht.a,mt.a,r.c,Ct.a,r.r,r.i,ft.a,gt.a,r.u,r.e,i.n,r.l,i.o],encapsulation:2,changeDetection:0}),e})();function jt(e,t){if(1&e&&(he.Wb(0,"li"),he.Wb(1,"span",15),he.Pc(2),he.Vb(),he.Vb()),2&e){const e=he.hc().$implicit,t=he.hc(2);he.Cb(2),he.Qc(t.convertUnderbar(e.promotionType))}}function kt(e,t){1&e&&(he.Wb(0,"li"),he.Wb(1,"span",16),he.Pc(2,"Non Refundable"),he.Vb(),he.Vb())}function Wt(e,t){if(1&e&&(he.Wb(0,"p",17),he.Pc(1),he.Vb()),2&e){const e=he.hc().$implicit,t=he.hc(2);he.Cb(1),he.Sc("",e.ratePlanName,"[Plan Code : ",t.convertPlanCode(e),"]")}}function Pt(e,t){1&e&&(he.Wb(0,"span"),he.Pc(1,"No Breakfast Service"),he.Vb())}function St(e,t){if(1&e&&(he.Wb(0,"span"),he.Pc(1),he.Vb()),2&e){const e=he.hc().$implicit;he.Cb(1),he.Rc("Breakfast Included ",e.freeBreakfastName,"")}}function Lt(e,t){1&e&&(he.Wb(0,"li"),he.Rb(1,"i",18),he.Wb(2,"span"),he.Pc(3,"Free wifi"),he.Vb(),he.Vb())}function Nt(e,t){if(1&e){const e=he.Xb();he.Wb(0,"tr"),he.Wb(1,"td"),he.Wb(2,"ul",7),he.Nc(3,jt,3,1,"li",8),he.Nc(4,kt,3,0,"li",8),he.Vb(),he.Wb(5,"p",9),he.Pc(6),he.Vb(),he.Nc(7,Wt,2,2,"p",10),he.Wb(8,"ul",7),he.Wb(9,"li"),he.Rb(10,"i",11),he.Nc(11,Pt,2,0,"span",8),he.Nc(12,St,2,1,"span",8),he.Vb(),he.Nc(13,Lt,4,0,"li",8),he.Vb(),he.Vb(),he.Wb(14,"td",12),he.Pc(15),he.Vb(),he.Wb(16,"td",12),he.Pc(17),he.Vb(),he.Wb(18,"td",13),he.Pc(19),he.ic(20,"number"),he.Vb(),he.Wb(21,"td",13),he.Pc(22),he.ic(23,"number"),he.Vb(),he.Wb(24,"td",12),he.Pc(25),he.Vb(),he.Wb(26,"td",13),he.Pc(27),he.ic(28,"number"),he.Vb(),he.Wb(29,"td",13),he.Pc(30),he.ic(31,"number"),he.Vb(),he.Wb(32,"td",13),he.Pc(33),he.ic(34,"number"),he.Vb(),he.Wb(35,"td",12),he.Wb(36,"a",14),he.fc("click",(function(){he.Fc(e);const o=t.$implicit;return he.hc(2).selectRoomEvent.emit(o)})),he.Pc(37,"Select"),he.Vb(),he.Vb(),he.Vb()}if(2&e){const e=t.$implicit;he.Cb(3),he.pc("ngIf",e.promotionType&&"None"!==e.promotionType),he.Cb(1),he.pc("ngIf",!e.refundableYn),he.Cb(2),he.Qc(e.roomTypeName),he.Cb(1),he.pc("ngIf",e.ratePlanCode),he.Cb(4),he.pc("ngIf",!e.freeBreakfastYn),he.Cb(1),he.pc("ngIf",e.freeBreakfastYn),he.Cb(1),he.pc("ngIf",e.freeWifiYn),he.Cb(2),he.Qc(e.vendorCompName||e.vendorCompCode),he.Cb(2),he.Qc(e.vendorCurrencyCode),he.Cb(2),he.Qc(he.jc(20,15,e.vendorNetAmount)),he.Cb(3),he.Qc(he.jc(23,17,e.vendorTaxAmount)),he.Cb(3),he.Qc(e.billingCurrencyCode),he.Cb(2),he.Qc(he.jc(28,19,e.productAmount)),he.Cb(3),he.Qc(he.jc(31,21,e.discountAmount)),he.Cb(3),he.Qc(he.jc(34,23,e.amountSum))}}function Rt(e,t){if(1&e&&(he.Ub(0),he.Nc(1,Nt,38,25,"tr",6),he.Tb()),2&e){const e=he.hc();he.Cb(1),he.pc("ngForOf",e.roomTypes)}}function Ft(e,t){1&e&&(he.Wb(0,"tr"),he.Wb(1,"td",19),he.Pc(2,"No records available."),he.Vb(),he.Vb())}let Tt=(()=>{class e{constructor(){this.selectRoomEvent=new he.n}ngOnInit(){}convertUnderbar(e){return e.replace("_"," ").trim()}convertPlanCode(e){let t=e.ratePlanCode;return t=e.promotionType&&"None"!==e.promotionType?e.ratePlanCode.split("^")[0]:e.ratePlanCode.split("|")[0],t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-grid"]],hostAttrs:[1,"page-item"],inputs:{roomTypes:"roomTypes",loading:"loading"},outputs:{selectRoomEvent:"selectRoomEvent"},decls:39,vars:2,consts:[[1,"table","table-bordered","table-responsive","table-pattern-even","table-fixed",2,"max-height","700px","overflow","auto"],["width","8%"],["width","100px"],["scope","col",1,"align-c"],[4,"ngIf","ngIfElse"],["emptyTpl",""],[4,"ngFor","ngForOf"],[1,"room-option"],[4,"ngIf"],[1,"room-name"],["class","plan-info",4,"ngIf"],[1,"fas","fa-utensils","mr5"],[1,"align-c"],[1,"align-r"],[1,"btn","btn-booking","sm",3,"click"],[1,"label","square","type1",2,"background","green"],[1,"label","square","type1"],[1,"plan-info"],[1,"fas","fa-wifi","mr5"],["colspan","10",1,"align-c",2,"font-size","13px"]],template:function(e,t){if(1&e&&(he.Wb(0,"div",0),he.Wb(1,"table"),he.Wb(2,"caption"),he.Pc(3," \ud638\ud154 \ub8f8\ub9ac\uc2a4\ud2b8 "),he.Vb(),he.Wb(4,"colgroup"),he.Rb(5,"col"),he.Rb(6,"col",1),he.Rb(7,"col",1),he.Rb(8,"col",1),he.Rb(9,"col",1),he.Rb(10,"col",1),he.Rb(11,"col",1),he.Rb(12,"col",1),he.Rb(13,"col",1),he.Rb(14,"col",2),he.Vb(),he.Wb(15,"thead"),he.Wb(16,"tr"),he.Rb(17,"th",3),he.Wb(18,"th",3),he.Pc(19,"Vendor"),he.Vb(),he.Wb(20,"th",3),he.Pc(21,"V.Curr"),he.Vb(),he.Wb(22,"th",3),he.Pc(23,"V.Net"),he.Vb(),he.Wb(24,"th",3),he.Pc(25,"V.Tax"),he.Vb(),he.Wb(26,"th",3),he.Pc(27,"B.Currency"),he.Vb(),he.Wb(28,"th",3),he.Pc(29,"B.Product Amount"),he.Vb(),he.Wb(30,"th",3),he.Pc(31,"B.Promo Amount"),he.Vb(),he.Wb(32,"th",3),he.Pc(33,"B.Sum Amount"),he.Vb(),he.Rb(34,"th",3),he.Vb(),he.Vb(),he.Wb(35,"tbody"),he.Nc(36,Rt,2,1,"ng-container",4),he.Nc(37,Ft,3,0,"ng-template",null,5,he.Oc),he.Vb(),he.Vb(),he.Vb()),2&e){const e=he.Ec(38);he.Cb(36),he.pc("ngIf",(null==t.roomTypes?null:t.roomTypes.length)>0)("ngIfElse",e)}},directives:[i.o,i.n],pipes:[i.f],encapsulation:2,changeDetection:0}),e})();function Dt(e,t){if(1&e&&(he.Ub(0),he.Rb(1,"dt"),he.Wb(2,"dd"),he.Pc(3),he.Vb(),he.Tb()),2&e){const e=t.$implicit;he.Cb(3),he.Qc(e.nameLn||e.nameEn)}}let At=(()=>{class e{constructor(e){this.alertService=e,this.latitude=37.5723309,this.longitude=127.0142533,this.zoom=14}get hotelInfo(){return this._hotelInfo}set hotelInfo(e){this._hotelInfo=e,this._initState(e)}get attractions(){var e,t;const o=(null===(t=null===(e=this.hotelInfo)||void 0===e?void 0:e.poi)||void 0===t?void 0:t.attractions)||[];return V.sortBy(o,[e=>e.distance]).filter((e,t)=>t<5)}ngOnInit(){}ngAfterContentInit(){}_initState(e){(null==e?void 0:e.latitude)&&(null==e?void 0:e.longitude)&&(this.latitude=null==e?void 0:e.latitude,this.longitude=null==e?void 0:e.longitude)}}return e.\u0275fac=function(t){return new(t||e)(he.Qb(me.a))},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-hotel-info"]],hostAttrs:[1,"page-item"],inputs:{hotelInfo:"hotelInfo"},decls:28,vars:16,consts:[[1,"hotel-information-box","info"],[1,"google-map"],[2,"width","100%","height","100%",3,"latitude","longitude","zoom","disableDefaultUI"],[3,"latitude","longitude"],[1,"information"],[1,"type2"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(he.Wb(0,"div",0),he.Wb(1,"div",1),he.Wb(2,"agm-map",2),he.Rb(3,"agm-marker",3),he.Vb(),he.Vb(),he.Wb(4,"div",4),he.Wb(5,"dl",5),he.Wb(6,"dt"),he.Pc(7,"Check In / Out"),he.Vb(),he.Wb(8,"dd"),he.Pc(9),he.Vb(),he.Wb(10,"dt"),he.Pc(11,"Address"),he.Vb(),he.Wb(12,"dd"),he.Pc(13),he.Vb(),he.Wb(14,"dt"),he.Pc(15,"Phone No."),he.Vb(),he.Wb(16,"dd"),he.Pc(17),he.Vb(),he.Wb(18,"dt"),he.Pc(19,"Fax"),he.Vb(),he.Wb(20,"dd"),he.Pc(21),he.Vb(),he.Wb(22,"dt"),he.Pc(23,"Neighborhood"),he.Vb(),he.Wb(24,"dd"),he.Pc(25),he.Vb(),he.Nc(26,Dt,4,1,"ng-container",6),he.ic(27,"slice"),he.Vb(),he.Vb(),he.Vb()),2&e){var o=null;he.Cb(2),he.pc("latitude",t.latitude)("longitude",t.longitude)("zoom",t.zoom)("disableDefaultUI",!1),he.Cb(1),he.pc("latitude",t.latitude)("longitude",t.longitude),he.Cb(6),he.Sc("",null==t.hotelInfo?null:t.hotelInfo.checkInTime," / ",null==t.hotelInfo?null:t.hotelInfo.checkOutTime,""),he.Cb(4),he.Qc(null==t.hotelInfo?null:t.hotelInfo.addressLn),he.Cb(4),he.Qc(null==t.hotelInfo?null:t.hotelInfo.phoneNo),he.Cb(4),he.Qc(null==t.hotelInfo?null:t.hotelInfo.faxNo),he.Cb(4),he.Qc((null==t.attractions||null==(o=t.attractions.first())?null:o.nameLn)||(null==t.attractions||null==(o=t.attractions.first())?null:o.nameEn)),he.Cb(1),he.pc("ngForOf",he.kc(27,13,t.attractions,1))}},directives:[c.b,c.c,i.n],pipes:[i.w],encapsulation:2,changeDetection:0}),e})(),xt=(()=>{class e{ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-description"]],hostAttrs:[1,"page-item"],inputs:{hotelInfo:"hotelInfo"},decls:20,vars:4,consts:[[1,"page-item-header"],[1,"title"],[1,"hotel-information-box","md"],[1,"type1"],[3,"innerHTML"]],template:function(e,t){1&e&&(he.Wb(0,"div",0),he.Wb(1,"p",1),he.Pc(2,"Description"),he.Vb(),he.Vb(),he.Wb(3,"div",2),he.Wb(4,"dl",3),he.Wb(5,"dt"),he.Pc(6,"Intro"),he.Vb(),he.Rb(7,"dd",4),he.Vb(),he.Wb(8,"dl",3),he.Wb(9,"dt"),he.Pc(10,"Room Facility"),he.Vb(),he.Rb(11,"dd",4),he.Vb(),he.Wb(12,"dl",3),he.Wb(13,"dt"),he.Pc(14,"Hotel Facility"),he.Vb(),he.Rb(15,"dd",4),he.Vb(),he.Wb(16,"dl",3),he.Wb(17,"dt"),he.Pc(18,"Caution"),he.Vb(),he.Rb(19,"dd",4),he.Vb(),he.Vb()),2&e&&(he.Cb(7),he.pc("innerHTML",null==t.hotelInfo?null:t.hotelInfo.hotelIntro,he.Gc),he.Cb(4),he.pc("innerHTML",null==t.hotelInfo?null:t.hotelInfo.roomFacility,he.Gc),he.Cb(4),he.pc("innerHTML",null==t.hotelInfo?null:t.hotelInfo.hotelFacility,he.Gc),he.Cb(4),he.pc("innerHTML",null==t.hotelInfo?null:t.hotelInfo.hotelCaution,he.Gc))},encapsulation:2,changeDetection:0}),e})();const $t=function(e){return{"background-image":e}};function Ht(e,t){if(1&e&&(he.Ub(0),he.Rb(1,"li",4),he.Tb()),2&e){const e=t.$implicit;he.Cb(1),he.pc("ngStyle",he.uc(1,$t,"url("+e.photoUrl+")"))}}let Bt=(()=>{class e{ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-photo"]],hostAttrs:[1,"page-item"],inputs:{hotelInfo:"hotelInfo"},decls:6,vars:1,consts:[[1,"page-item-header"],[1,"title"],[1,"hotel-information-box","photo",2,"max-height","662px","overflow","auto"],[4,"ngFor","ngForOf"],[3,"ngStyle"]],template:function(e,t){1&e&&(he.Wb(0,"div",0),he.Wb(1,"p",1),he.Pc(2,"Photo"),he.Vb(),he.Vb(),he.Wb(3,"div",2),he.Wb(4,"ul"),he.Nc(5,Ht,2,3,"ng-container",3),he.Vb(),he.Vb()),2&e&&(he.Cb(5),he.pc("ngForOf",null==t.hotelInfo?null:t.hotelInfo.photos))},directives:[i.n,i.p],encapsulation:2,changeDetection:0}),e})();var Yt=o("kDLv");function _t(e,t){if(1&e&&(he.Ub(0),he.Wb(1,"li"),he.Pc(2),he.Vb(),he.Tb()),2&e){const e=t.$implicit;he.Cb(2),he.Qc(e)}}let wt=(()=>{class e{ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-safty"]],hostAttrs:[1,"page-item"],inputs:{hotelInfo:"hotelInfo"},decls:7,vars:1,consts:[[1,"page-item"],[1,"page-item-header"],[1,"title"],[1,"hotel-information-box","md"],[1,"type1"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(he.Wb(0,"div",0),he.Wb(1,"div",1),he.Wb(2,"p",2),he.Pc(3,"Safty Information"),he.Vb(),he.Vb(),he.Wb(4,"div",3),he.Wb(5,"ul",4),he.Nc(6,_t,3,1,"ng-container",5),he.Vb(),he.Vb(),he.Vb()),2&e&&(he.Cb(6),he.pc("ngForOf",null==t.hotelInfo?null:t.hotelInfo.safetyInfos))},directives:[i.n],encapsulation:2,changeDetection:0}),e})();function Mt(e,t){if(1&e&&(he.Ub(0),he.Wb(1,"li"),he.Pc(2),he.Vb(),he.Tb()),2&e){const e=t.$implicit;he.Cb(2),he.Qc(e.facilityName)}}let Et=(()=>{class e{ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-facilities"]],hostAttrs:[1,"page-item"],inputs:{hotelInfo:"hotelInfo"},decls:6,vars:1,consts:[[1,"page-item-header"],[1,"title"],[1,"hotel-information-box","md"],[1,"type2"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(he.Wb(0,"div",0),he.Wb(1,"p",1),he.Pc(2,"Facility & Service"),he.Vb(),he.Vb(),he.Wb(3,"div",2),he.Wb(4,"ul",3),he.Nc(5,Mt,3,1,"ng-container",4),he.Vb(),he.Vb()),2&e&&(he.Cb(5),he.pc("ngForOf",null==t.hotelInfo?null:t.hotelInfo.facilities))},directives:[i.n],encapsulation:2,changeDetection:0}),e})();var qt=o("gbCm");const Qt=function(e){return{userTypeCodeList:e}},zt=function(){return["name","userNo","gender","userId"]};let Ut=(()=>{class e{constructor(e,t,o){this.dataService=e,this.alertService=t,this.cd=o,this._$unsubscribe=new Se.a,this.putForm=this.dataService.generateBookerForm(),this.putFormData=this.dataService.initBookerFormData()}get bookerInfo(){return this._bookerInfo}set bookerInfo(e){this._bookerInfo=e,V.isNil(e)||(this.putFormData={userNo:e.userNo,compCode:e.corporateCompCode||this.bookerCompCode,name:e.name,email:e.emailAddress,countryPhoneCode:e.countryPhoneCode,mobileNo:e.mobileNo},this.putForm.get("userNo").disable(),this.userIdInput=`${e.name}(${e.userNo}), ${e.gender}, ${e.emailAddress}`)}get stationTypeCode(){return this._stationTypeCode}set stationTypeCode(e){this.userTypeCodeList="STN02"===e?["U03"]:["U04"]}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSelectUser(e){const{name:t,countryPhoneCode:o,mobileNo:n,emailAddress:i}=e;this.putForm.get("name").setValue(t||null),this.putForm.get("mobileNo").setValue(n||null),this.putForm.get("countryPhoneCode").setValue(o||null),this.putForm.get("email").setValue(i||null)}onClearUser(){this.putForm.get("name").setValue(null)}onSubmit(){return this.putForm.invalid?(this._checkValid=!0,this.cd.markForCheck(),{booker:null}):(this._checkValid=!1,{booker:this.setPutCondition()})}checkIsInvalid(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}setPutCondition(){const e=this.dataService.initBookerFormCondition(),t=Object.keys(e),o=this.putForm.getRawValue(),n=o.mobileNo.replace(/[^\d]/g,""),i=Object.assign({},V.pick(o,t),{mobileNo:n});return i.compCode=this.bookerCompCode,V.omitBy(i,V.isNil)}}return e.\u0275fac=function(t){return new(t||e)(he.Qb(We),he.Qb(me.a),he.Qb(he.h))},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-booker"]],hostAttrs:[1,"page-item"],inputs:{bookerCompName:"bookerCompName",bookerCompCode:"bookerCompCode",bookerInfo:"bookerInfo",stationTypeCode:"stationTypeCode"},decls:43,vars:15,consts:[[3,"formGroup","connectForm"],[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"section-contents-box-body"],[1,"booking-option-area","type2"],[1,"auto-complete"],["formControlName","userNo","apiUrl","admin/common/client","dataKey","userNo","inputFieldFormat","{0}({1})&, {2}&, {3}&","placeholder","Name or ID",3,"inputFieldValue","isInvalid","apiSearchTerm","apiCondition","inputFieldFormatKeyList","onSelect","onClear"],[1,"input"],["formControlName","name","placeholder","Name",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","countryPhoneCode","placeholder","e.g. 82","inputFormat","numberOnly",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","mobileNo","placeholder","Number only","inputFormat","numberOnly",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","email",1,"d-inline-flex","flex-fill",3,"isInvalid"]],template:function(e,t){1&e&&(he.Wb(0,"form",0),he.Wb(1,"div",1),he.Wb(2,"div",2),he.Wb(3,"strong"),he.Pc(4,"Booker"),he.Vb(),he.Vb(),he.Wb(5,"div",3),he.Wb(6,"div",4),he.Wb(7,"dl"),he.Wb(8,"dt"),he.Wb(9,"sup"),he.Pc(10,"Booker ID"),he.Vb(),he.Vb(),he.Wb(11,"dd"),he.Wb(12,"div",5),he.Wb(13,"app-auto-complete",6),he.fc("onSelect",(function(e){return t.onSelectUser(e)}))("onClear",(function(){return t.onClearUser()})),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Wb(14,"dl"),he.Wb(15,"dt"),he.Wb(16,"sup"),he.Pc(17,"Name"),he.Vb(),he.Vb(),he.Wb(18,"dd"),he.Wb(19,"div",7),he.Rb(20,"app-input-text",8),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Wb(21,"div",4),he.Wb(22,"dl"),he.Wb(23,"dt"),he.Wb(24,"sup"),he.Pc(25,"Country Phone Number"),he.Vb(),he.Vb(),he.Wb(26,"dd"),he.Wb(27,"div",7),he.Rb(28,"app-input-text",9),he.Vb(),he.Vb(),he.Vb(),he.Wb(29,"dl"),he.Wb(30,"dt"),he.Wb(31,"sup"),he.Pc(32,"Mobile No"),he.Vb(),he.Vb(),he.Wb(33,"dd"),he.Wb(34,"div",7),he.Rb(35,"app-input-text",10),he.Vb(),he.Vb(),he.Vb(),he.Wb(36,"dl"),he.Wb(37,"dt"),he.Wb(38,"sup"),he.Pc(39,"Email"),he.Vb(),he.Vb(),he.Wb(40,"dd"),he.Wb(41,"div",7),he.Rb(42,"app-input-text",11),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb()),2&e&&(he.pc("formGroup",t.putForm)("connectForm",t.putFormData),he.Cb(13),he.pc("inputFieldValue",t.userIdInput)("isInvalid",t.checkIsInvalid("userNo"))("apiSearchTerm","name")("apiCondition",he.uc(12,Qt,t.userTypeCodeList))("inputFieldFormatKeyList",he.tc(14,zt))("isInvalid",t.checkIsInvalid("userNo")),he.Cb(7),he.pc("isInvalid",t.checkIsInvalid("name")),he.Cb(8),he.pc("isInvalid",t.checkIsInvalid("countryPhoneCode")),he.Cb(7),he.pc("isInvalid",t.checkIsInvalid("mobileNo")),he.Cb(7),he.pc("isInvalid",t.checkIsInvalid("email")))},directives:[r.B,r.s,r.k,ht.a,pt.a,r.r,r.i,qt.a],encapsulation:2,changeDetection:0}),e})();function Kt(e,t){if(1&e&&(he.Wb(0,"span"),he.Pc(1),he.Vb()),2&e){const e=he.hc();he.Cb(1),he.Rc("[",null==e.roomInfo?null:e.roomInfo.roomPlanCode,"]")}}function Gt(e,t){if(1&e&&(he.Wb(0,"span"),he.Pc(1),he.Vb()),2&e){const e=he.hc();he.Cb(1),he.Rc("[",null==e.roomInfo?null:e.roomInfo.vendorPromotionSeq,"]")}}let Xt=(()=>{class e{constructor(e){this.cd=e}ngOnInit(){const{checkInDate:e,checkOutDate:t}=this.searchFormData;this.checkInDate=je(e).format("YYYY-MM-DD(ddd)"),this.checkOutDate=je(t).format("YYYY-MM-DD(ddd)");const o=je(t).diff(je(e),"days");this.nightCount=`${o}\ubc15`;const{clientCancelDeadline:n,vendorCancelDeadline:i,refundableYn:r}=this.roomCondition.cancelDeadline;this.clientCancelDeadline=r?je(n).format("YYYY-MM-DD(ddd) HH:mm"):"Non-Refundable",this.vendorCancelDeadline=r?je(i).format("YYYY-MM-DD(ddd) HH:mm"):"Non-Refundable";const{cityName:a,hotelNameLn:s,hotelNameEn:c,hotelCode:l}=this.hotelInfo;this.cityName=a,this.hotelName=s||c,this.hotelCode=l;const{freeBreakfastYn:d,freeWifiYn:b,roomTypeName:u,vendorCompCode:p,vendorCompName:h}=this.roomInfo;this.freeBreakfastYn=!0===d,this.freeWifiYn=!0===b,this.roomTypeName=u,this.vendorCompName=h||p.toString(),this.cancelPolicyDescription=this.roomCondition.cancelPolicyDescription||null,this.checkInInstructions=this.roomCondition.checkInInstructions||null;const m=this.searchFormData.rooms;this.roomCount=m.length,this.guestCount=V.sum(m.map(e=>e.adultCount+e.childCount))}}return e.\u0275fac=function(t){return new(t||e)(he.Qb(he.h))},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-condition"]],hostAttrs:[1,"page-item"],inputs:{searchFormData:"searchFormData",hotelInfo:"hotelInfo",roomInfo:"roomInfo",roomCondition:"roomCondition"},decls:73,vars:18,consts:[[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"section-contents-box-body"],[1,"table","table-bordered"],["width","12%"],["width","38%"],["scope","row",1,"th-bg"],[4,"ngIf"],["colspan","3"],["colspan","3",1,"color-red"]],template:function(e,t){1&e&&(he.Wb(0,"div",0),he.Wb(1,"div",1),he.Wb(2,"strong"),he.Pc(3,"Booking Detail"),he.Vb(),he.Vb(),he.Wb(4,"div",2),he.Wb(5,"div",3),he.Wb(6,"table"),he.Wb(7,"caption"),he.Pc(8,"Booking Detail"),he.Vb(),he.Wb(9,"colgroup"),he.Rb(10,"col",4),he.Rb(11,"col",5),he.Rb(12,"col",4),he.Rb(13,"col",5),he.Vb(),he.Wb(14,"tbody"),he.Wb(15,"tr"),he.Wb(16,"th",6),he.Pc(17,"Check in / Out Date"),he.Vb(),he.Wb(18,"td"),he.Pc(19),he.Vb(),he.Wb(20,"th",6),he.Pc(21,"Vendor Name"),he.Vb(),he.Wb(22,"td"),he.Pc(23),he.Vb(),he.Vb(),he.Wb(24,"tr"),he.Wb(25,"th",6),he.Pc(26,"Region Name"),he.Vb(),he.Wb(27,"td"),he.Pc(28),he.Vb(),he.Wb(29,"th",6),he.Pc(30,"Plan Name"),he.Vb(),he.Wb(31,"td"),he.Nc(32,Kt,2,1,"span",7),he.Pc(33),he.Vb(),he.Vb(),he.Wb(34,"tr"),he.Wb(35,"th",6),he.Pc(36,"Hotel Name"),he.Vb(),he.Wb(37,"td"),he.Pc(38),he.Vb(),he.Wb(39,"th",6),he.Pc(40,"Vendor Promotion Name"),he.Vb(),he.Wb(41,"td"),he.Nc(42,Gt,2,1,"span",7),he.Pc(43),he.Vb(),he.Vb(),he.Wb(44,"tr"),he.Wb(45,"th",6),he.Pc(46,"Rooms / Travelers"),he.Vb(),he.Wb(47,"td"),he.Pc(48),he.Vb(),he.Wb(49,"th",6),he.Pc(50,"Vendor Cancellation D/L"),he.Vb(),he.Wb(51,"td"),he.Pc(52),he.Vb(),he.Vb(),he.Wb(53,"tr"),he.Wb(54,"th",6),he.Pc(55,"Room Type"),he.Vb(),he.Wb(56,"td",8),he.Pc(57),he.Vb(),he.Vb(),he.Wb(58,"tr"),he.Wb(59,"th",6),he.Pc(60,"Meal Type"),he.Vb(),he.Wb(61,"td",8),he.Pc(62),he.Vb(),he.Vb(),he.Wb(63,"tr"),he.Wb(64,"th",6),he.Pc(65,"Free Breakfast"),he.Vb(),he.Wb(66,"td",8),he.Pc(67),he.Vb(),he.Vb(),he.Wb(68,"tr"),he.Wb(69,"th",6),he.Pc(70,"Client Cancellation D/L"),he.Vb(),he.Wb(71,"td",9),he.Pc(72),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb()),2&e&&(he.Cb(19),he.Tc("",t.checkInDate," ~ ",t.checkOutDate," / ",t.nightCount,""),he.Cb(4),he.Qc(t.vendorCompName),he.Cb(5),he.Qc(null==t.hotelInfo?null:t.hotelInfo.regionName),he.Cb(4),he.pc("ngIf",null==t.roomInfo?null:t.roomInfo.roomPlanCode),he.Cb(1),he.Qc(null==t.roomInfo?null:t.roomInfo.roomPlanName),he.Cb(5),he.Sc("[",t.hotelCode,"]",t.hotelName,""),he.Cb(4),he.pc("ngIf",null==t.roomInfo?null:t.roomInfo.vendorPromotionSeq),he.Cb(1),he.Qc(null==t.roomInfo?null:t.roomInfo.vendorPromotionName),he.Cb(5),he.Sc("",t.roomCount," Rooms / ",t.guestCount," Travelers"),he.Cb(4),he.Qc(t.vendorCancelDeadline),he.Cb(5),he.Qc(t.roomTypeName),he.Cb(5),he.Qc(null==t.roomInfo?null:t.roomInfo.mealBasisName),he.Cb(5),he.Qc(null==t.roomInfo?null:t.roomInfo.freeBreakfastName),he.Cb(5),he.Qc(t.clientCancelDeadline))},directives:[i.o],encapsulation:2,changeDetection:0}),e})();function Jt(e,t){if(1&e&&(he.Ub(0),he.Wb(1,"div",5),he.Wb(2,"dl"),he.Wb(3,"dt"),he.Wb(4,"sup"),he.Pc(5,"Station"),he.Vb(),he.Vb(),he.Wb(6,"dd"),he.Wb(7,"div",6),he.Wb(8,"select",7),he.Wb(9,"option"),he.Pc(10),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Wb(11,"dl"),he.Wb(12,"dt"),he.Wb(13,"sup"),he.Pc(14,"Domain"),he.Vb(),he.Vb(),he.Wb(15,"dd"),he.Wb(16,"div",6),he.Wb(17,"select",7),he.Wb(18,"option"),he.Pc(19),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Wb(20,"dl"),he.Wb(21,"dt"),he.Wb(22,"sup"),he.Pc(23,"Nationality"),he.Vb(),he.Vb(),he.Wb(24,"dd"),he.Wb(25,"div",8),he.Wb(26,"div",9),he.Rb(27,"input",10),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Tb()),2&e){const e=he.hc();he.Cb(10),he.Qc(e.stationName),he.Cb(9),he.Qc(e.domainAddress),he.Cb(8),he.pc("value",e.countryCode)}}function Zt(e,t){if(1&e&&(he.Wb(0,"div",5),he.Wb(1,"dl"),he.Wb(2,"dt"),he.Wb(3,"sup"),he.Pc(4,"Station"),he.Vb(),he.Vb(),he.Wb(5,"dd"),he.Wb(6,"div",6),he.Wb(7,"select",7),he.Wb(8,"option"),he.Pc(9),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Wb(10,"dl"),he.Wb(11,"dt"),he.Wb(12,"sup"),he.Pc(13,"Seller"),he.Vb(),he.Vb(),he.Wb(14,"dd"),he.Wb(15,"div",8),he.Wb(16,"div",9),he.Rb(17,"input",10),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb()),2&e){const e=he.hc();he.Cb(9),he.Qc(e.stationName),he.Cb(8),he.pc("value",e.sellerCode)}}let eo=(()=>{class e{constructor(e){this.cd=e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(he.Qb(he.h))},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-route"]],hostAttrs:[1,"page-item"],inputs:{stationName:"stationName",domainAddress:"domainAddress",countryCode:"countryCode",sellerCode:"sellerCode"},decls:8,vars:2,consts:[[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"section-contents-box-body"],[4,"ngIf","ngIfElse"],["B2B",""],[1,"booking-option-area","type1"],[1,"select-box"],["disabled",""],[1,"auto-complete"],[1,"input","search2"],["type","text","disabled","",3,"value"]],template:function(e,t){if(1&e&&(he.Wb(0,"div",0),he.Wb(1,"div",1),he.Wb(2,"strong"),he.Pc(3,"Booking Route"),he.Vb(),he.Vb(),he.Wb(4,"div",2),he.Nc(5,Jt,28,3,"ng-container",3),he.Nc(6,Zt,18,2,"ng-template",null,4,he.Oc),he.Vb(),he.Vb()),2&e){const e=he.Ec(7);he.Cb(5),he.pc("ngIf","B2C"===t.stationName)("ngIfElse",e)}},directives:[i.o,r.v,r.A],encapsulation:2,changeDetection:0}),e})();var to=o("Onn4");function oo(e,t){if(1&e&&(he.Wb(0,"th",20),he.Pc(1),he.Vb()),2&e){const e=he.hc().$implicit,t=he.hc();he.Db("rowspan",t.getRowspanCount(e.value)),he.Cb(1),he.Rc("Room ",e.get("roomNo").value,"")}}function no(e,t){if(1&e&&(he.Ub(0),he.Rb(1,"app-input-text",21),he.Tb()),2&e){const e=he.hc().index,t=he.hc();he.Cb(1),he.pc("isInvalid",t.checkBirthdayInvalid(e))}}const io=function(e){return["travelers",e,"name"]},ro=function(e){return["travelers",e,"lastName"]},ao=function(e){return["travelers",e,"firstName"]};function so(e,t){if(1&e&&(he.Wb(0,"tr",10),he.Nc(1,oo,2,2,"th",11),he.Wb(2,"td"),he.Wb(3,"div",12),he.Rb(4,"app-radio",13),he.Rb(5,"app-radio",14),he.Vb(),he.Vb(),he.Wb(6,"td"),he.Rb(7,"app-input-text",15),he.Vb(),he.Wb(8,"td"),he.Wb(9,"div",12),he.Rb(10,"app-input-text",16),he.Wb(11,"span",17),he.Pc(12,"/"),he.Vb(),he.Rb(13,"app-input-text",18),he.Vb(),he.Vb(),he.Wb(14,"td"),he.Nc(15,no,2,1,"ng-container",19),he.Vb(),he.Vb()),2&e){const e=t.$implicit,n=t.index,i=he.hc();var o;const r="CHD"===(null==(o=e.get("ageTypeCode"))?null:o.value);he.pc("formGroupName",n),he.Cb(1),he.pc("ngIf",i.getRowspanCount(e.value)>0),he.Cb(3),he.pc("name","gender"+n.toString()),he.Cb(1),he.pc("name","gender"+n.toString()),he.Cb(2),he.pc("isInvalid",i.checkIsInvalid(he.uc(8,io,n))),he.Cb(3),he.pc("isInvalid",i.checkIsInvalid(he.uc(10,ro,n))),he.Cb(3),he.pc("isInvalid",i.checkIsInvalid(he.uc(12,ao,n))),he.Cb(2),he.pc("ngIf",r)}}let co=(()=>{class e{constructor(e,t,o){this.dataService=e,this.alertService=t,this.cd=o,this.ageTypeObj={ADT:"\uc131\uc778",CHD:"\uc544\ub3d9"},this._$unsubscribe=new Se.a,this.putForm=this.dataService.generateTravelerForm(),this._initSubscription()}get travelerList(){return this._travelerList}set travelerList(e){this._travelerList=e,this.selectedTravelers={},V.isNil(e)||e.forEach(e=>{this.selectedTravelers[e.userNo]=e})}get rooms(){return this._rooms}set rooms(e){this._rooms=e,this._setPutFormArray(e),this._setPutFormData(e),this._initState()}get travelers(){var e;return null===(e=this.putForm)||void 0===e?void 0:e.get("travelers")}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){return this.putForm.invalid?(this._checkValid=!0,this.cd.markForCheck(),{travelers:null,roomObj:null}):(this._checkValid=!1,{travelers:this.setPutCondition(),roomObj:this.travelerIndexCollection})}checkIsInvalid(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}checkBirthdayInvalid(e){var t;return this._checkValid&&!0===(null===(t=this.travelers.at(e).errors)||void 0===t?void 0:t.birthdayInvalid)}setPutCondition(){const e=this.dataService.initTravelerFormCondition(),t=Object.keys(e);return this.travelers.value.map(e=>{let o=null;"CHD"===e.ageTypeCode&&(o=je(e.birthday,"YYYYMMDD").format("YYYY-MM-DD"));const n=Object.assign({},V.pick(e,t),{birthday:o});return V.omitBy(n,V.isNil)})}getRowspanCount(e){var t;const{roomNo:o,travelerIndex:n}=e;return(null===(t=this.travelerIndexCollection[o])||void 0===t?void 0:t.length)>0&&this.travelerIndexCollection[o][0]===n?this.travelerIndexCollection[o].length:null}_setPutFormData(e){const t=this.dataService.initTravelerFormData(),o=[];this.travelerIndexCollection={};let n=0;e.forEach((e,i)=>{const r=i+1,a=[];for(let s=0;s<e.adultCount;s++){n++,a.push(n);const e="ADT";o.push(Object.assign(Object.assign({},t),{roomNo:r,travelerIndex:n,ageTypeCode:e}))}if(e.childCount>0)for(let s=0;s<e.childCount;s++){n++,a.push(n);const i="CHD",c=e.childAges[s];o.push(Object.assign(Object.assign({},t),{roomNo:r,travelerIndex:n,ageTypeCode:i,childAge:c,checkInDate:this.checkInDate}))}this.travelerIndexCollection[r]=a}),this.putFormData={travelers:o}}_setPutFormArray(e){this.travelers.clear(),e.forEach((e,t)=>{for(let o=0;o<e.adultCount;o++)this.travelers.push(this.dataService.generateTravelerFormItem());if(e.childCount>0)for(let o=0;o<e.childCount;o++)this.travelers.push(this.dataService.generateTravelerFormItem())})}_initState(){}_initSubscription(){}}return e.\u0275fac=function(t){return new(t||e)(he.Qb(We),he.Qb(me.a),he.Qb(he.h))},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-traveler"]],hostAttrs:[1,"page-item"],inputs:{checkInDate:"checkInDate",travelerList:"travelerList",rooms:"rooms"},decls:30,vars:3,consts:[[1,"table","table-responsive",3,"formGroup","connectForm"],[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"section-contents-box-body"],[1,"table","table-bordered"],["width","10%"],["width","8%"],["scope","col",1,"align-c"],["formArrayName","travelers"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["scope","rowgroup","class","th-bg align-c",4,"ngIf"],[1,"form-group"],["formControlName","gender","value","M","label","M",3,"name"],["formControlName","gender","value","F","label","F",3,"name"],["formControlName","name","placeholder","Name(Local Language)",2,"min-width","140px",3,"isInvalid"],["formControlName","lastName","placeholder","Last name(EN)","inputFormat","uppserCaseEnOnly",2,"min-width","100px",3,"isInvalid"],[1,"dash"],["formControlName","firstName","placeholder","First name(EN)","inputFormat","uppserCaseEnOnly",2,"min-width","180px","flex","2 1",3,"isInvalid"],[4,"ngIf"],["scope","rowgroup",1,"th-bg","align-c"],["formControlName","birthday","placeholder","yyyy-mm-dd","inputFormat","numberOnly",2,"min-width","140px",3,"isInvalid"]],template:function(e,t){1&e&&(he.Wb(0,"form",0),he.Wb(1,"div",1),he.Wb(2,"div",2),he.Wb(3,"strong"),he.Pc(4,"Travelers"),he.Vb(),he.Vb(),he.Wb(5,"div",3),he.Wb(6,"div",4),he.Wb(7,"table"),he.Wb(8,"caption"),he.Pc(9,"Travelers"),he.Vb(),he.Wb(10,"colgroup"),he.Rb(11,"col",5),he.Rb(12,"col",6),he.Rb(13,"col"),he.Rb(14,"col"),he.Rb(15,"col",5),he.Vb(),he.Wb(16,"thead"),he.Wb(17,"tr"),he.Wb(18,"th",7),he.Pc(19,"Rooms"),he.Vb(),he.Wb(20,"th",7),he.Pc(21,"Gender"),he.Vb(),he.Wb(22,"th",7),he.Pc(23,"Name(Local Language)"),he.Vb(),he.Wb(24,"th",7),he.Pc(25,"Last Name / First Name(EN)"),he.Vb(),he.Wb(26,"th",7),he.Pc(27,"Child Birthday"),he.Vb(),he.Vb(),he.Vb(),he.Wb(28,"tbody",8),he.Nc(29,so,16,14,"tr",9),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb()),2&e&&(he.pc("formGroup",t.putForm)("connectForm",t.putFormData),he.Cb(29),he.pc("ngForOf",t.travelers.controls))},directives:[r.B,r.s,r.k,ht.a,r.e,i.n,r.l,i.o,to.a,r.r,r.i,qt.a],encapsulation:2,changeDetection:0}),e})();function lo(e,t){if(1&e&&(he.Ub(0),he.Wb(1,"div",19),he.Rb(2,"input",20),he.Vb(),he.Tb()),2&e){const e=he.hc();he.Cb(2),he.pc("value",e.maskingCardNo)}}function bo(e,t){if(1&e&&(he.Ub(0),he.Rb(1,"app-input-text",21),he.Tb()),2&e){const e=he.hc();he.Cb(1),he.pc("isInvalid",e.checkIsInvalid("cardNo"))}}function uo(e,t){if(1&e&&(he.Wb(0,"tr"),he.Wb(1,"th",8),he.Pc(2,"Installment"),he.Vb(),he.Wb(3,"td"),he.Rb(4,"app-selectbox",22),he.Vb(),he.Wb(5,"th",8),he.Pc(6,"Tax Payer No."),he.Vb(),he.Wb(7,"td"),he.Rb(8,"app-input-text",23),he.Vb(),he.Vb()),2&e){const e=he.hc();he.Cb(4),he.pc("options",e.cardQuotaMonthList)("useAllOptionYn",!1)("isInvalid",e.checkIsInvalid("cardQuotaMonth"))}}let po=(()=>{class e{constructor(e,t,o){this.dataService=e,this.alertService=t,this.cd=o,this.formDisableCodeList=["CCP01","CCP02"],this._$unsubscribe=new Se.a,this.cardQuotaMonthList=[],this.cardValidPeriodMonthList=[],this.cardValidPeriodYearList=[],this.putForm=this.dataService.generatePostpayForm()}get cardMasterList(){return this._cardMasterList}set cardMasterList(e){this._cardMasterList=e,this.cardList=this.isAmadeus?[{detailCode:"CA",detailCodeNameEn:"MasterCard"},{detailCode:"VI",detailCodeNameEn:"Visa"},{detailCode:"AX",detailCodeNameEn:"American Express"},{detailCode:"DC",detailCodeNameEn:"Diners Club"},{detailCode:"DS",detailCodeNameEn:"Discover Card"},{detailCode:"JC",detailCodeNameEn:"Japan Credit Bureau (JCB)"},{detailCode:"TP",detailCodeNameEn:"Universal Air Travel Plan (UATP)"},{detailCode:"UP",detailCodeNameEn:"China UnionPay"}]:e}get isPostPay(){return this._isPostPay}set isPostPay(e){this._isPostPay=e,this.putForm=e?this.dataService.generatePostpayForm():this.dataService.generatePrepayForm(),this._initSubscription()}get cardTypeOptions(){return this._cardTypeOptions}set cardTypeOptions(e){this._cardTypeOptions=e,this.cardTypeList=this.cardTypeOptions,this.setCardTypeList()}get corporateCardOptions(){return this._corporateCardOptions}set corporateCardOptions(e){this._corporateCardOptions=e}get showTaxPayerNoYn(){const e=this.putForm&&this.putForm.get("cardHolderTypeCode").value;return e&&this.formDisableCodeList.indexOf(e)>-1}get maskingCardNo(){var e;const t=null===(e=this.putForm)||void 0===e?void 0:e.get("cardHolderTypeCode").value;if(this.formDisableCodeList.indexOf(t)>-1){const e=this.putForm.get("cardNo").value.match(/.{1,4}/g);return e.map((t,o)=>0===o||o===e.length-1?t:"****").join("-")}return null}ngOnInit(){this._initSelectboxOptions()}ngAfterViewInit(){this.cd.markForCheck()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){return this.putForm.invalid?(this._checkValid=!0,this.cd.markForCheck(),null):(this._checkValid=!1,this._convertFormToItem(this.putForm.getRawValue()),V.omitBy(this.putForm.getRawValue(),V.isNil))}checkIsInvalid(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}_convertFormToItem(e){const{cardNo:t,cardHolderName:o,cardQuotaMonth:n,cardValidPeriodYear:i,cardValidPeriodMonth:r,cardHolderTypeCode:a,cardMasterCode:s,cardPassword:c,cardHolderBirthday:l,cardHolderTaxPayerNo:d}=e,b=this.dataService.initPymentFormDataCondition();return{cards:[Object.assign({},V.pick({cardHolderName:o,cardMasterCode:s,cardHolderTypeCode:a,cardNo:t,cardHolderBirthday:l,cardValidPeriod:`${r}/${i}`,cardPassword:c,cardQuotaMonth:n,cardHolderTaxPayerNo:d},Object.keys(b)))]}}_initSubscription(){this.putForm.get("cardHolderTypeCode").valueChanges.pipe(Object(Le.a)(this._$unsubscribe)).subscribe(e=>{const t=Object.keys(this.putForm.controls);if(this.formDisableCodeList.indexOf(e)>-1){const o=V.find(this.corporateCardOptions,t=>t.cardUseTypeCode===e),n=Object.assign({},o,{cardHolderName:o.cardHolderNameEn,cardQuotaMonth:"00"});t.filter(e=>"cardHolderTypeCode"!==e).forEach(e=>{this.putForm.get(e).patchValue(n[e]),this.putForm.get(e).disable()})}else t.filter(e=>"cardHolderTypeCode"!==e).forEach(e=>{const t="cardQuotaMonth"===e?"00":null;this.putForm.get(e).patchValue(t),this.putForm.get(e).enable()})})}_initSelectboxOptions(){this.cardQuotaMonthList.push({value:"00",label:"00"});for(let t=1;t<25;t++){const e=V.padStart(String(t),2,"0");this.cardQuotaMonthList.push({value:e,label:e})}for(let t=0;t<12;t++){const e=V.padStart(String(t+1),2,"0");this.cardValidPeriodMonthList.push({value:e,label:`${t+1}`})}const e=(new Date).getFullYear();for(let t=0;t<20;t++)this.cardValidPeriodYearList.push({value:String(e+t).slice(2,4),label:`${e+t}`})}setCardTypeList(){if(this.cardTypeOptions&&this.corporateCardOptions){const e=V.uniq(this.corporateCardOptions.map(e=>e.cardUseTypeCode).concat(["CCP03","CCP04"]));this.cardTypeList=this.cardTypeOptions.filter(t=>e.indexOf(t.detailCode)>-1)}}}return e.\u0275fac=function(t){return new(t||e)(he.Qb(We),he.Qb(me.a),he.Qb(he.h))},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-payment"]],hostAttrs:[1,"page-item"],inputs:{isAmadeus:"isAmadeus",travelerList:"travelerList",roomInfo:"roomInfo",cardMasterList:"cardMasterList",isPostPay:"isPostPay",cardTypeOptions:"cardTypeOptions",corporateCardOptions:"corporateCardOptions"},decls:67,vars:23,consts:[[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"ml20"],[1,"section-contents-box-body"],[1,"table","table-bordered"],[1,"table","table-bordered","table-responsive",3,"formGroup","connectForm"],["width","10%"],["width","40%"],["scope","row",1,"th-bg"],[1,"color-red"],["formControlName","cardHolderName","inputFormat","uppserCaseEnOnly",3,"isInvalid"],["formControlName","cardMasterCode","dataKey","detailCode","displayKey","detailCodeNameEn",3,"options","useAllOptionName","isInvalid"],["formControlName","cardHolderTypeCode","dataKey","detailCode","displayKey","detailCodeNameEn",3,"options","useAllOptionName","isInvalid"],[4,"ngIf"],["formControlName","cardHolderBirthday","inputFormat","numberOnly","placeholder","yyyy-mm-dd(Private Card is mandatory)"],[1,"form-group"],["formControlName","cardValidPeriodMonth",3,"useAllOptionName","options","isInvalid"],["formControlName","cardValidPeriodYear",3,"useAllOptionName","options","isInvalid"],["type","password","formControlName","cardPassword","inputFormat","numberOnly",3,"isInvalid"],[1,"input"],["type","text","disabled","",3,"value"],["formControlName","cardNo","inputFormat","cardNo","placeholder","Numbers only",3,"isInvalid"],["formControlName","cardQuotaMonth",3,"options","useAllOptionYn","isInvalid"],["formControlName","cardHolderTaxPayerNo","inputFormat","numberOnly","placeholder","10 digits(Corporate Card is mandatory)"]],template:function(e,t){1&e&&(he.Wb(0,"div",0),he.Wb(1,"div",1),he.Wb(2,"strong"),he.Pc(3,"Credit Card"),he.Vb(),he.Wb(4,"span",2),he.Pc(5,"If this is Non refundable booking, payment would be processed at first."),he.Vb(),he.Vb(),he.Wb(6,"div",3),he.Wb(7,"div",4),he.Wb(8,"form",5),he.Wb(9,"table"),he.Wb(10,"caption"),he.Pc(11," Credit Card "),he.Vb(),he.Wb(12,"colgroup"),he.Rb(13,"col",6),he.Rb(14,"col",7),he.Rb(15,"col",6),he.Rb(16,"col"),he.Vb(),he.Wb(17,"tbody"),he.Wb(18,"tr"),he.Wb(19,"th",8),he.Wb(20,"sup"),he.Pc(21,"Payment Amounts"),he.Vb(),he.Vb(),he.Wb(22,"td",9),he.Wb(23,"span"),he.Pc(24),he.ic(25,"number"),he.Vb(),he.Vb(),he.Wb(26,"th",8),he.Wb(27,"sup"),he.Pc(28,"Card Holder"),he.Vb(),he.Vb(),he.Wb(29,"td"),he.Rb(30,"app-input-text",10),he.Vb(),he.Vb(),he.Wb(31,"tr"),he.Wb(32,"th",8),he.Wb(33,"sup"),he.Pc(34,"Card"),he.Vb(),he.Vb(),he.Wb(35,"td"),he.Rb(36,"app-selectbox",11),he.Vb(),he.Wb(37,"th",8),he.Wb(38,"sup"),he.Pc(39,"Card Holder Type"),he.Vb(),he.Vb(),he.Wb(40,"td"),he.Rb(41,"app-selectbox",12),he.Vb(),he.Vb(),he.Wb(42,"tr"),he.Wb(43,"th",8),he.Wb(44,"sup"),he.Pc(45,"Card Number"),he.Vb(),he.Vb(),he.Wb(46,"td"),he.Nc(47,lo,3,1,"ng-container",13),he.Nc(48,bo,2,1,"ng-container",13),he.Vb(),he.Wb(49,"th",8),he.Pc(50,"Birthday"),he.Vb(),he.Wb(51,"td"),he.Rb(52,"app-input-text",14),he.Vb(),he.Vb(),he.Wb(53,"tr"),he.Wb(54,"th",8),he.Wb(55,"sup"),he.Pc(56,"Valid Thru"),he.Vb(),he.Vb(),he.Wb(57,"td"),he.Wb(58,"div",15),he.Rb(59,"app-selectbox",16),he.Rb(60,"app-selectbox",17),he.Vb(),he.Vb(),he.Wb(61,"th",8),he.Wb(62,"sup"),he.Pc(63,"CC PW(First 2 digit)"),he.Vb(),he.Vb(),he.Wb(64,"td"),he.Rb(65,"app-input-text",18),he.Vb(),he.Vb(),he.Nc(66,uo,9,3,"tr",13),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb()),2&e&&(he.Cb(8),he.pc("formGroup",t.putForm)("connectForm",t.putFormData),he.Cb(16),he.Sc("",null==t.roomInfo?null:t.roomInfo.billingCurrencyCode," ",he.jc(25,21,null==t.roomInfo?null:t.roomInfo.amountSum),""),he.Cb(6),he.pc("isInvalid",t.checkIsInvalid("cardHolderName")),he.Cb(6),he.pc("options",t.cardList)("useAllOptionName","Select")("isInvalid",t.checkIsInvalid("cardMasterCode")),he.Cb(5),he.pc("options",t.cardTypeList)("useAllOptionName","Select")("isInvalid",t.checkIsInvalid("cardHolderTypeCode")),he.Cb(6),he.pc("ngIf",t.maskingCardNo),he.Cb(1),he.pc("ngIf",!t.maskingCardNo),he.Cb(11),he.pc("useAllOptionName","Select")("options",t.cardValidPeriodMonthList)("isInvalid",t.checkIsInvalid("cardValidPeriodMonth")),he.Cb(1),he.pc("useAllOptionName","Select")("options",t.cardValidPeriodYearList)("isInvalid",t.checkIsInvalid("cardValidPeriodYear")),he.Cb(5),he.pc("isInvalid",t.checkIsInvalid("cardPassword")),he.Cb(1),he.pc("ngIf",!t.isPostPay))},directives:[r.B,r.s,r.k,ht.a,qt.a,r.r,r.i,gt.a,i.o],pipes:[i.f],encapsulation:2,changeDetection:0}),e})(),ho=(()=>{class e{constructor(e){this.cd=e}}return e.\u0275fac=function(t){return new(t||e)(he.Qb(he.h))},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-price"]],hostAttrs:[1,"page-item"],inputs:{roomInfo:"roomInfo"},decls:55,vars:17,consts:[[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"section-contents-box-body"],[1,"table","table-bordered"],["scope","col",1,"align-c"],[1,"align-r"]],template:function(e,t){1&e&&(he.Wb(0,"div",0),he.Wb(1,"div",1),he.Wb(2,"strong"),he.Pc(3,"Rate"),he.Vb(),he.Vb(),he.Wb(4,"div",2),he.Wb(5,"div",3),he.Wb(6,"table"),he.Wb(7,"caption"),he.Pc(8,"Rate"),he.Vb(),he.Wb(9,"colgroup"),he.Rb(10,"col"),he.Rb(11,"col"),he.Rb(12,"col"),he.Rb(13,"col"),he.Rb(14,"col"),he.Rb(15,"col"),he.Rb(16,"col"),he.Vb(),he.Wb(17,"thead"),he.Wb(18,"tr"),he.Wb(19,"th",4),he.Pc(20,"Vendor Net"),he.Vb(),he.Wb(21,"th",4),he.Pc(22,"Vendor Curr"),he.Vb(),he.Wb(23,"th",4),he.Pc(24,"Vendor Tax"),he.Vb(),he.Wb(25,"th",4),he.Pc(26,"Billing Curr"),he.Vb(),he.Wb(27,"th",4),he.Pc(28,"Billing Gross"),he.Vb(),he.Wb(29,"th",4),he.Pc(30,"Billing Discount"),he.Vb(),he.Wb(31,"th",4),he.Pc(32,"Billing Sum"),he.Vb(),he.Vb(),he.Vb(),he.Wb(33,"tbody"),he.Wb(34,"tr"),he.Wb(35,"td",5),he.Pc(36),he.ic(37,"number"),he.Vb(),he.Wb(38,"td",5),he.Pc(39),he.Vb(),he.Wb(40,"td",5),he.Pc(41),he.ic(42,"number"),he.Vb(),he.Wb(43,"td",5),he.Pc(44),he.Vb(),he.Wb(45,"td",5),he.Pc(46),he.ic(47,"number"),he.Vb(),he.Wb(48,"td",5),he.Pc(49),he.ic(50,"number"),he.Vb(),he.Wb(51,"td",5),he.Wb(52,"strong"),he.Pc(53),he.ic(54,"number"),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb()),2&e&&(he.Cb(36),he.Qc(he.jc(37,7,null==t.roomInfo?null:t.roomInfo.vendorNetAmount)||"-"),he.Cb(3),he.Qc(null==t.roomInfo?null:t.roomInfo.vendorCurrencyCode),he.Cb(2),he.Qc(he.jc(42,9,null==t.roomInfo?null:t.roomInfo.vendorTaxAmount)||"-"),he.Cb(3),he.Qc(null==t.roomInfo?null:t.roomInfo.billingCurrencyCode),he.Cb(2),he.Qc(he.jc(47,11,null==t.roomInfo?null:t.roomInfo.productAmount)||"-"),he.Cb(3),he.Qc(he.jc(50,13,null==t.roomInfo?null:t.roomInfo.discountAmount)||"-"),he.Cb(4),he.Qc(he.jc(54,15,null==t.roomInfo?null:t.roomInfo.amountSum)||"-"))},pipes:[i.f],encapsulation:2,changeDetection:0}),e})();const mo=["selectTime"];function Co(e,t){if(1&e&&(he.Wb(0,"option",15),he.Pc(1),he.Vb()),2&e){const e=t.$implicit;he.pc("ngValue",e),he.Cb(1),he.Rc(" ",e.detailCodeNameEn," ")}}let fo=(()=>{class e{constructor(e,t){this.cd=e,this.renderer=t,this.arrivalTime="",this.isLateCheckIn=!1,this.isHighFloor=!1,this.isBabyCot=!1,this.isSmokingRoom=!1,this.isNotSmokingRoom=!1}onSubmit(){if(this.isLateCheckIn&&""===this.arrivalTime)return this.renderer.addClass(this.selectTime.nativeElement,"valid-error"),{precodedRemarks:void 0};const e=[];return e.push(this.isSmokingRoom?{code:"BRQ02"}:{code:"BRQ01"}),this.isHighFloor&&e.push({code:"BRQ04"}),this.isBabyCot&&e.push({code:"BRQ06"}),this.isLateCheckIn&&e.push({code:"BRQ03",memoRequest:this.arrivalTime.detailCode}),V.isNil(this.specialRequest)||e.push({code:"BRQ99",memoRequest:this.specialRequest}),{precodedRemarks:e.length>0?e:void 0}}onArrivalTimeChange(e){this.renderer.removeClass(this.selectTime.nativeElement,"valid-error")}onSelectSmokingRoom(e){e?(this.isSmokingRoom=!0,this.isNotSmokingRoom=!1):(this.isNotSmokingRoom=!0,this.isSmokingRoom=!1)}onSelectLateCheckIn(e){this.isLateCheckIn=e,this.renderer.removeClass(this.selectTime.nativeElement,"valid-error")}onSelectHighFloor(e){this.isHighFloor=e}onSelectBabyCot(e){this.isBabyCot=e}}return e.\u0275fac=function(t){return new(t||e)(he.Qb(he.h),he.Qb(he.E))},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-request"]],viewQuery:function(e,t){var o;1&e&&he.Kc(mo,!0),2&e&&he.Dc(o=he.gc())&&(t.selectTime=o.first)},hostAttrs:[1,"page-item"],inputs:{arrivalTimeOptions:"arrivalTimeOptions"},decls:43,vars:9,consts:[[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"ml20"],[1,"section-contents-box-body"],[1,"request-option"],[1,"checkbox"],["type","checkbox",1,"checkbox-control-input",3,"checked","change"],[1,"checkbox-control-text"],[1,"select-box","inline",2,"width","50%"],["selectTime",""],[3,"disabled","ngModel","ngModelChange","change"],["value","","disabled","","selected",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,"textarea"],["cols","30","rows","2","placeholder","Client sepcial requests (in English)",3,"ngModel","ngModelChange"],[3,"ngValue"]],template:function(e,t){1&e&&(he.Wb(0,"div",0),he.Wb(1,"div",1),he.Wb(2,"strong"),he.Pc(3,"Special Request"),he.Vb(),he.Wb(4,"span",2),he.Pc(5,"Special Requests are not guaranteed."),he.Vb(),he.Vb(),he.Wb(6,"div",3),he.Wb(7,"ul",4),he.Wb(8,"li"),he.Wb(9,"label",5),he.Wb(10,"input",6),he.fc("change",(function(){return t.onSelectSmokingRoom(!1)})),he.Vb(),he.Wb(11,"span",7),he.Pc(12,"Non Smoking Room"),he.Vb(),he.Vb(),he.Vb(),he.Wb(13,"li"),he.Wb(14,"label",5),he.Wb(15,"input",6),he.fc("change",(function(){return t.onSelectSmokingRoom(!0)})),he.Vb(),he.Wb(16,"span",7),he.Pc(17,"Smoking Room"),he.Vb(),he.Vb(),he.Vb(),he.Wb(18,"li"),he.Wb(19,"label",5),he.Wb(20,"input",6),he.fc("change",(function(e){return t.onSelectHighFloor(e.target.checked)})),he.Vb(),he.Wb(21,"span",7),he.Pc(22,"High Floor"),he.Vb(),he.Vb(),he.Vb(),he.Wb(23,"li"),he.Wb(24,"label",5),he.Wb(25,"input",6),he.fc("change",(function(e){return t.onSelectBabyCot(e.target.checked)})),he.Vb(),he.Wb(26,"span",7),he.Pc(27,"Baby Cot (The property may charge a fee for this request)"),he.Vb(),he.Vb(),he.Vb(),he.Wb(28,"li"),he.Wb(29,"label",5),he.Wb(30,"input",6),he.fc("change",(function(e){return t.onSelectLateCheckIn(e.target.checked)})),he.Vb(),he.Wb(31,"span",7),he.Pc(32,"Late Check In"),he.Vb(),he.Vb(),he.Vb(),he.Wb(33,"li"),he.Wb(34,"div",8,9),he.Wb(36,"select",10),he.fc("ngModelChange",(function(e){return t.arrivalTime=e}))("change",(function(e){return t.onArrivalTimeChange(e)})),he.Wb(37,"option",11),he.Pc(38,"Expected Check In Time"),he.Vb(),he.Nc(39,Co,2,2,"option",12),he.Vb(),he.Vb(),he.Vb(),he.Wb(40,"li"),he.Wb(41,"div",13),he.Wb(42,"textarea",14),he.fc("ngModelChange",(function(e){return t.specialRequest=e})),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb(),he.Vb()),2&e&&(he.Cb(10),he.pc("checked",t.isNotSmokingRoom),he.Cb(5),he.pc("checked",t.isSmokingRoom),he.Cb(5),he.pc("checked",t.isHighFloor),he.Cb(5),he.pc("checked",t.isBabyCot),he.Cb(5),he.pc("checked",t.isLateCheckIn),he.Cb(6),he.pc("disabled",!t.isLateCheckIn)("ngModel",t.arrivalTime),he.Cb(3),he.pc("ngForOf",t.arrivalTimeOptions),he.Cb(3),he.pc("ngModel",t.specialRequest))},directives:[r.y,r.r,r.u,r.v,r.A,i.n,r.c],encapsulation:2,changeDetection:0}),e})(),go=(()=>{class e{constructor(e,t,o){this.store=e,this.alertService=t,this.decimalPipe=o,this.unsubscribe$=new Se.a,this.bookerCompName="\uc624\ub9c8\uc774\ud638\ud154",this.stationList$=this.store.pipe(Object(s.u)(_e)),this.bedTypeList$=this.store.pipe(Object(s.u)(Me)),this.policyList$=this.store.pipe(Object(s.u)(Be)),this.arrivalTimeOptions$=this.store.pipe(Object(s.u)(we))}get roomInfo(){return this._roomInfo}set roomInfo(e){this._roomInfo=e,this.isPostPay="Prepay"!==e.payTypeCode,this.isAmadeus=900001===e.vendorCompCode}ngAfterContentInit(){console.log(this.bookerInfo,"bookerInfo"),this._initSubscription()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}clickSearchHandler({searchFormData:e}){this.store.dispatch(n.changeRoomSearchFormData({searchFormData:e}))}clickResetHandler(){this.store.dispatch(n.changeRoomSearchFormData({searchFormData:{}}))}onBooking(){const{booker:e}=this.bookerFormEl.onSubmit();let{travelers:t,roomObj:o}=this.travelerFormEl.onSubmit();const{precodedRemarks:i}=this.requestFormEl.onSubmit();if(void 0===i)return;if(V.isEmpty(e)||V.isEmpty(t))return;const{hotelItems:r}=this._setHotelItem(o,i),a=this._setPolicyCondition();let s=Object.assign({bookingSourceTypeCode:"BSR01",deviceTypeCode:"PC",domainAddress:this.domainAddress,booker:e,hotelItems:r,travelers:t,policyMonitoring:void 0,corporateDraftCode:void 0},a);if("STN02"==this.stationTypeCode&&(s.booker.compCode=this.bookerCompCode),this.roomCondition.amountChangedYn){const e=`Amount Change : ${this.decimalPipe.transform(this.roomCondition.beforeAmountSum)}\u2192${this.decimalPipe.transform(this.roomCondition.amountSum)}`;this.alertService.alert({message:e,accept:()=>this.store.dispatch(n.requestBookingAction({condition:s,transactionSetId:this.transactionSetId,stationTypeCode:this.stationTypeCode,country:this.countryCode,currency:this.currencyCode,language:this.languageCode||"KO"}))})}else this.store.dispatch(n.requestBookingAction({condition:s,transactionSetId:this.transactionSetId,stationTypeCode:this.stationTypeCode,country:this.countryCode,currency:this.currencyCode,language:this.languageCode||"KO"}))}_setHotelItem(e,t){var o,n,i,r,a,s,c,l;const d=[],b=(null===(o=this.roomInfo)||void 0===o?void 0:o.doubleBedYn)||void 0,u=je(this.roomCondition.cancelDeadline.clientCancelDeadline).format("YYYY-MM-DD HH:mm"),{productAmount:p,taxAmount:h,amountSum:m}=this.roomCondition.amountChangedYn?this.roomCondition:this.roomInfo;for(const C in e)if(Object.prototype.hasOwnProperty.call(e,C)){const t=V.parseInt(C);d.push({roomNo:t,travelerIndexes:e[C],doubleBedYn:b})}return{hotelItems:[{itemIndex:0,hotelCode:this.hotelInfo.hotelCode,checkInDate:this.searchFormData.checkInDate,checkOutDate:this.searchFormData.checkOutDate,roomTypeCode:this.roomInfo.roomTypeCode,roomTypeName:this.roomInfo.roomTypeName,productAmount:p,taxAmount:h,amountSum:m,taxIncludedYn:this.roomInfo.taxIncludedYn,refundableYn:(null===(i=null===(n=this.roomCondition)||void 0===n?void 0:n.cancelDeadline)||void 0===i?void 0:i.refundableYn)||void 0,clientCancelDeadline:u,rooms:d,freeWifiYn:this.roomInfo.freeWifiYn||!1,freeBreakfastYn:this.roomInfo.freeBreakfastYn,freeBreakfastName:this.roomInfo.freeBreakfastName,dynamicRateYn:!1,roomTypeCodedData:this.roomInfo.roomTypeCodedData,roomConditionCodedData:this.roomCondition.roomConditionCodedData,preCodedRemarks:t,originAmount:(null===(r=this.roomInfo)||void 0===r?void 0:r.originAmount)||void 0,discountAmount:(null===(a=this.roomInfo)||void 0===a?void 0:a.discountAmount)||void 0,specialCheckInInstructions:(null===(s=this.roomCondition)||void 0===s?void 0:s.specialCheckInInstructions)||void 0,cancelPolicyDescription:(null===(c=this.roomCondition)||void 0===c?void 0:c.cancelPolicyDescription)||void 0,checkInInstructions:(null===(l=this.roomCondition)||void 0===l?void 0:l.checkInInstructions)||void 0,inPolicyYn:void 0}]}}_setPolicyCondition(){return{policyMasterSeq:void 0,regionGroupSeq:void 0,positionGroupSeq:void 0,corporateDeptCode:void 0}}_initSubscription(){this.stationList$.pipe(Object(Re.a)(e=>!V.isEmpty(e)),Object(Le.a)(this.unsubscribe$)).subscribe(e=>{this.stationName=V.get(V.find(e,e=>e.detailCode===this.stationTypeCode),"detailCodeNameEn")}),this.policyList$.pipe(Object(Le.a)(this.unsubscribe$)).subscribe(e=>{this.policyInfo=null,(null==e?void 0:e.length)>0&&(this.policyInfo=e[0])})}}return e.\u0275fac=function(t){return new(t||e)(he.Qb(s.h),he.Qb(me.a),he.Qb(i.f))},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list-form"]],viewQuery:function(e,t){var o;1&e&&(he.Xc(Ut,!0),he.Xc(co,!0),he.Xc(fo,!0)),2&e&&(he.Dc(o=he.gc())&&(t.bookerFormEl=o.first),he.Dc(o=he.gc())&&(t.travelerFormEl=o.first),he.Dc(o=he.gc())&&(t.requestFormEl=o.first))},inputs:{travelerList:"travelerList",hotelCode:"hotelCode",domainAddress:"domainAddress",countryCode:"countryCode",currencyCode:"currencyCode",regionCode:"regionCode",languageCode:"languageCode",stationTypeCode:"stationTypeCode",transactionSetId:"transactionSetId",searchFormData:"searchFormData",bookerCompCode:"bookerCompCode",hotelInfo:"hotelInfo",roomCondition:"roomCondition",roomInfo:"roomInfo"},features:[he.Bb([i.f])],decls:10,vars:19,consts:[[3,"stationName","domainAddress","countryCode","sellerCode"],[3,"stationTypeCode","bookerCompName","bookerCompCode","bookerInfo"],[3,"searchFormData","hotelInfo","roomInfo","roomCondition"],[3,"travelerList","checkInDate","rooms"],[3,"roomInfo"],[3,"arrivalTimeOptions"],[1,"button-area","align-r","mt10"],[1,"btn","btn-secondary","sm",3,"click"]],template:function(e,t){1&e&&(he.Rb(0,"app-ho-room-list-route",0),he.Rb(1,"app-ho-room-list-booker",1),he.Rb(2,"app-ho-room-list-condition",2),he.Rb(3,"app-ho-room-list-traveler",3),he.Rb(4,"app-ho-room-list-price",4),he.Rb(5,"app-ho-room-list-request",5),he.ic(6,"async"),he.Wb(7,"div",6),he.Wb(8,"a",7),he.fc("click",(function(){return t.onBooking()})),he.Pc(9,"Create"),he.Vb(),he.Vb()),2&e&&(he.pc("stationName",t.stationName)("domainAddress",t.domainAddress)("countryCode",t.countryCode)("sellerCode",t.bookerCompCode),he.Cb(1),he.pc("stationTypeCode",t.stationTypeCode)("bookerCompName",t.bookerCompName)("bookerCompCode",t.bookerCompCode)("bookerInfo",t.bookerInfo),he.Cb(1),he.pc("searchFormData",t.searchFormData)("hotelInfo",t.hotelInfo)("roomInfo",t.roomInfo)("roomCondition",t.roomCondition),he.Cb(1),he.pc("travelerList",t.travelerList)("checkInDate",t.searchFormData.checkInDate)("rooms",t.searchFormData.rooms),he.Cb(1),he.pc("roomInfo",t.roomInfo),he.Cb(1),he.pc("arrivalTimeOptions",he.jc(6,17,t.arrivalTimeOptions$)))},directives:[eo,Ut,Xt,co,ho,fo],pipes:[i.b],encapsulation:2,changeDetection:0}),e})();function vo(e,t){if(1&e&&(he.Rb(0,"app-ho-room-list-form",11),he.ic(1,"async"),he.ic(2,"async"),he.ic(3,"async"),he.ic(4,"async"),he.ic(5,"async"),he.ic(6,"async"),he.ic(7,"async"),he.ic(8,"async"),he.ic(9,"async"),he.ic(10,"async"),he.ic(11,"async"),he.ic(12,"async"),he.ic(13,"async"),he.ic(14,"async"),he.ic(15,"async")),2&e){const e=he.hc();he.pc("travelerList",he.jc(1,15,e.travelerList$))("hotelCode",he.jc(2,17,e.hotelCode$))("domainAddress",he.jc(3,19,e.domainAddress$))("countryCode",he.jc(4,21,e.countryCode$))("regionCode",he.jc(5,23,e.regionCode$))("countryCode",he.jc(6,25,e.countryCode$))("currencyCode",he.jc(7,27,e.currencyCode$))("languageCode",he.jc(8,29,e.languageCode$))("stationTypeCode",he.jc(9,31,e.stationTypeCode$))("transactionSetId",he.jc(10,33,e.transactionSetId$))("searchFormData",he.jc(11,35,e.searchFormData$))("bookerCompCode",he.jc(12,37,e.bookerCompCode$))("hotelInfo",he.jc(13,39,e.hotelInfo$))("roomInfo",he.jc(14,41,e.selectedRoomInfo$))("roomCondition",he.jc(15,43,e.roomConditionInfo$))}}let yo=(()=>{class e{constructor(e,t,o,n,i,r){this.store=e,this._fileService=t,this.alertService=o,this._router=n,this._route=i,this.dataService=r,this.unsubscribe$=new Se.a,this.travelerList$=e.pipe(Object(s.u)(Ye)),this.loading$=e.pipe(Object(s.u)(Ue)),this.searchFormData$=e.pipe(Object(s.u)(Ke)),this.hotelCode$=e.pipe(Object(s.u)(Ze)),this.domainAddress$=e.pipe(Object(s.u)(et)),this.countryCode$=e.pipe(Object(s.u)(tt)),this.currencyCode$=e.pipe(Object(s.u)(ot)),this.languageCode$=e.pipe(Object(s.u)(nt)),this.stationTypeCode$=e.pipe(Object(s.u)(Xe)),this.bookerCompCode$=e.pipe(Object(s.u)(Je)),this.transactionSetId$=e.pipe(Object(s.u)(Ge)),this.hotelInfo$=e.pipe(Object(s.u)(rt)),this.roomList$=e.pipe(Object(s.u)(it)),this.selectedRoomInfo$=e.pipe(Object(s.u)(at)),this.roomConditionInfo$=e.pipe(Object(s.u)(st)),this.roomConditionLoaded$=e.pipe(Object(s.u)(ct)),this.isOpenBookingForm$=e.pipe(Object(s.u)(lt)),this._initSubscription()}ngOnInit(){this.store.dispatch(n.loadStationList()),this.store.dispatch(n.loadCardList()),this.store.dispatch(n.loadArrivalTimeList()),this.store.dispatch(n.loadBedTypeList()),this.store.dispatch(n.loadCardTypeOptions())}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(n.initComponentStateAction())}resetTravelersHandler({travelers:e}){this.store.dispatch(n.loadCorporateStaffSuccess({dataList:e}))}clickSearchHandler({searchFormData:e}){this.store.dispatch(n.changeRoomSearchFormData({searchFormData:e}))}clickResetHandler(){this.store.dispatch(n.changeRoomSearchFormData({searchFormData:{}}))}selectRoomHandler(e){this.store.dispatch(n.addSelectedRoomInfo({info:e}))}openBookingFormHandler(){this.store.dispatch(n.openBookingFormPopup())}closeBookingFormHandler(){this.store.dispatch(n.delSelectedRoomInfo()),this.store.dispatch(n.closeBookingFormPopup())}_initSubscription(){this.domainAddress$.pipe(Object(Le.a)(this.unsubscribe$)).subscribe(e=>this.domainAddress=e),this.hotelCode$.pipe(Object(Le.a)(this.unsubscribe$)).subscribe(e=>this.hotelCode=e),this.currencyCode$.pipe(Object(Le.a)(this.unsubscribe$)).subscribe(e=>this.currencyCode=e),this.countryCode$.pipe(Object(Le.a)(this.unsubscribe$)).subscribe(e=>this.countryCode=e),this.bookerCompCode$.pipe(Object(Le.a)(this.unsubscribe$)).subscribe(e=>this._bookerCompCode=e),this.transactionSetId$.pipe(Object(Le.a)(this.unsubscribe$)).subscribe(e=>this._transactionSetId=e),this.stationTypeCode$.pipe(Object(Le.a)(this.unsubscribe$)).subscribe(e=>{this._stationTypeCode=e}),this.searchFormData$.pipe(Object(Ne.a)(100),Object(Re.a)(e=>!V.isEmpty(e)),Object(Le.a)(this.unsubscribe$)).subscribe(e=>{this._searchFormData=e;const t=this._transactionSetId,o=this._stationTypeCode,i=Number(this.hotelCode),r=this._bookerCompCode;this.store.dispatch(n.loadHotelInformation({condition:{hotelCode:i},transactionSetId:t,stationTypeCode:o,country:this.countryCode,currency:this.currencyCode})),this.store.dispatch(n.loadRoomList({condition:Object.assign(Object.assign({},e),{hotelCode:i,bookerCompCode:r,domainAddress:this.domainAddress}),transactionSetId:t,stationTypeCode:o,country:this.countryCode,currency:this.currencyCode}))}),this.selectedRoomInfo$.pipe(Object(Re.a)(e=>!V.isEmpty(e),Object(Le.a)(this.unsubscribe$))).subscribe(e=>{const t=this.dataService.initRoomConditionRq(),o=this._transactionSetId,i=this._stationTypeCode,r=Number(this.hotelCode),a=this._bookerCompCode,s=V.pick(Object.assign({},this._searchFormData,{hotelCode:r},e),Object.keys(t));"STN02"==i&&(s.bookerCompCode=a),this.store.dispatch(n.loadRoomCondition({condition:s,transactionSetId:o,stationTypeCode:i,country:this.countryCode,currency:this.currencyCode}))}),this.roomConditionLoaded$.pipe(Object(Re.a)(e=>!0===e),Object(Le.a)(this.unsubscribe$)).subscribe(()=>{this.openBookingFormHandler()})}}return e.\u0275fac=function(t){return new(t||e)(he.Qb(s.h),he.Qb(dt.a),he.Qb(me.a),he.Qb(I.c),he.Qb(I.a),he.Qb(We))},e.\u0275cmp=he.Kb({type:e,selectors:[["app-ho-room-list"]],decls:26,vars:35,consts:[[3,"hotelInfo"],[3,"corporateCompCode","travelerList","searchCondition","resetTravelersEvent","clickSearchEvent","clickResetEvent"],["id","hotel-search-information"],[1,"page-item"],[3,"roomTypes","selectRoomEvent"],["header","Create Hotel Booking","modalContentClass","pd-all","modalSize","lg",3,"visible","modal","visibleChange"],[3,"travelerList","hotelCode","domainAddress","countryCode","regionCode","currencyCode","languageCode","stationTypeCode","transactionSetId","searchFormData","bookerCompCode","hotelInfo","roomInfo","roomCondition",4,"ngIf"],[1,"loading-mask","pos-fixed"],[1,"content-loading","align-items-center"],[1,"icon-loading","lg"],[1,"loading-title"],[3,"travelerList","hotelCode","domainAddress","countryCode","regionCode","currencyCode","languageCode","stationTypeCode","transactionSetId","searchFormData","bookerCompCode","hotelInfo","roomInfo","roomCondition"]],template:function(e,t){1&e&&(he.Rb(0,"app-ho-room-list-summary",0),he.ic(1,"async"),he.Wb(2,"app-ho-room-list-search",1),he.fc("resetTravelersEvent",(function(e){return t.resetTravelersHandler(e)}))("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),he.ic(3,"async"),he.ic(4,"async"),he.ic(5,"async"),he.Vb(),he.Wb(6,"div",2),he.Wb(7,"div",3),he.Wb(8,"app-ho-room-list-grid",4),he.fc("selectRoomEvent",(function(e){return t.selectRoomHandler(e)})),he.ic(9,"async"),he.Vb(),he.Vb(),he.Rb(10,"app-ho-room-list-hotel-info",0),he.ic(11,"async"),he.Rb(12,"app-ho-room-list-description",0),he.ic(13,"async"),he.Rb(14,"app-ho-room-list-photo",0),he.ic(15,"async"),he.Vb(),he.Wb(16,"app-dialog",5),he.fc("visibleChange",(function(){return t.closeBookingFormHandler()})),he.ic(17,"async"),he.Nc(18,vo,16,45,"app-ho-room-list-form",6),he.ic(19,"async"),he.Vb(),he.Wb(20,"div",7),he.ic(21,"async"),he.Wb(22,"div",8),he.Rb(23,"div",9),he.Wb(24,"div",10),he.Pc(25,"loading..."),he.Vb(),he.Vb(),he.Vb()),2&e&&(he.pc("hotelInfo",he.jc(1,13,t.hotelInfo$)),he.Cb(2),he.pc("corporateCompCode",he.jc(3,15,t.bookerCompCode$))("travelerList",he.jc(4,17,t.travelerList$))("searchCondition",he.jc(5,19,t.searchFormData$)),he.Cb(6),he.pc("roomTypes",he.jc(9,21,t.roomList$)),he.Cb(2),he.pc("hotelInfo",he.jc(11,23,t.hotelInfo$)),he.Cb(2),he.pc("hotelInfo",he.jc(13,25,t.hotelInfo$)),he.Cb(2),he.pc("hotelInfo",he.jc(15,27,t.hotelInfo$)),he.Cb(2),he.pc("visible",he.jc(17,29,t.isOpenBookingForm$))("modal",!0),he.Cb(2),he.pc("ngIf",he.jc(19,31,t.isOpenBookingForm$)),he.Cb(2),he.Gb("active",he.jc(21,33,t.loading$)))},directives:[ut,Vt,Tt,At,xt,Bt,Yt.a,i.o,go],pipes:[i.b],encapsulation:2,changeDetection:0}),e})();const Oo=[{path:":domainAddress/:countryCode/:currencyCode/:languageCode/:stationTypeCode/:transactionSetId/:bookerCompCode/:hotelCode/:checkInDate/:checkOutDate/:rooms/:exclude3rdPartyYn",component:yo,canActivate:[Pe]}];let Io=(()=>{class e{}return e.\u0275mod=he.Ob({type:e}),e.\u0275inj=he.Nb({factory:function(t){return new(t||e)},imports:[[I.f.forChild(Oo)],I.f]}),e})();var Vo=o("lJxs"),jo=o("JIr8"),ko=o("bOdf"),Wo=o("zp1y"),Po=o("vkgz"),So=o("Xb6A");let Lo=(()=>{class e{constructor(e,t,o,i,r){this.actions$=e,this.service=t,this._errorService=o,this.store=i,this.alertService=r,this.loadPolicyDetail$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadPolicyActions),Object(ge.a)(({condition:e})=>this.service.loadPolicyDetail(e).pipe(Object(Vo.a)(e=>n.loadPolicySuccess({dataList:e})),Object(jo.a)(e=>(this._catchErr(e,"\ucd9c\uc7a5\uaddc\uc815 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[])))))),this.loadStationList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadStationList),Object(ge.a)(()=>this.service.getCommonDetailCodeList({masterCode:"BS002"}).pipe(Object(Vo.a)(e=>n.loadStationListSuccess({dataList:e})),Object(jo.a)(e=>(this._catchErr(e,"List lookup failed."),[])))))),this.loadCardList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadCardList),Object(ge.a)(()=>this.service.getCommonDetailCodeList({masterCode:"PM003"}).pipe(Object(Vo.a)(e=>n.loadCardListSuccess({dataList:e})),Object(jo.a)(e=>(this._catchErr(e,"List lookup failed."),[])))))),this.loadArrivalTimeList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadArrivalTimeList),Object(ge.a)(()=>this.service.getCommonDetailCodeList({masterCode:"HO025"}).pipe(Object(Vo.a)(e=>n.loadArrivalTimeListSuccess({dataList:e})),Object(jo.a)(e=>(this._catchErr(e,"Arrival time list lookup failed. Please try again in a momentarily."),[])))))),this.loadBedTypeList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadBedTypeList),Object(ge.a)(()=>this.service.getCommonDetailCodeList({masterCode:"HO008"}).pipe(Object(Vo.a)(e=>n.loadBedTypeListSuccess({dataList:e})),Object(jo.a)(e=>(this._catchErr(e,"List lookup failed."),[])))))),this.loadCorporateList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadCorporateList),Object(ge.a)(()=>this.service.getCorporateList({limits:[0,1e4]}).pipe(Object(Vo.a)(e=>n.loadCorporateListSuccess({dataList:e})),Object(jo.a)(e=>(this._catchErr(e,"List lookup failed."),[])))))),this.loadCardTypeOptions$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadCardTypeOptions),Object(ge.a)(()=>this.service.getCommonDetailCodeList({masterCode:"PM007"}).pipe(Object(Vo.a)(e=>n.loadCardTypeOptionsSuccess({dataList:e})),Object(jo.a)(e=>(this._catchErr(e,"List lookup failed."),[])))))),this.loadCorporateCardList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadCorporateCardList),Object(ko.a)(e=>Object(Ce.a)(e).pipe(Object(Wo.a)(this.travelerList$))),Object(ge.a)(([e,t])=>this.service.loadCorporateCardList({corporateCompCode:((null==t?void 0:t.length)>0?t[0]:{}).corporateCompCode,itemCategoryCode:"IC02",useYn:!0,limits:[0,2]}).pipe(Object(Vo.a)(e=>n.loadCorporateCardListSuccess({dataList:e})),Object(jo.a)(e=>(this._catchErr(e,"List lookup failed."),[])))))),this.loadHotelInfo$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadHotelInformation),Object(ge.a)(({condition:e,transactionSetId:t,stationTypeCode:o,country:i,currency:r})=>this.service.getHotelInformation({condition:e,transactionSetId:t,stationTypeCode:o,country:i,currency:r}).pipe(Object(Vo.a)(({info:e,transactionSetId:t})=>n.loadHotelInformationSuccess({info:e,transactionSetId:t})),Object(jo.a)(e=>{const t="List lookup failed.",o=[n.loadHotelInformationFailure({error:t})];return this._catchErr(e,t,o),[]}))))),this.loadRoomList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadRoomList),Object(ge.a)(({condition:e,transactionSetId:t,stationTypeCode:o,country:i,currency:r})=>this.service.getRoomList({condition:e,transactionSetId:t,stationTypeCode:o,country:i,currency:r}).pipe(Object(Vo.a)(({roomList:e,transactionSetId:t})=>n.loadRoomListSuccess({roomList:e,transactionSetId:t})),Object(jo.a)(e=>{const t="List lookup failed.",o=[n.loadRoomListFailure({error:t})];return this._catchErr(e,t,o),[]}))))),this.loadRoomCondition$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadRoomCondition),Object(ge.a)(({condition:e,transactionSetId:t,stationTypeCode:o,country:i,currency:r})=>this.service.getRoomCondition({condition:e,transactionSetId:t,stationTypeCode:o,country:i,currency:r}).pipe(Object(Vo.a)(({info:e,transactionSetId:t})=>n.loadRoomConditionSuccess({info:e,transactionSetId:t})),Object(jo.a)(e=>{const t="List lookup failed.",o=[n.loadRoomConditionFailure({error:t})];return this._catchErr(e,t,o),[]}))))),this.requestBooking$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.requestBookingAction),Object(ge.a)(({condition:e,transactionSetId:t,stationTypeCode:o,country:n,currency:i,language:r})=>this.service.requestBooking({condition:e,transactionSetId:t,stationTypeCode:o,country:n,currency:i,language:r}).pipe(Object(Vo.a)(()=>({succeedYn:!0})),Object(jo.a)(e=>Object(Ce.a)({succeedYn:!1,error:e})))),Object(Po.a)(({succeedYn:e,error:t})=>{if(e){const e="Booking creation was sucessful.",t=[n.closeBookingFormPopup(),n.delSelectedRoomInfo(),n.requestBookingSuccess()];this._runPage(e,t)}else{const e="Booking creation was failed.",o=[n.requestBookingFailure()];this._catchErr(t,e,o)}})),{dispatch:!1}),this.travelerList$=this.store.pipe(Object(s.u)(Ye))}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this.store.dispatch(e)})}:()=>{}})}_catchErr(e,t,o){const n=this._errorService.errorHandler(e,t);V.isNil(n)||(V.isNil(n.accept)&&(n.accept=(null==o?void 0:o.length)>0?()=>{o.forEach(e=>{this.store.dispatch(e)})}:()=>{}),this.alertService.alert(n))}}return e.\u0275fac=function(t){return new(t||e)(he.bc(a.a),he.bc(Ve),he.bc(So.a),he.bc(s.h),he.bc(me.a))},e.\u0275prov=he.Mb({token:e,factory:e.\u0275fac}),e})();const No=[yo,go],Ro=[ut,Vt,Tt,At,xt,wt,Bt,Et,Ut,Xt,eo,co,po,ho,fo];let Fo=(()=>{class e{}return e.\u0275mod=he.Ob({type:e}),e.\u0275inj=he.Nb({factory:function(t){return new(t||e)},providers:[Pe],imports:[[i.c,r.m,r.w,c.a,l.a,d.a,p.a,b.a,u.a,h.a,m.a,C.a,f.a,g.a,v.a,y.a,O.a,Io,s.j.forFeature("hoRoomList",xe),a.b.forFeature([Lo])]]}),e})()}}]);