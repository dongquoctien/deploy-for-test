function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],n=!0,i=!1,r=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(o.push(a.value),!t||o.length!==t);n=!0);}catch(s){i=!0,r=s}finally{try{n||null==c.return||c.return()}finally{if(i)throw r}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,r=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){a=!0,i=e},f:function(){try{r||null==n.return||n.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{Onn4:function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var n=o("fXoL"),i=o("3Pt+"),r=o("ofXK"),a=["rb"],c=function(){return{radio:!0}},s={provide:i.p,useExisting:Object(n.U)((function(){return l})),multi:!0},l=function(){var e=function(){function e(t){_classCallCheck(this,e),this.cd=t,this.onClick=new n.n,this.onFocus=new n.n,this.onBlur=new n.n,this.onModelChange=function(){},this.onModelTouched=function(){}}return _createClass(e,[{key:"handleClick",value:function(e,t,o){e.preventDefault(),this.disabled||(this.select(e),o&&t.focus())}},{key:"select",value:function(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.onClick.emit(e))}},{key:"writeValue",value:function(e){this.checked=e===this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}},{key:"registerOnChange",value:function(e){this.onModelChange=e}},{key:"registerOnTouched",value:function(e){this.onModelTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"onInputFocus",value:function(e){this.focused=!0,this.onFocus.emit(e)}},{key:"onInputBlur",value:function(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}},{key:"onChange",value:function(e){this.select(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Qb(n.h))},e.\u0275cmp=n.Kb({type:e,selectors:[["app-radio"]],viewQuery:function(e,t){var o;1&e&&n.Kc(a,!0),2&e&&n.Dc(o=n.gc())&&(t.inputViewChild=o.first)},inputs:{value:"value",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",checked:"checked"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[n.Bb([s])],decls:5,vars:11,consts:[[3,"ngClass","click"],["type","radio",1,"radio-control-input",3,"checked","disabled","change","focus","blur"],["rb",""],[1,"radio-control-text"]],template:function(e,t){1&e&&(n.Wb(0,"label",0),n.fc("click",(function(e){return t.select(e)})),n.Wb(1,"input",1,2),n.fc("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onInputFocus(e)}))("blur",(function(e){return t.onInputBlur(e)})),n.Vb(),n.Wb(3,"span",3),n.Pc(4),n.Vb(),n.Vb()),2&e&&(n.Eb(t.styleClass),n.pc("ngClass",n.tc(10,c)),n.Cb(1),n.pc("checked",t.checked)("disabled",t.disabled),n.Db("id",t.inputId)("name",t.name)("value",t.value)("tabindex",t.tabindex),n.Cb(3),n.Qc(t.label))},directives:[r.l],encapsulation:2}),e}()},"gx+I":function(e,t,o){"use strict";o.r(t),o.d(t,"CONTAINERS",(function(){return Jo})),o.d(t,"COMPONENTS",(function(){return Zo})),o.d(t,"HoRoomListModule",(function(){return en}));var n={};o.r(n),o.d(n,"loadPolicyActions",(function(){return S})),o.d(n,"loadPolicySuccess",(function(){return P})),o.d(n,"loadCorporateStaffSuccess",(function(){return L})),o.d(n,"initComponentStateAction",(function(){return N})),o.d(n,"loadStationList",(function(){return R})),o.d(n,"loadStationListSuccess",(function(){return F})),o.d(n,"loadCorporateList",(function(){return T})),o.d(n,"loadCorporateListSuccess",(function(){return D})),o.d(n,"loadCardList",(function(){return _})),o.d(n,"loadCardListSuccess",(function(){return A})),o.d(n,"loadArrivalTimeList",(function(){return x})),o.d(n,"loadArrivalTimeListSuccess",(function(){return H})),o.d(n,"loadBedTypeList",(function(){return B})),o.d(n,"loadBedTypeListSuccess",(function(){return $})),o.d(n,"loadCardTypeOptions",(function(){return w})),o.d(n,"loadCardTypeOptionsSuccess",(function(){return Y})),o.d(n,"loadCorporateCardList",(function(){return E})),o.d(n,"loadCorporateCardListSuccess",(function(){return M})),o.d(n,"setStationTypeCode",(function(){return q})),o.d(n,"setBookerCompCode",(function(){return Q})),o.d(n,"setHotelCode",(function(){return z})),o.d(n,"setDomainAddress",(function(){return U})),o.d(n,"setCountryCode",(function(){return K})),o.d(n,"setCurrencyCode",(function(){return G})),o.d(n,"setRegionCode",(function(){return X})),o.d(n,"setLanguageCode",(function(){return J})),o.d(n,"setTransactionSetId",(function(){return Z})),o.d(n,"changeRoomSearchFormData",(function(){return ee})),o.d(n,"loadHotelInformation",(function(){return te})),o.d(n,"loadHotelInformationSuccess",(function(){return oe})),o.d(n,"loadHotelInformationFailure",(function(){return ne})),o.d(n,"loadRoomList",(function(){return ie})),o.d(n,"loadRoomListSuccess",(function(){return re})),o.d(n,"loadRoomListFailure",(function(){return ae})),o.d(n,"addSelectedRoomInfo",(function(){return ce})),o.d(n,"delSelectedRoomInfo",(function(){return se})),o.d(n,"loadRoomCondition",(function(){return le})),o.d(n,"loadRoomConditionSuccess",(function(){return ue})),o.d(n,"loadRoomConditionFailure",(function(){return de})),o.d(n,"openBookingFormPopup",(function(){return be})),o.d(n,"closeBookingFormPopup",(function(){return pe})),o.d(n,"requestBookingAction",(function(){return me})),o.d(n,"requestBookingSuccess",(function(){return he})),o.d(n,"requestBookingFailure",(function(){return fe}));var i,r,a,c=o("ofXK"),s=o("3Pt+"),l=o("snw9"),u=o("kt0X"),d=o("pxUr"),b=o("vu/V"),p=o("7rOj"),m=o("l1P7"),h=o("6LsY"),f=o("v7zA"),C=o("hHe4"),v=o("5hwk"),g=o("kKjH"),y=o("qXPF"),O=o("1OXJ"),k=o("7UZF"),I=o("A4Tr"),V=o("AsNq"),j=o("tyNb"),W=o("LvDl"),S=Object(u.o)("[HoRoomList] load policy",Object(u.t)()),P=Object(u.o)("[HoRoomList] load policy success",Object(u.t)()),L=Object(u.o)("[HoRoomList] load corporate staff success",Object(u.t)()),N=Object(u.o)("[HoRoomList] init component state"),R=Object(u.o)("[HoRoomList] load station list"),F=Object(u.o)("[HoRoomList] load station list success",Object(u.t)()),T=Object(u.o)("[HoRoomList] load corporate list"),D=Object(u.o)("[HoRoomList] load corporate list success",Object(u.t)()),_=Object(u.o)("[HoRoomList] load card list"),A=Object(u.o)("[HoRoomList] load card list success",Object(u.t)()),x=Object(u.o)("[HoRoomList] load arrival time list"),H=Object(u.o)("[HoRoomList] load arrival time list success",Object(u.t)()),B=Object(u.o)("[HoRoomList] load bed type list"),$=Object(u.o)("[HoRoomList] load bed type list success",Object(u.t)()),w=Object(u.o)("[HoRoomList] load card type options"),Y=Object(u.o)("[HoRoomList] load card type options success",Object(u.t)()),E=Object(u.o)("[HoRoomList] load corporate card list"),M=Object(u.o)("[HoRoomList] load corporate card list success",Object(u.t)()),q=Object(u.o)("[HoRoomList] set station type code",Object(u.t)()),Q=Object(u.o)("[HoRoomList] set booker comp code",Object(u.t)()),z=Object(u.o)("[HoRoomList] set hotel code",Object(u.t)()),U=Object(u.o)("[HoRoomList] set domainaddress",Object(u.t)()),K=Object(u.o)("[HoRoomList] set country",Object(u.t)()),G=Object(u.o)("[HoRoomList] set currency",Object(u.t)()),X=Object(u.o)("[HoRoomList] set region code",Object(u.t)()),J=Object(u.o)("[HoRoomList] set Language code",Object(u.t)()),Z=Object(u.o)("[HoRoomList] set transaction set id",Object(u.t)()),ee=Object(u.o)("[HoRoomList] change room search form data",Object(u.t)()),te=Object(u.o)("[HoRoomList] hotel information",Object(u.t)()),oe=Object(u.o)("[HoRoomList] load hotel information success",Object(u.t)()),ne=Object(u.o)("[HoRoomList] load hotel information failure",Object(u.t)()),ie=Object(u.o)("[HoRoomList] load room list",Object(u.t)()),re=Object(u.o)("[HoRoomList] load room list success",Object(u.t)()),ae=Object(u.o)("[HoRoomList] load room list failure",Object(u.t)()),ce=Object(u.o)("[HoRoomList] add selected romm info",Object(u.t)()),se=Object(u.o)("[HoRoomList] del selected romm info"),le=Object(u.o)("[HoRoomList] load room condition",Object(u.t)()),ue=Object(u.o)("[HoRoomList] load room condition success",Object(u.t)()),de=Object(u.o)("[HoRoomList] load room condition failure",Object(u.t)()),be=Object(u.o)("[HoRoomList] open booking form popup"),pe=Object(u.o)("[HoRoomList] close booking form popup"),me=Object(u.o)("[HoRoomList] request booking",Object(u.t)()),he=Object(u.o)("[HoRoomList] request booking success"),fe=Object(u.o)("[HoRoomList] request booking failure"),Ce=o("fXoL"),ve=o("EsKh"),ge=o("LRne"),ye=o("z6cu"),Oe=o("eIep"),ke=o("AytR").a.API_URL,Ie={postPolicyDetail:"".concat(ke,"/admin/corporate/policy/detail"),postCorporateStaff:"".concat(ke,"/admin/corporate/staff"),postCommonDetail:"".concat(ke,"/common/detail-code"),postCorporateComp:"".concat(ke,"/admin/corporate/comp"),postBasicContinent:"".concat(ke,"/admin/basis/continent"),corporateCardInfo:"".concat(ke,"/admin/corporate/card-info"),postHotelRoomList:"".concat(ke,"/hotel/room/list"),postHotelInformation:"".concat(ke,"/hotel/information"),postHotelRoomCondition:"".concat(ke,"/hotel/room/condition"),requestBooking:"".concat(ke,"/booking/v2")},Ve=o("tpT/"),je=((i=function(){function e(t){_classCallCheck(this,e),this.api=t}return _createClass(e,[{key:"loadPolicyDetail",value:function(e){var t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ie.postPolicyDetail,t).pipe(Object(Oe.a)((function(e){var t;return e.succeedYn?Object(ge.a)((null===(t=e.result)||void 0===t?void 0:t.itemCategories)||[]):Object(ye.a)(e||"api response error")})))}},{key:"loadCoporateStaff",value:function(e){var t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ie.postCorporateStaff,t).pipe(Object(Oe.a)((function(e){return e.succeedYn?Object(ge.a)(e.result.list[0]):Object(ye.a)(e||"api response error")})))}},{key:"getCommonDetailCodeList",value:function(e){var t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ie.postCommonDetail,t).pipe(Object(Oe.a)((function(e){return e.succeedYn?Object(ge.a)(e.result.list):Object(ye.a)(e||"api response error")})))}},{key:"getCorporateList",value:function(e){var t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ie.postCorporateComp,t).pipe(Object(Oe.a)((function(e){return e.succeedYn&&e.result?Object(ge.a)(e.result.list):Object(ye.a)(e||"api response error")})))}},{key:"loadCorporateCardList",value:function(e){var t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ie.corporateCardInfo,t).pipe(Object(Oe.a)((function(e){var t;return e.succeedYn?Object(ge.a)((null===(t=e.result)||void 0===t?void 0:t.list)||[]):Object(ye.a)(e||"api response error")})))}},{key:"getHotelInformation",value:function(e){var t=e.condition,o=e.stationTypeCode,n=e.transactionSetId,i=e.country,r=e.currency,a=W.assign({},this.api.makeCustomParams({stationTypeCode:o,transactionSetId:n||void 0,country:i,currency:r}),{condition:t});return this.api.post(Ie.postHotelInformation,a).pipe(Object(Oe.a)((function(e){return e.succeedYn&&e.result?Object(ge.a)({info:e.result.hotel,transactionSetId:e.transactionSetId}):Object(ye.a)(e||"api response error")})))}},{key:"getRoomList",value:function(e){var t=e.condition,o=e.stationTypeCode,n=e.transactionSetId,i=e.country,r=e.currency,a=W.assign({},this.api.makeCustomParams({stationTypeCode:o,transactionSetId:n||void 0,country:i,currency:r}),{condition:t});return this.api.post(Ie.postHotelRoomList,a).pipe(Object(Oe.a)((function(e){if(e.succeedYn&&e.result){var t=e.result.roomTypes.map((function(e,t){return Object.assign({id:e.index},e)}));return Object(ge.a)({roomList:t,transactionSetId:e.transactionSetId})}return Object(ye.a)(e||"api response error")})))}},{key:"getRoomCondition",value:function(e){var t=e.condition,o=e.stationTypeCode,n=e.transactionSetId,i=e.country,r=e.currency,a=W.assign({},this.api.makeCustomParams({stationTypeCode:o,transactionSetId:n||void 0,country:i,currency:r}),{condition:t});return this.api.post(Ie.postHotelRoomCondition,a).pipe(Object(Oe.a)((function(e){return e.succeedYn&&e.result?Object(ge.a)({info:e.result,transactionSetId:e.transactionSetId}):Object(ye.a)(e||"api response error")})))}},{key:"requestBooking",value:function(e){var t=e.condition,o=e.stationTypeCode,n=e.transactionSetId,i=e.country,r=e.currency,a=e.language,c=W.assign({},this.api.makeCustomParams({stationTypeCode:o,transactionSetId:n||void 0,country:i,currency:r,language:a}),{condition:t});return this.api.post(Ie.requestBooking,c).pipe(Object(Oe.a)((function(e){return e.succeedYn?Object(ge.a)(!0):Object(ye.a)(e||"api response error")})))}}]),e}()).\u0275fac=function(e){return new(e||i)(Ce.bc(Ve.a))},i.\u0275prov=Ce.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),We=o("wd/R"),Se=o("6UzV"),Pe=((a=function(){function e(t){var o=this;_classCallCheck(this,e),this.fb=t,this.generateListSearchForm=function(){return o.fb.group({dynamicRateYn:[!1],checkInDate:[null,[s.z.required]],checkOutDate:[null,[s.z.required]],rooms:o.fb.array([o.generateListSearchRoomForm()])},{validators:[Se.a.compareDatesValidators("checkInDateValidator",["checkInDate","checkOutDate"])]})},this.generateListSearchRoomForm=function(){return o.fb.group({adultCount:[2],childCount:[0],childAges:o.fb.array([]),travelerUnos:o.fb.array([new s.g({value:null,disabled:!0},[s.z.required])])})},this.generateRequiredFormControl=function(){return new s.g(null,[s.z.required])},this.generateNonRequiredFormControl=function(){return new s.g(1,[s.z.required])},this.initSearchFormData=function(){return{dynamicRateYn:!1,checkInDate:null,checkOutDate:null,rooms:[{adultCount:2,childCount:0,childAges:[],travelerUnos:[]}]}},this.initSearchCondition=function(){return{regionCode:null,hotelCode:null,checkInDate:null,checkOutDate:null,rooms:null,dynamicRateYn:null}},this.initRoomConditionRq=function(){return{hotelCode:null,checkInDate:null,checkOutDate:null,rooms:null,roomTypeCode:null,roomTypeName:null,roomTypeCodedData:null}},this.generateBookerForm=function(){return o.fb.group({userNo:[null,[s.z.required]],compCode:[null],name:[null,[s.z.required]],email:[null,[s.z.required,Se.a.email()]],countryPhoneCode:[null,[s.z.required]],mobileNo:[null,[s.z.required]]})},this.initBookerFormData=function(){return{userNo:null,compCode:null,name:null,email:null,countryPhoneCode:null,mobileNo:null}},this.initBookerFormCondition=function(){return{userNo:null,compCode:null,name:null,email:null,countryPhoneCode:null,mobileNo:null}},this.generateTravelerForm=function(){return o.fb.group({travelers:o.fb.array([])})},this.generateTravelerFormItem=function(){return o.fb.group({roomNo:[null],travelerIndex:[null,[s.z.required]],userNo:[null],name:[null,[s.z.required]],lastName:[null,[s.z.required]],firstName:[null,[s.z.required]],gender:[null,[s.z.required]],ageTypeCode:[null,[s.z.required]],birthday:[null],nationalityCode:[null,[s.z.required]],childAge:[null],checkInDate:[null]},{validators:[o.childBirthdayValidator]})},this.initTravelerFormData=function(){return{roomNo:null,travelerIndex:null,userNo:null,name:null,lastName:null,firstName:null,gender:"M",ageTypeCode:"ADT",birthday:null,nationalityCode:"KR",childAge:null,checkInDate:null}},this.initTravelerFormCondition=function(){return{travelerIndex:null,userNo:null,name:null,lastName:null,firstName:null,gender:null,ageTypeCode:null,birthday:null,nationalityCode:null}},this.initPymentFormDataCondition=function(){return{cardHolderTypeCode:null,cardHolderRelationCode:null,cardMasterCode:null,cardNo:null,cardHolderName:null,cardHolderBirthday:null,cardHolderTaxPayerNo:null,cardQuotaMonth:null,cardValidPeriod:null,cardPassword:null}},this.generatePrepayForm=function(){return o.fb.group({cardHolderTypeCode:[null,[s.z.required]],cardMasterCode:[null,[s.z.required]],cardNo:[null,[s.z.required,Se.a.cardNoSimpleValidator]],cardHolderName:[null,[s.z.required]],cardValidPeriodYear:[null,[s.z.required]],cardValidPeriodMonth:[null,[s.z.required]],cardPassword:[null,[s.z.required,s.z.maxLength(2),s.z.minLength(2)]],cardHolderBirthday:[null,[s.z.required,Se.a.dateValidator]],cardQuotaMonth:["00",[s.z.required]],cardHolderTaxPayerNo:[null]})},this.generatePostpayForm=function(){return o.fb.group({cardHolderTypeCode:[null,[s.z.required]],cardMasterCode:[null,[s.z.required]],cardNo:[null,[s.z.required,Se.a.cardNoSimpleValidator]],cardHolderName:[null,[s.z.required]],cardValidPeriodYear:[null,[s.z.required]],cardValidPeriodMonth:[null,[s.z.required]],cardPassword:[null,[s.z.required,s.z.maxLength(2),s.z.minLength(2)]]})},this.childBirthdayValidator=function(e){if(!e)return null;var t="CHD"===e.get("ageTypeCode").value,n=e.get("childAge").value,i=e.get("birthday").value,r=e.get("checkInDate").value;return t?W.isNil(i)||8!==i.toString().length?{birthdayInvalid:!0}:We(i,"YYYYMMDD").isValid()?o.getOld(r,i)!==n?{birthdayInvalid:!0}:null:{birthdayInvalid:!0}:null}}return _createClass(e,[{key:"setTravelerCount",value:function(e,t){var o=this;return e.reduce((function(e,n){var i=n.birthday;if(!i)return e.adultCount++,e;var r=o.getOld(t,i);return r>=12?e.adultCount++:(e.childCount++,e.childAges.push(r)),e}),{adultCount:0,childCount:0,childAges:[]})}},{key:"getOld",value:function(e,t){var o=this.toMoment(e),n=We(t,"YYYYMMDD"),i=Number(o.format("YYYY")),r=Number(n.format("YYYY")),a=Number(o.format("MM")),c=Number(n.format("MM")),s=Number(o.format("DD")),l=Number(n.format("DD")),u=i-r;return c<a?u:c>a||l>s?u-1:u}},{key:"toMoment",value:function(e){return We(e,"YYYY-MM-DD")}}]),e}()).\u0275fac=function(e){return new(e||a)(Ce.bc(s.f))},a.\u0275prov=Ce.Mb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),Le=((r=function(){function e(t,o,n,i){_classCallCheck(this,e),this._router=t,this.store=o,this.alertService=n,this.apiService=i}return _createClass(e,[{key:"canActivate",value:function(e,t){console.log(e.queryParams,"route.queryParams");var o=e.queryParams.domainAddress||e.params.domainAddress,i=e.queryParams.stationTypeCode||e.params.stationTypeCode,r=e.queryParams.countryCode||e.params.countryCode,a=e.queryParams.currencyCode||e.params.currencyCode,c=e.queryParams.languageCode||e.params.languageCode,s=e.queryParams.transactionSetId||e.params.transactionSetId,l=e.queryParams.bookerCompCode||e.params.bookerCompCode,u=e.queryParams.hotelCode||e.params.hotelCode,d=e.queryParams.checkInDate||e.params.checkInDate,b=e.queryParams.checkOutDate||e.params.checkOutDate,p=e.queryParams.rooms||e.params.rooms,m=JSON.parse(e.queryParams.exclude3rdPartyYn||e.params.exclude3rdPartyYn);if(W.isNil(o)||W.isNil(i)||W.isNil(r)||W.isNil(c)||W.isNil(a)||W.isNil(d)||W.isNil(l)||W.isNil(b)||W.isNil(u)||W.isNil(s)||W.isNil(p))return this.alertService.alert("\ub8f8\ub9ac\uc2a4\ud2b8 \uc870\ud68c\ub97c \uc704\ud55c \ub370\uc774\ud130\uac00 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),!1;var h={dynamicRateYn:!1,checkInDate:d,checkOutDate:b,rooms:p.split("|").map((function(e,t){var o=e.split("+"),n=W.parseInt(o[0]),i=0,r=[];if(!W.isNil(o[1])){var a=o[1].split("~");i=a.length,r=a.map((function(e){return W.parseInt(e)}))}return{adultCount:n,childCount:i,childAges:r}})),exclude3rdPartyYn:m};return this.store.dispatch(n.setHotelCode({hotelCode:u})),this.store.dispatch(n.setDomainAddress({domainAddress:o})),this.store.dispatch(n.setCountryCode({countryCode:r})),this.store.dispatch(n.setLanguageCode({languageCode:c})),this.store.dispatch(n.setCurrencyCode({currencyCode:a})),this.store.dispatch(n.setTransactionSetId({transactionSetId:s})),this.store.dispatch(n.setStationTypeCode({stationTypeCode:i})),this.store.dispatch(n.setBookerCompCode({bookerCompCode:W.parseInt(l)})),this.store.dispatch(n.changeRoomSearchFormData({searchFormData:h})),!0}}]),e}()).\u0275fac=function(e){return new(e||r)(Ce.bc(j.c),Ce.bc(u.h),Ce.bc(ve.a),Ce.bc(je))},r.\u0275prov=Ce.Mb({token:r,factory:r.\u0275fac}),r),Ne=o("XNiG"),Re=o("1G5W"),Fe=o("Kj3r"),Te=o("pLZG"),De=o("EVqC"),_e=Object(De.a)({selectId:function(e){return e.id},sortComparer:!1}),Ae=_e.getInitialState({policyList:null,travelerList:null,stationList:null,corporateList:null,cardList:null,arrivalTimeList:null,bedTypeList:null,cardTypeOptions:null,corporateCardOptions:null,domainAddress:null,countryCode:null,currencyCode:null,languageCode:null,stationTypeCode:null,bookerCompCode:null,hotelCode:null,regionCode:null,infoLoading:!1,roomLoading:!1,searchFormData:null,transactionSetId:null,hotelInfo:null,bookingLoading:!1,selectedRoomInfo:null,roomConditionLoading:!1,roomConditionLoaded:!1,roomConditionInfo:null,isOpenBookingForm:!1}),xe=Object(u.q)(Ae,Object(u.s)(n.initComponentStateAction,(function(e){return Object.assign(Object.assign({},e),{infoLoading:!1,roomLoading:!1,roomConditionLoading:!1,roomConditionLoaded:!1,isOpenBookingForm:!1})})),Object(u.s)(n.loadPolicySuccess,(function(e,t){var o=t.dataList;return Object.assign(Object.assign({},e),{policyList:o})})),Object(u.s)(n.loadCorporateStaffSuccess,(function(e,t){var o=t.dataList;return Object.assign(Object.assign({},e),{travelerList:o})})),Object(u.s)(n.loadStationListSuccess,(function(e,t){var o=t.dataList;return Object.assign(Object.assign({},e),{stationList:o})})),Object(u.s)(n.loadCorporateListSuccess,(function(e,t){var o=t.dataList;return Object.assign(Object.assign({},e),{corporateList:o})})),Object(u.s)(n.loadCardListSuccess,(function(e,t){var o=t.dataList;return Object.assign(Object.assign({},e),{cardList:o})})),Object(u.s)(n.loadArrivalTimeListSuccess,(function(e,t){var o=t.dataList;return Object.assign(Object.assign({},e),{arrivalTimeList:o})})),Object(u.s)(n.loadBedTypeListSuccess,(function(e,t){var o=t.dataList;return Object.assign(Object.assign({},e),{bedTypeList:o})})),Object(u.s)(n.loadCardTypeOptionsSuccess,(function(e,t){var o=t.dataList;return Object.assign(Object.assign({},e),{cardTypeOptions:o})})),Object(u.s)(n.loadCorporateCardListSuccess,(function(e,t){var o=t.dataList;return Object.assign(Object.assign({},e),{corporateCardOptions:o})})),Object(u.s)(n.setStationTypeCode,(function(e,t){var o=t.stationTypeCode;return Object.assign(Object.assign({},e),{stationTypeCode:o})})),Object(u.s)(n.setBookerCompCode,(function(e,t){var o=t.bookerCompCode;return Object.assign(Object.assign({},e),{bookerCompCode:o})})),Object(u.s)(n.setHotelCode,(function(e,t){var o=t.hotelCode;return Object.assign(Object.assign({},e),{hotelCode:o})})),Object(u.s)(n.setDomainAddress,(function(e,t){var o=t.domainAddress;return Object.assign(Object.assign({},e),{domainAddress:o})})),Object(u.s)(n.setCountryCode,(function(e,t){var o=t.countryCode;return Object.assign(Object.assign({},e),{countryCode:o})})),Object(u.s)(n.setCurrencyCode,(function(e,t){var o=t.currencyCode;return Object.assign(Object.assign({},e),{currencyCode:o})})),Object(u.s)(n.setRegionCode,(function(e,t){var o=t.regionCode;return Object.assign(Object.assign({},e),{regionCode:o})})),Object(u.s)(n.setLanguageCode,(function(e,t){var o=t.languageCode;return Object.assign(Object.assign({},e),{languageCode:o})})),Object(u.s)(n.setTransactionSetId,(function(e,t){var o=t.transactionSetId;return Object.assign(Object.assign({},e),{transactionSetId:o})})),Object(u.s)(n.changeRoomSearchFormData,(function(e,t){var o=t.searchFormData;return Object.assign(Object.assign({},e),{searchFormData:o})})),Object(u.s)(n.loadHotelInformation,(function(e){return Object.assign(Object.assign({},e),{infoLoading:!0})})),Object(u.s)(n.loadHotelInformationSuccess,(function(e,t){var o=t.info,n=t.transactionSetId;return Object.assign(Object.assign({},e),{hotelInfo:o,transactionSetId:n,infoLoading:!1})})),Object(u.s)(n.loadHotelInformationFailure,(function(e,t){return _objectDestructuringEmpty(t),Object.assign(Object.assign({},e),{infoLoading:!1})})),Object(u.s)(n.loadRoomList,(function(e){return Object.assign(Object.assign({},e),{roomLoading:!0})})),Object(u.s)(n.loadRoomListSuccess,(function(e,t){var o=t.roomList,n=t.transactionSetId;return _e.setAll(o,Object.assign(Object.assign({},e),{roomLoading:!1,transactionSetId:n}))})),Object(u.s)(n.loadRoomListFailure,(function(e,t){return _objectDestructuringEmpty(t),Object.assign(Object.assign({},e),{roomLoading:!1})})),Object(u.s)(n.addSelectedRoomInfo,(function(e,t){var o=t.info;return Object.assign(Object.assign({},e),{selectedRoomInfo:o})})),Object(u.s)(n.delSelectedRoomInfo,(function(e){return Object.assign(Object.assign({},e),{selectedRoomInfo:null})})),Object(u.s)(n.loadRoomCondition,(function(e){return Object.assign(Object.assign({},e),{roomConditionLoading:!0,roomConditionLoaded:!1})})),Object(u.s)(n.loadRoomConditionSuccess,(function(e,t){var o=t.info,n=t.transactionSetId;return Object.assign(Object.assign({},e),{roomConditionInfo:o,transactionSetId:n,roomConditionLoading:!1,roomConditionLoaded:!0})})),Object(u.s)(n.loadRoomConditionFailure,(function(e){return Object.assign(Object.assign({},e),{roomConditionLoading:!1,roomConditionLoaded:!1})})),Object(u.s)(n.openBookingFormPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenBookingForm:!0})})),Object(u.s)(n.closeBookingFormPopup,(function(e){return Object.assign(Object.assign({},e),{isOpenBookingForm:!1})})),Object(u.s)(n.requestBookingAction,(function(e){return Object.assign(Object.assign({},e),{bookingLoading:!0})})),Object(u.s)(n.requestBookingSuccess,(function(e){return Object.assign(Object.assign({},e),{bookingLoading:!1})})),Object(u.s)(n.requestBookingFailure,(function(e){return Object.assign(Object.assign({},e),{bookingLoading:!1})})));function He(e,t){return Object(u.m)({hoRoomListList:xe})(e,t)}var Be=Object(u.p)("hoRoomList"),$e=Object(u.r)(Be,(function(e){return e.hoRoomListList})),we=Object(u.r)($e,(function(e){return e.policyList})),Ye=Object(u.r)($e,(function(e){return e.travelerList})),Ee=Object(u.r)($e,(function(e){return e.stationList})),Me=(Object(u.r)($e,(function(e){return e.corporateList})),Object(u.r)($e,(function(e){return e.cardList})),Object(u.r)($e,(function(e){return e.arrivalTimeList}))),qe=Object(u.r)($e,(function(e){return e.bedTypeList})),Qe=(Object(u.r)($e,(function(e){return e.cardTypeOptions})),Object(u.r)($e,(function(e){return e.corporateCardOptions})),Object(u.r)($e,(function(e){return e.infoLoading}))),ze=Object(u.r)($e,(function(e){return e.roomLoading})),Ue=Object(u.r)($e,(function(e){return e.roomConditionLoading})),Ke=Object(u.r)($e,(function(e){return e.bookingLoading})),Ge=Object(u.r)(Qe,ze,Ue,Ke,(function(e,t,o,n){return e||t||o||n})),Xe=Object(u.r)($e,(function(e){return e.searchFormData})),Je=Object(u.r)($e,(function(e){return e.transactionSetId})),Ze=Object(u.r)($e,(function(e){return e.stationTypeCode})),et=Object(u.r)($e,(function(e){return e.bookerCompCode})),tt=Object(u.r)($e,(function(e){return e.hotelCode})),ot=Object(u.r)($e,(function(e){return e.domainAddress})),nt=Object(u.r)($e,(function(e){return e.countryCode})),it=Object(u.r)($e,(function(e){return e.currencyCode})),rt=(Object(u.r)($e,(function(e){return e.regionCode})),Object(u.r)($e,(function(e){return e.languageCode}))),at=_e.getSelectors($e).selectAll,ct=Object(u.r)($e,(function(e){return e.hotelInfo})),st=Object(u.r)($e,(function(e){return e.selectedRoomInfo})),lt=Object(u.r)($e,(function(e){return e.roomConditionInfo})),ut=Object(u.r)($e,(function(e){return e.roomConditionLoaded})),dt=Object(u.r)($e,(function(e){return e.isOpenBookingForm})),bt=o("7G9D");function pt(e,t){if(1&e&&(Ce.Wb(0,"strong",5),Ce.Pc(1),Ce.Vb()),2&e){var o=Ce.hc();Ce.Cb(1),Ce.Rc("",null==o.hotelInfo?null:o.hotelInfo.starRating," Star")}}var mt,ht=((mt=_createClass((function e(){_classCallCheck(this,e)}))).\u0275fac=function(e){return new(e||mt)},mt.\u0275cmp=Ce.Kb({type:mt,selectors:[["app-ho-room-list-summary"]],hostAttrs:[1,"page-item"],inputs:{hotelInfo:"hotelInfo"},decls:8,vars:4,consts:[[1,"main-contents-summary-inner","mb20"],[1,"d-flex","align-items-center","mb10"],[1,"font-size-lg","font-weight-bold"],["class","font-size-lg font-weight-bold color-danger ml10",4,"ngIf"],[1,"d-flex","align-items-center","font-size-sm","color-dark-color2"],[1,"font-size-lg","font-weight-bold","color-danger","ml10"]],template:function(e,t){1&e&&(Ce.Wb(0,"div",0),Ce.Wb(1,"p",1),Ce.Wb(2,"strong",2),Ce.Pc(3),Ce.Vb(),Ce.Nc(4,pt,2,1,"strong",3),Ce.Vb(),Ce.Wb(5,"p",4),Ce.Wb(6,"span"),Ce.Pc(7),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e&&(Ce.Cb(3),Ce.Sc("[",null==t.hotelInfo?null:t.hotelInfo.hotelCode,"] ",null==t.hotelInfo?null:t.hotelInfo.hotelNameEn,""),Ce.Cb(1),Ce.pc("ngIf",null==t.hotelInfo?null:t.hotelInfo.starRating),Ce.Cb(3),Ce.Qc(null==t.hotelInfo?null:t.hotelInfo.addressLn))},directives:[c.o],encapsulation:2,changeDetection:0}),mt),ft=o("pfiq"),Ct=o("+Sob"),vt=o("rbKv"),gt=o("kd+X"),yt=o("LVFn"),Ot=o("U6NN"),kt=function(){return{standalone:!0}};function It(e,t){if(1&e){var o=Ce.Xb();Ce.Ub(0),Ce.Wb(1,"span",4),Ce.Wb(2,"sup"),Ce.Pc(3,"Rooms"),Ce.Vb(),Ce.Vb(),Ce.Wb(4,"app-selectbox",25),Ce.fc("onChange",(function(e){return Ce.Fc(o),Ce.hc(2).onChangeRoomCount(e)})),Ce.Vb(),Ce.Tb()}if(2&e){var n=Ce.hc(2);Ce.Cb(4),Ce.pc("ngModel",n.roomCount)("ngModelOptions",Ce.tc(4,kt))("options",n.roomCountOptions)("useAllOptionYn",!1)}}function Vt(e,t){if(1&e&&(Ce.Ub(0),Ce.Rb(1,"app-selectbox",26),Ce.Tb()),2&e){var o=t.index,n=Ce.hc(2);Ce.Cb(1),Ce.pc("options",n.childAgeOptions)("formControlName",o)("useAllOptionYn",!1)}}function jt(e,t){if(1&e){var o=Ce.Xb();Ce.Wb(0,"div",19),Ce.Nc(1,It,5,5,"ng-container",20),Ce.Wb(2,"span",4),Ce.Pc(3),Ce.Vb(),Ce.Rb(4,"app-selectbox",21),Ce.Wb(5,"app-selectbox",22),Ce.fc("onChange",(function(e){Ce.Fc(o);var n=t.index;return Ce.hc().onChangeChildCount(e,n)})),Ce.Vb(),Ce.Ub(6,23),Ce.Nc(7,Vt,2,3,"ng-container",24),Ce.Tb(),Ce.Vb()}if(2&e){var n=t.index,i=Ce.hc();Ce.pc("formGroupName",n),Ce.Cb(1),Ce.pc("ngIf",0===n),Ce.Cb(2),Ce.Rc("Room ",n+1,""),Ce.Cb(1),Ce.pc("options",i.adultCountOptions)("useAllOptionYn",!1),Ce.Cb(1),Ce.pc("options",i.childCountOptions)("useAllOptionYn",!1),Ce.Cb(2),Ce.pc("ngForOf",i.getChildAgeControls(n).controls)}}var Wt,St=((Wt=function(){function e(t,o){_classCallCheck(this,e),this._dataService=t,this.alertService=o,this.resetTravelersEvent=new Ce.n,this.clickSearchEvent=new Ce.n,this.clickResetEvent=new Ce.n,this.todayDateValue=We().format("YYYY-MM-DD"),this.isShowmore=!0,this._$unsubscribe=new Ne.a,this.searchForm=this._dataService.generateListSearchForm()}return _createClass(e,[{key:"travelerList",get:function(){return this._travelerList},set:function(e){var t=this;this._travelerList=e,this.selectedTravelers={},W.isNil(e)||e.forEach((function(e){t.selectedTravelers[e.userNo]=e}))}},{key:"searchCondition",get:function(){return this._searchCondition},set:function(e){this._searchCondition=e,this._setSearchFormArray(e),this._setSearchFormData(e)}},{key:"searchFormValid",get:function(){return this.searchForm.valid}},{key:"searchFormValue",get:function(){var e;return null===(e=this.searchForm)||void 0===e?void 0:e.value}},{key:"checkInDate",get:function(){var e;return null===(e=this.searchForm)||void 0===e?void 0:e.get("checkInDate").value}},{key:"roomFormArray",get:function(){return this.searchForm.get("rooms")}},{key:"ngOnInit",value:function(){this._initDetailSubscription(),this._initState()}},{key:"ngOnDestroy",value:function(){this._$unsubscribe.next(),this._$unsubscribe.complete()}},{key:"onChangeNightCount",value:function(e){var t=e.value;this.nightCount=t;var o=this.searchForm.get("checkInDate").value;if(!W.isNil(o)){var n=We(o).add(t,"days").format("YYYY-MM-DD");this.searchForm.get("checkOutDate").setValue(n)}}},{key:"onChangeRoomCount",value:function(e){var t=e.value,o=this.roomFormArray.length;if(t>o)for(var n=0;n<t-o;n++)this.roomFormArray.push(this._dataService.generateListSearchRoomForm());else for(var i=o-1;i>t-1;i--)this.roomFormArray.removeAt(i)}},{key:"onChangeChildCount",value:function(e,t){var o=e.value,n=this.roomFormArray.at(t).get("childAges"),i=n.length;if(0===o)n.clear();else if(o>0)if(o>i)for(var r=0;r<o-i;r++)n.push(this._dataService.generateNonRequiredFormControl());else for(var a=i-1;a>o-1;a--)n.removeAt(a)}},{key:"onSubmit",value:function(){if(this.searchForm.invalid)this._checkValid=!0;else{var e=this.setSearchCondition();this.clickSearchEvent.emit({searchFormData:e}),this._checkValid=!1}}},{key:"checkIsInvalid",value:function(e){return this._checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}},{key:"setSearchCondition",value:function(){return W.omitBy(this.searchForm.value,W.isNil)}},{key:"getChildAgeControls",value:function(e){return this.roomFormArray.at(e).get("childAges")}},{key:"getTravelControls",value:function(e){return this.roomFormArray.at(e).get("travelerUnos")}},{key:"_setSearchFormArray",value:function(e){if(!W.isEmpty(e)){this.roomFormArray.clear();var t,o=_createForOfIteratorHelper(e.rooms);try{for(o.s();!(t=o.n()).done;){var n=t.value,i=this._dataService.generateListSearchRoomForm();if(n.childCount>0){var r=i.get("childAges");r.clear();for(var a=0;a<n.childCount;a++)r.push(this._dataService.generateRequiredFormControl())}this.roomFormArray.push(i)}}catch(c){o.e(c)}finally{o.f()}}}},{key:"_setSearchFormData",value:function(e){var t=this._dataService.initSearchFormData();if(W.isEmpty(e))return this.nightCount=1,this.roomCount=1,void(this.searchFormData=t);this.roomCount=e.rooms.length,this.searchFormData=W.cloneDeep(e)}},{key:"_initDetailSubscription",value:function(){var e=this;this.searchForm.get("checkInDate").valueChanges.pipe(Object(Re.a)(this._$unsubscribe)).subscribe((function(t){if(!W.isNil(e.nightCount)){var o=We(t).add(e.nightCount,"days").format("YYYY-MM-DD");e.searchForm.get("checkOutDate").setValue(o)}})),this.searchForm.get("checkOutDate").valueChanges.pipe(Object(Re.a)(this._$unsubscribe)).subscribe((function(t){var o=e.searchForm.get("checkInDate").value;W.isNil(o)||(e.nightCount=We(t).diff(We(o),"days"))}))}},{key:"_initState",value:function(){this.nightOptions=W.range(1,30).map((function(e){return{value:e,label:"".concat(e," Nights")}})),this.roomCountOptions=W.range(1,6).map((function(e){return{value:e,label:"".concat(e)}})),this.adultCountOptions=W.range(1,10).map((function(e){return{value:e,label:"ADT ".concat(e)}})),this.childCountOptions=W.range(0,5).map((function(e){return{value:e,label:"CHD ".concat(e)}})),this.childAgeOptions=W.range(1,13).map((function(e){return{value:e,label:"".concat(e,"years old")}}))}}]),e}()).\u0275fac=function(e){return new(e||Wt)(Ce.Qb(Pe),Ce.Qb(ve.a))},Wt.\u0275cmp=Ce.Kb({type:Wt,selectors:[["app-ho-room-list-search"]],viewQuery:function(e,t){var o;1&e&&Ce.Xc(ft.a,!0),2&e&&Ce.Dc(o=Ce.gc())&&(t.autoCompletes=o)},inputs:{corporateCompCode:"corporateCompCode",travelerList:"travelerList",searchCondition:"searchCondition"},outputs:{resetTravelersEvent:"resetTravelersEvent",clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:31,vars:20,consts:[[1,"grid-search-box","room-search",3,"formGroup","connectForm","submit"],[1,"form-option-area"],[1,"row"],[1,"col-2"],[1,"form-label","md"],[1,"calendar-set","flex-fill"],[1,"input","calendar","d-inline-flex","flex-fill"],[3,"for"],["type","text","placeholder","\uccb4\ud06c\uc778 \ub0a0\uc9dc","formControlName","checkInDate",3,"matDatepicker","min"],["fromDate1",""],["type","text","placeholder","Check Out","formControlName","checkOutDate",3,"matDatepicker","min"],["toDate1",""],[1,"d-inline-flex","ml5",2,"min-width","70px",3,"ngModel","ngModelOptions","options","useAllOptionYn","onChange"],[1,"col-full"],["formArrayName","rooms"],["class","form-block",3,"formGroupName",4,"ngFor","ngForOf"],[1,"form-button-area"],["role","button",1,"btn","btn-primary","sm"],["role","button",1,"btn","btn-reset","sm"],[1,"form-block",3,"formGroupName"],[4,"ngIf"],["formControlName","adultCount",1,"d-inline-flex",3,"options","useAllOptionYn"],["formControlName","childCount",1,"d-inline-flex","ml5",3,"options","useAllOptionYn","onChange"],["formArrayName","childAges"],[4,"ngFor","ngForOf"],[1,"d-inline-flex",2,"width","80px","min-width","80px",3,"ngModel","ngModelOptions","options","useAllOptionYn","onChange"],[1,"d-inline-flex","ml5",3,"options","formControlName","useAllOptionYn"]],template:function(e,t){if(1&e&&(Ce.Wb(0,"form",0),Ce.fc("submit",(function(){return t.onSubmit()})),Ce.Wb(1,"div",1),Ce.Wb(2,"div",2),Ce.Wb(3,"div",3),Ce.Wb(4,"span",4),Ce.Wb(5,"sup"),Ce.Pc(6,"Check In"),Ce.Vb(),Ce.Vb(),Ce.Wb(7,"div",5),Ce.Wb(8,"div",6),Ce.Rb(9,"mat-datepicker-toggle",7),Ce.Rb(10,"input",8),Ce.Rb(11,"mat-datepicker",null,9),Ce.Vb(),Ce.Wb(13,"span",4),Ce.Wb(14,"sup"),Ce.Pc(15,"Check Out"),Ce.Vb(),Ce.Vb(),Ce.Wb(16,"div",6),Ce.Rb(17,"mat-datepicker-toggle",7),Ce.Rb(18,"input",10),Ce.Rb(19,"mat-datepicker",null,11),Ce.Vb(),Ce.Vb(),Ce.Wb(21,"app-selectbox",12),Ce.fc("onChange",(function(e){return t.onChangeNightCount(e)})),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(22,"div",2),Ce.Wb(23,"div",13),Ce.Ub(24,14),Ce.Nc(25,jt,8,8,"div",15),Ce.Tb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(26,"div",16),Ce.Wb(27,"button",17),Ce.Pc(28,"Search"),Ce.Vb(),Ce.Wb(29,"button",18),Ce.Pc(30,"Reset"),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e){var o=Ce.Ec(12),n=Ce.Ec(20);Ce.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),Ce.Cb(7),Ce.Gb("valid-error",t.checkIsInvalid("checkInDateValidator")),Ce.Cb(1),Ce.Gb("valid-error",t.checkIsInvalid("checkInDate")),Ce.Cb(1),Ce.pc("for",o),Ce.Cb(1),Ce.pc("matDatepicker",o)("min",t.todayDateValue),Ce.Cb(6),Ce.Gb("valid-error",t.checkIsInvalid("checkOutDate")),Ce.Cb(1),Ce.pc("for",n),Ce.Cb(1),Ce.pc("matDatepicker",n)("min",t.searchForm.get("checkInDate").value),Ce.Cb(3),Ce.pc("ngModel",t.nightCount)("ngModelOptions",Ce.tc(19,kt))("options",t.nightOptions)("useAllOptionYn",!1),Ce.Cb(4),Ce.pc("ngForOf",t.roomFormArray.controls)}},directives:[s.B,s.s,s.k,Ct.a,vt.a,s.c,gt.a,s.r,s.i,yt.a,Ot.a,s.u,s.e,c.n,s.l,c.o],encapsulation:2,changeDetection:0}),Wt);function Pt(e,t){if(1&e&&(Ce.Wb(0,"li"),Ce.Wb(1,"span",15),Ce.Pc(2),Ce.Vb(),Ce.Vb()),2&e){var o=Ce.hc().$implicit,n=Ce.hc(2);Ce.Cb(2),Ce.Qc(n.convertUnderbar(o.promotionType))}}function Lt(e,t){1&e&&(Ce.Wb(0,"li"),Ce.Wb(1,"span",16),Ce.Pc(2,"Non Refundable"),Ce.Vb(),Ce.Vb())}function Nt(e,t){if(1&e&&(Ce.Wb(0,"p",17),Ce.Pc(1),Ce.Vb()),2&e){var o=Ce.hc().$implicit,n=Ce.hc(2);Ce.Cb(1),Ce.Sc("",o.ratePlanName,"[Plan Code : ",n.convertPlanCode(o),"]")}}function Rt(e,t){1&e&&(Ce.Wb(0,"span"),Ce.Pc(1,"No Breakfast Service"),Ce.Vb())}function Ft(e,t){if(1&e&&(Ce.Wb(0,"span"),Ce.Pc(1),Ce.Vb()),2&e){var o=Ce.hc().$implicit;Ce.Cb(1),Ce.Rc("Breakfast Included ",o.freeBreakfastName,"")}}function Tt(e,t){1&e&&(Ce.Wb(0,"li"),Ce.Rb(1,"i",18),Ce.Wb(2,"span"),Ce.Pc(3,"Free wifi"),Ce.Vb(),Ce.Vb())}function Dt(e,t){if(1&e){var o=Ce.Xb();Ce.Wb(0,"tr"),Ce.Wb(1,"td"),Ce.Wb(2,"ul",7),Ce.Nc(3,Pt,3,1,"li",8),Ce.Nc(4,Lt,3,0,"li",8),Ce.Vb(),Ce.Wb(5,"p",9),Ce.Pc(6),Ce.Vb(),Ce.Nc(7,Nt,2,2,"p",10),Ce.Wb(8,"ul",7),Ce.Wb(9,"li"),Ce.Rb(10,"i",11),Ce.Nc(11,Rt,2,0,"span",8),Ce.Nc(12,Ft,2,1,"span",8),Ce.Vb(),Ce.Nc(13,Tt,4,0,"li",8),Ce.Vb(),Ce.Vb(),Ce.Wb(14,"td",12),Ce.Pc(15),Ce.Vb(),Ce.Wb(16,"td",12),Ce.Pc(17),Ce.Vb(),Ce.Wb(18,"td",13),Ce.Pc(19),Ce.ic(20,"number"),Ce.Vb(),Ce.Wb(21,"td",13),Ce.Pc(22),Ce.ic(23,"number"),Ce.Vb(),Ce.Wb(24,"td",12),Ce.Pc(25),Ce.Vb(),Ce.Wb(26,"td",13),Ce.Pc(27),Ce.ic(28,"number"),Ce.Vb(),Ce.Wb(29,"td",13),Ce.Pc(30),Ce.ic(31,"number"),Ce.Vb(),Ce.Wb(32,"td",13),Ce.Pc(33),Ce.ic(34,"number"),Ce.Vb(),Ce.Wb(35,"td",12),Ce.Wb(36,"a",14),Ce.fc("click",(function(){Ce.Fc(o);var e=t.$implicit;return Ce.hc(2).selectRoomEvent.emit(e)})),Ce.Pc(37,"Select"),Ce.Vb(),Ce.Vb(),Ce.Vb()}if(2&e){var n=t.$implicit;Ce.Cb(3),Ce.pc("ngIf",n.promotionType&&"None"!==n.promotionType),Ce.Cb(1),Ce.pc("ngIf",!n.refundableYn),Ce.Cb(2),Ce.Qc(n.roomTypeName),Ce.Cb(1),Ce.pc("ngIf",n.ratePlanCode),Ce.Cb(4),Ce.pc("ngIf",!n.freeBreakfastYn),Ce.Cb(1),Ce.pc("ngIf",n.freeBreakfastYn),Ce.Cb(1),Ce.pc("ngIf",n.freeWifiYn),Ce.Cb(2),Ce.Qc(n.vendorCompName||n.vendorCompCode),Ce.Cb(2),Ce.Qc(n.vendorCurrencyCode),Ce.Cb(2),Ce.Qc(Ce.jc(20,15,n.vendorNetAmount)),Ce.Cb(3),Ce.Qc(Ce.jc(23,17,n.vendorTaxAmount)),Ce.Cb(3),Ce.Qc(n.billingCurrencyCode),Ce.Cb(2),Ce.Qc(Ce.jc(28,19,n.productAmount)),Ce.Cb(3),Ce.Qc(Ce.jc(31,21,n.discountAmount)),Ce.Cb(3),Ce.Qc(Ce.jc(34,23,n.amountSum))}}function _t(e,t){if(1&e&&(Ce.Ub(0),Ce.Nc(1,Dt,38,25,"tr",6),Ce.Tb()),2&e){var o=Ce.hc();Ce.Cb(1),Ce.pc("ngForOf",o.roomTypes)}}function At(e,t){1&e&&(Ce.Wb(0,"tr"),Ce.Wb(1,"td",19),Ce.Pc(2,"No records available."),Ce.Vb(),Ce.Vb())}var xt,Ht=((xt=function(){function e(){_classCallCheck(this,e),this.selectRoomEvent=new Ce.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"convertUnderbar",value:function(e){return e.replace("_"," ").trim()}},{key:"convertPlanCode",value:function(e){return e.ratePlanCode,e.promotionType&&"None"!==e.promotionType?e.ratePlanCode.split("^")[0]:e.ratePlanCode.split("|")[0]}}]),e}()).\u0275fac=function(e){return new(e||xt)},xt.\u0275cmp=Ce.Kb({type:xt,selectors:[["app-ho-room-list-grid"]],hostAttrs:[1,"page-item"],inputs:{roomTypes:"roomTypes",loading:"loading"},outputs:{selectRoomEvent:"selectRoomEvent"},decls:39,vars:2,consts:[[1,"table","table-bordered","table-responsive","table-pattern-even","table-fixed",2,"max-height","700px","overflow","auto"],["width","8%"],["width","100px"],["scope","col",1,"align-c"],[4,"ngIf","ngIfElse"],["emptyTpl",""],[4,"ngFor","ngForOf"],[1,"room-option"],[4,"ngIf"],[1,"room-name"],["class","plan-info",4,"ngIf"],[1,"fas","fa-utensils","mr5"],[1,"align-c"],[1,"align-r"],[1,"btn","btn-booking","sm",3,"click"],[1,"label","square","type1",2,"background","green"],[1,"label","square","type1"],[1,"plan-info"],[1,"fas","fa-wifi","mr5"],["colspan","10",1,"align-c",2,"font-size","13px"]],template:function(e,t){if(1&e&&(Ce.Wb(0,"div",0),Ce.Wb(1,"table"),Ce.Wb(2,"caption"),Ce.Pc(3," \ud638\ud154 \ub8f8\ub9ac\uc2a4\ud2b8 "),Ce.Vb(),Ce.Wb(4,"colgroup"),Ce.Rb(5,"col"),Ce.Rb(6,"col",1),Ce.Rb(7,"col",1),Ce.Rb(8,"col",1),Ce.Rb(9,"col",1),Ce.Rb(10,"col",1),Ce.Rb(11,"col",1),Ce.Rb(12,"col",1),Ce.Rb(13,"col",1),Ce.Rb(14,"col",2),Ce.Vb(),Ce.Wb(15,"thead"),Ce.Wb(16,"tr"),Ce.Rb(17,"th",3),Ce.Wb(18,"th",3),Ce.Pc(19,"Vendor"),Ce.Vb(),Ce.Wb(20,"th",3),Ce.Pc(21,"V.Curr"),Ce.Vb(),Ce.Wb(22,"th",3),Ce.Pc(23,"V.Net"),Ce.Vb(),Ce.Wb(24,"th",3),Ce.Pc(25,"V.Tax"),Ce.Vb(),Ce.Wb(26,"th",3),Ce.Pc(27,"B.Currency"),Ce.Vb(),Ce.Wb(28,"th",3),Ce.Pc(29,"B.Product Amount"),Ce.Vb(),Ce.Wb(30,"th",3),Ce.Pc(31,"B.Promo Amount"),Ce.Vb(),Ce.Wb(32,"th",3),Ce.Pc(33,"B.Sum Amount"),Ce.Vb(),Ce.Rb(34,"th",3),Ce.Vb(),Ce.Vb(),Ce.Wb(35,"tbody"),Ce.Nc(36,_t,2,1,"ng-container",4),Ce.Nc(37,At,3,0,"ng-template",null,5,Ce.Oc),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e){var o=Ce.Ec(38);Ce.Cb(36),Ce.pc("ngIf",(null==t.roomTypes?null:t.roomTypes.length)>0)("ngIfElse",o)}},directives:[c.o,c.n],pipes:[c.f],encapsulation:2,changeDetection:0}),xt);function Bt(e,t){if(1&e&&(Ce.Ub(0),Ce.Rb(1,"dt"),Ce.Wb(2,"dd"),Ce.Pc(3),Ce.Vb(),Ce.Tb()),2&e){var o=t.$implicit;Ce.Cb(3),Ce.Qc(o.nameLn||o.nameEn)}}var $t,wt,Yt=((wt=function(){function e(t){_classCallCheck(this,e),this.alertService=t,this.latitude=37.5723309,this.longitude=127.0142533,this.zoom=14}return _createClass(e,[{key:"hotelInfo",get:function(){return this._hotelInfo},set:function(e){this._hotelInfo=e,this._initState(e)}},{key:"attractions",get:function(){var e,t,o=(null===(t=null===(e=this.hotelInfo)||void 0===e?void 0:e.poi)||void 0===t?void 0:t.attractions)||[];return W.sortBy(o,[function(e){return e.distance}]).filter((function(e,t){return t<5}))}},{key:"ngOnInit",value:function(){}},{key:"ngAfterContentInit",value:function(){}},{key:"_initState",value:function(e){(null==e?void 0:e.latitude)&&(null==e?void 0:e.longitude)&&(this.latitude=null==e?void 0:e.latitude,this.longitude=null==e?void 0:e.longitude)}}]),e}()).\u0275fac=function(e){return new(e||wt)(Ce.Qb(ve.a))},wt.\u0275cmp=Ce.Kb({type:wt,selectors:[["app-ho-room-list-hotel-info"]],hostAttrs:[1,"page-item"],inputs:{hotelInfo:"hotelInfo"},decls:28,vars:16,consts:[[1,"hotel-information-box","info"],[1,"google-map"],[2,"width","100%","height","100%",3,"latitude","longitude","zoom","disableDefaultUI"],[3,"latitude","longitude"],[1,"information"],[1,"type2"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(Ce.Wb(0,"div",0),Ce.Wb(1,"div",1),Ce.Wb(2,"agm-map",2),Ce.Rb(3,"agm-marker",3),Ce.Vb(),Ce.Vb(),Ce.Wb(4,"div",4),Ce.Wb(5,"dl",5),Ce.Wb(6,"dt"),Ce.Pc(7,"Check In / Out"),Ce.Vb(),Ce.Wb(8,"dd"),Ce.Pc(9),Ce.Vb(),Ce.Wb(10,"dt"),Ce.Pc(11,"Address"),Ce.Vb(),Ce.Wb(12,"dd"),Ce.Pc(13),Ce.Vb(),Ce.Wb(14,"dt"),Ce.Pc(15,"Phone No."),Ce.Vb(),Ce.Wb(16,"dd"),Ce.Pc(17),Ce.Vb(),Ce.Wb(18,"dt"),Ce.Pc(19,"Fax"),Ce.Vb(),Ce.Wb(20,"dd"),Ce.Pc(21),Ce.Vb(),Ce.Wb(22,"dt"),Ce.Pc(23,"Neighborhood"),Ce.Vb(),Ce.Wb(24,"dd"),Ce.Pc(25),Ce.Vb(),Ce.Nc(26,Bt,4,1,"ng-container",6),Ce.ic(27,"slice"),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e){var o=null;Ce.Cb(2),Ce.pc("latitude",t.latitude)("longitude",t.longitude)("zoom",t.zoom)("disableDefaultUI",!1),Ce.Cb(1),Ce.pc("latitude",t.latitude)("longitude",t.longitude),Ce.Cb(6),Ce.Sc("",null==t.hotelInfo?null:t.hotelInfo.checkInTime," / ",null==t.hotelInfo?null:t.hotelInfo.checkOutTime,""),Ce.Cb(4),Ce.Qc(null==t.hotelInfo?null:t.hotelInfo.addressLn),Ce.Cb(4),Ce.Qc(null==t.hotelInfo?null:t.hotelInfo.phoneNo),Ce.Cb(4),Ce.Qc(null==t.hotelInfo?null:t.hotelInfo.faxNo),Ce.Cb(4),Ce.Qc((null==t.attractions||null==(o=t.attractions.first())?null:o.nameLn)||(null==t.attractions||null==(o=t.attractions.first())?null:o.nameEn)),Ce.Cb(1),Ce.pc("ngForOf",Ce.kc(27,13,t.attractions,1))}},directives:[d.b,d.c,c.n],pipes:[c.w],encapsulation:2,changeDetection:0}),wt),Et=(($t=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||$t)},$t.\u0275cmp=Ce.Kb({type:$t,selectors:[["app-ho-room-list-description"]],hostAttrs:[1,"page-item"],inputs:{hotelInfo:"hotelInfo"},decls:20,vars:4,consts:[[1,"page-item-header"],[1,"title"],[1,"hotel-information-box","md"],[1,"type1"],[3,"innerHTML"]],template:function(e,t){1&e&&(Ce.Wb(0,"div",0),Ce.Wb(1,"p",1),Ce.Pc(2,"Description"),Ce.Vb(),Ce.Vb(),Ce.Wb(3,"div",2),Ce.Wb(4,"dl",3),Ce.Wb(5,"dt"),Ce.Pc(6,"Intro"),Ce.Vb(),Ce.Rb(7,"dd",4),Ce.Vb(),Ce.Wb(8,"dl",3),Ce.Wb(9,"dt"),Ce.Pc(10,"Room Facility"),Ce.Vb(),Ce.Rb(11,"dd",4),Ce.Vb(),Ce.Wb(12,"dl",3),Ce.Wb(13,"dt"),Ce.Pc(14,"Hotel Facility"),Ce.Vb(),Ce.Rb(15,"dd",4),Ce.Vb(),Ce.Wb(16,"dl",3),Ce.Wb(17,"dt"),Ce.Pc(18,"Caution"),Ce.Vb(),Ce.Rb(19,"dd",4),Ce.Vb(),Ce.Vb()),2&e&&(Ce.Cb(7),Ce.pc("innerHTML",null==t.hotelInfo?null:t.hotelInfo.hotelIntro,Ce.Gc),Ce.Cb(4),Ce.pc("innerHTML",null==t.hotelInfo?null:t.hotelInfo.roomFacility,Ce.Gc),Ce.Cb(4),Ce.pc("innerHTML",null==t.hotelInfo?null:t.hotelInfo.hotelFacility,Ce.Gc),Ce.Cb(4),Ce.pc("innerHTML",null==t.hotelInfo?null:t.hotelInfo.hotelCaution,Ce.Gc))},encapsulation:2,changeDetection:0}),$t),Mt=function(e){return{"background-image":e}};function qt(e,t){if(1&e&&(Ce.Ub(0),Ce.Rb(1,"li",4),Ce.Tb()),2&e){var o=t.$implicit;Ce.Cb(1),Ce.pc("ngStyle",Ce.uc(1,Mt,"url("+o.photoUrl+")"))}}var Qt,zt=((Qt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Qt)},Qt.\u0275cmp=Ce.Kb({type:Qt,selectors:[["app-ho-room-list-photo"]],hostAttrs:[1,"page-item"],inputs:{hotelInfo:"hotelInfo"},decls:6,vars:1,consts:[[1,"page-item-header"],[1,"title"],[1,"hotel-information-box","photo",2,"max-height","662px","overflow","auto"],[4,"ngFor","ngForOf"],[3,"ngStyle"]],template:function(e,t){1&e&&(Ce.Wb(0,"div",0),Ce.Wb(1,"p",1),Ce.Pc(2,"Photo"),Ce.Vb(),Ce.Vb(),Ce.Wb(3,"div",2),Ce.Wb(4,"ul"),Ce.Nc(5,qt,2,3,"ng-container",3),Ce.Vb(),Ce.Vb()),2&e&&(Ce.Cb(5),Ce.pc("ngForOf",null==t.hotelInfo?null:t.hotelInfo.photos))},directives:[c.n,c.p],encapsulation:2,changeDetection:0}),Qt),Ut=o("kDLv");function Kt(e,t){if(1&e&&(Ce.Ub(0),Ce.Wb(1,"li"),Ce.Pc(2),Ce.Vb(),Ce.Tb()),2&e){var o=t.$implicit;Ce.Cb(2),Ce.Qc(o)}}var Gt,Xt=((Gt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Gt)},Gt.\u0275cmp=Ce.Kb({type:Gt,selectors:[["app-ho-room-list-safty"]],hostAttrs:[1,"page-item"],inputs:{hotelInfo:"hotelInfo"},decls:7,vars:1,consts:[[1,"page-item"],[1,"page-item-header"],[1,"title"],[1,"hotel-information-box","md"],[1,"type1"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(Ce.Wb(0,"div",0),Ce.Wb(1,"div",1),Ce.Wb(2,"p",2),Ce.Pc(3,"Safty Information"),Ce.Vb(),Ce.Vb(),Ce.Wb(4,"div",3),Ce.Wb(5,"ul",4),Ce.Nc(6,Kt,3,1,"ng-container",5),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e&&(Ce.Cb(6),Ce.pc("ngForOf",null==t.hotelInfo?null:t.hotelInfo.safetyInfos))},directives:[c.n],encapsulation:2,changeDetection:0}),Gt);function Jt(e,t){if(1&e&&(Ce.Ub(0),Ce.Wb(1,"li"),Ce.Pc(2),Ce.Vb(),Ce.Tb()),2&e){var o=t.$implicit;Ce.Cb(2),Ce.Qc(o.facilityName)}}var Zt,eo,to=((Zt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Zt)},Zt.\u0275cmp=Ce.Kb({type:Zt,selectors:[["app-ho-room-list-facilities"]],hostAttrs:[1,"page-item"],inputs:{hotelInfo:"hotelInfo"},decls:6,vars:1,consts:[[1,"page-item-header"],[1,"title"],[1,"hotel-information-box","md"],[1,"type2"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(Ce.Wb(0,"div",0),Ce.Wb(1,"p",1),Ce.Pc(2,"Facility & Service"),Ce.Vb(),Ce.Vb(),Ce.Wb(3,"div",2),Ce.Wb(4,"ul",3),Ce.Nc(5,Jt,3,1,"ng-container",4),Ce.Vb(),Ce.Vb()),2&e&&(Ce.Cb(5),Ce.pc("ngForOf",null==t.hotelInfo?null:t.hotelInfo.facilities))},directives:[c.n],encapsulation:2,changeDetection:0}),Zt),oo=o("gbCm"),no=function(e){return{userTypeCodeList:e}},io=function(){return["name","userNo","gender","userId"]},ro=((eo=function(){function e(t,o,n){_classCallCheck(this,e),this.dataService=t,this.alertService=o,this.cd=n,this._$unsubscribe=new Ne.a,this.putForm=this.dataService.generateBookerForm(),this.putFormData=this.dataService.initBookerFormData()}return _createClass(e,[{key:"bookerInfo",get:function(){return this._bookerInfo},set:function(e){this._bookerInfo=e,W.isNil(e)||(this.putFormData={userNo:e.userNo,compCode:e.corporateCompCode||this.bookerCompCode,name:e.name,email:e.emailAddress,countryPhoneCode:e.countryPhoneCode,mobileNo:e.mobileNo},this.putForm.get("userNo").disable(),this.userIdInput="".concat(e.name,"(").concat(e.userNo,"), ").concat(e.gender,", ").concat(e.emailAddress))}},{key:"stationTypeCode",get:function(){return this._stationTypeCode},set:function(e){this.userTypeCodeList="STN02"===e?["U03"]:["U04"]}},{key:"ngOnDestroy",value:function(){this._$unsubscribe.next(),this._$unsubscribe.complete()}},{key:"onSelectUser",value:function(e){var t=e.name,o=e.countryPhoneCode,n=e.mobileNo,i=e.emailAddress;this.putForm.get("name").setValue(t||null),this.putForm.get("mobileNo").setValue(n||null),this.putForm.get("countryPhoneCode").setValue(o||null),this.putForm.get("email").setValue(i||null)}},{key:"onClearUser",value:function(){this.putForm.get("name").setValue(null)}},{key:"onSubmit",value:function(){return this.putForm.invalid?(this._checkValid=!0,this.cd.markForCheck(),{booker:null}):(this._checkValid=!1,{booker:this.setPutCondition()})}},{key:"checkIsInvalid",value:function(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}},{key:"setPutCondition",value:function(){var e=this.dataService.initBookerFormCondition(),t=Object.keys(e),o=this.putForm.getRawValue(),n=o.mobileNo.replace(/[^\d]/g,""),i=Object.assign({},W.pick(o,t),{mobileNo:n});return i.compCode=this.bookerCompCode,W.omitBy(i,W.isNil)}}]),e}()).\u0275fac=function(e){return new(e||eo)(Ce.Qb(Pe),Ce.Qb(ve.a),Ce.Qb(Ce.h))},eo.\u0275cmp=Ce.Kb({type:eo,selectors:[["app-ho-room-list-booker"]],hostAttrs:[1,"page-item"],inputs:{bookerCompName:"bookerCompName",bookerCompCode:"bookerCompCode",bookerInfo:"bookerInfo",stationTypeCode:"stationTypeCode"},decls:43,vars:15,consts:[[3,"formGroup","connectForm"],[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"section-contents-box-body"],[1,"booking-option-area","type2"],[1,"auto-complete"],["formControlName","userNo","apiUrl","admin/common/client","dataKey","userNo","inputFieldFormat","{0}({1})&, {2}&, {3}&","placeholder","Name or ID",3,"inputFieldValue","isInvalid","apiSearchTerm","apiCondition","inputFieldFormatKeyList","onSelect","onClear"],[1,"input"],["formControlName","name","placeholder","Name",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","countryPhoneCode","placeholder","e.g. 82","inputFormat","numberOnly",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","mobileNo","placeholder","Number only","inputFormat","numberOnly",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","email",1,"d-inline-flex","flex-fill",3,"isInvalid"]],template:function(e,t){1&e&&(Ce.Wb(0,"form",0),Ce.Wb(1,"div",1),Ce.Wb(2,"div",2),Ce.Wb(3,"strong"),Ce.Pc(4,"Booker"),Ce.Vb(),Ce.Vb(),Ce.Wb(5,"div",3),Ce.Wb(6,"div",4),Ce.Wb(7,"dl"),Ce.Wb(8,"dt"),Ce.Wb(9,"sup"),Ce.Pc(10,"Booker ID"),Ce.Vb(),Ce.Vb(),Ce.Wb(11,"dd"),Ce.Wb(12,"div",5),Ce.Wb(13,"app-auto-complete",6),Ce.fc("onSelect",(function(e){return t.onSelectUser(e)}))("onClear",(function(){return t.onClearUser()})),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(14,"dl"),Ce.Wb(15,"dt"),Ce.Wb(16,"sup"),Ce.Pc(17,"Name"),Ce.Vb(),Ce.Vb(),Ce.Wb(18,"dd"),Ce.Wb(19,"div",7),Ce.Rb(20,"app-input-text",8),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(21,"div",4),Ce.Wb(22,"dl"),Ce.Wb(23,"dt"),Ce.Wb(24,"sup"),Ce.Pc(25,"Country Phone Number"),Ce.Vb(),Ce.Vb(),Ce.Wb(26,"dd"),Ce.Wb(27,"div",7),Ce.Rb(28,"app-input-text",9),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(29,"dl"),Ce.Wb(30,"dt"),Ce.Wb(31,"sup"),Ce.Pc(32,"Mobile No"),Ce.Vb(),Ce.Vb(),Ce.Wb(33,"dd"),Ce.Wb(34,"div",7),Ce.Rb(35,"app-input-text",10),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(36,"dl"),Ce.Wb(37,"dt"),Ce.Wb(38,"sup"),Ce.Pc(39,"Email"),Ce.Vb(),Ce.Vb(),Ce.Wb(40,"dd"),Ce.Wb(41,"div",7),Ce.Rb(42,"app-input-text",11),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e&&(Ce.pc("formGroup",t.putForm)("connectForm",t.putFormData),Ce.Cb(13),Ce.pc("inputFieldValue",t.userIdInput)("isInvalid",t.checkIsInvalid("userNo"))("apiSearchTerm","name")("apiCondition",Ce.uc(12,no,t.userTypeCodeList))("inputFieldFormatKeyList",Ce.tc(14,io))("isInvalid",t.checkIsInvalid("userNo")),Ce.Cb(7),Ce.pc("isInvalid",t.checkIsInvalid("name")),Ce.Cb(8),Ce.pc("isInvalid",t.checkIsInvalid("countryPhoneCode")),Ce.Cb(7),Ce.pc("isInvalid",t.checkIsInvalid("mobileNo")),Ce.Cb(7),Ce.pc("isInvalid",t.checkIsInvalid("email")))},directives:[s.B,s.s,s.k,Ct.a,ft.a,s.r,s.i,oo.a],encapsulation:2,changeDetection:0}),eo);function ao(e,t){if(1&e&&(Ce.Wb(0,"span"),Ce.Pc(1),Ce.Vb()),2&e){var o=Ce.hc();Ce.Cb(1),Ce.Rc("[",null==o.roomInfo?null:o.roomInfo.roomPlanCode,"]")}}function co(e,t){if(1&e&&(Ce.Wb(0,"span"),Ce.Pc(1),Ce.Vb()),2&e){var o=Ce.hc();Ce.Cb(1),Ce.Rc("[",null==o.roomInfo?null:o.roomInfo.vendorPromotionSeq,"]")}}var so,lo=((so=function(){function e(t){_classCallCheck(this,e),this.cd=t}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.searchFormData,t=e.checkInDate,o=e.checkOutDate;this.checkInDate=We(t).format("YYYY-MM-DD(ddd)"),this.checkOutDate=We(o).format("YYYY-MM-DD(ddd)");var n=We(o).diff(We(t),"days");this.nightCount="".concat(n,"\ubc15");var i=this.roomCondition.cancelDeadline,r=i.clientCancelDeadline,a=i.vendorCancelDeadline,c=i.refundableYn;this.clientCancelDeadline=c?We(r).format("YYYY-MM-DD(ddd) HH:mm"):"Non-Refundable",this.vendorCancelDeadline=c?We(a).format("YYYY-MM-DD(ddd) HH:mm"):"Non-Refundable";var s=this.hotelInfo,l=s.cityName,u=s.hotelNameLn,d=s.hotelNameEn,b=s.hotelCode;this.cityName=l,this.hotelName=u||d,this.hotelCode=b;var p=this.roomInfo,m=p.freeBreakfastYn,h=p.freeWifiYn,f=p.roomTypeName,C=p.vendorCompCode,v=p.vendorCompName;this.freeBreakfastYn=!0===m,this.freeWifiYn=!0===h,this.roomTypeName=f,this.vendorCompName=v||C.toString(),this.cancelPolicyDescription=this.roomCondition.cancelPolicyDescription||null,this.checkInInstructions=this.roomCondition.checkInInstructions||null;var g=this.searchFormData.rooms;this.roomCount=g.length,this.guestCount=W.sum(g.map((function(e){return e.adultCount+e.childCount})))}}]),e}()).\u0275fac=function(e){return new(e||so)(Ce.Qb(Ce.h))},so.\u0275cmp=Ce.Kb({type:so,selectors:[["app-ho-room-list-condition"]],hostAttrs:[1,"page-item"],inputs:{searchFormData:"searchFormData",hotelInfo:"hotelInfo",roomInfo:"roomInfo",roomCondition:"roomCondition"},decls:73,vars:18,consts:[[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"section-contents-box-body"],[1,"table","table-bordered"],["width","12%"],["width","38%"],["scope","row",1,"th-bg"],[4,"ngIf"],["colspan","3"],["colspan","3",1,"color-red"]],template:function(e,t){1&e&&(Ce.Wb(0,"div",0),Ce.Wb(1,"div",1),Ce.Wb(2,"strong"),Ce.Pc(3,"Booking Detail"),Ce.Vb(),Ce.Vb(),Ce.Wb(4,"div",2),Ce.Wb(5,"div",3),Ce.Wb(6,"table"),Ce.Wb(7,"caption"),Ce.Pc(8,"Booking Detail"),Ce.Vb(),Ce.Wb(9,"colgroup"),Ce.Rb(10,"col",4),Ce.Rb(11,"col",5),Ce.Rb(12,"col",4),Ce.Rb(13,"col",5),Ce.Vb(),Ce.Wb(14,"tbody"),Ce.Wb(15,"tr"),Ce.Wb(16,"th",6),Ce.Pc(17,"Check in / Out Date"),Ce.Vb(),Ce.Wb(18,"td"),Ce.Pc(19),Ce.Vb(),Ce.Wb(20,"th",6),Ce.Pc(21,"Vendor Name"),Ce.Vb(),Ce.Wb(22,"td"),Ce.Pc(23),Ce.Vb(),Ce.Vb(),Ce.Wb(24,"tr"),Ce.Wb(25,"th",6),Ce.Pc(26,"Region Name"),Ce.Vb(),Ce.Wb(27,"td"),Ce.Pc(28),Ce.Vb(),Ce.Wb(29,"th",6),Ce.Pc(30,"Plan Name"),Ce.Vb(),Ce.Wb(31,"td"),Ce.Nc(32,ao,2,1,"span",7),Ce.Pc(33),Ce.Vb(),Ce.Vb(),Ce.Wb(34,"tr"),Ce.Wb(35,"th",6),Ce.Pc(36,"Hotel Name"),Ce.Vb(),Ce.Wb(37,"td"),Ce.Pc(38),Ce.Vb(),Ce.Wb(39,"th",6),Ce.Pc(40,"Vendor Promotion Name"),Ce.Vb(),Ce.Wb(41,"td"),Ce.Nc(42,co,2,1,"span",7),Ce.Pc(43),Ce.Vb(),Ce.Vb(),Ce.Wb(44,"tr"),Ce.Wb(45,"th",6),Ce.Pc(46,"Rooms / Travelers"),Ce.Vb(),Ce.Wb(47,"td"),Ce.Pc(48),Ce.Vb(),Ce.Wb(49,"th",6),Ce.Pc(50,"Vendor Cancellation D/L"),Ce.Vb(),Ce.Wb(51,"td"),Ce.Pc(52),Ce.Vb(),Ce.Vb(),Ce.Wb(53,"tr"),Ce.Wb(54,"th",6),Ce.Pc(55,"Room Type"),Ce.Vb(),Ce.Wb(56,"td",8),Ce.Pc(57),Ce.Vb(),Ce.Vb(),Ce.Wb(58,"tr"),Ce.Wb(59,"th",6),Ce.Pc(60,"Meal Type"),Ce.Vb(),Ce.Wb(61,"td",8),Ce.Pc(62),Ce.Vb(),Ce.Vb(),Ce.Wb(63,"tr"),Ce.Wb(64,"th",6),Ce.Pc(65,"Free Breakfast"),Ce.Vb(),Ce.Wb(66,"td",8),Ce.Pc(67),Ce.Vb(),Ce.Vb(),Ce.Wb(68,"tr"),Ce.Wb(69,"th",6),Ce.Pc(70,"Client Cancellation D/L"),Ce.Vb(),Ce.Wb(71,"td",9),Ce.Pc(72),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e&&(Ce.Cb(19),Ce.Tc("",t.checkInDate," ~ ",t.checkOutDate," / ",t.nightCount,""),Ce.Cb(4),Ce.Qc(t.vendorCompName),Ce.Cb(5),Ce.Qc(null==t.hotelInfo?null:t.hotelInfo.regionName),Ce.Cb(4),Ce.pc("ngIf",null==t.roomInfo?null:t.roomInfo.roomPlanCode),Ce.Cb(1),Ce.Qc(null==t.roomInfo?null:t.roomInfo.roomPlanName),Ce.Cb(5),Ce.Sc("[",t.hotelCode,"]",t.hotelName,""),Ce.Cb(4),Ce.pc("ngIf",null==t.roomInfo?null:t.roomInfo.vendorPromotionSeq),Ce.Cb(1),Ce.Qc(null==t.roomInfo?null:t.roomInfo.vendorPromotionName),Ce.Cb(5),Ce.Sc("",t.roomCount," Rooms / ",t.guestCount," Travelers"),Ce.Cb(4),Ce.Qc(t.vendorCancelDeadline),Ce.Cb(5),Ce.Qc(t.roomTypeName),Ce.Cb(5),Ce.Qc(null==t.roomInfo?null:t.roomInfo.mealBasisName),Ce.Cb(5),Ce.Qc(null==t.roomInfo?null:t.roomInfo.freeBreakfastName),Ce.Cb(5),Ce.Qc(t.clientCancelDeadline))},directives:[c.o],encapsulation:2,changeDetection:0}),so);function uo(e,t){if(1&e&&(Ce.Ub(0),Ce.Wb(1,"div",5),Ce.Wb(2,"dl"),Ce.Wb(3,"dt"),Ce.Wb(4,"sup"),Ce.Pc(5,"Station"),Ce.Vb(),Ce.Vb(),Ce.Wb(6,"dd"),Ce.Wb(7,"div",6),Ce.Wb(8,"select",7),Ce.Wb(9,"option"),Ce.Pc(10),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(11,"dl"),Ce.Wb(12,"dt"),Ce.Wb(13,"sup"),Ce.Pc(14,"Domain"),Ce.Vb(),Ce.Vb(),Ce.Wb(15,"dd"),Ce.Wb(16,"div",6),Ce.Wb(17,"select",7),Ce.Wb(18,"option"),Ce.Pc(19),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(20,"dl"),Ce.Wb(21,"dt"),Ce.Wb(22,"sup"),Ce.Pc(23,"Nationality"),Ce.Vb(),Ce.Vb(),Ce.Wb(24,"dd"),Ce.Wb(25,"div",8),Ce.Wb(26,"div",9),Ce.Rb(27,"input",10),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Tb()),2&e){var o=Ce.hc();Ce.Cb(10),Ce.Qc(o.stationName),Ce.Cb(9),Ce.Qc(o.domainAddress),Ce.Cb(8),Ce.pc("value",o.countryCode)}}function bo(e,t){if(1&e&&(Ce.Wb(0,"div",5),Ce.Wb(1,"dl"),Ce.Wb(2,"dt"),Ce.Wb(3,"sup"),Ce.Pc(4,"Station"),Ce.Vb(),Ce.Vb(),Ce.Wb(5,"dd"),Ce.Wb(6,"div",6),Ce.Wb(7,"select",7),Ce.Wb(8,"option"),Ce.Pc(9),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(10,"dl"),Ce.Wb(11,"dt"),Ce.Wb(12,"sup"),Ce.Pc(13,"Seller"),Ce.Vb(),Ce.Vb(),Ce.Wb(14,"dd"),Ce.Wb(15,"div",8),Ce.Wb(16,"div",9),Ce.Rb(17,"input",10),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e){var o=Ce.hc();Ce.Cb(9),Ce.Qc(o.stationName),Ce.Cb(8),Ce.pc("value",o.sellerCode)}}var po,mo=((po=function(){function e(t){_classCallCheck(this,e),this.cd=t}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||po)(Ce.Qb(Ce.h))},po.\u0275cmp=Ce.Kb({type:po,selectors:[["app-ho-room-list-route"]],hostAttrs:[1,"page-item"],inputs:{stationName:"stationName",domainAddress:"domainAddress",countryCode:"countryCode",sellerCode:"sellerCode"},decls:8,vars:2,consts:[[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"section-contents-box-body"],[4,"ngIf","ngIfElse"],["B2B",""],[1,"booking-option-area","type1"],[1,"select-box"],["disabled",""],[1,"auto-complete"],[1,"input","search2"],["type","text","disabled","",3,"value"]],template:function(e,t){if(1&e&&(Ce.Wb(0,"div",0),Ce.Wb(1,"div",1),Ce.Wb(2,"strong"),Ce.Pc(3,"Booking Route"),Ce.Vb(),Ce.Vb(),Ce.Wb(4,"div",2),Ce.Nc(5,uo,28,3,"ng-container",3),Ce.Nc(6,bo,18,2,"ng-template",null,4,Ce.Oc),Ce.Vb(),Ce.Vb()),2&e){var o=Ce.Ec(7);Ce.Cb(5),Ce.pc("ngIf","B2C"===t.stationName)("ngIfElse",o)}},directives:[c.o,s.v,s.A],encapsulation:2,changeDetection:0}),po),ho=o("Onn4");function fo(e,t){if(1&e&&(Ce.Wb(0,"th",20),Ce.Pc(1),Ce.Vb()),2&e){var o=Ce.hc().$implicit,n=Ce.hc();Ce.Db("rowspan",n.getRowspanCount(o.value)),Ce.Cb(1),Ce.Rc("Room ",o.get("roomNo").value,"")}}function Co(e,t){if(1&e&&(Ce.Ub(0),Ce.Rb(1,"app-input-text",21),Ce.Tb()),2&e){var o=Ce.hc().index,n=Ce.hc();Ce.Cb(1),Ce.pc("isInvalid",n.checkBirthdayInvalid(o))}}var vo=function(e){return["travelers",e,"name"]},go=function(e){return["travelers",e,"lastName"]},yo=function(e){return["travelers",e,"firstName"]};function Oo(e,t){if(1&e&&(Ce.Wb(0,"tr",10),Ce.Nc(1,fo,2,2,"th",11),Ce.Wb(2,"td"),Ce.Wb(3,"div",12),Ce.Rb(4,"app-radio",13),Ce.Rb(5,"app-radio",14),Ce.Vb(),Ce.Vb(),Ce.Wb(6,"td"),Ce.Rb(7,"app-input-text",15),Ce.Vb(),Ce.Wb(8,"td"),Ce.Wb(9,"div",12),Ce.Rb(10,"app-input-text",16),Ce.Wb(11,"span",17),Ce.Pc(12,"/"),Ce.Vb(),Ce.Rb(13,"app-input-text",18),Ce.Vb(),Ce.Vb(),Ce.Wb(14,"td"),Ce.Nc(15,Co,2,1,"ng-container",19),Ce.Vb(),Ce.Vb()),2&e){var o,n=t.$implicit,i=t.index,r=Ce.hc(),a="CHD"===(null==(o=n.get("ageTypeCode"))?null:o.value);Ce.pc("formGroupName",i),Ce.Cb(1),Ce.pc("ngIf",r.getRowspanCount(n.value)>0),Ce.Cb(3),Ce.pc("name","gender"+i.toString()),Ce.Cb(1),Ce.pc("name","gender"+i.toString()),Ce.Cb(2),Ce.pc("isInvalid",r.checkIsInvalid(Ce.uc(8,vo,i))),Ce.Cb(3),Ce.pc("isInvalid",r.checkIsInvalid(Ce.uc(10,go,i))),Ce.Cb(3),Ce.pc("isInvalid",r.checkIsInvalid(Ce.uc(12,yo,i))),Ce.Cb(2),Ce.pc("ngIf",a)}}var ko,Io=((ko=function(){function e(t,o,n){_classCallCheck(this,e),this.dataService=t,this.alertService=o,this.cd=n,this.ageTypeObj={ADT:"\uc131\uc778",CHD:"\uc544\ub3d9"},this._$unsubscribe=new Ne.a,this.putForm=this.dataService.generateTravelerForm(),this._initSubscription()}return _createClass(e,[{key:"travelerList",get:function(){return this._travelerList},set:function(e){var t=this;this._travelerList=e,this.selectedTravelers={},W.isNil(e)||e.forEach((function(e){t.selectedTravelers[e.userNo]=e}))}},{key:"rooms",get:function(){return this._rooms},set:function(e){this._rooms=e,this._setPutFormArray(e),this._setPutFormData(e),this._initState()}},{key:"travelers",get:function(){var e;return null===(e=this.putForm)||void 0===e?void 0:e.get("travelers")}},{key:"ngOnDestroy",value:function(){this._$unsubscribe.next(),this._$unsubscribe.complete()}},{key:"onSubmit",value:function(){return this.putForm.invalid?(this._checkValid=!0,this.cd.markForCheck(),{travelers:null,roomObj:null}):(this._checkValid=!1,{travelers:this.setPutCondition(),roomObj:this.travelerIndexCollection})}},{key:"checkIsInvalid",value:function(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}},{key:"checkBirthdayInvalid",value:function(e){var t;return this._checkValid&&!0===(null===(t=this.travelers.at(e).errors)||void 0===t?void 0:t.birthdayInvalid)}},{key:"setPutCondition",value:function(){var e=this.dataService.initTravelerFormCondition(),t=Object.keys(e);return this.travelers.value.map((function(e){var o=null;"CHD"===e.ageTypeCode&&(o=We(e.birthday,"YYYYMMDD").format("YYYY-MM-DD"));var n=Object.assign({},W.pick(e,t),{birthday:o});return W.omitBy(n,W.isNil)}))}},{key:"getRowspanCount",value:function(e){var t,o=e.roomNo,n=e.travelerIndex;return(null===(t=this.travelerIndexCollection[o])||void 0===t?void 0:t.length)>0&&this.travelerIndexCollection[o][0]===n?this.travelerIndexCollection[o].length:null}},{key:"_setPutFormData",value:function(e){var t=this,o=this.dataService.initTravelerFormData(),n=[];this.travelerIndexCollection={};var i=0;e.forEach((function(e,r){for(var a=r+1,c=[],s=0;s<e.adultCount;s++)i++,c.push(i),n.push(Object.assign(Object.assign({},o),{roomNo:a,travelerIndex:i,ageTypeCode:"ADT"}));if(e.childCount>0)for(var l=0;l<e.childCount;l++){i++,c.push(i);var u=e.childAges[l];n.push(Object.assign(Object.assign({},o),{roomNo:a,travelerIndex:i,ageTypeCode:"CHD",childAge:u,checkInDate:t.checkInDate}))}t.travelerIndexCollection[a]=c})),this.putFormData={travelers:n}}},{key:"_setPutFormArray",value:function(e){var t=this;this.travelers.clear(),e.forEach((function(e,o){for(var n=0;n<e.adultCount;n++)t.travelers.push(t.dataService.generateTravelerFormItem());if(e.childCount>0)for(var i=0;i<e.childCount;i++)t.travelers.push(t.dataService.generateTravelerFormItem())}))}},{key:"_initState",value:function(){}},{key:"_initSubscription",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ko)(Ce.Qb(Pe),Ce.Qb(ve.a),Ce.Qb(Ce.h))},ko.\u0275cmp=Ce.Kb({type:ko,selectors:[["app-ho-room-list-traveler"]],hostAttrs:[1,"page-item"],inputs:{checkInDate:"checkInDate",travelerList:"travelerList",rooms:"rooms"},decls:30,vars:3,consts:[[1,"table","table-responsive",3,"formGroup","connectForm"],[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"section-contents-box-body"],[1,"table","table-bordered"],["width","10%"],["width","8%"],["scope","col",1,"align-c"],["formArrayName","travelers"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["scope","rowgroup","class","th-bg align-c",4,"ngIf"],[1,"form-group"],["formControlName","gender","value","M","label","M",3,"name"],["formControlName","gender","value","F","label","F",3,"name"],["formControlName","name","placeholder","Name(Local Language)",2,"min-width","140px",3,"isInvalid"],["formControlName","lastName","placeholder","Last name(EN)","inputFormat","uppserCaseEnOnly",2,"min-width","100px",3,"isInvalid"],[1,"dash"],["formControlName","firstName","placeholder","First name(EN)","inputFormat","uppserCaseEnOnly",2,"min-width","180px","flex","2 1",3,"isInvalid"],[4,"ngIf"],["scope","rowgroup",1,"th-bg","align-c"],["formControlName","birthday","placeholder","yyyy-mm-dd","inputFormat","numberOnly",2,"min-width","140px",3,"isInvalid"]],template:function(e,t){1&e&&(Ce.Wb(0,"form",0),Ce.Wb(1,"div",1),Ce.Wb(2,"div",2),Ce.Wb(3,"strong"),Ce.Pc(4,"Travelers"),Ce.Vb(),Ce.Vb(),Ce.Wb(5,"div",3),Ce.Wb(6,"div",4),Ce.Wb(7,"table"),Ce.Wb(8,"caption"),Ce.Pc(9,"Travelers"),Ce.Vb(),Ce.Wb(10,"colgroup"),Ce.Rb(11,"col",5),Ce.Rb(12,"col",6),Ce.Rb(13,"col"),Ce.Rb(14,"col"),Ce.Rb(15,"col",5),Ce.Vb(),Ce.Wb(16,"thead"),Ce.Wb(17,"tr"),Ce.Wb(18,"th",7),Ce.Pc(19,"Rooms"),Ce.Vb(),Ce.Wb(20,"th",7),Ce.Pc(21,"Gender"),Ce.Vb(),Ce.Wb(22,"th",7),Ce.Pc(23,"Name(Local Language)"),Ce.Vb(),Ce.Wb(24,"th",7),Ce.Pc(25,"Last Name / First Name(EN)"),Ce.Vb(),Ce.Wb(26,"th",7),Ce.Pc(27,"Child Birthday"),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(28,"tbody",8),Ce.Nc(29,Oo,16,14,"tr",9),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e&&(Ce.pc("formGroup",t.putForm)("connectForm",t.putFormData),Ce.Cb(29),Ce.pc("ngForOf",t.travelers.controls))},directives:[s.B,s.s,s.k,Ct.a,s.e,c.n,s.l,c.o,ho.a,s.r,s.i,oo.a],encapsulation:2,changeDetection:0}),ko);function Vo(e,t){if(1&e&&(Ce.Ub(0),Ce.Wb(1,"div",19),Ce.Rb(2,"input",20),Ce.Vb(),Ce.Tb()),2&e){var o=Ce.hc();Ce.Cb(2),Ce.pc("value",o.maskingCardNo)}}function jo(e,t){if(1&e&&(Ce.Ub(0),Ce.Rb(1,"app-input-text",21),Ce.Tb()),2&e){var o=Ce.hc();Ce.Cb(1),Ce.pc("isInvalid",o.checkIsInvalid("cardNo"))}}function Wo(e,t){if(1&e&&(Ce.Wb(0,"tr"),Ce.Wb(1,"th",8),Ce.Pc(2,"Installment"),Ce.Vb(),Ce.Wb(3,"td"),Ce.Rb(4,"app-selectbox",22),Ce.Vb(),Ce.Wb(5,"th",8),Ce.Pc(6,"Tax Payer No."),Ce.Vb(),Ce.Wb(7,"td"),Ce.Rb(8,"app-input-text",23),Ce.Vb(),Ce.Vb()),2&e){var o=Ce.hc();Ce.Cb(4),Ce.pc("options",o.cardQuotaMonthList)("useAllOptionYn",!1)("isInvalid",o.checkIsInvalid("cardQuotaMonth"))}}var So,Po,Lo=((Po=function(){function e(t,o,n){_classCallCheck(this,e),this.dataService=t,this.alertService=o,this.cd=n,this.formDisableCodeList=["CCP01","CCP02"],this._$unsubscribe=new Ne.a,this.cardQuotaMonthList=[],this.cardValidPeriodMonthList=[],this.cardValidPeriodYearList=[],this.putForm=this.dataService.generatePostpayForm()}return _createClass(e,[{key:"cardMasterList",get:function(){return this._cardMasterList},set:function(e){this._cardMasterList=e,this.cardList=this.isAmadeus?[{detailCode:"CA",detailCodeNameEn:"MasterCard"},{detailCode:"VI",detailCodeNameEn:"Visa"},{detailCode:"AX",detailCodeNameEn:"American Express"},{detailCode:"DC",detailCodeNameEn:"Diners Club"},{detailCode:"DS",detailCodeNameEn:"Discover Card"},{detailCode:"JC",detailCodeNameEn:"Japan Credit Bureau (JCB)"},{detailCode:"TP",detailCodeNameEn:"Universal Air Travel Plan (UATP)"},{detailCode:"UP",detailCodeNameEn:"China UnionPay"}]:e}},{key:"isPostPay",get:function(){return this._isPostPay},set:function(e){this._isPostPay=e,this.putForm=e?this.dataService.generatePostpayForm():this.dataService.generatePrepayForm(),this._initSubscription()}},{key:"cardTypeOptions",get:function(){return this._cardTypeOptions},set:function(e){this._cardTypeOptions=e,this.cardTypeList=this.cardTypeOptions,this.setCardTypeList()}},{key:"corporateCardOptions",get:function(){return this._corporateCardOptions},set:function(e){this._corporateCardOptions=e}},{key:"showTaxPayerNoYn",get:function(){var e=this.putForm&&this.putForm.get("cardHolderTypeCode").value;return e&&this.formDisableCodeList.indexOf(e)>-1}},{key:"maskingCardNo",get:function(){var e,t=null===(e=this.putForm)||void 0===e?void 0:e.get("cardHolderTypeCode").value;if(this.formDisableCodeList.indexOf(t)>-1){var o=this.putForm.get("cardNo").value.match(/.{1,4}/g);return o.map((function(e,t){return 0===t||t===o.length-1?e:"****"})).join("-")}return null}},{key:"ngOnInit",value:function(){this._initSelectboxOptions()}},{key:"ngAfterViewInit",value:function(){this.cd.markForCheck()}},{key:"ngOnDestroy",value:function(){this._$unsubscribe.next(),this._$unsubscribe.complete()}},{key:"onSubmit",value:function(){return this.putForm.invalid?(this._checkValid=!0,this.cd.markForCheck(),null):(this._checkValid=!1,this._convertFormToItem(this.putForm.getRawValue()),W.omitBy(this.putForm.getRawValue(),W.isNil))}},{key:"checkIsInvalid",value:function(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}},{key:"_convertFormToItem",value:function(e){var t=e.cardNo,o=e.cardHolderName,n=e.cardQuotaMonth,i=e.cardValidPeriodYear,r=e.cardValidPeriodMonth,a=e.cardHolderTypeCode,c=e.cardMasterCode,s=e.cardPassword,l=e.cardHolderBirthday,u=e.cardHolderTaxPayerNo,d=this.dataService.initPymentFormDataCondition();return{cards:[Object.assign({},W.pick({cardHolderName:o,cardMasterCode:c,cardHolderTypeCode:a,cardNo:t,cardHolderBirthday:l,cardValidPeriod:"".concat(r,"/").concat(i),cardPassword:s,cardQuotaMonth:n,cardHolderTaxPayerNo:u},Object.keys(d)))]}}},{key:"_initSubscription",value:function(){var e=this;this.putForm.get("cardHolderTypeCode").valueChanges.pipe(Object(Re.a)(this._$unsubscribe)).subscribe((function(t){var o=Object.keys(e.putForm.controls);if(e.formDisableCodeList.indexOf(t)>-1){var n=W.find(e.corporateCardOptions,(function(e){return e.cardUseTypeCode===t})),i=Object.assign({},n,{cardHolderName:n.cardHolderNameEn,cardQuotaMonth:"00"});o.filter((function(e){return"cardHolderTypeCode"!==e})).forEach((function(t){e.putForm.get(t).patchValue(i[t]),e.putForm.get(t).disable()}))}else o.filter((function(e){return"cardHolderTypeCode"!==e})).forEach((function(t){var o="cardQuotaMonth"===t?"00":null;e.putForm.get(t).patchValue(o),e.putForm.get(t).enable()}))}))}},{key:"_initSelectboxOptions",value:function(){this.cardQuotaMonthList.push({value:"00",label:"00"});for(var e=1;e<25;e++){var t=W.padStart(String(e),2,"0");this.cardQuotaMonthList.push({value:t,label:t})}for(var o=0;o<12;o++){var n=W.padStart(String(o+1),2,"0");this.cardValidPeriodMonthList.push({value:n,label:"".concat(o+1)})}for(var i=(new Date).getFullYear(),r=0;r<20;r++)this.cardValidPeriodYearList.push({value:String(i+r).slice(2,4),label:"".concat(i+r)})}},{key:"setCardTypeList",value:function(){if(this.cardTypeOptions&&this.corporateCardOptions){var e=W.uniq(this.corporateCardOptions.map((function(e){return e.cardUseTypeCode})).concat(["CCP03","CCP04"]));this.cardTypeList=this.cardTypeOptions.filter((function(t){return e.indexOf(t.detailCode)>-1}))}}}]),e}()).\u0275fac=function(e){return new(e||Po)(Ce.Qb(Pe),Ce.Qb(ve.a),Ce.Qb(Ce.h))},Po.\u0275cmp=Ce.Kb({type:Po,selectors:[["app-ho-room-list-payment"]],hostAttrs:[1,"page-item"],inputs:{isAmadeus:"isAmadeus",travelerList:"travelerList",roomInfo:"roomInfo",cardMasterList:"cardMasterList",isPostPay:"isPostPay",cardTypeOptions:"cardTypeOptions",corporateCardOptions:"corporateCardOptions"},decls:67,vars:23,consts:[[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"ml20"],[1,"section-contents-box-body"],[1,"table","table-bordered"],[1,"table","table-bordered","table-responsive",3,"formGroup","connectForm"],["width","10%"],["width","40%"],["scope","row",1,"th-bg"],[1,"color-red"],["formControlName","cardHolderName","inputFormat","uppserCaseEnOnly",3,"isInvalid"],["formControlName","cardMasterCode","dataKey","detailCode","displayKey","detailCodeNameEn",3,"options","useAllOptionName","isInvalid"],["formControlName","cardHolderTypeCode","dataKey","detailCode","displayKey","detailCodeNameEn",3,"options","useAllOptionName","isInvalid"],[4,"ngIf"],["formControlName","cardHolderBirthday","inputFormat","numberOnly","placeholder","yyyy-mm-dd(Private Card is mandatory)"],[1,"form-group"],["formControlName","cardValidPeriodMonth",3,"useAllOptionName","options","isInvalid"],["formControlName","cardValidPeriodYear",3,"useAllOptionName","options","isInvalid"],["type","password","formControlName","cardPassword","inputFormat","numberOnly",3,"isInvalid"],[1,"input"],["type","text","disabled","",3,"value"],["formControlName","cardNo","inputFormat","cardNo","placeholder","Numbers only",3,"isInvalid"],["formControlName","cardQuotaMonth",3,"options","useAllOptionYn","isInvalid"],["formControlName","cardHolderTaxPayerNo","inputFormat","numberOnly","placeholder","10 digits(Corporate Card is mandatory)"]],template:function(e,t){1&e&&(Ce.Wb(0,"div",0),Ce.Wb(1,"div",1),Ce.Wb(2,"strong"),Ce.Pc(3,"Credit Card"),Ce.Vb(),Ce.Wb(4,"span",2),Ce.Pc(5,"If this is Non refundable booking, payment would be processed at first."),Ce.Vb(),Ce.Vb(),Ce.Wb(6,"div",3),Ce.Wb(7,"div",4),Ce.Wb(8,"form",5),Ce.Wb(9,"table"),Ce.Wb(10,"caption"),Ce.Pc(11," Credit Card "),Ce.Vb(),Ce.Wb(12,"colgroup"),Ce.Rb(13,"col",6),Ce.Rb(14,"col",7),Ce.Rb(15,"col",6),Ce.Rb(16,"col"),Ce.Vb(),Ce.Wb(17,"tbody"),Ce.Wb(18,"tr"),Ce.Wb(19,"th",8),Ce.Wb(20,"sup"),Ce.Pc(21,"Payment Amounts"),Ce.Vb(),Ce.Vb(),Ce.Wb(22,"td",9),Ce.Wb(23,"span"),Ce.Pc(24),Ce.ic(25,"number"),Ce.Vb(),Ce.Vb(),Ce.Wb(26,"th",8),Ce.Wb(27,"sup"),Ce.Pc(28,"Card Holder"),Ce.Vb(),Ce.Vb(),Ce.Wb(29,"td"),Ce.Rb(30,"app-input-text",10),Ce.Vb(),Ce.Vb(),Ce.Wb(31,"tr"),Ce.Wb(32,"th",8),Ce.Wb(33,"sup"),Ce.Pc(34,"Card"),Ce.Vb(),Ce.Vb(),Ce.Wb(35,"td"),Ce.Rb(36,"app-selectbox",11),Ce.Vb(),Ce.Wb(37,"th",8),Ce.Wb(38,"sup"),Ce.Pc(39,"Card Holder Type"),Ce.Vb(),Ce.Vb(),Ce.Wb(40,"td"),Ce.Rb(41,"app-selectbox",12),Ce.Vb(),Ce.Vb(),Ce.Wb(42,"tr"),Ce.Wb(43,"th",8),Ce.Wb(44,"sup"),Ce.Pc(45,"Card Number"),Ce.Vb(),Ce.Vb(),Ce.Wb(46,"td"),Ce.Nc(47,Vo,3,1,"ng-container",13),Ce.Nc(48,jo,2,1,"ng-container",13),Ce.Vb(),Ce.Wb(49,"th",8),Ce.Pc(50,"Birthday"),Ce.Vb(),Ce.Wb(51,"td"),Ce.Rb(52,"app-input-text",14),Ce.Vb(),Ce.Vb(),Ce.Wb(53,"tr"),Ce.Wb(54,"th",8),Ce.Wb(55,"sup"),Ce.Pc(56,"Valid Thru"),Ce.Vb(),Ce.Vb(),Ce.Wb(57,"td"),Ce.Wb(58,"div",15),Ce.Rb(59,"app-selectbox",16),Ce.Rb(60,"app-selectbox",17),Ce.Vb(),Ce.Vb(),Ce.Wb(61,"th",8),Ce.Wb(62,"sup"),Ce.Pc(63,"CC PW(First 2 digit)"),Ce.Vb(),Ce.Vb(),Ce.Wb(64,"td"),Ce.Rb(65,"app-input-text",18),Ce.Vb(),Ce.Vb(),Ce.Nc(66,Wo,9,3,"tr",13),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e&&(Ce.Cb(8),Ce.pc("formGroup",t.putForm)("connectForm",t.putFormData),Ce.Cb(16),Ce.Sc("",null==t.roomInfo?null:t.roomInfo.billingCurrencyCode," ",Ce.jc(25,21,null==t.roomInfo?null:t.roomInfo.amountSum),""),Ce.Cb(6),Ce.pc("isInvalid",t.checkIsInvalid("cardHolderName")),Ce.Cb(6),Ce.pc("options",t.cardList)("useAllOptionName","Select")("isInvalid",t.checkIsInvalid("cardMasterCode")),Ce.Cb(5),Ce.pc("options",t.cardTypeList)("useAllOptionName","Select")("isInvalid",t.checkIsInvalid("cardHolderTypeCode")),Ce.Cb(6),Ce.pc("ngIf",t.maskingCardNo),Ce.Cb(1),Ce.pc("ngIf",!t.maskingCardNo),Ce.Cb(11),Ce.pc("useAllOptionName","Select")("options",t.cardValidPeriodMonthList)("isInvalid",t.checkIsInvalid("cardValidPeriodMonth")),Ce.Cb(1),Ce.pc("useAllOptionName","Select")("options",t.cardValidPeriodYearList)("isInvalid",t.checkIsInvalid("cardValidPeriodYear")),Ce.Cb(5),Ce.pc("isInvalid",t.checkIsInvalid("cardPassword")),Ce.Cb(1),Ce.pc("ngIf",!t.isPostPay))},directives:[s.B,s.s,s.k,Ct.a,oo.a,s.r,s.i,Ot.a,c.o],pipes:[c.f],encapsulation:2,changeDetection:0}),Po),No=((So=_createClass((function e(t){_classCallCheck(this,e),this.cd=t}))).\u0275fac=function(e){return new(e||So)(Ce.Qb(Ce.h))},So.\u0275cmp=Ce.Kb({type:So,selectors:[["app-ho-room-list-price"]],hostAttrs:[1,"page-item"],inputs:{roomInfo:"roomInfo"},decls:55,vars:17,consts:[[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"section-contents-box-body"],[1,"table","table-bordered"],["scope","col",1,"align-c"],[1,"align-r"]],template:function(e,t){1&e&&(Ce.Wb(0,"div",0),Ce.Wb(1,"div",1),Ce.Wb(2,"strong"),Ce.Pc(3,"Rate"),Ce.Vb(),Ce.Vb(),Ce.Wb(4,"div",2),Ce.Wb(5,"div",3),Ce.Wb(6,"table"),Ce.Wb(7,"caption"),Ce.Pc(8,"Rate"),Ce.Vb(),Ce.Wb(9,"colgroup"),Ce.Rb(10,"col"),Ce.Rb(11,"col"),Ce.Rb(12,"col"),Ce.Rb(13,"col"),Ce.Rb(14,"col"),Ce.Rb(15,"col"),Ce.Rb(16,"col"),Ce.Vb(),Ce.Wb(17,"thead"),Ce.Wb(18,"tr"),Ce.Wb(19,"th",4),Ce.Pc(20,"Vendor Net"),Ce.Vb(),Ce.Wb(21,"th",4),Ce.Pc(22,"Vendor Curr"),Ce.Vb(),Ce.Wb(23,"th",4),Ce.Pc(24,"Vendor Tax"),Ce.Vb(),Ce.Wb(25,"th",4),Ce.Pc(26,"Billing Curr"),Ce.Vb(),Ce.Wb(27,"th",4),Ce.Pc(28,"Billing Gross"),Ce.Vb(),Ce.Wb(29,"th",4),Ce.Pc(30,"Billing Discount"),Ce.Vb(),Ce.Wb(31,"th",4),Ce.Pc(32,"Billing Sum"),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(33,"tbody"),Ce.Wb(34,"tr"),Ce.Wb(35,"td",5),Ce.Pc(36),Ce.ic(37,"number"),Ce.Vb(),Ce.Wb(38,"td",5),Ce.Pc(39),Ce.Vb(),Ce.Wb(40,"td",5),Ce.Pc(41),Ce.ic(42,"number"),Ce.Vb(),Ce.Wb(43,"td",5),Ce.Pc(44),Ce.Vb(),Ce.Wb(45,"td",5),Ce.Pc(46),Ce.ic(47,"number"),Ce.Vb(),Ce.Wb(48,"td",5),Ce.Pc(49),Ce.ic(50,"number"),Ce.Vb(),Ce.Wb(51,"td",5),Ce.Wb(52,"strong"),Ce.Pc(53),Ce.ic(54,"number"),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e&&(Ce.Cb(36),Ce.Qc(Ce.jc(37,7,null==t.roomInfo?null:t.roomInfo.vendorNetAmount)||"-"),Ce.Cb(3),Ce.Qc(null==t.roomInfo?null:t.roomInfo.vendorCurrencyCode),Ce.Cb(2),Ce.Qc(Ce.jc(42,9,null==t.roomInfo?null:t.roomInfo.vendorTaxAmount)||"-"),Ce.Cb(3),Ce.Qc(null==t.roomInfo?null:t.roomInfo.billingCurrencyCode),Ce.Cb(2),Ce.Qc(Ce.jc(47,11,null==t.roomInfo?null:t.roomInfo.productAmount)||"-"),Ce.Cb(3),Ce.Qc(Ce.jc(50,13,null==t.roomInfo?null:t.roomInfo.discountAmount)||"-"),Ce.Cb(4),Ce.Qc(Ce.jc(54,15,null==t.roomInfo?null:t.roomInfo.amountSum)||"-"))},pipes:[c.f],encapsulation:2,changeDetection:0}),So),Ro=["selectTime"];function Fo(e,t){if(1&e&&(Ce.Wb(0,"option",15),Ce.Pc(1),Ce.Vb()),2&e){var o=t.$implicit;Ce.pc("ngValue",o),Ce.Cb(1),Ce.Rc(" ",o.detailCodeNameEn," ")}}var To,Do,_o=((Do=function(){function e(t,o){_classCallCheck(this,e),this.cd=t,this.renderer=o,this.arrivalTime="",this.isLateCheckIn=!1,this.isHighFloor=!1,this.isBabyCot=!1,this.isSmokingRoom=!1,this.isNotSmokingRoom=!1}return _createClass(e,[{key:"onSubmit",value:function(){if(this.isLateCheckIn&&""===this.arrivalTime)return this.renderer.addClass(this.selectTime.nativeElement,"valid-error"),{precodedRemarks:void 0};var e=[];return e.push(this.isSmokingRoom?{code:"BRQ02"}:{code:"BRQ01"}),this.isHighFloor&&e.push({code:"BRQ04"}),this.isBabyCot&&e.push({code:"BRQ06"}),this.isLateCheckIn&&e.push({code:"BRQ03",memoRequest:this.arrivalTime.detailCode}),W.isNil(this.specialRequest)||e.push({code:"BRQ99",memoRequest:this.specialRequest}),{precodedRemarks:e.length>0?e:void 0}}},{key:"onArrivalTimeChange",value:function(e){this.renderer.removeClass(this.selectTime.nativeElement,"valid-error")}},{key:"onSelectSmokingRoom",value:function(e){e?(this.isSmokingRoom=!0,this.isNotSmokingRoom=!1):(this.isNotSmokingRoom=!0,this.isSmokingRoom=!1)}},{key:"onSelectLateCheckIn",value:function(e){this.isLateCheckIn=e,this.renderer.removeClass(this.selectTime.nativeElement,"valid-error")}},{key:"onSelectHighFloor",value:function(e){this.isHighFloor=e}},{key:"onSelectBabyCot",value:function(e){this.isBabyCot=e}}]),e}()).\u0275fac=function(e){return new(e||Do)(Ce.Qb(Ce.h),Ce.Qb(Ce.E))},Do.\u0275cmp=Ce.Kb({type:Do,selectors:[["app-ho-room-list-request"]],viewQuery:function(e,t){var o;1&e&&Ce.Kc(Ro,!0),2&e&&Ce.Dc(o=Ce.gc())&&(t.selectTime=o.first)},hostAttrs:[1,"page-item"],inputs:{arrivalTimeOptions:"arrivalTimeOptions"},decls:43,vars:9,consts:[[1,"section-contents-box"],[1,"section-contents-box-header"],[1,"ml20"],[1,"section-contents-box-body"],[1,"request-option"],[1,"checkbox"],["type","checkbox",1,"checkbox-control-input",3,"checked","change"],[1,"checkbox-control-text"],[1,"select-box","inline",2,"width","50%"],["selectTime",""],[3,"disabled","ngModel","ngModelChange","change"],["value","","disabled","","selected",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,"textarea"],["cols","30","rows","2","placeholder","Client sepcial requests (in English)",3,"ngModel","ngModelChange"],[3,"ngValue"]],template:function(e,t){1&e&&(Ce.Wb(0,"div",0),Ce.Wb(1,"div",1),Ce.Wb(2,"strong"),Ce.Pc(3,"Special Request"),Ce.Vb(),Ce.Wb(4,"span",2),Ce.Pc(5,"Special Requests are not guaranteed."),Ce.Vb(),Ce.Vb(),Ce.Wb(6,"div",3),Ce.Wb(7,"ul",4),Ce.Wb(8,"li"),Ce.Wb(9,"label",5),Ce.Wb(10,"input",6),Ce.fc("change",(function(){return t.onSelectSmokingRoom(!1)})),Ce.Vb(),Ce.Wb(11,"span",7),Ce.Pc(12,"Non Smoking Room"),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(13,"li"),Ce.Wb(14,"label",5),Ce.Wb(15,"input",6),Ce.fc("change",(function(){return t.onSelectSmokingRoom(!0)})),Ce.Vb(),Ce.Wb(16,"span",7),Ce.Pc(17,"Smoking Room"),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(18,"li"),Ce.Wb(19,"label",5),Ce.Wb(20,"input",6),Ce.fc("change",(function(e){return t.onSelectHighFloor(e.target.checked)})),Ce.Vb(),Ce.Wb(21,"span",7),Ce.Pc(22,"High Floor"),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(23,"li"),Ce.Wb(24,"label",5),Ce.Wb(25,"input",6),Ce.fc("change",(function(e){return t.onSelectBabyCot(e.target.checked)})),Ce.Vb(),Ce.Wb(26,"span",7),Ce.Pc(27,"Baby Cot (The property may charge a fee for this request)"),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(28,"li"),Ce.Wb(29,"label",5),Ce.Wb(30,"input",6),Ce.fc("change",(function(e){return t.onSelectLateCheckIn(e.target.checked)})),Ce.Vb(),Ce.Wb(31,"span",7),Ce.Pc(32,"Late Check In"),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(33,"li"),Ce.Wb(34,"div",8,9),Ce.Wb(36,"select",10),Ce.fc("ngModelChange",(function(e){return t.arrivalTime=e}))("change",(function(e){return t.onArrivalTimeChange(e)})),Ce.Wb(37,"option",11),Ce.Pc(38,"Expected Check In Time"),Ce.Vb(),Ce.Nc(39,Fo,2,2,"option",12),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Wb(40,"li"),Ce.Wb(41,"div",13),Ce.Wb(42,"textarea",14),Ce.fc("ngModelChange",(function(e){return t.specialRequest=e})),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e&&(Ce.Cb(10),Ce.pc("checked",t.isNotSmokingRoom),Ce.Cb(5),Ce.pc("checked",t.isSmokingRoom),Ce.Cb(5),Ce.pc("checked",t.isHighFloor),Ce.Cb(5),Ce.pc("checked",t.isBabyCot),Ce.Cb(5),Ce.pc("checked",t.isLateCheckIn),Ce.Cb(6),Ce.pc("disabled",!t.isLateCheckIn)("ngModel",t.arrivalTime),Ce.Cb(3),Ce.pc("ngForOf",t.arrivalTimeOptions),Ce.Cb(3),Ce.pc("ngModel",t.specialRequest))},directives:[s.y,s.r,s.u,s.v,s.A,c.n,s.c],encapsulation:2,changeDetection:0}),Do),Ao=((To=function(){function e(t,o,n){_classCallCheck(this,e),this.store=t,this.alertService=o,this.decimalPipe=n,this.unsubscribe$=new Ne.a,this.bookerCompName="\uc624\ub9c8\uc774\ud638\ud154",this.stationList$=this.store.pipe(Object(u.u)(Ee)),this.bedTypeList$=this.store.pipe(Object(u.u)(qe)),this.policyList$=this.store.pipe(Object(u.u)(we)),this.arrivalTimeOptions$=this.store.pipe(Object(u.u)(Me))}return _createClass(e,[{key:"roomInfo",get:function(){return this._roomInfo},set:function(e){this._roomInfo=e,this.isPostPay="Prepay"!==e.payTypeCode,this.isAmadeus=900001===e.vendorCompCode}},{key:"ngAfterContentInit",value:function(){console.log(this.bookerInfo,"bookerInfo"),this._initSubscription()}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"clickSearchHandler",value:function(e){var t=e.searchFormData;this.store.dispatch(n.changeRoomSearchFormData({searchFormData:t}))}},{key:"clickResetHandler",value:function(){this.store.dispatch(n.changeRoomSearchFormData({searchFormData:{}}))}},{key:"onBooking",value:function(){var e=this,t=this.bookerFormEl.onSubmit().booker,o=this.travelerFormEl.onSubmit(),i=o.travelers,r=o.roomObj,a=this.requestFormEl.onSubmit().precodedRemarks;if(void 0!==a&&!W.isEmpty(t)&&!W.isEmpty(i)){var c=this._setHotelItem(r,a).hotelItems,s=this._setPolicyCondition(),l=Object.assign({bookingSourceTypeCode:"BSR01",deviceTypeCode:"PC",domainAddress:this.domainAddress,booker:t,hotelItems:c,travelers:i,policyMonitoring:void 0,corporateDraftCode:void 0},s);if("STN02"==this.stationTypeCode&&(l.booker.compCode=this.bookerCompCode),this.roomCondition.amountChangedYn){var u="Amount Change : ".concat(this.decimalPipe.transform(this.roomCondition.beforeAmountSum),"\u2192").concat(this.decimalPipe.transform(this.roomCondition.amountSum));this.alertService.alert({message:u,accept:function(){return e.store.dispatch(n.requestBookingAction({condition:l,transactionSetId:e.transactionSetId,stationTypeCode:e.stationTypeCode,country:e.countryCode,currency:e.currencyCode,language:e.languageCode||"KO"}))}})}else this.store.dispatch(n.requestBookingAction({condition:l,transactionSetId:this.transactionSetId,stationTypeCode:this.stationTypeCode,country:this.countryCode,currency:this.currencyCode,language:this.languageCode||"KO"}))}}},{key:"_setHotelItem",value:function(e,t){var o,n,i,r,a,c,s,l,u=[],d=(null===(o=this.roomInfo)||void 0===o?void 0:o.doubleBedYn)||void 0,b=We(this.roomCondition.cancelDeadline.clientCancelDeadline).format("YYYY-MM-DD HH:mm"),p=this.roomCondition.amountChangedYn?this.roomCondition:this.roomInfo,m=p.productAmount,h=p.taxAmount,f=p.amountSum;for(var C in e)if(Object.prototype.hasOwnProperty.call(e,C)){var v=W.parseInt(C);u.push({roomNo:v,travelerIndexes:e[C],doubleBedYn:d})}return{hotelItems:[{itemIndex:0,hotelCode:this.hotelInfo.hotelCode,checkInDate:this.searchFormData.checkInDate,checkOutDate:this.searchFormData.checkOutDate,roomTypeCode:this.roomInfo.roomTypeCode,roomTypeName:this.roomInfo.roomTypeName,productAmount:m,taxAmount:h,amountSum:f,taxIncludedYn:this.roomInfo.taxIncludedYn,refundableYn:(null===(i=null===(n=this.roomCondition)||void 0===n?void 0:n.cancelDeadline)||void 0===i?void 0:i.refundableYn)||void 0,clientCancelDeadline:b,rooms:u,freeWifiYn:this.roomInfo.freeWifiYn||!1,freeBreakfastYn:this.roomInfo.freeBreakfastYn,freeBreakfastName:this.roomInfo.freeBreakfastName,dynamicRateYn:!1,roomTypeCodedData:this.roomInfo.roomTypeCodedData,roomConditionCodedData:this.roomCondition.roomConditionCodedData,preCodedRemarks:t,originAmount:(null===(r=this.roomInfo)||void 0===r?void 0:r.originAmount)||void 0,discountAmount:(null===(a=this.roomInfo)||void 0===a?void 0:a.discountAmount)||void 0,specialCheckInInstructions:(null===(c=this.roomCondition)||void 0===c?void 0:c.specialCheckInInstructions)||void 0,cancelPolicyDescription:(null===(s=this.roomCondition)||void 0===s?void 0:s.cancelPolicyDescription)||void 0,checkInInstructions:(null===(l=this.roomCondition)||void 0===l?void 0:l.checkInInstructions)||void 0,inPolicyYn:void 0}]}}},{key:"_setPolicyCondition",value:function(){return{policyMasterSeq:void 0,regionGroupSeq:void 0,positionGroupSeq:void 0,corporateDeptCode:void 0}}},{key:"_initSubscription",value:function(){var e=this;this.stationList$.pipe(Object(Te.a)((function(e){return!W.isEmpty(e)})),Object(Re.a)(this.unsubscribe$)).subscribe((function(t){e.stationName=W.get(W.find(t,(function(t){return t.detailCode===e.stationTypeCode})),"detailCodeNameEn")})),this.policyList$.pipe(Object(Re.a)(this.unsubscribe$)).subscribe((function(t){e.policyInfo=null,(null==t?void 0:t.length)>0&&(e.policyInfo=t[0])}))}}]),e}()).\u0275fac=function(e){return new(e||To)(Ce.Qb(u.h),Ce.Qb(ve.a),Ce.Qb(c.f))},To.\u0275cmp=Ce.Kb({type:To,selectors:[["app-ho-room-list-form"]],viewQuery:function(e,t){var o;1&e&&(Ce.Xc(ro,!0),Ce.Xc(Io,!0),Ce.Xc(_o,!0)),2&e&&(Ce.Dc(o=Ce.gc())&&(t.bookerFormEl=o.first),Ce.Dc(o=Ce.gc())&&(t.travelerFormEl=o.first),Ce.Dc(o=Ce.gc())&&(t.requestFormEl=o.first))},inputs:{travelerList:"travelerList",hotelCode:"hotelCode",domainAddress:"domainAddress",countryCode:"countryCode",currencyCode:"currencyCode",regionCode:"regionCode",languageCode:"languageCode",stationTypeCode:"stationTypeCode",transactionSetId:"transactionSetId",searchFormData:"searchFormData",bookerCompCode:"bookerCompCode",hotelInfo:"hotelInfo",roomCondition:"roomCondition",roomInfo:"roomInfo"},features:[Ce.Bb([c.f])],decls:10,vars:19,consts:[[3,"stationName","domainAddress","countryCode","sellerCode"],[3,"stationTypeCode","bookerCompName","bookerCompCode","bookerInfo"],[3,"searchFormData","hotelInfo","roomInfo","roomCondition"],[3,"travelerList","checkInDate","rooms"],[3,"roomInfo"],[3,"arrivalTimeOptions"],[1,"button-area","align-r","mt10"],[1,"btn","btn-secondary","sm",3,"click"]],template:function(e,t){1&e&&(Ce.Rb(0,"app-ho-room-list-route",0),Ce.Rb(1,"app-ho-room-list-booker",1),Ce.Rb(2,"app-ho-room-list-condition",2),Ce.Rb(3,"app-ho-room-list-traveler",3),Ce.Rb(4,"app-ho-room-list-price",4),Ce.Rb(5,"app-ho-room-list-request",5),Ce.ic(6,"async"),Ce.Wb(7,"div",6),Ce.Wb(8,"a",7),Ce.fc("click",(function(){return t.onBooking()})),Ce.Pc(9,"Create"),Ce.Vb(),Ce.Vb()),2&e&&(Ce.pc("stationName",t.stationName)("domainAddress",t.domainAddress)("countryCode",t.countryCode)("sellerCode",t.bookerCompCode),Ce.Cb(1),Ce.pc("stationTypeCode",t.stationTypeCode)("bookerCompName",t.bookerCompName)("bookerCompCode",t.bookerCompCode)("bookerInfo",t.bookerInfo),Ce.Cb(1),Ce.pc("searchFormData",t.searchFormData)("hotelInfo",t.hotelInfo)("roomInfo",t.roomInfo)("roomCondition",t.roomCondition),Ce.Cb(1),Ce.pc("travelerList",t.travelerList)("checkInDate",t.searchFormData.checkInDate)("rooms",t.searchFormData.rooms),Ce.Cb(1),Ce.pc("roomInfo",t.roomInfo),Ce.Cb(1),Ce.pc("arrivalTimeOptions",Ce.jc(6,17,t.arrivalTimeOptions$)))},directives:[mo,ro,lo,Io,No,_o],pipes:[c.b],encapsulation:2,changeDetection:0}),To);function xo(e,t){if(1&e&&(Ce.Rb(0,"app-ho-room-list-form",11),Ce.ic(1,"async"),Ce.ic(2,"async"),Ce.ic(3,"async"),Ce.ic(4,"async"),Ce.ic(5,"async"),Ce.ic(6,"async"),Ce.ic(7,"async"),Ce.ic(8,"async"),Ce.ic(9,"async"),Ce.ic(10,"async"),Ce.ic(11,"async"),Ce.ic(12,"async"),Ce.ic(13,"async"),Ce.ic(14,"async"),Ce.ic(15,"async")),2&e){var o=Ce.hc();Ce.pc("travelerList",Ce.jc(1,15,o.travelerList$))("hotelCode",Ce.jc(2,17,o.hotelCode$))("domainAddress",Ce.jc(3,19,o.domainAddress$))("countryCode",Ce.jc(4,21,o.countryCode$))("regionCode",Ce.jc(5,23,o.regionCode$))("countryCode",Ce.jc(6,25,o.countryCode$))("currencyCode",Ce.jc(7,27,o.currencyCode$))("languageCode",Ce.jc(8,29,o.languageCode$))("stationTypeCode",Ce.jc(9,31,o.stationTypeCode$))("transactionSetId",Ce.jc(10,33,o.transactionSetId$))("searchFormData",Ce.jc(11,35,o.searchFormData$))("bookerCompCode",Ce.jc(12,37,o.bookerCompCode$))("hotelInfo",Ce.jc(13,39,o.hotelInfo$))("roomInfo",Ce.jc(14,41,o.selectedRoomInfo$))("roomCondition",Ce.jc(15,43,o.roomConditionInfo$))}}var Ho,Bo,$o,wo,Yo=((Ho=function(){function e(t,o,n,i,r,a){_classCallCheck(this,e),this.store=t,this._fileService=o,this.alertService=n,this._router=i,this._route=r,this.dataService=a,this.unsubscribe$=new Ne.a,this.travelerList$=t.pipe(Object(u.u)(Ye)),this.loading$=t.pipe(Object(u.u)(Ge)),this.searchFormData$=t.pipe(Object(u.u)(Xe)),this.hotelCode$=t.pipe(Object(u.u)(tt)),this.domainAddress$=t.pipe(Object(u.u)(ot)),this.countryCode$=t.pipe(Object(u.u)(nt)),this.currencyCode$=t.pipe(Object(u.u)(it)),this.languageCode$=t.pipe(Object(u.u)(rt)),this.stationTypeCode$=t.pipe(Object(u.u)(Ze)),this.bookerCompCode$=t.pipe(Object(u.u)(et)),this.transactionSetId$=t.pipe(Object(u.u)(Je)),this.hotelInfo$=t.pipe(Object(u.u)(ct)),this.roomList$=t.pipe(Object(u.u)(at)),this.selectedRoomInfo$=t.pipe(Object(u.u)(st)),this.roomConditionInfo$=t.pipe(Object(u.u)(lt)),this.roomConditionLoaded$=t.pipe(Object(u.u)(ut)),this.isOpenBookingForm$=t.pipe(Object(u.u)(dt)),this._initSubscription()}return _createClass(e,[{key:"ngOnInit",value:function(){this.store.dispatch(n.loadStationList()),this.store.dispatch(n.loadCardList()),this.store.dispatch(n.loadArrivalTimeList()),this.store.dispatch(n.loadBedTypeList()),this.store.dispatch(n.loadCardTypeOptions())}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(n.initComponentStateAction())}},{key:"resetTravelersHandler",value:function(e){var t=e.travelers;this.store.dispatch(n.loadCorporateStaffSuccess({dataList:t}))}},{key:"clickSearchHandler",value:function(e){var t=e.searchFormData;this.store.dispatch(n.changeRoomSearchFormData({searchFormData:t}))}},{key:"clickResetHandler",value:function(){this.store.dispatch(n.changeRoomSearchFormData({searchFormData:{}}))}},{key:"selectRoomHandler",value:function(e){this.store.dispatch(n.addSelectedRoomInfo({info:e}))}},{key:"openBookingFormHandler",value:function(){this.store.dispatch(n.openBookingFormPopup())}},{key:"closeBookingFormHandler",value:function(){this.store.dispatch(n.delSelectedRoomInfo()),this.store.dispatch(n.closeBookingFormPopup())}},{key:"_initSubscription",value:function(){var e=this;this.domainAddress$.pipe(Object(Re.a)(this.unsubscribe$)).subscribe((function(t){return e.domainAddress=t})),this.hotelCode$.pipe(Object(Re.a)(this.unsubscribe$)).subscribe((function(t){return e.hotelCode=t})),this.currencyCode$.pipe(Object(Re.a)(this.unsubscribe$)).subscribe((function(t){return e.currencyCode=t})),this.countryCode$.pipe(Object(Re.a)(this.unsubscribe$)).subscribe((function(t){return e.countryCode=t})),this.bookerCompCode$.pipe(Object(Re.a)(this.unsubscribe$)).subscribe((function(t){return e._bookerCompCode=t})),this.transactionSetId$.pipe(Object(Re.a)(this.unsubscribe$)).subscribe((function(t){return e._transactionSetId=t})),this.stationTypeCode$.pipe(Object(Re.a)(this.unsubscribe$)).subscribe((function(t){e._stationTypeCode=t})),this.searchFormData$.pipe(Object(Fe.a)(100),Object(Te.a)((function(e){return!W.isEmpty(e)})),Object(Re.a)(this.unsubscribe$)).subscribe((function(t){e._searchFormData=t;var o=e._transactionSetId,i=e._stationTypeCode,r=Number(e.hotelCode),a=e._bookerCompCode;e.store.dispatch(n.loadHotelInformation({condition:{hotelCode:r},transactionSetId:o,stationTypeCode:i,country:e.countryCode,currency:e.currencyCode})),e.store.dispatch(n.loadRoomList({condition:Object.assign(Object.assign({},t),{hotelCode:r,bookerCompCode:a,domainAddress:e.domainAddress}),transactionSetId:o,stationTypeCode:i,country:e.countryCode,currency:e.currencyCode}))})),this.selectedRoomInfo$.pipe(Object(Te.a)((function(e){return!W.isEmpty(e)}),Object(Re.a)(this.unsubscribe$))).subscribe((function(t){var o=e.dataService.initRoomConditionRq(),i=e._transactionSetId,r=e._stationTypeCode,a=Number(e.hotelCode),c=e._bookerCompCode,s=W.pick(Object.assign({},e._searchFormData,{hotelCode:a},t),Object.keys(o));"STN02"==r&&(s.bookerCompCode=c),e.store.dispatch(n.loadRoomCondition({condition:s,transactionSetId:i,stationTypeCode:r,country:e.countryCode,currency:e.currencyCode}))})),this.roomConditionLoaded$.pipe(Object(Te.a)((function(e){return!0===e})),Object(Re.a)(this.unsubscribe$)).subscribe((function(){e.openBookingFormHandler()}))}}]),e}()).\u0275fac=function(e){return new(e||Ho)(Ce.Qb(u.h),Ce.Qb(bt.a),Ce.Qb(ve.a),Ce.Qb(j.c),Ce.Qb(j.a),Ce.Qb(Pe))},Ho.\u0275cmp=Ce.Kb({type:Ho,selectors:[["app-ho-room-list"]],decls:26,vars:35,consts:[[3,"hotelInfo"],[3,"corporateCompCode","travelerList","searchCondition","resetTravelersEvent","clickSearchEvent","clickResetEvent"],["id","hotel-search-information"],[1,"page-item"],[3,"roomTypes","selectRoomEvent"],["header","Create Hotel Booking","modalContentClass","pd-all","modalSize","lg",3,"visible","modal","visibleChange"],[3,"travelerList","hotelCode","domainAddress","countryCode","regionCode","currencyCode","languageCode","stationTypeCode","transactionSetId","searchFormData","bookerCompCode","hotelInfo","roomInfo","roomCondition",4,"ngIf"],[1,"loading-mask","pos-fixed"],[1,"content-loading","align-items-center"],[1,"icon-loading","lg"],[1,"loading-title"],[3,"travelerList","hotelCode","domainAddress","countryCode","regionCode","currencyCode","languageCode","stationTypeCode","transactionSetId","searchFormData","bookerCompCode","hotelInfo","roomInfo","roomCondition"]],template:function(e,t){1&e&&(Ce.Rb(0,"app-ho-room-list-summary",0),Ce.ic(1,"async"),Ce.Wb(2,"app-ho-room-list-search",1),Ce.fc("resetTravelersEvent",(function(e){return t.resetTravelersHandler(e)}))("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),Ce.ic(3,"async"),Ce.ic(4,"async"),Ce.ic(5,"async"),Ce.Vb(),Ce.Wb(6,"div",2),Ce.Wb(7,"div",3),Ce.Wb(8,"app-ho-room-list-grid",4),Ce.fc("selectRoomEvent",(function(e){return t.selectRoomHandler(e)})),Ce.ic(9,"async"),Ce.Vb(),Ce.Vb(),Ce.Rb(10,"app-ho-room-list-hotel-info",0),Ce.ic(11,"async"),Ce.Rb(12,"app-ho-room-list-description",0),Ce.ic(13,"async"),Ce.Rb(14,"app-ho-room-list-photo",0),Ce.ic(15,"async"),Ce.Vb(),Ce.Wb(16,"app-dialog",5),Ce.fc("visibleChange",(function(){return t.closeBookingFormHandler()})),Ce.ic(17,"async"),Ce.Nc(18,xo,16,45,"app-ho-room-list-form",6),Ce.ic(19,"async"),Ce.Vb(),Ce.Wb(20,"div",7),Ce.ic(21,"async"),Ce.Wb(22,"div",8),Ce.Rb(23,"div",9),Ce.Wb(24,"div",10),Ce.Pc(25,"loading..."),Ce.Vb(),Ce.Vb(),Ce.Vb()),2&e&&(Ce.pc("hotelInfo",Ce.jc(1,13,t.hotelInfo$)),Ce.Cb(2),Ce.pc("corporateCompCode",Ce.jc(3,15,t.bookerCompCode$))("travelerList",Ce.jc(4,17,t.travelerList$))("searchCondition",Ce.jc(5,19,t.searchFormData$)),Ce.Cb(6),Ce.pc("roomTypes",Ce.jc(9,21,t.roomList$)),Ce.Cb(2),Ce.pc("hotelInfo",Ce.jc(11,23,t.hotelInfo$)),Ce.Cb(2),Ce.pc("hotelInfo",Ce.jc(13,25,t.hotelInfo$)),Ce.Cb(2),Ce.pc("hotelInfo",Ce.jc(15,27,t.hotelInfo$)),Ce.Cb(2),Ce.pc("visible",Ce.jc(17,29,t.isOpenBookingForm$))("modal",!0),Ce.Cb(2),Ce.pc("ngIf",Ce.jc(19,31,t.isOpenBookingForm$)),Ce.Cb(2),Ce.Gb("active",Ce.jc(21,33,t.loading$)))},directives:[ht,St,Ht,Yt,Et,zt,Ut.a,c.o,Ao],pipes:[c.b],encapsulation:2,changeDetection:0}),Ho),Eo=[{path:":domainAddress/:countryCode/:currencyCode/:languageCode/:stationTypeCode/:transactionSetId/:bookerCompCode/:hotelCode/:checkInDate/:checkOutDate/:rooms/:exclude3rdPartyYn",component:Yo,canActivate:[Le]}],Mo=((Bo=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=Ce.Ob({type:Bo}),Bo.\u0275inj=Ce.Nb({factory:function(e){return new(e||Bo)},imports:[[j.f.forChild(Eo)],j.f]}),Bo),qo=o("lJxs"),Qo=o("JIr8"),zo=o("bOdf"),Uo=o("zp1y"),Ko=o("vkgz"),Go=o("Xb6A"),Xo=(($o=function(){function e(t,o,i,r,a){var c=this;_classCallCheck(this,e),this.actions$=t,this.service=o,this._errorService=i,this.store=r,this.alertService=a,this.loadPolicyDetail$=Object(l.c)((function(){return c.actions$.pipe(Object(l.d)(n.loadPolicyActions),Object(Oe.a)((function(e){var t=e.condition;return c.service.loadPolicyDetail(t).pipe(Object(qo.a)((function(e){return n.loadPolicySuccess({dataList:e})})),Object(Qo.a)((function(e){return c._catchErr(e,"\ucd9c\uc7a5\uaddc\uc815 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]})))})))})),this.loadStationList$=Object(l.c)((function(){return c.actions$.pipe(Object(l.d)(n.loadStationList),Object(Oe.a)((function(){return c.service.getCommonDetailCodeList({masterCode:"BS002"}).pipe(Object(qo.a)((function(e){return n.loadStationListSuccess({dataList:e})})),Object(Qo.a)((function(e){return c._catchErr(e,"List lookup failed."),[]})))})))})),this.loadCardList$=Object(l.c)((function(){return c.actions$.pipe(Object(l.d)(n.loadCardList),Object(Oe.a)((function(){return c.service.getCommonDetailCodeList({masterCode:"PM003"}).pipe(Object(qo.a)((function(e){return n.loadCardListSuccess({dataList:e})})),Object(Qo.a)((function(e){return c._catchErr(e,"List lookup failed."),[]})))})))})),this.loadArrivalTimeList$=Object(l.c)((function(){return c.actions$.pipe(Object(l.d)(n.loadArrivalTimeList),Object(Oe.a)((function(){return c.service.getCommonDetailCodeList({masterCode:"HO025"}).pipe(Object(qo.a)((function(e){return n.loadArrivalTimeListSuccess({dataList:e})})),Object(Qo.a)((function(e){return c._catchErr(e,"Arrival time list lookup failed. Please try again in a momentarily."),[]})))})))})),this.loadBedTypeList$=Object(l.c)((function(){return c.actions$.pipe(Object(l.d)(n.loadBedTypeList),Object(Oe.a)((function(){return c.service.getCommonDetailCodeList({masterCode:"HO008"}).pipe(Object(qo.a)((function(e){return n.loadBedTypeListSuccess({dataList:e})})),Object(Qo.a)((function(e){return c._catchErr(e,"List lookup failed."),[]})))})))})),this.loadCorporateList$=Object(l.c)((function(){return c.actions$.pipe(Object(l.d)(n.loadCorporateList),Object(Oe.a)((function(){return c.service.getCorporateList({limits:[0,1e4]}).pipe(Object(qo.a)((function(e){return n.loadCorporateListSuccess({dataList:e})})),Object(Qo.a)((function(e){return c._catchErr(e,"List lookup failed."),[]})))})))})),this.loadCardTypeOptions$=Object(l.c)((function(){return c.actions$.pipe(Object(l.d)(n.loadCardTypeOptions),Object(Oe.a)((function(){return c.service.getCommonDetailCodeList({masterCode:"PM007"}).pipe(Object(qo.a)((function(e){return n.loadCardTypeOptionsSuccess({dataList:e})})),Object(Qo.a)((function(e){return c._catchErr(e,"List lookup failed."),[]})))})))})),this.loadCorporateCardList$=Object(l.c)((function(){return c.actions$.pipe(Object(l.d)(n.loadCorporateCardList),Object(zo.a)((function(e){return Object(ge.a)(e).pipe(Object(Uo.a)(c.travelerList$))})),Object(Oe.a)((function(e){var t=_slicedToArray(e,2),o=(t[0],t[1]);return c.service.loadCorporateCardList({corporateCompCode:((null==o?void 0:o.length)>0?o[0]:{}).corporateCompCode,itemCategoryCode:"IC02",useYn:!0,limits:[0,2]}).pipe(Object(qo.a)((function(e){return n.loadCorporateCardListSuccess({dataList:e})})),Object(Qo.a)((function(e){return c._catchErr(e,"List lookup failed."),[]})))})))})),this.loadHotelInfo$=Object(l.c)((function(){return c.actions$.pipe(Object(l.d)(n.loadHotelInformation),Object(Oe.a)((function(e){var t=e.condition,o=e.transactionSetId,i=e.stationTypeCode,r=e.country,a=e.currency;return c.service.getHotelInformation({condition:t,transactionSetId:o,stationTypeCode:i,country:r,currency:a}).pipe(Object(qo.a)((function(e){var t=e.info,o=e.transactionSetId;return n.loadHotelInformationSuccess({info:t,transactionSetId:o})})),Object(Qo.a)((function(e){var t="List lookup failed.",o=[n.loadHotelInformationFailure({error:t})];return c._catchErr(e,t,o),[]})))})))})),this.loadRoomList$=Object(l.c)((function(){return c.actions$.pipe(Object(l.d)(n.loadRoomList),Object(Oe.a)((function(e){var t=e.condition,o=e.transactionSetId,i=e.stationTypeCode,r=e.country,a=e.currency;return c.service.getRoomList({condition:t,transactionSetId:o,stationTypeCode:i,country:r,currency:a}).pipe(Object(qo.a)((function(e){var t=e.roomList,o=e.transactionSetId;return n.loadRoomListSuccess({roomList:t,transactionSetId:o})})),Object(Qo.a)((function(e){var t="List lookup failed.",o=[n.loadRoomListFailure({error:t})];return c._catchErr(e,t,o),[]})))})))})),this.loadRoomCondition$=Object(l.c)((function(){return c.actions$.pipe(Object(l.d)(n.loadRoomCondition),Object(Oe.a)((function(e){var t=e.condition,o=e.transactionSetId,i=e.stationTypeCode,r=e.country,a=e.currency;return c.service.getRoomCondition({condition:t,transactionSetId:o,stationTypeCode:i,country:r,currency:a}).pipe(Object(qo.a)((function(e){var t=e.info,o=e.transactionSetId;return n.loadRoomConditionSuccess({info:t,transactionSetId:o})})),Object(Qo.a)((function(e){var t="List lookup failed.",o=[n.loadRoomConditionFailure({error:t})];return c._catchErr(e,t,o),[]})))})))})),this.requestBooking$=Object(l.c)((function(){return c.actions$.pipe(Object(l.d)(n.requestBookingAction),Object(Oe.a)((function(e){var t=e.condition,o=e.transactionSetId,n=e.stationTypeCode,i=e.country,r=e.currency,a=e.language;return c.service.requestBooking({condition:t,transactionSetId:o,stationTypeCode:n,country:i,currency:r,language:a}).pipe(Object(qo.a)((function(){return{succeedYn:!0}})),Object(Qo.a)((function(e){return Object(ge.a)({succeedYn:!1,error:e})})))})),Object(Ko.a)((function(e){var t=e.succeedYn,o=e.error;if(t){var i=[n.closeBookingFormPopup(),n.delSelectedRoomInfo(),n.requestBookingSuccess()];c._runPage("Booking creation was sucessful.",i)}else{var r=[n.requestBookingFailure()];c._catchErr(o,"Booking creation was failed.",r)}})))}),{dispatch:!1}),this.travelerList$=this.store.pipe(Object(u.u)(Ye))}return _createClass(e,[{key:"_runPage",value:function(e,t){var o=this;this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?function(){t.forEach((function(e){o.store.dispatch(e)}))}:function(){}})}},{key:"_catchErr",value:function(e,t,o){var n=this,i=this._errorService.errorHandler(e,t);W.isNil(i)||(W.isNil(i.accept)&&(i.accept=(null==o?void 0:o.length)>0?function(){o.forEach((function(e){n.store.dispatch(e)}))}:function(){}),this.alertService.alert(i))}}]),e}()).\u0275fac=function(e){return new(e||$o)(Ce.bc(l.a),Ce.bc(je),Ce.bc(Go.a),Ce.bc(u.h),Ce.bc(ve.a))},$o.\u0275prov=Ce.Mb({token:$o,factory:$o.\u0275fac}),$o),Jo=[Yo,Ao],Zo=[ht,St,Ht,Yt,Et,Xt,zt,to,ro,lo,mo,Io,Lo,No,_o],en=((wo=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=Ce.Ob({type:wo}),wo.\u0275inj=Ce.Nb({factory:function(e){return new(e||wo)},providers:[Le],imports:[[c.c,s.m,s.w,d.a,b.a,p.a,f.a,m.a,h.a,C.a,v.a,g.a,y.a,O.a,k.a,I.a,V.a,Mo,u.j.forFeature("hoRoomList",He),l.b.forFeature([Xo])]]}),wo)}}]);