(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{Onn4:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("fXoL"),s=n("3Pt+"),c=n("ofXK");const o=["rb"],r=function(){return{radio:!0}},a={provide:s.p,useExisting:Object(i.U)(()=>u),multi:!0};let u=(()=>{class e{constructor(e){this.cd=e,this.onClick=new i.n,this.onFocus=new i.n,this.onBlur=new i.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}handleClick(e,t,n){e.preventDefault(),this.disabled||(this.select(e),n&&t.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.onClick.emit(e))}writeValue(e){this.checked=e===this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}onChange(e){this.select(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.h))},e.\u0275cmp=i.Kb({type:e,selectors:[["app-radio"]],viewQuery:function(e,t){var n;1&e&&i.Kc(o,!0),2&e&&i.Dc(n=i.gc())&&(t.inputViewChild=n.first)},inputs:{value:"value",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",checked:"checked"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[i.Bb([a])],decls:5,vars:11,consts:[[3,"ngClass","click"],["type","radio",1,"radio-control-input",3,"checked","disabled","change","focus","blur"],["rb",""],[1,"radio-control-text"]],template:function(e,t){1&e&&(i.Wb(0,"label",0),i.fc("click",(function(e){return t.select(e)})),i.Wb(1,"input",1,2),i.fc("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onInputFocus(e)}))("blur",(function(e){return t.onInputBlur(e)})),i.Vb(),i.Wb(3,"span",3),i.Pc(4),i.Vb(),i.Vb()),2&e&&(i.Eb(t.styleClass),i.pc("ngClass",i.tc(10,r)),i.Cb(1),i.pc("checked",t.checked)("disabled",t.disabled),i.Db("id",t.inputId)("name",t.name)("value",t.value)("tabindex",t.tabindex),i.Cb(3),i.Qc(t.label))},directives:[c.l],encapsulation:2}),e})()},ZvVH:function(e,t,n){"use strict";n.r(t),n.d(t,"CONTAINERS",(function(){return qe})),n.d(t,"COMPONENTS",(function(){return Ye})),n.d(t,"BsMenuModule",(function(){return Pe}));var i={};n.r(i),n.d(i,"loadStationListAction",(function(){return g})),n.d(i,"loadStationListSuccessAction",(function(){return C})),n.d(i,"loadSecondMenuListAction",(function(){return y})),n.d(i,"loadSecondMenuListSuccessAction",(function(){return N})),n.d(i,"changeSearchConditionAction",(function(){return L})),n.d(i,"loadMasterAction",(function(){return V})),n.d(i,"loadMasterSuccessAction",(function(){return k})),n.d(i,"loadMasterFailureAction",(function(){return F})),n.d(i,"reloadMasterAction",(function(){return W})),n.d(i,"initMasterAction",(function(){return w})),n.d(i,"addSelectedDetailRowInfoAction",(function(){return E})),n.d(i,"delSelectedDetailRowInfoAction",(function(){return D})),n.d(i,"deleteMenuAction",(function(){return A})),n.d(i,"deleteMenuSuccessAction",(function(){return _})),n.d(i,"deleteMenuFailureAction",(function(){return I})),n.d(i,"upsertMenu",(function(){return R})),n.d(i,"upsertMenuSuccessAction",(function(){return $})),n.d(i,"upsertMenuFailureAction",(function(){return q}));var s=n("ofXK"),c=n("3Pt+"),o=n("snw9"),r=n("kt0X"),a=n("7rOj"),u=n("6LsY"),l=n("l1P7"),d=n("v7zA"),b=n("hHe4"),p=n("5hwk"),h=n("1OXJ"),m=n("vu/V"),f=n("tyNb"),O=n("XNiG"),S=n("pLZG"),M=n("1G5W"),v=n("zP0r"),j=n("LvDl");const g=Object(r.o)("[BsMenu] load station list",Object(r.t)()),C=Object(r.o)("[BsMenu] load station list success",Object(r.t)()),y=Object(r.o)("[BsMenu] load first menu list",Object(r.t)()),N=Object(r.o)("[BsMenu] load first menu list success",Object(r.t)()),L=Object(r.o)("[BsMenu] change search condition",Object(r.t)()),V=Object(r.o)("[BsMenu] load master",Object(r.t)()),k=Object(r.o)("[BsMenu] load master success",Object(r.t)()),F=Object(r.o)("[BsMenu] load master failure",Object(r.t)()),W=Object(r.o)("[BsMenu] reload master"),w=Object(r.o)("[BsMenu] init master"),E=Object(r.o)("[BsMenu] add selected detail row info",Object(r.t)()),D=Object(r.o)("[BsMenu] del selected detail row info"),A=Object(r.o)("[BsMenu] delete menu",Object(r.t)()),_=Object(r.o)("[BsMenu] delete menu success",Object(r.t)()),I=Object(r.o)("[BsMenu] delete menu failure",Object(r.t)()),R=Object(r.o)("[BsMenu] upsertMenu",Object(r.t)()),$=Object(r.o)("[BsMenu] upsertMenu success",Object(r.t)()),q=Object(r.o)("[BsMenu] upsertMenu failure",Object(r.t)()),Y=Object(r.q)({stationList:null,secondMenuList:null,loading:null,reloadYn:null,searchCondition:null,masterList:null,selectedDetailRowInfo:null},Object(r.s)(i.loadStationListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{stationList:t})),Object(r.s)(i.loadSecondMenuListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{secondMenuList:t})),Object(r.s)(i.changeSearchConditionAction,(e,{searchCondition:t})=>Object.assign(Object.assign({},e),{searchCondition:t})),Object(r.s)(i.initMasterAction,e=>Object.assign(Object.assign({},e),{masterList:null})),Object(r.s)(i.reloadMasterAction,e=>Object.assign(Object.assign({},e),{reloadYn:!e.reloadYn})),Object(r.s)(i.loadMasterAction,(e,{})=>Object.assign(Object.assign({},e),{loading:!0})),Object(r.s)(i.loadMasterSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{loading:!1,masterList:t})),Object(r.s)(i.addSelectedDetailRowInfoAction,(e,{item:t})=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:t})),Object(r.s)(i.delSelectedDetailRowInfoAction,e=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:null})));function P(e,t){return Object(r.m)({bsMenuMaster:Y})(e,t)}const T=Object(r.p)("bsMenu"),B=Object(r.r)(T,e=>e.bsMenuMaster),x=e=>Object(r.r)(B,e),G=x(e=>e.stationList),U=x(e=>e.secondMenuList),K=x(e=>e.searchCondition),Q=x(e=>e.loading),H=x(e=>e.reloadYn),z=x(e=>e.masterList),X=x(e=>e.selectedDetailRowInfo);var J=n("YY+H"),Z=n("fXoL"),ee=n("LRne"),te=n("z6cu"),ne=n("eIep"),ie=n("AytR");const{API_URL:se}=ie.a,ce={postCommonDetail:`${se}/common/detail-code`,postMaster:`${se}/admin/basis/menu`,putMaster:`${se}/admin/basis/menu`,deleteMaster:`${se}/control/bs/menu-code`};var oe=n("tpT/"),re=n("VMfx");let ae=(()=>{class e{constructor(e,t){this.api=e,this.languageService=t}getCommonDetailCodeList(e){const t=j.assign({},this.api.defaultParams,{condition:e});return this.api.post(ce.postCommonDetail,t).pipe(Object(ne.a)(e=>{var t;return e.succeedYn?j.isEmpty(null===(t=e.result)||void 0===t?void 0:t.list)?Object(ee.a)([]):Object(ee.a)(e.result.list.map(e=>({value:e.detailCode,label:"KO"===this.languageService.currentLanguage?e.detailCodeNameLn:e.detailCodeNameEn}))):Object(te.a)(e.errorMessage||"api response error")}))}getSecondMenuList(e){const t=j.assign({},this.api.defaultParams,{condition:e});return this.api.post(ce.postMaster,t).pipe(Object(ne.a)(e=>{var t;return e.succeedYn?j.isEmpty(null===(t=e.result)||void 0===t?void 0:t.menuGroups)?Object(ee.a)([]):Object(ee.a)(this._setSecondMenuList(e.result.menuGroups)):Object(te.a)(e||"api response error")}))}getMasterList(e){const t=j.assign({},this.api.defaultParams,{condition:e});return this.api.post(ce.postMaster,t).pipe(Object(ne.a)(e=>{var t,n;if(e.succeedYn){const i=(null===(n=null===(t=e.result)||void 0===t?void 0:t.menuGroups)||void 0===n?void 0:n.length)>0?e.result.menuGroups:[];return Object(ee.a)(i)}return Object(te.a)(e||"api response error")}))}upsertBasisMenu(e){const t=j.assign({},this.api.defaultParams,{condition:e});return this.api.put(ce.putMaster,t).pipe(Object(ne.a)(e=>e.succeedYn?Object(ee.a)(this._convertUpsertResult(e.result)):Object(te.a)(e||"api response error")))}deleteBasisMenu(e){const t=j.assign({},this.api.defaultParams,{condition:e});return this.api.delete(ce.deleteMaster,t).pipe(Object(ne.a)(e=>e.succeedYn?Object(ee.a)(e.result):Object(te.a)(e||"api response error")))}_setSecondMenuList(e){const t=[];return e.forEach(e=>{const n=e.firstMenuNameEn;e.secondMenuGroups.forEach(e=>{t.push({value:e.secondMenuSeq,label:n+"_"+e.secondMenuNameEn})})}),t}_convertUpsertResult(e){return j.isEmpty(e)?null:{thirdMenuSeq:e.menuSeq,thirdMenuNameEn:e.menuNameEn,thirdMenuNameLn:e.menuNameLn,parentMenuSeq:e.parentMenuSeq,displayScreenSeq:e.displayScreenSeq,displayScreenUrl:e.displayScreenUrl,displayScreenName:e.displayScreenName,displayOrder:e.displayOrder,controlRemark:e.controlRemark,useYn:e.useYn}}}return e.\u0275fac=function(t){return new(t||e)(Z.bc(oe.a),Z.bc(re.a))},e.\u0275prov=Z.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ue=(()=>{class e{constructor(e){this.fb=e,this.generateSearchForm=()=>this.fb.group({stationTypeCode:[null,[c.z.required]],menuName:[null],useYn:[null]}),this.initListSearchFormData=()=>({stationTypeCode:"STN03",menuName:null,useYn:null}),this.generatePutForm=()=>this.fb.group({menuSeq:[{value:null,disabled:!0}],stationTypeCode:[null,[c.z.required]],menuNameEn:[null,[c.z.required]],menuNameKo:[null,[c.z.required]],parentMenuSeq:[null],displayScreenSeq:[null],displayOrder:[null,[c.z.required]],controlRemark:[null],useYn:[null,[c.z.required]]}),this.initPutFormData=()=>({menuSeq:null,stationTypeCode:"STN03",menuNameEn:null,menuNameKo:null,parentMenuSeq:null,displayScreenSeq:null,displayOrder:null,controlRemark:null,useYn:!1})}folderRequiredValidator(e){if(!e)return null;const t=j.isNil(e.get("folderSeq").value),n=j.isNil(e.get("folderNameLn").value)||""===e.get("folderNameLn").value;return t&&n?{folderInfoRequired:!0}:null}deviceRequiredValidator(e){return e&&!1===e.get("pcDisplayYn").value&&!1===e.get("mobileAppDisplayYn").value&&!1===e.get("mobileWebDisplayYn").value?{shouldNotAllFalse:!0}:null}planDeviceRequiredValidator(e){return e&&!1===e.get("planPcDisplayYn").value&&!1===e.get("planMobileAppDisplayYn").value&&!1===e.get("planMobileWebDisplayYn").value?{shouldNotAllPlanFalse:!0}:null}priceOverValidators(e,t){return n=>{if(!n)return null;const i=n.parent;return i&&"R"===i.get(t).value&&n.value>e?{priceOvered:!0}:null}}}return e.\u0275fac=function(t){return new(t||e)(Z.bc(c.f))},e.\u0275prov=Z.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var le=n("+Sob"),de=n("U6NN"),be=n("gbCm");let pe=(()=>{class e{constructor(e){this._dataService=e,this.clickSearchEvent=new Z.n,this.clickResetEvent=new Z.n,this.useYnList=[{value:!0,label:"Y"},{value:!1,label:"N"}],this.searchForm=this._dataService.generateSearchForm()}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}onSubmit(){const e=this.setSearchCondition();this.clickSearchEvent.emit(e)}onReset(){this.clickResetEvent.emit()}setSearchCondition(){const e=this._dataService.initListSearchFormData(),t=Object.assign({},j.pick(this.searchForm.value,Object.keys(e)));return j.omitBy(t,j.isNil)}_setSearchFormData(e){const t=this._dataService.initListSearchFormData();return j.isEmpty(e)?t:Object.assign({},t,j.pick(e,Object.keys(t)))}}return e.\u0275fac=function(t){return new(t||e)(Z.Qb(ue))},e.\u0275cmp=Z.Kb({type:e,selectors:[["app-bs-menu-master-search"]],inputs:{stationList:"stationList",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:22,vars:6,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-2"],[1,"form-label"],["formControlName","stationTypeCode",1,"d-inline-flex","flex-fill",3,"options","useAllOptionYn"],["formControlName","menuName",1,"d-inline-flex","flex-fill"],["formControlName","useYn",1,"d-inline-flex","flex-fill",3,"options","useAllOptionYn"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(e,t){1&e&&(Z.Wb(0,"form",0),Z.fc("ngSubmit",(function(){return t.onSubmit()})),Z.Wb(1,"div",1),Z.Wb(2,"div",2),Z.Wb(3,"div",3),Z.Wb(4,"span",4),Z.Pc(5,"Station"),Z.Vb(),Z.Rb(6,"app-selectbox",5),Z.Vb(),Z.Wb(7,"div",3),Z.Wb(8,"span",4),Z.Pc(9,"Menu Name"),Z.Vb(),Z.Rb(10,"app-input-text",6),Z.Vb(),Z.Vb(),Z.Wb(11,"div",2),Z.Wb(12,"div",3),Z.Wb(13,"span",4),Z.Pc(14,"Use YN"),Z.Vb(),Z.Rb(15,"app-selectbox",7),Z.Vb(),Z.Rb(16,"div",3),Z.Vb(),Z.Vb(),Z.Wb(17,"div",8),Z.Wb(18,"button",9),Z.Pc(19,"Search"),Z.Vb(),Z.Wb(20,"button",10),Z.fc("click",(function(){return t.onReset()})),Z.Pc(21,"Reset"),Z.Vb(),Z.Vb(),Z.Vb()),2&e&&(Z.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),Z.Cb(6),Z.pc("options",t.stationList)("useAllOptionYn",!1),Z.Cb(9),Z.pc("options",t.useYnList)("useAllOptionYn",!0))},directives:[c.B,c.s,c.k,le.a,de.a,c.r,c.i,be.a],encapsulation:2,changeDetection:0}),e})();function he(e,t){if(1&e){const e=Z.Xb();Z.Wb(0,"li"),Z.Wb(1,"a",7),Z.fc("click",(function(){Z.Fc(e);const n=t.$implicit;return Z.hc(5).onSelectMenu(n)})),Z.Pc(2),Z.Vb(),Z.Vb()}if(2&e){const e=t.$implicit,n=Z.hc(5);Z.Cb(1),Z.Gb("active",e.thirdMenuSeq===(null==n.selectedMenu?null:n.selectedMenu.thirdMenuSeq)),Z.Cb(1),Z.Uc(" ",e.thirdMenuNameEn," : ",e.thirdMenuSeq," ",e.displayScreenName," ",e.displayScreenUrl," ")}}const me=function(e,t){return{"tree-extend":!0,has:e,active:t}};function fe(e,t){if(1&e){const e=Z.Xb();Z.Ub(0),Z.Wb(1,"a",4),Z.fc("click",(function(){Z.Fc(e);const t=Z.hc().$implicit;return Z.hc(3).onOffSecondMenu(t)})),Z.Pc(2),Z.Vb(),Z.Wb(3,"ul",2),Z.Nc(4,he,3,6,"li",3),Z.Vb(),Z.Tb()}if(2&e){const e=Z.hc().$implicit,t=Z.hc(3);Z.Cb(1),Z.pc("ngClass",Z.vc(4,me,(null==e.thirdMenuGroups?null:e.thirdMenuGroups.length)>0,t.secondMenuOnOffObj[e.secondMenuSeq])),Z.Cb(1),Z.Qc(e.secondMenuNameEn),Z.Cb(2),Z.pc("ngForOf",e.thirdMenuGroups)("ngForTrackBy",t.trackByThirdMenu)}}function Oe(e,t){if(1&e){const e=Z.Xb();Z.Wb(0,"a",7),Z.fc("click",(function(){Z.Fc(e);const t=Z.hc().$implicit;return Z.hc(3).onSelectMenu(t)})),Z.Pc(1),Z.Vb()}if(2&e){const e=Z.hc().$implicit,t=Z.hc(3);Z.Gb("active",e.secondMenuSeq===(null==t.selectedMenu?null:t.selectedMenu.secondMenuSeq)),Z.Cb(1),Z.Uc(" ",e.secondMenuNameEn," : ",e.secondMenuSeq," ",e.displayScreenName," ",e.displayScreenUrl," ")}}function Se(e,t){if(1&e&&(Z.Wb(0,"li"),Z.Nc(1,fe,5,7,"ng-container",5),Z.Nc(2,Oe,2,6,"ng-template",null,6,Z.Oc),Z.Vb()),2&e){const e=t.$implicit,n=Z.Ec(3);Z.Cb(1),Z.pc("ngIf",(null==e.thirdMenuGroups?null:e.thirdMenuGroups.length)>0)("ngIfElse",n)}}function Me(e,t){if(1&e){const e=Z.Xb();Z.Wb(0,"li"),Z.Wb(1,"a",4),Z.fc("click",(function(){Z.Fc(e);const n=t.$implicit;return Z.hc(2).onOffFirstMenu(n)})),Z.Pc(2),Z.Vb(),Z.Wb(3,"ul",2),Z.Nc(4,Se,4,2,"li",3),Z.Vb(),Z.Vb()}if(2&e){const e=t.$implicit,n=Z.hc(2);Z.Cb(1),Z.pc("ngClass",Z.vc(4,me,(null==e.secondMenuGroups?null:e.secondMenuGroups.length)>0,n.firstMenuOnOffObj[e.firstMenuSeq])),Z.Cb(1),Z.Qc(e.firstMenuNameEn),Z.Cb(2),Z.pc("ngForOf",e.secondMenuGroups)("ngForTrackBy",n.trackBySecondMenu)}}function ve(e,t){if(1&e&&(Z.Wb(0,"ul",2),Z.Nc(1,Me,5,7,"li",3),Z.Vb()),2&e){const e=Z.hc();Z.Cb(1),Z.pc("ngForOf",e.treeList)("ngForTrackBy",e.trackByFirstMenu)}}let je=(()=>{class e{constructor(){this.selectMenuEvent=new Z.n}get hasTreeList(){return!j.isEmpty(this.treeList)}ngOnInit(){this._initState()}onOffFirstMenu(e){var t;(null===(t=null==e?void 0:e.secondMenuGroups)||void 0===t?void 0:t.length)>0&&(this.firstMenuOnOffObj[e.firstMenuSeq]=!this.firstMenuOnOffObj[e.firstMenuSeq])}onOffSecondMenu(e){var t;(null===(t=null==e?void 0:e.thirdMenuGroups)||void 0===t?void 0:t.length)>0&&(this.secondMenuOnOffObj[e.secondMenuSeq]=!this.secondMenuOnOffObj[e.secondMenuSeq])}onSelectMenu(e){this.selectedMenu=e,this.selectMenuEvent.emit(e)}trackByFirstMenu(e,t){return t.firstMenuSeq}trackBySecondMenu(e,t){return t.secondMenuSeq}trackByThirdMenu(e,t){return t.thirdMenuSeq}_initState(){this.firstMenuOnOffObj={},this.secondMenuOnOffObj={},this.selectedMenu=null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Z.Kb({type:e,selectors:[["app-bs-menu-master-tree"]],inputs:{treeList:"treeList"},outputs:{selectMenuEvent:"selectMenuEvent"},decls:2,vars:1,consts:[[1,"tree-menu"],["class","tree-group",4,"ngIf"],[1,"tree-group"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass","click"],[4,"ngIf","ngIfElse"],["emptyThirdMenus",""],[1,"tree-link",3,"click"]],template:function(e,t){1&e&&(Z.Wb(0,"div",0),Z.Nc(1,ve,2,2,"ul",1),Z.Vb()),2&e&&(Z.Cb(1),Z.pc("ngIf",t.hasTreeList))},directives:[s.o,s.n,s.l],encapsulation:2,changeDetection:0}),e})();var ge=n("pfiq"),Ce=n("Onn4");const ye=function(){return["screenSeq","screenNameEn","screenUrl"]};let Ne=(()=>{class e{constructor(e,t,n){this.service=e,this.cd=t,this.fb=n,this.addNewEvent=new Z.n,this.submitEvent=new Z.n,this._$unsubscribe=new O.a,this.upsertForm=this.service.generatePutForm(),this._initSubscription()}get rowItem(){return this._rowItem}set rowItem(e){this._rowItem=e,this._initThisState(),this.upsertFormData=this._setUpsertFormData(e)}ngOnInit(){this._initThisState(),console.log(this.seconMenuList,"seconMenuList")}ngAfterContentChecked(){}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onAdd(){this.addNewEvent.emit()}onSubmit(){if(this.upsertForm.invalid)return void(this._checkValid=!0);const e=this._setUpsertCondition();this.submitEvent.emit(e),this._checkValid=!1}checkIsInvalid(e){return this._checkValid&&this.upsertForm.get(e)&&this.upsertForm.get(e).invalid}_setUpsertFormData(e){const t=this.service.initPutFormData();return j.isEmpty(e)?t:Object.assign(t,j.pick(e,Object.keys(t)))}_setUpsertCondition(){const e=Object.keys(this.service.initPutFormData()),t=this.upsertForm.getRawValue(),n=Object.assign({},j.pick(t,e));return n.menuSeq?n:j.omit(n,["rowid","menuSeq"])}_initThisState(){this._checkValid=!1}_initSubscription(){}}return e.\u0275fac=function(t){return new(t||e)(Z.Qb(ue),Z.Qb(Z.h),Z.Qb(c.f))},e.\u0275cmp=Z.Kb({type:e,selectors:[["app-bs-menu-detail-form"]],inputs:{stationTypeList:"stationTypeList",seconMenuList:"seconMenuList",selectedDisplayScreenName:"selectedDisplayScreenName",rowItem:"rowItem"},outputs:{addNewEvent:"addNewEvent",submitEvent:"submitEvent"},decls:70,vars:17,consts:[[1,"page-item",3,"formGroup","connectForm"],[1,"page-item-header"],[1,"control","ml-auto"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"btn","btn-outline-secondary","sm"],[1,"table","table-bordered","table-responsive"],["width","140px"],["scope","row",1,"th-bg"],["formControlName","menuSeq"],["formControlName","stationTypeCode",3,"options"],["formControlName","menuNameEn",3,"isInvalid"],["formControlName","menuNameKo",3,"isInvalid"],["formControlName","displayScreenSeq","apiUrl","admin/basis/screen","dataKey","screenSeq","inputFieldFormat","{0} - &{1}&_{2}","placeholder","Name",3,"inputFieldValue","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","parentMenuSeq",3,"options","useAllOptionYn","useAllOptionName"],["formControlName","displayOrder",3,"isInvalid","valueType","inputFormat"],[1,"form-group"],["formControlName","useYn","name","useYn","label","Y",3,"value"],["formControlName","useYn","name","useYn","label","N",3,"value"],["formControlName","controlRemark"]],template:function(e,t){1&e&&(Z.Wb(0,"form",0),Z.Wb(1,"div",1),Z.Wb(2,"div",2),Z.Wb(3,"a",3),Z.fc("click",(function(){return t.onAdd()})),Z.Pc(4,"New"),Z.Vb(),Z.Wb(5,"a",3),Z.fc("click",(function(){return t.onSubmit()})),Z.Pc(6,"Save"),Z.Vb(),Z.Wb(7,"a",4),Z.Pc(8,"Delete"),Z.Vb(),Z.Vb(),Z.Vb(),Z.Wb(9,"div",5),Z.Wb(10,"table"),Z.Wb(11,"caption"),Z.Pc(12," Menu "),Z.Vb(),Z.Wb(13,"colgroup"),Z.Rb(14,"col",6),Z.Rb(15,"col"),Z.Vb(),Z.Wb(16,"tbody"),Z.Wb(17,"tr"),Z.Wb(18,"th",7),Z.Wb(19,"sup"),Z.Pc(20,"Menu SEQ"),Z.Vb(),Z.Vb(),Z.Wb(21,"td"),Z.Rb(22,"app-input-text",8),Z.Vb(),Z.Vb(),Z.Wb(23,"tr"),Z.Wb(24,"th",7),Z.Wb(25,"sup"),Z.Pc(26,"Station"),Z.Vb(),Z.Vb(),Z.Wb(27,"td"),Z.Rb(28,"app-selectbox",9),Z.Vb(),Z.Vb(),Z.Wb(29,"tr"),Z.Wb(30,"th",7),Z.Wb(31,"sup"),Z.Pc(32,"Menu Name(EN)"),Z.Vb(),Z.Vb(),Z.Wb(33,"td"),Z.Rb(34,"app-input-text",10),Z.Vb(),Z.Vb(),Z.Wb(35,"tr"),Z.Wb(36,"th",7),Z.Wb(37,"sup"),Z.Pc(38,"Menu Name(KO)"),Z.Vb(),Z.Vb(),Z.Wb(39,"td"),Z.Rb(40,"app-input-text",11),Z.Vb(),Z.Vb(),Z.Wb(41,"tr"),Z.Wb(42,"th",7),Z.Pc(43,"Display Screen"),Z.Vb(),Z.Wb(44,"td"),Z.Rb(45,"app-auto-complete",12),Z.Vb(),Z.Vb(),Z.Wb(46,"tr"),Z.Wb(47,"th",7),Z.Pc(48,"Parent Menu"),Z.Vb(),Z.Wb(49,"td"),Z.Rb(50,"app-selectbox",13),Z.Vb(),Z.Vb(),Z.Wb(51,"tr"),Z.Wb(52,"th",7),Z.Wb(53,"sup"),Z.Pc(54,"Display Order"),Z.Vb(),Z.Vb(),Z.Wb(55,"td"),Z.Rb(56,"app-input-text",14),Z.Vb(),Z.Vb(),Z.Wb(57,"tr"),Z.Wb(58,"th",7),Z.Wb(59,"sup"),Z.Pc(60,"Use YN"),Z.Vb(),Z.Vb(),Z.Wb(61,"td"),Z.Wb(62,"div",15),Z.Rb(63,"app-radio",16),Z.Rb(64,"app-radio",17),Z.Vb(),Z.Vb(),Z.Vb(),Z.Wb(65,"tr"),Z.Wb(66,"th",7),Z.Pc(67,"Control Remark"),Z.Vb(),Z.Wb(68,"td"),Z.Rb(69,"app-input-text",18),Z.Vb(),Z.Vb(),Z.Vb(),Z.Vb(),Z.Vb(),Z.Vb()),2&e&&(Z.pc("formGroup",t.upsertForm)("connectForm",t.upsertFormData),Z.Cb(28),Z.pc("options",t.stationTypeList),Z.Cb(6),Z.pc("isInvalid",t.checkIsInvalid("menuNameEn")),Z.Cb(6),Z.pc("isInvalid",t.checkIsInvalid("menuNameKo")),Z.Cb(5),Z.pc("inputFieldValue",t.selectedDisplayScreenName)("apiSearchTerm","screenName")("inputFieldFormatKeyList",Z.tc(16,ye)),Z.Cb(5),Z.pc("options",t.seconMenuList)("useAllOptionYn",!0)("useAllOptionName","Select"),Z.Cb(6),Z.pc("isInvalid",t.checkIsInvalid("displayOrder"))("valueType","number")("inputFormat","number"),Z.Cb(7),Z.pc("value",!0),Z.Cb(1),Z.pc("value",!1))},directives:[c.B,c.s,c.k,le.a,be.a,c.r,c.i,de.a,ge.a,Ce.a],encapsulation:2,changeDetection:0}),e})();var Le=n("bMKz");let Ve=(()=>{class e{constructor(e,t,n){this.store=e,this._dataService=t,this._cd=n,this._$unsubscribe=new O.a,this.selectedRowItem$=e.pipe(Object(r.u)(X)),this.stationList$=e.pipe(Object(r.u)(G)),this.secondMenuList$=e.pipe(Object(r.u)(U))}ngOnInit(){this._initSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}addNewHandler(){this.store.dispatch(i.addSelectedDetailRowInfoAction({item:null}))}submitUpsertHandler(e){this.store.dispatch(i.upsertMenu({condition:e}))}_initSubscription(){this.selectedRowItem$.pipe(Object(M.a)(this._$unsubscribe)).subscribe(e=>{if(j.isNil(e))this.selectedPutCondition=this._dataService.initPutFormData(),this.selectedDisplayScreenName=null;else{const t=e.thirdMenuSeq||e.secondMenuSeq,n=this.stationTypeCode,i=e.thirdMenuNameEn||e.secondMenuNameEn,s=e.thirdMenuNameKo||e.secondMenuNameKo,c=e.parentMenuSeq||null,o=e.displayScreenSeq||null,r=e.displayOrder||null,a=e.controlRemark||null,u=j.isNil(e.useYn)?null:e.useYn;this.selectedPutCondition=Object.assign({},{menuSeq:t,stationTypeCode:n,menuNameEn:i,menuNameKo:s,parentMenuSeq:c,displayScreenSeq:o,displayOrder:r,controlRemark:a,useYn:u}),this.selectedDisplayScreenName=e.displayScreenName||null,this._cd.markForCheck()}})}}return e.\u0275fac=function(t){return new(t||e)(Z.Qb(r.h),Z.Qb(ue),Z.Qb(Z.h))},e.\u0275cmp=Z.Kb({type:e,selectors:[["app-bs-menu-detail"]],inputs:{stationTypeCode:"stationTypeCode"},decls:3,vars:8,consts:[[3,"stationTypeList","seconMenuList","selectedDisplayScreenName","rowItem","addNewEvent","submitEvent"]],template:function(e,t){1&e&&(Z.Wb(0,"app-bs-menu-detail-form",0),Z.fc("addNewEvent",(function(){return t.addNewHandler()}))("submitEvent",(function(e){return t.submitUpsertHandler(e)})),Z.ic(1,"async"),Z.ic(2,"async"),Z.Vb()),2&e&&Z.pc("stationTypeList",Z.jc(1,4,t.stationList$))("seconMenuList",Z.jc(2,6,t.secondMenuList$))("selectedDisplayScreenName",t.selectedDisplayScreenName)("rowItem",t.selectedPutCondition)},directives:[Ne],pipes:[s.b],encapsulation:2,changeDetection:0}),e})(),ke=(()=>{class e{constructor(e,t,n,i){this.store=e,this._dataService=t,this.authStore=n,this.UserConditionService=i,this.unsubscribe$=new O.a,this.stationList$=this.store.pipe(Object(r.u)(G)),this.loading$=this.store.pipe(Object(r.u)(Q)),this.reload$=this.store.pipe(Object(r.u)(H)),this.searchCondition$=this.store.pipe(Object(r.u)(K)),this.masterList$=this.store.pipe(Object(r.u)(z)),this.storeId$=n.pipe(Object(r.u)(J.o))}ngOnInit(){this.store.dispatch(i.changeSearchConditionAction({searchCondition:this._dataService.initListSearchFormData()})),this._requestCommonDetailCodes(),this.storeId$.subscribe(e=>this._storeId=e),this.initSearchCondition(),this._initSubscription()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}clickSearchHandler(e){this.store.dispatch(i.changeSearchConditionAction({searchCondition:e})),this.store.dispatch(i.loadMasterAction({condition:e})),this.UserConditionService.setSearchSettingSessionStorage(e,this._storeId)}clickResetHandler(){this.store.dispatch(i.changeSearchConditionAction({searchCondition:null}))}clickAddHandler(){this.store.dispatch(i.delSelectedDetailRowInfoAction())}selectMenuHandler(e){this.store.dispatch(i.addSelectedDetailRowInfoAction({item:j.cloneDeep(e)}))}_requestCommonDetailCodes(){this.store.dispatch(i.loadStationListAction({condition:{masterCode:"BS002"}}))}_initSubscription(){this.searchCondition$.pipe(Object(S.a)(e=>!j.isNil(e)&&e.stationTypeCode!==this.stationTypeCode),Object(M.a)(this.unsubscribe$),Object(v.a)(1)).subscribe(e=>{this.stationTypeCode=e.stationTypeCode,this.store.dispatch(i.loadSecondMenuListAction({condition:{stationTypeCode:this.stationTypeCode}}))}),this.reload$.pipe(Object(v.a)(1),Object(M.a)(this.unsubscribe$)).subscribe(()=>{this.searchFormEl.onSubmit()})}initSearchCondition(){if(this.searchCondition$.subscribe(e=>this._searchCondition=e),this.masterList$.subscribe(e=>this._searchGridDataList=e),0===j.size(this._searchCondition)&&0===j.size(this._searchGridDataList)){const e=this._dataService.initListSearchFormData(),t=this.UserConditionService.selectSearchSetting(e,this._storeId);this.store.dispatch(i.changeSearchConditionAction({searchCondition:t[0]}))}}}return e.\u0275fac=function(t){return new(t||e)(Z.Qb(r.h),Z.Qb(ue),Z.Qb(r.h),Z.Qb(Le.a))},e.\u0275cmp=Z.Kb({type:e,selectors:[["app-bs-menu-master"]],viewQuery:function(e,t){var n;1&e&&Z.Xc(pe,!0),2&e&&Z.Dc(n=Z.gc())&&(t.searchFormEl=n.first)},decls:10,vars:12,consts:[[1,"frame-wrap","both"],[1,"frame"],[3,"stationList","searchCondition","clickSearchEvent","clickResetEvent"],[3,"treeList","selectMenuEvent"],[3,"stationTypeCode"]],template:function(e,t){if(1&e&&(Z.Wb(0,"div",0),Z.Wb(1,"div",1),Z.Wb(2,"app-bs-menu-master-search",2),Z.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),Z.ic(3,"async"),Z.ic(4,"async"),Z.Vb(),Z.Wb(5,"app-bs-menu-master-tree",3),Z.fc("selectMenuEvent",(function(e){return t.selectMenuHandler(e)})),Z.ic(6,"async"),Z.Vb(),Z.Vb(),Z.Wb(7,"div",1),Z.Rb(8,"app-bs-menu-detail",4),Z.ic(9,"async"),Z.Vb(),Z.Vb()),2&e){var n;const e=null==(n=Z.jc(9,10,t.searchCondition$))?null:n.stationTypeCode;Z.Cb(2),Z.pc("stationList",Z.jc(3,4,t.stationList$))("searchCondition",Z.jc(4,6,t.searchCondition$)),Z.Cb(3),Z.pc("treeList",Z.jc(6,8,t.masterList$)),Z.Cb(3),Z.pc("stationTypeCode",e)}},directives:[pe,je,Ve],pipes:[s.b],encapsulation:2,changeDetection:0}),e})();const Fe=[{path:"",component:ke,data:{title:"\uba54\ub274\uad00\ub9ac"}}];let We=(()=>{class e{}return e.\u0275mod=Z.Ob({type:e}),e.\u0275inj=Z.Nb({factory:function(t){return new(t||e)},imports:[[f.f.forChild(Fe)],f.f]}),e})();var we=n("bOdf"),Ee=n("zp1y"),De=n("lJxs"),Ae=n("JIr8"),_e=n("vkgz"),Ie=n("Xb6A"),Re=n("EsKh");let $e=(()=>{class e{constructor(e,t,n,s,c){this.actions$=e,this.service=t,this.store=n,this._errorService=s,this.alertService=c,this.loadStationList$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(i.loadStationListAction),Object(we.a)(e=>Object(ee.a)(e).pipe(Object(Ee.a)(this.stationList$))),Object(ne.a)(([{condition:e},t])=>null===t?this.service.getCommonDetailCodeList(e).pipe(Object(De.a)(e=>i.loadStationListSuccessAction({dataList:e})),Object(Ae.a)(e=>(console.error(e),[]))):Object(ee.a)(i.loadStationListSuccessAction({dataList:j.cloneDeep(t)}))))),this.loadSecondMenuList$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(i.loadSecondMenuListAction),Object(ne.a)(({condition:e})=>this.service.getSecondMenuList(e).pipe(Object(De.a)(e=>i.loadSecondMenuListSuccessAction({dataList:e})),Object(Ae.a)(e=>(console.error(e),[])))))),this.loadMasterList$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(i.loadMasterAction),Object(ne.a)(({condition:e})=>this.service.getMasterList(e).pipe(Object(De.a)(e=>i.loadMasterSuccessAction({dataList:e})),Object(Ae.a)(e=>{const t="List lookup failed. Please try again in a momentarily.",n=[i.loadMasterFailureAction({error:t})];return this._catchErr(e,t,n),[]}))))),this.deleteMenu$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(i.deleteMenuAction),Object(ne.a)(({condition:e})=>this.service.deleteBasisMenu(e).pipe(Object(De.a)(()=>({succeedYn:!0})),Object(Ae.a)(e=>Object(ee.a)({succeedYn:!1,error:e})))),Object(_e.a)(({succeedYn:e,error:t})=>{if(e){const e=[i.reloadMasterAction(),i.addSelectedDetailRowInfoAction({item:null})];this._runPage("\uba54\ub274\uc815\ubcf4 \uc0ad\uc81c\uac00 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",e)}else{const e=[i.deleteMenuFailureAction({error:"Deletion failed."})];this._catchErr(t,"\uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",e)}})),{dispatch:!1}),this.upsertMenu$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(i.upsertMenu),Object(ne.a)(({condition:e})=>this.service.upsertBasisMenu(e).pipe(Object(De.a)(e=>({succeedYn:!0,result:e})),Object(Ae.a)(e=>Object(ee.a)({succeedYn:!1,error:e})))),Object(_e.a)(({succeedYn:e,result:t,error:n})=>{if(e){const e="\uba54\ub274\uc815\ubcf4 Your save is complete.",n=[i.reloadMasterAction(),i.addSelectedDetailRowInfoAction({item:t})];this._runPage(e,n)}else{const e="Modification failed.",t=[i.upsertMenuFailureAction({error:e})];this._catchErr(n,e,t)}})),{dispatch:!1}),this.stationList$=this.store.pipe(Object(r.u)(G)),this.secondMenuList$=this.store.pipe(Object(r.u)(U))}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this.store.dispatch(e)})}:()=>{}})}_catchErr(e,t,n){const i=this._errorService.errorHandler(e,t);j.isNil(i)||(j.isNil(i.accept)&&(i.accept=(null==n?void 0:n.length)>0?()=>{n.forEach(e=>{this.store.dispatch(e)})}:()=>{}),this.alertService.alert(i))}}return e.\u0275fac=function(t){return new(t||e)(Z.bc(o.a),Z.bc(ae),Z.bc(r.h),Z.bc(Ie.a),Z.bc(Re.a))},e.\u0275prov=Z.Mb({token:e,factory:e.\u0275fac}),e})();const qe=[ke,Ve],Ye=[pe,je,Ne];let Pe=(()=>{class e{}return e.\u0275mod=Z.Ob({type:e}),e.\u0275inj=Z.Nb({factory:function(t){return new(t||e)},imports:[[s.c,c.m,c.w,a.a,u.a,l.a,d.a,b.a,p.a,h.a,m.a,We,r.j.forFeature("bsMenu",P),o.b.forFeature([$e])]]}),e})()}}]);