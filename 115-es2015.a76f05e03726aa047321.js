(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{YH7L:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o("ofXK"),n=o("3Pt+"),s=o("fXoL");let a=(()=>{class e{}return e.\u0275mod=s.Ob({type:e}),e.\u0275inj=s.Nb({factory:function(t){return new(t||e)},imports:[[i.c,n.m,n.w]]}),e})()},"d2E/":function(e,t,o){"use strict";o.r(t),o.d(t,"CONTAINERS",(function(){return qo})),o.d(t,"COMPONENTS",(function(){return Uo})),o.d(t,"HoHotelRoomMasterModule",(function(){return Go}));var i={};o.r(i),o.d(i,"loadRegisterStatusList",(function(){return N})),o.d(i,"getRegisterStatusListSuccess",(function(){return F})),o.d(i,"getRegisterStatusListFailure",(function(){return $})),o.d(i,"loadHotelTypeList",(function(){return W})),o.d(i,"getHotelTypeListSuccess",(function(){return x})),o.d(i,"getHotelTypeListFailure",(function(){return A})),o.d(i,"loadStarRatingList",(function(){return _})),o.d(i,"getStarRatingListSuccess",(function(){return Y})),o.d(i,"getStarRatingListFailure",(function(){return z})),o.d(i,"loadDataStatusList",(function(){return q})),o.d(i,"getDataStatusSuccess",(function(){return U})),o.d(i,"getDataStatusFailure",(function(){return G})),o.d(i,"initStateAction",(function(){return K})),o.d(i,"changeSearchCondition",(function(){return Q})),o.d(i,"changePageSize",(function(){return X})),o.d(i,"changePageIndex",(function(){return B})),o.d(i,"loadList",(function(){return J})),o.d(i,"getListSuccess",(function(){return Z})),o.d(i,"getListFailure",(function(){return ee})),o.d(i,"upsertList",(function(){return te})),o.d(i,"reloadList",(function(){return oe})),o.d(i,"getHistories",(function(){return ie})),o.d(i,"openDetailPopup",(function(){return ne})),o.d(i,"closeDetailPopup",(function(){return se})),o.d(i,"addSelectedDetailRowInfo",(function(){return ae})),o.d(i,"delSelectedDetailRowInfo",(function(){return ce})),o.d(i,"addRetrievedHotelSimple",(function(){return le})),o.d(i,"delRetrievedHotelSimple",(function(){return re})),o.d(i,"openRoomTypeMappingPopup",(function(){return de})),o.d(i,"closeRoomTypeMappingPopup",(function(){return pe})),o.d(i,"setSelectedIncludeDays",(function(){return ue})),o.d(i,"delSelectedIncludeDays",(function(){return he})),o.d(i,"setSelectedExcludeDays",(function(){return be})),o.d(i,"delSelectedExcludeDays",(function(){return me})),o.d(i,"openAllotmentPopup",(function(){return ge})),o.d(i,"closeAllotmentPopup",(function(){return fe})),o.d(i,"openCalendarPopup",(function(){return Oe})),o.d(i,"closeCalendarPopup",(function(){return je})),o.d(i,"putAllotment",(function(){return Ce})),o.d(i,"openHistoryPopup",(function(){return ve})),o.d(i,"closeHistoryPopup",(function(){return Se})),o.d(i,"loadHistoryList",(function(){return ye})),o.d(i,"loadHistoryListSuccess",(function(){return Re})),o.d(i,"loadHistoryListFailure",(function(){return He})),o.d(i,"updateMappingAction",(function(){return De})),o.d(i,"setGridStateAction",(function(){return Me})),o.d(i,"setGridCheckedStateAction",(function(){return Ie}));var n={};o.r(n),o.d(n,"getInformationSuccess",(function(){return Pe})),o.d(n,"getInformationFailure",(function(){return ke})),o.d(n,"getPhotoSuccess",(function(){return Le})),o.d(n,"getPhotoFailure",(function(){return we})),o.d(n,"getVendorListSuccess",(function(){return Ee})),o.d(n,"getVendorListFailure",(function(){return Ve})),o.d(n,"getVendorDropdownistSuccess",(function(){return Te})),o.d(n,"getVendorDropdownListFailure",(function(){return Ne})),o.d(n,"upsertMasterFailure",(function(){return Fe})),o.d(n,"upsertPhotosFailure",(function(){return $e})),o.d(n,"upsertInformationFailure",(function(){return We})),o.d(n,"loadInformation",(function(){return xe})),o.d(n,"loadPhoto",(function(){return Ae})),o.d(n,"loadVendorList",(function(){return _e})),o.d(n,"loadVendorDropdownList",(function(){return Ye})),o.d(n,"upsertMaster",(function(){return ze})),o.d(n,"upsertInformation",(function(){return qe})),o.d(n,"upsertPhotos",(function(){return Ue})),o.d(n,"upsertPhotoSuccess",(function(){return Ge}));var s=o("ofXK"),a=o("3Pt+"),c=o("snw9"),l=o("kt0X"),r=o("pxUr"),d=o("WG3B"),p=o("xoAz"),u=o("wPo9"),h=o("7rOj"),b=o("+NQf"),m=o("l1P7"),g=o("v7zA"),f=o("7UZF"),O=o("hHe4"),j=o("1OXJ"),C=o("5hwk"),v=o("px/L"),S=o("6LsY"),y=o("kKjH"),R=o("w8np"),H=o("vu/V"),D=o("s7Dg"),M=o("VIhy"),I=o("tyNb"),P=o("XNiG"),k=o("itXk"),L=o("Kj3r"),w=o("pLZG"),E=o("1G5W"),V=o("zP0r"),T=o("LvDl");const N=Object(l.o)("[HoHotelRoomMasterMaster/List] \ub4f1\ub85d\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(l.t)()),F=Object(l.o)("[HoHotelRoomMasterMaster/List] \ub4f1\ub85d\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(l.t)()),$=Object(l.o)("[HoHotelRoomMasterMaster/List] \ub4f1\ub85d\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(l.t)()),W=Object(l.o)("[HoHotelRoomMasterMaster/List] \ud638\ud154\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(l.t)()),x=Object(l.o)("[HoHotelRoomMasterMaster/List] \ud638\ud154\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(l.t)()),A=Object(l.o)("[HoHotelRoomMasterMaster/List] \ud638\ud154\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(l.t)()),_=Object(l.o)("[HoHotelRoomMasterMaster/List] \ud638\ud154\ub4f1\uae09 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(l.t)()),Y=Object(l.o)("[HoHotelRoomMasterMaster/List] \ud638\ud154\ub4f1\uae09 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(l.t)()),z=Object(l.o)("[HoHotelRoomMasterMaster/List] \ud638\ud154\ub4f1\uae09 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(l.t)()),q=Object(l.o)("[HoHotelRoomMasterMaster/List] \ub370\uc774\ud130\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(l.t)()),U=Object(l.o)("[HoHotelRoomMasterMaster/List] \ub370\uc774\ud130\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(l.t)()),G=Object(l.o)("[HoHotelRoomMasterMaster/List] \ub370\uc774\ud130\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(l.t)()),K=Object(l.o)("[HoHotelRoomMasterMaster/List] init state"),Q=Object(l.o)("[HoHotelRoomMasterMaster/List] change search condition",Object(l.t)()),X=Object(l.o)("[HoHotelRoomMasterMaster/List] change page size",Object(l.t)()),B=Object(l.o)("[HoHotelRoomMasterMaster/List] change page index",Object(l.t)()),J=Object(l.o)("[HoHotelRoomMasterMaster/List] load grid data list",Object(l.t)()),Z=Object(l.o)("[HoHotelRoomMasterMaster/List] get list success",Object(l.t)()),ee=Object(l.o)("[HoHotelRoomMasterMaster/List] get list failure",Object(l.t)()),te=Object(l.o)("[HoHotelRoomMasterMaster/List] upsert grid data list"),oe=Object(l.o)("[HoHotelRoomMasterMaster/List] reload grid data list"),ie=Object(l.o)("[HoHotelRoomMasterMaster/History] load room history list",Object(l.t)()),ne=Object(l.o)("[HoHotelRoomMasterMaster/Detail] \uc0c1\uc138\ud31d\uc5c5 \uc5f4\uae30"),se=Object(l.o)("[HoHotelRoomMasterMaster/Detail] \uc0c1\uc138\ud31d\uc5c5 \ub2eb\uae30"),ae=Object(l.o)("[HoHotelRoomMasterMaster/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc120\ud0dd",Object(l.t)()),ce=Object(l.o)("[HoHotelRoomMasterMaster/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc81c\uac70"),le=Object(l.o)("[HoHotelRoomMasterMaster/Detail] \uac80\uc0c9\ud55c \ud638\ud154 \uc800\uc7a5",Object(l.t)()),re=Object(l.o)("[HoHotelRoomMasterMaster/Detail] \uac80\uc0c9\ud55c \ud638\ud154 \uc81c\uac70"),de=Object(l.o)("[HoHotelRoomMasterMaster/Detail] open room type mapping popup"),pe=Object(l.o)("[HoHotelRoomMasterMaster/Detail] close room type mapping popup"),ue=Object(l.o)("[HoHotelRoomMasterMaster/Detail] set selected include days",Object(l.t)()),he=Object(l.o)("[HoHotelRoomMasterMaster/Detail] del selected include days"),be=Object(l.o)("[HoHotelRoomMasterMaster/Detail] set selected exclude days",Object(l.t)()),me=Object(l.o)("[HoHotelRoomMasterMaster/Detail] del selected exclude days"),ge=Object(l.o)("[HoHotelRoomMasterMaster/Detail] open allotment popup"),fe=Object(l.o)("[HoHotelRoomMasterMaster/Detail] close allotment popup"),Oe=Object(l.o)("[HoHotelRoomMasterMaster/Detail] open calendar popup"),je=Object(l.o)("[HoHotelRoomMasterMaster/Detail] close calendar popup"),Ce=Object(l.o)("[HoHotelRoomMasterMaster/Detail] put allotment",Object(l.t)()),ve=Object(l.o)("[HoHotelRoomMasterMaster/Detail] open history popup"),Se=Object(l.o)("[HoHotelRoomMasterMaster/Detail] close history popup"),ye=Object(l.o)("[HoHotelRoomMasterMaster/History] load history log list",Object(l.t)()),Re=Object(l.o)("[HoHotelRoomMasterMaster/History] load history log list success",Object(l.t)()),He=Object(l.o)("[HoHotelRoomMasterMaster/History] load history log list failure",Object(l.t)()),De=Object(l.o)("[HoHotelRoomMasterMaster/Detail] update mapping",Object(l.t)()),Me=Object(l.o)("[HoHotelRoomMasterMaster/List] set grid state",Object(l.t)()),Ie=Object(l.o)("[HoHotelRoomMasterMaster/List] set grid checked state",Object(l.t)()),Pe=Object(l.o)("[HoHotelRoomMasterMaster/Detail] get detail information success",Object(l.t)()),ke=Object(l.o)("[HoHotelRoomMasterMaster/Detail] get detail information failure",Object(l.t)()),Le=Object(l.o)("[HoHotelRoomMasterMaster/Detail] get detail photo success",Object(l.t)()),we=Object(l.o)("[HoHotelRoomMasterMaster/Detail] get detail photo failure",Object(l.t)()),Ee=Object(l.o)("[HoHotelRoomMasterMaster/Detail] get detail vendor list success",Object(l.t)()),Ve=Object(l.o)("[HoHotelRoomMasterMaster/Detail] get detail vendor list failure",Object(l.t)()),Te=Object(l.o)("[HoHotelRoomMasterMaster/Detail] get detail vendor dropdown list success",Object(l.t)()),Ne=Object(l.o)("[HoHotelRoomMasterMaster/Detail] get detail vendor dropdown list failure",Object(l.t)()),Fe=Object(l.o)("[HoHotelRoomMasterMaster/Detail] upsert master failure",Object(l.t)()),$e=Object(l.o)("[HoHotelRoomMasterMaster/Detail] upsert photos failure",Object(l.t)()),We=Object(l.o)("[HoHotelRoomMasterMaster/Detail] upsert information failure",Object(l.t)()),xe=Object(l.o)("[HoHotelRoomMasterMaster/Detail] load detai information",Object(l.t)()),Ae=Object(l.o)("[HoHotelRoomMasterMaster/Detail] load detail photo",Object(l.t)()),_e=Object(l.o)("[HoHotelRoomMasterMaster/Detail] load detail vendor list",Object(l.t)()),Ye=Object(l.o)("[HoHotelRoomMasterMaster/Detail] load detail vendor dropdown list",Object(l.t)()),ze=Object(l.o)("[HoHotelRoomMasterMaster/Detail] upsert master",Object(l.t)()),qe=Object(l.o)("[HoHotelRoomMasterMaster/Detail] upsert information",Object(l.t)()),Ue=Object(l.o)("[HoHotelRoomMasterMaster/Detail] upsert hotel photos",Object(l.t)()),Ge=Object(l.o)("[HoHotelRoomMasterMaster/Detail] upsert detail photo success",Object(l.t)());var Ke=o("EVqC");const Qe=Object(Ke.a)({selectId:e=>e.rowid,sortComparer:!1}),Xe=Qe.getInitialState({registerStatusList:null,hotelTypeList:null,starRatingList:null,dataStatusList:null,vendorDropdownList:null,loading:!1,searchCondition:null,otherSearchInfo:null,pageSize:20,selectedDetailRowInfo:null,selectedHotelSimple:null,selectedIncludeDays:null,selectedExcludeDays:null,isOpenDetailPopup:!1,isOpenRoomTypeMappingPopup:!1,isOpenHistoryPopup:!1,isOpenAllotmentPopup:!1,isOpenCalendarPopup:!1,reloadToggle:!1,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},gridDataTotal:null,gridCheckedState:null,informationLoading:!1,informationItem:null,vendorListLoading:!1,vendorList:null,historyList:null}),Be=Object(l.q)(Xe,Object(l.s)(i.getRegisterStatusListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{registerStatusList:t})),Object(l.s)(i.getHotelTypeListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{hotelTypeList:t})),Object(l.s)(i.getDataStatusSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{dataStatusList:t})),Object(l.s)(i.getStarRatingListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{starRatingList:t})),Object(l.s)(i.initStateAction,e=>Object.assign(Object.assign({},e),{loading:null,selectedDetailRowInfo:null,isOpenDetailPopup:!1})),Object(l.s)(i.changeSearchCondition,(e,{searchCondition:t,otherSearchInfo:o})=>Object.assign(Object.assign({},e),{searchCondition:t,otherSearchInfo:o})),Object(l.s)(i.loadList,e=>Object.assign(Object.assign({},e),{loading:!0})),Object(l.s)(i.getListSuccess,(e,{dataList:t,totalCount:o})=>Qe.setAll(t,Object.assign(Object.assign({},e),{loading:!1,gridDataTotal:o}))),Object(l.s)(i.getListFailure,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(l.s)(i.changePageSize,(e,{pageSize:t})=>Object.assign(Object.assign({},e),{gridState:T.set(T.cloneDeep(e.gridState),["pageInfo","take"],t)})),Object(l.s)(i.reloadList,e=>Object.assign(Object.assign({},e),{reloadToggle:!e.reloadToggle})),Object(l.s)(i.setGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{gridState:t})),Object(l.s)(i.setGridCheckedStateAction,(e,{gridCheckedState:t})=>Object.assign(Object.assign({},e),{gridCheckedState:t})),Object(l.s)(i.changePageIndex,(e,{pageIndex:t})=>Object.assign(Object.assign({},e),{gridState:T.set(T.cloneDeep(e.gridState),["pageInfo","skip"],t)})),Object(l.s)(i.upsertList,e=>Object.assign(Object.assign({},e),{reloadToggle:!e.reloadToggle})),Object(l.s)(i.openDetailPopup,e=>Object.assign(Object.assign({},e),{isOpenDetailPopup:!0})),Object(l.s)(i.closeDetailPopup,e=>Object.assign(Object.assign({},e),{isOpenDetailPopup:!1})),Object(l.s)(i.openRoomTypeMappingPopup,e=>Object.assign(Object.assign({},e),{isOpenRoomTypeMappingPopup:!0})),Object(l.s)(i.closeRoomTypeMappingPopup,e=>Object.assign(Object.assign({},e),{isOpenRoomTypeMappingPopup:!1})),Object(l.s)(i.openHistoryPopup,e=>Object.assign(Object.assign({},e),{isOpenHistoryPopup:!0})),Object(l.s)(i.closeHistoryPopup,e=>Object.assign(Object.assign({},e),{isOpenHistoryPopup:!1})),Object(l.s)(i.openAllotmentPopup,e=>Object.assign(Object.assign({},e),{isOpenAllotmentPopup:!0})),Object(l.s)(i.closeAllotmentPopup,e=>Object.assign(Object.assign({},e),{isOpenAllotmentPopup:!1})),Object(l.s)(i.openCalendarPopup,e=>Object.assign(Object.assign({},e),{isOpenCalendarPopup:!0})),Object(l.s)(i.closeCalendarPopup,e=>Object.assign(Object.assign({},e),{isOpenCalendarPopup:!1})),Object(l.s)(i.loadHistoryListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{historyList:t})),Object(l.s)(i.addSelectedDetailRowInfo,(e,{selectedDetailRowInfo:t})=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:t})),Object(l.s)(i.delSelectedDetailRowInfo,e=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:null})),Object(l.s)(i.setSelectedIncludeDays,(e,{selectedIncludeDays:t})=>Object.assign(Object.assign({},e),{selectedIncludeDays:t})),Object(l.s)(i.delSelectedIncludeDays,e=>Object.assign(Object.assign({},e),{selectedIncludeDays:null})),Object(l.s)(i.setSelectedExcludeDays,(e,{selectedExcludeDays:t})=>Object.assign(Object.assign({},e),{selectedExcludeDays:t})),Object(l.s)(i.delSelectedExcludeDays,e=>Object.assign(Object.assign({},e),{selectedExcludeDays:null})),Object(l.s)(i.addRetrievedHotelSimple,(e,{hotelCode:t,hotelNameEn:o})=>Object.assign(Object.assign({},e),{selectedHotelSimple:{hotelCode:t,hotelNameEn:o}})),Object(l.s)(i.delRetrievedHotelSimple,e=>Object.assign(Object.assign({},e),{selectedHotelSimple:null}))),Je=Object(Ke.a)({selectId:e=>e.id,sortComparer:!1}),Ze=Je.getInitialState({photoLoading:!1,vendorPhotos:null}),et=Object(l.q)(Ze,Object(l.s)(n.loadPhoto,e=>Object.assign(Object.assign({},e),{photoLoading:!0})),Object(l.s)(n.getPhotoSuccess,(e,{hotelPhotos:t,vendorPhotos:o})=>Je.setAll(t,Object.assign(Object.assign({},e),{photoLoading:!1,vendorPhotos:o}))),Object(l.s)(n.upsertPhotoSuccess,(e,{hotelPhotos:t})=>Je.updateMany(t,Object.assign({},e))));function tt(e,t){return Object(l.m)({hoHotelRoomMasterList:Be,hoHotelRoomMasterPhoto:et})(e,t)}const ot=Object(l.p)("hoHotelRoomMaster"),it=Object(l.r)(ot,e=>e.hoHotelRoomMasterList),nt=Object(l.r)(ot,e=>e.hoHotelRoomMasterPhoto),st=(Object(l.r)(it,e=>e.registerStatusList),Object(l.r)(it,e=>e.hotelTypeList),Object(l.r)(it,e=>e.starRatingList),Object(l.r)(it,e=>e.dataStatusList)),at=Object(l.r)(it,e=>e.loading),ct=Object(l.r)(it,e=>e.searchCondition),lt=Object(l.r)(it,e=>e.otherSearchInfo),rt=Object(l.r)(it,e=>e.pageSize),dt=Object(l.r)(it,e=>e.selectedDetailRowInfo),pt=Object(l.r)(it,e=>e.isOpenDetailPopup),ut=Object(l.r)(it,e=>e.historyList),ht=Object(l.r)(it,e=>e.isOpenRoomTypeMappingPopup),bt=Object(l.r)(it,e=>e.isOpenHistoryPopup),mt=Object(l.r)(it,e=>e.isOpenAllotmentPopup),gt=Object(l.r)(it,e=>e.isOpenCalendarPopup),ft=Object(l.r)(it,e=>e.selectedHotelSimple),Ot=Object(l.r)(it,e=>e.selectedIncludeDays),jt=Object(l.r)(it,e=>e.selectedExcludeDays),Ct=Qe.getSelectors(it).selectAll,vt=Object(l.r)(it,e=>e.reloadToggle),St=Object(l.r)(it,e=>e.gridState),yt=Object(l.r)(it,e=>e.gridDataTotal),Rt=Object(l.r)(it,e=>e.gridCheckedState),Ht=(Object(l.r)(it,e=>e.informationLoading),Object(l.r)(it,e=>e.vendorListLoading),Object(l.r)(it,e=>e.vendorDropdownList),Object(l.r)(nt,e=>e.photoLoading),Object(l.r)(nt,e=>e.vendorPhotos),Je.getSelectors(nt).selectAll);Object(l.r)(Ht,e=>e.map(e=>Object.assign({},e.volumnInfo)));var Dt=o("YY+H"),Mt=o("UIHd"),It=o("fXoL"),Pt=o("pfiq"),kt=o("LRne"),Lt=o("z6cu"),wt=o("eIep"),Et=o("AytR");const{API_URL:Vt}=Et.a,Tt={masterList:`${Vt}/admin/vendor/room/basic`,detailInfo:`${Vt}/admin/hotel/contents/detail-info`,photoList:`${Vt}/admin/hotel/contents/photo`,vendorDropdownList:`${Vt}/common/comp`,putMasterInfo:`${Vt}/admin/hotel/contents/master`,putDetailInfo:`${Vt}/admin/hotel/contents/detail-info`,putAllotment:`${Vt}/admin/vendor/rate-allotment/allotment`,putPhotoInfo:`${Vt}/admin/hotel/contents/photo`,commonDetailCode:`${Vt}/common/detail-code`,putMapping:`${Vt}/admin/vendor/room/mapping`,getHistories:`${Vt}/admin/vendor/log`,mapping:`${Vt}/admin/vendor/room/mapping`};var Nt=o("tpT/"),Ft=o("VMfx");let $t=(()=>{class e{constructor(e,t){this.api=e,this.languageService=t}getDetailCodeList(e){const t=T.assign({},this.api.defaultParams,{condition:e});return this.api.post(Tt.commonDetailCode,t).pipe(Object(wt.a)(e=>e.succeedYn?Object(kt.a)(e.result.list.map(e=>({label:"KO"===this.languageService.currentLanguage?e.detailCodeNameLn:e.detailCodeNameEn,value:e.detailCode}))):Object(Lt.a)(e||"api response error")))}getVendorDropdownList(e){const t=T.assign({},this.api.defaultParams,{condition:e});return this.api.post(Tt.vendorDropdownList,t).pipe(Object(wt.a)(e=>e.succeedYn?Object(kt.a)(e.result.list.map(e=>({label:e.compName,value:e.compCode}))):Object(Lt.a)(e||"api response error")))}getMasterList(e){const t=T.assign({},this.api.defaultParams,{condition:e});return this.api.post(Tt.masterList,t).pipe(Object(wt.a)(e=>{var t,o;if(e.succeedYn){const i=this._addRowid(null===(t=e.result)||void 0===t?void 0:t.list),n=(null===(o=e.result)||void 0===o?void 0:o.totalCount)||0;return Object(kt.a)({list:i,totalCount:n})}return Object(Lt.a)(e||"api response error")}))}upsertMaster(e){const t=T.assign({},this.api.defaultParams,{condition:e});return this.api.put(Tt.putMasterInfo,t).pipe(Object(wt.a)(e=>{if(e.succeedYn){const t=e.result;return Object(kt.a)(Object.assign(Object.assign({},t),{id:t.rowid}))}return Object(Lt.a)(e||"api response error")}))}getDetailInformation(e){const t=T.assign({},this.api.defaultParams,{condition:e});return this.api.post(Tt.detailInfo,t).pipe(Object(wt.a)(e=>e.succeedYn?Object(kt.a)(e.result):Object(Lt.a)(e||"api response error")))}upsertInformation(e){const t=T.assign({},this.api.defaultParams,{condition:e});return this.api.put(Tt.mapping,t).pipe(Object(wt.a)(e=>e.succeedYn&&e.result?Object(kt.a)(e.result):Object(Lt.a)(e||"api response error")))}upsertAllotment(e){const t=T.assign({},this.api.defaultParams,{condition:e});return this.api.put(Tt.putAllotment,t).pipe(Object(wt.a)(e=>e.succeedYn?Object(kt.a)(!0):Object(Lt.a)(e||"api response error")))}getDetailPhoto(e){const t=T.assign({},this.api.defaultParams,{condition:e});return this.api.post(Tt.photoList,t).pipe(Object(wt.a)(e=>{if(e.succeedYn&&e.result){const{hotelPhotos:t,vendorPhotos:o}=e.result;return Object(kt.a)({hotelPhotos:t?t.map(e=>({id:e.rowid,volumnInfo:T.cloneDeep(e)})):[],vendorPhotos:o||[]})}return Object(Lt.a)(e||"api response error")}))}upsertPhotos(e){const t=T.assign({},this.api.defaultParams,{condition:e});return this.api.put(Tt.putPhotoInfo,t).pipe(Object(wt.a)(e=>{if(e.succeedYn&&e.result){const{hotelPhotos:t,vendorPhotos:o}=e.result;return Object(kt.a)({hotelPhotos:t?t.map(e=>({id:e.rowid,volumnInfo:T.cloneDeep(e)})):[],vendorPhotos:o||[]})}return Object(Lt.a)(e||"api response error")}))}updateMapping(e){const t=T.assign({},this.api.defaultParams,{condition:e});return this.api.put(Tt.putMapping,t).pipe(Object(wt.a)(e=>e.succeedYn?Object(kt.a)(!0):Object(Lt.a)(e||"api response error")))}getRoomHistories(e){const t=T.assign({},this.api.defaultParams,{condition:e});return this.api.post(Tt.getHistories,t).pipe(Object(wt.a)(e=>Object(kt.a)(e.result.list)))}_addRowid(e){return T.isNil(e)?[]:e.map((e,t)=>Object.assign(Object.assign({},e),{rowid:String(t)}))}}return e.\u0275fac=function(t){return new(t||e)(It.bc(Nt.a),It.bc(Ft.a))},e.\u0275prov=It.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Wt=(()=>{class e{constructor(e){this.fb=e,this.generateGridColumns=()=>[{field:"hotelCode",title:"Hotel Code",width:100,style:{"text-align":"center"}},{field:"hotelNameEn",title:"Hotel Name(EN)",type:"text",width:300},{field:"vendorRoomTypeSeq",title:"Room Type SEQ",type:"text",width:120,style:{"text-align":"center"}},{field:"dataStatusName",title:"Data Status",type:"text",width:120,template:"dataStatusTpl"},{field:"localPriceAbleYn",title:"Local Price YN",type:"text",width:120,format:"yn",style:{"text-align":"center"}},{field:"roomTypeNameEn",title:"Room Type Name(EN)",type:"text",width:180},{field:"roomTypeNameKo",title:"Room Type Name(KO)",type:"text",width:180},{field:"roomTypeNameJa",title:"Room Type Name(JA)",type:"text",width:180},{field:"roomTypeNameVi",title:"Room Type Name(VI)",type:"text",width:180},{field:"roomTypeNameZh",title:"Room Type Name(ZH)",type:"text",width:180},{field:"salesStopYn",title:"Sales Stop YN",type:"text",width:120,format:"yn",style:{"text-align":"center"}},{field:"cmsPmsRoomTypes",title:"CMS/PMS Info",type:"text",width:120,template:"cmspmsYnTpl",style:{"text-align":"center"}},{field:"legacyRoomTypeCode",title:"Legacy Room Type Code",type:"text",width:180,style:{"text-align":"center"}},{field:"hardBlockYn",title:"Hard Block YN",type:"text",width:120,format:"yn",style:{"text-align":"center"}}],this.generateSearchForm=()=>this.fb.group({hotelCode:[null,[a.z.required]],vendorRoomTypeSeq:[null],vendorCompCode:[null],salesStopYn:[null],dataStatusCode:[null],localPriceAbleYn:[null],hardBlockYn:[null]}),this.initListSearchFormData=()=>({hotelCode:null,vendorCompCode:null,salesStopYn:null,vendorRoomTypeSeq:null,registerDateRange:null,dataStatusCode:null,localPriceAbleYn:null,hardBlockYn:null,sortOrder:null,limits:null}),this.generateMasterPutForm=()=>this.fb.group({rowid:[null],hotelCode:[{value:null,disabled:!0}],regionCode:[null,[a.z.required]],countryCode:[{value:null,disabled:!0}],hotelNameLn:[null],hotelNameEn:[null,[a.z.required]],hotelNameSearch:[null],hotelTypeCode:[null],registerStatusCode:[null,[a.z.required]],chainBrandCode:[null],starRating:[null],hotelFloorCount:[null],hotelRoomCount:[null],zipCode:[null],phoneNo:[null],faxNo:[null],emailAddress:[null],addressEn:[null,[a.z.required]],addressLn:[null],homepageUrl:[null],checkInTime:[null],checkOutTime:[null],latitude:[null],longitude:[null],controlRemark:[null],recommendYn:[null,[a.z.required]],updateProhibitYn:[null,[a.z.required]]}),this.initMasterPutFormData=()=>({rowid:null,hotelCode:null,regionCode:null,countryCode:null,hotelNameEn:null,hotelNameLn:null,hotelNameSearch:null,hotelTypeCode:"HT-019",registerStatusCode:"RST01",chainBrandCode:null,starRating:null,hotelFloorCount:null,hotelRoomCount:null,zipCode:null,phoneNo:null,faxNo:null,emailAddress:null,addressEn:null,addressLn:null,homepageUrl:null,checkInTime:null,checkOutTime:null,latitude:null,longitude:null,controlRemark:null,recommendYn:!1,updateProhibitYn:!1}),this.generateDetailInfoPutForm=()=>this.fb.group({rowid:[null],hotelCode:[null],hotelIntroEn:[null],hotelIntroLn:[null,[a.z.required]],hotelGetThereEn:[null],hotelGetThereLn:[null],hotelFacilityEn:[null],hotelFacilityLn:[null],roomFacilityEn:[null],roomFacilityLn:[null],hotelAttractionEn:[null],hotelAttractionLn:[null],hotelCautionEn:[null],hotelCautionLn:[null],specialDescEn:[null],specialDescLn:[null],addItemTitleEn:[null],addItemTitleLn:[null],addItemDetailLn:[null],addItemDetailEn:[null],redirectUrl:[null]}),this.initDetailInfoPutFormData=()=>({rowid:null,hotelCode:null,hotelIntroEn:null,hotelIntroLn:null,hotelGetThereEn:null,hotelGetThereLn:null,hotelFacilityEn:null,hotelFacilityLn:null,roomFacilityEn:null,roomFacilityLn:null,hotelAttractionEn:null,hotelAttractionLn:null,hotelCautionEn:null,hotelCautionLn:null,specialDescEn:null,specialDescLn:null,addItemTitleEn:null,addItemTitleLn:null,addItemDetailLn:null,addItemDetailEn:null,redirectUrl:new URL(Tt.detailInfo).pathname})}folderRequiredValidator(e){if(!e)return null;const t=T.isNil(e.get("folderSeq").value),o=T.isNil(e.get("folderNameLn").value)||""===e.get("folderNameLn").value;return t&&o?{folderInfoRequired:!0}:null}deviceRequiredValidator(e){return e&&!1===e.get("pcDisplayYn").value&&!1===e.get("mobileAppDisplayYn").value&&!1===e.get("mobileWebDisplayYn").value?{shouldNotAllFalse:!0}:null}planDeviceRequiredValidator(e){return e&&!1===e.get("planPcDisplayYn").value&&!1===e.get("planMobileAppDisplayYn").value&&!1===e.get("planMobileWebDisplayYn").value?{shouldNotAllPlanFalse:!0}:null}priceOverValidators(e,t){return o=>{if(!o)return null;const i=o.parent;return i&&"R"===i.get(t).value&&o.value>e?{priceOvered:!0}:null}}}return e.\u0275fac=function(t){return new(t||e)(It.bc(a.f))},e.\u0275prov=It.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),xt=(()=>{class e{constructor(e){this.fb=e,this.initMappingPutFormData=()=>({cmsPmsCompCode:null,cmsPmsRoomTypeCode:null,insertOrUpdate:"U",vendorRoomTypeSeq:null}),this.generateMappingPutForm=()=>this.fb.group({cmsPmsCompCode:[null,[a.z.required]],cmsPmsRoomTypeCode:[null,[a.z.required]],insertOrUpdate:["U",[a.z.required]],vendorRoomTypeSeq:[null,[a.z.required]]})}}return e.\u0275fac=function(t){return new(t||e)(It.bc(a.f))},e.\u0275prov=It.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var At=o("EsKh"),_t=o("+Sob"),Yt=o("gbCm"),zt=o("U6NN");const qt=function(){return["hotelCode","hotelNameEn"]},Ut=function(){return["CMP07","CMP08"]},Gt=function(e){return{compTypeCodes:e}},Kt=function(){return["compCode","compName"]};let Qt=(()=>{class e{constructor(e,t,o){this._dataService=e,this.store=t,this.alertService=o,this.clickSearchEvent=new It.n,this.clickResetEvent=new It.n,this._$unsubscribe=new P.a,this.useYnOptions=[{label:"Y",value:!0},{label:"N",value:!1}],this.searchForm=e.generateSearchForm()}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(e){this._otherSearchInfo=e,this._setOtherSearchInfo(e)}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}get minDateRange(){return T.head(this.searchForm.get("registerDateRange").value)}ngOnInit(){this._initThisState(),this._initSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.searchForm.invalid)return void(this.checkValid=!0);const e=this.setSearchCondition(),t=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:e,otherSearchInfo:t}),this.checkValid=!1}onReset(){this.store.dispatch(i.delRetrievedHotelSimple()),this.clickResetEvent.emit()}onSelectHotel(e){const{hotelCode:t,hotelNameEn:o}=e;this.store.dispatch(i.addRetrievedHotelSimple({hotelCode:t,hotelNameEn:o}))}checkIsInvalid(e){return this.checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}setSearchCondition(){const e=this._dataService.initListSearchFormData(),t=Object.assign({},T.pick(this.searchForm.value,Object.keys(e)));return T.omitBy(t,T.isNil)}_setSearchFormData(e){const t=this._dataService.initListSearchFormData();return T.isEmpty(e)?t:Object.assign({},t,T.pick(e,Object.keys(t)))}_setOtherSearchInfo(e){this.vendorCompInput=(null==e?void 0:e.vendorCompInput)||null,this.hotelInput=(null==e?void 0:e.hotelInput)||null}_setOtherSearchCondition(){const e={};return this.autoCopmpletes.forEach(t=>{Object.assign(e,t.getInputValue())}),e}_initThisState(){this.checkValid=!1,this.isShowmore=!1}_initSubscription(){}}return e.\u0275fac=function(t){return new(t||e)(It.Qb(Wt),It.Qb(l.h),It.Qb(At.a))},e.\u0275cmp=It.Kb({type:e,selectors:[["app-ho-hotel-room-master-search"]],viewQuery:function(e,t){var o;1&e&&It.Xc(Pt.a,!0),2&e&&It.Dc(o=It.gc())&&(t.autoCopmpletes=o)},inputs:{dataStatusList:"dataStatusList",otherSearchInfo:"otherSearchInfo",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:38,vars:21,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-1"],[1,"form-label"],["formControlName","hotelCode","apiUrl","common/hotel/list","dataKey","hotelCode","inputFieldFormat","{0} - &{1}","placeholder","Code or Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","inputFieldFormatKeyList","isInvalid","onSelect"],["formControlName","vendorRoomTypeSeq","valueType","number",1,"d-inline-flex","flex-fill"],["apiUrl","common/comp","formControlName","vendorCompCode","dataKey","compCode","inputFieldFormat","[{0}] {1}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","salesStopYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","dataStatusCode",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","localPriceAbleYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","hardBlockYn",1,"d-inline-flex","flex-fill",3,"options"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(e,t){1&e&&(It.Wb(0,"form",0),It.fc("ngSubmit",(function(){return t.onSubmit()})),It.Wb(1,"div",1),It.Wb(2,"div",2),It.Wb(3,"div",3),It.Wb(4,"span",4),It.Wb(5,"sup"),It.Pc(6,"Hotel"),It.Vb(),It.Vb(),It.Wb(7,"app-auto-complete",5),It.fc("onSelect",(function(e){return t.onSelectHotel(e)})),It.Vb(),It.Vb(),It.Wb(8,"div",3),It.Wb(9,"span",4),It.Pc(10,"Room Type SEQ"),It.Vb(),It.Rb(11,"app-input-text",6),It.Vb(),It.Wb(12,"div",3),It.Wb(13,"span",4),It.Pc(14,"CMS/PMS"),It.Vb(),It.Rb(15,"app-auto-complete",7),It.Vb(),It.Wb(16,"div",3),It.Wb(17,"span",4),It.Pc(18,"Stop YN"),It.Vb(),It.Rb(19,"app-selectbox",8),It.Vb(),It.Vb(),It.Wb(20,"div",2),It.Wb(21,"div",3),It.Wb(22,"span",4),It.Pc(23,"Data Status"),It.Vb(),It.Rb(24,"app-selectbox",9),It.Vb(),It.Wb(25,"div",3),It.Wb(26,"span",4),It.Pc(27,"Local Price YN"),It.Vb(),It.Rb(28,"app-selectbox",10),It.Vb(),It.Wb(29,"div",3),It.Wb(30,"span",4),It.Pc(31,"Hard Block"),It.Vb(),It.Rb(32,"app-selectbox",11),It.Vb(),It.Vb(),It.Vb(),It.Wb(33,"div",12),It.Wb(34,"button",13),It.Pc(35,"Search"),It.Vb(),It.Wb(36,"button",14),It.fc("click",(function(){return t.onReset()})),It.Pc(37,"Reset"),It.Vb(),It.Vb(),It.Vb()),2&e&&(It.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),It.Cb(7),It.pc("inputFieldValue",t.hotelInput)("inputId","hotelInput")("apiSearchTerm","keyword")("inputFieldFormatKeyList",It.tc(16,qt))("isInvalid",t.checkIsInvalid("hotelCode")),It.Cb(8),It.pc("inputFieldValue",t.vendorCompInput)("inputId","vendorCompInput")("apiCondition",It.uc(18,Gt,It.tc(17,Ut)))("apiSearchTerm","compName")("inputFieldFormatKeyList",It.tc(20,Kt)),It.Cb(4),It.pc("options",t.useYnOptions),It.Cb(5),It.pc("options",t.dataStatusList),It.Cb(4),It.pc("options",t.useYnOptions),It.Cb(4),It.pc("options",t.useYnOptions))},directives:[a.B,a.s,a.k,_t.a,Pt.a,a.r,a.i,Yt.a,zt.a],styles:[""],changeDetection:0}),e})(),Xt=(()=>{class e{constructor(){this.clickAddEvent=new It.n,this.clickAllotmentEvent=new It.n,this.clickRoomMasterMappingEvent=new It.n,this.clickHistoryEvent=new It.n,this.changePageSizeEvent=new It.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onClickAdd(){this.clickAddEvent.emit()}onClickAllotment(){this.clickAllotmentEvent.emit()}onClickRoomMasterMapping(){this.clickRoomMasterMappingEvent.emit()}onClickHistory(){this.clickHistoryEvent.emit()}onChangePageSize(e){this.changePageSizeEvent.emit(e.value)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=It.Kb({type:e,selectors:[["app-ho-hotel-room-master-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount",selectedHotelSimple:"selectedHotelSimple"},outputs:{clickAddEvent:"clickAddEvent",clickAllotmentEvent:"clickAllotmentEvent",clickRoomMasterMappingEvent:"clickRoomMasterMappingEvent",clickHistoryEvent:"clickHistoryEvent",changePageSizeEvent:"changePageSizeEvent"},decls:12,vars:7,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"disabled","click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&(It.Wb(0,"div",0),It.Wb(1,"strong",1),It.Pc(2),It.Vb(),It.Wb(3,"div",2),It.Wb(4,"button",3),It.fc("click",(function(){return t.onClickAdd()})),It.Pc(5,"New Room Type"),It.Vb(),It.Wb(6,"button",3),It.fc("click",(function(){return t.onClickRoomMasterMapping()})),It.Pc(7,"Room Type Mapping"),It.Vb(),It.Wb(8,"button",3),It.fc("click",(function(){return t.onClickHistory()})),It.Pc(9,"History"),It.Vb(),It.Wb(10,"div",4),It.Wb(11,"app-selectbox",5),It.fc("onChange",(function(e){return t.onChangePageSize(e)})),It.Vb(),It.Vb(),It.Vb(),It.Vb()),2&e&&(It.Cb(2),It.Qc(t.loading?"":t.totalCount),It.Cb(2),It.pc("disabled",!t.selectedHotelSimple),It.Cb(2),It.pc("disabled",!t.selectedHotelSimple),It.Cb(2),It.pc("disabled",!t.selectedHotelSimple),It.Cb(3),It.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[zt.a,a.r,a.u],styles:[""],changeDetection:0}),e})();var Bt=o("A3iJ"),Jt=o("yVuV"),Zt=o("pb6r");function eo(e,t){if(1&e){const e=It.Xb();It.Wb(0,"app-checkbox",23),It.fc("onChange",(function(t){return It.Fc(e),It.hc(2).onCheckAll(t)})),It.Vb()}if(2&e){const e=It.hc(2);It.pc("ngModel",e.isAllChecked)}}function to(e,t){if(1&e){const e=It.Xb();It.Wb(0,"app-checkbox",24),It.fc("onChange",(function(o){It.Fc(e);const i=t.$implicit;return It.hc(2).onCheckRow(o,i)})),It.Vb()}if(2&e){const e=t.$implicit,o=It.hc(2);It.pc("value",e.rowid)("ngModel",o.checkedRows)}}function oo(e,t){1&e&&It.Pc(0),2&e&&It.Rc(" ",t.rowIndex+1," ")}const io=function(){return{allowUnsort:!0,mode:"multiple"}};function no(e,t){if(1&e){const e=It.Xb();It.Ub(0),It.Wb(1,"kendo-grid",1),It.fc("pageChange",(function(t){return It.Fc(e),It.hc().onPageChange(t)}))("sortChange",(function(t){return It.Fc(e),It.hc().onSortChange(t)}))("filterChange",(function(t){return It.Fc(e),It.hc().onFilterChange(t)}))("cellClick",(function(t){return It.Fc(e),It.hc().onCellClick(t)}))("dblclick",(function(t){return It.Fc(e),It.hc().onDblClick(t)})),It.Wb(2,"kendo-grid-column",2),It.Nc(3,eo,1,1,"ng-template",3),It.Nc(4,to,1,2,"ng-template",4),It.Vb(),It.Wb(5,"kendo-grid-column",5),It.Nc(6,oo,1,1,"ng-template",4),It.Vb(),It.Rb(7,"kendo-grid-column",6),It.Rb(8,"kendo-grid-column",7),It.Rb(9,"kendo-grid-column",8),It.Rb(10,"kendo-grid-column",9),It.Rb(11,"kendo-grid-column",10),It.Rb(12,"kendo-grid-column",11),It.Rb(13,"kendo-grid-column",12),It.Rb(14,"kendo-grid-column",13),It.Rb(15,"kendo-grid-column",14),It.Rb(16,"kendo-grid-column",15),It.Rb(17,"kendo-grid-column",16),It.Rb(18,"kendo-grid-column",17),It.Rb(19,"kendo-grid-column",18),It.Rb(20,"kendo-grid-column",19),It.Rb(21,"kendo-grid-column",20),It.Rb(22,"kendo-grid-column",21),It.Rb(23,"kendo-grid-column",22),It.Vb(),It.Tb()}if(2&e){const e=It.hc();It.Cb(1),It.pc("data",e.gridView)("loading",e.gridLoading)("resizable",!0)("reorderable",!0)("pageable",!0)("skip",e.pageInfo.skip)("pageSize",e.pageInfo.pageSize)("sortable",It.tc(28,io))("sort",e.sortInfo)("filterable",!0)("filter",e.filterInfo),It.Cb(6),It.pc("width",100),It.Cb(1),It.pc("width",300),It.Cb(1),It.pc("width",300),It.Cb(1),It.pc("width",150),It.Cb(1),It.pc("width",80),It.Cb(1),It.pc("width",200),It.Cb(1),It.pc("width",150),It.Cb(1),It.pc("width",180),It.Cb(1),It.pc("width",400),It.Cb(1),It.pc("width",180),It.Cb(1),It.pc("width",200),It.Cb(1),It.pc("width",200),It.Cb(1),It.pc("width",100),It.Cb(1),It.pc("width",100),It.Cb(1),It.pc("width",180),It.Cb(1),It.pc("width",100),It.Cb(1),It.pc("width",180)}}function so(e,t){1&e&&(It.Wb(0,"div"),It.Pc(1," \ub85c\ub529\uc911...\n"),It.Vb())}let ao=(()=>{class e{constructor(){this.pageChangeEvent=new It.n,this.sortChangeEvent=new It.n,this.filterChangeEvent=new It.n,this.checkRowEvent=new It.n,this.checkAllEvent=new It.n,this.dbClickRowEvent=new It.n,this.clickedRowSubject=new P.a,this.unsubscribe$=new P.a}get dataList(){return this._dataList}set dataList(e){this._dataList=e,this.gridData=T.cloneDeep(e),this._loadCurrentView()}get pageInfo(){return this._pageInfo}set pageInfo(e){this._pageInfo=e,this._loadCurrentView()}get sortInfo(){return this._sortInfo}set sortInfo(e){this.isSortChange=!0,this._sortInfo=e,this._loadCurrentView()}get filterInfo(){return this._filterInfo}set filterInfo(e){this.isFilterChange=!0,this._filterInfo=e,this._loadCurrentView()}get checkedRows(){return this._checkedRows}set checkedRows(e){this._checkedRows=e.length>0?e:null}get isAllChecked(){return this.checkedRows&&this.checkedRows.length===this.pageInfo.pageSize}ngOnInit(){this._initClickSubscription()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onPageChange(e){this.pageChangeEvent.emit(e.skip)}onSortChange(e){this.gridLoading=!0,setTimeout(()=>{this.sortChangeEvent.emit(e),this.pageChangeEvent.emit(0)},0)}onFilterChange(e){this.gridLoading=!0,setTimeout(()=>{this.filterChangeEvent.emit(e),this.pageChangeEvent.emit(0)},0)}onCheckAll(e){if(!e)return void this.checkAllEvent.emit({isChecked:e});if(this.gridView.data.length<1)return;const t=this.gridView.data.map(e=>e&&e.rowid);this.checkAllEvent.emit({isChecked:e,rowids:t})}onCheckRow(e,t){this.checkRowEvent.emit({rowid:t.rowid,isChecked:e})}onCellClick(e){this.isDbClick?this.isDbClick=!1:this.clickedRowItem=e.dataItem}onDblClick(e){this.clickedRowItem&&(this.isDbClick=!0,this.clickedRowSubject.next("double"))}_loadCurrentView(){if(!this.dataList||this.dataList.length<1||!this.pageInfo||!this.sortInfo||!this.filterInfo)return;this.isFilterChange&&(this.isFilterChange=!1,this.gridData=Object(Jt.c)(Object(Jt.a)(this.dataList,this.filterInfo),this.sortInfo)),this.isSortChange&&!this.isFilterChange&&(this.isSortChange=!1,this.gridData=Object(Jt.c)(this.gridData,this.sortInfo));const{skip:e,pageSize:t}=this.pageInfo,o=this.gridData.slice(e,e+t);this.gridView={data:o,total:this.gridData.length},this.gridLoading=!1}_initClickSubscription(){const[e,t]=Object(Bt.a)(e=>"single"===e)(this.clickedRowSubject.pipe(Object(L.a)(500),Object(E.a)(this.unsubscribe$)));e.subscribe(()=>{}),t.subscribe(()=>{this.dbClickRowEvent.emit(T.cloneDeep(this.clickedRowItem)),this.clickedRowItem=void 0})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=It.Kb({type:e,selectors:[["app-ho-hotel-room-master-grid"]],inputs:{loading:"loading",dataList:"dataList",pageInfo:"pageInfo",sortInfo:"sortInfo",filterInfo:"filterInfo",checkedRows:"checkedRows"},outputs:{pageChangeEvent:"pageChangeEvent",sortChangeEvent:"sortChangeEvent",filterChangeEvent:"filterChangeEvent",checkRowEvent:"checkRowEvent",checkAllEvent:"checkAllEvent",dbClickRowEvent:"dbClickRowEvent"},decls:2,vars:2,consts:[[4,"ngIf"],[2,"max-height","900px",3,"data","loading","resizable","reorderable","pageable","skip","pageSize","sortable","sort","filterable","filter","pageChange","sortChange","filterChange","cellClick","dblclick"],["title","\uc120\ud0dd","width","50"],["kendoGridHeaderTemplate",""],["kendoGridCellTemplate",""],["title","No","width","50"],["field","hotelCode","title","\ud638\ud154\ucf54\ub4dc",3,"width"],["field","hotelNameEn","title","\ud638\ud154\uc774\ub984(\uc601\uc5b4)",3,"width"],["field","hotelNameLn","title","\ud638\ud154\uc774\ub984(\ud55c\uad6d\uc5b4)",3,"width"],["field","hotelChainNameLn","title","\ud638\ud154\uccb4\uc778",3,"width"],["field","starRating","title","\ub4f1\uae09",3,"width"],["field","cityNameLn","title","\ub3c4\uc2dc\uba85",3,"width"],["field","countryNameLn","title","\uad6d\uac00\uba85",3,"width"],["field","hotelTyepName","title","\ud638\ud154\ud0c0\uc785",3,"width"],["field","addressLn","title","\uc8fc\uc18c",3,"width"],["field","phoneNo","title","\uc804\ud654\ubc88\ud638",3,"width"],["field","latitude","title","\uc704\ub3c4",3,"width"],["field","longitude","title","\uacbd\ub3c4",3,"width"],["field","registerStatusName","title","\ub4f1\ub85d\uc0c1\ud0dc",3,"width"],["field","lastUpdateName","title","\ucd5c\uc885\uc785\ub825\uc790",3,"width"],["field","lastUpdateDatetime","title","\ucd5c\uc885\uc785\ub825\uc2dc\uac04",3,"width"],["field","firstInsertName","title","\ucd5c\ucd08\uc785\ub825\uc790",3,"width"],["field","firstInsertDatetime","title","\ucd5c\ucd08\uc785\ub825\uc2dc\uac04",3,"width"],["styleClass","only","binary","true",3,"ngModel","onChange"],["styleClass","only",3,"value","ngModel","onChange"]],template:function(e,t){1&e&&(It.Nc(0,no,24,29,"ng-container",0),It.Nc(1,so,2,0,"div",0)),2&e&&(It.pc("ngIf",!t.loading),It.Cb(1),It.pc("ngIf",t.loading))},directives:[s.o,d.l,d.d,d.n,d.c,Zt.a,a.r,a.u],styles:[""],changeDetection:0}),e})();const co=function(){return{standalone:!0}},lo=function(){return["CMP07","CMP08"]},ro=function(e){return{compTypeCodes:e}},po=function(){return["compCode","compName"]};let uo=(()=>{class e{constructor(e){this.mappingData=e,this.submitEvent=new It.n,this.closeEvent=new It.n,this.form=this.mappingData.generateMappingPutForm()}ngOnInit(){var e,t;this.checkValid=!1,this.form.get("vendorRoomTypeSeq").patchValue(null===(e=this.roomDetail)||void 0===e?void 0:e.vendorRoomTypeSeq),this.form.get("hotelCode").patchValue(null===(t=this.roomDetail)||void 0===t?void 0:t.hotelCode)}onSubmit(){this.form.invalid?this.checkValid=!0:(this.checkValid=!1,this.submitEvent.emit({condition:this.form.getRawValue()}))}onClose(){this.closeEvent.emit()}checkIsInvalid(e){return this.checkValid&&this.form.get(e)&&this.form.get(e).invalid}}return e.\u0275fac=function(t){return new(t||e)(It.Qb(xt))},e.\u0275cmp=It.Kb({type:e,selectors:[["app-ho-hotel-room-type-mapping"]],inputs:{roomDetail:"roomDetail"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:36,vars:20,consts:[[1,"table","table-bordered",3,"formGroup"],["width","13%"],["scope","row",1,"th-bg"],[3,"ngModel","disabled","ngModelOptions"],["apiUrl","common/comp","formControlName","cmsPmsCompCode","dataKey","compCode","inputFieldFormat","[{0}] {1}","placeholder","Name",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList","isInvalid"],["formControlName","cmsPmsRoomTypeCode",3,"isInvalid"],[1,"button-area","align-r","mt10"],[1,"btn","btn-secondary","sm",3,"click"]],template:function(e,t){1&e&&(It.Wb(0,"form",0),It.Wb(1,"table"),It.Wb(2,"caption"),It.Pc(3," Room Type Mapping with CMS/PMS "),It.Vb(),It.Wb(4,"colgroup"),It.Rb(5,"col",1),It.Rb(6,"col"),It.Vb(),It.Wb(7,"tbody"),It.Wb(8,"tr"),It.Wb(9,"th",2),It.Wb(10,"sup"),It.Pc(11,"Room Type SEQ"),It.Vb(),It.Vb(),It.Wb(12,"td"),It.Rb(13,"app-input-text",3),It.Vb(),It.Vb(),It.Wb(14,"tr"),It.Wb(15,"th",2),It.Wb(16,"sup"),It.Pc(17,"Room Type Name(EN)"),It.Vb(),It.Vb(),It.Wb(18,"td"),It.Rb(19,"app-input-text",3),It.Vb(),It.Vb(),It.Wb(20,"tr"),It.Wb(21,"th",2),It.Wb(22,"sup"),It.Pc(23,"CMS/PMS Comp"),It.Vb(),It.Vb(),It.Wb(24,"td"),It.Rb(25,"app-auto-complete",4),It.Vb(),It.Vb(),It.Wb(26,"tr"),It.Wb(27,"th",2),It.Pc(28,"CMS/PMS Room Type Code"),It.Vb(),It.Wb(29,"td"),It.Rb(30,"app-input-text",5),It.Vb(),It.Vb(),It.Vb(),It.Vb(),It.Vb(),It.Wb(31,"div",6),It.Wb(32,"a",7),It.fc("click",(function(){return t.onSubmit()})),It.Pc(33,"Save"),It.Vb(),It.Wb(34,"a",7),It.fc("click",(function(){return t.onClose()})),It.Pc(35,"Close"),It.Vb(),It.Vb()),2&e&&(It.pc("formGroup",t.form),It.Cb(13),It.pc("ngModel",null==t.roomDetail?null:t.roomDetail.vendorRoomTypeSeq)("disabled",!0)("ngModelOptions",It.tc(14,co)),It.Cb(6),It.pc("ngModel",null==t.roomDetail?null:t.roomDetail.roomTypeNameEn)("disabled",!0)("ngModelOptions",It.tc(15,co)),It.Cb(6),It.pc("inputFieldValue",t.vendorCompInput)("inputId","vendorCompInput")("apiCondition",It.uc(17,ro,It.tc(16,lo)))("apiSearchTerm","compName")("inputFieldFormatKeyList",It.tc(19,po))("isInvalid",t.checkIsInvalid("cmsPmsCompCode")),It.Cb(5),It.pc("isInvalid",t.checkIsInvalid("cmsPmsRoomTypeCode")))},directives:[a.B,a.s,a.k,Yt.a,a.r,a.u,Pt.a,a.i],encapsulation:2,changeDetection:0}),e})();function ho(e,t){if(1&e&&(It.Wb(0,"tr"),It.Wb(1,"th",8),It.Pc(2,"Room Type Name"),It.Vb(),It.Wb(3,"td",9),It.Pc(4),It.Vb(),It.Wb(5,"td",9),It.Pc(6),It.Vb(),It.Wb(7,"td",9),It.Pc(8),It.Vb(),It.Vb()),2&e){const e=t.$implicit;It.Cb(4),It.Sc("",e.oldValue," \u2192 ",e.newValue,""),It.Cb(2),It.Qc(e.changeDatetime),It.Cb(2),It.Qc(e.changeActionName)}}function bo(e,t){if(1&e&&(It.Ub(0),It.Nc(1,ho,9,4,"tr",7),It.Tb()),2&e){const e=It.hc();It.Cb(1),It.pc("ngForOf",e.histories)}}function mo(e,t){1&e&&(It.Wb(0,"td",10),It.Pc(1,"No records available."),It.Vb())}let go=(()=>{class e{constructor(){this.closeEvent=new It.n}ngOnInit(){}onClose(){this.closeEvent.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=It.Kb({type:e,selectors:[["app-ho-hotel-room-master-history"]],inputs:{histories:"histories"},outputs:{closeEvent:"closeEvent"},decls:26,vars:2,consts:[[1,"table","table-bordered"],["width","15%"],["scope","col",1,"align-c"],[4,"ngIf","ngIfElse"],["emptyLogList",""],[1,"button-area","align-r","mt10"],[1,"btn","btn-secondary","sm",3,"click"],[4,"ngFor","ngForOf"],["scope","row"],[1,"align-c"],["colspan","5",1,"align-c",2,"font-size","13px"]],template:function(e,t){if(1&e&&(It.Wb(0,"div",0),It.Wb(1,"table"),It.Wb(2,"caption"),It.Pc(3," History "),It.Vb(),It.Wb(4,"colgroup"),It.Rb(5,"col",1),It.Rb(6,"col"),It.Rb(7,"col",1),It.Rb(8,"col",1),It.Vb(),It.Wb(9,"thead"),It.Wb(10,"tr"),It.Wb(11,"th",2),It.Pc(12,"Item"),It.Vb(),It.Wb(13,"th",2),It.Pc(14,"Change Detail"),It.Vb(),It.Wb(15,"th",2),It.Pc(16,"Update Time"),It.Vb(),It.Wb(17,"th",2),It.Pc(18,"Update User"),It.Vb(),It.Vb(),It.Vb(),It.Wb(19,"tbody"),It.Nc(20,bo,2,1,"ng-container",3),It.Nc(21,mo,2,0,"ng-template",null,4,It.Oc),It.Vb(),It.Vb(),It.Vb(),It.Wb(23,"div",5),It.Wb(24,"a",6),It.fc("click",(function(){return t.onClose()})),It.Pc(25,"Close"),It.Vb(),It.Vb()),2&e){const e=It.Ec(22);It.Cb(20),It.pc("ngIf",(null==t.histories?null:t.histories.length)>0)("ngIfElse",e)}},directives:[s.o,s.n],encapsulation:2,changeDetection:0}),e})();var fo=o("bMKz"),Oo=o("5To1"),jo=o("kDLv"),Co=o("RtN6"),vo=o("pybq"),So=o("EfGc");function yo(e,t){1&e&&(It.Wb(0,"span"),It.Pc(1,"Y"),It.Vb())}function Ro(e,t){1&e&&(It.Wb(0,"span"),It.Pc(1,"N"),It.Vb())}function Ho(e,t){if(1&e&&(It.Nc(0,yo,2,0,"span",17),It.Nc(1,Ro,2,0,"span",17)),2&e){const e=t.$implicit;It.pc("ngIf",!0===e.salesStopYn),It.Cb(1),It.pc("ngIf",!1===e.salesStopYn)}}function Do(e,t){1&e&&(It.Wb(0,"span"),It.Pc(1,"Y"),It.Vb())}function Mo(e,t){1&e&&(It.Wb(0,"span"),It.Pc(1,"N"),It.Vb())}function Io(e,t){if(1&e&&(It.Nc(0,Do,2,0,"span",17),It.Nc(1,Mo,2,0,"span",17)),2&e){const e=t.$implicit;It.pc("ngIf",null!=e.cmsPmsRoomTypes),It.Cb(1),It.pc("ngIf",null==e.cmsPmsRoomTypes)}}function Po(e,t){if(1&e&&(It.Wb(0,"span"),It.Pc(1),It.Vb()),2&e){const e=t.$implicit,o=It.hc();It.Cb(1),It.Qc(o.getDataStatusName(e.dataStatusCode))}}function ko(e,t){if(1&e){const e=It.Xb();It.Wb(0,"app-room-detail",18),It.fc("closeEvent",(function(){return It.Fc(e),It.hc().closeUpsertHandler()}))("reloadEvent",(function(){return It.Fc(e),It.hc().reloadEventHandler()})),It.ic(1,"async"),It.ic(2,"async"),It.Vb()}if(2&e){const e=It.hc();It.pc("selectedHotelSimple",It.jc(1,2,e.selectedHotelSimple$))("masterInfo",It.jc(2,4,e.selectedMasterItem$))}}function Lo(e,t){if(1&e){const e=It.Xb();It.Wb(0,"app-ho-hotel-room-type-mapping",19),It.fc("closeEvent",(function(){return It.Fc(e),It.hc().closeMappingHandler()}))("submitEvent",(function(t){return It.Fc(e),It.hc().upsertMappingHandler(t)})),It.ic(1,"async"),It.Vb()}if(2&e){const e=It.hc();It.pc("roomDetail",It.jc(1,1,e.selectedMasterItem$))}}function wo(e,t){if(1&e){const e=It.Xb();It.Wb(0,"app-ho-hotel-room-master-history",20),It.fc("closeEvent",(function(){return It.Fc(e),It.hc().closeHistoryHandler()})),It.ic(1,"async"),It.Vb()}if(2&e){const e=It.hc();It.pc("histories",It.jc(1,1,e.historyList$))}}function Eo(e,t){if(1&e){const e=It.Xb();It.Wb(0,"app-allotment-detail",21),It.fc("openCalendarEvent",(function(t){return It.Fc(e),It.hc().openCalendarHandler(t)}))("submitEvent",(function(t){return It.Fc(e),It.hc().saveAllotmentHandler(t)}))("closeEvent",(function(){return It.Fc(e),It.hc().closeAllotmentHandler()})),It.ic(1,"async"),It.ic(2,"async"),It.ic(3,"async"),It.ic(4,"async"),It.Vb()}if(2&e){const e=It.hc();It.pc("roomList",It.jc(1,4,e.gridDataList$))("includeDays",It.jc(2,6,e.selectedIncludeDays$))("excludeDays",It.jc(3,8,e.selectedExcludeDays$))("hotelSimpleInfo",It.jc(4,10,e.selectedHotelSimple$))}}function Vo(e,t){if(1&e){const e=It.Xb();It.Wb(0,"app-calendar-view",22),It.fc("submitEvent",(function(t){return It.Fc(e),It.hc().selectedDateHandler(t)}))("closeEvent",(function(){return It.Fc(e),It.hc().closeCalendarHandler()})),It.Vb()}if(2&e){const e=It.hc();It.pc("isPreview",e.isCalendarPreview)("minDate",e.minDate)("subTextDatas",e.subTextDatas)("validDateRange",e.validDateRange)}}const To=function(e,t,o){return{useYnTpl:e,cmspmsYnTpl:t,dataStatusTpl:o}};let No=(()=>{class e{constructor(e,t,o,i,n,s,a){this.store=e,this._dataService=t,this.alertService=o,this.authStore=i,this.UserConditionService=n,this.calendarService=s,this._roomDetailStore=a,this.unsubscribe$=new P.a,this.dataStatusList$=e.pipe(Object(l.u)(st)),this.loading$=e.pipe(Object(l.u)(at)),this.searchCondition$=e.pipe(Object(l.u)(ct)),this.otherSearchInfo$=e.pipe(Object(l.u)(lt)),this.pageSize$=e.pipe(Object(l.u)(rt)),this.gridDataList$=e.pipe(Object(l.u)(Ct)),this.isOpenDetailPopup$=e.pipe(Object(l.u)(pt)),this.isOpenRoomTypeMappingPopup$=e.pipe(Object(l.u)(ht)),this.isOpenHistoryPopup$=e.pipe(Object(l.u)(bt)),this.isOpenAllotmentPopup$=e.pipe(Object(l.u)(mt)),this.isOpenCalendarPopup$=e.pipe(Object(l.u)(gt)),this.gridState$=e.pipe(Object(l.u)(St)),this.gridDataTotalCount$=e.pipe(Object(l.u)(yt)),this.gridCheckedState$=e.pipe(Object(l.u)(Rt)),this.reloadToggle$=e.pipe(Object(l.u)(vt)),this.historyList$=this.store.pipe(Object(l.u)(ut)),this.selectedMasterItem$=e.pipe(Object(l.u)(dt)),this.selectedHotelSimple$=e.pipe(Object(l.u)(ft)),this.selectedIncludeDays$=e.pipe(Object(l.u)(Ot)),this.selectedExcludeDays$=e.pipe(Object(l.u)(jt)),this.columns=this._dataService.generateGridColumns(),this.storeId$=i.pipe(Object(l.u)(Dt.o)),this.reloadToggleFromRoomDetail$=this._roomDetailStore.pipe(Object(l.u)(vt)),this._initSubscription()}ngOnInit(){this.store.dispatch(i.loadDataStatusList({condition:{masterCode:"VD009"}})),this.store.dispatch(n.loadVendorDropdownList({condition:{compTypeCodes:["CMP06"],limits:[0,100]}})),this.storeId$.subscribe(e=>this._storeId=e),this.initSearchCondition()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(i.initStateAction()),this.store.dispatch(i.setGridCheckedStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}changePageSizeHandler(e){this.store.dispatch(i.changePageSize({pageSize:e}))}clickAddHandler(){this.store.dispatch(i.openDetailPopup())}clickAllotmentHandler(){this.store.dispatch(i.openAllotmentPopup())}clickRoomTypeMappingHandler(){const e=this.gridEl.checkedDataList;1===(null==e?void 0:e.length)?(this.store.dispatch(i.addSelectedDetailRowInfo({selectedDetailRowInfo:T.cloneDeep(e[0])})),this.store.dispatch(i.openRoomTypeMappingPopup())):this.alertService.alert(0===(null==e?void 0:e.length)?"There are no items selected.":"Select only one item.")}clickHistoryHandler(){const e=this.gridEl.checkedDataList;if(1===(null==e?void 0:e.length)){const t=e.map(e=>e.vendorRoomTypeSeq);this.store.dispatch(i.loadHistoryList({condition:{roomOrPlan:"R",roomOrPlanSeq:t[0]}})),this.store.dispatch(i.openHistoryPopup())}else this.alertService.alert(0===(null==e?void 0:e.length)?"There are no items selected.":"Select only one item.")}upsertMappingHandler({condition:e}){this.store.dispatch(i.updateMappingAction({condition:e}))}clickSearchHandler({searchCondition:e,otherSearchInfo:t}){this.store.dispatch(i.changeSearchCondition({searchCondition:e,otherSearchInfo:t})),this.store.dispatch(i.changePageIndex({pageIndex:0})),this.UserConditionService.setSearchSettingSessionStorage(e,this._storeId,t)}clickResetHandler(){this.store.dispatch(i.changeSearchCondition({searchCondition:null,otherSearchInfo:null}))}gridStateChangeHandler(e){this.store.dispatch(i.setGridStateAction({gridState:e}))}dbClickRowHandler(e){this.store.dispatch(i.addSelectedDetailRowInfo({selectedDetailRowInfo:T.cloneDeep(e)})),this.clickAddHandler()}closeUpsertHandler(){this.store.dispatch(i.closeDetailPopup()),this.store.dispatch(i.delSelectedDetailRowInfo())}closeMappingHandler(){this.store.dispatch(i.closeRoomTypeMappingPopup())}closeHistoryHandler(){this.store.dispatch(i.closeHistoryPopup())}saveAllotmentHandler(e){this.store.dispatch(i.putAllotment({condition:e}))}closeAllotmentHandler(){this.store.dispatch(i.closeAllotmentPopup())}openCalendarHandler({type:e,isPreview:t,minDate:o,subTextDatas:n,validDateRange:s}){this.selectedDateType=e,this.isCalendarPreview=t,this.validDateRange=s,this.minDate=o,this.subTextDatas=n,this.store.dispatch(i.openCalendarPopup())}closeCalendarHandler(){this.store.dispatch(i.closeCalendarPopup())}selectedDateHandler(e){"include"===this.selectedDateType?this.store.dispatch(i.setSelectedIncludeDays({selectedIncludeDays:e})):"exclude"===this.selectedDateType&&this.store.dispatch(i.setSelectedExcludeDays({selectedExcludeDays:e}))}getDataStatusName(e){return T.find(this.dataStatusList,{value:e}).label||""}reloadEventHandler(){this.store.dispatch(i.reloadList())}_initSubscription(){Object(k.a)([this.searchCondition$,this.gridState$]).pipe(Object(L.a)(200),Object(w.a)(([e,t])=>!T.isEmpty(e)),Object(E.a)(this.unsubscribe$),Object(V.a)(1)).subscribe(([e,{pageInfo:t}])=>{const o=[t.skip,t.skip+t.take],n=Object.assign({},this._setSearchCondition(e),{limits:o});this.store.dispatch(i.loadList({condition:n}))}),this.dataStatusList$.pipe(Object(E.a)(this.unsubscribe$)).subscribe(e=>{this.dataStatusList=e}),this.reloadToggle$.pipe(Object(V.a)(1),Object(E.a)(this.unsubscribe$)).subscribe(()=>{var e;null===(e=this.searchFormEl)||void 0===e||e.onSubmit()}),this.reloadToggleFromRoomDetail$.pipe(Object(E.a)(this.unsubscribe$)).subscribe(()=>{var e;null===(e=this.searchFormEl)||void 0===e||e.onSubmit()})}_setSearchCondition(e){if(e.registerDateRange){const t=(null==e?void 0:e.registerDateRange).some(e=>T.isNil(e))?null:e.registerDateRange,o=Object.assign({},e,{registerDateRange:t});return T.omitBy(o,T.isNil)}return T.omitBy(e,T.isNil)}initSearchCondition(){if(this.searchCondition$.subscribe(e=>this._searchCondition=e),this.gridDataList$.subscribe(e=>this._searchGridDataList=e),0===T.size(this._searchCondition)&&0===T.size(this._searchGridDataList)){const e=this._dataService.initListSearchFormData(),t=this.UserConditionService.selectSearchSetting(e,this._storeId);this.store.dispatch(i.changeSearchCondition({searchCondition:t[0],otherSearchInfo:t[1]}))}}}return e.\u0275fac=function(t){return new(t||e)(It.Qb(l.h),It.Qb(Wt),It.Qb(At.a),It.Qb(l.h),It.Qb(fo.a),It.Qb(Oo.a),It.Qb(l.h))},e.\u0275cmp=It.Kb({type:e,selectors:[["app-ho-hotel-room-master"]],viewQuery:function(e,t){var o;1&e&&(It.Xc(Qt,!0),It.Xc(Mt.a,!0)),2&e&&(It.Dc(o=It.gc())&&(t.searchFormEl=o.first),It.Dc(o=It.gc())&&(t.gridEl=o.first))},decls:42,vars:80,consts:[[3,"dataStatusList","searchCondition","otherSearchInfo","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","selectedHotelSimple","clickAddEvent","clickAllotmentEvent","clickRoomMasterMappingEvent","clickHistoryEvent","changePageSizeEvent"],["useYnTpl",""],["cmspmsYnTpl",""],["dataStatusTpl",""],[3,"gridLoading","columns","sortable","gridState","checkedState","totalCount","templates","checkboxUseYn","dataList","stateChangeEvent","dbClickRowEvent"],["gridBasis",""],["header","Hotel Room Master","modalSize","lg",3,"visible","modal","hasScroll","visibleChange"],[3,"selectedHotelSimple","masterInfo","closeEvent","reloadEvent",4,"ngIf"],["header","Room Type Mapping with CMS/PMS","modalContentClass","pd-all","modalSize","sm",3,"visible","modal","visibleChange"],[3,"roomDetail","closeEvent","submitEvent",4,"ngIf"],["header","History","modalContentClass","pd-all","modalSize","md",3,"visible","modal","visibleChange"],[3,"histories","closeEvent",4,"ngIf"],["header","Allotment","modalContentClass","pd-all","modalSize","lg",3,"visible","modal","visibleChange"],[3,"roomList","includeDays","excludeDays","hotelSimpleInfo","openCalendarEvent","submitEvent","closeEvent",4,"ngIf"],["header","Calendar","modalContentClass","pd-all","modalSize","md",3,"visible","modal","visibleChange"],[3,"isPreview","minDate","subTextDatas","validDateRange","submitEvent","closeEvent",4,"ngIf"],[4,"ngIf"],[3,"selectedHotelSimple","masterInfo","closeEvent","reloadEvent"],[3,"roomDetail","closeEvent","submitEvent"],[3,"histories","closeEvent"],[3,"roomList","includeDays","excludeDays","hotelSimpleInfo","openCalendarEvent","submitEvent","closeEvent"],[3,"isPreview","minDate","subTextDatas","validDateRange","submitEvent","closeEvent"]],template:function(e,t){if(1&e&&(It.Wb(0,"app-ho-hotel-room-master-search",0),It.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),It.ic(1,"async"),It.ic(2,"async"),It.ic(3,"async"),It.Vb(),It.Wb(4,"app-ho-hotel-room-master-control",1),It.fc("clickAddEvent",(function(){return t.clickAddHandler()}))("clickAllotmentEvent",(function(){return t.clickAllotmentHandler()}))("clickRoomMasterMappingEvent",(function(){return t.clickRoomTypeMappingHandler()}))("clickHistoryEvent",(function(){return t.clickHistoryHandler()}))("changePageSizeEvent",(function(e){return t.changePageSizeHandler(e)})),It.ic(5,"async"),It.ic(6,"async"),It.ic(7,"async"),It.ic(8,"async"),It.Vb(),It.Nc(9,Ho,2,2,"ng-template",null,2,It.Oc),It.Nc(11,Io,2,2,"ng-template",null,3,It.Oc),It.Nc(13,Po,2,1,"ng-template",null,4,It.Oc),It.Wb(15,"app-grid-simple",5,6),It.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)}))("dbClickRowEvent",(function(e){return t.dbClickRowHandler(e)})),It.ic(17,"async"),It.ic(18,"async"),It.ic(19,"async"),It.ic(20,"async"),It.ic(21,"async"),It.Vb(),It.Wb(22,"app-dialog",7),It.fc("visibleChange",(function(){return t.closeUpsertHandler()})),It.ic(23,"async"),It.Nc(24,ko,3,6,"app-room-detail",8),It.ic(25,"async"),It.Vb(),It.Wb(26,"app-dialog",9),It.fc("visibleChange",(function(){return t.closeMappingHandler()})),It.ic(27,"async"),It.Nc(28,Lo,2,3,"app-ho-hotel-room-type-mapping",10),It.ic(29,"async"),It.Vb(),It.Wb(30,"app-dialog",11),It.fc("visibleChange",(function(){return t.closeHistoryHandler()})),It.ic(31,"async"),It.Nc(32,wo,2,3,"app-ho-hotel-room-master-history",12),It.ic(33,"async"),It.Vb(),It.Wb(34,"app-dialog",13),It.fc("visibleChange",(function(){return t.closeAllotmentHandler()})),It.ic(35,"async"),It.Nc(36,Eo,5,12,"app-allotment-detail",14),It.ic(37,"async"),It.Vb(),It.Wb(38,"app-dialog",15),It.fc("visibleChange",(function(){return t.closeCalendarHandler()})),It.ic(39,"async"),It.Nc(40,Vo,1,4,"app-calendar-view",16),It.ic(41,"async"),It.Vb()),2&e){const e=It.Ec(10),o=It.Ec(12),i=It.Ec(14);It.pc("dataStatusList",It.jc(1,32,t.dataStatusList$))("searchCondition",It.jc(2,34,t.searchCondition$))("otherSearchInfo",It.jc(3,36,t.otherSearchInfo$)),It.Cb(4),It.pc("loading",It.jc(5,38,t.loading$))("currentPageSize",It.jc(6,40,t.pageSize$))("totalCount",It.jc(7,42,t.gridDataTotalCount$))("selectedHotelSimple",It.jc(8,44,t.selectedHotelSimple$)),It.Cb(11),It.pc("gridLoading",It.jc(17,46,t.loading$))("columns",t.columns)("sortable",!1)("gridState",It.jc(18,48,t.gridState$))("checkedState",It.jc(19,50,t.gridCheckedState$))("totalCount",It.jc(20,52,t.gridDataTotalCount$))("templates",It.wc(76,To,e,o,i))("checkboxUseYn",!0)("dataList",It.jc(21,54,t.gridDataList$)),It.Cb(7),It.pc("visible",It.jc(23,56,t.isOpenDetailPopup$))("modal",!0)("hasScroll",!1),It.Cb(2),It.pc("ngIf",It.jc(25,58,t.isOpenDetailPopup$)),It.Cb(2),It.pc("visible",It.jc(27,60,t.isOpenRoomTypeMappingPopup$))("modal",!0),It.Cb(2),It.pc("ngIf",It.jc(29,62,t.isOpenRoomTypeMappingPopup$)),It.Cb(2),It.pc("visible",It.jc(31,64,t.isOpenHistoryPopup$))("modal",!0),It.Cb(2),It.pc("ngIf",It.jc(33,66,t.isOpenHistoryPopup$)),It.Cb(2),It.pc("visible",It.jc(35,68,t.isOpenAllotmentPopup$))("modal",!0),It.Cb(2),It.pc("ngIf",It.jc(37,70,t.isOpenAllotmentPopup$)),It.Cb(2),It.pc("visible",It.jc(39,72,t.isOpenCalendarPopup$))("modal",!0),It.Cb(2),It.pc("ngIf",It.jc(41,74,t.isOpenCalendarPopup$))}},directives:[Qt,Xt,Mt.a,jo.a,s.o,Co.a,uo,go,vo.a,So.a],pipes:[s.b],encapsulation:2,changeDetection:0}),e})();const Fo=[{path:"",component:No,data:{title:"Room Master"}}];let $o=(()=>{class e{}return e.\u0275mod=It.Ob({type:e}),e.\u0275inj=It.Nb({factory:function(t){return new(t||e)},imports:[[I.f.forChild(Fo)],I.f]}),e})();var Wo=o("lJxs"),xo=o("JIr8"),Ao=o("vkgz"),_o=o("Xb6A");let Yo=(()=>{class e{constructor(e,t,o,s,a){this.actions$=e,this.service=t,this.alertService=o,this._errorService=s,this.store=a,this.loadDataStatusList$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(i.loadDataStatusList),Object(wt.a)(({condition:e})=>this.service.getDetailCodeList(e).pipe(Object(Wo.a)(e=>i.getDataStatusSuccess({dataList:e})),Object(xo.a)(e=>{const t="Data status list lookup failed. Please try again in a momentarily.",o=[i.getDataStatusFailure({error:t})];return this._catchErr(e,t,o),[]}))))),this.loadMasterList$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(i.loadList),Object(wt.a)(({condition:e})=>this.service.getMasterList(e).pipe(Object(Wo.a)(({list:e,totalCount:t})=>i.getListSuccess({dataList:e,totalCount:t})),Object(xo.a)(e=>{const t="List lookup failed. Please try again in a momentarily.",o=[i.getListFailure({error:t})];return this._catchErr(e,t,o),[]}))))),this.upsertInformation$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(i.updateMappingAction),Object(wt.a)(({condition:e})=>this.service.upsertInformation(e).pipe(Object(Wo.a)(e=>({succeedYn:!0,upsertItem:e})),Object(xo.a)(e=>Object(kt.a)({succeedYn:!1,error:e})))),Object(Ao.a)(({succeedYn:e,error:t})=>{e?this._runPage("Success to save."):this._catchErr(t,"Failed to save.")})),{dispatch:!1}),this.upsertAllotment$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(i.putAllotment),Object(wt.a)(({condition:e})=>this.service.upsertAllotment(e).pipe(Object(Wo.a)(()=>({succeedYn:!0})),Object(xo.a)(e=>Object(kt.a)({succeedYn:!1,error:e})))),Object(Ao.a)(({succeedYn:e,error:t})=>{e?this._runPage("Success to save."):this._catchErr(t,"Failed to save.")})),{dispatch:!1}),this.upsertMaster$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(n.upsertMaster),Object(wt.a)(({upsertCondition:e})=>this.service.upsertMaster(e).pipe(Object(Wo.a)(e=>({succeedYn:!0,upsertItem:e})),Object(xo.a)(e=>Object(kt.a)({succeedYn:!1,error:e})))),Object(Ao.a)(({succeedYn:e,error:t})=>{if(e){const e="Your save is complete.",t=[i.upsertList()];this._runPage(e,t)}else this._catchErr(t,"Failed to save.")})),{dispatch:!1}),this.getHistories$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(i.loadHistoryList),Object(wt.a)(({condition:e})=>this.service.getRoomHistories(e).pipe(Object(Wo.a)(e=>i.loadHistoryListSuccess({dataList:e})),Object(xo.a)(e=>{const t="Data history list lookup failed. Please try again in a momentarily.",o=[i.loadHistoryListFailure({error:t})];return this._catchErr(e,t,o),[]})))))}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this.store.dispatch(e)})}:()=>{}})}_catchErr(e,t,o){const i=this._errorService.errorHandler(e,t);T.isNil(i)||(T.isNil(i.accept)&&(i.accept=(null==o?void 0:o.length)>0?()=>{o.forEach(e=>{this.store.dispatch(e)})}:()=>{}),this.alertService.alert(i))}_setHotelCodeCondition({hotelCode:e}){return{hotelCode:e}}}return e.\u0275fac=function(t){return new(t||e)(It.bc(c.a),It.bc($t),It.bc(At.a),It.bc(_o.a),It.bc(l.h))},e.\u0275prov=It.Mb({token:e,factory:e.\u0275fac}),e})();var zo=o("/0iE");const qo=[No],Uo=[Qt,Xt,ao,uo,go];let Go=(()=>{class e{}return e.\u0275mod=It.Ob({type:e}),e.\u0275inj=It.Nb({factory:function(t){return new(t||e)},imports:[[s.c,a.m,a.w,r.a,d.m,p.a,u.a,h.a,C.a,b.a,m.a,g.a,f.a,O.a,j.a,y.a,R.a,H.a,D.a,M.a,zo.a,v.a,S.a,$o,l.j.forFeature("hoHotelRoomMaster",tt),c.b.forFeature([Yo])]]}),e})()}}]);