function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"4qxg":function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var o=n("fXoL"),i=n("3Pt+"),a=n("XNiG"),r=n("LvDl"),s=n("KTtZ"),l=n("1G5W"),c=n("JX91"),u=n("zP0r"),b=n("kt0X"),d=n("5uJM"),p=n("EsKh"),m=n("xDUJ"),h=n("ofXK"),f=n("Onn4"),g=n("gbCm"),v=n("U6NN"),C=n("rbKv"),P=n("kd+X"),y=n("LVFn"),k=n("pb6r");function O(e,t){if(1&e){var n=o.Xb();o.Wb(0,"li"),o.Wb(1,"app-checkbox",79),o.fc("ngModelChange",(function(e){return o.Fc(n),o.hc().checkedAllPlan=e}))("onChange",(function(e){return o.Fc(n),o.hc().onPlanCheckAll(e)})),o.Vb(),o.Vb()}if(2&e){var i=o.hc();o.Cb(1),o.pc("ngModel",i.checkedAllPlan)("value",!0)("disabled",i.isCopyMode||i.isModifyMode||i.addWithOnlyDate)}}function V(e,t){if(1&e){var n=o.Xb();o.Wb(0,"li"),o.Wb(1,"app-checkbox",80),o.fc("ngModelChange",(function(e){return o.Fc(n),o.hc().checkedPlanList=e}))("onChange",(function(){o.Fc(n);var e=t.$implicit;return o.hc().onPlanCheck(e)})),o.Vb(),o.Vb()}if(2&e){var i=t.$implicit,a=o.hc();o.Cb(1),o.pc("ngModel",a.checkedPlanList)("value",null==i?null:i.vendorRoomPlanSeq)("label",a.planLabel(i))("disabled",a.isCopyMode||a.isModifyMode||a.addWithOnlyDate)}}function I(e,t){if(1&e&&(o.Wb(0,"div",14),o.Rb(1,"app-radio",81),o.Rb(2,"app-radio",82),o.Vb()),2&e){var n=o.hc();o.Gb("valid-error",n.checkIsInvalid("__specialPromotionTypeCode")),o.Cb(1),o.pc("value",n._SPECIAL_PROMOTION_TYPE.EARLY_BIRD_AND_MIN_NIGHTS),o.Cb(1),o.pc("value",n._SPECIAL_PROMOTION_TYPE.LAST_MINUTE_AND_MIN_NIGHTS)}}function D(e,t){if(1&e&&(o.Wb(0,"div",14),o.Wb(1,"div",83),o.Rb(2,"app-input-text",84),o.Vb(),o.Pc(3," Days in Advance "),o.Vb()),2&e){var n=o.hc();o.Cb(2),o.pc("isInvalid",n.checkIsInvalid("earlyBirdDays"))}}function M(e,t){if(1&e&&(o.Wb(0,"div",14),o.Pc(1," Within "),o.Wb(2,"div",85),o.Rb(3,"app-input-text",86),o.Vb(),o.Pc(4," Days until check in "),o.Vb()),2&e){var n=o.hc();o.Cb(3),o.pc("isInvalid",n.checkIsInvalid("lastMinuteDays"))}}function T(e,t){if(1&e&&(o.Wb(0,"div",14),o.Wb(1,"div",83),o.Rb(2,"app-input-text",87),o.Vb(),o.Pc(3," Min. Nights "),o.Vb()),2&e){var n=o.hc();o.Cb(2),o.pc("isInvalid",n.checkIsInvalid("minNights"))}}function F(e,t){if(1&e&&(o.Wb(0,"div",14),o.Wb(1,"div",83),o.Rb(2,"app-input-text",88),o.Vb(),o.Pc(3," Nth Night Free "),o.Vb()),2&e){var n=o.hc();o.Cb(2),o.pc("isInvalid",n.checkIsInvalid("nthNightFree"))}}function _(e,t){if(1&e&&(o.Ub(0),o.Wb(1,"div",83),o.Rb(2,"app-input-text",84),o.Vb(),o.Wb(3,"span",89),o.Pc(4,"Days in Advance"),o.Vb(),o.Wb(5,"span",90),o.Pc(6,"&"),o.Vb(),o.Wb(7,"div",85),o.Rb(8,"app-input-text",87),o.Vb(),o.Wb(9,"span",89),o.Pc(10,"Min. Nights"),o.Vb(),o.Tb()),2&e){var n=o.hc(2);o.Cb(2),o.pc("isInvalid",n.checkIsInvalid("earlyBirdDays")),o.Cb(6),o.pc("isInvalid",n.checkIsInvalid("minNights"))}}function j(e,t){if(1&e&&(o.Ub(0),o.Wb(1,"span",89),o.Pc(2,"Within"),o.Vb(),o.Wb(3,"div",85),o.Rb(4,"app-input-text",86),o.Vb(),o.Wb(5,"span",89),o.Pc(6,"Days until check in"),o.Vb(),o.Wb(7,"span",90),o.Pc(8,"&"),o.Vb(),o.Wb(9,"div",85),o.Rb(10,"app-input-text",87),o.Vb(),o.Wb(11,"span",89),o.Pc(12,"Min. Nights"),o.Vb(),o.Tb()),2&e){var n=o.hc(2);o.Cb(4),o.pc("isInvalid",n.checkIsInvalid("lastMinuteDays")),o.Cb(6),o.pc("isInvalid",n.checkIsInvalid("minNights"))}}function N(e,t){if(1&e&&(o.Wb(0,"div",14),o.Nc(1,_,11,2,"ng-container",5),o.Nc(2,j,13,2,"ng-container",5),o.Vb()),2&e){var n=o.hc();o.Cb(1),o.pc("ngIf",n.upsertForm.get("__specialPromotionTypeCode").value===n._SPECIAL_PROMOTION_TYPE.EARLY_BIRD_AND_MIN_NIGHTS),o.Cb(1),o.pc("ngIf",n.upsertForm.get("__specialPromotionTypeCode").value===n._SPECIAL_PROMOTION_TYPE.LAST_MINUTE_AND_MIN_NIGHTS)}}var W=function(){return{standalone:!0}};function S(e,t){if(1&e){var n=o.Xb();o.Wb(0,"app-radio",91),o.fc("ngModelChange",(function(e){return o.Fc(n),o.hc().cancelPenaltyBasisCode=e})),o.Vb()}if(2&e){var i=t.$implicit,a=o.hc();o.qc("label",i.label),o.pc("disabled",a.isCancelPenaltyBasisCodeControlDisabled)("ngModel",a.cancelPenaltyBasisCode)("ngModelOptions",o.tc(5,W))("value",i.value)}}var Y=function(e,t){return{"fa-plus":e,"fa-minus":t}};function L(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",14),o.Ub(1,92),o.Wb(2,"div",93),o.Rb(3,"app-input-text",94),o.Vb(),o.Wb(4,"span",95),o.Pc(5,"Days Before Check In"),o.Vb(),o.Pc(6," Charge "),o.Wb(7,"div",96),o.Rb(8,"app-selectbox",97),o.Vb(),o.Wb(9,"div",98),o.Rb(10,"app-input-text",99),o.Vb(),o.Wb(11,"div",100),o.Wb(12,"button",101),o.fc("click",(function(){o.Fc(n);var e=t.index;return o.hc().addRemoveCancelPolicy(e)})),o.Rb(13,"i",102),o.Vb(),o.Vb(),o.Tb(),o.Vb()}if(2&e){var i=t.index,a=o.hc();o.Cb(1),o.qc("formGroupName",i),o.Cb(2),o.pc("disabled",!a.isCopyMode&&(!0===a.upsertForm.get("planCancelPolicyYn").value||a.addWithOnlyDate||a.cancelPenaltyDisabled))("isInvalid",a.checkIsInvalid2("cancelPolicyDate",i)),o.Cb(5),o.pc("options",a.rateOrAmountOptions)("useAllOptionYn",!1)("disabled",!a.isCopyMode&&(!0===a.upsertForm.get("planCancelPolicyYn").value||a.addWithOnlyDate||a.cancelPenaltyDisabled)),o.Cb(2),o.pc("disabled",!a.isCopyMode&&(!0===a.upsertForm.get("planCancelPolicyYn").value||a.addWithOnlyDate||a.cancelPenaltyDisabled))("isInvalid",a.checkIsInvalid2("cancelPenaltyValue",i)),o.Cb(2),o.pc("disabled",!a.isCopyMode&&(!0===a.upsertForm.get("planCancelPolicyYn").value||a.addWithOnlyDate||a.cancelPenaltyDisabled)),o.Cb(1),o.pc("ngClass",o.vc(10,Y,0==i,i>0))}}var R=function(e){return{"valid-error":e}},B=function(){var e=function(){function e(t,n,i,r){_classCallCheck(this,e),this.store=t,this._dataService=n,this.alertService=i,this.formService=r,this.submitEvent=new o.n,this.closeEvent=new o.n,this.cancelPenaltyDisabled=!1,this.rateOrAmountOptions=[{value:"R",label:"Rate"},{value:"A",label:"Amount"}],this.discountOrUpsellOptions=[{value:"D",label:"-"},{value:"U",label:"+"}],this.checkedPlanList=[],this.checkedAllPlan=[],this.isAllCheckIn=!0,this.isAllBooking=!0,this.bookingFromTime="00:00",this.bookingToTime="23:59",this._SPECIAL_PROMOTION_TYPE=s.b,this._PLAN_PROMOTION_TYPE_CODE=s.a,this.unsubscribe$=new a.a,this._cancelPenaltyBasisCode="A",this.upsertForm=this._dataService.generateVendorPromotionPutForm(this.cancelPenaltyBasisCode)}return _createClass(e,[{key:"masterItem",get:function(){return this._masterItem},set:function(e){var t,n=this;if(this._masterItem=e,e){this.currencyCode=e.currencyCode,this.upsertForm.patchValue(e);var o=this.cancelPolicyArray();o.clear(),this.cancelPenaltyBasisCode=null===(t=e.cancellationPolicies[0])||void 0===t?void 0:t.cancelPenaltyBasisCode,e.cancellationPolicies.forEach((function(e){o.push(n._dataService.generateCancelPolicyGroups(e.cancelPenaltyBasisCode)),r.last(o.controls).patchValue(e)})),this._setPromotionTypeCodeControl(e);var i=e.derivedRoomPlanSeq,a=e.bookingFromDatetime,s=e.bookingToDatetime,l=r.split(a," "),c=r.split(s," ");2==l.length&&(this.upsertForm.get("bookingFromDatetime").patchValue(l[0]),this.bookingFromTime=l[1]),2==c.length&&(this.upsertForm.get("bookingToDatetime").patchValue(c[0]),this.bookingToTime=c[1]),this.checkedPlanList.push(i),this.onBookingDayCheck(null),this.onCheckInDayCheck(null)}}},{key:"cancelPenaltyBasisCode",get:function(){return this._cancelPenaltyBasisCode},set:function(e){this._cancelPenaltyBasisCode=e,this.cancelPolicyArray().controls.forEach((function(t){t.get("cancelPenaltyBasisCode").patchValue(e)}))}},{key:"isCancelPenaltyBasisCodeControlDisabled",get:function(){return!this.isCopyMode&&(!0===this.upsertForm.get("planCancelPolicyYn").value||this.addWithOnlyDate||this.cancelPenaltyDisabled)}},{key:"isCancelPenaltyBasisCodeControlInvalid",get:function(){return!this.isCancelPenaltyBasisCodeControlDisabled&&!this.cancelPenaltyBasisCode}},{key:"isShowSpecialPromotionType",get:function(){return this.upsertForm.get("planPromotionTypeCode").value===this._PLAN_PROMOTION_TYPE_CODE.SPECIAL_PROMOTION}},{key:"isShowAllPlanCheckbox",get:function(){return!this.masterItem}},{key:"ngOnInit",value:function(){this._initSubscription(),console.log(this.isModifyMode,"this.isModifyMode"),this.isCopyMode||(this.isModifyMode?(this.upsertForm.get("planPromotionName").disable(),this.upsertForm.get("planPromotionTypeCode").disable(),this.upsertForm.get("__specialPromotionTypeCode").disable(),this.upsertForm.get("nonRefundableYn").disable(),this.upsertForm.get("manualInsertYn").disable(),this._enableDisablePromotionTypeGroupControl(!1),!0===this.upsertForm.get("manualInsertYn").value&&(this.upsertForm.get("discountOrUpsell").disable(),this.upsertForm.get("appliedValue").disable(),this.upsertForm.get("rateOrAmount").disable())):(this.upsertForm.get("planCancelPolicyYn").setValue(!1),this.upsertForm.get("planCancelPolicyYn").disable(),this.cancelPenaltyBasisCode=null,this.cancelPenaltyDisabled=!0),this.addWithOnlyDate&&(this.upsertForm.get("planPromotionName").disable(),this.upsertForm.get("planPromotionTypeCode").disable(),this.upsertForm.get("__specialPromotionTypeCode").disable(),this.upsertForm.get("nonRefundableYn").disable(),this.upsertForm.get("manualInsertYn").disable(),this.upsertForm.get("salesStopYn").disable(),this.upsertForm.get("planCancelPolicyYn").disable(),this.upsertForm.get("planMealBasisYn").disable(),this.upsertForm.get("mealBasisCode").disable(),this.upsertForm.get("freeBreakfastCode").disable(),this.upsertForm.get("discountOrUpsell").disable(),this.upsertForm.get("appliedValue").disable(),this.upsertForm.get("rateOrAmount").disable(),this.upsertForm.get("vendorRemark").disable()),this.isResetPromotionSeq&&this.upsertForm.get("planPromotionSeq").reset()),this.promotionTypeList=r.cloneDeep(this.promotionTypes),this._initFormControlValue()}},{key:"ngOnChanges",value:function(e){e.planList&&(this.sortedPlanList=r.sortBy(this.planList,["vendorRoomTypeNameEn","roomPlanNameEn"])),e.isCopyMode&&this.isCopyMode&&(this.upsertForm.get("planPromotionSeq").reset(),this.upsertForm.get("planPromotionName").enable(),this.upsertForm.get("planPromotionTypeCode").enable(),this.upsertForm.get("nonRefundableYn").enable(),this.upsertForm.get("manualInsertYn").enable(),this.upsertForm.get("salesStopYn").enable(),this.upsertForm.get("planCancelPolicyYn").enable(),this.upsertForm.get("planMealBasisYn").enable(),this.upsertForm.get("mealBasisCode").enable(),this.upsertForm.get("freeBreakfastCode").enable(),this.upsertForm.get("discountOrUpsell").enable(),this.upsertForm.get("appliedValue").enable(),this.upsertForm.get("rateOrAmount").enable(),this.upsertForm.get("vendorRemark").enable())}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"cancelPolicyArray",value:function(){return this.upsertForm.get("cancellationPolicies")}},{key:"cancelPolicyGroup",value:function(e){return this.cancelPolicyArray().at(e)}},{key:"onSubmit",value:function(){var e;if(this.upsertForm.get("roomPlans").patchValue(this.checkedPlanList),this._isUpsertFormInvalid())this.checkValid=!0;else{var t=r.cloneDeep(this.upsertForm.getRawValue());!1===this._isCheckCancellationPolicyNeccessary()&&(t.cancellationPolicies=null),this.bookingFromTime&&t.bookingFromDatetime&&(8==this.bookingFromTime.length&&(this.bookingFromTime=this.bookingFromTime.substring(0,5)),t.bookingFromDatetime="".concat(t.bookingFromDatetime," ").concat(this.bookingFromTime,":00")),this.bookingToTime&&t.bookingToDatetime&&(8==this.bookingToTime.length&&(this.bookingToTime=this.bookingToTime.substring(0,5)),t.bookingToDatetime="".concat(t.bookingToDatetime," ").concat(this.bookingToTime,":59")),0==(null===(e=null==t?void 0:t.vendorRemark)||void 0===e?void 0:e.length)&&delete t.vendorRemark,delete t.__specialPromotionTypeCode,this.submitEvent.emit(t),this.checkValid=!1}}},{key:"onClose",value:function(){this.closeEvent.emit()}},{key:"checkIsInvalid",value:function(e){return"bookingFromTime"==e?this.upsertForm.get("bookingFromDatetime").value&&this.checkValid&&(null==this.bookingFromTime||0==this.bookingFromTime.length):"bookingToTime"==e?this.upsertForm.get("bookingToDatetime").value&&this.checkValid&&(null==this.bookingToTime||0==this.bookingToTime.length):this.checkValid&&this.upsertForm.get(e)&&this.upsertForm.get(e).invalid}},{key:"checkIsInvalid2",value:function(e,t){return!!this.upsertForm.get("planCancelPolicyYn").value&&this.checkValid&&this.cancelPolicyGroup(t).get(e)&&this.cancelPolicyGroup(t).get(e).invalid}},{key:"addRemoveCancelPolicy",value:function(e){if(e)this.removePolicy(e);else{var t=this.cancelPolicyArray();t.length<11&&t.push(this._dataService.generateCancelPolicyGroups(this.cancelPenaltyBasisCode))}}},{key:"removePolicy",value:function(e){this.cancelPolicyArray().removeAt(e)}},{key:"onBookingDayCheckAll",value:function(e){this.upsertForm.get("bookingMonYn").patchValue(e),this.upsertForm.get("bookingTueYn").patchValue(e),this.upsertForm.get("bookingWedYn").patchValue(e),this.upsertForm.get("bookingThuYn").patchValue(e),this.upsertForm.get("bookingFriYn").patchValue(e),this.upsertForm.get("bookingSatYn").patchValue(e),this.upsertForm.get("bookingSunYn").patchValue(e)}},{key:"onBookingDayCheck",value:function(e){this.isAllBooking=r.every([this.upsertForm.get("bookingMonYn").value,this.upsertForm.get("bookingTueYn").value,this.upsertForm.get("bookingWedYn").value,this.upsertForm.get("bookingThuYn").value,this.upsertForm.get("bookingFriYn").value,this.upsertForm.get("bookingSatYn").value,this.upsertForm.get("bookingSunYn").value],Boolean)}},{key:"onCheckInDayCheckAll",value:function(e){this.upsertForm.get("checkInMonYn").patchValue(e),this.upsertForm.get("checkInTueYn").patchValue(e),this.upsertForm.get("checkInWedYn").patchValue(e),this.upsertForm.get("checkInThuYn").patchValue(e),this.upsertForm.get("checkInFriYn").patchValue(e),this.upsertForm.get("checkInSatYn").patchValue(e),this.upsertForm.get("checkInSunYn").patchValue(e)}},{key:"onCheckInDayCheck",value:function(e){this.isAllCheckIn=r.every([this.upsertForm.get("checkInMonYn").value,this.upsertForm.get("checkInTueYn").value,this.upsertForm.get("checkInWedYn").value,this.upsertForm.get("checkInThuYn").value,this.upsertForm.get("checkInFriYn").value,this.upsertForm.get("checkInSatYn").value,this.upsertForm.get("checkInSunYn").value])}},{key:"onPlanCheck",value:function(e){var t=this;if(null!=this.currencyCode&&""!=this.currencyCode&&this.currencyCode!=e.currencyCode){this.alertService.alert("There are plan with different currency.");var n=r.cloneDeep(this.checkedPlanList);setTimeout((function(){t.checkedPlanList=r.pull(n,e.vendorRoomPlanSeq)}),0)}else this.currencyCode=e.currencyCode;0==this.checkedPlanList.length&&(this.currencyCode="")}},{key:"onPlanCheckAll",value:function(e){if(null!=this.planList&&0!=this.planList.length){if(r.uniq(r.map(this.planList,"currencyCode")).length>1)return this.alertService.alert("There are plan with different currency."),void(this.checkedAllPlan=[]);this.currencyCode=this.planList[0].currencyCode,e?this.checkedPlanList=r.uniq(r.map(this.planList,"vendorRoomPlanSeq")):(this.checkedPlanList=[],this.currencyCode="")}else this.checkedAllPlan=[]}},{key:"onSelectFreeBreakfast",value:function(e){this.upsertForm.get("freeBreakfastName").patchValue(e.label)}},{key:"onSelectMealBasis",value:function(e){this.upsertForm.get("mealBasisName").patchValue(e.label)}},{key:"planLabel",value:function(e){return(null==e?void 0:e.hotelContractTypeName)?"".concat(null==e?void 0:e.hotelContractTypeName," [").concat(null==e?void 0:e.vendorRoomPlanSeq,"] ").concat(null==e?void 0:e.vendorRoomTypeNameEn," - ").concat(null==e?void 0:e.roomPlanNameEn):"".concat(null==e?void 0:e.vendorRoomPlanSeq," ").concat(null==e?void 0:e.vendorRoomTypeNameEn," - ").concat(null==e?void 0:e.roomPlanNameEn)}},{key:"_initSubscription",value:function(){var e=this;this.upsertForm.get("planCancelPolicyYn").valueChanges.pipe(Object(l.a)(this.unsubscribe$)).subscribe((function(t){t?(e.upsertForm.get("rateOrAmount").setValue("R"),e.cancelPenaltyBasisCode=null,e.cancelPolicyArray().clear(),e.cancelPolicyArray().push(e._dataService.generateCancelPolicyGroups(e.cancelPenaltyBasisCode))):e.cancelPenaltyBasisCode="B"})),this.upsertForm.get("planMealBasisYn").valueChanges.pipe(Object(l.a)(this.unsubscribe$)).subscribe((function(t){e._planMealBasisYnEffects(t)})),this.upsertForm.get("nonRefundableYn").valueChanges.pipe(Object(l.a)(this.unsubscribe$)).subscribe((function(t){t?(e.upsertForm.get("planCancelPolicyYn").setValue(!1),e.upsertForm.get("planCancelPolicyYn").disable(),e.cancelPenaltyBasisCode=null,e.cancelPenaltyDisabled=!0):(e.upsertForm.get("planCancelPolicyYn").enable(),e.cancelPenaltyDisabled=!1)})),this.upsertForm.get("planPromotionTypeCode").valueChanges.pipe(Object(c.a)(this.upsertForm.get("planPromotionTypeCode").value),Object(l.a)(this.unsubscribe$)).subscribe((function(t){e.selectedValue=t,e.isModifyMode&&!e.isCopyMode?e._enableDisablePromotionTypeGroupControl(!1):(e.isCopyMode||e._resetPromotionTypeGroupControl(),e._updatePromotionTypeGroupControlValidator(t),e._enableDisablePromotionTypeGroupControl(!0))})),this.upsertForm.get("__specialPromotionTypeCode").valueChanges.pipe(Object(u.a)(1),Object(l.a)(this.unsubscribe$)).subscribe((function(t){e._resetPromotionTypeGroupControl(),e._updateSpecialPromotionTypeCodeControlValidator(),e._updatePromotionTypeGroupControlValidity()}))}},{key:"_planMealBasisYnEffects",value:function(e){e?(this.upsertForm.get("mealBasisCode").setValue(null),this.upsertForm.get("mealBasisCode").clearValidators(),this.upsertForm.get("freeBreakfastCode").setValue(null),this.upsertForm.get("freeBreakfastCode").clearValidators()):(this.upsertForm.get("mealBasisCode").setValidators([i.z.required]),this.upsertForm.get("freeBreakfastCode").setValidators([i.z.required])),this.upsertForm.get("mealBasisCode").updateValueAndValidity(),this.upsertForm.get("freeBreakfastCode").updateValueAndValidity()}},{key:"_isUpsertFormInvalid",value:function(){var e=this,t=!1;return Object.keys(this.upsertForm.controls).forEach((function(n){e.upsertForm.controls[n].invalid&&"cancellationPolicies"!==n&&(console.error(n+" is invalid"),t=!0)})),this._isCheckCancellationPolicyNeccessary()&&(this.upsertForm.controls.cancellationPolicies.invalid||0===this.upsertForm.controls.cancellationPolicies.value.length||r.isNil(this.cancelPenaltyBasisCode))&&(console.error("cancellationPolicies is invalid"),t=!0),t}},{key:"_isCheckCancellationPolicyNeccessary",value:function(){return!1===this.upsertForm.controls.planCancelPolicyYn.value&&!1===this.upsertForm.controls.nonRefundableYn.value}},{key:"_initFormControlValue",value:function(){this.upsertForm.get("planCancelPolicyYn").value&&(this._cancelPenaltyBasisCode=null),this._planMealBasisYnEffects(this.upsertForm.get("planMealBasisYn").value)}},{key:"_enableDisablePromotionTypeGroupControl",value:function(e){e?(this.upsertForm.get("earlyBirdDays").enable(),this.upsertForm.get("lastMinuteDays").enable(),this.upsertForm.get("minNights").enable(),this.upsertForm.get("nthNightFree").enable()):(this.upsertForm.get("earlyBirdDays").disable(),this.upsertForm.get("lastMinuteDays").disable(),this.upsertForm.get("minNights").disable(),this.upsertForm.get("nthNightFree").disable())}},{key:"_resetPromotionTypeGroupControl",value:function(){this.upsertForm.get("earlyBirdDays").reset(),this.upsertForm.get("lastMinuteDays").reset(),this.upsertForm.get("minNights").reset(),this.upsertForm.get("nthNightFree").reset()}},{key:"_setPromotionTypeCodeControl",value:function(e){if(e.planPromotionTypeCode==this._PLAN_PROMOTION_TYPE_CODE.SPECIAL_PROMOTION){var t=!r.isNil(e.earlyBirdDays),n=!r.isNil(e.lastMinuteDays);t&&n&&console.error("Early Bird and Last Minute cannot be used at the same time."),t&&this.upsertForm.get("__specialPromotionTypeCode").setValue(this._SPECIAL_PROMOTION_TYPE.EARLY_BIRD_AND_MIN_NIGHTS),n&&this.upsertForm.get("__specialPromotionTypeCode").setValue(this._SPECIAL_PROMOTION_TYPE.LAST_MINUTE_AND_MIN_NIGHTS)}}},{key:"_updatePromotionTypeGroupControlValidator",value:function(e){switch(this._clearPromotionTypeGroupControlValidity(),this.upsertForm.get("__specialPromotionTypeCode").clearValidators(),e){case this._PLAN_PROMOTION_TYPE_CODE.EARLY_BIRD:this.upsertForm.get("earlyBirdDays").setValidators([i.z.required]);break;case this._PLAN_PROMOTION_TYPE_CODE.LAST_MINUTE:this.upsertForm.get("lastMinuteDays").setValidators([i.z.required]);break;case this._PLAN_PROMOTION_TYPE_CODE.MIN_NIGHTS:this.upsertForm.get("minNights").setValidators([i.z.required]);break;case this._PLAN_PROMOTION_TYPE_CODE.NTH_NIGHTS_FREE:this.upsertForm.get("nthNightFree").setValidators([i.z.required]);break;case this._PLAN_PROMOTION_TYPE_CODE.SPECIAL_PROMOTION:this.upsertForm.get("__specialPromotionTypeCode").setValidators([i.z.required])}this._updatePromotionTypeGroupControlValidity(),this.upsertForm.get("__specialPromotionTypeCode").updateValueAndValidity()}},{key:"_clearPromotionTypeGroupControlValidity",value:function(){this.upsertForm.get("earlyBirdDays").clearValidators(),this.upsertForm.get("lastMinuteDays").clearValidators(),this.upsertForm.get("minNights").clearValidators(),this.upsertForm.get("nthNightFree").clearValidators()}},{key:"_updatePromotionTypeGroupControlValidity",value:function(){this.upsertForm.get("earlyBirdDays").updateValueAndValidity(),this.upsertForm.get("lastMinuteDays").updateValueAndValidity(),this.upsertForm.get("minNights").updateValueAndValidity(),this.upsertForm.get("nthNightFree").updateValueAndValidity()}},{key:"_updateSpecialPromotionTypeCodeControlValidator",value:function(){var e=this.upsertForm.get("__specialPromotionTypeCode").value;this.upsertForm.get("earlyBirdDays").clearValidators(),this.upsertForm.get("lastMinuteDays").clearValidators(),this.upsertForm.get("minNights").clearValidators(),e===this._SPECIAL_PROMOTION_TYPE.EARLY_BIRD_AND_MIN_NIGHTS?(this.upsertForm.get("earlyBirdDays").setValidators([i.z.required]),this.upsertForm.get("minNights").setValidators([i.z.required])):e===this._SPECIAL_PROMOTION_TYPE.LAST_MINUTE_AND_MIN_NIGHTS&&(this.upsertForm.get("lastMinuteDays").setValidators([i.z.required]),this.upsertForm.get("minNights").setValidators([i.z.required]))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(b.h),o.Qb(d.b),o.Qb(p.a),o.Qb(m.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-vendor-promotion-detail-master"]],inputs:{planList:"planList",freeBreakfastList:"freeBreakfastList",mealBasisList:"mealBasisList",cancelPenaltyList:"cancelPenaltyList",promotionTypes:"promotionTypes",isModifyMode:"isModifyMode",isCopyMode:"isCopyMode",addWithOnlyDate:"addWithOnlyDate",isResetPromotionSeq:"isResetPromotionSeq",masterItem:"masterItem"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},features:[o.Ab],decls:179,vars:80,consts:[[1,"promotion-rate"],[1,"room-type",2,"flex","0 0 300px"],[1,"page-item"],[1,"page-item-header"],[1,"item-box",3,"ngClass"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"detail-option"],[3,"formGroup"],[1,"table","table-bordered","table-responsive-all"],["width","130px"],["scope","row",1,"th-bg"],[1,"input"],["type","text","disabled","",3,"value"],[1,"form-group"],["formControlName","salesStopYn","name","salesStopYn","label","Y",3,"value"],["formControlName","salesStopYn","name","salesStopYn","label","N",3,"value"],["formControlName","planPromotionName",3,"isInvalid"],[1,"pd10"],["formControlName","planPromotionTypeCode","useAllOptionName","Select",1,"mb10",3,"options","isInvalid"],["class","form-group",3,"valid-error",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"input","calendar"],[3,"for"],["type","text","placeholder","YYYY-MM-DD","formControlName","bookingFromDatetime",3,"matDatepicker"],["bookingFromDatetime",""],["dataType","string","inputFormat","time","placeholder","hh:mm",2,"max-width","100px",3,"ngModel","ngModelOptions","ngModelChange"],[1,"dash"],["type","text","placeholder","YYYY-MM-DD","formControlName","bookingToDatetime",3,"matDatepicker"],["bookingToDatetime",""],["binary","true","label","All",3,"ngModel","ngModelOptions","onChange","ngModelChange"],["formControlName","bookingMonYn","binary","true","label","Mon",3,"onChange"],["formControlName","bookingTueYn","binary","true","label","Tue",3,"onChange"],["formControlName","bookingWedYn","binary","true","label","Wed",3,"onChange"],["formControlName","bookingThuYn","binary","true","label","Thu",3,"onChange"],["formControlName","bookingFriYn","binary","true","label","Fri",3,"onChange"],["formControlName","bookingSatYn","binary","true","label","Sat",3,"onChange"],["formControlName","bookingSunYn","binary","true","label","Sun",3,"onChange"],["type","text","placeholder","YYYY-MM-DD","formControlName","checkInFromDate",3,"matDatepicker"],["checkInFromDate",""],["type","text","placeholder","YYYY-MM-DD","formControlName","checkInToDate",3,"matDatepicker"],["checkInToDate",""],["formControlName","checkInMonYn","binary","true","label","Mon",3,"onChange"],["formControlName","checkInTueYn","binary","true","label","Tue",3,"onChange"],["formControlName","checkInWedYn","binary","true","label","Wed",3,"onChange"],["formControlName","checkInThuYn","binary","true","label","Thu",3,"onChange"],["formControlName","checkInFriYn","binary","true","label","Fri",3,"onChange"],["formControlName","checkInSatYn","binary","true","label","Sat",3,"onChange"],["formControlName","checkInSunYn","binary","true","label","Sun",3,"onChange"],["formControlName","nonRefundableYn","name","nonRefundableYn","label","Y",3,"value"],["formControlName","nonRefundableYn","name","nonRefundableYn","label","N",3,"value"],[1,"color-danger","ml15","font-size-xs"],[1,"form-group","mb20"],["formControlName","planCancelPolicyYn","name","planCancelPolicyYn","label","Follow Plan",3,"value"],["formControlName","planCancelPolicyYn","name","planCancelPolicyYn","label","Set Up New",3,"value"],[1,"form-group","mb10"],[3,"disabled","ngModel","ngModelOptions","value","label","ngModelChange",4,"ngFor","ngForOf"],[1,"form-item-box"],["formArrayName","cancellationPolicies"],["class","form-group",4,"ngFor","ngForOf"],["formControlName","planMealBasisYn","name","planMealBasisYn","label","Follow Plan",3,"value"],["formControlName","planMealBasisYn","name","planMealBasisYn","label","Set Up New",3,"value"],[1,"mr10"],[1,"select-box",2,"flex","0 0 200px"],["formControlName","mealBasisCode",3,"options","useAllOptionName","isInvalid","disabled","onChange"],["formControlName","freeBreakfastCode",3,"options","useAllOptionName","isInvalid","disabled","onChange"],["formControlName","manualInsertYn","name","manualInsertYn","label","Y",3,"value"],["formControlName","manualInsertYn","name","manualInsertYn","label","N",3,"value"],[1,"color-red","font-size-sm","ml-auto"],[1,"select-box","mr10",2,"flex","0 0 50px"],["formControlName","discountOrUpsell",3,"options","useAllOptionYn","disabled"],[1,"input","mr10",2,"flex","0 0 120px"],["valueType","number","inputFormat","positiveNumber","styleClass","align-r","placeholder","0.00 (rate)","formControlName","appliedValue",3,"disabled"],[1,"input","ml5",2,"flex","0 0 120px"],["formControlName","rateOrAmount",3,"options","useAllOptionYn","disabled"],["formControlName","vendorRemark"],[1,"button-area","align-r","mt10"],[1,"btn","btn-secondary","sm",3,"click"],[1,"btn","btn-light","sm",3,"click"],["label","All Plan",3,"ngModel","value","disabled","ngModelChange","onChange"],[3,"ngModel","value","label","disabled","ngModelChange","onChange"],["formControlName","__specialPromotionTypeCode","name","__specialPromotionTypeCode","label","Early Bird + Min Nights",3,"value"],["formControlName","__specialPromotionTypeCode","name","__specialPromotionTypeCode","label","Last Minute + Min Nights",3,"value"],[1,"input","mr10",2,"flex","0 0 60px"],["formControlName","earlyBirdDays","valueType","number","inputFormat","number",1,"align-c",3,"isInvalid"],[1,"input","ml10","mr10",2,"flex","0 0 60px"],["formControlName","lastMinuteDays","valueType","number","inputFormat","number",1,"align-c",3,"isInvalid"],["formControlName","minNights","valueType","number","inputFormat","number",1,"align-c",3,"isInvalid"],["formControlName","nthNightFree","valueType","number","inputFormat","number",1,"align-c",3,"isInvalid"],[1,"font-weight-medium"],[1,"ml10","mr10"],[3,"disabled","ngModel","ngModelOptions","value","label","ngModelChange"],[3,"formGroupName"],[1,"input","ml20","mr5",2,"flex","0 0 80px"],["valueType","number","formControlName","cancelPolicyDate",3,"disabled","isInvalid"],[1,"mr70"],[1,"input","mr10","ml10",2,"flex","0 0 80px"],["formControlName","cancelPenaltyRateOrAmount",3,"options","useAllOptionYn","disabled"],[1,"input",2,"flex","0 0 80px"],["valueType","number","formControlName","cancelPenaltyValue",3,"disabled","isInvalid"],[1,"input",2,"flex","0 0 32px"],["type","button",1,"btn","btn-outline-secondary","btn-icon-only","xs","ml-auto",3,"disabled","click"],[1,"fas",3,"ngClass"]],template:function(e,t){if(1&e&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Wb(3,"div",3),o.Wb(4,"strong"),o.Wb(5,"sup"),o.Pc(6,"Select Room Type & Plan"),o.Vb(),o.Vb(),o.Vb(),o.Wb(7,"div",4),o.Wb(8,"ul"),o.Nc(9,O,2,3,"li",5),o.Nc(10,V,2,4,"li",6),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(11,"div",7),o.Wb(12,"form",8),o.Wb(13,"div",2),o.Wb(14,"div",9),o.Wb(15,"table"),o.Wb(16,"caption"),o.Pc(17,"Detail"),o.Vb(),o.Wb(18,"colgroup"),o.Rb(19,"col",10),o.Rb(20,"col"),o.Vb(),o.Wb(21,"tbody"),o.Wb(22,"tr"),o.Wb(23,"th",11),o.Wb(24,"sup"),o.Pc(25,"Promotion SEQ"),o.Vb(),o.Vb(),o.Wb(26,"td"),o.Wb(27,"div",12),o.Rb(28,"input",13),o.Vb(),o.Vb(),o.Vb(),o.Wb(29,"tr"),o.Wb(30,"th",11),o.Wb(31,"sup"),o.Pc(32,"Sales Stop YN"),o.Vb(),o.Vb(),o.Wb(33,"td"),o.Wb(34,"div",14),o.Rb(35,"app-radio",15),o.Rb(36,"app-radio",16),o.Vb(),o.Vb(),o.Vb(),o.Wb(37,"tr"),o.Wb(38,"th",11),o.Wb(39,"sup"),o.Pc(40,"Promotion Name"),o.Vb(),o.Vb(),o.Wb(41,"td"),o.Rb(42,"app-input-text",17),o.Vb(),o.Vb(),o.Wb(43,"tr"),o.Wb(44,"th",11),o.Wb(45,"sup"),o.Pc(46,"Promotion Type"),o.Vb(),o.Vb(),o.Wb(47,"td",18),o.Rb(48,"app-selectbox",19),o.Nc(49,I,3,4,"div",20),o.Nc(50,D,4,1,"div",21),o.Nc(51,M,5,1,"div",21),o.Nc(52,T,4,1,"div",21),o.Nc(53,F,4,1,"div",21),o.Nc(54,N,3,2,"div",21),o.Vb(),o.Vb(),o.Wb(55,"tr"),o.Wb(56,"th",11),o.Pc(57,"Booking From ~ To Date"),o.Vb(),o.Wb(58,"td"),o.Wb(59,"div",14),o.Wb(60,"div",22),o.Rb(61,"mat-datepicker-toggle",23),o.Rb(62,"input",24),o.Rb(63,"mat-datepicker",null,25),o.Vb(),o.Wb(65,"app-input-text",26),o.fc("ngModelChange",(function(e){return t.bookingFromTime=e})),o.Vb(),o.Wb(66,"div",27),o.Pc(67,"~"),o.Vb(),o.Wb(68,"div",22),o.Rb(69,"mat-datepicker-toggle",23),o.Rb(70,"input",28),o.Rb(71,"mat-datepicker",null,29),o.Vb(),o.Wb(73,"app-input-text",26),o.fc("ngModelChange",(function(e){return t.bookingToTime=e})),o.Vb(),o.Vb(),o.Wb(74,"div",14),o.Wb(75,"app-checkbox",30),o.fc("onChange",(function(e){return t.onBookingDayCheckAll(e)}))("ngModelChange",(function(e){return t.isAllBooking=e})),o.Vb(),o.Wb(76,"app-checkbox",31),o.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),o.Vb(),o.Wb(77,"app-checkbox",32),o.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),o.Vb(),o.Wb(78,"app-checkbox",33),o.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),o.Vb(),o.Wb(79,"app-checkbox",34),o.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),o.Vb(),o.Wb(80,"app-checkbox",35),o.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),o.Vb(),o.Wb(81,"app-checkbox",36),o.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),o.Vb(),o.Wb(82,"app-checkbox",37),o.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(83,"tr"),o.Wb(84,"th",11),o.Wb(85,"sup"),o.Pc(86,"Check In From ~ To Date"),o.Vb(),o.Vb(),o.Wb(87,"td"),o.Wb(88,"div",14),o.Wb(89,"div",22),o.Rb(90,"mat-datepicker-toggle",23),o.Rb(91,"input",38),o.Rb(92,"mat-datepicker",null,39),o.Vb(),o.Wb(94,"div",27),o.Pc(95,"~"),o.Vb(),o.Wb(96,"div",22),o.Rb(97,"mat-datepicker-toggle",23),o.Rb(98,"input",40),o.Rb(99,"mat-datepicker",null,41),o.Vb(),o.Vb(),o.Wb(101,"div",14),o.Wb(102,"app-checkbox",30),o.fc("onChange",(function(e){return t.onCheckInDayCheckAll(e)}))("ngModelChange",(function(e){return t.isAllCheckIn=e})),o.Vb(),o.Wb(103,"app-checkbox",42),o.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),o.Vb(),o.Wb(104,"app-checkbox",43),o.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),o.Vb(),o.Wb(105,"app-checkbox",44),o.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),o.Vb(),o.Wb(106,"app-checkbox",45),o.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),o.Vb(),o.Wb(107,"app-checkbox",46),o.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),o.Vb(),o.Wb(108,"app-checkbox",47),o.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),o.Vb(),o.Wb(109,"app-checkbox",48),o.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(110,"tr"),o.Wb(111,"th",11),o.Wb(112,"sup"),o.Pc(113,"Non Refundable YN"),o.Vb(),o.Vb(),o.Wb(114,"td"),o.Wb(115,"div",14),o.Rb(116,"app-radio",49),o.Rb(117,"app-radio",50),o.Wb(118,"span",51),o.Pc(119,"It will have order of prioriy than Plan CancellationPolicy"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(120,"tr"),o.Wb(121,"th",11),o.Pc(122,"Plan Cancellation Policy"),o.Vb(),o.Wb(123,"td"),o.Wb(124,"div",52),o.Rb(125,"app-radio",53),o.Rb(126,"app-radio",54),o.Vb(),o.Wb(127,"div",55),o.Nc(128,S,1,6,"app-radio",56),o.Vb(),o.Wb(129,"div",57),o.Ub(130,58),o.Nc(131,L,14,13,"div",59),o.Tb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(132,"tr"),o.Wb(133,"th",11),o.Wb(134,"sup"),o.Pc(135,"Plan Meal Basis"),o.Vb(),o.Vb(),o.Wb(136,"td"),o.Wb(137,"div",55),o.Rb(138,"app-radio",60),o.Rb(139,"app-radio",61),o.Vb(),o.Wb(140,"div",57),o.Wb(141,"div",14),o.Wb(142,"span",62),o.Pc(143,"Meal Basis Code"),o.Vb(),o.Wb(144,"div",63),o.Wb(145,"app-selectbox",64),o.fc("onChange",(function(e){return t.onSelectMealBasis(e.option)})),o.Vb(),o.Vb(),o.Vb(),o.Wb(146,"div",14),o.Wb(147,"span",62),o.Pc(148,"Free Breakfast"),o.Vb(),o.Wb(149,"div",63),o.Wb(150,"app-selectbox",65),o.fc("onChange",(function(e){return t.onSelectFreeBreakfast(e.option)})),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(151,"tr"),o.Wb(152,"th",11),o.Wb(153,"sup"),o.Pc(154,"Manual Rate Insert YN"),o.Vb(),o.Vb(),o.Wb(155,"td"),o.Wb(156,"div",55),o.Rb(157,"app-radio",66),o.Rb(158,"app-radio",67),o.Wb(159,"strong",68),o.Pc(160),o.Vb(),o.Vb(),o.Wb(161,"div",57),o.Wb(162,"div",14),o.Wb(163,"div",69),o.Rb(164,"app-selectbox",70),o.Vb(),o.Wb(165,"div",71),o.Rb(166,"app-input-text",72),o.Vb(),o.Wb(167,"div",73),o.Rb(168,"app-selectbox",74),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(169,"tr"),o.Wb(170,"th",11),o.Pc(171,"Vendor Remark"),o.Vb(),o.Wb(172,"td"),o.Rb(173,"app-input-text",75),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(174,"div",76),o.Wb(175,"button",77),o.fc("click",(function(){return t.onSubmit()})),o.Pc(176,"Save"),o.Vb(),o.Wb(177,"button",78),o.fc("click",(function(){return t.onClose()})),o.Pc(178,"Close"),o.Vb(),o.Vb()),2&e){var n=o.Ec(64),i=o.Ec(72),a=o.Ec(93),r=o.Ec(100);o.Cb(7),o.pc("ngClass",o.uc(74,R,t.checkValid&&0==(null==t.checkedPlanList?null:t.checkedPlanList.length))),o.Cb(2),o.pc("ngIf",t.isShowAllPlanCheckbox),o.Cb(1),o.pc("ngForOf",t.sortedPlanList),o.Cb(2),o.pc("formGroup",t.upsertForm),o.Cb(16),o.pc("value",t.upsertForm.get("planPromotionSeq").value),o.Cb(7),o.pc("value",!0),o.Cb(1),o.pc("value",!1),o.Cb(6),o.pc("isInvalid",t.checkIsInvalid("planPromotionName")),o.Cb(6),o.pc("options",t.promotionTypeList)("isInvalid",t.checkIsInvalid("planPromotionTypeCode")),o.Cb(1),o.pc("ngIf",t.isShowSpecialPromotionType),o.Cb(1),o.pc("ngIf",t.selectedValue===t._PLAN_PROMOTION_TYPE_CODE.EARLY_BIRD),o.Cb(1),o.pc("ngIf",t.selectedValue===t._PLAN_PROMOTION_TYPE_CODE.LAST_MINUTE),o.Cb(1),o.pc("ngIf",t.selectedValue===t._PLAN_PROMOTION_TYPE_CODE.MIN_NIGHTS),o.Cb(1),o.pc("ngIf",t.selectedValue===t._PLAN_PROMOTION_TYPE_CODE.NTH_NIGHTS_FREE),o.Cb(1),o.pc("ngIf",t.selectedValue===t._PLAN_PROMOTION_TYPE_CODE.SPECIAL_PROMOTION),o.Cb(6),o.Gb("valid-error",t.checkIsInvalid("bookingFromDatetime")),o.Cb(1),o.pc("for",n),o.Cb(1),o.pc("matDatepicker",n),o.Cb(3),o.Gb("valid-error",t.checkIsInvalid("bookingFromTime")),o.pc("ngModel",t.bookingFromTime)("ngModelOptions",o.tc(76,W)),o.Cb(3),o.Gb("valid-error",t.checkIsInvalid("bookingToDatetime")),o.Cb(1),o.pc("for",i),o.Cb(1),o.pc("matDatepicker",i),o.Cb(3),o.Gb("valid-error",t.checkIsInvalid("bookingToTime")),o.pc("ngModel",t.bookingToTime)("ngModelOptions",o.tc(77,W)),o.Cb(2),o.pc("ngModel",t.isAllBooking)("ngModelOptions",o.tc(78,W)),o.Cb(14),o.Gb("valid-error",t.checkIsInvalid("checkInFromDate")),o.Cb(1),o.pc("for",a),o.Cb(1),o.pc("matDatepicker",a),o.Cb(5),o.Gb("valid-error",t.checkIsInvalid("checkInToDate")),o.Cb(1),o.pc("for",r),o.Cb(1),o.pc("matDatepicker",r),o.Cb(4),o.pc("ngModel",t.isAllCheckIn)("ngModelOptions",o.tc(79,W)),o.Cb(14),o.pc("value",!0),o.Cb(1),o.pc("value",!1),o.Cb(8),o.pc("value",!0),o.Cb(1),o.pc("value",!1),o.Cb(1),o.Gb("valid-error",t.checkValid&&t.isCancelPenaltyBasisCodeControlInvalid),o.Cb(1),o.pc("ngForOf",t.cancelPenaltyList),o.Cb(3),o.pc("ngForOf",t.cancelPolicyArray().controls),o.Cb(6),o.Gb("valid-error",t.checkIsInvalid("planMealBasisYn")),o.Cb(1),o.pc("value",!0),o.Cb(1),o.pc("value",!1),o.Cb(6),o.pc("options",t.mealBasisList)("useAllOptionName","Select")("isInvalid",t.checkIsInvalid("mealBasisCode"))("disabled",!t.isCopyMode&&!1!==t.upsertForm.get("planMealBasisYn").value),o.Cb(5),o.pc("options",t.freeBreakfastList)("useAllOptionName","Select")("isInvalid",t.checkIsInvalid("freeBreakfastCode"))("disabled",!t.isCopyMode&&!1!==t.upsertForm.get("planMealBasisYn").value),o.Cb(7),o.pc("value",!0),o.Cb(1),o.pc("value",!1),o.Cb(2),o.Rc("Currency : ",t.currencyCode,""),o.Cb(4),o.pc("options",t.discountOrUpsellOptions)("useAllOptionYn",!1)("disabled",!t.isCopyMode&&!0===t.upsertForm.get("manualInsertYn").value),o.Cb(2),o.pc("disabled",!t.isCopyMode&&!0===t.upsertForm.get("manualInsertYn").value),o.Cb(2),o.pc("options",t.rateOrAmountOptions)("useAllOptionYn",!1)("disabled",!t.isCopyMode&&!0===t.upsertForm.get("manualInsertYn").value)}},directives:[h.l,h.o,h.n,i.B,i.s,i.k,f.a,i.r,i.i,g.a,v.a,C.a,i.c,P.a,y.a,i.u,k.a,i.e,i.l],encapsulation:2,changeDetection:0}),e}()},"5uJM":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f}));var o,i,a=n("3Pt+"),r=n("wd/R"),s=n("fXoL"),l=((o=_createClass((function e(t){var n=this;_classCallCheck(this,e),this.fb=t,this.generateVendorPromotionPutForm=function(e){return n.fb.group({appliedValue:[null],bookingFriYn:[!0],bookingFromDatetime:[r().format("YYYY-MM-DD")],bookingMonYn:[!0],bookingSatYn:[!0],bookingSunYn:[!0],bookingThuYn:[!0],bookingToDatetime:[null],bookingTueYn:[!0],bookingWedYn:[!0],cancellationPolicies:n.fb.array([n.generateCancelPolicyGroups(e)]),checkInFriYn:[!0,[a.z.required]],checkInFromDate:[r().format("YYYY-MM-DD"),[a.z.required]],checkInMonYn:[!0,[a.z.required]],checkInSatYn:[!0,[a.z.required]],checkInSunYn:[!0,[a.z.required]],checkInThuYn:[!0,[a.z.required]],checkInToDate:[null,[a.z.required]],checkInTueYn:[!0,[a.z.required]],checkInWedYn:[!0,[a.z.required]],discountOrUpsell:["D"],earlyBirdDays:[null],freeBreakfastCode:[null],freeBreakfastName:[null],lastMinuteDays:[null],manualInsertYn:[!0,[a.z.required]],mealBasisCode:[null],mealBasisName:[null],minNights:[null],nonRefundableYn:[!0,[a.z.required]],nthNightFree:[null],originPlanPromotionSeq:[null],planCancelPolicyYn:[!1],planMealBasisYn:[null,[a.z.required]],planPromotionName:[null,[a.z.required]],planPromotionSeq:[null],planPromotionTypeCode:[null,[a.z.required]],__specialPromotionTypeCode:[null],rateOrAmount:["R"],roomPlans:[null,[a.z.required]],salesStopYn:[!0,[a.z.required]],vendorRemark:[null],earlyBirdDaysVersion2:[null],lastMinuteDaysVersion2:[null],minNightsVersion2:[null],minNightsVersion3:[{value:null,disabled:!0}]})},this.generateCancelPolicyGroups=function(e){return n.fb.group({cancelPenaltyBasisCode:[e,[a.z.required]],cancelPenaltyRateOrAmount:["R",[a.z.required]],cancelPenaltyValue:[0,[a.z.required]],cancelPolicyDate:[0,[a.z.required]],firstCancelDeadlineTime:[null],promotionCancelPolicySeq:[null]})},this.generateDetailInfoPutForm=function(){return n.fb.group({planPromotionSeq:[null,[a.z.required]],planPromotionDetailEn:[null],planPromotionDetailKo:[null],planPromotionDetailJa:[null],planPromotionDetailVi:[null],planPromotionDetailZh:[null]})},this.initDetailInfoPutFormData=function(){return{planPromotionSeq:null,planPromotionDetailEn:null,planPromotionDetailKo:null,planPromotionDetailJa:null,planPromotionDetailVi:null,planPromotionDetailZh:null}}}))).\u0275fac=function(e){return new(e||o)(s.bc(a.f))},o.\u0275prov=s.Mb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),c=n("LRne"),u=n("z6cu"),b=n("eIep"),d=n("LvDl"),p=n("KTtZ"),m=n("tpT/"),h=n("VMfx"),f=((i=function(){function e(t,n){_classCallCheck(this,e),this.api=t,this.languageService=n}return _createClass(e,[{key:"getDetailCodeList",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"KO",o=d.assign({},Object.assign(this.api.defaultParams,{language:n}),{condition:e});return this.api.post(p.c.commonDetailCode,o).pipe(Object(b.a)((function(e){return e.succeedYn?Object(c.a)(e.result.list.map((function(e){return{label:"KO"===t.languageService.currentLanguage?e.detailCodeNameLn:e.detailCodeNameEn,value:e.detailCode,referCode1:e.referCode1}}))):Object(u.a)(e||"api response error")})))}},{key:"getMasterList",value:function(e){var t=d.assign({},this.api.defaultParams,{condition:e});return this.api.post(p.c.masterList,t).pipe(Object(b.a)((function(e){var t,n;return e.succeedYn&&(null===(n=null===(t=e.result)||void 0===t?void 0:t.list)||void 0===n?void 0:n.length)>0?Object(c.a)(e.result.list):Object(u.a)(e||"api response error")})))}},{key:"upsertMaster",value:function(e){var t=d.assign({},this.api.defaultParams,{condition:e});return this.api.put(p.c.putMasterInfo,t).pipe(Object(b.a)((function(e){var t,n;if(e.succeedYn&&(null===(n=null===(t=e.result)||void 0===t?void 0:t.list)||void 0===n?void 0:n.length)>0){var o=d.last(e.result.list);return Object(c.a)(Object.assign({},o))}return Object(u.a)(e||"api response error")})))}},{key:"getDetailInformation",value:function(e){var t=d.assign({},this.api.defaultParams,{condition:e});return this.api.post(p.c.description,t).pipe(Object(b.a)((function(e){return e.succeedYn?Object(c.a)(e.result):Object(u.a)(e||"api response error")})))}},{key:"getFacilities",value:function(e){var t=this,n=d.assign({},this.api.defaultParams,{condition:e});return this.api.post(p.c.commonDetailCode,n).pipe(Object(b.a)((function(e){return e.succeedYn?Object(c.a)(e.result.list.map((function(e){return{detailCodeNameEn:"KO"===t.languageService.currentLanguage?e.detailCodeNameLn:e.detailCodeNameEn,detailCode:e.detailCode}}))):Object(u.a)(e||"api response error")})))}},{key:"upsertInformation",value:function(e){var t=d.assign({},this.api.defaultParams,{condition:e});return this.api.put(p.c.putDescription,t).pipe(Object(b.a)((function(e){return e.succeedYn&&e.result?Object(c.a)(e.result):Object(u.a)(e||"api response error")})))}}]),e}()).\u0275fac=function(e){return new(e||i)(s.bc(m.a),s.bc(h.a))},i.\u0275prov=s.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},KTtZ:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var o=n("AytR").a.API_URL,i={commonDetailCode:"".concat(o,"/common/detail-code"),masterList:"".concat(o,"/admin/vendor/promotion"),putMasterInfo:"".concat(o,"/admin/vendor/promotion"),description:"".concat(o,"/admin/vendor/promotion/detail"),putDescription:"".concat(o,"/admin/vendor/promotion/detail")},a={EARLY_BIRD_AND_MIN_NIGHTS:0,LAST_MINUTE_AND_MIN_NIGHTS:1},r={EARLY_BIRD:"PPT01",LAST_MINUTE:"PPT02",MIN_NIGHTS:"PPT03",NTH_NIGHTS_FREE:"PPT04",HOTEL_PACKAGE:"PPT05",SPECIAL_PROMOTION:"PPT06",DYNAMIC:"PPT07",NONE:"PPT99"}},Nje5:function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"p",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"h",(function(){return b})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return h})),n.d(t,"m",(function(){return f})),n.d(t,"u",(function(){return g})),n.d(t,"v",(function(){return v})),n.d(t,"q",(function(){return C})),n.d(t,"r",(function(){return P})),n.d(t,"j",(function(){return y})),n.d(t,"l",(function(){return k})),n.d(t,"k",(function(){return O})),n.d(t,"s",(function(){return V})),n.d(t,"t",(function(){return I}));var o=n("kt0X"),i=Object(o.o)("[VendorPromotionDetailShared] init module state"),a=Object(o.o)("[VendorPromotionDetailShared] MealBasis \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(o.t)()),r=Object(o.o)("[VendorPromotionDetailShared] MealBasis \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(o.t)()),s=Object(o.o)("[VendorPromotionDetailShared] MealBasis \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(o.t)()),l=Object(o.o)("[VendorPromotionDetailShared] FreeBreakfast \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(o.t)()),c=Object(o.o)("[VendorPromotionDetailShared] FreeBreakfast \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(o.t)()),u=Object(o.o)("[VendorPromotionDetailShared] FreeBreakfast \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(o.t)()),b=Object(o.o)("[VendorPromotionDetailShared] CancelPenalty \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(o.t)()),d=Object(o.o)("[VendorPromotionDetailShared] CancelPenalty \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(o.t)()),p=Object(o.o)("[VendorPromotionDetailShared] CancelPenalty \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(o.t)()),m=Object(o.o)("[VendorPromotionDetailShared] load master info",Object(o.t)()),h=Object(o.o)("[VendorPromotionDetailShared] load master success",Object(o.t)()),f=Object(o.o)("[VendorPromotionDetailShared] load master failure",Object(o.t)()),g=Object(o.o)("[VendorPromotionDetailShared] upsert master",Object(o.t)()),v=Object(o.o)("[VendorPromotionDetailShared] upsert master success",Object(o.t)()),C=(Object(o.o)("[VendorPromotionDetailShared] upsert master failure",Object(o.t)()),Object(o.o)("[VendorPromotionDetailShared] selected hotel package")),P=Object(o.o)("[VendorPromotionDetailShared] unselected hotel package"),y=Object(o.o)("[VendorPromotionDetailShared] load detai information",Object(o.t)()),k=Object(o.o)("[VendorPromotionDetailShared] load detail information success",Object(o.t)()),O=Object(o.o)("[VendorPromotionDetailShared] load detail information failure",Object(o.t)()),V=Object(o.o)("[VendorPromotionDetailShared] upsert information",Object(o.t)()),I=Object(o.o)("[VendorPromotionDetailShared] upsert information failure",Object(o.t)())},O2vt:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"i",(function(){return b})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return g}));var o=n("kt0X"),i=n("Nje5"),a="VendorPromotionDetailSharedMaster",r=Object(o.q)({selectedHotelPackage:null,mealBasisList:null,freeBreakfastList:null,cancelPenaltyList:null,masterLoading:!1,masterInfo:null,informationItem:null},Object(o.s)(i.g,(function(e){return{masterLoading:!1,selectedHotelPackage:!1,masterInfo:null,informationItem:null}})),Object(o.s)(i.d,(function(e,t){var n=t.dataList;return Object.assign(Object.assign({},e),{freeBreakfastList:n})})),Object(o.s)(i.f,(function(e,t){var n=t.dataList;return Object.assign(Object.assign({},e),{mealBasisList:n})})),Object(o.s)(i.b,(function(e,t){var n=t.dataList;return Object.assign(Object.assign({},e),{cancelPenaltyList:n})})),Object(o.s)(i.n,(function(e){return Object.assign(Object.assign({},e),{masterLoading:!0})})),Object(o.s)(i.o,(function(e,t){var n=t.masterInfo;return Object.assign(Object.assign({},e),{masterInfo:n,masterLoading:!1})})),Object(o.s)(i.q,(function(e){return Object.assign(Object.assign({},e),{selectedHotelPackage:!0})})),Object(o.s)(i.r,(function(e){return Object.assign(Object.assign({},e),{selectedHotelPackage:!1})})),Object(o.s)(i.v,(function(e,t){var n=t.upsertInfo;return Object.assign(Object.assign({},e),{masterInfo:n})})),Object(o.s)(i.l,(function(e,t){var n=t.informationItem;return Object.assign(Object.assign({},e),{informationItem:n})}))),s="VendorPromotionDetailShared";function l(e,t){return Object(o.m)(_defineProperty({},a,r))(e,t)}var c=Object(o.p)(s),u=Object(o.r)(c,(function(e){return e[a]})),b=Object(o.r)(u,(function(e){return e.mealBasisList})),d=Object(o.r)(u,(function(e){return e.freeBreakfastList})),p=Object(o.r)(u,(function(e){return e.cancelPenaltyList})),m=Object(o.r)(u,(function(e){return e.masterLoading})),h=Object(o.r)(u,(function(e){return e.masterInfo})),f=Object(o.r)(u,(function(e){return e.informationItem})),g=Object(o.r)(u,(function(e){return e.selectedHotelPackage}))},TEiF:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var o,i=n("ofXK"),a=n("3Pt+"),r=n("snw9"),s=n("kt0X"),l=n("pxUr"),c=n("WG3B"),u=n("wPo9"),b=n("7rOj"),d=n("l1P7"),p=n("v7zA"),m=n("7UZF"),h=n("hHe4"),f=n("1OXJ"),g=n("5hwk"),v=n("6LsY"),C=n("kKjH"),P=n("eXiR"),y=n("vu/V"),k=n("tyNb"),O=n("fXoL"),V=[],I=((o=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=O.Ob({type:o}),o.\u0275inj=O.Nb({factory:function(e){return new(e||o)},imports:[[k.f.forChild(V)],k.f]}),o);n("asRa"),n("4qxg"),n("nidz");var D,M,T=n("O2vt"),F=n("LRne"),_=n("eIep"),j=n("lJxs"),N=n("JIr8"),W=n("Kj3r"),S=n("vkgz"),Y=n("LvDl"),L=n("Nje5"),R=n("5uJM"),B=n("EsKh"),E=n("Xb6A"),A=((M=function(){function e(t,n,o,i,a){var s=this;_classCallCheck(this,e),this.actions$=t,this.service=n,this.alertService=o,this._errorService=i,this.store=a,this.loadMealBasisList$=Object(r.c)((function(){return s.actions$.pipe(Object(r.d)(L.p),Object(_.a)((function(e){var t=e.condition;return s.service.getDetailCodeList(t).pipe(Object(j.a)((function(e){return L.f({dataList:e})})),Object(N.a)((function(e){var t="Meal basis list lookup failed. Please try again in a momentarily.",n=[L.e({error:t})];return s._catchErr(e,t,n),[]})))})))})),this.loadFreeBreakfastList$=Object(r.c)((function(){return s.actions$.pipe(Object(r.d)(L.i),Object(_.a)((function(e){var t=e.condition;return s.service.getDetailCodeList(t).pipe(Object(j.a)((function(e){return L.d({dataList:e})})),Object(N.a)((function(e){var t="Free breakfast list lookup failed. Please try again in a momentarily.",n=[L.c({error:t})];return s._catchErr(e,t,n),[]})))})))})),this.loadCancelPenaltyList$=Object(r.c)((function(){return s.actions$.pipe(Object(r.d)(L.h),Object(_.a)((function(e){var t=e.condition;return s.service.getDetailCodeList(t).pipe(Object(j.a)((function(e){return L.b({dataList:e})})),Object(N.a)((function(e){var t="Cancel penalty list lookup failed. Please try again in a momentarily.",n=[L.a({error:t})];return s._catchErr(e,t,n),[]})))})))})),this.loadMasterInfo$=Object(r.c)((function(){return s.actions$.pipe(Object(r.d)(L.n),Object(_.a)((function(e){var t=e.condition;return s.service.getMasterList(t).pipe(Object(j.a)((function(e){return L.o({masterInfo:e[0]})})),Object(N.a)((function(e){var t="\ub9c8\uc2a4\ud130\uc815\ubcf4 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc\ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.",n=[L.m({error:t})];return s._catchErr(e,t,n),[]})))})))})),this.upsertMaster$=Object(r.c)((function(){return s.actions$.pipe(Object(r.d)(L.u),Object(W.a)(500),Object(_.a)((function(e){var t=e.upsertCondition;return s.service.upsertMaster(t).pipe(Object(j.a)((function(e){return{succeedYn:!0,upsertItem:e}})),Object(N.a)((function(e){return Object(F.a)({succeedYn:!1,error:e})})))})),Object(S.a)((function(e){var t=e.succeedYn,n=e.upsertItem,o=e.error;if(t){var i=[L.v({upsertInfo:n})];s._runPage("Your save is complete.",i)}else s._catchErr(o,"Failed to save.")})))}),{dispatch:!1}),this.loadInformation$=Object(r.c)((function(){return s.actions$.pipe(Object(r.d)(L.j),Object(_.a)((function(e){var t=e.condition;return s.service.getDetailInformation(t).pipe(Object(j.a)((function(e){return L.l({informationItem:e})})),Object(N.a)((function(e){var t="\uc0c1\uc138\uc815\ubcf4 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc\ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.",n=[L.k({error:t})];return s._catchErr(e,t,n),[]})))})))})),this.upsertInformation$=Object(r.c)((function(){return s.actions$.pipe(Object(r.d)(L.s),Object(_.a)((function(e){var t=e.upsertCondition;return s.service.upsertInformation(t).pipe(Object(j.a)((function(e){return{succeedYn:!0,upsertItem:e}})),Object(N.a)((function(e){return Object(F.a)({succeedYn:!1,error:e})})))})),Object(S.a)((function(e){var t=e.succeedYn,n=e.upsertItem,o=e.error;if(t){var i=[L.l({informationItem:n})];s._runPage("Your save is complete.",i)}else{var a="Failed to save.",r=[L.t({error:a})];s._catchErr(o,a,r)}})))}),{dispatch:!1})}return _createClass(e,[{key:"_runPage",value:function(e,t){var n=this;this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?function(){t.forEach((function(e){n.store.dispatch(e)}))}:function(){}})}},{key:"_catchErr",value:function(e,t,n){var o=this,i=this._errorService.errorHandler(e,t);Y.isNil(i)||(Y.isNil(i.accept)&&(i.accept=(null==n?void 0:n.length)>0?function(){n.forEach((function(e){o.store.dispatch(e)}))}:function(){}),this.alertService.alert(i))}},{key:"_setRoomCodeCondition",value:function(e){return{roomCode:e.roomCode}}}]),e}()).\u0275fac=function(e){return new(e||M)(O.bc(r.a),O.bc(R.a),O.bc(B.a),O.bc(E.a),O.bc(s.h))},M.\u0275prov=O.Mb({token:M,factory:M.\u0275fac}),M),H=((D=_createClass((function e(){_classCallCheck(this,e)}))).\u0275mod=O.Ob({type:D}),D.\u0275inj=O.Nb({factory:function(e){return new(e||D)},imports:[[i.c,a.m,a.w,l.a,c.m,u.a,b.a,g.a,d.a,p.a,m.a,h.a,f.a,C.a,y.a,P.a,v.a,I,s.j.forFeature(T.a,T.b),r.b.forFeature([A])]]}),D)},asRa:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n("fXoL"),i=n("kt0X"),a=n("LvDl"),r=n("XNiG"),s=n("1G5W"),l=n("lOOf"),c=n("Nje5"),u=n("O2vt"),b=n("xDUJ"),d=n("ofXK"),p=n("4qxg"),m=n("nidz"),h=function(e){return{disabled:e}},f=function(e){return{active:e}},g=function(){var e=function(){function e(t,n,a){_classCallCheck(this,e),this.store=t,this.parentStore=n,this.formService=a,this.closeEvent=new o.n,this.unsubscribe$=new r.a,this.mealBasisList$=t.pipe(Object(i.u)(u.i)),this.freeBreakfastList$=this.store.pipe(Object(i.u)(u.d)),this.cancelPenaltyList$=this.store.pipe(Object(i.u)(u.c)),this.masterLoading$=this.store.pipe(Object(i.u)(u.h)),this.masterInfo$=this.store.pipe(Object(i.u)(u.g)),this.informationItem$=this.store.pipe(Object(i.u)(u.f)),this.isSelectHotelPackage$=this.store.pipe(Object(i.u)(u.e))}return _createClass(e,[{key:"ngOnInit",value:function(){this.tabIndex=0,this._setMasterInfo(),this._requestCommonDetail(),this._initSubscription()}},{key:"ngOnDestroy",value:function(){this.store.dispatch(c.g()),this.parentStore.dispatch(l.a.unsetCopyMode()),this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"onChangeTab",value:function(e){this.tabIndex!==e&&(this.isCopyMode||this.isModifyMode||this.isSelectHotelPackage)&&(this.tabIndex=e)}},{key:"upsertMasterHandler",value:function(e){var t;this.formService.cleanUp(e),this.addWithOnlyDate&&0==(null===(t=e.vendorRemark)||void 0===t?void 0:t.length)&&delete e.vendorRemark,this.store.dispatch(c.u({upsertCondition:e})),this.closeEvent.emit()}},{key:"upsertInformationHandler",value:function(e){this.formService.cleanUp(e),this.store.dispatch(c.s({upsertCondition:e})),this.closeEvent.emit()}},{key:"closeDetailHandler",value:function(){this.closeEvent.emit()}},{key:"_setMasterInfo",value:function(){a.isNil(this.masterInfo)||this.store.dispatch(c.o({masterInfo:this.masterInfo}))}},{key:"_requestCommonDetail",value:function(){this.store.dispatch(c.p({condition:{masterCode:"HO006"}})),this.store.dispatch(c.i({condition:{masterCode:"HO007"}})),this.store.dispatch(c.h({condition:{masterCode:"HO014"}}))}},{key:"_initSubscription",value:function(){var e=this;this.masterInfo$.pipe(Object(s.a)(this.unsubscribe$)).subscribe((function(t){if(!a.isNil(t)){var n=t.planPromotionSeq,o=t.planPromotionTypeCode;e.masterInfo=t,e.addWithOnlyDate||(e.isModifyMode=!0),"PPT05"===o&&(e.isSelectHotelPackage=!0),e.store.dispatch(c.j({condition:{planPromotionSeq:n}}))}})),this.isSelectHotelPackage$.pipe(Object(s.a)(this.unsubscribe$)).subscribe((function(t){null!=t&&(e.isSelectHotelPackage=t)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(i.h),o.Qb(i.h),o.Qb(b.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-vendor-promotion-detail"]],inputs:{isCopyMode:"isCopyMode",isModifyMode:"isModifyMode",isResetPromotionSeq:"isResetPromotionSeq",addWithOnlyDate:"addWithOnlyDate",masterInfo:"masterInfo",planList:"planList",promotionTypes:"promotionTypes"},outputs:{closeEvent:"closeEvent"},decls:19,vars:33,consts:[[1,"tabs-main-group","no-btn"],[1,"tabs-main-group-outer"],[1,"tabs-nav"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"nav-link",3,"ngClass","click"],[1,"tabs-content","tabs-main-contents","contents-scroll"],["tabContainer",""],[1,"tab-pane",3,"ngClass"],[3,"masterItem","planList","isModifyMode","isResetPromotionSeq","isCopyMode","addWithOnlyDate","freeBreakfastList","mealBasisList","cancelPenaltyList","promotionTypes","submitEvent","closeEvent"],[3,"planPromotionSeq","detailInfo","submitEvent","closeEvent"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"ul",2),o.Wb(3,"li",3),o.Wb(4,"a",4),o.fc("click",(function(){return t.onChangeTab(0)})),o.Pc(5,"Detail"),o.Vb(),o.Vb(),o.Wb(6,"li",3),o.Wb(7,"a",5),o.fc("click",(function(){return t.onChangeTab(1)})),o.Pc(8,"Description"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(9,"div",6,7),o.Wb(11,"div",8),o.Wb(12,"app-vendor-promotion-detail-master",9),o.fc("submitEvent",(function(e){return t.upsertMasterHandler(e)}))("closeEvent",(function(){return t.closeDetailHandler()})),o.ic(13,"async"),o.ic(14,"async"),o.ic(15,"async"),o.Vb(),o.Vb(),o.Wb(16,"div",8),o.Wb(17,"app-vendor-promotion-detail-information",10),o.fc("submitEvent",(function(e){return t.upsertInformationHandler(e)}))("closeEvent",(function(){return t.closeDetailHandler()})),o.ic(18,"async"),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Cb(3),o.Gb("active",0===t.tabIndex),o.Cb(3),o.Gb("active",1===t.tabIndex),o.Cb(1),o.pc("ngClass",o.uc(27,h,!t.isCopyMode&&!t.isModifyMode&&!t.isSelectHotelPackage)),o.Cb(4),o.pc("ngClass",o.uc(29,f,0===t.tabIndex)),o.Cb(1),o.pc("masterItem",t.masterInfo)("planList",t.planList)("isModifyMode",t.isModifyMode)("isResetPromotionSeq",t.isResetPromotionSeq)("isCopyMode",t.isCopyMode)("addWithOnlyDate",t.addWithOnlyDate)("freeBreakfastList",o.jc(13,19,t.freeBreakfastList$))("mealBasisList",o.jc(14,21,t.mealBasisList$))("cancelPenaltyList",o.jc(15,23,t.cancelPenaltyList$))("promotionTypes",t.promotionTypes),o.Cb(4),o.pc("ngClass",o.uc(31,f,1===t.tabIndex)),o.Cb(1),o.pc("planPromotionSeq",null==t.masterInfo?null:t.masterInfo.planPromotionSeq)("detailInfo",o.jc(18,25,t.informationItem$)))},directives:[d.l,p.a,m.a],pipes:[d.b],encapsulation:2,changeDetection:0}),e}()},lOOf:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={};n.r(o),n.d(o,"loadRegisterStatusList",(function(){return a})),n.d(o,"getRegisterStatusListSuccess",(function(){return r})),n.d(o,"getRegisterStatusListFailure",(function(){return s})),n.d(o,"loadHotelTypeList",(function(){return l})),n.d(o,"getHotelTypeListSuccess",(function(){return c})),n.d(o,"getHotelTypeListFailure",(function(){return u})),n.d(o,"loadStarRatingList",(function(){return b})),n.d(o,"getStarRatingListSuccess",(function(){return d})),n.d(o,"getStarRatingListFailure",(function(){return p})),n.d(o,"loadDataStatusList",(function(){return m})),n.d(o,"getDataStatusSuccess",(function(){return h})),n.d(o,"getDataStatusFailure",(function(){return f})),n.d(o,"loadPromotionTypeList",(function(){return g})),n.d(o,"getPromotionTypeListSuccess",(function(){return v})),n.d(o,"getPromotionTypeListFailure",(function(){return C})),n.d(o,"loadPlanList",(function(){return P})),n.d(o,"getPlanListSuccess",(function(){return y})),n.d(o,"getPlanListFailure",(function(){return k})),n.d(o,"loadRoomTypeList",(function(){return O})),n.d(o,"getRoomTypeSuccess",(function(){return V})),n.d(o,"getRoomTypeFailure",(function(){return I})),n.d(o,"initStateAction",(function(){return D})),n.d(o,"changeSearchCondition",(function(){return M})),n.d(o,"changePageSize",(function(){return T})),n.d(o,"changePageIndex",(function(){return F})),n.d(o,"loadList",(function(){return _})),n.d(o,"getListSuccess",(function(){return j})),n.d(o,"getListFailure",(function(){return N})),n.d(o,"upsertList",(function(){return W})),n.d(o,"getHistories",(function(){return S})),n.d(o,"openDetailPopup",(function(){return Y})),n.d(o,"closeDetailPopup",(function(){return L})),n.d(o,"setCopyMode",(function(){return R})),n.d(o,"unsetCopyMode",(function(){return B})),n.d(o,"addSelectedDetailRowInfo",(function(){return E})),n.d(o,"delSelectedDetailRowInfo",(function(){return A})),n.d(o,"addRetrievedHotelSimple",(function(){return H})),n.d(o,"delRetrievedHotelSimple",(function(){return x})),n.d(o,"putAllotment",(function(){return q})),n.d(o,"setGridStateAction",(function(){return G})),n.d(o,"setGridCheckedStateAction",(function(){return w}));var i=n("kt0X"),a=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub4f1\ub85d\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),r=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub4f1\ub85d\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),s=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub4f1\ub85d\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),l=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ud638\ud154\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),c=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ud638\ud154\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),u=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ud638\ud154\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),b=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ud638\ud154\ub4f1\uae09 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),d=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ud638\ud154\ub4f1\uae09 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),p=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ud638\ud154\ub4f1\uae09 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),m=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub370\uc774\ud130\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),h=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub370\uc774\ud130\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),f=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub370\uc774\ud130\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),g=Object(i.o)("[HoHotelVendorPromotionMaster/List] promotion type \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),v=Object(i.o)("[HoHotelVendorPromotionMaster/List] promotion type \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),C=Object(i.o)("[HoHotelVendorPromotionMaster/List] promotion type \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),P=Object(i.o)("[HoHotelVendorPromotionMaster/List] plan \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),y=Object(i.o)("[HoHotelVendorPromotionMaster/List] plan \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),k=Object(i.o)("[HoHotelVendorPromotionMaster/List] plan \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),O=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub8f8\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),V=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub8f8\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),I=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub8f8\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),D=Object(i.o)("[HoHotelVendorPromotionMaster/List] init state"),M=Object(i.o)("[HoHotelVendorPromotionMaster/List] change search condition",Object(i.t)()),T=Object(i.o)("[HoHotelVendorPromotionMaster/List] change page size",Object(i.t)()),F=Object(i.o)("[HoHotelVendorPromotionMaster/List] change page index",Object(i.t)()),_=Object(i.o)("[HoHotelVendorPromotionMaster/List] load grid data list",Object(i.t)()),j=Object(i.o)("[HoHotelVendorPromotionMaster/List] get list success",Object(i.t)()),N=Object(i.o)("[HoHotelVendorPromotionMaster/List] get list failure",Object(i.t)()),W=Object(i.o)("[HoHotelVendorPromotionMaster/List] upsert grid data list",Object(i.t)()),S=Object(i.o)("[HoHotelVendorPromotionMaster/History] load room history list",Object(i.t)()),Y=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \uc0c1\uc138\ud31d\uc5c5 \uc5f4\uae30"),L=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \uc0c1\uc138\ud31d\uc5c5 \ub2eb\uae30"),R=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \ubcf5\uc0ac\ubaa8\ub4dc \uc124\uc815"),B=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \ubcf5\uc0ac\ubaa8\ub4dc \uc124\uc815\ud574\uc81c"),E=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc120\ud0dd",Object(i.t)()),A=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc81c\uac70"),H=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \uac80\uc0c9\ud55c \ud638\ud154 \uc800\uc7a5",Object(i.t)()),x=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \uac80\uc0c9\ud55c \ud638\ud154 \uc81c\uac70"),q=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] put allotment",Object(i.t)()),G=Object(i.o)("[HoHotelVendorPromotionMaster/List] set grid state",Object(i.t)()),w=Object(i.o)("[HoHotelVendorPromotionMaster/List] set grid checked state",Object(i.t)())},nidz:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("fXoL"),i=n("XNiG"),a=n("LvDl"),r=n("5uJM"),s=n("3Pt+"),l=n("RfQl"),c=function(){var e=function(){function e(t){_classCallCheck(this,e),this.dataService=t,this.submitEvent=new o.n,this.closeEvent=new o.n,this.unsubscribe$=new i.a,this.upsertForm=this.dataService.generateDetailInfoPutForm()}return _createClass(e,[{key:"detailInfo",get:function(){return this._detailInfo},set:function(e){if(this._detailInfo=e,e){var t=e.planPromotionDetailEn,n=e.planPromotionDetailKo,o=e.planPromotionDetailJa,i=e.planPromotionDetailVi,a=e.planPromotionDetailZh,r=e.planPromotionSeq;this.upsertForm.patchValue({planPromotionDetailEn:t,planPromotionDetailKo:n,planPromotionDetailJa:o,planPromotionDetailVi:i,planPromotionDetailZh:a,planPromotionSeq:r})}}},{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"onSubmit",value:function(){var e=this._setUpsertCondition();this.submitEvent.emit(e)}},{key:"onClose",value:function(){this.closeEvent.emit()}},{key:"_setUpsertCondition",value:function(){var e=this.dataService.initDetailInfoPutFormData(),t=this.planPromotionSeq;return Object.assign({},a.pick(this.upsertForm.value,Object.keys(e)),{planPromotionSeq:t})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(r.b))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-vendor-promotion-detail-information"]],inputs:{loading:"loading",planPromotionSeq:"planPromotionSeq",detailInfo:"detailInfo"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:43,vars:1,consts:[[1,"table","table-bordered","mb10",3,"formGroup"],["width","11%"],["scope","row",1,"th-bg"],[1,"textarea"],["toolBarType","full","formControlName","planPromotionDetailEn"],["toolBarType","full","formControlName","planPromotionDetailKo"],["toolBarType","full","formControlName","planPromotionDetailJa"],["toolBarType","full","formControlName","planPromotionDetailVi"],["toolBarType","full","formControlName","planPromotionDetailZh"],[1,"button-area","d-flex","justify-content-end","mt10"],[1,"btn","btn-secondary","sm",3,"click"],[1,"btn","btn-light","sm",3,"click"]],template:function(e,t){1&e&&(o.Wb(0,"form",0),o.Wb(1,"table"),o.Wb(2,"caption"),o.Pc(3," Description "),o.Vb(),o.Wb(4,"colgroup"),o.Rb(5,"col",1),o.Rb(6,"col"),o.Vb(),o.Wb(7,"tbody"),o.Wb(8,"tr"),o.Wb(9,"th",2),o.Pc(10,"Promotion Description(EN)"),o.Vb(),o.Wb(11,"td"),o.Wb(12,"div",3),o.Rb(13,"app-editor",4),o.Vb(),o.Vb(),o.Vb(),o.Wb(14,"tr"),o.Wb(15,"th",2),o.Pc(16,"Promotion Description(KO)"),o.Vb(),o.Wb(17,"td"),o.Wb(18,"div",3),o.Rb(19,"app-editor",5),o.Vb(),o.Vb(),o.Vb(),o.Wb(20,"tr"),o.Wb(21,"th",2),o.Pc(22,"Promotion Description(JA)"),o.Vb(),o.Wb(23,"td"),o.Wb(24,"div",3),o.Rb(25,"app-editor",6),o.Vb(),o.Vb(),o.Vb(),o.Wb(26,"tr"),o.Wb(27,"th",2),o.Pc(28,"Promotion Description(VI)"),o.Vb(),o.Wb(29,"td"),o.Wb(30,"div",3),o.Rb(31,"app-editor",7),o.Vb(),o.Vb(),o.Vb(),o.Wb(32,"tr"),o.Wb(33,"th",2),o.Pc(34,"Promotion Description(ZH)"),o.Vb(),o.Wb(35,"td"),o.Wb(36,"div",3),o.Rb(37,"app-editor",8),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(38,"div",9),o.Wb(39,"button",10),o.fc("click",(function(){return t.onSubmit()})),o.Pc(40,"Save"),o.Vb(),o.Wb(41,"button",11),o.fc("click",(function(){return t.onClose()})),o.Pc(42,"Close"),o.Vb(),o.Vb()),2&e&&o.pc("formGroup",t.upsertForm)},directives:[s.B,s.s,s.k,l.a,s.r,s.i],encapsulation:2,changeDetection:0}),e}()}}]);