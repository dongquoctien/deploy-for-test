(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{"25Z0":function(e,t,i){"use strict";i.r(t),i.d(t,"CONTAINERS",(function(){return Qt})),i.d(t,"COMPONENTS",(function(){return Kt})),i.d(t,"BsScreenAuthModule",(function(){return Ut}));var n={};i.r(n),i.d(n,"initComponent",(function(){return E})),i.d(n,"changeAuthGroupSearchConditionAction",(function(){return D})),i.d(n,"loadAuthGroupListAction",(function(){return F})),i.d(n,"loadAuthGroupListSuccessAction",(function(){return I})),i.d(n,"loadAuthGroupListFailureAction",(function(){return _})),i.d(n,"setAuthGroupGridStateAction",(function(){return N})),i.d(n,"setAuthGroupGridCheckedStateAction",(function(){return x})),i.d(n,"setMappingGridStateAction",(function(){return $})),i.d(n,"setMappingGridCheckedStateAction",(function(){return Y})),i.d(n,"addSelectedAuthGroupDetailRowInfo",(function(){return V})),i.d(n,"delSelectedAuthGroupDetailRowInfo",(function(){return W})),i.d(n,"setSelectedAuthGroupScreens",(function(){return M})),i.d(n,"clearSelectedAuthGroupScreens",(function(){return q})),i.d(n,"addSelecedAuthGroupScreenItem",(function(){return P})),i.d(n,"delSelecedAuthGroupScreenItem",(function(){return T})),i.d(n,"copyAuthGroupAction",(function(){return B})),i.d(n,"copyAuthGroupSuccessAction",(function(){return H})),i.d(n,"copyAuthGroupFailureAction",(function(){return Q})),i.d(n,"mappingAuthGroupScreenAction",(function(){return K})),i.d(n,"mappingAuthGroupScreenSuccessAction",(function(){return U})),i.d(n,"mappingAuthGroupScreenFailureAction",(function(){return z})),i.d(n,"loadAuthFunctionListAction",(function(){return X})),i.d(n,"loadAuthFunctionListSuccessAction",(function(){return J})),i.d(n,"loadAuthFunctionListFailureAction",(function(){return Z})),i.d(n,"clearAuthFunctionListAction",(function(){return ee})),i.d(n,"mappingAuthGroupFunctionAction",(function(){return te})),i.d(n,"mappingAuthGroupFunctionSuccessAction",(function(){return ie})),i.d(n,"mappingAuthGroupFunctionFailureAction",(function(){return ne})),i.d(n,"changeScreenSearchConditionAction",(function(){return ce})),i.d(n,"loadScreenListAction",(function(){return se})),i.d(n,"loadScreenListSuccessAction",(function(){return re})),i.d(n,"loadScreenListFailureAction",(function(){return oe})),i.d(n,"setScreenGridCheckedState",(function(){return ae}));var c=i("ofXK"),s=i("3Pt+"),r=i("snw9"),o=i("kt0X"),a=i("WG3B"),l=i("xoAz"),u=i("wPo9"),d=i("7rOj"),h=i("0v3k"),p=i("+NQf"),b=i("6LsY"),g=i("l1P7"),S=i("v7zA"),f=i("7UZF"),m=i("hHe4"),O=i("1OXJ"),v=i("5hwk"),k=i("kKjH"),A=i("qXPF"),j=i("htEk"),C=i("YFfA"),w=i("vu/V"),G=i("tyNb"),y=i("XNiG"),L=i("1G5W"),R=i("LvDl");const E=Object(o.o)("[BsScreenAuth] init this component"),D=Object(o.o)("[BsScreenAuth] change auth group search condition",Object(o.t)()),F=Object(o.o)("[BsScreenAuth] load auth group grid data list",Object(o.t)()),I=Object(o.o)("[BsScreenAuth] get auth group list success",Object(o.t)()),_=Object(o.o)("[BsScreenAuth] get auth group list failure",Object(o.t)()),N=Object(o.o)("[BsScreenAuth] set auth group grid state",Object(o.t)()),x=Object(o.o)("[BsScreenAuth] set auth group grid checked state",Object(o.t)()),$=Object(o.o)("[BsScreenAuth] set mapping grid state",Object(o.t)()),Y=Object(o.o)("[BsScreenAuth] set mapping grid checked state",Object(o.t)()),V=Object(o.o)("[BsScreenAuth] select auth group detail row info",Object(o.t)()),W=Object(o.o)("[BsScreenAuth] delete auth group detail row info"),M=Object(o.o)("[BsScreenAuth] set seleced auth group screens",Object(o.t)()),q=Object(o.o)("[BsScreenAuth] clear seleced auth group screens"),P=Object(o.o)("[BsScreenAuth] add seleced auth group screen item",Object(o.t)()),T=Object(o.o)("[BsScreenAuth] del seleced auth group screen item"),B=Object(o.o)("[BsScreenAuth] copy auth group",Object(o.t)()),H=Object(o.o)("[BsScreenAuth] copy auth group success",Object(o.t)()),Q=Object(o.o)("[BsScreenAuth] copy auth group failure",Object(o.t)()),K=Object(o.o)("[BsScreenAuth] upsert auth group screen mapping",Object(o.t)()),U=Object(o.o)("[BsScreenAuth] upsert auth group screen mapping success",Object(o.t)()),z=Object(o.o)("[BsScreenAuth] upsert auth group screen mapping failure",Object(o.t)()),X=Object(o.o)("[BsScreenAuth] load auth function grid data list",Object(o.t)()),J=Object(o.o)("[BsScreenAuth] get auth function list success",Object(o.t)()),Z=Object(o.o)("[BsScreenAuth] get auth function list failure",Object(o.t)()),ee=Object(o.o)("[BsScreenAuth] del auth function list"),te=Object(o.o)("[BsScreenAuth] map auth group function",Object(o.t)()),ie=Object(o.o)("[BsScreenAuth] map auth group function success",Object(o.t)()),ne=Object(o.o)("[BsScreenAuth] map auth group function failure",Object(o.t)()),ce=Object(o.o)("[BsScreenAuth] change screen search condition",Object(o.t)()),se=Object(o.o)("[BsScreenAuth] load screen grid data list",Object(o.t)()),re=Object(o.o)("[BsScreenAuth] get screen list success",Object(o.t)()),oe=Object(o.o)("[BsScreenAuth] get screen list failure",Object(o.t)()),ae=Object(o.o)("[BsScreenAuth] set screen grid checked state",Object(o.t)());var le=i("EVqC");const ue=Object(le.a)({selectId:e=>e.rowid,sortComparer:!1}),de=ue.getInitialState({loading:!1,searchCondition:null,mainGridState:{skip:0,sortInfo:[],filter:{logic:"and",filters:[]}},mainGridCheckedState:null,mappingGridState:{skip:0,sortInfo:[],filter:{logic:"and",filters:[]}},mappingGridCheckedState:null,selectedDetailRowInfo:null,selectedDetailRowScreens:null,selectedDetailRowScreenItem:null,functionLoading:!1,functionDataList:null}),he=Object(o.q)(de,Object(o.s)(n.initComponent,e=>Object.assign(Object.assign({},e),{loading:!1,functionLoading:!1})),Object(o.s)(n.changeAuthGroupSearchConditionAction,(e,{searchCondition:t})=>Object.assign(Object.assign({},e),{searchCondition:t})),Object(o.s)(n.loadAuthGroupListAction,e=>Object.assign(Object.assign({},e),{loading:!0})),Object(o.s)(n.loadAuthGroupListSuccessAction,(e,{dataList:t})=>ue.setAll(t,Object.assign(Object.assign({},e),{loading:!1}))),Object(o.s)(n.loadAuthGroupListFailureAction,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(o.s)(n.setAuthGroupGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{mainGridState:t})),Object(o.s)(n.setAuthGroupGridCheckedStateAction,(e,{gridCheckedState:t})=>Object.assign(Object.assign({},e),{mainGridCheckedState:t})),Object(o.s)(n.setMappingGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{mappingGridState:t})),Object(o.s)(n.setMappingGridCheckedStateAction,(e,{gridCheckedState:t})=>Object.assign(Object.assign({},e),{mappingGridCheckedState:t})),Object(o.s)(n.addSelectedAuthGroupDetailRowInfo,(e,{selectedDetailRowInfo:t})=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:t})),Object(o.s)(n.delSelectedAuthGroupDetailRowInfo,e=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:null})),Object(o.s)(n.setSelectedAuthGroupScreens,(e,{screens:t})=>Object.assign(Object.assign({},e),{selectedDetailRowScreens:t})),Object(o.s)(n.clearSelectedAuthGroupScreens,e=>Object.assign(Object.assign({},e),{selectedDetailRowScreens:null})),Object(o.s)(n.addSelecedAuthGroupScreenItem,(e,{selecedAuthGroupScreenInfo:t})=>Object.assign(Object.assign({},e),{selectedDetailRowScreenItem:t})),Object(o.s)(n.delSelecedAuthGroupScreenItem,e=>Object.assign(Object.assign({},e),{selectedDetailRowScreenItem:null})),Object(o.s)(n.loadAuthFunctionListAction,e=>Object.assign(Object.assign({},e),{functionLoading:!0})),Object(o.s)(n.loadAuthFunctionListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{functionLoading:!1,functionDataList:t})),Object(o.s)(n.loadAuthFunctionListFailureAction,e=>Object.assign(Object.assign({},e),{functionLoading:!1})),Object(o.s)(n.clearAuthFunctionListAction,e=>Object.assign(Object.assign({},e),{functionDataList:null})),Object(o.s)(n.mappingAuthGroupScreenSuccessAction,(e,{data:t})=>{var i;const n=null===(i=Object.entries(e.entities).find(([e,i])=>(console.log(i,"value",t,"data"),i.authGroupSeq===t.authGroupSeq)))||void 0===i?void 0:i[0];return ue.upsertOne(Object.assign(Object.assign({},t),{rowid:n}),Object.assign({},e))}),Object(o.s)(n.mappingAuthGroupFunctionSuccessAction,(e,{dataResult:t})=>ue.upsertOne(t,Object.assign({},e))),Object(o.s)(n.copyAuthGroupSuccessAction,(e,{data:t})=>{const i=String(e.entities.length);return ue.upsertOne(Object.assign(Object.assign({},t),{rowid:i}),Object.assign({},e))})),pe=Object(le.a)({selectId:e=>e.rowid,sortComparer:!1}),be=pe.getInitialState({loading:!1,searchCondition:null,gridCheckedState:null}),ge=Object(o.q)(be,Object(o.s)(n.changeScreenSearchConditionAction,(e,{searchCondition:t})=>Object.assign(Object.assign({},e),{searchCondition:t})),Object(o.s)(n.loadScreenListAction,e=>Object.assign(Object.assign({},e),{loading:!0})),Object(o.s)(n.loadScreenListSuccessAction,(e,{dataList:t})=>pe.setAll(t,Object.assign(Object.assign({},e),{loading:!1}))),Object(o.s)(n.loadScreenListFailureAction,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(o.s)(n.setScreenGridCheckedState,(e,{gridCheckedState:t})=>Object.assign(Object.assign({},e),{gridCheckedState:t})));function Se(e,t){return Object(o.m)({bsScreenAuthMaster:he,bsScreenAuthSub:ge})(e,t)}const fe=Object(o.p)("bsScreenAuth"),me=Object(o.r)(fe,e=>e.bsScreenAuthMaster),Oe=Object(o.r)(fe,e=>e.bsScreenAuthSub),ve=e=>Object(o.r)(me,e),ke=e=>Object(o.r)(Oe,e),Ae=ve(e=>e.loading),je=ve(e=>e.searchCondition),Ce=ue.getSelectors(me).selectAll,we=ve(e=>e.mainGridState),Ge=ve(e=>e.mainGridCheckedState),ye=ve(e=>e.mappingGridState),Le=ve(e=>e.mappingGridCheckedState),Re=ve(e=>e.selectedDetailRowInfo),Ee=ve(e=>e.selectedDetailRowScreens),De=ve(e=>e.selectedDetailRowScreenItem),Fe=ve(e=>e.functionLoading),Ie=ve(e=>e.functionDataList),_e=ke(e=>e.loading),Ne=ke(e=>e.searchCondition),xe=pe.getSelectors(Oe).selectAll,$e=ke(e=>e.gridCheckedState);var Ye=i("/uUt"),Ve=i("fXoL"),We=i("LRne"),Me=i("z6cu"),qe=i("eIep"),Pe=i("AytR");const{API_URL:Te}=Pe.a,Be={postAuthGroup:`${Te}/admin/basis/auth-group`,postFunction:`${Te}/admin/basis/function`,postApiService:`${Te}/admin/basis/screen`,putAuthGroupCopy:`${Te}/admin/basis/auth-group/copy`,putAuthGroupScreen:`${Te}/admin/basis/auth-group/screen`,putAuthGroupScreenFunction:`${Te}/admin/basis/auth-group/function`};var He=i("tpT/");let Qe=(()=>{class e{constructor(e){this.api=e}getAuthGroupList(e){const t=R.assign({},this.api.defaultParams,{condition:e});return this.api.post(Be.postAuthGroup,t).pipe(Object(qe.a)(e=>{if(e.succeedYn){const t=e.result.list.reduce((e,t)=>(t.useYn&&e.push(t),e),[]),i=this._addRowid(t);return Object(We.a)(i)}return Object(Me.a)(e||"api response error")}))}getFunction(e){const t=R.assign({},this.api.defaultParams,{condition:e});return this.api.post(Be.postFunction,t).pipe(Object(qe.a)(e=>e.succeedYn?Object(We.a)(e.result.list):Object(Me.a)(e||"api response error")))}getScreenList(e){const t=R.assign({},this.api.defaultParams,{condition:e});return this.api.post(Be.postApiService,t).pipe(Object(qe.a)(e=>{if(e.succeedYn){const t=this._addRowid(e.result.list);return Object(We.a)(t)}return Object(Me.a)(e||"api response error")}))}updateScreenMapping(e){const t=R.assign({},this.api.defaultParams,{condition:e});return this.api.put(Be.putAuthGroupScreen,t).pipe(Object(qe.a)(e=>{if(e.succeedYn&&e.result){const t=e.result;return Object(We.a)(t)}return Object(Me.a)(e||"api response error")}))}updateFunctionMapping(e){const t=R.assign({},this.api.defaultParams,{condition:e});return this.api.put(Be.putAuthGroupScreenFunction,t).pipe(Object(qe.a)(e=>{if(e.succeedYn){const t=e.result;return Object(We.a)(t)}return Object(Me.a)(e||"api response error")}))}copyAuthGroup(e){const t=R.assign({},this.api.defaultParams,{condition:e});return this.api.put(Be.putAuthGroupCopy,t).pipe(Object(qe.a)(e=>{if(e.succeedYn){const t=e.result;return Object(We.a)(t)}return Object(Me.a)(e||"api response error")}))}_addRowid(e){return R.isNil(e)?[]:e.map((e,t)=>Object.assign(Object.assign({},e),{rowid:String(t)}))}}return e.\u0275fac=function(t){return new(t||e)(Ve.bc(He.a))},e.\u0275prov=Ve.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ke=(()=>{class e{constructor(e){this.fb=e,this.generateAuthGroupGridColumns=()=>[{field:"authGroupSeq",title:"SEQ",type:"numeric"},{field:"authGroupNameEn",title:"Auth GRP Name(EN)",type:"text"},{field:"authGroupNameLn",title:"Auth GRP Name(KO)",type:"text"},{field:"useYn",title:"Use YN",type:"boolean",width:100,template:"useYnTpl",style:{"text-align":"center"}},{field:"controlRemark",title:"Control Remark",type:"text"}],this.generateScreenMasterGridColumns=()=>[{field:"screenSeq",title:"SEQ",type:"numeric",width:"100"},{field:"screenNameEn",title:"Screen Name(EN)",type:"text",width:"120",useTitleAttrYn:!0},{field:"screenUrl",title:"Screen URL",type:"text",width:"200",useTitleAttrYn:!0},{field:"screenTypeName",title:"Screen Type",type:"text",width:"100"},{field:"gridYn",title:"Grid YN",type:"boolean",width:"80",template:"gridYnTpl",style:{"text-align":"center"}},{field:"useYn",title:"Use YN",type:"boolean",width:100,template:"useYnTpl",style:{"text-align":"center"}},{field:"controlRemark",title:"Control Remark",width:"120",type:"text"}],this.generateAuthGroupSearchForm=()=>this.fb.group({authGroupTypeCode:[null],authGroupName:[null]}),this.initAuthGroupSearchFormData=()=>({authGroupTypeCode:"SCN",authGroupName:null}),this.generateApiServiceSearchForm=()=>this.fb.group({screenName:[null],useYn:[null]}),this.initApiServiceSearchFormData=()=>({screenName:null,useYn:null})}folderRequiredValidator(e){if(!e)return null;const t=R.isNil(e.get("folderSeq").value),i=R.isNil(e.get("folderNameLn").value)||""===e.get("folderNameLn").value;return t&&i?{folderInfoRequired:!0}:null}deviceRequiredValidator(e){return e&&!1===e.get("pcDisplayYn").value&&!1===e.get("mobileAppDisplayYn").value&&!1===e.get("mobileWebDisplayYn").value?{shouldNotAllFalse:!0}:null}planDeviceRequiredValidator(e){return e&&!1===e.get("planPcDisplayYn").value&&!1===e.get("planMobileAppDisplayYn").value&&!1===e.get("planMobileWebDisplayYn").value?{shouldNotAllPlanFalse:!0}:null}priceOverValidators(e,t){return i=>{if(!i)return null;const n=i.parent;return n&&"R"===n.get(t).value&&i.value>e?{priceOvered:!0}:null}}}return e.\u0275fac=function(t){return new(t||e)(Ve.bc(s.f))},e.\u0275prov=Ve.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ue=i("+Sob"),ze=i("gbCm");let Xe=(()=>{class e{constructor(e){this._dataService=e,this.clickSearchEvent=new Ve.n,this.clickResetEvent=new Ve.n,this._$unsubscribe=new y.a,this.searchForm=e.generateAuthGroupSearchForm()}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFromData=this._setSearchFormData(e)}ngOnInit(){}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){const e=this.setSearchCondition();this.clickSearchEvent.emit({searchCondition:e})}onReset(){this.clickResetEvent.emit()}setSearchCondition(){const e=this._dataService.initAuthGroupSearchFormData(),t=Object.assign({},R.pick(this.searchForm.value,Object.keys(e)));return R.omitBy(t,R.isNil)}_setSearchFormData(e){const t=this._dataService.initAuthGroupSearchFormData();return R.isEmpty(e)?t:Object.assign({},t,R.pick(e,Object.keys(t)))}}return e.\u0275fac=function(t){return new(t||e)(Ve.Qb(Ke))},e.\u0275cmp=Ve.Kb({type:e,selectors:[["app-bs-screen-auth-master-search"]],inputs:{searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:12,vars:2,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-4"],[1,"form-label"],["formControlName","authGroupName",1,"d-inline-flex","flex-fill"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary"],["type","button","role","button",1,"btn","btn-reset",3,"click"]],template:function(e,t){1&e&&(Ve.Wb(0,"form",0),Ve.fc("ngSubmit",(function(){return t.onSubmit()})),Ve.Wb(1,"div",1),Ve.Wb(2,"div",2),Ve.Wb(3,"div",3),Ve.Wb(4,"span",4),Ve.Pc(5,"Auth Group Name"),Ve.Vb(),Ve.Rb(6,"app-input-text",5),Ve.Vb(),Ve.Vb(),Ve.Vb(),Ve.Wb(7,"div",6),Ve.Wb(8,"button",7),Ve.Pc(9,"Search"),Ve.Vb(),Ve.Wb(10,"button",8),Ve.fc("click",(function(){return t.onReset()})),Ve.Pc(11,"Reset"),Ve.Vb(),Ve.Vb(),Ve.Vb()),2&e&&Ve.pc("formGroup",t.searchForm)("connectForm",t.searchFromData)},directives:[s.B,s.s,s.k,Ue.a,ze.a,s.r,s.i],encapsulation:2,changeDetection:0}),e})(),Je=(()=>{class e{constructor(){this.clickCopyEvent=new Ve.n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ve.Kb({type:e,selectors:[["app-bs-screen-auth-master-control"]],inputs:{loading:"loading",totalCount:"totalCount"},outputs:{clickCopyEvent:"clickCopyEvent"},decls:6,vars:1,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"]],template:function(e,t){1&e&&(Ve.Wb(0,"div",0),Ve.Wb(1,"strong",1),Ve.Pc(2),Ve.Vb(),Ve.Wb(3,"div",2),Ve.Wb(4,"button",3),Ve.fc("click",(function(){return t.clickCopyEvent.emit()})),Ve.Pc(5,"Copy"),Ve.Vb(),Ve.Vb(),Ve.Vb()),2&e&&(Ve.Cb(2),Ve.Qc(t.loading?"":t.totalCount))},encapsulation:2,changeDetection:0}),e})();var Ze=i("G4DP"),et=i("EsKh");const tt=function(){return{field:"screenNameEn",title:"Screen Name(EN)",type:"text"}},it=function(e){return[e]};let nt=(()=>{class e{constructor(e){this.alertService=e,this.clickSaveEvent=new Ve.n,this.clickMappingEvent=new Ve.n}get screenList(){return R.isEmpty(this._screenList)?[]:this._screenList}set screenList(e){e&&(this._screenList=e.map((e,t)=>Object.assign(Object.assign({},e),{rowid:String(t)})))}get thisGridState(){var e;return(null===(e=this.gridEl)||void 0===e?void 0:e.thisGridState)||null}get checkStateOutput(){var e;return(null===(e=this.gridEl)||void 0===e?void 0:e.checkedStateOutput)||null}ngOnInit(){}ngOnDestroy(){}getCheckedDataList(){return this.gridEl.checkedDataList}clickUpsertHandler(){if(R.isNil(this.selectedAuthGroupSeq))return void this.alertService.alert("\uc120\ud0dd\ub41c \uad8c\ud55c\uadf8\ub8f9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const e={authGroupSeq:this.selectedAuthGroupSeq,screenSeqs:this.gridEl.dataList.map(e=>e.screenSeq)};this.clickSaveEvent.emit(e)}cellClickRowHandler(e){this.clickMappingEvent.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(Ve.Qb(et.a))},e.\u0275cmp=Ve.Kb({type:e,selectors:[["app-bs-screen-auth-mapping"]],viewQuery:function(e,t){var i;1&e&&Ve.Xc(Ze.a,!0),2&e&&Ve.Dc(i=Ve.gc())&&(t.gridEl=i.first)},inputs:{gridState:"gridState",gridCheckedState:"gridCheckedState",selectedAuthGroupSeq:"selectedAuthGroupSeq",screenList:"screenList"},outputs:{clickSaveEvent:"clickSaveEvent",clickMappingEvent:"clickMappingEvent"},decls:5,vars:12,consts:[[1,"grid-control-area"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-primary","sm","d-inline-flex","flex-glow-0",3,"click"],["gridName","screenAuthMappingGrid",3,"gridState","checkedState","columns","pageable","pageSize","sortable","filterable","checkboxUseYn","dataList","cellClickEvent"]],template:function(e,t){1&e&&(Ve.Wb(0,"div",0),Ve.Wb(1,"div",1),Ve.Wb(2,"button",2),Ve.fc("click",(function(){return t.clickUpsertHandler()})),Ve.Pc(3,"Save"),Ve.Vb(),Ve.Vb(),Ve.Vb(),Ve.Wb(4,"app-grid-basis",3),Ve.fc("cellClickEvent",(function(e){return t.cellClickRowHandler(e)})),Ve.Vb()),2&e&&(Ve.Cb(4),Ve.pc("gridState",t.gridState)("checkedState",t.gridCheckedState)("columns",Ve.uc(10,it,Ve.tc(9,tt)))("pageable",!1)("pageSize",1e5)("sortable",!1)("filterable",!1)("checkboxUseYn",!0)("dataList",t.screenList))},directives:[Ze.a],encapsulation:2,changeDetection:0}),e})();function ct(e,t){1&e&&(Ve.Wb(0,"span"),Ve.Pc(1,"Y"),Ve.Vb())}function st(e,t){1&e&&(Ve.Wb(0,"span"),Ve.Pc(1,"N"),Ve.Vb())}function rt(e,t){if(1&e&&(Ve.Nc(0,ct,2,0,"span",5),Ve.Nc(1,st,2,0,"span",5)),2&e){const e=t.$implicit;Ve.pc("ngIf",!0===e.authYn),Ve.Cb(1),Ve.pc("ngIf",!1===e.authYn)}}const ot=function(e){return{authYnTpl:e}};let at=(()=>{class e{constructor(e){this.alertService=e,this.clickSaveEvent=new Ve.n,this.columns=[{field:"functionNameLn",title:"\ubc84\ud2bc",type:"text"},{field:"authYn",title:"\uad8c\ud55c\uc5ec\ubd80",type:"text",template:"authYnTpl"}]}get selecedFunctions(){return this._selecedFunctions}set selecedFunctions(e){this._selecedFunctions=e,this._setCheckedState()}get functionList(){return R.isEmpty(this._functionList)?[]:this._functionList}set functionList(e){this._functionList=e,this._setCheckedState()}ngOnInit(){}ngOnDestroy(){}getCheckedDataList(){return this.gridEl.checkedDataList}clickUpsertHandler(){var e;if(R.isNil(this.selectedAuthGroupSeq))return void this.alertService.alert("\uc120\ud0dd\ub41c \uad8c\ud55c\uadf8\ub8f9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");if(R.isNil(null===(e=this.selectedScreenItem)||void 0===e?void 0:e.screenSeq))return void this.alertService.alert("\uc120\ud0dd\ub41c \ud654\uba74\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const t={authGroupSeq:this.selectedAuthGroupSeq,screenSeq:this.selectedScreenItem.screenSeq,functionSeqs:this.gridEl.checkedDataList.map(e=>e.functionSeq)};this.clickSaveEvent.emit(t)}_setCheckedState(){if(R.isEmpty(this.selecedFunctions)||R.isEmpty(this.functionList))this.checkedState={checkedRowids:null};else{const e=this.selecedFunctions.map(e=>e.functionSeq),t=this.functionList.filter(t=>e.indexOf(t.functionSeq)>-1).map(e=>e.rowid);this.checkedState={checkedRowids:t}}}}return e.\u0275fac=function(t){return new(t||e)(Ve.Qb(et.a))},e.\u0275cmp=Ve.Kb({type:e,selectors:[["app-bs-screen-auth-function"]],viewQuery:function(e,t){var i;1&e&&Ve.Xc(Ze.a,!0),2&e&&Ve.Dc(i=Ve.gc())&&(t.gridEl=i.first)},inputs:{loading:"loading",selectedAuthGroupSeq:"selectedAuthGroupSeq",selectedScreenItem:"selectedScreenItem",selecedFunctions:"selecedFunctions",functionList:"functionList"},outputs:{clickSaveEvent:"clickSaveEvent"},decls:7,vars:10,consts:[[1,"grid-control-area"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-primary","sm","d-inline-flex","flex-glow-0",3,"click"],["authYnTpl",""],["gridName","screenAuthFunctionGrid",3,"columns","pageable","pageSize","sortable","filterable","checkboxUseYn","dataList","templates"],[4,"ngIf"]],template:function(e,t){if(1&e&&(Ve.Wb(0,"div",0),Ve.Wb(1,"div",1),Ve.Wb(2,"button",2),Ve.fc("click",(function(){return t.clickUpsertHandler()})),Ve.Pc(3,"\uc800\uc7a5"),Ve.Vb(),Ve.Vb(),Ve.Vb(),Ve.Nc(4,rt,2,2,"ng-template",null,3,Ve.Oc),Ve.Rb(6,"app-grid-basis",4)),2&e){const e=Ve.Ec(5);Ve.Cb(6),Ve.pc("columns",t.columns)("pageable",!1)("pageSize",1e5)("sortable",!1)("filterable",!1)("checkboxUseYn",!0)("dataList",t.functionList)("templates",Ve.uc(8,ot,e))}},directives:[Ze.a,c.o],encapsulation:2,changeDetection:0}),e})();var lt=i("U6NN");let ut=(()=>{class e{constructor(e){this._dataService=e,this.clickSearchEvent=new Ve.n,this.clickResetEvent=new Ve.n,this.useYnOptions=[{value:!0,label:"Y"},{value:!1,label:"N"}],this._$unsubscribe=new y.a,this.searchForm=e.generateApiServiceSearchForm()}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFromData=this._setSearchFormData(e)}ngOnInit(){}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){const e=this.setSearchCondition();this.clickSearchEvent.emit({searchCondition:e})}onReset(){this.clickResetEvent.emit()}setSearchCondition(){const e=this._dataService.initApiServiceSearchFormData(),t=Object.assign({},R.pick(this.searchForm.value,Object.keys(e)));return R.omitBy(t,R.isNil)}_setSearchFormData(e){const t=this._dataService.initApiServiceSearchFormData();return R.isEmpty(e)?t:Object.assign({},t,R.pick(e,Object.keys(t)))}}return e.\u0275fac=function(t){return new(t||e)(Ve.Qb(Ke))},e.\u0275cmp=Ve.Kb({type:e,selectors:[["app-bs-screen-auth-sub-search"]],inputs:{searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:16,vars:3,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-2"],[1,"form-label"],["formControlName","screenName",1,"d-inline-flex","flex-fill"],["formControlName","useYn",1,"d-inline-flex","flex-fill",3,"options"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary"],["type","button","role","button",1,"btn","btn-reset",3,"click"]],template:function(e,t){1&e&&(Ve.Wb(0,"form",0),Ve.fc("ngSubmit",(function(){return t.onSubmit()})),Ve.Wb(1,"div",1),Ve.Wb(2,"div",2),Ve.Wb(3,"div",3),Ve.Wb(4,"span",4),Ve.Pc(5,"Screen Name"),Ve.Vb(),Ve.Rb(6,"app-input-text",5),Ve.Vb(),Ve.Wb(7,"div",3),Ve.Wb(8,"span",4),Ve.Pc(9,"Use YN"),Ve.Vb(),Ve.Rb(10,"app-selectbox",6),Ve.Vb(),Ve.Vb(),Ve.Vb(),Ve.Wb(11,"div",7),Ve.Wb(12,"button",8),Ve.Pc(13,"Search"),Ve.Vb(),Ve.Wb(14,"button",9),Ve.fc("click",(function(){return t.onReset()})),Ve.Pc(15,"Reset"),Ve.Vb(),Ve.Vb(),Ve.Vb()),2&e&&(Ve.pc("formGroup",t.searchForm)("connectForm",t.searchFromData),Ve.Cb(10),Ve.pc("options",t.useYnOptions))},directives:[s.B,s.s,s.k,Ue.a,ze.a,s.r,s.i,lt.a],encapsulation:2,changeDetection:0}),e})(),dt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ve.Kb({type:e,selectors:[["app-bs-screen-auth-sub-control"]],inputs:{loading:"loading",totalCount:"totalCount"},decls:3,vars:1,consts:[[1,"grid-control-area"],[1,"grid-count"]],template:function(e,t){1&e&&(Ve.Wb(0,"div",0),Ve.Wb(1,"strong",1),Ve.Pc(2),Ve.Vb(),Ve.Vb()),2&e&&(Ve.Cb(2),Ve.Qc(t.loading?"":t.totalCount))},encapsulation:2,changeDetection:0}),e})();function ht(e,t){if(1&e&&(Ve.Wb(0,"span"),Ve.Pc(1),Ve.Vb()),2&e){const e=t.$implicit;Ve.Cb(1),Ve.Qc(e.useYn?"Y":"N")}}const pt=function(e){return{useYnTpl:e}};let bt=(()=>{class e{constructor(e,t,i,n){this.store=e,this._dataService=t,this._cd=i,this.alertService=n,this.unsubscribe$=new y.a,this.loading$=this.store.pipe(Object(o.u)(Ae)),this.searchCondition$=this.store.pipe(Object(o.u)(je)),this.gridDataList$=this.store.pipe(Object(o.u)(Ce)),this.mainGridState$=this.store.pipe(Object(o.u)(we)),this.mainGridCheckedState$=this.store.pipe(Object(o.u)(Ge)),this.mappingGridState$=this.store.pipe(Object(o.u)(ye)),this.mappingGridCheckedState$=this.store.pipe(Object(o.u)(Le)),this.selectedDetailRowInfo$=this.store.pipe(Object(o.u)(Re)),this.selectedDetailRowScreens$=this.store.pipe(Object(o.u)(Ee)),this.selectedDetailRowScreenItem$=this.store.pipe(Object(o.u)(De)),this.functionLoading$=this.store.pipe(Object(o.u)(Fe)),this.functionList$=this.store.pipe(Object(o.u)(Ie)),this.selScreenList$=this.store.pipe(Object(o.u)(xe)),this.columns=this._dataService.generateAuthGroupGridColumns(),this._initSubscription()}ngOnInit(){}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(n.setAuthGroupGridStateAction({gridState:this.gridEl.thisGridState})),this.store.dispatch(n.setAuthGroupGridCheckedStateAction({gridCheckedState:this.gridEl.checkedStateOutput}));const e=this.mappingEl.checkStateOutput;this.store.dispatch(n.setMappingGridStateAction({gridState:this.mappingEl.thisGridState})),this.store.dispatch(n.setMappingGridCheckedStateAction({gridCheckedState:e}))}clickSearchHandler({searchCondition:e}){this.store.dispatch(n.changeAuthGroupSearchConditionAction({searchCondition:e})),this.store.dispatch(n.loadAuthGroupListAction({condition:e}))}clickResetHandler(){this.store.dispatch(n.changeAuthGroupSearchConditionAction({searchCondition:null}))}cellClickkRowHandler(e){var t,i;this.store.dispatch(n.clearAuthFunctionListAction());let c=null;if((null===(t=e.screens)||void 0===t?void 0:t.length)>0){const t=e.screens.map(e=>e.screenSeq);c=null===(i=this.selScreenList)||void 0===i?void 0:i.filter(e=>t.indexOf(e.screenSeq)>-1).map(e=>e.rowid)}this.store.dispatch(n.addSelectedAuthGroupDetailRowInfo({selectedDetailRowInfo:e})),this.store.dispatch(n.setScreenGridCheckedState({gridCheckedState:{checkedRowids:c}}))}mappingCellClickHandler(e){this.store.dispatch(n.addSelecedAuthGroupScreenItem({selecedAuthGroupScreenInfo:e}))}clickCopyHandler(){const e=this.gridEl.checkedDataList;R.isEmpty(e)?this.alertService.alert("There are no items selected."):e.length>1?this.alertService.alert("You can only copy one item at a time."):this.store.dispatch(n.copyAuthGroupAction({condition:{originAuthGroupSeq:e[0].authGroupSeq}}))}clickMappingHandler(e){this.store.dispatch(n.mappingAuthGroupScreenAction({condition:e}))}clickSaveFunctionHandler(e){this.store.dispatch(n.mappingAuthGroupFunctionAction({condition:e}))}getMappingGridCheckedDataList(){return this.mappingEl.getCheckedDataList()}_initSubscription(){this.selScreenList$.pipe(Object(L.a)(this.unsubscribe$)).subscribe(e=>this.selScreenList=e),this.selectedDetailRowInfo$.pipe(Object(L.a)(this.unsubscribe$)).subscribe(e=>{var t;if(R.isEmpty(e))this.selectedRowSeq=null,this.store.dispatch(n.clearSelectedAuthGroupScreens());else{this.selectedRowSeq=e.authGroupSeq;const i=(null===(t=e.screens)||void 0===t?void 0:t.length)>0?e.screens:[];this.store.dispatch(n.setSelectedAuthGroupScreens({screens:i}))}}),this.selectedDetailRowScreenItem$.pipe(Object(Ye.a)(),Object(L.a)(this.unsubscribe$)).subscribe(e=>{var t;if(R.isEmpty(e))this.selecedMappingItemFunctions=null,this.selecedMappingItem=null,this.store.dispatch(n.loadAuthFunctionListSuccessAction({dataList:null}));else{const i=(null===(t=e.functions)||void 0===t?void 0:t.length)>0?e.functions:[];this.selecedMappingItemFunctions=i,this.selecedMappingItem=R.cloneDeep(e),this.store.dispatch(n.loadAuthFunctionListAction({condition:{screenSeq:e.screenSeq,useYn:!0,authGroupSeq:this.selectedRowSeq}}))}})}}return e.\u0275fac=function(t){return new(t||e)(Ve.Qb(o.h),Ve.Qb(Ke),Ve.Qb(Ve.h),Ve.Qb(et.a))},e.\u0275cmp=Ve.Kb({type:e,selectors:[["app-bs-screen-auth-master"]],viewQuery:function(e,t){var i;1&e&&(Ve.Xc(nt,!0),Ve.Xc(Ze.a,!0)),2&e&&(Ve.Dc(i=Ve.gc())&&(t.mappingEl=i.first),Ve.Dc(i=Ve.gc())&&(t.gridEl=i.first))},decls:20,vars:38,consts:[[3,"searchCondition","clickSearchEvent","clickResetEvent"],[1,"extend-grid-group","active"],[1,"base-grid"],[3,"loading","totalCount","clickCopyEvent"],["useYnTpl",""],["gridName","screenAuthMasterGrid",3,"gridLoading","gridState","checkedState","columns","pageable","pageSize","checkboxUseYn","dataList","templates","cellClickEvent"],["gridEl",""],[1,"extend-grid"],[1,"grid-group",3,"selectedAuthGroupSeq","gridState","gridCheckedState","screenList","clickSaveEvent","clickMappingEvent"]],template:function(e,t){if(1&e&&(Ve.Wb(0,"app-bs-screen-auth-master-search",0),Ve.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),Ve.ic(1,"async"),Ve.Vb(),Ve.Wb(2,"div",1),Ve.Wb(3,"div",2),Ve.Wb(4,"app-bs-screen-auth-master-control",3),Ve.fc("clickCopyEvent",(function(){return t.clickCopyHandler()})),Ve.ic(5,"async"),Ve.ic(6,"async"),Ve.Vb(),Ve.Nc(7,ht,2,1,"ng-template",null,4,Ve.Oc),Ve.Wb(9,"app-grid-basis",5,6),Ve.fc("cellClickEvent",(function(e){return t.cellClickkRowHandler(e)})),Ve.ic(11,"async"),Ve.ic(12,"async"),Ve.ic(13,"async"),Ve.ic(14,"async"),Ve.Vb(),Ve.Vb(),Ve.Wb(15,"div",7),Ve.Wb(16,"app-bs-screen-auth-mapping",8),Ve.fc("clickSaveEvent",(function(e){return t.clickMappingHandler(e)}))("clickMappingEvent",(function(e){return t.mappingCellClickHandler(e)})),Ve.ic(17,"async"),Ve.ic(18,"async"),Ve.ic(19,"async"),Ve.Vb(),Ve.Vb(),Ve.Vb()),2&e){const e=Ve.Ec(8);Ve.pc("searchCondition",Ve.jc(1,16,t.searchCondition$)),Ve.Cb(4),Ve.pc("loading",Ve.jc(5,18,t.loading$))("totalCount",Ve.jc(6,20,t.gridDataList$).length),Ve.Cb(5),Ve.pc("gridLoading",Ve.jc(11,22,t.loading$))("gridState",Ve.jc(12,24,t.mainGridState$))("checkedState",Ve.jc(13,26,t.mainGridCheckedState$))("columns",t.columns)("pageable",!1)("pageSize",1e5)("checkboxUseYn",!0)("dataList",Ve.jc(14,28,t.gridDataList$))("templates",Ve.uc(36,pt,e)),Ve.Cb(7),Ve.pc("selectedAuthGroupSeq",t.selectedRowSeq)("gridState",Ve.jc(17,30,t.mappingGridState$))("gridCheckedState",Ve.jc(18,32,t.mappingGridCheckedState$))("screenList",Ve.jc(19,34,t.selectedDetailRowScreens$))}},directives:[Xe,Je,Ze.a,nt],pipes:[c.b],encapsulation:2,changeDetection:0}),e})();var gt=i("2QGa"),St=i("Kj3r"),ft=i("zP0r"),mt=i("yVuV"),Ot=i("bMKz"),vt=i("pb6r"),kt=i("wd/R");let At=(()=>{class e{transform(e,t,i,n){const c=R.isNil(i)?R.get(e,t,""):R.get(e,i,"");switch(n){case"currency":return R.isNil(c)?"":Number(c).commaFormat();case"date":return kt(c).format("YYYY-MM-DD");case"dateTime":return kt(c).format("YYYY-MM-DD HH:mm");case"yn":return!0===c?"Y":"N";default:return c}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=Ve.Pb({name:"formatGridCell",type:e,pure:!0}),e})();function jt(e,t){if(1&e){const e=Ve.Xb();Ve.Wb(0,"app-checkbox",7),Ve.fc("onChange",(function(t){return Ve.Fc(e),Ve.hc(2).onCheckAll(t)})),Ve.Vb()}if(2&e){const e=Ve.hc(2);Ve.pc("ngModel",e.isAllChecked)}}function Ct(e,t){if(1&e){const e=Ve.Xb();Ve.Wb(0,"app-checkbox",8),Ve.fc("ngModelChange",(function(t){return Ve.Fc(e),Ve.hc(2).checkedRows=t})),Ve.Vb()}if(2&e){const e=t.$implicit,i=Ve.hc(2);Ve.pc("value",e.rowid)("ngModel",i.checkedRows)}}function wt(e,t){1&e&&(Ve.Ub(0),Ve.Wb(1,"kendo-grid-column",4),Ve.Nc(2,jt,1,1,"ng-template",5),Ve.Nc(3,Ct,1,2,"ng-template",6),Ve.Vb(),Ve.Tb())}function Gt(e,t){1&e&&Ve.Sb(0)}const yt=function(e){return{$implicit:e}};function Lt(e,t){if(1&e&&Ve.Nc(0,Gt,1,0,"ng-container",12),2&e){const e=t.$implicit,i=Ve.hc(2).$implicit,n=Ve.hc();Ve.pc("ngTemplateOutlet",n.getColumnTemplate(i.template))("ngTemplateOutletContext",Ve.uc(2,yt,e))}}function Rt(e,t){1&e&&(Ve.Ub(0),Ve.Nc(1,Lt,1,4,"ng-template",6),Ve.Tb())}function Et(e,t){if(1&e&&(Ve.Wb(0,"span"),Ve.Pc(1),Ve.ic(2,"formatGridCell"),Ve.Vb()),2&e){const e=t.$implicit,i=Ve.hc(2).$implicit;Ve.Cb(1),Ve.Qc(Ve.mc(2,1,e,i.field,i.path,i.format))}}function Dt(e,t){1&e&&Ve.Nc(0,Et,3,6,"ng-template",6)}const Ft=function(){return{"text-align":"center"}};function It(e,t){if(1&e&&(Ve.Ub(0),Ve.Wb(1,"kendo-grid-column",9),Ve.Nc(2,Rt,2,0,"ng-container",10),Ve.Nc(3,Dt,1,0,"ng-template",null,11,Ve.Oc),Ve.Vb(),Ve.Tb()),2&e){const e=t.$implicit,i=Ve.Ec(4);Ve.Cb(1),Ve.Lc(e.style),Ve.Eb(e.class||void 0),Ve.pc("headerStyle",Ve.tc(12,Ft))("field",e.field)("title",e.title)("format",e.format)("filter",e.type)("width",e.width||void 0),Ve.Cb(1),Ve.pc("ngIf",e.template)("ngIfElse",i)}}let _t=(()=>{class e{constructor(e,t){this.UserConditionService=e,this.ngZone=t,this.defaultSortOrder="desc",this.cellClickEvent=new Ve.n,this.dbClickRowEvent=new Ve.n,this.skip=0,this.pageSize=1e3,this.rowHeight=25,this.gridHeight=525,this.clickedRowSubject=new y.a,this._unsubscribe$=new y.a,this.getIsRowSelected=e=>{var t;return(null===(t=this.checkedRows)||void 0===t?void 0:t.indexOf(e.dataItem.rowid))>-1||e.index===this._singleClickedRowIndex}}get checkedState(){return this._checkedState}set checkedState(e){this._checkedState=e,this._setCheckedState()}get dataList(){return this._dataList}set dataList(e){this._dataList=e,this._initState(),this._loadCurrentView(),this._gridSetting(),this._setCheckedState(),this._scrollToLeft()}get isAllChecked(){var e,t;return(null===(e=this.checkedRows)||void 0===e?void 0:e.length)===(null===(t=this.view)||void 0===t?void 0:t.length)}get checkedDataList(){return R.isEmpty(this.checkedRows)?[]:this.view.filter(e=>this.checkedRows.indexOf(null==e?void 0:e.rowid)>-1)}get checkedStateOutput(){return R.isEmpty(this.checkedRows)&&R.isNil(this._singleClickedRowIndex)?null:{checkedRowids:R.isEmpty(this.checkedRows)?null:this.checkedRows,clickedRowIndex:R.isNil(this._singleClickedRowIndex)?null:this._singleClickedRowIndex}}get thisGridState(){return{skip:this.skip,sortInfo:R.isEmpty(this.sort)?null:R.cloneDeep(this.sort),filter:R.isEmpty(this.filter)?null:R.cloneDeep(this.filter)}}ngAfterContentInit(){this._initClickSubscription(),this._fitColumns()}ngOnDestroy(){this._unsubscribe$.next(),this._unsubscribe$.complete()}getColumnTemplate(e){return this.templates[e]||null}onPageChange(e){this.skip=e.skip,this._loadCurrentView()}onSortChange(e){this.skip=0,this.sort=e,this._loadCurrentView()}onFilterChange(e){this.skip=0,this.filter=e,this._loadCurrentView()}onCheckAll(e){this.checkedRows=e?this.view.map(e=>e.rowid):null}onCellClick(e){var t,i,n;0===e.columnIndex&&(null===(n=null===(i=null===(t=null==e?void 0:e.originalEvent)||void 0===t?void 0:t.target)||void 0===i?void 0:i.className)||void 0===n?void 0:n.indexOf("checkbox-control-text"))>-1||(this._singleClickedRowIndex=null==e?void 0:e.rowIndex,this.isDbClick?this.isDbClick=!1:(this.clickedRowItem=e.dataItem,this.cellClickEvent&&this.clickedRowSubject.next("single")))}onDblClick(e){this.clickedRowItem&&(this.isDbClick=!0,this.clickedRowSubject.next("double"))}_loadCurrentView(){var e;if(R.isNil(this.dataList)||(null===(e=this.dataList)||void 0===e?void 0:e.length)<1)return void(this.gridView=void 0);const t=Object(mt.c)(Object(mt.a)(this.dataList,this.filter),this.sort);if(t.length<1)return this.view=[],this.gridView={data:this.view,total:0},this.checkedRows=null,void(this._singleClickedRowIndex=null);const i=t.slice(this.skip,this.skip+this.pageSize);this.view=t.map(e=>Object.assign({},e)),this.gridView={data:i,total:t.length},this.checkedRows=null,this._singleClickedRowIndex=null}_initClickSubscription(){const e=this.clickedRowSubject.asObservable().pipe(Object(St.a)(300),Object(L.a)(this._unsubscribe$)),[t,i]=Object(gt.a)(e,e=>"single"===e);t.subscribe(()=>{this.cellClickEvent.emit(this.clickedRowItem),this.clickedRowItem=void 0}),i.subscribe(()=>{this.dbClickRowEvent.emit(R.cloneDeep(this.clickedRowItem)),this.clickedRowItem=void 0})}_initState(){if(this.skip=0,this.sort=this.defaultSortFiled?[{field:this.defaultSortFiled,dir:this.defaultSortOrder}]:[],this.filter={logic:"and",filters:[]},!R.isNil(this.gridState)){const{skip:e,sortInfo:t,filter:i}=this.gridState;R.isNil(e)||(this.skip=e),R.isEmpty(t)||(this.sort=t),R.isEmpty(i)||(this.filter=i)}}_setCheckedState(){if(this.checkedRows=null,this._singleClickedRowIndex=null,!R.isEmpty(this.checkedState)){const{checkedRowids:e,clickedRowIndex:t}=this.checkedState;this.checkedRows=R.isEmpty(e)?null:R.cloneDeep(e),this._singleClickedRowIndex=R.isNil(t)?null:t}}_scrollToLeft(){this.grid&&this.grid.scrollTo({column:0})}_setGridHeight(e){this.gridHeight=this.rowHeight*(e+1)}_fitColumns(){this.ngZone.onStable.asObservable().pipe(Object(ft.a)(1),Object(L.a)(this._unsubscribe$)).subscribe(()=>this.grid.autoFitColumns())}_gridSetting(){}}return e.\u0275fac=function(t){return new(t||e)(Ve.Qb(Ot.a),Ve.Qb(Ve.z))},e.\u0275cmp=Ve.Kb({type:e,selectors:[["app-grid-virtual"]],viewQuery:function(e,t){var i;1&e&&Ve.Xc(a.l,!0),2&e&&Ve.Dc(i=Ve.gc())&&(t.grid=i.first)},inputs:{columns:"columns",gridLoading:"gridLoading",gridState:"gridState",defaultSortFiled:"defaultSortFiled",defaultSortOrder:"defaultSortOrder",checkboxUseYn:"checkboxUseYn",templates:"templates",checkedState:"checkedState",dataList:"dataList"},outputs:{cellClickEvent:"cellClickEvent",dbClickRowEvent:"dbClickRowEvent"},decls:4,vars:12,consts:[["scrollable","virtual",3,"data","loading","skip","pageSize","resizable","selectable","rowSelected","rowHeight","height","pageable","pageChange","cellClick","dblclick"],["kendoGrid",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["title","\uc120\ud0dd","width","40"],["kendoGridHeaderTemplate",""],["kendoGridCellTemplate",""],["styleClass","only","binary","true",3,"ngModel","onChange"],["styleClass","only",3,"value","ngModel","ngModelChange"],[3,"headerStyle","field","title","format","filter","width"],[4,"ngIf","ngIfElse"],["nonTemplateColumn",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(Ve.Wb(0,"kendo-grid",0,1),Ve.fc("pageChange",(function(e){return t.onPageChange(e)}))("cellClick",(function(e){return t.onCellClick(e)}))("dblclick",(function(e){return t.onDblClick(e)})),Ve.Nc(2,wt,4,0,"ng-container",2),Ve.Nc(3,It,5,13,"ng-container",3),Ve.Vb()),2&e&&(Ve.pc("data",t.gridView)("loading",t.gridLoading)("skip",t.skip)("pageSize",t.pageSize)("resizable",!0)("selectable",!0)("rowSelected",t.getIsRowSelected)("rowHeight",t.rowHeight)("height",t.gridHeight)("pageable",!0),Ve.Cb(2),Ve.pc("ngIf",t.checkboxUseYn),Ve.Cb(1),Ve.pc("ngForOf",t.columns))},directives:[a.l,c.o,c.n,a.d,a.n,a.c,vt.a,s.r,s.u,c.t],pipes:[At],styles:[""],changeDetection:0}),e})();function Nt(e,t){if(1&e&&(Ve.Wb(0,"span"),Ve.Pc(1),Ve.Vb()),2&e){const e=t.$implicit;Ve.Cb(1),Ve.Qc(e.gridYn?"Y":"N")}}function xt(e,t){if(1&e&&(Ve.Wb(0,"span"),Ve.Pc(1),Ve.Vb()),2&e){const e=t.$implicit;Ve.Cb(1),Ve.Qc(e.useYn?"Y":"N")}}const $t=function(e,t){return{useYnTpl:e,gridYnTpl:t}};let Yt=(()=>{class e{constructor(e,t){this.store=e,this._dataService=t,this.unsubscribe$=new y.a,this.loading$=this.store.pipe(Object(o.u)(_e)),this.searchCondition$=this.store.pipe(Object(o.u)(Ne)),this.gridDataList$=this.store.pipe(Object(o.u)(xe)),this.gridCheckedState$=this.store.pipe(Object(o.u)($e)),this.columns=this._dataService.generateScreenMasterGridColumns()}ngOnInit(){}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(n.setScreenGridCheckedState({gridCheckedState:this.gridEl.checkedStateOutput}))}ngAfterViewInit(){this.searchEl.onSubmit()}clickSearchHandler({searchCondition:e}){this.store.dispatch(n.changeScreenSearchConditionAction({searchCondition:e})),this.store.dispatch(n.loadScreenListAction({condition:Object.assign({},e,{limits:[0,1e4]})}))}clickResetHandler(){this.store.dispatch(n.changeScreenSearchConditionAction({searchCondition:null}))}getCheckedDataList(){return this.gridEl.checkedDataList}_initSubscription(){}}return e.\u0275fac=function(t){return new(t||e)(Ve.Qb(o.h),Ve.Qb(Ke))},e.\u0275cmp=Ve.Kb({type:e,selectors:[["app-bs-screen-auth-sub"]],viewQuery:function(e,t){var i;1&e&&(Ve.Xc(_t,!0),Ve.Xc(ut,!0)),2&e&&(Ve.Dc(i=Ve.gc())&&(t.gridEl=i.first),Ve.Dc(i=Ve.gc())&&(t.searchEl=i.first))},decls:13,vars:25,consts:[[3,"searchCondition","clickSearchEvent","clickResetEvent"],[3,"loading","totalCount"],["gridYnTpl",""],["useYnTpl",""],[3,"gridLoading","gridState","checkedState","columns","checkboxUseYn","dataList","templates"]],template:function(e,t){if(1&e&&(Ve.Wb(0,"app-bs-screen-auth-sub-search",0),Ve.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),Ve.ic(1,"async"),Ve.Vb(),Ve.Rb(2,"app-bs-screen-auth-sub-control",1),Ve.ic(3,"async"),Ve.ic(4,"async"),Ve.Nc(5,Nt,2,1,"ng-template",null,2,Ve.Oc),Ve.Nc(7,xt,2,1,"ng-template",null,3,Ve.Oc),Ve.Rb(9,"app-grid-virtual",4),Ve.ic(10,"async"),Ve.ic(11,"async"),Ve.ic(12,"async")),2&e){const e=Ve.Ec(6),n=Ve.Ec(8);var i;const c=(null==(i=Ve.jc(4,14,t.gridDataList$))?null:i.length)||0;Ve.pc("searchCondition",Ve.jc(1,10,t.searchCondition$)),Ve.Cb(2),Ve.pc("loading",Ve.jc(3,12,t.loading$))("totalCount",c),Ve.Cb(7),Ve.pc("gridLoading",Ve.jc(10,16,t.loading$))("gridState",null)("checkedState",Ve.jc(11,18,t.gridCheckedState$))("columns",t.columns)("checkboxUseYn",!0)("dataList",Ve.jc(12,20,t.gridDataList$))("templates",Ve.vc(22,$t,n,e))}},directives:[ut,dt,_t],pipes:[c.b],encapsulation:2,changeDetection:0}),e})(),Vt=(()=>{class e{constructor(e,t){this.store=e,this.alertService=t,this.unsubscribe$=new y.a,this.selectedDetailRowScreens$=this.store.pipe(Object(o.u)(Ee)),this._initSubscription()}ngOnInit(){this._requestCommonDetailCodes()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(n.initComponent())}onMoveToAdd(){const e=this.subEl.getCheckedDataList();if(R.isEmpty(e))return void this.alertService.alert("\uc120\ud0dd\ub41c \ud654\uba74\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");if(R.isNil(this.masterEl.selectedRowSeq))return void this.alertService.alert("\uc120\ud0dd\ub41c \uad8c\ud55c \uadf8\ub8f9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");let t=this.selectedDetailRowScreens.map(e=>e.screenSeq);const i=e.filter((e,i)=>t.indexOf(e.screenSeq)<0).map(e=>({rowid:e.rowid,screenSeq:e.screenSeq,screenNameEn:e.screenNameEn,screenNameLn:e.screenNameLn,screenTypeCode:e.screenTypeCode,screenTypeName:e.screenTypeName,functions:[]}));this.store.dispatch(n.setSelectedAuthGroupScreens({screens:R.concat(this.selectedDetailRowScreens,i)}))}onMoveToDel(){const e=this.masterEl.getMappingGridCheckedDataList();if(R.isEmpty(e))return void this.alertService.alert("\uc120\ud0dd\ub41c \ud654\uba74\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const t=e.map(e=>e.screenSeq),i=this.selectedDetailRowScreens.filter(e=>t.indexOf(e.screenSeq)<0);this.store.dispatch(n.setSelectedAuthGroupScreens({screens:i}))}_requestCommonDetailCodes(){}_initSubscription(){this.selectedDetailRowScreens$.pipe(Object(L.a)(this.unsubscribe$)).subscribe(e=>{this.selectedDetailRowScreens=e})}}return e.\u0275fac=function(t){return new(t||e)(Ve.Qb(o.h),Ve.Qb(et.a))},e.\u0275cmp=Ve.Kb({type:e,selectors:[["app-bs-screen-auth"]],viewQuery:function(e,t){var i;1&e&&(Ve.Xc(bt,!0),Ve.Xc(Yt,!0)),2&e&&(Ve.Dc(i=Ve.gc())&&(t.masterEl=i.first),Ve.Dc(i=Ve.gc())&&(t.subEl=i.first))},decls:8,vars:0,consts:[[1,"frame-wrap","move"],[1,"frame"],[1,"frame","move","mt100"],[1,"icon","sm","arrow-left",3,"click"],[1,"icon","sm","arrow-right",3,"click"]],template:function(e,t){1&e&&(Ve.Wb(0,"div",0),Ve.Wb(1,"div",1),Ve.Rb(2,"app-bs-screen-auth-master"),Ve.Vb(),Ve.Wb(3,"div",2),Ve.Wb(4,"a",3),Ve.fc("click",(function(){return t.onMoveToAdd()})),Ve.Vb(),Ve.Wb(5,"a",4),Ve.fc("click",(function(){return t.onMoveToDel()})),Ve.Vb(),Ve.Vb(),Ve.Wb(6,"div",1),Ve.Rb(7,"app-bs-screen-auth-sub"),Ve.Vb(),Ve.Vb())},directives:[bt,Yt],encapsulation:2,changeDetection:0}),e})();const Wt=[{path:"",component:Vt,data:{title:"\ud654\uba74\uad8c\ud55c\uad00\ub9ac"}}];let Mt=(()=>{class e{}return e.\u0275mod=Ve.Ob({type:e}),e.\u0275inj=Ve.Nb({factory:function(t){return new(t||e)},imports:[[G.f.forChild(Wt)],G.f]}),e})();var qt=i("JIr8"),Pt=i("lJxs"),Tt=i("vkgz"),Bt=i("Xb6A");let Ht=(()=>{class e{constructor(e,t,i,c,s){this.store=e,this._errorService=t,this.actions$=i,this.service=c,this.alertService=s,this.loadAuthGroupList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadAuthGroupListAction),Object(qe.a)(({condition:e})=>this.service.getAuthGroupList(e).pipe(Object(qe.a)(e=>[n.loadAuthGroupListSuccessAction({dataList:e}),n.setAuthGroupGridCheckedStateAction({gridCheckedState:null}),n.delSelectedAuthGroupDetailRowInfo()]),Object(qt.a)(e=>{const t="\uad8c\ud55c\uadf8\ub8f9 List lookup failed. Please try again in a momentarily.",i=[n.loadAuthGroupListFailureAction({error:t})];return this._catchErr(e,t,i),[]}))))),this.loadAuthFunctionList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadAuthFunctionListAction),Object(qe.a)(({condition:e})=>this.service.getFunction(e).pipe(Object(Pt.a)(e=>n.loadAuthFunctionListSuccessAction({dataList:e})),Object(qt.a)(e=>{const t="\uae30\ub2a5 List lookup failed. Please try again in a momentarily.",i=[n.loadAuthFunctionListFailureAction({error:t})];return this._catchErr(e,t,i),[]}))))),this.loadScreenList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadScreenListAction),Object(qe.a)(({condition:e})=>this.service.getScreenList(e).pipe(Object(Pt.a)(e=>n.loadScreenListSuccessAction({dataList:e})),Object(qt.a)(e=>{const t="API List lookup failed. Please try again in a momentarily.",i=[n.loadScreenListFailureAction({error:t})];return this._catchErr(e,t,i),[]}))))),this.upsertScreenMapping$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.mappingAuthGroupScreenAction),Object(qe.a)(({condition:e})=>this.service.updateScreenMapping(e).pipe(Object(Pt.a)(e=>({succeedYn:!0,dataResult:e})),Object(qt.a)(e=>Object(We.a)({succeedYn:!1,error:e})))),Object(Tt.a)(({succeedYn:e,dataResult:t,error:i})=>{if(e){const e="Your save is complete.",i=[n.mappingAuthGroupScreenSuccessAction({data:t.list[0]}),n.addSelectedAuthGroupDetailRowInfo({selectedDetailRowInfo:R.cloneDeep(t)}),n.setMappingGridCheckedStateAction({gridCheckedState:null}),n.delSelecedAuthGroupScreenItem()];this._runPage(e,i)}else{const e="Failed to save.",t=[n.mappingAuthGroupScreenFailureAction({error:e})];this._catchErr(i,e,t)}})),{dispatch:!1}),this.upsertFunctionMapping$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.mappingAuthGroupFunctionAction),Object(qe.a)(({condition:e})=>this.service.updateFunctionMapping(e).pipe(Object(Pt.a)(t=>({succeedYn:!0,dataResult:t,condition:e})),Object(qt.a)(e=>Object(We.a)({succeedYn:!1,error:e})))),Object(Tt.a)(({succeedYn:e,dataResult:t,condition:i,error:c})=>{if(e){const e="Your save is complete.",c=R.find(t.screens,e=>e.screenSeq===i.screenSeq),s=[n.mappingAuthGroupFunctionSuccessAction({dataResult:t}),n.addSelectedAuthGroupDetailRowInfo({selectedDetailRowInfo:R.cloneDeep(t)}),n.addSelecedAuthGroupScreenItem({selecedAuthGroupScreenInfo:c})];this._runPage(e,s)}else{const e="Failed to save.",t=[n.mappingAuthGroupFunctionFailureAction({error:e})];this._catchErr(c,e,t)}})),{dispatch:!1}),this.copyAuthGroup$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.copyAuthGroupAction),Object(qe.a)(({condition:e})=>this.service.copyAuthGroup(e).pipe(Object(Pt.a)(e=>({succeedYn:!0,dataResult:e})),Object(qt.a)(e=>Object(We.a)({succeedYn:!1,error:e})))),Object(Tt.a)(({succeedYn:e,dataResult:t,error:i})=>{if(e){const e="Copy completed.",i=[n.copyAuthGroupSuccessAction({data:t.list[0]}),n.delSelecedAuthGroupScreenItem()];this._runPage(e,i)}else{const e="Copy failed.",t=[n.copyAuthGroupFailureAction({error:e})];this._catchErr(i,e,t)}})),{dispatch:!1})}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this.store.dispatch(e)})}:()=>{}})}_catchErr(e,t,i){const n=this._errorService.errorHandler(e,t);R.isNil(n)||(R.isNil(n.accept)&&(n.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(e=>{this.store.dispatch(e)})}:()=>{}),this.alertService.alert(n))}}return e.\u0275fac=function(t){return new(t||e)(Ve.bc(o.h),Ve.bc(Bt.a),Ve.bc(r.a),Ve.bc(Qe),Ve.bc(et.a))},e.\u0275prov=Ve.Mb({token:e,factory:e.\u0275fac}),e})();const Qt=[Vt,bt,Yt],Kt=[Xe,Je,nt,at,ut,dt];let Ut=(()=>{class e{}return e.\u0275mod=Ve.Ob({type:e}),e.\u0275inj=Ve.Nb({factory:function(t){return new(t||e)},imports:[[c.c,s.m,s.w,a.m,l.a,u.a,d.a,h.a,p.a,b.a,g.a,S.a,f.a,m.a,O.a,v.a,k.a,A.a,j.a,C.a,w.a,Mt,o.j.forFeature("bsScreenAuth",Se),r.b.forFeature([Ht])]]}),e})()},"2QGa":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("F97/"),c=i("SeVD"),s=i("pLZG"),r=i("HDdC");function o(e,t,i){return[Object(s.a)(t,i)(new r.a(Object(c.a)(e))),Object(s.a)(Object(n.a)(t,i))(new r.a(Object(c.a)(e)))]}},U6NN:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("fXoL"),c=i("3Pt+"),s=i("LvDl"),r=i("ofXK");function o(e,t){if(1&e&&(n.Wb(0,"option",3),n.Pc(1),n.Vb()),2&e){const e=n.hc();n.pc("ngValue",null),n.Cb(1),n.Qc(e.useAllOptionName)}}function a(e,t){if(1&e&&(n.Wb(0,"option",3),n.Pc(1),n.Vb()),2&e){const e=t.$implicit,i=n.hc();n.pc("ngValue",e),n.Cb(1),n.Qc(i.displayKey?e[i.displayKey]:e)}}const l={provide:c.p,useExisting:Object(n.U)(()=>u),multi:!0};let u=(()=>{class e{constructor(e,t,i,c){this.el=e,this.renderer=t,this.cd=i,this.zone=c,this.dataKey="value",this.displayKey="label",this.useAllOptionYn=!0,this.useAllOptionName="All",this.onChange=new n.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get invalid(){return this.isInvalid}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get options(){return this._options}set options(e){this._options=e,this.updateSelectedOption(this.value)}ngOnInit(){this.updateSelectedOption(null)}ngOnDestroy(){}compareFn(e,t){return this.dataKey?e[this.dataKey]===t[this.dataKey]:e===t}selectItem(e){this.selectedOption=e,this.value=this._getValue(e),this.onModelChange(this.value),this.onChange.emit({value:this.value,option:e})}writeValue(e){this.value=e,this.updateSelectedOption(e),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}updateSelectedOption(e){this.selectedOption=this._findOption(e,this.options)}_findOption(e,t){return this.dataKey?s.find(t,t=>t[this.dataKey]===e)||null:e}_getValue(e){return s.isNil(e)?null:e[this.dataKey]}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(n.l),n.Qb(n.E),n.Qb(n.h),n.Qb(n.z))},e.\u0275cmp=n.Kb({type:e,selectors:[["app-selectbox"]],hostAttrs:[1,"select-box"],hostVars:2,hostBindings:function(e,t){2&e&&n.Gb("valid-error",t.invalid)},inputs:{name:"name",styleClass:"styleClass",required:"required",tabindex:"tabindex",dataKey:"dataKey",displayKey:"displayKey",isInvalid:"isInvalid",useAllOptionYn:"useAllOptionYn",useAllOptionName:"useAllOptionName",disabled:"disabled",options:"options"},outputs:{onChange:"onChange"},features:[n.Bb([l])],decls:3,vars:8,consts:[[3,"compareWith","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngIf"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(e,t){1&e&&(n.Wb(0,"select",0),n.fc("ngModelChange",(function(e){return t.selectItem(e)})),n.Nc(1,o,2,2,"option",1),n.Nc(2,a,2,2,"option",2),n.Vb()),2&e&&(n.pc("compareWith",t.compareFn)("ngModel",t.selectedOption)("disabled",t.disabled),n.Db("name",t.name)("required",t.required)("tabindex",t.tabindex),n.Cb(1),n.pc("ngIf",t.useAllOptionYn),n.Cb(1),n.pc("ngForOf",t.options))},directives:[c.y,c.r,c.u,c.x,r.o,r.n,c.v,c.A],encapsulation:2}),e})()}}]);