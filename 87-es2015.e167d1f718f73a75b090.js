(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{LOQP:function(t,e,i){"use strict";i.r(e),i.d(e,"CONTAINERS",(function(){return fe})),i.d(e,"COMPONENTS",(function(){return je})),i.d(e,"BsDestinationItemModule",(function(){return ve}));var s={};i.r(s),i.d(s,"getListSuccess",(function(){return k})),i.d(s,"getListFailure",(function(){return E})),i.d(s,"getStationListSuccess",(function(){return F})),i.d(s,"getStationListFailure",(function(){return _})),i.d(s,"getCategoryListSuccess",(function(){return w})),i.d(s,"getCategoryListFailure",(function(){return G})),i.d(s,"getDestinationTypeListSuccess",(function(){return W})),i.d(s,"getDestinationTypeListFailure",(function(){return $})),i.d(s,"getDestinationGroupListSuccess",(function(){return T})),i.d(s,"getDestinationGroupListFailure",(function(){return P})),i.d(s,"upsertItemSuccess",(function(){return K})),i.d(s,"upsertItemFailure",(function(){return R})),i.d(s,"removeItemsSuccess",(function(){return A})),i.d(s,"removeItemsFailure",(function(){return x})),i.d(s,"loadList",(function(){return B})),i.d(s,"reloadList",(function(){return Y})),i.d(s,"initList",(function(){return z})),i.d(s,"loadStationList",(function(){return H})),i.d(s,"loadCategoryList",(function(){return q})),i.d(s,"loadDestinationTypeList",(function(){return M})),i.d(s,"loadDestinationGroupList",(function(){return J})),i.d(s,"salesCountryCodeList",(function(){return Q})),i.d(s,"salesCountryCodeSuccess",(function(){return X})),i.d(s,"changeSearchCondition",(function(){return Z})),i.d(s,"changePageSize",(function(){return U})),i.d(s,"setGridCheckRowidsAction",(function(){return tt})),i.d(s,"setGridStateAction",(function(){return et})),i.d(s,"setGridCheckedStateAction",(function(){return it})),i.d(s,"removeSelectedGridEntities",(function(){return st})),i.d(s,"openDetailPopup",(function(){return nt})),i.d(s,"closeDetailPopup",(function(){return ot})),i.d(s,"addSelectedDetailRowInfo",(function(){return at})),i.d(s,"delSelectedDetailRowInfo",(function(){return rt})),i.d(s,"upsertItem",(function(){return ct}));var n=i("ofXK"),o=i("3Pt+"),a=i("snw9"),r=i("kt0X"),c=i("WG3B"),l=i("xoAz"),d=i("wPo9"),u=i("7rOj"),p=i("+NQf"),h=i("6LsY"),b=i("l1P7"),m=i("v7zA"),g=i("7UZF"),C=i("hHe4"),y=i("1OXJ"),O=i("5hwk"),f=i("htEk"),j=i("kKjH"),v=i("qXPF"),S=i("vu/V"),L=i("tyNb"),I=i("XNiG"),D=i("zP0r"),N=i("1G5W"),V=i("LvDl");const k=Object(r.o)("[BsDestinationItem/List] get list success",Object(r.t)()),E=Object(r.o)("[BsDestinationItem/List] get list failure",Object(r.t)()),F=Object(r.o)("[BsDestinationItem/List] get station list success",Object(r.t)()),_=Object(r.o)("[BsDestinationItem/List] get station list failure",Object(r.t)()),w=Object(r.o)("[BsDestinationItem/List] get category list success",Object(r.t)()),G=Object(r.o)("[BsDestinationItem/List] get category list failure",Object(r.t)()),W=Object(r.o)("[BsDestinationItem/List] get destination type list success",Object(r.t)()),$=Object(r.o)("[BsDestinationItem/List] get destination type list failure",Object(r.t)()),T=Object(r.o)("[BsDestinationItem/List] get destination group list success",Object(r.t)()),P=Object(r.o)("[BsDestinationItem/List] get destination group list failure",Object(r.t)()),K=Object(r.o)("[BsDestinationItem/List] upsert item success",Object(r.t)()),R=Object(r.o)("[BsDestinationItem/List] upsert item failure",Object(r.t)()),A=Object(r.o)("[FlWebTl/API] remove items success",Object(r.t)()),x=Object(r.o)("[FlWebTl/API] remove items failure",Object(r.t)()),B=Object(r.o)("[BsDestinationItem/List] load grid data list",Object(r.t)()),Y=Object(r.o)("[BsDestinationItem/List] reload grid data list"),z=Object(r.o)("[BsDestinationItem/List] init grid data list"),H=Object(r.o)("[BsDestinationItem/List] load station list",Object(r.t)()),q=Object(r.o)("[BsDestinationItem/List] load category list",Object(r.t)()),M=Object(r.o)("[BsDestinationItem/List] load destination type list",Object(r.t)()),J=Object(r.o)("[BsDestinationItem/List] load destination group list",Object(r.t)()),Q=Object(r.o)("[BsDestinationItem/List] load salesCountryCodeList",Object(r.t)()),X=Object(r.o)("[BsDestinationItem/List] salesCountryCodeSuccess",Object(r.t)()),Z=Object(r.o)("[BsDestinationItem/List] change search condition",Object(r.t)()),U=Object(r.o)("[BsDestinationItem/List] change page size",Object(r.t)()),tt=Object(r.o)("[BsDestinationItem/List] set grid checked rowids",Object(r.t)()),et=Object(r.o)("[BsDestinationItem/List] set grid state",Object(r.t)()),it=Object(r.o)("[BsDestinationItem/List] set grid checked state",Object(r.t)()),st=Object(r.o)("[BsDestinationItem/List] \uc0ad\uc81c\ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(r.t)()),nt=Object(r.o)("[BsDestinationItem/Detail] \uc0c1\uc138\ud31d\uc5c5 \uc5f4\uae30"),ot=Object(r.o)("[BsDestinationItem/Detail] \uc0c1\uc138\ud31d\uc5c5 \ub2eb\uae30"),at=Object(r.o)("[BsDestinationItem/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc120\ud0dd",Object(r.t)()),rt=Object(r.o)("[BsDestinationItem/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc81c\uac70"),ct=Object(r.o)("[BsDestinationItem/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(r.t)());var lt=i("EVqC");const dt=Object(lt.a)({selectId:t=>t.rowid,sortComparer:!1}),ut=dt.getInitialState({loading:!1,reloadToggle:!1,stationList:[],categoryList:[],destinationTypeList:[],destinationGroupList:[],searchCondition:{stationTypeCode:null,compCode:null},pageSize:20,selectedDetailRowInfo:null,isOpenDetailPopup:!1,otherSearchInfo:null,gridState:{skip:0,sortInfo:[],filter:{logic:"and",filters:[]}},gridCheckedRowids:null,gridCheckedState:null,salesCountryCode:null}),pt=Object(r.q)(ut,Object(r.s)(s.loadList,t=>Object.assign(Object.assign({},t),{loading:!0})),Object(r.s)(s.reloadList,t=>Object.assign(Object.assign({},t),{reloadToggle:!t.reloadToggle})),Object(r.s)(s.initList,t=>Object.assign(Object.assign({},t),{loading:!1,reloadToggle:!1,selectedDetailRowInfo:null,isOpenDetailPopup:!1})),Object(r.s)(s.getListSuccess,(t,{dataList:e})=>dt.setAll(e,Object.assign(Object.assign({},t),{loading:!1,gridCheckedRowids:null}))),Object(r.s)(s.getListFailure,t=>Object.assign(Object.assign({},t),{loading:!1})),Object(r.s)(s.getStationListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{stationList:e})),Object(r.s)(s.getCategoryListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{categoryList:e})),Object(r.s)(s.getDestinationTypeListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{destinationTypeList:e})),Object(r.s)(s.getDestinationGroupListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{destinationGroupList:e})),Object(r.s)(s.salesCountryCodeSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{salesCountryCode:e})),Object(r.s)(s.changeSearchCondition,(t,{searchCondition:e,otherSearchInfo:i})=>Object.assign(Object.assign({},t),{searchCondition:e,otherSearchInfo:i})),Object(r.s)(s.changePageSize,(t,{pageSize:e})=>Object.assign(Object.assign({},t),{pageSize:e})),Object(r.s)(s.upsertItemSuccess,(t,{upsertItem:e})=>dt.upsertOne(e,Object.assign({},t))),Object(r.s)(s.openDetailPopup,t=>Object.assign(Object.assign({},t),{isOpenDetailPopup:!0})),Object(r.s)(s.closeDetailPopup,t=>Object.assign(Object.assign({},t),{isOpenDetailPopup:!1})),Object(r.s)(s.addSelectedDetailRowInfo,(t,{selectedDetailRowInfo:e})=>Object.assign(Object.assign({},t),{selectedDetailRowInfo:e})),Object(r.s)(s.delSelectedDetailRowInfo,t=>Object.assign(Object.assign({},t),{selectedDetailRowInfo:null})),Object(r.s)(s.setGridCheckRowidsAction,(t,{rowids:e})=>Object.assign(Object.assign({},t),{gridCheckedRowids:e})),Object(r.s)(s.setGridStateAction,(t,{gridState:e})=>Object.assign(Object.assign({},t),{gridState:e})),Object(r.s)(s.setGridCheckedStateAction,(t,{gridCheckedState:e})=>Object.assign(Object.assign({},t),{gridCheckedState:e})));function ht(t,e){return Object(r.m)({bsDestinationItemList:pt})(t,e)}const bt=Object(r.p)("bsDestinationItem"),mt=Object(r.r)(bt,t=>t.bsDestinationItemList),gt=Object(r.r)(mt,t=>t.loading),Ct=Object(r.r)(mt,t=>t.reloadToggle),yt=Object(r.r)(mt,t=>t.stationList),Ot=Object(r.r)(mt,t=>t.categoryList),ft=Object(r.r)(mt,t=>t.destinationTypeList),jt=Object(r.r)(mt,t=>t.destinationGroupList),vt=Object(r.r)(mt,t=>t.salesCountryCode),St=Object(r.r)(mt,t=>t.searchCondition),Lt=Object(r.r)(mt,t=>t.pageSize),It=Object(r.r)(mt,t=>t.selectedDetailRowInfo),Dt=Object(r.r)(mt,t=>t.isOpenDetailPopup),Nt=Object(r.r)(mt,t=>t.otherSearchInfo),Vt=dt.getSelectors(mt).selectAll,kt=(dt.getSelectors(mt),Object(r.r)(mt,t=>t.gridCheckedRowids)),Et=Object(r.r)(mt,t=>t.gridState),Ft=Object(r.r)(mt,t=>t.gridCheckedState);var _t=i("YY+H"),wt=i("fXoL"),Gt=i("pfiq"),Wt=i("LRne"),$t=i("z6cu"),Tt=i("eIep"),Pt=i("AytR");const{API_URL:Kt}=Pt.a,Rt={selectEntities:`${Kt}/admin/basis/destination/item`,modifyEntities:`${Kt}/admin/basis/destination/item`,selectDetailCodes:`${Kt}/common/detail-code`,selectDestinationGroups:`${Kt}/admin/basis/destination/group`,salesCountryCode:`${Kt}/admin/basis/sales-country`};var At=i("tpT/");let xt=(()=>{class t{constructor(t){this.api=t}getList(t){const e=V.assign({},this.api.defaultParams,{condition:t});return this.api.post(Rt.selectEntities,e).pipe(Object(Tt.a)(t=>{var e;if(t.succeedYn){const i=this._addRowid(null===(e=t.result)||void 0===e?void 0:e.list);return Object(Wt.a)(i)}return Object($t.a)(t||"api response error")}))}removeItems(t){const e=V.assign({},this.api.defaultParams,{condition:t});return this.api.delete(Rt.modifyEntities,e).pipe(Object(Tt.a)(t=>t.succeedYn?Object(Wt.a)(t.result&&t.result.counts):Object($t.a)(t||"api response error")))}upsertItem(t){const e=V.assign({},this.api.defaultParams,{condition:t});return this.api.put(Rt.modifyEntities,e).pipe(Object(Tt.a)(t=>{if(t.succeedYn){const e=t.result;return Object(Wt.a)(e)}return Object($t.a)(t||"api response error")}))}getCommonDetailCodeList(t){const e=V.assign({},this.api.defaultParams,{condition:t});return this.api.post(Rt.selectDetailCodes,e).pipe(Object(Tt.a)(t=>t.succeedYn?Object(Wt.a)(t.result.list):Object($t.a)(t||"api response error")))}getDestinationGroupList(t){const e=V.assign({},this.api.defaultParams,{condition:t});return this.api.post(Rt.selectDestinationGroups,e).pipe(Object(Tt.a)(t=>t.succeedYn?Object(Wt.a)(t.result.list):Object($t.a)(t||"api response error")))}salesCountryCodeList(t){const e=V.assign({},this.api.defaultParams,{condition:t});return this.api.post(Rt.salesCountryCode,e).pipe(Object(Tt.a)(t=>{if(t.succeedYn){const e=t.result.list;return Object(Wt.a)(e)}return Object($t.a)(t||"api response error")}))}_addRowid(t){return V.isNil(t)?[]:t.map((t,e)=>Object.assign(Object.assign({},t),{rowid:String(e)}))}}return t.\u0275fac=function(e){return new(e||t)(wt.bc(At.a))},t.\u0275prov=wt.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Bt=(()=>{class t{constructor(t){this.fb=t,this.generateGridColumns=()=>[{field:"salesCountryCode",title:"Sales Country",type:"text",style:{"text-align":"center"}},{field:"stationTypeName",title:"Station",type:"text",style:{"text-align":"center"}},{field:"itemCategoryName",title:"Item Category",type:"text",style:{"text-align":"center"}},{field:"destinationGroupSeq",title:"Group Code",type:"text",style:{"text-align":"center"}},{field:"destinationGroupNameEn",title:"Group Name(EN)"},{field:"destinationGroupNameKo",title:"Group Name(KO)"},{field:"destinationGroupNameJa",title:"Group Name(JA)"},{field:"destinationGroupNameVi",title:"Group Name(VI)"},{field:"destinationGroupNameZh",title:"Group Name(ZH)"},{field:"destinationTypeName",title:"Destination Type"},{field:"destinationCode",title:"Destination Code",style:{"text-align":"center"}},{field:"destinationNameKo",title:"Display Name(KO)"},{field:"destinationNameEn",title:"Display Name(EN)"},{field:"destinationNameJa",title:"Display Name(JA)"},{field:"destinationNameVi",title:"Display Name(VI)"},{field:"destinationNameZh",title:"Display Name(ZH)"},{field:"displayOrder",title:"Display Order"},{field:"useYn",title:"Use YN",type:"boolean",template:"useYnTpl",style:{"text-align":"center"}}],this.generateListSearchForm=()=>this.fb.group({salesCountryCode:[null],stationTypeCode:[null],itemCategoryCode:[null],destinationGroupSeq:[null],useYn:[null]}),this.initListSearch=()=>({salesCountryCode:null,stationTypeCode:null,itemCategoryCode:null,destinationGroupSeq:null,useYn:null}),this.generatePutForm=()=>this.fb.group({salesCountryCode:[null,[o.z.required]],stationTypeCode:[null,[o.z.required]],itemCategoryCode:[null,[o.z.required]],destinationGroupSeq:[null,[o.z.required]],destinationTypeCode:[null,[o.z.required]],destinationCode:[null,[o.z.required]],destinationDisplayNameKo:[null,[o.z.required]],destinationDisplayNameEn:[null,[o.z.required]],destinationDisplayNameJa:[null],destinationDisplayNameVi:[null],destinationDisplayNameZh:[null],displayOrder:[null,[o.z.required]],useYn:[!1,[o.z.required]]}),this.initPutFormData=t=>({stationTypeCode:t?t.stationTypeCode:null,salesCountryCode:null,itemCategoryCode:null,destinationGroupSeq:null,destinationTypeCode:null,destinationCode:null,destinationDisplayNameKo:null,destinationDisplayNameEn:null,destinationDisplayNameJa:null,destinationDisplayNameVi:null,destinationDisplayNameZh:null,displayOrder:null,useYn:!1})}}return t.\u0275fac=function(e){return new(e||t)(wt.bc(o.f))},t.\u0275prov=wt.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Yt=i("+Sob"),zt=i("nMd8"),Ht=i("U6NN");let qt=(()=>{class t{constructor(t){this._dataService=t,this.clickSearchEvent=new wt.n,this.clickResetEvent=new wt.n,this.changeSearchConditionEvent=new wt.n,this.isShowmore=!1,this.useYnOptions=[{label:"Y",value:!0},{label:"N",value:!1}],this._$unsubscribe=new I.a,this.searchForm=this._dataService.generateListSearchForm(),this.filteredDestinationGroupList=V.cloneDeep(this.destinationGroupList)}get destinationGroupList(){return this._destinationGroupList}set destinationGroupList(t){this._destinationGroupList=t.map(t=>Object.assign(Object.assign({},t),{displayKey:t.destinationGroupNameEn+"["+t.destinationGroupSeq+"]"})),this.filteredDestinationGroupList=V.cloneDeep(this._destinationGroupList)}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(t){this._otherSearchInfo=t,this._setOtherSearchInfo(t)}get searchCondition(){return this._searchCondition}set searchCondition(t){this._searchCondition=t,this.searchFormData=this._setSearchFormData(t)}get searchFormValid(){return this.searchForm.valid}get searchFormValue(){var t;return(null===(t=this.searchForm)||void 0===t?void 0:t.getRawValue())||null}ngOnInit(){this._initSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.searchForm.invalid)return void(this._checkValid=!0);const t=V.omitBy(this.searchForm.value,V.isNil),e=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:t,otherSearchInfo:e}),this._checkValid=!1}onReset(){this.clickResetEvent.emit()}checkIsInvalid(t){return this._checkValid&&this.searchForm.get(t)&&this.searchForm.get(t).invalid}onChangeSearchCondition(){this.changeSearchConditionEvent.emit(this.searchForm.getRawValue())}_initSubscription(){let t={salesCountryCode:null,station:null,itemCategory:null};this.searchForm.get("salesCountryCode").valueChanges.pipe(Object(N.a)(this._$unsubscribe)).subscribe(e=>{t=Object.assign(Object.assign({},t),{salesCountryCode:e}),this.filteredDestinationGroupList=this._filterDestinationGroupListByFilter(t),console.log(this._filterDestinationGroupListByFilter(t))}),this.searchForm.get("stationTypeCode").valueChanges.pipe(Object(N.a)(this._$unsubscribe)).subscribe(e=>{t=Object.assign(Object.assign({},t),{station:e}),this.filteredDestinationGroupList=this._filterDestinationGroupListByFilter(t)}),this.searchForm.get("itemCategoryCode").valueChanges.pipe(Object(N.a)(this._$unsubscribe)).subscribe(e=>{t=Object.assign(Object.assign({},t),{itemCategory:e}),this.filteredDestinationGroupList=this._filterDestinationGroupListByFilter(t)})}_setSearchFormData(t){const e=this._dataService.initListSearch();return Object.assign({},e,V.pick(t,Object.keys(e)))}_setOtherSearchInfo(t){this.compCodeInput=(null==t?void 0:t.compCodeInput)||null}_setOtherSearchCondition(){const t={};return this.autoCompletes.forEach(e=>{Object.assign(t,e.getInputValue())}),t}_filterDestinationGroupListByFilter(t){return this.destinationGroupList.reduce((e,i)=>(null!==t.salesCountryCode&&t.salesCountryCode!==i.salesCountryCode||null!==t.station&&t.station!==i.stationTypeCode||null!==t.itemCategory&&t.itemCategory!==i.itemCategoryCode||e.push(i),e),[])}}return t.\u0275fac=function(e){return new(e||t)(wt.Qb(Bt))},t.\u0275cmp=wt.Kb({type:t,selectors:[["app-bs-destination-item-search"]],viewQuery:function(t,e){var i;1&t&&wt.Xc(Gt.a,!0),2&t&&wt.Dc(i=wt.gc())&&(e.autoCompletes=i)},inputs:{stationList:"stationList",categoryList:"categoryList",salesCountryList:"salesCountryList",destinationGroupList:"destinationGroupList",otherSearchInfo:"otherSearchInfo",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent",changeSearchConditionEvent:"changeSearchConditionEvent"},decls:29,vars:9,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-1"],[1,"form-label"],["formControlName","salesCountryCode","dataKey","salesCountryCode","displayKey","salesCountryCode",1,"d-inline-flex","flex-fill",3,"options","isInvalid","onChange"],["formControlName","stationTypeCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options","isInvalid","onChange"],["formControlName","itemCategoryCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options","onChange"],["formControlName","destinationGroupSeq","dataKey","destinationGroupSeq","displayKey","displayKey",1,"d-inline-flex","flex-fill",3,"options","onChange"],["formControlName","useYn",1,"d-inline-flex","flex-fill",3,"options","onChange"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(t,e){1&t&&(wt.Wb(0,"form",0),wt.fc("ngSubmit",(function(){return e.onSubmit()})),wt.Wb(1,"div",1),wt.Wb(2,"div",2),wt.Wb(3,"div",3),wt.Wb(4,"span",4),wt.Pc(5,"Sales Country Code"),wt.Vb(),wt.Wb(6,"app-selectbox-detailcode",5),wt.fc("onChange",(function(){return e.onChangeSearchCondition()})),wt.Vb(),wt.Vb(),wt.Wb(7,"div",3),wt.Wb(8,"span",4),wt.Pc(9,"Station"),wt.Vb(),wt.Wb(10,"app-selectbox-detailcode",6),wt.fc("onChange",(function(){return e.onChangeSearchCondition()})),wt.Vb(),wt.Vb(),wt.Wb(11,"div",3),wt.Wb(12,"span",4),wt.Pc(13,"Item Category"),wt.Vb(),wt.Wb(14,"app-selectbox-detailcode",7),wt.fc("onChange",(function(){return e.onChangeSearchCondition()})),wt.Vb(),wt.Vb(),wt.Wb(15,"div",3),wt.Wb(16,"span",4),wt.Pc(17,"Dest. Group"),wt.Vb(),wt.Wb(18,"app-selectbox-detailcode",8),wt.fc("onChange",(function(){return e.onChangeSearchCondition()})),wt.Vb(),wt.Vb(),wt.Vb(),wt.Wb(19,"div",2),wt.Wb(20,"div",3),wt.Wb(21,"span",4),wt.Pc(22,"Use YN"),wt.Vb(),wt.Wb(23,"app-selectbox",9),wt.fc("onChange",(function(){return e.onChangeSearchCondition()})),wt.Vb(),wt.Vb(),wt.Vb(),wt.Vb(),wt.Wb(24,"div",10),wt.Wb(25,"button",11),wt.Pc(26,"Search"),wt.Vb(),wt.Wb(27,"button",12),wt.fc("click",(function(){return e.onReset()})),wt.Pc(28,"Reset"),wt.Vb(),wt.Vb(),wt.Vb()),2&t&&(wt.pc("formGroup",e.searchForm)("connectForm",e.searchCondition),wt.Cb(6),wt.pc("options",e.salesCountryList)("isInvalid",e.checkIsInvalid("salesCountryCode")),wt.Cb(4),wt.pc("options",e.stationList)("isInvalid",e.checkIsInvalid("stationTypeCode")),wt.Cb(4),wt.pc("options",e.categoryList),wt.Cb(4),wt.pc("options",e.filteredDestinationGroupList),wt.Cb(5),wt.pc("options",e.useYnOptions))},directives:[o.B,o.s,o.k,Yt.a,zt.a,o.r,o.i,Ht.a],encapsulation:2,changeDetection:0}),t})();var Mt=i("G4DP"),Jt=i("EsKh"),Qt=i("nj7W"),Xt=i("bMKz");let Zt=(()=>{class t{constructor(){this.clickAddEvent=new wt.n,this.clickDelEvent=new wt.n,this.changePageSizeEvent=new wt.n,this.clickDisplayOrderEvent=new wt.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onClickAdd(){this.clickAddEvent.emit()}onClickDel(){this.clickDelEvent.emit()}onChangePageSize(t){this.changePageSizeEvent.emit(t.value)}onClickDisplayOrder(){this.clickDisplayOrderEvent.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=wt.Kb({type:t,selectors:[["app-bs-destination-item-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{clickAddEvent:"clickAddEvent",clickDelEvent:"clickDelEvent",changePageSizeEvent:"changePageSizeEvent",clickDisplayOrderEvent:"clickDisplayOrderEvent"},decls:8,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(t,e){1&t&&(wt.Wb(0,"div",0),wt.Wb(1,"strong",1),wt.Pc(2),wt.Vb(),wt.Wb(3,"div",2),wt.Wb(4,"button",3),wt.fc("click",(function(){return e.onClickAdd()})),wt.Pc(5,"New"),wt.Vb(),wt.Wb(6,"div",4),wt.Wb(7,"app-selectbox",5),wt.fc("onChange",(function(t){return e.onChangePageSize(t)})),wt.Vb(),wt.Vb(),wt.Vb(),wt.Vb()),2&t&&(wt.Cb(2),wt.Qc(e.loading?"":e.totalCount),wt.Cb(5),wt.pc("options",e.pageSizeOptions)("ngModel",e.currentPageSize)("useAllOptionYn",!1))},directives:[Ht.a,o.r,o.u],encapsulation:2,changeDetection:0}),t})();var Ut=i("kDLv"),te=i("gbCm"),ee=i("Onn4");let ie=(()=>{class t{constructor(t,e){this._dataService=t,this.fb=e,this.submitEvent=new wt.n,this.closeEvent=new wt.n,this._$unsubscribe=new I.a,this.upsertForm=this._dataService.generatePutForm(),this._initSubscription()}get destinationTypeList(){return this._destinationTypeList}set destinationTypeList(t){this._destinationTypeList=t}get destinationGroupList(){let t;const e=this.upsertForm.get("salesCountryCode").value,i=this.upsertForm.get("stationTypeCode").value,s=this.upsertForm.get("itemCategoryCode").value;return e&&i&&s?(t=this._destinationGroupList.reduce((t,n)=>(n.salesCountryCode===e&&n.stationTypeCode===i&&n.itemCategoryCode===s&&t.push(n),t),[]),t):null}set destinationGroupList(t){this._destinationGroupList=t.map(t=>Object.assign(Object.assign({},t),{displayKey:t.destinationGroupSeq+"-"+t.destinationGroupNameEn}))}get rowItem(){return this._rowitem}set rowItem(t){this._rowitem=t,this.upsertFormData=this._setPutFormData(t),this._initThisState(t)}get autoCompleteValueModel(){return this.rowItem&&this.rowItem.destinationCode?`${this.rowItem.destinationNameEn} [${this.rowItem.destinationCode}]`:null}get autoCompleteDataKey(){const t=this.upsertForm&&this.upsertForm.get("itemCategoryCode").value,e=this.upsertForm&&this.upsertForm.get("destinationTypeCode").value;return V.isNil(t)||V.isNil(e)?"cityCode":{IC01C:"cityCodeIata",IC01A:"airportCode",IC02R:"regionCode",IC03C:"cityCodeIata",IC03A:"airportCode",IC04T:"cityCode",IC06T:"cityCode"}[t+e]}get autoCompleteDisplayKey(){const t=this.upsertForm&&this.upsertForm.get("itemCategoryCode").value,e=this.upsertForm&&this.upsertForm.get("destinationTypeCode").value;return V.isNil(t)||V.isNil(e)?"cityCode":{IC01C:["cityCodeIata","cityNameEn","countryNameEn"],IC01A:["airportCode","airportNameEn","countryNameEn"],IC02R:["regionCode","regionNameEn","countryNameEn"],IC03C:["cityCodeIata","cityNameEn","countryNameEn"],IC03A:["airportCode","airportNameEn","countryNameEn"],IC04T:["cityCode","cityNameEn","countryNameEn"],IC06T:["cityCode","cityNameEn","countryNameEn"]}[t+e]}get destinationApiResultPath(){const t=this.upsertForm&&this.upsertForm.get("itemCategoryCode").value,e=this.upsertForm&&this.upsertForm.get("destinationTypeCode").value;return V.isNil(t)||V.isNil(e)?null:[{IC01C:"cities",IC01A:"airports",IC02R:"regions",IC03C:"vehicles",IC03A:"airports",IC04T:"serviceCities",IC06T:"serviceCities"}[t+e]]}ngAfterContentInit(){this._initThisState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSelectDestinationCode(t){const e=this.upsertForm&&this.upsertForm.get("itemCategoryCode").value,i=this.upsertForm&&this.upsertForm.get("destinationTypeCode").value;if(V.isNil(e)||V.isNil(i))return;let s=null,n=null,o=null,a=null,r=null;switch(i){case"A":s=t.airportNameEn,n=t.airportNameKo,o=t.airportNameJa,a=t.airportNameVi,r=t.airportNameZh;break;case"C":case"T":s=t.cityNameEn,n=t.cityNameKo,o=t.cityNameJa,a=t.cityNameVi,r=t.cityNameZh;break;case"R":s=t.regionNameEn,n=t.regionNameKo,o=t.regionNameJa,a=t.regionNameVi,r=t.regionNameZh}this.upsertForm.get("destinationDisplayNameEn").setValue(s),this.upsertForm.get("destinationDisplayNameKo").setValue(n),this.upsertForm.get("destinationDisplayNameJa").setValue(o),this.upsertForm.get("destinationDisplayNameVi").setValue(a),this.upsertForm.get("destinationDisplayNameZh").setValue(r)}onSubmit(){if(this.upsertForm.invalid)return void(this._checkValid=!0);const t=this._setPutCondition();this.submitEvent.emit(t),this._checkValid=!1}onClose(){this.closeEvent.emit()}checkIsInvalid(t){return this._checkValid&&this.upsertForm.get(t)&&this.upsertForm.get(t).invalid}_initThisState(t){this._checkValid=!1,this.isInputAirportCode=!1,this.destinationGroupOptions=null,this.destinationTypeOptions=null,t&&(this.upsertForm.get("salesCountryCode").disable(),this.upsertForm.get("stationTypeCode").disable(),this.upsertForm.get("itemCategoryCode").disable(),this.upsertForm.get("destinationGroupSeq").disable(),this.upsertForm.get("destinationTypeCode").disable(),this.upsertForm.get("destinationCode").disable(),this.destinationGroupOptions=this._getDestinationGroupOptions(t.itemCategoryCode),this.destinationTypeOptions=this._getDestinationTypeOptions(t.itemCategoryCode))}_setPutFormData(t){const e=this._dataService.initPutFormData({});if(V.isNil(t))return e;const i=(null==t?void 0:t.destinationNameEn)||null,s=(null==t?void 0:t.destinationNameKo)||null,n=(null==t?void 0:t.destinationNameJa)||null,o=(null==t?void 0:t.destinationNameVi)||null,a=(null==t?void 0:t.destinationNameZh)||null,r=(null==t?void 0:t.salesCountryCode)||"KR-110000";return Object.assign({},e,V.pick(t,Object.keys(e)),{destinationDisplayNameEn:i,destinationDisplayNameKo:s,destinationDisplayNameJa:n,destinationDisplayNameVi:o,destinationDisplayNameZh:a,salesCountryCode:r})}_setPutCondition(){const t=this._dataService.initPutFormData({}),e=V.omitBy(this.upsertForm.getRawValue(),V.isNil);let i=Object.assign({},V.pick(e,Object.keys(t)));return"R"===this.upsertForm.value.destinationTypeCode&&(i.destinationCode=String(i.destinationCode)),i=V.omit(i,["compName"]),{condition:i}}_initSubscription(){this.upsertForm.get("salesCountryCode").valueChanges.pipe(Object(N.a)(this._$unsubscribe)).subscribe(t=>{this.upsertForm.get("itemCategoryCode").patchValue(null)}),this.upsertForm.get("itemCategoryCode").valueChanges.pipe(Object(N.a)(this._$unsubscribe)).subscribe(t=>{V.isNil(t)?(this.destinationApiCondition=null,this.destinationTypeOptions=null,this.dGroupList=null):(this.destinationApiCondition={itemCategoryCode:t},this.destinationTypeOptions=this._getDestinationTypeOptions(t)),this.upsertForm.get("destinationGroupSeq").patchValue(null)}),this.upsertForm.get("destinationGroupSeq").valueChanges.pipe(Object(N.a)(this._$unsubscribe)).subscribe(t=>{V.isNil(t)||!V.isNil(this.rowItem)?this.upsertForm.get("destinationTypeCode").disable():this.upsertForm.get("destinationTypeCode").enable(),this.upsertForm.get("destinationTypeCode").patchValue(null)}),this.upsertForm.get("destinationTypeCode").valueChanges.pipe(Object(N.a)(this._$unsubscribe)).subscribe(t=>{V.isNil(t)||!V.isNil(this.rowItem)?this.upsertForm.get("destinationCode").disable():this.upsertForm.get("destinationCode").enable(),this.upsertForm.get("destinationCode").patchValue(null)}),this.upsertForm.get("destinationCode").valueChanges.pipe(Object(N.a)(this._$unsubscribe)).subscribe(t=>{!V.isNil(t)&&V.isNil(this.rowItem)||(this.upsertForm.get("destinationDisplayNameEn").patchValue(null),this.upsertForm.get("destinationDisplayNameKo").patchValue(null),this.upsertForm.get("destinationDisplayNameJa").patchValue(null),this.upsertForm.get("destinationDisplayNameVi").patchValue(null),this.upsertForm.get("destinationDisplayNameZh").patchValue(null))})}_getDestinationGroupOptions(t){return V.isEmpty(this.destinationGroupList)?null:this.destinationGroupList.filter(e=>e.itemCategoryCode===t)}_getDestinationTypeOptions(t){return V.isEmpty(this.destinationTypeList)?null:this._destinationTypeList.filter(e=>e.referCode1.indexOf(t)>-1)}changeDestinationType(t){const{value:e}=t;this.isInputAirportCode="A"===e}}return t.\u0275fac=function(e){return new(e||t)(wt.Qb(Bt),wt.Qb(o.f))},t.\u0275cmp=wt.Kb({type:t,selectors:[["app-bs-destination-item-form"]],inputs:{stationList:"stationList",categoryList:"categoryList",salesCountryList:"salesCountryList",destinationTypeList:"destinationTypeList",destinationGroupList:"destinationGroupList",rowItem:"rowItem"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:92,vars:29,consts:[[1,"modal-body"],[3,"formGroup","connectForm","ngSubmit"],[1,"table","table-bordered"],["width","150px"],["scope","row",1,"th-bg"],["formControlName","salesCountryCode","dataKey","salesCountryCode","displayKey","salesCountryCode","useAllOptionName","Select","useAllOptionYn","false",3,"options","isInvalid"],["formControlName","stationTypeCode","dataKey","detailCode","displayWord","detailCodeName","useAllOptionName","Select",3,"options","isInvalid"],["formControlName","itemCategoryCode","dataKey","detailCode","displayWord","detailCodeName","useAllOptionName","Select",3,"options","isInvalid"],["formControlName","destinationGroupSeq","dataKey","destinationGroupSeq","displayKey","displayKey","useAllOptionName","Select",3,"options","isInvalid"],["formControlName","destinationTypeCode","dataKey","detailCode","displayWord","detailCodeName",3,"options","isInvalid","onChange"],["formControlName","destinationCode","apiUrl","admin/common/destination","inputFieldFormat","{0} - &{1}[&{2}]",3,"inputFieldValue","apiCondition","searchResultPath","dataKey","isInvalid","apiSearchTerm","inputFieldFormatKeyList","onSelect"],["formControlName","destinationDisplayNameEn",3,"isInvalid"],["formControlName","destinationDisplayNameKo",3,"isInvalid"],["formControlName","destinationDisplayNameJa",3,"isInvalid"],["formControlName","destinationDisplayNameVi",3,"isInvalid"],["formControlName","destinationDisplayNameZh",3,"isInvalid"],["formControlName","displayOrder","valueType","number",3,"isInvalid"],[1,"form-group"],["formControlName","useYn","name","useYn","label","Y",3,"value"],["formControlName","useYn","name","useYn","label","N",3,"value"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(t,e){1&t&&(wt.Wb(0,"div",0),wt.Wb(1,"form",1),wt.fc("ngSubmit",(function(){return e.onSubmit()})),wt.Wb(2,"div",2),wt.Wb(3,"table"),wt.Wb(4,"caption"),wt.Pc(5," Destination Item Info "),wt.Vb(),wt.Wb(6,"colgroup"),wt.Rb(7,"col",3),wt.Rb(8,"col"),wt.Vb(),wt.Wb(9,"tbody"),wt.Wb(10,"tr"),wt.Wb(11,"th",4),wt.Wb(12,"sup"),wt.Pc(13,"Sales Country Code"),wt.Vb(),wt.Vb(),wt.Wb(14,"td"),wt.Rb(15,"app-selectbox-detailcode",5),wt.Vb(),wt.Vb(),wt.Wb(16,"tr"),wt.Wb(17,"th",4),wt.Wb(18,"sup"),wt.Pc(19,"Station"),wt.Vb(),wt.Vb(),wt.Wb(20,"td"),wt.Rb(21,"app-selectbox-detailcode",6),wt.Vb(),wt.Vb(),wt.Wb(22,"tr"),wt.Wb(23,"th",4),wt.Wb(24,"sup"),wt.Pc(25,"Item Category"),wt.Vb(),wt.Vb(),wt.Wb(26,"td"),wt.Rb(27,"app-selectbox-detailcode",7),wt.Vb(),wt.Vb(),wt.Wb(28,"tr"),wt.Wb(29,"th",4),wt.Pc(30,"Destination Group"),wt.Rb(31,"sup"),wt.Vb(),wt.Wb(32,"td"),wt.Rb(33,"app-selectbox-detailcode",8),wt.Vb(),wt.Vb(),wt.Wb(34,"tr"),wt.Wb(35,"th",4),wt.Pc(36,"Destination Type"),wt.Rb(37,"sup"),wt.Vb(),wt.Wb(38,"td"),wt.Wb(39,"app-selectbox-detailcode",9),wt.fc("onChange",(function(t){return e.changeDestinationType(t)})),wt.Vb(),wt.Vb(),wt.Vb(),wt.Wb(40,"tr"),wt.Wb(41,"th",4),wt.Pc(42,"Destination Code"),wt.Rb(43,"sup"),wt.Vb(),wt.Wb(44,"td"),wt.Wb(45,"app-auto-complete",10),wt.fc("onSelect",(function(t){return e.onSelectDestinationCode(t)})),wt.Vb(),wt.Vb(),wt.Vb(),wt.Wb(46,"tr"),wt.Wb(47,"th",4),wt.Pc(48,"Display Name(EN)"),wt.Rb(49,"sup"),wt.Vb(),wt.Wb(50,"td"),wt.Rb(51,"app-input-text",11),wt.Vb(),wt.Vb(),wt.Wb(52,"tr"),wt.Wb(53,"th",4),wt.Pc(54,"Display Name(KO)"),wt.Rb(55,"sup"),wt.Vb(),wt.Wb(56,"td"),wt.Rb(57,"app-input-text",12),wt.Vb(),wt.Vb(),wt.Wb(58,"tr"),wt.Wb(59,"th",4),wt.Pc(60,"Display Name(JA)"),wt.Vb(),wt.Wb(61,"td"),wt.Rb(62,"app-input-text",13),wt.Vb(),wt.Vb(),wt.Wb(63,"tr"),wt.Wb(64,"th",4),wt.Pc(65,"Display Name(VI)"),wt.Vb(),wt.Wb(66,"td"),wt.Rb(67,"app-input-text",14),wt.Vb(),wt.Vb(),wt.Wb(68,"tr"),wt.Wb(69,"th",4),wt.Pc(70,"Display Name(ZH)"),wt.Vb(),wt.Wb(71,"td"),wt.Rb(72,"app-input-text",15),wt.Vb(),wt.Vb(),wt.Wb(73,"tr"),wt.Wb(74,"th",4),wt.Pc(75,"Display Order"),wt.Rb(76,"sup"),wt.Vb(),wt.Wb(77,"td"),wt.Rb(78,"app-input-text",16),wt.Vb(),wt.Vb(),wt.Wb(79,"tr"),wt.Wb(80,"th",4),wt.Pc(81,"Use YN"),wt.Rb(82,"sup"),wt.Vb(),wt.Wb(83,"td"),wt.Wb(84,"div",17),wt.Rb(85,"app-radio",18),wt.Rb(86,"app-radio",19),wt.Vb(),wt.Vb(),wt.Vb(),wt.Vb(),wt.Vb(),wt.Vb(),wt.Wb(87,"div",20),wt.Wb(88,"button",21),wt.Pc(89,"Save"),wt.Vb(),wt.Wb(90,"button",22),wt.fc("click",(function(){return e.onClose()})),wt.Pc(91,"Cancel"),wt.Vb(),wt.Vb(),wt.Vb(),wt.Vb()),2&t&&(wt.Cb(1),wt.pc("formGroup",e.upsertForm)("connectForm",e.upsertFormData),wt.Cb(14),wt.pc("options",e.salesCountryList)("isInvalid",e.checkIsInvalid("salesCountryCode")),wt.Cb(6),wt.pc("options",e.stationList)("isInvalid",e.checkIsInvalid("stationTypeCode")),wt.Cb(6),wt.pc("options",e.categoryList)("isInvalid",e.checkIsInvalid("itemCategoryCode")),wt.Cb(6),wt.pc("options",e.destinationGroupList)("isInvalid",e.checkIsInvalid("destinationGroupSeq")),wt.Cb(6),wt.pc("options",e.destinationTypeOptions)("isInvalid",e.checkIsInvalid("destinationTypeCode")),wt.Cb(6),wt.pc("inputFieldValue",e.autoCompleteValueModel)("apiCondition",e.destinationApiCondition)("searchResultPath",e.destinationApiResultPath)("dataKey",e.autoCompleteDataKey)("isInvalid",e.checkIsInvalid("destinationCode"))("apiSearchTerm","keyword")("inputFieldFormatKeyList",e.autoCompleteDisplayKey),wt.Cb(6),wt.pc("isInvalid",e.checkIsInvalid("destinationDisplayNameEn")),wt.Cb(6),wt.pc("isInvalid",e.checkIsInvalid("destinationDisplayNameKo")),wt.Cb(5),wt.pc("isInvalid",e.checkIsInvalid("destinationDisplayNameJa")),wt.Cb(5),wt.pc("isInvalid",e.checkIsInvalid("destinationDisplayNameVi")),wt.Cb(5),wt.pc("isInvalid",e.checkIsInvalid("destinationDisplayNameZh")),wt.Cb(6),wt.pc("isInvalid",e.checkIsInvalid("displayOrder")),wt.Cb(6),wt.Gb("valid-error",e.checkIsInvalid("useYn")),wt.Cb(1),wt.pc("value",!0),wt.Cb(1),wt.pc("value",!1))},directives:[o.B,o.s,o.k,Yt.a,zt.a,o.r,o.i,Gt.a,te.a,ee.a],encapsulation:2,changeDetection:0}),t})();function se(t,e){1&t&&(wt.Wb(0,"span"),wt.Pc(1,"Y"),wt.Vb())}function ne(t,e){1&t&&(wt.Wb(0,"span"),wt.Pc(1,"N"),wt.Vb())}function oe(t,e){if(1&t&&(wt.Nc(0,se,2,0,"span",7),wt.Nc(1,ne,2,0,"span",7)),2&t){const t=e.$implicit;wt.pc("ngIf",!0===t.useYn),wt.Cb(1),wt.pc("ngIf",!1===t.useYn)}}function ae(t,e){if(1&t){const t=wt.Xb();wt.Wb(0,"app-bs-destination-item-form",8),wt.fc("submitEvent",(function(e){return wt.Fc(t),wt.hc().submitUpsertHandler(e)}))("closeEvent",(function(){return wt.Fc(t),wt.hc().closeUpsertHandler()})),wt.ic(1,"async"),wt.ic(2,"async"),wt.ic(3,"async"),wt.ic(4,"async"),wt.ic(5,"async"),wt.ic(6,"async"),wt.Vb()}if(2&t){const t=wt.hc();wt.pc("stationList",wt.jc(1,6,t.stationList$))("categoryList",wt.jc(2,8,t.categoryList$))("salesCountryList",wt.jc(3,10,t.salesCountryCodeList$))("destinationTypeList",wt.jc(4,12,t.destinationTypeList$))("destinationGroupList",wt.jc(5,14,t.destinationGroupList$))("rowItem",wt.jc(6,16,t.selectedItem$))}}const re=function(t){return{useYnTpl:t}};let ce=(()=>{class t{constructor(t,e,i,s,n,o){this.store=t,this.authStore=e,this._dataService=i,this.alertService=s,this._disPlayOrder=n,this.UserConditionService=o,this.unsubscribe$=new I.a,this.loading$=t.pipe(Object(r.u)(gt)),this.reloadToggle$=t.pipe(Object(r.u)(Ct)),this.stationList$=t.pipe(Object(r.u)(yt)),this.categoryList$=t.pipe(Object(r.u)(Ot)),this.destinationTypeList$=t.pipe(Object(r.u)(ft)),this.destinationGroupList$=t.pipe(Object(r.u)(jt)),this.salesCountryCodeList$=t.pipe(Object(r.u)(vt)),this.searchCondition$=t.pipe(Object(r.u)(St)),this.gridDataList$=t.pipe(Object(r.u)(Vt)),this.listPageSize$=t.pipe(Object(r.u)(Lt)),this.loginUserNo$=e.pipe(Object(r.u)(_t.t)),this.isOpenDetailPopup$=t.pipe(Object(r.u)(Dt)),this.selectedItem$=t.pipe(Object(r.u)(It)),this.columns=this._dataService.generateGridColumns(),this.otherSearchInfo$=t.pipe(Object(r.u)(Nt)),this.gridCheckedRowids$=t.pipe(Object(r.u)(kt)),this.gridState$=t.pipe(Object(r.u)(Et)),this.gridCheckedState$=t.pipe(Object(r.u)(Ft)),this.storeId$=e.pipe(Object(r.u)(_t.o)),this.selectSalesCountry$=e.pipe(Object(r.u)(_t.k)),this._initSubscription()}ngOnInit(){this.store.dispatch(s.loadStationList({condition:{masterCode:"BS002"}})),this.store.dispatch(s.loadCategoryList({condition:{masterCode:"BS064"}})),this.store.dispatch(s.loadDestinationTypeList({condition:{masterCode:"BS014"}})),this.store.dispatch(s.loadDestinationGroupList({condition:{useYn:!0}})),this.store.dispatch(s.salesCountryCodeList({condition:{}})),this.storeId$.subscribe(t=>this._storeId=t),this.initSearchCondition()}ngOnDestroy(){this.store.dispatch(s.initList()),this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(s.setGridCheckRowidsAction({rowids:this.gridEl.checkedRows})),this.store.dispatch(s.setGridStateAction({gridState:this.gridEl.thisGridState})),this.store.dispatch(s.setGridCheckedStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}changePageSizeHandler(t){this.store.dispatch(s.changePageSize({pageSize:t}))}clickAddHandler(){this.store.dispatch(s.openDetailPopup())}clickDelHandler(){var t;(null===(t=this.gridEl.checkedRows)||void 0===t?void 0:t.length)>0?this.store.dispatch(s.removeSelectedGridEntities({rowids:this.gridEl.checkedRows})):this.alertService.alert("There are no items selected.")}clickSearchHandler({searchCondition:t,otherSearchInfo:e}){let i=this._setSearchCondition(t);this.store.dispatch(s.loadList({condition:i})),this.store.dispatch(s.changeSearchCondition({searchCondition:t,otherSearchInfo:e})),this.UserConditionService.setSearchSettingSessionStorage(i,this._storeId,e)}clickResetHandler(){this.store.dispatch(s.changeSearchCondition({searchCondition:this._dataService.initListSearch(),otherSearchInfo:null}))}dbClickRowHandler(t){this.store.dispatch(s.addSelectedDetailRowInfo({selectedDetailRowInfo:V.cloneDeep(t)})),this.store.dispatch(s.openDetailPopup())}changeSearchConditionHandler(t){this.store.dispatch(s.changeSearchCondition({searchCondition:t,otherSearchInfo:t}))}submitUpsertHandler(t){const{condition:e}=t;this.store.dispatch(s.upsertItem({upsertCondition:e}))}closeUpsertHandler(){this.store.dispatch(s.closeDetailPopup()),this.store.dispatch(s.delSelectedDetailRowInfo())}_initSubscription(){this.reloadToggle$.pipe(Object(D.a)(1),Object(N.a)(this.unsubscribe$)).subscribe(()=>{this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()})}_setSearchCondition(t){return V.omitBy(t,t=>V.isNil(t)||""===t)}initSearchCondition(){this.searchCondition$.subscribe(t=>this._searchCondition=t),this.gridDataList$.subscribe(t=>this._searchGridDataList=t),this.otherSearchInfo$.subscribe(t=>this._otherSearchInfo=t),this.salesCountryCodeList$.subscribe(t=>this.salesCountryList=t);const t=this._setSearchCondition(this._searchCondition);if(0===V.size(t)&&0===V.size(this._searchGridDataList)){const t=this._dataService.initListSearch(),e=this.UserConditionService.selectSearchSetting(t,this._storeId,this._otherSearchInfo);this.store.dispatch(s.changeSearchCondition({searchCondition:e[0],otherSearchInfo:e[1]}))}}}return t.\u0275fac=function(e){return new(e||t)(wt.Qb(r.h),wt.Qb(r.h),wt.Qb(Bt),wt.Qb(Jt.a),wt.Qb(Qt.a),wt.Qb(Xt.a))},t.\u0275cmp=wt.Kb({type:t,selectors:[["app-bs-destination-item"]],viewQuery:function(t,e){var i;1&t&&(wt.Xc(qt,!0),wt.Xc(Mt.a,!0)),2&t&&(wt.Dc(i=wt.gc())&&(e.searchFormEl=i.first),wt.Dc(i=wt.gc())&&(e.gridEl=i.first))},decls:24,vars:53,consts:[[3,"stationList","categoryList","searchCondition","otherSearchInfo","destinationGroupList","salesCountryList","clickSearchEvent","clickResetEvent","changeSearchConditionEvent"],[3,"loading","currentPageSize","totalCount","clickAddEvent","clickDelEvent","changePageSizeEvent"],["useYnTpl",""],[3,"gridLoading","gridState","checkedState","columns","pageSize","dataList","templates","dbClickRowEvent"],["gridBasis",""],["modalSize","sm","modalContentClass","pd-all","header","Destination Item Info",3,"visible","modal","visibleChange"],[3,"stationList","categoryList","salesCountryList","destinationTypeList","destinationGroupList","rowItem","submitEvent","closeEvent",4,"ngIf"],[4,"ngIf"],[3,"stationList","categoryList","salesCountryList","destinationTypeList","destinationGroupList","rowItem","submitEvent","closeEvent"]],template:function(t,e){if(1&t&&(wt.Wb(0,"app-bs-destination-item-search",0),wt.fc("clickSearchEvent",(function(t){return e.clickSearchHandler(t)}))("clickResetEvent",(function(){return e.clickResetHandler()}))("changeSearchConditionEvent",(function(t){return e.changeSearchConditionHandler(t)})),wt.ic(1,"async"),wt.ic(2,"async"),wt.ic(3,"async"),wt.ic(4,"async"),wt.ic(5,"async"),wt.ic(6,"async"),wt.Vb(),wt.Wb(7,"app-bs-destination-item-control",1),wt.fc("clickAddEvent",(function(){return e.clickAddHandler()}))("clickDelEvent",(function(){return e.clickDelHandler()}))("changePageSizeEvent",(function(t){return e.changePageSizeHandler(t)})),wt.ic(8,"async"),wt.ic(9,"async"),wt.ic(10,"async"),wt.Vb(),wt.Nc(11,oe,2,2,"ng-template",null,2,wt.Oc),wt.Wb(13,"app-grid-basis",3,4),wt.fc("dbClickRowEvent",(function(t){return e.dbClickRowHandler(t)})),wt.ic(15,"async"),wt.ic(16,"async"),wt.ic(17,"async"),wt.ic(18,"async"),wt.ic(19,"async"),wt.Vb(),wt.Wb(20,"app-dialog",5),wt.fc("visibleChange",(function(){return e.closeUpsertHandler()})),wt.ic(21,"async"),wt.Nc(22,ae,7,18,"app-bs-destination-item-form",6),wt.ic(23,"async"),wt.Vb()),2&t){const t=wt.Ec(12);wt.pc("stationList",wt.jc(1,19,e.stationList$))("categoryList",wt.jc(2,21,e.categoryList$))("searchCondition",wt.jc(3,23,e.searchCondition$))("otherSearchInfo",wt.jc(4,25,e.otherSearchInfo$))("destinationGroupList",wt.jc(5,27,e.destinationGroupList$))("salesCountryList",wt.jc(6,29,e.salesCountryCodeList$)),wt.Cb(7),wt.pc("loading",wt.jc(8,31,e.loading$))("currentPageSize",wt.jc(9,33,e.listPageSize$))("totalCount",wt.jc(10,35,e.gridDataList$).length),wt.Cb(6),wt.pc("gridLoading",wt.jc(15,37,e.loading$))("gridState",wt.jc(16,39,e.gridState$))("checkedState",wt.jc(17,41,e.gridCheckedState$))("columns",e.columns)("pageSize",wt.jc(18,43,e.listPageSize$))("dataList",wt.jc(19,45,e.gridDataList$))("templates",wt.uc(51,re,t)),wt.Cb(7),wt.pc("visible",wt.jc(21,47,e.isOpenDetailPopup$))("modal",!0),wt.Cb(2),wt.pc("ngIf",wt.jc(23,49,e.isOpenDetailPopup$))}},directives:[qt,Zt,Mt.a,Ut.a,n.o,ie],pipes:[n.b],encapsulation:2,changeDetection:0}),t})();const le=[{path:"",component:ce,data:{title:"\ubaa9\uc801\uc9c0 \uadf8\ub8f9\ucf54\ub4dc \uad00\ub9ac"}}];let de=(()=>{class t{}return t.\u0275mod=wt.Ob({type:t}),t.\u0275inj=wt.Nb({factory:function(e){return new(e||t)},imports:[[L.f.forChild(le)],L.f]}),t})();var ue=i("lJxs"),pe=i("JIr8"),he=i("vkgz"),be=i("bOdf"),me=i("zp1y"),ge=i("Xb6A"),Ce=i("AtUx");let ye=(()=>{class t{constructor(t,e,i,n,o,c){this.actions$=t,this.service=e,this._errorService=i,this.loader=n,this.alertService=o,this.store=c,this.loadList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(s.loadList),Object(Tt.a)(({condition:t})=>this.service.getList(t).pipe(Object(ue.a)(t=>s.getListSuccess({dataList:t})),Object(pe.a)(t=>{const e="List lookup failed. Please try again in a momentarily.",i=[s.getListFailure({error:e})];return this._catchErr(t,e,i),[]}))))),this.removeItems$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(s.removeSelectedGridEntities),Object(Tt.a)(({rowids:t})=>this.service.removeItems({rowids:t}).pipe(Object(ue.a)(t=>({succeedYn:!0})),Object(pe.a)(t=>Object(Wt.a)({succeedYn:!1,error:t})))),Object(he.a)(({succeedYn:t,error:e})=>{if(t){const t=[s.reloadList(),s.delSelectedDetailRowInfo()];this._runPage("Your data has been deleted.",t)}else{const t=[s.removeItemsFailure({error:"Deletion failed."})];this._catchErr(e,"Deletion failed.",t)}})),{dispatch:!1}),this.upsertItem$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(s.upsertItem),Object(Tt.a)(({upsertCondition:t})=>this.service.upsertItem(t).pipe(Object(ue.a)(()=>({succeedYn:!0})),Object(pe.a)(t=>Object(Wt.a)({succeedYn:!1,error:t})))),Object(he.a)(({succeedYn:t,error:e})=>{if(t){const t="Your data has been saved.",e=[s.reloadList(),s.closeDetailPopup(),s.delSelectedDetailRowInfo()];this._runPage(t,e)}else{const t="Failed to save.",i=[s.upsertItemFailure({error:t})];this._catchErr(e,t,i)}})),{dispatch:!1}),this.loadStationList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(s.loadStationList),Object(be.a)(t=>Object(Wt.a)(t).pipe(Object(me.a)(this.stationList$))),Object(Tt.a)(([t,e])=>V.isEmpty(e)?this.service.getCommonDetailCodeList(t.condition).pipe(Object(ue.a)(t=>s.getStationListSuccess({dataList:t})),Object(pe.a)(t=>{const e="List lookup failed.",i=[s.getStationListFailure({error:e})];return this._catchErr(t,e,i),[]})):[]))),this.loadCategoryList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(s.loadCategoryList),Object(be.a)(t=>Object(Wt.a)(t).pipe(Object(me.a)(this.categoryList$))),Object(Tt.a)(([t,e])=>V.isEmpty(e)?this.service.getCommonDetailCodeList(t.condition).pipe(Object(ue.a)(t=>s.getCategoryListSuccess({dataList:t})),Object(pe.a)(t=>{const e="List lookup failed.",i=[s.getCategoryListFailure({error:e})];return this._catchErr(t,e,i),[]})):[]))),this.loadDestinationTypeList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(s.loadDestinationTypeList),Object(be.a)(t=>Object(Wt.a)(t).pipe(Object(me.a)(this.destinationTypeList$))),Object(Tt.a)(([t,e])=>V.isEmpty(e)?this.service.getCommonDetailCodeList(t.condition).pipe(Object(ue.a)(t=>s.getDestinationTypeListSuccess({dataList:t})),Object(pe.a)(t=>{const e="List lookup failed.",i=[s.getDestinationTypeListFailure({error:e})];return this._catchErr(t,e,i),[]})):[]))),this.loadDestinationGroupList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(s.loadDestinationGroupList),Object(be.a)(t=>Object(Wt.a)(t).pipe(Object(me.a)(this.destinationGroupList$))),Object(Tt.a)(([t,e])=>V.isEmpty(e)?this.service.getDestinationGroupList(t.condition).pipe(Object(ue.a)(t=>s.getDestinationGroupListSuccess({dataList:t})),Object(pe.a)(t=>{const e="List lookup failed.",i=[s.getDestinationGroupListFailure({error:e})];return this._catchErr(t,e,i),[]})):[]))),this.loadSalesCountryCodeList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(s.salesCountryCodeList),Object(be.a)(t=>Object(Wt.a)(t).pipe(Object(me.a)(this.salesCountryCodeList$))),Object(Tt.a)(([t,e])=>V.isEmpty(e)?this.service.salesCountryCodeList(t.condition).pipe(Object(ue.a)(t=>s.salesCountryCodeSuccess({dataList:t})),Object(pe.a)(t=>(this._catchErr(t,"List lookup failed.",[]),[]))):[]))),this.stationList$=c.pipe(Object(r.u)(yt)),this.categoryList$=c.pipe(Object(r.u)(Ot)),this.destinationTypeList$=c.pipe(Object(r.u)(ft)),this.destinationGroupList$=c.pipe(Object(r.u)(jt)),this.salesCountryCodeList$=c.pipe(Object(r.u)(vt))}_runPage(t,e){this.alertService.alert({message:t,accept:(null==e?void 0:e.length)>0?()=>{e.forEach(t=>{this.store.dispatch(t)})}:()=>{}})}_catchErr(t,e,i){const s=this._errorService.errorHandler(t,e);V.isNil(s)||(V.isNil(s.accept)&&(s.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(t=>{this.store.dispatch(t)})}:()=>{}),this.alertService.alert(s))}}return t.\u0275fac=function(e){return new(e||t)(wt.bc(a.a),wt.bc(xt),wt.bc(ge.a),wt.bc(Ce.a),wt.bc(Jt.a),wt.bc(r.h))},t.\u0275prov=wt.Mb({token:t,factory:t.\u0275fac}),t})();var Oe=i("YH7L");const fe=[ce],je=[Zt,ie,qt];let ve=(()=>{class t{}return t.\u0275mod=wt.Ob({type:t}),t.\u0275inj=wt.Nb({factory:function(e){return new(e||t)},imports:[[n.c,o.m,o.w,c.m,l.a,d.a,u.a,O.a,p.a,h.a,Oe.a,b.a,m.a,g.a,C.a,y.a,j.a,f.a,S.a,v.a,de,r.j.forFeature("bsDestinationItem",ht),a.b.forFeature([ye])]]}),t})()},Onn4:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var s=i("fXoL"),n=i("3Pt+"),o=i("ofXK");const a=["rb"],r=function(){return{radio:!0}},c={provide:n.p,useExisting:Object(s.U)(()=>l),multi:!0};let l=(()=>{class t{constructor(t){this.cd=t,this.onClick=new s.n,this.onFocus=new s.n,this.onBlur=new s.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}handleClick(t,e,i){t.preventDefault(),this.disabled||(this.select(t),i&&e.focus())}select(t){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.onClick.emit(t))}writeValue(t){this.checked=t===this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t}onInputFocus(t){this.focused=!0,this.onFocus.emit(t)}onInputBlur(t){this.focused=!1,this.onModelTouched(),this.onBlur.emit(t)}onChange(t){this.select(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Qb(s.h))},t.\u0275cmp=s.Kb({type:t,selectors:[["app-radio"]],viewQuery:function(t,e){var i;1&t&&s.Kc(a,!0),2&t&&s.Dc(i=s.gc())&&(e.inputViewChild=i.first)},inputs:{value:"value",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",checked:"checked"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[s.Bb([c])],decls:5,vars:11,consts:[[3,"ngClass","click"],["type","radio",1,"radio-control-input",3,"checked","disabled","change","focus","blur"],["rb",""],[1,"radio-control-text"]],template:function(t,e){1&t&&(s.Wb(0,"label",0),s.fc("click",(function(t){return e.select(t)})),s.Wb(1,"input",1,2),s.fc("change",(function(t){return e.onChange(t)}))("focus",(function(t){return e.onInputFocus(t)}))("blur",(function(t){return e.onInputBlur(t)})),s.Vb(),s.Wb(3,"span",3),s.Pc(4),s.Vb(),s.Vb()),2&t&&(s.Eb(e.styleClass),s.pc("ngClass",s.tc(10,r)),s.Cb(1),s.pc("checked",e.checked)("disabled",e.disabled),s.Db("id",e.inputId)("name",e.name)("value",e.value)("tabindex",e.tabindex),s.Cb(3),s.Qc(e.label))},directives:[o.l],encapsulation:2}),t})()},YH7L:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("ofXK"),n=i("3Pt+"),o=i("fXoL");let a=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},imports:[[s.c,n.m,n.w]]}),t})()},nMd8:function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));var s=i("fXoL"),n=i("3Pt+"),o=i("LvDl"),a=i("XNiG"),r=i("itXk"),c=i("1G5W"),l=i("pLZG"),d=i("YY+H"),u=i("kt0X"),p=i("ofXK");function h(t,e){if(1&t&&(s.Wb(0,"option",3),s.Pc(1),s.Vb()),2&t){const t=s.hc();s.pc("ngValue",null),s.Cb(1),s.Qc(t.useAllOptionName)}}function b(t,e){if(1&t&&(s.Wb(0,"option",3),s.Pc(1),s.Vb()),2&t){const t=e.$implicit,i=s.hc();s.pc("ngValue",t),s.Cb(1),s.Qc(i.displayKey?t[i.displayKey]:t)}}const m={provide:n.p,useExisting:Object(s.U)(()=>g),multi:!0};let g=(()=>{class t{constructor(t,e){this._store=t,this._cdr=e,this.useAllOptionYn=!0,this.useAllOptionName="All",this.dataKey="detailCode",this.onChange=new s.n,this._unsubscribe$=new a.a,this._options$=new a.a,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.selectedLanguage$=this._store.select(d.f)}get invalid(){return this.isInvalid}get disabled(){return this._disabled}set disabled(t){this._disabled=t}get options(){return this._options}set options(t){this._options=t,this._options$.next(t),this.updateSelectedOption(this.value)}ngOnInit(){this.updateSelectedOption(null),this._initSubscription()}ngAfterViewInit(){this.options&&this._options$.next(this.options)}ngOnDestroy(){this._options$.next(null),this._options$.complete(),this._unsubscribe$.next(),this._unsubscribe$.complete()}writeValue(t){this.value=t,this.updateSelectedOption(t)}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t}compareFn(t,e){return this.dataKey?t[this.dataKey]===e[this.dataKey]:t===e}selectItem(t){this.selectedOption=t,this.value=this._getValue(t),this.onModelChange(this.value),this.onChange.emit({value:this.value,option:t})}updateSelectedOption(t){this.selectedOption=this._findOption(t,this.options)}_findOption(t,e){return this.dataKey?o.find(e,e=>e[this.dataKey]===t)||null:t}_getValue(t){return o.isNil(t)?null:t[this.dataKey]}_initSubscription(){if(this.displayKey)return;let t=null;Object(r.a)([this.selectedLanguage$,this._options$]).pipe(Object(c.a)(this._unsubscribe$),Object(l.a)(([t,e])=>e&&e.length>0)).subscribe(([e,i])=>{let s;if(o.isNil(e)&&(e="EN"),!t&&i&&(t=e),t===e&&(this.displayKey=this.displayWord+"Ln",Object.keys(i[0]).includes(this.displayKey)))this._cdr.detectChanges();else{switch(e){case"EN":s=this._findDisplayKey(i,this.displayWord,["En"]);break;case"KO":s=this._findDisplayKey(i,this.displayWord,["Ko","Kr"]);break;case"JA":s=this._findDisplayKey(i,this.displayWord,["Ja","Jp"]);break;case"ZH":s=this._findDisplayKey(i,this.displayWord,["Zh","Cn"]);break;case"VI":s=this._findDisplayKey(i,this.displayWord,["Vi","Vn"])}this.displayKey=s||this.displayWord+"En",this._cdr.detectChanges()}})}_findDisplayKey(t,e,i){if(!t||0===t.length)return null;if(console.log(e,"displayWord"),!e)return null;const s=Object.keys(t[0]);for(const n of i){const t=e+n;if(s.includes(t))return t;if(s.includes(e))return t}return null}}return t.\u0275fac=function(e){return new(e||t)(s.Qb(u.h),s.Qb(s.h))},t.\u0275cmp=s.Kb({type:t,selectors:[["app-selectbox-detailcode"]],hostAttrs:[1,"select-box"],hostVars:2,hostBindings:function(t,e){2&t&&s.Gb("valid-error",e.invalid)},inputs:{name:"name",useAllOptionYn:"useAllOptionYn",useAllOptionName:"useAllOptionName",dataKey:"dataKey",displayKey:"displayKey",displayWord:"displayWord",isInvalid:"isInvalid",disabled:"disabled",options:"options"},outputs:{onChange:"onChange"},features:[s.Bb([m])],decls:3,vars:6,consts:[[3,"compareWith","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngIf"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,e){1&t&&(s.Wb(0,"select",0),s.fc("ngModelChange",(function(t){return e.selectItem(t)})),s.Nc(1,h,2,2,"option",1),s.Nc(2,b,2,2,"option",2),s.Vb()),2&t&&(s.pc("compareWith",e.compareFn)("ngModel",e.selectedOption)("disabled",e.disabled),s.Db("name",e.name),s.Cb(1),s.pc("ngIf",e.useAllOptionYn),s.Cb(1),s.pc("ngForOf",e.options))},directives:[n.y,n.r,n.u,p.o,p.n,n.v,n.A],encapsulation:2}),t})()}}]);