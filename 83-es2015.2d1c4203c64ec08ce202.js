(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{"7G9D":function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var s=i("tk/3"),a=i("IzEk"),o=i("LvDl"),n=i("fXoL"),c=i("tpT/"),r=i("EsKh");let l=(()=>{class t{constructor(t,e){this.api=t,this.alertService=e}imageCheck(t){if(0===t.target.files.length)return!1;const e=t.target.files[0];if(e.size>2e6)return this.alertService.alert("\ud30c\uc77c \uc0ac\uc774\uc988\ub294 2MB\ub97c \ub118\uae38 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"),!1;let i=this.parseFileName(e.name);const s=i.toLowerCase(),a=s.lastIndexOf("."),o=s.substring(a+1);if(a<0)i+=".jpg";else if("jpg"!==o&&"png"!==o&&"jpeg"!==o)return this.alertService.alert("\uc774\ubbf8\uc9c0 \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return e}pdfCheck(t){if(0===t.target.files.length)return!1;const e=t.target.files[0];let i=this.parseFileName(e.name);const s=i.toLowerCase(),a=s.lastIndexOf("."),o=s.substring(a+1);if(a<0)i+=".pdf";else if("pdf"!==o)return this.alertService.alert("PDF \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return e}excelCheck(t){if(0===t.target.files.length)return!1;const e=t.target.files[0];let i=this.parseFileName(e.name);const s=i.toLowerCase(),a=s.lastIndexOf("."),o=s.substring(a+1);if(a<0)i+=".xls";else if("xls"!==o&&"xlsx"!==o)return this.alertService.alert("\uc5d1\uc140 \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return e}imageUpload(t,e){const i=new FormData;for(const a in e)if(e.hasOwnProperty(a))try{i.set(a,e[a])}catch(s){i.append(a,e[a])}return this.api.post(t,i)}fileUpload(t,e){const i=new FormData;for(const a in e)if(e.hasOwnProperty(a))try{i.set(a,e[a])}catch(s){i.append(a,e[a])}return this.api.put(t,i)}fileDelete(t,e){const i=Object.assign({},this.api.defaultParams,{condition:e});return this.api.delete(t,i)}fileDownload(t){let e,i;switch(t.params||(t=Object.assign(t,{params:""})),t.type||(t.type="excel"),t.type){case"excel":e=".xls",i="application/vnd.ms-excel";break;case"pdf":e=".pdf",i="application/pdf"}const n=s=>{const a=document.createElement("a"),o=new Blob([s],{type:i});a.href=URL.createObjectURL(o),a.download=t.filename+e,a.click()};if("post"===t.requestMethod){const e=o.assign({},this.api.defaultParams,{condition:t.params});return this.api.postBlob(t.url,e).pipe(Object(a.a)(1)).subscribe(t=>{"application/json"===t.type?this.alertService.alert("You must wait a minute before making another request."):n(t)})}return this.api.get(t.url,t.params,{responseType:"blob",headers:new s.e({"Content-Type":"application/json",Accept:"application/json"})}).pipe(Object(a.a)(1)).subscribe(t=>{n(t)})}parseFileName(t){const e=/[\{\}\[\]\/?,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"' ']/gi,i=t;return e.test(i)?i.replace(e,""):i}}return t.\u0275fac=function(e){return new(e||t)(n.bc(c.a),n.bc(r.a))},t.\u0275prov=n.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},YH7L:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var s=i("ofXK"),a=i("3Pt+"),o=i("fXoL");let n=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},imports:[[s.c,a.m,a.w]]}),t})()},j8kb:function(t,e,i){"use strict";i.r(e),i.d(e,"CONTAINERS",(function(){return bi})),i.d(e,"COMPONENTS",(function(){return hi})),i.d(e,"CpStaffModule",(function(){return mi}));var s={};i.r(s),i.d(s,"initComponent",(function(){return E})),i.d(s,"loadPositionGroupList",(function(){return D})),i.d(s,"loadPositionGroupListSuccess",(function(){return $})),i.d(s,"loadPositionGroupListFailure",(function(){return w})),i.d(s,"loadPositionList",(function(){return _})),i.d(s,"loadPositionListSuccess",(function(){return U})),i.d(s,"loadPositionListFailure",(function(){return R})),i.d(s,"loadCorporateDeptList",(function(){return M})),i.d(s,"loadCorporateDeptListSuccess",(function(){return x})),i.d(s,"loadCorporateDeptListFailure",(function(){return A})),i.d(s,"loadUserStatusList",(function(){return Y})),i.d(s,"loadUserStatusListSuccess",(function(){return B})),i.d(s,"loadCountryList",(function(){return K})),i.d(s,"loadCountryListSuccess",(function(){return T})),i.d(s,"loadAllianceList",(function(){return G})),i.d(s,"loadAllianceListSuccess",(function(){return H})),i.d(s,"loadUserTypeList",(function(){return z})),i.d(s,"loadUserTypeListSuccess",(function(){return q})),i.d(s,"compList",(function(){return Q})),i.d(s,"compListSuccess",(function(){return X})),i.d(s,"loadStationList",(function(){return J})),i.d(s,"loadStationListSuccess",(function(){return Z})),i.d(s,"loadCategoryList",(function(){return tt})),i.d(s,"loadCategoryListSuccess",(function(){return et})),i.d(s,"loadPrivacyInfoManageList",(function(){return it})),i.d(s,"getPrivacyInfoManageListSuccess",(function(){return st})),i.d(s,"changeSearchCondition",(function(){return at})),i.d(s,"reloadList",(function(){return ot})),i.d(s,"loadList",(function(){return nt})),i.d(s,"getListSuccess",(function(){return ct})),i.d(s,"getListFailure",(function(){return rt})),i.d(s,"setGridStateAction",(function(){return lt})),i.d(s,"setGridCheckStateAction",(function(){return pt})),i.d(s,"changePageIndex",(function(){return dt})),i.d(s,"changePageSize",(function(){return ut})),i.d(s,"openDetailPopup",(function(){return bt})),i.d(s,"closeDetailPopup",(function(){return ht})),i.d(s,"addSelectedDetailRowInfo",(function(){return mt})),i.d(s,"delSelectedDetailRowInfo",(function(){return ft})),i.d(s,"upsertMasterAction",(function(){return gt})),i.d(s,"upsertMasterSuccessAction",(function(){return Ot})),i.d(s,"openBulkUpdatePopup",(function(){return Ct})),i.d(s,"closeBulkUpdatePopup",(function(){return jt})),i.d(s,"bulkUpdateAction",(function(){return vt})),i.d(s,"bulkUpdateSuccessAction",(function(){return St})),i.d(s,"upsertMembershipAction",(function(){return Lt})),i.d(s,"removeMembershipAction",(function(){return yt})),i.d(s,"removeMembershipSuccessAction",(function(){return It})),i.d(s,"openUploadPopup",(function(){return Pt})),i.d(s,"closeUploadPopup",(function(){return kt})),i.d(s,"loadRoleList",(function(){return Vt})),i.d(s,"getRoleListSuccess",(function(){return Nt}));var a=i("ofXK"),o=i("3Pt+"),n=i("snw9"),c=i("kt0X"),r=i("WG3B"),l=i("xoAz"),p=i("wPo9"),d=i("7rOj"),u=i("+NQf"),b=i("6LsY"),h=i("l1P7"),m=i("v7zA"),f=i("7UZF"),g=i("hHe4"),O=i("1OXJ"),C=i("5hwk"),j=i("kKjH"),v=i("w8np"),S=i("7ChT"),L=i("vu/V"),y=i("tyNb"),I=i("XNiG"),P=i("itXk"),k=i("zP0r"),V=i("1G5W"),N=i("Kj3r"),W=i("pLZG"),F=i("LvDl");const E=Object(c.o)("[CpStaff] init this component"),D=Object(c.o)("[CpStaff] load position group list",Object(c.t)()),$=Object(c.o)("[CpStaff] load position group list success",Object(c.t)()),w=Object(c.o)("[CpStaff] load position group list failure",Object(c.t)()),_=Object(c.o)("[CpStaff] load position list",Object(c.t)()),U=Object(c.o)("[CpStaff] load position list success",Object(c.t)()),R=Object(c.o)("[CpStaff] load position list failure",Object(c.t)()),M=Object(c.o)("[CpStaff] load corporate dept list",Object(c.t)()),x=Object(c.o)("[CpStaff] load corporate dept list success",Object(c.t)()),A=Object(c.o)("[CpStaff] load corporate dept list failure",Object(c.t)()),Y=Object(c.o)("[CpStaff] load user status list"),B=Object(c.o)("[CpStaff] load user status list success",Object(c.t)()),K=Object(c.o)("[CpStaff] load country list"),T=Object(c.o)("[CpStaff] load country list success",Object(c.t)()),G=Object(c.o)("[CpStaff] load alliance list"),H=Object(c.o)("[CpStaff] load alliance list success",Object(c.t)()),z=Object(c.o)("[CpStaff] load user type list"),q=Object(c.o)("[CpStaff] load user type list success",Object(c.t)()),Q=Object(c.o)("[CpStaff] load comp list",Object(c.t)()),X=Object(c.o)("[CpStaff] get comp list success",Object(c.t)()),J=Object(c.o)("[CpStaff] load station list",Object(c.t)()),Z=Object(c.o)("[CpStaff] get station list success",Object(c.t)()),tt=Object(c.o)("[CpStaff] load category list",Object(c.t)()),et=Object(c.o)("[CpStaff] get category list success",Object(c.t)()),it=Object(c.o)("[CpStaff] load privacy list",Object(c.t)()),st=Object(c.o)("[CpStaff] get privacy list success",Object(c.t)()),at=Object(c.o)("[CpStaff] change search condition",Object(c.t)()),ot=Object(c.o)("[CpStaff] reload grid data list"),nt=Object(c.o)("[CpStaff] load grid data list",Object(c.t)()),ct=Object(c.o)("[CpStaff] get list success",Object(c.t)()),rt=Object(c.o)("[CpStaff] get list failure",Object(c.t)()),lt=Object(c.o)("[CpStaff] set grid state",Object(c.t)()),pt=Object(c.o)("[CpStaff] set grid check state",Object(c.t)()),dt=Object(c.o)("[CpStaff] change page index",Object(c.t)()),ut=Object(c.o)("[CpStaff] change page size",Object(c.t)()),bt=Object(c.o)("[CpStaff] \uc0c1\uc138\ud31d\uc5c5 \uc5f4\uae30"),ht=Object(c.o)("[CpStaff] \uc0c1\uc138\ud31d\uc5c5 \ub2eb\uae30"),mt=Object(c.o)("[CpStaff] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc120\ud0dd",Object(c.t)()),ft=Object(c.o)("[CpStaff] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc81c\uac70"),gt=Object(c.o)("[CpStaff] upsert master",Object(c.t)()),Ot=Object(c.o)("[CpStaff] upsert master success",Object(c.t)()),Ct=Object(c.o)("[CpStaff] \uc77c\uad04\ubcc0\uacbd \ud31d\uc5c5 \uc5f4\uae30"),jt=Object(c.o)("[CpStaff] \uc77c\uad04\ubcc0\uacbd \ud31d\uc5c5 \ub2eb\uae30"),vt=Object(c.o)("[CpStaff] bulk update",Object(c.t)()),St=Object(c.o)("[CpStaff] bulk update success",Object(c.t)()),Lt=Object(c.o)("[CpStaff] upsert membership",Object(c.t)()),yt=Object(c.o)("[CpStaff] remove membership",Object(c.t)()),It=Object(c.o)("[CpStaff] remove membership success"),Pt=Object(c.o)("[CpStaff] \uc5c5\ub85c\ub4dc \ud31d\uc5c5 \uc5f4\uae30"),kt=Object(c.o)("[CpStaff] \uc5c5\ub85c\ub4dc \ud31d\uc5c5 \ub2eb\uae30"),Vt=Object(c.o)("[CpStaff] load role list",Object(c.t)()),Nt=Object(c.o)("[CpStaff] get role list success",Object(c.t)());var Wt=i("EVqC");const Ft=Object(Wt.a)({selectId:t=>t.rowid,sortComparer:!1}),Et=Ft.getInitialState({positionGroupList:null,positionList:null,corporateDeptList:null,userStatusList:null,countryList:null,allianceList:null,userTypeList:null,loading:!1,reloadToggle:!1,searchCondition:null,otherSearchInfo:null,gridDataTotal:null,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},gridCheckedState:null,isOpenBulkUpdatePopup:null,isOpenDetailPopup:!1,isOpenUploadPopup:!1,selectedDetailRowInfo:null,removeMembershipSuccessYn:null,compCodeList:null,manageList:null,stationList:null,categoryList:null,roleList:null}),Dt=Object(c.q)(Et,Object(c.s)(s.initComponent,t=>Object.assign(Object.assign({},t),{loading:!1,reloadToggle:!1,selectedDetailRowInfo:null,isOpenDetailPopup:!1,isOpenBulkUpdatePopup:null})),Object(c.s)(s.getPrivacyInfoManageListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{manageList:e})),Object(c.s)(s.loadPositionGroupListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{positionGroupList:e})),Object(c.s)(s.loadPositionGroupListFailure,(t,{})=>Object.assign(Object.assign({},t),{positionGroupList:null})),Object(c.s)(s.loadPositionListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{positionList:e})),Object(c.s)(s.loadPositionListFailure,(t,{})=>Object.assign(Object.assign({},t),{positionList:null})),Object(c.s)(s.loadCorporateDeptListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{corporateDeptList:e})),Object(c.s)(s.loadCorporateDeptListFailure,(t,{})=>Object.assign(Object.assign({},t),{corporateDeptList:null})),Object(c.s)(s.loadUserStatusListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{userStatusList:e})),Object(c.s)(s.loadCountryListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{countryList:e})),Object(c.s)(s.loadAllianceListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{allianceList:e})),Object(c.s)(s.loadUserTypeListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{userTypeList:e})),Object(c.s)(s.compListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{compCodeList:e})),Object(c.s)(s.loadStationListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{stationList:e})),Object(c.s)(s.loadCategoryListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{categoryList:e})),Object(c.s)(s.getRoleListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{roleList:e})),Object(c.s)(s.reloadList,t=>Object.assign(Object.assign({},t),{reloadToggle:!t.reloadToggle})),Object(c.s)(s.changeSearchCondition,(t,{searchCondition:e,otherSearchInfo:i})=>Object.assign(Object.assign({},t),{searchCondition:e,otherSearchInfo:i})),Object(c.s)(s.loadList,t=>Object.assign(Object.assign({},t),{loading:!0})),Object(c.s)(s.getListSuccess,(t,{dataList:e,totalCount:i})=>Ft.setAll(e,Object.assign(Object.assign({},t),{loading:!1,gridDataTotal:i}))),Object(c.s)(s.getListFailure,t=>Object.assign(Object.assign({},t),{loading:!1})),Object(c.s)(s.setGridStateAction,(t,{gridState:e})=>Object.assign(Object.assign({},t),{gridState:e})),Object(c.s)(s.setGridCheckStateAction,(t,{gridCheckedState:e})=>Object.assign(Object.assign({},t),{gridCheckedState:e})),Object(c.s)(s.changePageSize,(t,{pageSize:e})=>Object.assign(Object.assign({},t),{gridState:F.set(F.cloneDeep(t.gridState),["pageInfo","take"],e)})),Object(c.s)(s.changePageIndex,(t,{pageIndex:e})=>Object.assign(Object.assign({},t),{gridState:F.set(F.cloneDeep(t.gridState),["pageInfo","skip"],e)})),Object(c.s)(s.openDetailPopup,t=>Object.assign(Object.assign({},t),{isOpenDetailPopup:!0})),Object(c.s)(s.closeDetailPopup,t=>Object.assign(Object.assign({},t),{isOpenDetailPopup:!1})),Object(c.s)(s.addSelectedDetailRowInfo,(t,{selectedDetailRowInfo:e})=>Object.assign(Object.assign({},t),{selectedDetailRowInfo:e})),Object(c.s)(s.delSelectedDetailRowInfo,t=>Object.assign(Object.assign({},t),{selectedDetailRowInfo:null})),Object(c.s)(s.openBulkUpdatePopup,t=>Object.assign(Object.assign({},t),{isOpenBulkUpdatePopup:!0})),Object(c.s)(s.closeBulkUpdatePopup,t=>Object.assign(Object.assign({},t),{isOpenBulkUpdatePopup:!1})),Object(c.s)(s.openUploadPopup,t=>Object.assign(Object.assign({},t),{isOpenUploadPopup:!0})),Object(c.s)(s.closeUploadPopup,t=>Object.assign(Object.assign({},t),{isOpenUploadPopup:!1})),Object(c.s)(s.upsertMasterSuccessAction,(t,{dataResult:e})=>Ft.upsertOne(e,t)),Object(c.s)(s.removeMembershipSuccessAction,t=>Object.assign(Object.assign({},t),{removeMembershipSuccessYn:!t.removeMembershipSuccessYn})));function $t(t,e){return Object(c.m)({cpStaffList:Dt})(t,e)}const wt=Object(c.p)("cpStaff"),_t=Object(c.r)(wt,t=>t.cpStaffList),Ut=Object(c.r)(_t,t=>t.positionGroupList),Rt=Object(c.r)(_t,t=>t.positionList),Mt=Object(c.r)(_t,t=>t.corporateDeptList),xt=Object(c.r)(_t,t=>t.userStatusList),At=Object(c.r)(_t,t=>t.countryList),Yt=Object(c.r)(_t,t=>t.allianceList),Bt=Object(c.r)(_t,t=>t.userTypeList),Kt=Object(c.r)(_t,t=>t.manageList),Tt=Object(c.r)(_t,t=>t.loading),Gt=Object(c.r)(_t,t=>t.reloadToggle),Ht=Object(c.r)(_t,t=>t.searchCondition),zt=Object(c.r)(_t,t=>t.otherSearchInfo),qt=Object(c.r)(_t,t=>t.compCodeList),Qt=Object(c.r)(_t,t=>t.stationList),Xt=Object(c.r)(_t,t=>t.categoryList),Jt=Object(c.r)(_t,t=>t.roleList),Zt=Ft.getSelectors(_t).selectAll,te=Object(c.r)(_t,t=>t.gridState),ee=Object(c.r)(_t,t=>t.gridCheckedState),ie=Object(c.r)(_t,t=>t.gridDataTotal),se=Object(c.r)(te,t=>F.get(t,["pageInfo","take"],20)),ae=Object(c.r)(_t,t=>t.isOpenDetailPopup),oe=Object(c.r)(_t,t=>t.selectedDetailRowInfo),ne=Object(c.r)(_t,t=>t.isOpenBulkUpdatePopup),ce=Object(c.r)(_t,t=>t.isOpenUploadPopup),re=Object(c.r)(_t,t=>t.removeMembershipSuccessYn);var le=i("AytR");const{API_URL:pe}=le.a,de={postCommonDetail:`${pe}/common/detail-code`,postCommonCountry:`${pe}/admin/common/country`,postPositionGroup:`${pe}/admin/corporate/position-group`,postPositionList:`${pe}/admin/user/comp/basis`,postCorporateDept:`${pe}/admin/corporate/dept`,postCountryList:`${pe}/admin/common/country`,postDepartmentList:`${pe}/admin/corporate/dept`,postCorporateStaff:`${pe}/admin/user/control/staff`,putCorporateStaff:`${pe}/admin/user/control/staff`,putBundleUpdate:`${pe}/admin/corporate/staff/bundle-update`,putUpload:`${pe}/admin/corporate/staff/upload`,putMembership:`${pe}/admin/user/membership`,deleteMembership:`${pe}/control/us/user-membership-card`,templateDownload:`${pe}/admin/file/download/userList`,postComp:`${pe}/common/comp`,selectRoleSeqs:`${pe}/admin/basis/role`};var ue=i("fXoL"),be=i("pfiq"),he=i("LRne"),me=i("z6cu"),fe=i("eIep"),ge=i("tpT/");let Oe=(()=>{class t{constructor(t){this.api=t}getDetailCode(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(de.postCommonDetail,e).pipe(Object(fe.a)(t=>t.succeedYn&&t.result?Object(he.a)(t.result.list):Object(me.a)(t||"api response error")))}getPositionGroupList(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(de.postPositionGroup,e).pipe(Object(fe.a)(t=>t.succeedYn&&t.result?Object(he.a)(t.result.list):Object(me.a)(t||"api response error")))}getCorporateDeptList(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(de.postCorporateDept,e).pipe(Object(fe.a)(t=>t.succeedYn&&t.result?Object(he.a)(t.result.list):Object(me.a)(t||"api response error")))}getPositionList(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(de.postPositionList,e).pipe(Object(fe.a)(t=>t.succeedYn&&t.result?Object(he.a)(t.result.list):Object(me.a)(t||"api response error")))}getCountryList(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(de.postCommonCountry,e).pipe(Object(fe.a)(t=>t.succeedYn&&t.result?Object(he.a)(t.result.list):Object(me.a)(t||"api response error")))}getList(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(de.postCorporateStaff,e).pipe(Object(fe.a)(t=>{if(t.succeedYn&&t.result){const{list:e,totalCount:i}=t.result,s=this._addRowid(e);return Object(he.a)({dataList:s,totalCount:i})}return Object(me.a)(t||"api response error")}))}getRoleList(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(de.selectRoleSeqs,e).pipe(Object(fe.a)(t=>t.succeedYn?Object(he.a)(t.result.list):Object(me.a)(t||"api response error")))}upsertItem(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.put(de.putCorporateStaff,e).pipe(Object(fe.a)(t=>t.succeedYn&&t.result?Object(he.a)(t.result):Object(me.a)(t||"api response error")))}getCompList(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.post(de.postComp,e).pipe(Object(fe.a)(t=>{if(t.succeedYn&&t.result){const e=t.result.list;return Object(he.a)(e)}return Object(me.a)(t||"api response error")}))}bulkUpdate(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.put(de.putBundleUpdate,e).pipe(Object(fe.a)(t=>t.succeedYn&&t.result?Object(he.a)(!0):Object(me.a)(t||"api response error")))}upsertMembership(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.put(de.putMembership,e).pipe(Object(fe.a)(t=>t.succeedYn&&t.result?Object(he.a)(t.result.airlineMemberships):Object(me.a)(t||"api response error")))}removeMembership(t){const e=F.assign({},this.api.defaultParams,{condition:t});return this.api.delete(de.deleteMembership,e).pipe(Object(fe.a)(t=>t.succeedYn&&t.result?Object(he.a)(t.result):Object(me.a)(t||"api response error")))}_addRowid(t){return F.isNil(t)?[]:t.map((t,e)=>Object.assign(Object.assign({},t),{rowid:String(e)}))}}return t.\u0275fac=function(e){return new(e||t)(ue.bc(ge.a))},t.\u0275prov=ue.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ce=(()=>{class t{constructor(t){this.fb=t,this.generateGridColumns=()=>[{field:"userNo",title:"User No."},{field:"compCode",title:"Comp Code"},{field:"staffNo",title:"Staff No."},{field:"userStatusName",title:"User Status"},{field:"name",title:"User Name"},{field:"userId",title:"ID"},{field:"deptName",title:"Dep. Name"},{field:"positionName",title:"Position Name"},{field:"roleSeq",title:"Role SEQ"},{field:"roleName",title:"Role Name"},{field:"inChargeStationTypeName",title:"In Charge Station"},{field:"inChargeCategoryName",title:"In Charge Category"},{field:"countryPhoneCode",title:"Country Phone No."},{field:"compPhoneNo",title:"Comp. Phone No."},{field:"emailAddress",title:"Email Address"},{field:"privacyInfoManageName",title:"Privacy Info Manage"},{field:"manageUserYn",title:"Manage User YN",template:"ynTpl",style:{"text-align":"center"}},{field:"ipAddress",title:"IP Address"},{field:"controlRemark",title:"Control Remark"},{field:"lastUpdateName",title:"Last Update User"},{field:"lastUpdateDatetime",title:"Last Update Time",style:{"text-align":"center"}}],this.generateSearchForm=()=>this.fb.group({compCode:[null,[o.z.required]],userNo:[null],name:[null],deptCode:[null],userStatusCode:[null],roleSeq:[null],privacyInfoManageCode:[null],manageUserYn:[null]}),this.initSearchFormDataCondition=()=>({compCode:11e4,userNo:null,name:null,deptCode:null,userStatusCode:null,roleSeq:null,privacyInfoManageCode:null,manageUserYn:null}),this.generateMasterPutForm=()=>this.fb.group({userNo:[null],compCode:[null,[o.z.required]],onlineOrOffline:["F"],userTypeCode:["U01"],userStatusCode:[null,[o.z.required]],name:[null,[o.z.required]],lastName:[null],middleName:[null],firstName:[null],userId:[null,[o.z.required]],userPassword:[null,[o.z.required]],compPhoneNo:[null],mobileNo:[null],emailAddress:[null,[o.z.required]],deptCode:[null,[o.z.required]],positionCode:[null,[o.z.required]],manageUserYn:[null,[o.z.required]],controlRemark:[null],countryPhoneCode:[null],ipAddress:[null],staffNo:[null],positionName:[null],inChargeStationTypeCode:[null],inChargeCategoryCode:[null],privacyInfoManageCode:[null,[o.z.required]],roleSeq:[null,[o.z.required]],lockYn:[null]}),this.initMasterPutFormDataCondition=()=>({userNo:null,compCode:null,onlineOrOffline:"F",userTypeCode:"U01",userStatusCode:null,name:null,lastName:null,middleName:null,firstName:null,userId:null,userPassword:null,compPhoneNo:null,mobileNo:null,emailAddress:null,deptCode:null,positionCode:null,manageUserYn:!1,controlRemark:null,countryPhoneCode:null,ipAddress:"1",staffNo:null,positionName:null,inChargeStationTypeCode:null,inChargeCategoryCode:null,privacyInfoManageCode:null,roleSeq:null,lockYn:!1}),this.generateBulkUpdateForm=()=>this.fb.group({roleSeq:[null,[o.z.required]]}),this.initBulkUpdateFormDataCondition=()=>({roleSeq:null}),this.generateMembershipPutForm=()=>this.fb.group({airlineMemberships:this.fb.array([])}),this.initMembershipPutFormData=()=>({airlineMemberships:[this.initMembershipItemPutFormData()]}),this.generateMembershipItemPutForm=()=>this.fb.group({rowid:[null],userNo:[null],airlineCode:[null,[o.z.required]],membershipNo:[null,[o.z.required]],useYn:[!0]}),this.initMembershipItemPutFormData=()=>({userNo:null,rowid:null,airlineCode:null,membershipNo:null,useYn:!0})}}return t.\u0275fac=function(e){return new(e||t)(ue.bc(o.f))},t.\u0275prov=ue.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var je=i("+Sob"),ve=i("U6NN"),Se=i("gbCm"),Le=i("nMd8");const ye=function(){return[0,5]},Ie=function(t,e){return{compCode:t,compBasisCodeType:"COB01",limits:e}},Pe=function(){return["compBasisCodeValue","compBasisCodeNameEn"]};let ke=(()=>{class t{constructor(t){this._dataService=t,this.fetchPositionGroupEvent=new ue.n,this.fetchPositionEvent=new ue.n,this.fetchCorporateDeptEvent=new ue.n,this.clickSearchEvent=new ue.n,this.clickResetEvent=new ue.n,this.useYnOptions=[{label:"Y",value:!0},{label:"N",value:!1}],this.isShowmore=!1,this._$unsubscribe=new I.a,this.searchForm=this._dataService.generateSearchForm()}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(t){this._otherSearchInfo=t,this._setOtherSearchInfo(t)}get searchCondition(){return this._searchCondition}set searchCondition(t){this._searchCondition=t,this.searchFormData=this._setSearchFormData(t)}get searchFormValid(){return this.searchForm.valid}get formValue(){return this.searchForm&&this.searchForm.value}ngOnInit(){this._initDetailSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.searchForm.invalid)return void(this._checkValid=!0);const t=this.setSearchCondition(),e=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:t,otherSearchInfo:e}),this._checkValid=!1}checkIsInvalid(t){return this._checkValid&&this.searchForm.get(t)&&this.searchForm.get(t).invalid}setSearchCondition(){const t=Object.assign({},this.searchForm.value);return F.omitBy(t,F.isNil)}_setOtherSearchInfo(t){this.deptNameInput=(null==t?void 0:t.deptName)||null,this.travelerNameInput=(null==t?void 0:t.travelerNameInput)||null}_setSearchFormData(t){return F.isEmpty(t)?this._dataService.initSearchFormDataCondition():t}_setOtherSearchCondition(){const t={};return this.autoCompletes.forEach(e=>{Object.assign(t,e.getInputValue())}),t}_initDetailSubscription(){}}return t.\u0275fac=function(e){return new(e||t)(ue.Qb(Ce))},t.\u0275cmp=ue.Kb({type:t,selectors:[["app-cp-staff-search"]],viewQuery:function(t,e){var i;1&t&&ue.Xc(be.a,!0),2&t&&ue.Dc(i=ue.gc())&&(e.autoCompletes=i)},inputs:{userStatusList:"userStatusList",compCodeList:"compCodeList",manageList:"manageList",roleList:"roleList",otherSearchInfo:"otherSearchInfo",searchCondition:"searchCondition"},outputs:{fetchPositionGroupEvent:"fetchPositionGroupEvent",fetchPositionEvent:"fetchPositionEvent",fetchCorporateDeptEvent:"fetchCorporateDeptEvent",clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:38,vars:21,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-1"],[1,"form-label"],["dataKey","compCode","displayKey","compName","formControlName","compCode",1,"flex-fill",3,"useAllOptionYn","options"],["formControlName","name","placeholder","Name",1,"flex-fill"],["formControlName","deptCode","apiUrl","admin/user/comp/basis","dataKey","compBasisCodeValue","inputFieldFormat","{0} - &{1}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","isInvalid","apiSearchTerm","apiCondition","inputFieldFormatKeyList"],["dataKey","detailCode","displayWord","detailCodeName","formControlName","userStatusCode",1,"flex-fill",3,"options"],["dataKey","detailCode","displayWord","detailCodeName","formControlName","privacyInfoManageCode",1,"flex-fill",3,"options"],["dataKey","roleSeq","displayWord","roleName","formControlName","roleSeq",1,"flex-fill",3,"options"],["formControlName","manageUserYn",1,"d-inline-flex","flex-fill",3,"options"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(t,e){1&t&&(ue.Wb(0,"form",0),ue.fc("ngSubmit",(function(){return e.onSubmit()})),ue.Wb(1,"div",1),ue.Wb(2,"div",2),ue.Wb(3,"div",3),ue.Wb(4,"span",4),ue.Wb(5,"sup"),ue.Pc(6,"Control Comp Code"),ue.Vb(),ue.Vb(),ue.Rb(7,"app-selectbox",5),ue.Vb(),ue.Wb(8,"div",3),ue.Wb(9,"span",4),ue.Pc(10,"Staff Name"),ue.Vb(),ue.Rb(11,"app-input-text",6),ue.Vb(),ue.Wb(12,"div",3),ue.Wb(13,"span",4),ue.Pc(14,"Dep. Name"),ue.Vb(),ue.Rb(15,"app-auto-complete",7),ue.Vb(),ue.Wb(16,"div",3),ue.Wb(17,"span",4),ue.Pc(18,"User Status"),ue.Vb(),ue.Rb(19,"app-selectbox-detailcode",8),ue.Vb(),ue.Vb(),ue.Wb(20,"div",2),ue.Wb(21,"div",3),ue.Wb(22,"span",4),ue.Pc(23,"Privacy Info Manage"),ue.Vb(),ue.Rb(24,"app-selectbox-detailcode",9),ue.Vb(),ue.Wb(25,"div",3),ue.Wb(26,"span",4),ue.Pc(27,"Role"),ue.Vb(),ue.Rb(28,"app-selectbox-detailcode",10),ue.Vb(),ue.Wb(29,"div",3),ue.Wb(30,"span",4),ue.Pc(31,"Manage User YN"),ue.Vb(),ue.Rb(32,"app-selectbox",11),ue.Vb(),ue.Vb(),ue.Vb(),ue.Wb(33,"div",12),ue.Wb(34,"button",13),ue.Pc(35,"Search"),ue.Vb(),ue.Wb(36,"button",14),ue.fc("click",(function(){return e.clickResetEvent.emit()})),ue.Pc(37,"Reset"),ue.Vb(),ue.Vb(),ue.Vb()),2&t&&(ue.pc("formGroup",e.searchForm)("connectForm",e.searchFormData),ue.Cb(7),ue.Gb("valid-error",e.checkIsInvalid("compCode")),ue.pc("useAllOptionYn",!1)("options",e.compCodeList),ue.Cb(8),ue.pc("inputFieldValue",e.deptNameInput)("inputId","deptName")("isInvalid",e.checkIsInvalid("deptCode"))("apiSearchTerm","compBasisCodeName")("apiCondition",ue.vc(17,Ie,e.searchForm.get("compCode").value||11e4,ue.tc(16,ye)))("inputFieldFormatKeyList",ue.tc(20,Pe)),ue.Cb(4),ue.pc("options",e.userStatusList),ue.Cb(5),ue.pc("options",e.manageList),ue.Cb(4),ue.pc("options",e.roleList),ue.Cb(4),ue.pc("options",e.useYnOptions))},directives:[o.B,o.s,o.k,je.a,ve.a,o.r,o.i,Se.a,be.a,Le.a],encapsulation:2,changeDetection:0}),t})();var Ve=i("Vwqj"),Ne=i("EsKh");let We=(()=>{class t{constructor(t){this.alertService=t,this.clickAddEvent=new ue.n,this.clickBulkUpdateEvent=new ue.n,this.clickUploadEvent=new ue.n,this.changePageSizeEvent=new ue.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}get accept(){return Ve.a.excel()}ngOnInit(){}onChangePageSize(t){this.changePageSizeEvent.emit(t.value)}}return t.\u0275fac=function(e){return new(e||t)(ue.Qb(Ne.a))},t.\u0275cmp=ue.Kb({type:t,selectors:[["app-cp-staff-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount",fileButtonDisabled:"fileButtonDisabled"},outputs:{clickAddEvent:"clickAddEvent",clickBulkUpdateEvent:"clickBulkUpdateEvent",clickUploadEvent:"clickUploadEvent",changePageSizeEvent:"changePageSizeEvent"},decls:8,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(t,e){1&t&&(ue.Wb(0,"div",0),ue.Wb(1,"strong",1),ue.Pc(2),ue.Vb(),ue.Wb(3,"div",2),ue.Wb(4,"button",3),ue.fc("click",(function(){return e.clickAddEvent.emit()})),ue.Pc(5,"New"),ue.Vb(),ue.Wb(6,"div",4),ue.Wb(7,"app-selectbox",5),ue.fc("onChange",(function(t){return e.onChangePageSize(t)})),ue.Vb(),ue.Vb(),ue.Vb(),ue.Vb()),2&t&&(ue.Cb(2),ue.Qc(e.loading?"":e.totalCount),ue.Cb(5),ue.pc("options",e.pageSizeOptions)("ngModel",e.currentPageSize)("useAllOptionYn",!1))},directives:[ve.a,o.r,o.u],encapsulation:2,changeDetection:0}),t})(),Fe=(()=>{class t{constructor(t,e){this._dataService=t,this.alertService=e,this.submitEvent=new ue.n,this.closeEvent=new ue.n,this.putForm=this._dataService.generateBulkUpdateForm(),this.putFormData=this._dataService.initBulkUpdateFormDataCondition()}onSubmit(){this.putForm.invalid?this._checkValid=!0:(this.submitEvent.emit(this.putForm.value),this._checkValid=!1)}checkIsInvalid(t){return this._checkValid&&this.putForm.get(t)&&this.putForm.get(t).invalid}}return t.\u0275fac=function(e){return new(e||t)(ue.Qb(Ce),ue.Qb(Ne.a))},t.\u0275cmp=ue.Kb({type:t,selectors:[["app-cp-staff-bulk"]],inputs:{roleList:"roleList",positionList:"positionList",userStatusList:"userStatusList"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:20,vars:4,consts:[[1,"modal-body"],[1,"table","table-bordered",3,"formGroup","connectForm"],["width","130px"],["scope","row",1,"th-bg"],["formControlName","roleSeq","dataKey","roleSeq","displayWord","roleName",3,"options","isInvalid"],[1,"button-area","align-r","mt10"],["type","button",1,"btn","btn-secondary","sm",3,"click"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(t,e){1&t&&(ue.Wb(0,"div",0),ue.Wb(1,"form",1),ue.Wb(2,"table"),ue.Wb(3,"caption"),ue.Pc(4," Modify Roles in Bulk "),ue.Vb(),ue.Wb(5,"colgroup"),ue.Rb(6,"col",2),ue.Rb(7,"col"),ue.Vb(),ue.Wb(8,"tbody"),ue.Wb(9,"tr"),ue.Wb(10,"th",3),ue.Pc(11,"Role"),ue.Rb(12,"sup"),ue.Vb(),ue.Wb(13,"td"),ue.Rb(14,"app-selectbox-detailcode",4),ue.Vb(),ue.Vb(),ue.Vb(),ue.Vb(),ue.Vb(),ue.Wb(15,"div",5),ue.Wb(16,"button",6),ue.fc("click",(function(){return e.onSubmit()})),ue.Pc(17,"Save"),ue.Vb(),ue.Wb(18,"button",7),ue.fc("click",(function(){return e.closeEvent.emit()})),ue.Pc(19,"Close"),ue.Vb(),ue.Vb(),ue.Vb()),2&t&&(ue.Cb(1),ue.pc("formGroup",e.putForm)("connectForm",e.putFormData),ue.Cb(13),ue.pc("options",e.roleList)("isInvalid",e.checkIsInvalid("roleSeq")))},directives:[o.B,o.s,o.k,je.a,Le.a,o.r,o.i],encapsulation:2,changeDetection:0}),t})();var Ee=i("BA+4");let De=(()=>{class t{constructor(t){this.alertService=t,this.downloadEvent=new ue.n,this.uploadEvent=new ue.n,this.closeEvent=new ue.n}get accept(){return Ve.a.excel()}onFileError(t){alert(t)}onFileSelect({files:t,isInvalid:e}){this._file=null,t.length>0&&!e?this._file=t[0]:this.alertService.alert("It is not a valid file.")}onUpload(){this._file?this.uploadEvent.emit(this._file):this.alertService.alert("\ud30c\uc77c\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694.")}onClose(){this.closeEvent.emit()}}return t.\u0275fac=function(e){return new(e||t)(ue.Qb(Ne.a))},t.\u0275cmp=ue.Kb({type:t,selectors:[["app-cp-staff-upload"]],outputs:{downloadEvent:"downloadEvent",uploadEvent:"uploadEvent",closeEvent:"closeEvent"},decls:35,vars:2,consts:[[1,"table","table-bordered","mb10"],["width","11%"],["width","45%"],["width","16%"],["colspan","4"],[1,"btn","btn-secondary","sm",3,"click"],["scope","row",1,"th-bg"],["colspan","3"],["chooseLabel","\uc5c5\ub85c\ub4dc \ud560 \ud30c\uc77c\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694",3,"maxFileSize","accept","onError","onSelect"],[1,"color-danger"],[1,"button-area","d-flex","justify-content-end","mt10"],[1,"btn","btn-primary","sm",3,"click"],[1,"btn","btn-light","sm",3,"click"]],template:function(t,e){1&t&&(ue.Wb(0,"div",0),ue.Wb(1,"table"),ue.Wb(2,"caption"),ue.Pc(3," \uae30\uc5c5\uccb4 \uc9c1\uc6d0 \uc5d1\uc140\ub85c \ub4f1\ub85d\ud558\uae30 "),ue.Vb(),ue.Wb(4,"colgroup"),ue.Rb(5,"col",1),ue.Rb(6,"col",2),ue.Rb(7,"col",3),ue.Rb(8,"col"),ue.Vb(),ue.Wb(9,"tbody"),ue.Wb(10,"tr"),ue.Wb(11,"td",4),ue.Wb(12,"div"),ue.Pc(13,"\uc544\ub798 \uc5c5\ub85c\ub4dc \uc0d8\ud50c\ud30c\uc77c\uc744 \ubc18\ub4dc\uc2dc \ud655\uc778\ud558\uc2dc\uace0, \ud574\ub2f9 \uc591\uc2dd\uc5d0 \ub9de\ucd94\uc5b4 \uc5d1\uc140 \ud30c\uc77c\ub85c \ub4f1\ub85d\ud558\uc5ec \uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."),ue.Vb(),ue.Wb(14,"button",5),ue.fc("click",(function(){return e.downloadEvent.emit()})),ue.Pc(15,"\uc0d8\ud50c \ub2e4\uc6b4\ub85c\ub4dc"),ue.Vb(),ue.Vb(),ue.Vb(),ue.Wb(16,"tr"),ue.Wb(17,"th",6),ue.Pc(18,"\ud30c\uc77c\ub4f1\ub85d"),ue.Vb(),ue.Wb(19,"td",7),ue.Wb(20,"app-file-upload",8),ue.fc("onError",(function(t){return e.onFileError(t)}))("onSelect",(function(t){return e.onFileSelect(t)})),ue.Vb(),ue.Vb(),ue.Vb(),ue.Wb(21,"tr"),ue.Wb(22,"td",4),ue.Wb(23,"div",9),ue.Pc(24," \u203b \ub4f1\ub85d \uac00\ub2a5\ud55c \ud30c\uc77c \uc5ec\ubd80\ub97c \ubc18\ub4dc\uc2dc \ud655\uc778\ud558\uc5ec \uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4. \ub4f1\ub85d\uac00\ub2a5 \ud30c\uc77c \ud615\ud0dc : *.xls, *.xlsx"),ue.Rb(25,"br"),ue.Pc(26," \u203b \ucd5c\ub300 2MB \uc774\ub0b4\uc758 \ud30c\uc77c\ub9cc \ub4f1\ub85d \uac00\ub2a5\ud569\ub2c8\ub2e4."),ue.Rb(27,"br"),ue.Pc(28," \u203b \uc5d1\uc140\ud30c\uc77c 1\ud68c \uc5c5\ub85c\ub4dc\uc2dc \ucd5c\ub300 5,000\uac1c \uae4c\uc9c0\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4."),ue.Rb(29,"br"),ue.Vb(),ue.Vb(),ue.Vb(),ue.Vb(),ue.Vb(),ue.Vb(),ue.Wb(30,"div",10),ue.Wb(31,"button",11),ue.fc("click",(function(){return e.onUpload()})),ue.Pc(32,"\uc800\uc7a5"),ue.Vb(),ue.Wb(33,"button",12),ue.fc("click",(function(){return e.onClose()})),ue.Pc(34,"\ub2eb\uae30"),ue.Vb(),ue.Vb()),2&t&&(ue.Cb(20),ue.pc("maxFileSize",2e6)("accept",e.accept))},directives:[Ee.a],encapsulation:2,changeDetection:0}),t})();var $e=i("Onn4");const we=function(t){return{compCode:t,compBasisCodeType:"COB01"}},_e=function(){return["compBasisCodeValue","compBasisCodeNameEn"]},Ue=function(t){return{compCode:t,compBasisCodeType:"COB02"}};let Re=(()=>{class t{constructor(t,e){this._dataService=t,this.alertService=e,this.resetPasswordEvent=new ue.n,this.sendEmailEvent=new ue.n,this.submitEvent=new ue.n,this._$unsubscribe=new I.a,this.putForm=this._dataService.generateMasterPutForm(),this.putFormData=this._dataService.initMasterPutFormDataCondition}get masterItem(){return this._masterItem}set masterItem(t){this._masterItem=t,this.putFormData=this._setPutFormData(t),t&&this.putForm.setValue(this.putFormData),this._initThisState(t),this.isNewAdd||(this.deptNameInput=t.deptName,this.positionNameInput=t.positionName,this.putForm.get("userPassword").disable(),this.putForm.get("compCode").disable())}get isNewAdd(){return F.isEmpty(this.masterItem)}ngAfterContentInit(){this._initSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSendPassword(){this.alertService.alert("\uc900\ube44\uc911\uc785\ub2c8\ub2e4")}onSendEmail(){this.alertService.alert("\uc900\ube44\uc911\uc785\ub2c8\ub2e4")}onSubmit(){if(this.putForm.invalid)return this._checkValid=!0,void Object.keys(this.putForm.controls).forEach(t=>{this.putForm.controls[t].invalid&&console.error(t+" is invalid")});const t=this._setPutCondition();this.submitEvent.emit(t),this._checkValid=!1}checkIsInvalid(t){return this._checkValid&&this.putForm.get(t)&&this.putForm.get(t).invalid}_setPutFormData(t){const e=Object.assign(this._dataService.initMasterPutFormDataCondition());return F.isNil(t)?e:Object.assign({},e,F.pick(t,Object.keys(e)))}_setPutCondition(){const t=this._dataService.initMasterPutFormDataCondition(),e=this.putForm.value;return e.positionName=void 0,this.putFormData.compCode&&(e.compCode=this.putFormData.compCode,e.userId=this.putFormData.userId,e.userNo=this.putFormData.userNo),e.ipAddress||(e.ipAddress="1"),Object.assign({},F.pick(e,Object.keys(t)))}_initThisState(t){this.putForm.get("userNo").disable(),t&&this.putForm.get("userId").disable()}_initSubscription(){}}return t.\u0275fac=function(e){return new(e||t)(ue.Qb(Ce),ue.Qb(Ne.a))},t.\u0275cmp=ue.Kb({type:t,selectors:[["app-cp-staff-master"]],inputs:{corporateInfo:"corporateInfo",positionList:"positionList",corporateDeptList:"corporateDeptList",userStatusList:"userStatusList",countryList:"countryList",allianceList:"allianceList",userTypeList:"userTypeList",compCodeList:"compCodeList",stationList:"stationList",categoryList:"categoryList",roleList:"roleList",manageList:"manageList",masterItem:"masterItem"},outputs:{resetPasswordEvent:"resetPasswordEvent",sendEmailEvent:"sendEmailEvent",submitEvent:"submitEvent"},decls:130,vars:47,consts:[[1,"table","table-bordered","mb10",3,"formGroup","connectForm"],["width","13%"],["scope","row",1,"th-bg"],["formControlName","userNo",3,"isInvalid"],["formControlName","userId",3,"isInvalid"],["formControlName","userStatusCode","dataKey","detailCode","displayWord","detailCodeName","useAllOptionName","Select",3,"options","isInvalid"],["formControlName","compCode","dataKey","compCode","displayKey","compName","useAllOptionName","Select",3,"options","isInvalid"],["formControlName","staffNo",3,"isInvalid"],["formControlName","name",3,"isInvalid"],[1,"form-group"],["formControlName","lastName","placeholder","Last Name(EN)",3,"inputFormat","isInvalid"],[1,"dash"],["formControlName","firstName","inputFormat","uppserCaseEnOnly","placeholder","First Name(EN)",2,"flex","2 1",3,"isInvalid"],["formControlName","deptCode","apiUrl","admin/user/comp/basis","dataKey","compBasisCodeValue","inputFieldFormat","{0} - &{1}","placeholder","Name",3,"inputFieldValue","isInvalid","apiSearchTerm","apiCondition","inputFieldFormatKeyList"],["formControlName","positionCode","apiUrl","admin/user/comp/basis","dataKey","compBasisCodeValue","inputFieldFormat","{0} - &{1}","placeholder","Name",3,"inputFieldValue","inputId","apiSearchTerm","apiCondition","inputFieldFormatKeyList","isInvalid"],["formControlName","countryPhoneCode","inputFormat","numberOnly","placeholder","e.g. 82",3,"isInvalid"],["formControlName","compPhoneNo","inputFormat","numberOnly",3,"isInvalid"],["formControlName","mobileNo","inputFormat","numberOnly",3,"isInvalid"],["formControlName","emailAddress",2,"flex","2 1",3,"isInvalid"],["formControlName","inChargeStationTypeCode","dataKey","detailCode","displayWord","detailCodeName","useAllOptionName","Select",3,"options","isInvalid"],["formControlName","inChargeCategoryCode","dataKey","detailCode","displayWord","detailCodeName","useAllOptionName","Select",3,"options","isInvalid"],["formControlName","roleSeq","dataKey","roleSeq","useAllOptionName","Select","displayWord","roleName",1,"flex-fill",3,"options","isInvalid"],["formControlName","privacyInfoManageCode","dataKey","detailCode","useAllOptionName","Select","displayWord","detailCodeName",1,"flex-fill",3,"options","isInvalid"],["formControlName","manageUserYn","name","manageUserYn","label","Y",3,"value"],["formControlName","manageUserYn","name","manageUserYn","label","N",3,"value"],["formControlName","userPassword",2,"flex","2 1",3,"isInvalid"],["formControlName","controlRemark",3,"isInvalid"],[1,"button-area","align-r","mt10"],["type","button",1,"btn","btn-secondary","sm",3,"click"]],template:function(t,e){1&t&&(ue.Wb(0,"form",0),ue.Wb(1,"table"),ue.Wb(2,"caption"),ue.Pc(3," Control Staff Info "),ue.Vb(),ue.Wb(4,"colgroup"),ue.Rb(5,"col",1),ue.Vb(),ue.Wb(6,"tbody"),ue.Wb(7,"tr"),ue.Wb(8,"th",2),ue.Wb(9,"sup"),ue.Pc(10,"User No."),ue.Vb(),ue.Vb(),ue.Wb(11,"td"),ue.Rb(12,"app-input-text",3),ue.Vb(),ue.Vb(),ue.Wb(13,"tr"),ue.Wb(14,"th",2),ue.Wb(15,"sup"),ue.Pc(16,"User ID"),ue.Vb(),ue.Vb(),ue.Wb(17,"td"),ue.Rb(18,"app-input-text",4),ue.Vb(),ue.Vb(),ue.Wb(19,"tr"),ue.Wb(20,"th",2),ue.Wb(21,"sup"),ue.Pc(22,"User Status"),ue.Vb(),ue.Vb(),ue.Wb(23,"td"),ue.Rb(24,"app-selectbox-detailcode",5),ue.Vb(),ue.Vb(),ue.Wb(25,"tr"),ue.Wb(26,"th",2),ue.Wb(27,"sup"),ue.Pc(28,"Control Comp"),ue.Vb(),ue.Vb(),ue.Wb(29,"td"),ue.Rb(30,"app-selectbox",6),ue.Vb(),ue.Vb(),ue.Wb(31,"tr"),ue.Wb(32,"th",2),ue.Pc(33,"Staff No."),ue.Vb(),ue.Wb(34,"td"),ue.Rb(35,"app-input-text",7),ue.Vb(),ue.Vb(),ue.Wb(36,"tr"),ue.Wb(37,"th",2),ue.Wb(38,"sup"),ue.Pc(39,"User Name"),ue.Vb(),ue.Vb(),ue.Wb(40,"td"),ue.Rb(41,"app-input-text",8),ue.Vb(),ue.Vb(),ue.Wb(42,"tr"),ue.Wb(43,"th",2),ue.Pc(44,"User Name (EN)"),ue.Vb(),ue.Wb(45,"td"),ue.Wb(46,"div",9),ue.Rb(47,"app-input-text",10),ue.Wb(48,"span",11),ue.Pc(49,"/"),ue.Vb(),ue.Rb(50,"app-input-text",12),ue.Vb(),ue.Vb(),ue.Vb(),ue.Wb(51,"tr"),ue.Wb(52,"th",2),ue.Wb(53,"sup"),ue.Pc(54,"Dep. Name"),ue.Vb(),ue.Vb(),ue.Wb(55,"td"),ue.Rb(56,"app-auto-complete",13),ue.Vb(),ue.Vb(),ue.Wb(57,"tr"),ue.Wb(58,"th",2),ue.Wb(59,"sup"),ue.Pc(60,"Position Name"),ue.Vb(),ue.Vb(),ue.Wb(61,"td"),ue.Rb(62,"app-auto-complete",14),ue.Vb(),ue.Vb(),ue.Wb(63,"tr"),ue.Wb(64,"th",2),ue.Pc(65,"Country Phone No."),ue.Vb(),ue.Wb(66,"td"),ue.Rb(67,"app-input-text",15),ue.Vb(),ue.Vb(),ue.Wb(68,"tr"),ue.Wb(69,"th",2),ue.Pc(70,"Comp. Phone No."),ue.Vb(),ue.Wb(71,"td"),ue.Rb(72,"app-input-text",16),ue.Vb(),ue.Vb(),ue.Wb(73,"tr"),ue.Wb(74,"th",2),ue.Pc(75,"Mobile No."),ue.Vb(),ue.Wb(76,"td"),ue.Rb(77,"app-input-text",17),ue.Vb(),ue.Vb(),ue.Wb(78,"tr"),ue.Wb(79,"th",2),ue.Wb(80,"sup"),ue.Pc(81,"Email Address"),ue.Vb(),ue.Vb(),ue.Wb(82,"td"),ue.Wb(83,"div",9),ue.Rb(84,"app-input-text",18),ue.Vb(),ue.Vb(),ue.Vb(),ue.Wb(85,"tr"),ue.Wb(86,"th",2),ue.Pc(87,"In Charge Station"),ue.Vb(),ue.Wb(88,"td"),ue.Rb(89,"app-selectbox-detailcode",19),ue.Vb(),ue.Vb(),ue.Wb(90,"tr"),ue.Wb(91,"th",2),ue.Pc(92,"In Charge Category"),ue.Vb(),ue.Wb(93,"td"),ue.Rb(94,"app-selectbox-detailcode",20),ue.Vb(),ue.Vb(),ue.Wb(95,"tr"),ue.Wb(96,"th",2),ue.Wb(97,"sup"),ue.Pc(98,"Role"),ue.Vb(),ue.Vb(),ue.Wb(99,"td"),ue.Rb(100,"app-selectbox-detailcode",21),ue.Vb(),ue.Vb(),ue.Wb(101,"tr"),ue.Wb(102,"th",2),ue.Wb(103,"sup"),ue.Pc(104,"Privacy Info Manage"),ue.Vb(),ue.Vb(),ue.Wb(105,"td"),ue.Rb(106,"app-selectbox-detailcode",22),ue.Vb(),ue.Vb(),ue.Wb(107,"tr"),ue.Wb(108,"th",2),ue.Wb(109,"sup"),ue.Pc(110,"Manage User YN"),ue.Vb(),ue.Vb(),ue.Wb(111,"td"),ue.Wb(112,"div",9),ue.Rb(113,"app-radio",23),ue.Rb(114,"app-radio",24),ue.Vb(),ue.Vb(),ue.Vb(),ue.Wb(115,"tr"),ue.Wb(116,"th",2),ue.Wb(117,"sup"),ue.Pc(118,"Password"),ue.Vb(),ue.Vb(),ue.Wb(119,"td"),ue.Wb(120,"div",9),ue.Rb(121,"app-input-text",25),ue.Vb(),ue.Vb(),ue.Vb(),ue.Wb(122,"tr"),ue.Wb(123,"th",2),ue.Pc(124,"Control Remark"),ue.Vb(),ue.Wb(125,"td"),ue.Rb(126,"app-input-text",26),ue.Vb(),ue.Vb(),ue.Vb(),ue.Vb(),ue.Vb(),ue.Wb(127,"div",27),ue.Wb(128,"button",28),ue.fc("click",(function(){return e.onSubmit()})),ue.Pc(129,"Save"),ue.Vb(),ue.Vb()),2&t&&(ue.pc("formGroup",e.putForm)("connectForm",e.putFormData),ue.Cb(12),ue.pc("isInvalid",e.checkIsInvalid("userNo")),ue.Cb(6),ue.pc("isInvalid",e.checkIsInvalid("userId")),ue.Cb(6),ue.pc("options",e.userStatusList)("isInvalid",e.checkIsInvalid("userStatusCode")),ue.Cb(6),ue.pc("options",e.compCodeList)("isInvalid",e.checkIsInvalid("compCode")),ue.Cb(5),ue.pc("isInvalid",e.checkIsInvalid("staffNo")),ue.Cb(6),ue.pc("isInvalid",e.checkIsInvalid("name")),ue.Cb(6),ue.pc("inputFormat","uppserCaseEnOnly")("isInvalid",e.checkIsInvalid("lastName")),ue.Cb(3),ue.pc("isInvalid",e.checkIsInvalid("firstName")),ue.Cb(6),ue.pc("inputFieldValue",e.deptNameInput)("isInvalid",e.checkIsInvalid("deptCode"))("apiSearchTerm","compBasisCodeName")("apiCondition",ue.uc(41,we,e.putForm.get("compCode").value||11e4))("inputFieldFormatKeyList",ue.tc(43,_e))("isInvalid",e.checkIsInvalid("deptCode")),ue.Cb(6),ue.pc("inputFieldValue",e.positionNameInput)("inputId","positionGroupInput")("apiSearchTerm","compBasisCodeName")("apiCondition",ue.uc(44,Ue,e.putForm.get("compCode").value||11e4))("inputFieldFormatKeyList",ue.tc(46,_e))("isInvalid",e.checkIsInvalid("positionCode")),ue.Cb(5),ue.pc("isInvalid",e.checkIsInvalid("countryPhoneCode")),ue.Cb(5),ue.pc("isInvalid",e.checkIsInvalid("compPhoneNo")),ue.Cb(5),ue.pc("isInvalid",e.checkIsInvalid("mobileNo")),ue.Cb(7),ue.pc("isInvalid",e.checkIsInvalid("emailAddress")),ue.Cb(5),ue.pc("options",e.stationList)("isInvalid",e.checkIsInvalid("inChargeStationTypeCode")),ue.Cb(5),ue.pc("options",e.categoryList)("isInvalid",e.checkIsInvalid("inChargeCategoryCode")),ue.Cb(6),ue.pc("options",e.roleList)("isInvalid",e.checkIsInvalid("roleSeq")),ue.Cb(6),ue.pc("options",e.manageList)("isInvalid",e.checkIsInvalid("privacyInfoManageCode")),ue.Cb(7),ue.pc("value",!0),ue.Cb(1),ue.pc("value",!1),ue.Cb(7),ue.pc("isInvalid",e.checkIsInvalid("userPassword")),ue.Cb(5),ue.pc("isInvalid",e.checkIsInvalid("controlRemark")))},directives:[o.B,o.s,o.k,je.a,Se.a,o.r,o.i,Le.a,ve.a,be.a,$e.a],encapsulation:2,changeDetection:0}),t})();const Me=function(){return["airlineCode","airlineNameLn"]},xe=function(t){return["airlineMemberships",t,"airlineCode"]},Ae=function(t){return["airlineMemberships",t,"membershipNo"]};function Ye(t,e){if(1&t){const t=ue.Xb();ue.Ub(0,10),ue.Wb(1,"tr"),ue.Wb(2,"td",11),ue.Pc(3),ue.Vb(),ue.Wb(4,"td"),ue.Rb(5,"app-auto-complete",12),ue.Vb(),ue.Wb(6,"td"),ue.Rb(7,"app-input-text",13),ue.Vb(),ue.Wb(8,"td"),ue.Pc(9),ue.Vb(),ue.Wb(10,"td",11),ue.Wb(11,"a",4),ue.fc("click",(function(){ue.Fc(t);const i=e.$implicit,s=e.index;return ue.hc().onClickDel(i.get("rowid").value,s)})),ue.Pc(12,"\uc0ad\uc81c"),ue.Vb(),ue.Vb(),ue.Vb(),ue.Tb()}if(2&t){const t=e.$implicit,i=e.index,s=ue.hc();ue.pc("formGroupName",i),ue.Cb(3),ue.Qc((i+1).toString()),ue.Cb(2),ue.pc("inputFieldValue",s.airlineInputList[i]||"")("apiSearchTerm","keyword")("inputFieldFormatKeyList",ue.tc(8,Me))("isInvalid",s.checkIsInvalid(ue.uc(9,xe,i))),ue.Cb(2),ue.pc("isInvalid",s.checkIsInvalid(ue.uc(11,Ae,i))),ue.Cb(2),ue.Qc(s.getAllianceName(t.get("rowid").value))}}let Be=(()=>{class t{constructor(t,e,i){this._dataService=t,this.alertService=e,this.cd=i,this.submitEvent=new ue.n,this.removeEvent=new ue.n,this.unsubscribe$=new I.a,this.upsertForm=this._dataService.generateMembershipPutForm(),this._initSubscription()}get removeSuccessYn(){return this._removeSuccessYn}set removeSuccessYn(t){this._removeSuccessYn=t,F.isNil(this.selectedRemoveIndex)||(this.airlineMemberships.removeAt(this.selectedRemoveIndex),this.selectedRemoveIndex=null)}get membershipList(){return this._membershipList}set membershipList(t){this._membershipList=t,this._setFormArray(t),this.upsertFormData=this._setUpsertFormData(t),this._initState(t),this.cd.markForCheck()}get airlineMemberships(){var t;return null===(t=this.upsertForm)||void 0===t?void 0:t.get("airlineMemberships")}ngOnInit(){}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onClickAdd(){this.airlineMemberships.push(this._dataService.generateMembershipItemPutForm())}onClickDel(t,e){F.isNil(t)?this.airlineMemberships.removeAt(e):(this.selectedRemoveIndex=e,this.removeEvent.emit(t))}onSubmit(){if(this.upsertForm.invalid)return void(this.checkValid=!0);const t=this._setFormCondition();this.submitEvent.emit(t),this.checkValid=!1}checkIsInvalid(t){return this.checkValid&&this.upsertForm.get(t)&&this.upsertForm.get(t).invalid}getAllianceName(t){return F.get(this.allianceCollection,t,"-")}_setUpsertFormData(t){const e=this.userNo,i=Object.assign(this._dataService.initMembershipItemPutFormData(),{userNo:e});return F.isEmpty(t)?{airlineMemberships:[i]}:{airlineMemberships:t.map(t=>Object.assign({},i,F.pick(t,Object.keys(i))))}}_setFormArray(t){this.airlineMemberships.clear(),F.isEmpty(t)?this.airlineMemberships.push(this._dataService.generateMembershipItemPutForm()):t.forEach(()=>{this.airlineMemberships.push(this._dataService.generateMembershipItemPutForm())})}_setFormCondition(){return this.airlineMemberships.getRawValue().map(t=>{const e=Object.assign({},t,{userNo:this.userNo});return F.isNil(e.rowid)?F.omit(e,["rowid"]):e})}_initState(t){this.airlineInputList=[],this.allianceCollection={},F.isEmpty(t)||t.forEach((t,e)=>{this.airlineInputList.push(t.airlineCode+" - "+t.airlineNameLn),this.allianceCollection[t.rowid]=t.allianceName})}_initSubscription(){}}return t.\u0275fac=function(e){return new(e||t)(ue.Qb(Ce),ue.Qb(Ne.a),ue.Qb(ue.h))},t.\u0275cmp=ue.Kb({type:t,selectors:[["app-cp-staff-membership"]],inputs:{userNo:"userNo",removeSuccessYn:"removeSuccessYn",membershipList:"membershipList"},outputs:{submitEvent:"submitEvent",removeEvent:"removeEvent"},decls:32,vars:3,consts:[[1,"page-item"],[1,"page-item-header"],[1,"title"],[1,"control"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"table","table-hover","table-bordered",3,"formGroup","connectForm"],["width","90px"],["scope","col",1,"align-c"],["formArrayName","airlineMemberships"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"align-c"],["formControlName","airlineCode","apiUrl","common/airline","dataKey","airlineCode","inputFieldFormat","{0} - &{1}","placeholder","\ud56d\uacf5\uc0ac \uac80\uc0c9",3,"inputFieldValue","apiSearchTerm","inputFieldFormatKeyList","isInvalid"],["formControlName","membershipNo","placeholder","\ub9c8\uc77c\ub9ac\uc9c0\uce74\ub4dc \uc785\ub825",3,"isInvalid"]],template:function(t,e){1&t&&(ue.Wb(0,"div",0),ue.Wb(1,"div",1),ue.Wb(2,"p",2),ue.Pc(3,"\ud56d\uacf5 \ub9c8\uc77c\ub9ac\uc9c0 \uc815\ubcf4"),ue.Vb(),ue.Wb(4,"div",3),ue.Wb(5,"a",4),ue.fc("click",(function(){return e.onClickAdd()})),ue.Pc(6,"\ucd94\uac00"),ue.Vb(),ue.Wb(7,"a",4),ue.fc("click",(function(){return e.onSubmit()})),ue.Pc(8,"\uc800\uc7a5"),ue.Vb(),ue.Vb(),ue.Vb(),ue.Wb(9,"form",5),ue.Wb(10,"table"),ue.Wb(11,"caption"),ue.Pc(12," \ud56d\uacf5 \ub9c8\uc77c\ub9ac\uc9c0 \uc815\ubcf4 "),ue.Vb(),ue.Wb(13,"colgroup"),ue.Rb(14,"col"),ue.Rb(15,"col"),ue.Rb(16,"col"),ue.Rb(17,"col"),ue.Rb(18,"col",6),ue.Vb(),ue.Wb(19,"thead"),ue.Wb(20,"tr"),ue.Wb(21,"th",7),ue.Pc(22,"No."),ue.Vb(),ue.Wb(23,"th",7),ue.Pc(24,"\ud56d\uacf5\uc0ac"),ue.Vb(),ue.Wb(25,"th",7),ue.Pc(26,"\ub9c8\uc77c\ub9ac\uc9c0\uce74\ub4dc\ubc88\ud638"),ue.Vb(),ue.Wb(27,"th",7),ue.Pc(28,"\ud56d\uacf5\ub3d9\ub9f9\uccb4"),ue.Vb(),ue.Rb(29,"th",7),ue.Vb(),ue.Vb(),ue.Wb(30,"tbody",8),ue.Nc(31,Ye,13,13,"ng-container",9),ue.Vb(),ue.Vb(),ue.Vb(),ue.Vb()),2&t&&(ue.Cb(9),ue.pc("formGroup",e.upsertForm)("connectForm",e.upsertFormData),ue.Cb(22),ue.pc("ngForOf",e.airlineMemberships.controls))},directives:[o.B,o.s,o.k,je.a,o.e,a.n,o.l,be.a,o.r,o.i,Se.a],encapsulation:2,changeDetection:0}),t})();var Ke=i("UIHd"),Te=i("7G9D"),Ge=i("kDLv");let He=(()=>{class t{constructor(t,e,i,a,o){this.store=t,this._dataService=e,this._fileService=i,this.alertService=a,this.authStore=o,this._$unsubscribe=new I.a,this.tabIndex=0,this.positionList$=t.pipe(Object(c.u)(Rt)),this.corporateDeptList$=t.pipe(Object(c.u)(Mt)),this.userStatusList$=t.pipe(Object(c.u)(xt)),this.countryList$=t.pipe(Object(c.u)(At)),this.allianceList$=t.pipe(Object(c.u)(Yt)),this.userTypeList$=t.pipe(Object(c.u)(Bt)),this.compCodeList$=t.pipe(Object(c.u)(qt)),this.stationList$=t.pipe(Object(c.u)(Qt)),this.categoryList$=t.pipe(Object(c.u)(Xt)),this.roleList$=t.pipe(Object(c.u)(Jt)),this.manageList$=t.pipe(Object(c.u)(Kt)),this.selectedDetailRowItem$=t.pipe(Object(c.u)(oe)),this.removeMembershipSuccessYn$=t.pipe(Object(c.u)(re)),this.store.dispatch(s.loadStationList({condition:{masterCode:"BS002"}})),this.store.dispatch(s.loadCategoryList({condition:{masterCode:"BS003"}})),this._initSubscription()}ngAfterContentInit(){}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onChangeTab(t){this.tabIndex!==t&&this.userNo&&(this.tabIndex=t)}saveMasterHandler(t){this.store.dispatch(s.upsertMasterAction({upsertCondition:t}))}saveMembershipHandler(t){this.store.dispatch(s.upsertMembershipAction({upsertCondition:{airlineMemberships:t}}))}removeMembershipHandler(t){this.store.dispatch(s.removeMembershipAction({rowids:[t]}))}_initSubscription(){this.store.dispatch(s.compList({condition:{compTypeCodes:["CMP01"],limits:[0,50]}})),this.selectedDetailRowItem$.pipe(Object(V.a)(this._$unsubscribe)).subscribe(t=>{this.userNo=F.isEmpty(t)?null:t.userNo})}}return t.\u0275fac=function(e){return new(e||t)(ue.Qb(c.h),ue.Qb(Ce),ue.Qb(Te.a),ue.Qb(Ne.a),ue.Qb(c.h))},t.\u0275cmp=ue.Kb({type:t,selectors:[["app-cp-staff-detail"]],inputs:{selectedCorporateInfo:"selectedCorporateInfo",manageList:"manageList"},decls:14,vars:37,consts:[[1,"tab-pane","max-80vh","active"],[3,"corporateInfo","positionList","corporateDeptList","userStatusList","countryList","allianceList","userTypeList","masterItem","compCodeList","stationList","categoryList","roleList","manageList","submitEvent"]],template:function(t,e){1&t&&(ue.Wb(0,"div",0),ue.Wb(1,"app-cp-staff-master",1),ue.fc("submitEvent",(function(t){return e.saveMasterHandler(t)})),ue.ic(2,"async"),ue.ic(3,"async"),ue.ic(4,"async"),ue.ic(5,"async"),ue.ic(6,"async"),ue.ic(7,"async"),ue.ic(8,"async"),ue.ic(9,"async"),ue.ic(10,"async"),ue.ic(11,"async"),ue.ic(12,"async"),ue.ic(13,"async"),ue.Vb(),ue.Vb()),2&t&&(ue.Cb(1),ue.pc("corporateInfo",e.selectedCorporateInfo)("positionList",ue.jc(2,13,e.positionList$))("corporateDeptList",ue.jc(3,15,e.corporateDeptList$))("userStatusList",ue.jc(4,17,e.userStatusList$))("countryList",ue.jc(5,19,e.countryList$))("allianceList",ue.jc(6,21,e.allianceList$))("userTypeList",ue.jc(7,23,e.userTypeList$))("masterItem",ue.jc(8,25,e.selectedDetailRowItem$))("compCodeList",ue.jc(9,27,e.compCodeList$))("stationList",ue.jc(10,29,e.stationList$))("categoryList",ue.jc(11,31,e.categoryList$))("roleList",ue.jc(12,33,e.roleList$))("manageList",ue.jc(13,35,e.manageList$)))},directives:[Re],pipes:[a.b],encapsulation:2,changeDetection:0}),t})();function ze(t,e){1&t&&(ue.Wb(0,"span"),ue.Pc(1,"Y"),ue.Vb())}function qe(t,e){1&t&&(ue.Wb(0,"span"),ue.Pc(1,"N"),ue.Vb())}function Qe(t,e){if(1&t&&(ue.Nc(0,ze,2,0,"span",11),ue.Nc(1,qe,2,0,"span",11)),2&t){const t=e.$implicit;ue.pc("ngIf",!0===t.manageUserYn),ue.Cb(1),ue.pc("ngIf",!1===t.manageUserYn)}}function Xe(t,e){if(1&t&&ue.Rb(0,"app-cp-staff-detail",12),2&t){const t=ue.hc();ue.pc("selectedCorporateInfo",t.selectedCorporateInfo)}}function Je(t,e){if(1&t){const t=ue.Xb();ue.Wb(0,"app-cp-staff-bulk",13),ue.fc("submitEvent",(function(e){return ue.Fc(t),ue.hc().submitBulkUpdateHandler(e)}))("closeEvent",(function(){return ue.Fc(t),ue.hc().closeBulkUpdatePopupHandler()})),ue.ic(1,"async"),ue.ic(2,"async"),ue.ic(3,"async"),ue.Vb()}if(2&t){const t=ue.hc();ue.pc("roleList",ue.jc(1,3,t.roleList$))("positionList",ue.jc(2,5,t.positionList$))("userStatusList",ue.jc(3,7,t.userStatusList$))}}function Ze(t,e){if(1&t){const t=ue.Xb();ue.Wb(0,"app-cp-staff-upload",14),ue.fc("downloadEvent",(function(){return ue.Fc(t),ue.hc().downloadSampleHandler()}))("uploadEvent",(function(e){return ue.Fc(t),ue.hc().uploadExcelHandler(e)}))("closeEvent",(function(){return ue.Fc(t),ue.hc().closeUploadPopupHandler()})),ue.Vb()}}const ti=function(t){return{ynTpl:t}};let ei=(()=>{class t{constructor(t,e,i,s){this.store=t,this._dataService=e,this.alertService=i,this.fileService=s,this._$unsubscribe=new I.a,this.positionGroupList$=t.pipe(Object(c.u)(Ut)),this.positionList$=t.pipe(Object(c.u)(Rt)),this.corporateDeptList$=t.pipe(Object(c.u)(Mt)),this.userStatusList$=t.pipe(Object(c.u)(xt)),this.countryList$=t.pipe(Object(c.u)(At)),this.allianceList$=t.pipe(Object(c.u)(Yt)),this.manageList$=t.pipe(Object(c.u)(Kt)),this.loading$=t.pipe(Object(c.u)(Tt)),this.reloadToggle$=t.pipe(Object(c.u)(Gt)),this.searchCondition$=t.pipe(Object(c.u)(Ht)),this.otherSearchInfo$=t.pipe(Object(c.u)(zt)),this.compCodeList$=t.pipe(Object(c.u)(qt)),this.roleList$=t.pipe(Object(c.u)(Jt)),this.gridDataList$=t.pipe(Object(c.u)(Zt)),this.listPageSize$=t.pipe(Object(c.u)(se)),this.gridState$=t.pipe(Object(c.u)(te)),this.gridCheckedState$=t.pipe(Object(c.u)(ee)),this.gridDataTotalCount$=t.pipe(Object(c.u)(ie)),this.isOpenDetailPopup$=t.pipe(Object(c.u)(ae)),this.selectedRowItem$=t.pipe(Object(c.u)(oe)),this.isOpenBulkUpdatePopup$=t.pipe(Object(c.u)(ne)),this.isOpenUploadPopup$=t.pipe(Object(c.u)(ce)),this.columns=this._dataService.generateGridColumns(),this._initSubscription()}get selectedCorporateInfo(){var t,e,i,s;return{corporateCompCode:(null===(e=null===(t=this.searchFormEl)||void 0===t?void 0:t.formValue)||void 0===e?void 0:e.compCode)||null,corporateCompName:(null===(s=null===(i=this.searchFormEl)||void 0===i?void 0:i.formValue)||void 0===s?void 0:s.compName)||null}}ngOnInit(){this.store.dispatch(s.compList({condition:{compTypeCodes:["CMP01"],limits:[0,50]}})),this.store.dispatch(s.loadPrivacyInfoManageList({condition:{masterCode:"US013"}})),this.store.dispatch(s.loadRoleList({condition:{useYn:!0}})),this.store.dispatch(s.loadUserStatusList()),this.store.dispatch(s.loadCountryList()),this.store.dispatch(s.loadAllianceList())}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete(),this.store.dispatch(s.initComponent()),this.store.dispatch(s.setGridCheckStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}fetchPositionGroupHandler({corporateCompCode:t}){F.isNil(t)?this.store.dispatch(s.loadPositionGroupListSuccess({dataList:null})):this.store.dispatch(s.loadPositionGroupList({condition:{corporateCompCode:t,limits:[0,1e6]}}))}fetchPositionHandler({corporateCompCode:t}){F.isNil(t)?this.store.dispatch(s.loadPositionListSuccess({dataList:null})):this.store.dispatch(s.loadPositionList({condition:{compCode:t,compBasisCodeType:"COB02",limits:[0,1e6]}}))}fetchCorporateDeptHandler({corporateCompCode:t}){F.isNil(t)?this.store.dispatch(s.loadCorporateDeptListSuccess({dataList:null})):this.store.dispatch(s.loadCorporateDeptList({condition:{compCode:t,limits:[0,1e6]}}))}changePageSizeHandler(t){this.store.dispatch(s.changePageSize({pageSize:t}))}clickSearchHandler({searchCondition:t,otherSearchInfo:e}){this.store.dispatch(s.changeSearchCondition({searchCondition:t,otherSearchInfo:e})),this.store.dispatch(s.changePageIndex({pageIndex:0}))}clickResetHandler(){this.store.dispatch(s.changeSearchCondition({searchCondition:{},otherSearchInfo:null}))}gridStateChangeHandler(t){this.store.dispatch(s.setGridStateAction({gridState:t}))}clickAddHandler(){this.searchFormEl.searchFormValid?(this.store.dispatch(s.addSelectedDetailRowInfo({selectedDetailRowInfo:null})),this.openDetailPopupHandler()):this.alertService.alert("Please set the search criteria for the company name.")}dbClickRowHandler(t){this.searchFormEl.searchFormValid?(this.store.dispatch(s.addSelectedDetailRowInfo({selectedDetailRowInfo:F.cloneDeep(t)})),this.openDetailPopupHandler()):this.alertService.alert("Please set the search criteria for the company name.")}openDetailPopupHandler(){this.store.dispatch(s.openDetailPopup())}closeDetailPopupHandler(){this.store.dispatch(s.closeDetailPopup()),this.store.dispatch(s.delSelectedDetailRowInfo())}clickBulkUpdateHandler(){this.gridEl.checkedDataList.length<1?this.alertService.alert("No data is selected."):this.openBulkUpdatePopupHandler()}openBulkUpdatePopupHandler(){this.store.dispatch(s.openBulkUpdatePopup())}closeBulkUpdatePopupHandler(){this.store.dispatch(s.closeBulkUpdatePopup())}submitBulkUpdateHandler(t){const e=this.gridEl.checkedDataList.map(t=>t.rowid),i=Object.assign(Object.assign({},t),{rowids:e});this.store.dispatch(s.bulkUpdateAction({condition:i}))}submitUpsertHandler(t){this.store.dispatch(s.upsertMasterAction({upsertCondition:t}))}clickUploadHandler(){this.searchFormEl.searchFormValid?this.openUploadPopupHandler():this.alertService.alert("Please set the search criteria for the company name.")}openUploadPopupHandler(){this.store.dispatch(s.openUploadPopup())}closeUploadPopupHandler(){this.store.dispatch(s.closeUploadPopup())}downloadSampleHandler(){this.fileService.fileDownload({url:de.templateDownload,filename:"corporate-staff-sample",type:"excel"})}uploadExcelHandler(t){this.fileService.fileUpload(`${de.putUpload}/${this.selectedCorporateInfo.corporateCompCode}`,{file:t}).subscribe(t=>{this.alertService.alert(!0===t.succeedYn?{message:"Upload completed.",accept:()=>{this.store.dispatch(s.reloadList()),this.store.dispatch(s.closeUploadPopup())}}:"An error occurred while uploading. Please try again later.")},t=>{this.alertService.alert("An error occurred while uploading. Please try again later.")})}_initSubscription(){this.reloadToggle$.pipe(Object(k.a)(1),Object(V.a)(this._$unsubscribe)).subscribe(()=>{this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()}),Object(P.a)([this.searchCondition$,this.gridState$]).pipe(Object(N.a)(200),Object(k.a)(1),Object(W.a)(([t])=>!F.isEmpty(t)),Object(V.a)(this._$unsubscribe)).subscribe(([t,{pageInfo:e}])=>{const i=Object.assign({},t,{limits:[e.skip,e.skip+e.take]});this.store.dispatch(s.loadList({condition:i}))})}}return t.\u0275fac=function(e){return new(e||t)(ue.Qb(c.h),ue.Qb(Ce),ue.Qb(Ne.a),ue.Qb(Te.a))},t.\u0275cmp=ue.Kb({type:t,selectors:[["app-cp-staff-list"]],viewQuery:function(t,e){var i;1&t&&(ue.Xc(ke,!0),ue.Xc(Ke.a,!0)),2&t&&(ue.Dc(i=ue.gc())&&(e.searchFormEl=i.first),ue.Dc(i=ue.gc())&&(e.gridEl=i.first))},decls:32,vars:69,consts:[[3,"userStatusList","otherSearchInfo","searchCondition","compCodeList","manageList","roleList","fetchPositionGroupEvent","fetchPositionEvent","fetchCorporateDeptEvent","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","fileButtonDisabled","clickAddEvent","clickBulkUpdateEvent","clickUploadEvent","changePageSizeEvent"],["ynTpl",""],[3,"gridLoading","columns","gridState","checkedState","totalCount","dataList","templates","stateChangeEvent","dbClickRowEvent"],["gridEl",""],["modalSize","sm","header","Control Staff Info",3,"visible","modal","hasScroll","visibleChange"],[3,"selectedCorporateInfo",4,"ngIf"],["modalSize","sm","modalContentClass","pd-all","header","Modify Roles in Bulk",3,"visible","modal","visibleChange"],[3,"roleList","positionList","userStatusList","submitEvent","closeEvent",4,"ngIf"],["modalSize","sm","modalContentClass","pd-all","header","\uae30\uc5c5\uccb4\uc9c1\uc6d0 \uc5d1\uc140\ub85c \ub4f1\ub85d\ud558\uae30",3,"visible","modal","visibleChange"],[3,"downloadEvent","uploadEvent","closeEvent",4,"ngIf"],[4,"ngIf"],[3,"selectedCorporateInfo"],[3,"roleList","positionList","userStatusList","submitEvent","closeEvent"],[3,"downloadEvent","uploadEvent","closeEvent"]],template:function(t,e){if(1&t&&(ue.Wb(0,"app-cp-staff-search",0),ue.fc("fetchPositionGroupEvent",(function(t){return e.fetchPositionGroupHandler(t)}))("fetchPositionEvent",(function(t){return e.fetchPositionHandler(t)}))("fetchCorporateDeptEvent",(function(t){return e.fetchCorporateDeptHandler(t)}))("clickSearchEvent",(function(t){return e.clickSearchHandler(t)}))("clickResetEvent",(function(){return e.clickResetHandler()})),ue.ic(1,"async"),ue.ic(2,"async"),ue.ic(3,"async"),ue.ic(4,"async"),ue.ic(5,"async"),ue.ic(6,"async"),ue.Vb(),ue.Wb(7,"app-cp-staff-control",1),ue.fc("clickAddEvent",(function(){return e.clickAddHandler()}))("clickBulkUpdateEvent",(function(){return e.clickBulkUpdateHandler()}))("clickUploadEvent",(function(){return e.clickUploadHandler()}))("changePageSizeEvent",(function(t){return e.changePageSizeHandler(t)})),ue.ic(8,"async"),ue.ic(9,"async"),ue.ic(10,"async"),ue.Vb(),ue.Nc(11,Qe,2,2,"ng-template",null,2,ue.Oc),ue.Wb(13,"app-grid-simple",3,4),ue.fc("stateChangeEvent",(function(t){return e.gridStateChangeHandler(t)}))("dbClickRowEvent",(function(t){return e.dbClickRowHandler(t)})),ue.ic(15,"async"),ue.ic(16,"async"),ue.ic(17,"async"),ue.ic(18,"async"),ue.ic(19,"async"),ue.Vb(),ue.Wb(20,"app-dialog",5),ue.fc("visibleChange",(function(){return e.closeDetailPopupHandler()})),ue.ic(21,"async"),ue.Nc(22,Xe,1,1,"app-cp-staff-detail",6),ue.ic(23,"async"),ue.Vb(),ue.Wb(24,"app-dialog",7),ue.fc("visibleChange",(function(){return e.closeBulkUpdatePopupHandler()})),ue.ic(25,"async"),ue.Nc(26,Je,4,9,"app-cp-staff-bulk",8),ue.ic(27,"async"),ue.Vb(),ue.Wb(28,"app-dialog",9),ue.fc("visibleChange",(function(){return e.closeUploadPopupHandler()})),ue.ic(29,"async"),ue.Nc(30,Ze,1,0,"app-cp-staff-upload",10),ue.ic(31,"async"),ue.Vb()),2&t){const t=ue.Ec(12);ue.pc("userStatusList",ue.jc(1,27,e.userStatusList$))("otherSearchInfo",ue.jc(2,29,e.otherSearchInfo$))("searchCondition",ue.jc(3,31,e.searchCondition$))("compCodeList",ue.jc(4,33,e.compCodeList$))("manageList",ue.jc(5,35,e.manageList$))("roleList",ue.jc(6,37,e.roleList$)),ue.Cb(7),ue.pc("loading",ue.jc(8,39,e.loading$))("currentPageSize",ue.jc(9,41,e.listPageSize$))("totalCount",ue.jc(10,43,e.gridDataTotalCount$))("fileButtonDisabled",!e.selectedCorporateInfo),ue.Cb(6),ue.pc("gridLoading",ue.jc(15,45,e.loading$))("columns",e.columns)("gridState",ue.jc(16,47,e.gridState$))("checkedState",ue.jc(17,49,e.gridCheckedState$))("totalCount",ue.jc(18,51,e.gridDataTotalCount$))("dataList",ue.jc(19,53,e.gridDataList$))("templates",ue.uc(67,ti,t)),ue.Cb(7),ue.pc("visible",ue.jc(21,55,e.isOpenDetailPopup$))("modal",!0)("hasScroll",!1),ue.Cb(2),ue.pc("ngIf",ue.jc(23,57,e.isOpenDetailPopup$)),ue.Cb(2),ue.pc("visible",ue.jc(25,59,e.isOpenBulkUpdatePopup$))("modal",!0),ue.Cb(2),ue.pc("ngIf",ue.jc(27,61,e.isOpenBulkUpdatePopup$)),ue.Cb(2),ue.pc("visible",ue.jc(29,63,e.isOpenUploadPopup$))("modal",!0),ue.Cb(2),ue.pc("ngIf",ue.jc(31,65,e.isOpenUploadPopup$))}},directives:[ke,We,Ke.a,Ge.a,a.o,He,Fe,De],pipes:[a.b],encapsulation:2,changeDetection:0}),t})();const ii=[{path:"",component:ei,data:{title:"\uae30\uc5c5\uccb4 \uc9c1\uc6d0\uad00\ub9ac"}}];let si=(()=>{class t{}return t.\u0275mod=ue.Ob({type:t}),t.\u0275inj=ue.Nb({factory:function(e){return new(e||t)},imports:[[y.f.forChild(ii)],y.f]}),t})();var ai=i("lJxs"),oi=i("JIr8"),ni=i("bOdf"),ci=i("zp1y"),ri=i("IzEk"),li=i("vkgz"),pi=i("Xb6A");let di=(()=>{class t{constructor(t,e,i,a,o){this.actions$=t,this.service=e,this._errorService=i,this.alertService=a,this.store=o,this.loadPositionGroupList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.loadPositionGroupList),Object(fe.a)(({condition:t})=>this.service.getPositionGroupList(t).pipe(Object(ai.a)(t=>s.loadPositionGroupListSuccess({dataList:t})),Object(oi.a)(t=>{const e="List lookup failed",i=[s.loadPositionGroupListFailure({error:e})];return this._catchErr(t,e,i),[]}))))),this.loadPositionList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.loadPositionList),Object(fe.a)(({condition:t})=>this.service.getPositionList(t).pipe(Object(ai.a)(t=>s.loadPositionListSuccess({dataList:t})),Object(oi.a)(t=>{const e="List lookup failed",i=[s.loadPositionListFailure({error:e})];return this._catchErr(t,e,i),[]}))))),this.loadCorporateDeptList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.loadCorporateDeptList),Object(fe.a)(({condition:t})=>this.service.getCorporateDeptList(t).pipe(Object(ai.a)(t=>s.loadCorporateDeptListSuccess({dataList:t})),Object(oi.a)(t=>{const e="List lookup failed",i=[s.loadCorporateDeptListFailure({error:e})];return this._catchErr(t,e,i),[]}))))),this.loadUserStatusList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.loadUserStatusList),Object(ni.a)(t=>Object(he.a)(t).pipe(Object(ci.a)(this.userStatusList$))),Object(fe.a)(([t,e])=>F.isEmpty(e)?this.service.getDetailCode({masterCode:"US006"}).pipe(Object(ai.a)(t=>s.loadUserStatusListSuccess({dataList:t})),Object(oi.a)(t=>(this._catchErr(t,"List lookup failed"),[]))):[]))),this.loadCountryList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.loadCountryList),Object(ni.a)(t=>Object(he.a)(t).pipe(Object(ci.a)(this.countryList$))),Object(fe.a)(([t,e])=>F.isEmpty(e)?this.service.getCountryList({limits:[0,1e6]}).pipe(Object(ai.a)(t=>s.loadCountryListSuccess({dataList:t})),Object(oi.a)(t=>(this._catchErr(t,"List lookup failed"),[]))):[]))),this.loadAllianceList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.loadAllianceList),Object(ni.a)(t=>Object(he.a)(t).pipe(Object(ci.a)(this.allianceList$))),Object(fe.a)(([t,e])=>F.isEmpty(e)?this.service.getDetailCode({masterCode:"FL004"}).pipe(Object(ai.a)(t=>s.loadAllianceListSuccess({dataList:t})),Object(oi.a)(t=>(this._catchErr(t,"List lookup failed"),[]))):[]))),this.getCompList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.compList),Object(ni.a)(t=>Object(he.a)(t).pipe(Object(ci.a)(this.compCodeList$.pipe(Object(ri.a)(1))))),Object(fe.a)(([{condition:t},e])=>F.isNil(e)||0===e.length?this.service.getCompList(t).pipe(Object(ai.a)(t=>s.compListSuccess({dataList:t})),Object(oi.a)(t=>{const e="List lookup failed. Please try again in a momentarily.",i=[s.loadCorporateDeptListFailure({error:e})];return this._catchErr(t,e,i),[]})):Object(he.a)(s.compListSuccess({dataList:e}))))),this.loadList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.loadList),Object(fe.a)(({condition:t})=>this.service.getList(t).pipe(Object(ai.a)(({dataList:t,totalCount:e})=>s.getListSuccess({dataList:t,totalCount:e})),Object(oi.a)(t=>{const e="List lookup failed. Please try again in a momentarily.",i=[s.getListFailure({error:e})];return this._catchErr(t,e,i),[]}))))),this.loadRoleList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.loadRoleList),Object(ni.a)(t=>Object(he.a)(t).pipe(Object(ci.a)(this.roleList$.pipe(Object(ri.a)(1))))),Object(fe.a)(([{condition:t},e])=>F.isNil(e)||0===e.length?this.service.getRoleList(t).pipe(Object(ai.a)(t=>s.getRoleListSuccess({dataList:t})),Object(oi.a)(t=>(this._catchErr(t,"List lookup failed. Please try again in a momentarily.",[]),[]))):Object(he.a)(s.getRoleListSuccess({dataList:e}))))),this.upsertItem$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.upsertMasterAction),Object(fe.a)(({upsertCondition:t})=>this.service.upsertItem(t).pipe(Object(ai.a)(t=>({succeedYn:!0,dataResult:t})),Object(oi.a)(t=>Object(he.a)({succeedYn:!1,error:t})))),Object(li.a)(({succeedYn:t,error:e})=>{if(t){const t="Your data has been saved.",e=[s.reloadList(),s.closeDetailPopup()];this._runPage(t,e)}else this._catchErr(e,"Failed to save.")})),{dispatch:!1}),this.loadPrivacyInfoManageList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.loadPrivacyInfoManageList),Object(ni.a)(t=>Object(he.a)(t).pipe(Object(ci.a)(this.manageList$.pipe(Object(ri.a)(1))))),Object(fe.a)(([{condition:t},e])=>F.isNil(e)||0===e.length?this.service.getDetailCode(t).pipe(Object(ai.a)(t=>s.getPrivacyInfoManageListSuccess({dataList:t})),Object(oi.a)(t=>(this._catchErr(t,"List lookup failed. Please try again in a momentarily.",[]),[]))):Object(he.a)(s.getPrivacyInfoManageListSuccess({dataList:e}))))),this.loadStationListSuccess$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.loadStationList),Object(fe.a)(({condition:t})=>this.service.getDetailCode(t).pipe(Object(ai.a)(t=>s.loadStationListSuccess({dataList:t})),Object(oi.a)(t=>(this._catchErr(t,"List lookup failed. Please try again in a momentarily.",[]),[])))))),this.loadCategoryListSuccess$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.loadCategoryList),Object(fe.a)(({condition:t})=>this.service.getDetailCode(t).pipe(Object(ai.a)(t=>s.loadCategoryListSuccess({dataList:t})),Object(oi.a)(t=>(this._catchErr(t,"List lookup failed. Please try again in a momentarily.",[]),[])))))),this.bulkUpdate$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.bulkUpdateAction),Object(fe.a)(({condition:t})=>this.service.bulkUpdate(t).pipe(Object(ai.a)(t=>({succeedYn:!0,dataResult:t})),Object(oi.a)(t=>Object(he.a)({succeedYn:!1,error:t})))),Object(li.a)(({succeedYn:t,error:e})=>{if(t){const t="Your data has been saved.",e=[s.closeBulkUpdatePopup(),s.reloadList()];this._runPage(t,e)}else this._catchErr(e,"Failed to save.")})),{dispatch:!1}),this.upsertMembership$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.upsertMembershipAction),Object(ni.a)(t=>Object(he.a)(t).pipe(Object(ci.a)(this.selectedDetailRowInfo$))),Object(fe.a)(([{upsertCondition:t},e])=>this.service.upsertMembership(t).pipe(Object(ai.a)(t=>({succeedYn:!0,dataResult:Object.assign({},e,{airlineMemberships:t})})),Object(oi.a)(t=>Object(he.a)({succeedYn:!1,error:t})))),Object(li.a)(({succeedYn:t,dataResult:e,error:i})=>{if(t){const t="Your data has been saved.",i=[s.reloadList(),s.addSelectedDetailRowInfo({selectedDetailRowInfo:F.cloneDeep(e)})];this._runPage(t,i)}else this._catchErr(i,"Failed to save.")})),{dispatch:!1}),this.removeMembership$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(s.removeMembershipAction),Object(fe.a)(({rowids:t})=>this.service.removeMembership({rowids:t}).pipe(Object(ai.a)(t=>({succeedYn:!0})),Object(oi.a)(t=>Object(he.a)({succeedYn:!1,error:t})))),Object(li.a)(({succeedYn:t,error:e})=>{if(t){const t="Your data has been deleted.",e=[s.reloadList(),s.removeMembershipSuccessAction()];this._runPage(t,e)}else this._catchErr(e,"Deletion failed.")})),{dispatch:!1}),this.positionGroupList$=o.pipe(Object(c.u)(Ut)),this.positionList$=o.pipe(Object(c.u)(Rt)),this.userStatusList$=o.pipe(Object(c.u)(xt)),this.countryList$=o.pipe(Object(c.u)(At)),this.allianceList$=o.pipe(Object(c.u)(Yt)),this.selectedDetailRowInfo$=o.pipe(Object(c.u)(oe)),this.roleList$=o.pipe(Object(c.u)(Jt)),this.compCodeList$=o.pipe(Object(c.u)(qt)),this.manageList$=o.pipe(Object(c.u)(Kt))}_runPage(t,e){this.alertService.alert({message:t,accept:(null==e?void 0:e.length)>0?()=>{e.forEach(t=>{this.store.dispatch(t)})}:()=>{}})}_catchErr(t,e,i){const s=this._errorService.errorHandler(t,e);F.isNil(s)||(F.isNil(s.accept)&&(s.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(t=>{this.store.dispatch(t)})}:()=>{}),this.alertService.alert(s))}}return t.\u0275fac=function(e){return new(e||t)(ue.bc(n.a),ue.bc(Oe),ue.bc(pi.a),ue.bc(Ne.a),ue.bc(c.h))},t.\u0275prov=ue.Mb({token:t,factory:t.\u0275fac}),t})();var ui=i("YH7L");const bi=[ei,He],hi=[ke,We,Re,Fe,Be,De];let mi=(()=>{class t{}return t.\u0275mod=ue.Ob({type:t}),t.\u0275inj=ue.Nb({factory:function(e){return new(e||t)},imports:[[a.c,o.m,o.w,r.m,l.a,p.a,d.a,C.a,u.a,b.a,h.a,m.a,f.a,g.a,O.a,j.a,v.a,S.a,L.a,si,ui.a,c.j.forFeature("cpStaff",$t),n.b.forFeature([di])]]}),t})()},nMd8:function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var s=i("fXoL"),a=i("3Pt+"),o=i("LvDl"),n=i("XNiG"),c=i("itXk"),r=i("1G5W"),l=i("pLZG"),p=i("YY+H"),d=i("kt0X"),u=i("ofXK");function b(t,e){if(1&t&&(s.Wb(0,"option",3),s.Pc(1),s.Vb()),2&t){const t=s.hc();s.pc("ngValue",null),s.Cb(1),s.Qc(t.useAllOptionName)}}function h(t,e){if(1&t&&(s.Wb(0,"option",3),s.Pc(1),s.Vb()),2&t){const t=e.$implicit,i=s.hc();s.pc("ngValue",t),s.Cb(1),s.Qc(i.displayKey?t[i.displayKey]:t)}}const m={provide:a.p,useExisting:Object(s.U)(()=>f),multi:!0};let f=(()=>{class t{constructor(t,e){this._store=t,this._cdr=e,this.useAllOptionYn=!0,this.useAllOptionName="All",this.dataKey="detailCode",this.onChange=new s.n,this._unsubscribe$=new n.a,this._options$=new n.a,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.selectedLanguage$=this._store.select(p.f)}get invalid(){return this.isInvalid}get disabled(){return this._disabled}set disabled(t){this._disabled=t}get options(){return this._options}set options(t){this._options=t,this._options$.next(t),this.updateSelectedOption(this.value)}ngOnInit(){this.updateSelectedOption(null),this._initSubscription()}ngAfterViewInit(){this.options&&this._options$.next(this.options)}ngOnDestroy(){this._options$.next(null),this._options$.complete(),this._unsubscribe$.next(),this._unsubscribe$.complete()}writeValue(t){this.value=t,this.updateSelectedOption(t)}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t}compareFn(t,e){return this.dataKey?t[this.dataKey]===e[this.dataKey]:t===e}selectItem(t){this.selectedOption=t,this.value=this._getValue(t),this.onModelChange(this.value),this.onChange.emit({value:this.value,option:t})}updateSelectedOption(t){this.selectedOption=this._findOption(t,this.options)}_findOption(t,e){return this.dataKey?o.find(e,e=>e[this.dataKey]===t)||null:t}_getValue(t){return o.isNil(t)?null:t[this.dataKey]}_initSubscription(){if(this.displayKey)return;let t=null;Object(c.a)([this.selectedLanguage$,this._options$]).pipe(Object(r.a)(this._unsubscribe$),Object(l.a)(([t,e])=>e&&e.length>0)).subscribe(([e,i])=>{let s;if(o.isNil(e)&&(e="EN"),!t&&i&&(t=e),t===e&&(this.displayKey=this.displayWord+"Ln",Object.keys(i[0]).includes(this.displayKey)))this._cdr.detectChanges();else{switch(e){case"EN":s=this._findDisplayKey(i,this.displayWord,["En"]);break;case"KO":s=this._findDisplayKey(i,this.displayWord,["Ko","Kr"]);break;case"JA":s=this._findDisplayKey(i,this.displayWord,["Ja","Jp"]);break;case"ZH":s=this._findDisplayKey(i,this.displayWord,["Zh","Cn"]);break;case"VI":s=this._findDisplayKey(i,this.displayWord,["Vi","Vn"])}this.displayKey=s||this.displayWord+"En",this._cdr.detectChanges()}})}_findDisplayKey(t,e,i){if(!t||0===t.length)return null;if(console.log(e,"displayWord"),!e)return null;const s=Object.keys(t[0]);for(const a of i){const t=e+a;if(s.includes(t))return t;if(s.includes(e))return t}return null}}return t.\u0275fac=function(e){return new(e||t)(s.Qb(d.h),s.Qb(s.h))},t.\u0275cmp=s.Kb({type:t,selectors:[["app-selectbox-detailcode"]],hostAttrs:[1,"select-box"],hostVars:2,hostBindings:function(t,e){2&t&&s.Gb("valid-error",e.invalid)},inputs:{name:"name",useAllOptionYn:"useAllOptionYn",useAllOptionName:"useAllOptionName",dataKey:"dataKey",displayKey:"displayKey",displayWord:"displayWord",isInvalid:"isInvalid",disabled:"disabled",options:"options"},outputs:{onChange:"onChange"},features:[s.Bb([m])],decls:3,vars:6,consts:[[3,"compareWith","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngIf"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,e){1&t&&(s.Wb(0,"select",0),s.fc("ngModelChange",(function(t){return e.selectItem(t)})),s.Nc(1,b,2,2,"option",1),s.Nc(2,h,2,2,"option",2),s.Vb()),2&t&&(s.pc("compareWith",e.compareFn)("ngModel",e.selectedOption)("disabled",e.disabled),s.Db("name",e.name),s.Cb(1),s.pc("ngIf",e.useAllOptionYn),s.Cb(1),s.pc("ngForOf",e.options))},directives:[a.y,a.r,a.u,u.o,u.n,a.v,a.A],encapsulation:2}),t})()}}]);