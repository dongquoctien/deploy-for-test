(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{U5rg:function(t,e,i){"use strict";i.r(e),i.d(e,"CONTAINERS",(function(){return ui})),i.d(e,"COMPONENTS",(function(){return di})),i.d(e,"FlReservationListB2cRefundModule",(function(){return pi}));var n={};i.r(n),i.d(n,"initComponentStateAction",(function(){return F})),i.d(n,"loadDateRangeTypeListAction",(function(){return D})),i.d(n,"loadDateRangeTypeListSuccessAction",(function(){return E})),i.d(n,"loadBookingStatusListAction",(function(){return V})),i.d(n,"loadBookingStatusListSuccessAction",(function(){return x})),i.d(n,"loadGdsCompListAction",(function(){return w})),i.d(n,"loadGdsCompListSuccessAction",(function(){return B})),i.d(n,"loadAutoTicketingStatusListAction",(function(){return $})),i.d(n,"loadAutoTicketingStatusListSuccessAction",(function(){return W})),i.d(n,"loadChangeRequestStatusListAction",(function(){return Y})),i.d(n,"loadChangeRequestStatusListSuccessAction",(function(){return _})),i.d(n,"loadPaymentStatusCodeListAction",(function(){return U})),i.d(n,"loadPaymentStatusCodeListSuccessAction",(function(){return q})),i.d(n,"loadTicketingStatusCodeListAction",(function(){return M})),i.d(n,"loadTicketingStatusCodeListSuccessAction",(function(){return H})),i.d(n,"changeSearchConditionAction",(function(){return z})),i.d(n,"reloadList",(function(){return G})),i.d(n,"loadListAction",(function(){return K})),i.d(n,"loadListSuccessAction",(function(){return Q})),i.d(n,"loadListFailureAction",(function(){return X})),i.d(n,"setGridStateAction",(function(){return J})),i.d(n,"setGridCheckStateAction",(function(){return Z})),i.d(n,"changePageIndex",(function(){return tt})),i.d(n,"changePageSize",(function(){return et})),i.d(n,"openAssignPicPopup",(function(){return it})),i.d(n,"closeAssignPicPopup",(function(){return nt})),i.d(n,"updateAssignPicItems",(function(){return st})),i.d(n,"updateAssignPicItemsSuccess",(function(){return ot})),i.d(n,"openAutoStatusPopupAction",(function(){return at})),i.d(n,"closeAutoStatusPopupAction",(function(){return ct})),i.d(n,"saveAutoStatusAction",(function(){return lt})),i.d(n,"saveAutoStatusSuccessAction",(function(){return rt})),i.d(n,"saveAutoStatusFailureAction",(function(){return ut})),i.d(n,"openRefundCancelPopupAction",(function(){return dt})),i.d(n,"closeRefundCancelPopupAction",(function(){return pt})),i.d(n,"saveBookingStatusAction",(function(){return bt})),i.d(n,"saveBookingStatusSuccessAction",(function(){return gt})),i.d(n,"saveBookingStatusFailureAction",(function(){return ht})),i.d(n,"openUmsPopup",(function(){return mt})),i.d(n,"closeUmsPopup",(function(){return ft}));var s=i("ofXK"),o=i("3Pt+"),a=i("snw9"),c=i("kt0X"),l=i("vu/V"),r=i("7rOj"),u=i("6LsY"),d=i("l1P7"),p=i("v7zA"),b=i("hHe4"),g=i("5hwk"),h=i("kKjH"),m=i("qXPF"),f=i("1OXJ"),C=i("7UZF"),S=i("w8np"),v=i("YyVL"),k=i("a7NL"),O=i("tyNb"),j=i("XNiG"),L=i("itXk"),R=i("zP0r"),y=i("Kj3r"),P=i("pLZG"),A=i("1G5W"),T=i("LvDl"),I=i("wd/R"),N=i.n(I);const F=Object(c.o)("[FlReservationListB2cRefund] init component state"),D=Object(c.o)("[FlReservationListB2cRefund] load date range type list",Object(c.t)()),E=Object(c.o)("[FlReservationListB2cRefund] load date range type list success",Object(c.t)()),V=Object(c.o)("[FlReservationListB2cRefund] load booking status list",Object(c.t)()),x=Object(c.o)("[FlReservationListB2cRefund] load booking status list success",Object(c.t)()),w=Object(c.o)("[FlReservationListB2cRefund] load gds comp list",Object(c.t)()),B=Object(c.o)("[FlReservationListB2cRefund] load gds comp list success",Object(c.t)()),$=Object(c.o)("[FlReservationListB2cRefund] load auto ticketing status list",Object(c.t)()),W=Object(c.o)("[FlReservationListB2cRefund] load auto ticketing status list success",Object(c.t)()),Y=Object(c.o)("[FlReservationListB2cRefund] load change request status list",Object(c.t)()),_=Object(c.o)("[FlReservationListB2cRefund] load change request status list success",Object(c.t)()),U=Object(c.o)("[FlReservationListB2cRefund] load payment status code list",Object(c.t)()),q=Object(c.o)("[FlReservationListB2cRefund] load payment status code list success",Object(c.t)()),M=Object(c.o)("[FlReservationListB2cRefund] load ticketing status code list",Object(c.t)()),H=Object(c.o)("[FlReservationListB2cRefund] load ticketing status code list success",Object(c.t)()),z=Object(c.o)("[FlReservationListB2cRefund] change search condition",Object(c.t)()),G=Object(c.o)("[FlReservationListB2cRefund] reload grid data list"),K=Object(c.o)("[FlReservationListB2cRefund] load list",Object(c.t)()),Q=Object(c.o)("[FlReservationListB2cRefund] load list success",Object(c.t)()),X=Object(c.o)("[FlReservationListB2cRefund] load list failure",Object(c.t)()),J=Object(c.o)("[FlReservationListB2cRefund] set grid state",Object(c.t)()),Z=Object(c.o)("[FlReservationListB2cRefund] set grid check state",Object(c.t)()),tt=Object(c.o)("[FlReservationListB2cRefund] change page index",Object(c.t)()),et=Object(c.o)("[FlReservationListB2cRefund] change page size",Object(c.t)()),it=Object(c.o)("[FlReservationListB2cRefund] open assign pic popup"),nt=Object(c.o)("[FlReservationListB2cRefund] close assign pic popup"),st=Object(c.o)("[FlReservationListB2cRefund/AssignPicUpdate] \uc77c\uad04\ubcc0\uacbd \ud31d\uc5c5\uc5d0\uc11c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(c.t)()),ot=Object(c.o)("[FlReservationListB2cRefund] update items success"),at=Object(c.o)("[FlReservationListB2cRefund] open auto status popup"),ct=Object(c.o)("[FlReservationListB2cRefund] close auto status popup"),lt=Object(c.o)("[FlReservationListB2cRefund] save auto status",Object(c.t)()),rt=Object(c.o)("[FlReservationListB2cRefund] save auto status success",Object(c.t)()),ut=Object(c.o)("[FlReservationListB2cRefund] save auto status failure",Object(c.t)()),dt=Object(c.o)("[FlReservationListB2cRefund] open refund cancel popup"),pt=Object(c.o)("[FlReservationListB2cRefund] close refund cancel popup"),bt=Object(c.o)("[FlReservationListB2cRefund] save booking status",Object(c.t)()),gt=Object(c.o)("[FlReservationListB2cRefund] save booking status success",Object(c.t)()),ht=Object(c.o)("[FlReservationListB2cRefund] save booking status failure",Object(c.t)()),mt=Object(c.o)("[FlReservationListB2cRefund] open ums popup"),ft=Object(c.o)("[FlReservationListB2cRefund] close ums popup");var Ct=i("EVqC");const St=Object(Ct.a)({selectId:t=>t.rowid,sortComparer:!1}),vt=St.getInitialState({dateRangeTypeList:null,bookingStatusList:null,paymentStatusCodeList:null,ticketingStatusCodeList:null,gdsCompList:null,autoTicketingStatusList:null,changeRequestStatusList:null,loading:!1,reloadToggle:!1,searchCondition:null,otherSearchInfo:null,selectedCorporateCompCode:null,selectedRowInfo:null,isOpenAssignPicPopup:!1,isOpenAutoStatusPopup:!1,isOpenRefundCancelPopup:!1,isOpenUmsPopup:!1,gridDataTotal:null,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},gridCheckedState:null,gridSummary:null}),kt=Object(c.q)(vt,Object(c.s)(n.initComponentStateAction,t=>Object.assign(Object.assign({},t),{loading:!1,subLoading:!1})),Object(c.s)(n.loadDateRangeTypeListSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{dateRangeTypeList:e})),Object(c.s)(n.loadBookingStatusListSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{bookingStatusList:e})),Object(c.s)(n.loadGdsCompListSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{gdsCompList:e})),Object(c.s)(n.loadAutoTicketingStatusListSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{autoTicketingStatusList:e})),Object(c.s)(n.loadChangeRequestStatusListSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{changeRequestStatusList:e})),Object(c.s)(n.loadPaymentStatusCodeListSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{paymentStatusCodeList:e})),Object(c.s)(n.loadTicketingStatusCodeListSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{ticketingStatusCodeList:e})),Object(c.s)(n.changeSearchConditionAction,(t,{condition:e,otherSearchInfo:i})=>Object.assign(Object.assign({},t),{searchCondition:e,otherSearchInfo:i})),Object(c.s)(n.reloadList,t=>Object.assign(Object.assign({},t),{reloadToggle:!t.reloadToggle})),Object(c.s)(n.loadListAction,t=>Object.assign(Object.assign({},t),{loading:!0,selectedRowInfo:null})),Object(c.s)(n.loadListSuccessAction,(t,{dataList:e,totalCount:i,summary:n})=>St.setAll(e,Object.assign(Object.assign({},t),{loading:!1,gridDataTotal:i,gridSummary:n}))),Object(c.s)(n.loadListFailureAction,t=>Object.assign(Object.assign({},t),{loading:!1})),Object(c.s)(n.setGridStateAction,(t,{gridState:e})=>Object.assign(Object.assign({},t),{gridState:e})),Object(c.s)(n.setGridCheckStateAction,(t,{gridCheckedState:e})=>Object.assign(Object.assign({},t),{gridCheckedState:e})),Object(c.s)(n.changePageIndex,(t,{pageIndex:e})=>Object.assign(Object.assign({},t),{gridState:T.set(T.cloneDeep(t.gridState),["pageInfo","skip"],e)})),Object(c.s)(n.changePageSize,(t,{pageSize:e})=>Object.assign(Object.assign({},t),{gridState:T.set(T.cloneDeep(t.gridState),["pageInfo","take"],e)})),Object(c.s)(n.openUmsPopup,t=>Object.assign(Object.assign({},t),{isOpenUmsPopup:!0})),Object(c.s)(n.closeUmsPopup,t=>Object.assign(Object.assign({},t),{isOpenUmsPopup:!1})),Object(c.s)(n.openAssignPicPopup,t=>Object.assign(Object.assign({},t),{isOpenAssignPicPopup:!0})),Object(c.s)(n.closeAssignPicPopup,t=>Object.assign(Object.assign({},t),{isOpenAssignPicPopup:!1})),Object(c.s)(n.openAutoStatusPopupAction,t=>Object.assign(Object.assign({},t),{isOpenAutoStatusPopup:!0})),Object(c.s)(n.closeAutoStatusPopupAction,t=>Object.assign(Object.assign({},t),{isOpenAutoStatusPopup:!1})),Object(c.s)(n.openRefundCancelPopupAction,t=>Object.assign(Object.assign({},t),{isOpenRefundCancelPopup:!0})),Object(c.s)(n.closeRefundCancelPopupAction,t=>Object.assign(Object.assign({},t),{isOpenRefundCancelPopup:!1})),Object(c.s)(n.updateAssignPicItemsSuccess,t=>Object.assign(Object.assign({},t),{reloadToggle:!t.reloadToggle})),Object(c.s)(n.saveAutoStatusSuccessAction,(t,{updateList:e})=>St.upsertMany(e,Object.assign({},t))));function Ot(t,e){return Object(c.m)({flReservationListB2cRefundMain:kt})(t,e)}const jt=Object(c.p)("flReservationListB2cRefund"),Lt=Object(c.r)(jt,t=>t.flReservationListB2cRefundMain),Rt=Object(c.r)(Lt,t=>t.dateRangeTypeList),yt=Object(c.r)(Lt,t=>t.bookingStatusList),Pt=Object(c.r)(Lt,t=>t.gdsCompList),At=Object(c.r)(Lt,t=>t.autoTicketingStatusList),Tt=Object(c.r)(Lt,t=>t.changeRequestStatusList),It=Object(c.r)(Lt,t=>t.paymentStatusCodeList),Nt=Object(c.r)(Lt,t=>t.ticketingStatusCodeList),Ft=Object(c.r)(Lt,t=>t.loading),Dt=Object(c.r)(Lt,t=>t.reloadToggle),Et=Object(c.r)(Lt,t=>t.searchCondition),Vt=Object(c.r)(Lt,t=>t.otherSearchInfo),xt=St.getSelectors(Lt).selectAll,wt=Object(c.r)(Lt,t=>t.gridDataTotal),Bt=Object(c.r)(Lt,t=>t.gridSummary),$t=Object(c.r)(Lt,t=>t.gridState),Wt=Object(c.r)(Lt,t=>t.gridCheckedState),Yt=Object(c.r)(Lt,t=>t.isOpenUmsPopup),_t=Object(c.r)(Lt,t=>t.isOpenAssignPicPopup),Ut=Object(c.r)(Lt,t=>t.isOpenAutoStatusPopup),qt=Object(c.r)(Lt,t=>t.isOpenRefundCancelPopup),Mt=Object(c.r)(Lt,t=>t.selectedRowInfo),Ht=Object(c.r)($t,t=>T.get(t,["pageInfo","take"],20));var zt=i("YY+H"),Gt=i("AytR");const{API_URL:Kt}=Gt.a,Qt={postCommonDetail:`${Kt}/common/detail-code`,postCommonComp:`${Kt}/common/comp`,postBasicContinent:`${Kt}/admin/basis/continent`,postBookingFlightList:`${Kt}/admin/booking/flight/list`,putAssignPicItems:`${Kt}/admin/booking/pic-assign`,putAutoStatus:`${Kt}/admin/booking/flight/auto-status`,putBookingStatus:`${Kt}/admin/booking/status`,excelDownload:`${Kt}/admin/booking/flight/excel`};var Xt=i("fXoL"),Jt=i("pfiq"),Zt=i("LRne"),te=i("z6cu"),ee=i("eIep"),ie=i("tpT/");let ne=(()=>{class t{constructor(t){this.api=t}getCommonDetailCodeList(t){const e=T.assign({},this.api.defaultParams,{condition:t});return this.api.post(Qt.postCommonDetail,e).pipe(Object(ee.a)(t=>t.succeedYn?Object(Zt.a)(t.result.list):Object(te.a)(t||"api response error")))}getCommonComp(t){const e=T.assign({},this.api.defaultParams,{condition:t});return this.api.post(Qt.postCommonComp,e).pipe(Object(ee.a)(t=>t.succeedYn?Object(Zt.a)(t.result.list):Object(te.a)(t||"api response error")))}getContinentList(t){const e=T.assign({},this.api.defaultParams,{condition:t});return this.api.post(Qt.postBasicContinent,e).pipe(Object(ee.a)(t=>t.succeedYn?Object(Zt.a)(t.result.list):Object(te.a)(t||"api response error")))}getList(t){const e=T.assign({},this.api.defaultParams,{condition:t});return this.api.post(Qt.postBookingFlightList,e).pipe(Object(ee.a)(t=>{if(t.succeedYn&&t.result){const e=this._addRowid(t.result.list),i=t.result.totalCount,n=t.result.summary;return Object(Zt.a)({list:e,totalCount:i,summary:n})}return Object(te.a)(t||"api response error")}))}putAutoStatus(t){const e=T.assign({},this.api.defaultParams,{condition:t});return this.api.put(Qt.putAutoStatus,e).pipe(Object(ee.a)(t=>{var e;if(t.succeedYn){const{autoTicketingStatusCode:i,autoTicketingStatusName:n}=null==t?void 0:t.result,s=null===(e=null==t?void 0:t.result)||void 0===e?void 0:e.bookingItemCodes.map(t=>({id:t,bookingItemCode:t,autoTicketingStatusCode:i,autoTicketingStatusName:n}));return Object(Zt.a)(s)}return Object(te.a)(t||"api response error")}))}putBookingStatus(t){const e=T.assign({},this.api.defaultParams,{condition:t});return this.api.put(Qt.putBookingStatus,e).pipe(Object(ee.a)(t=>{var e;if(t.succeedYn){const{bookingStatusCode:i,bookingStatusName:n}=null==t?void 0:t.result,s=null===(e=null==t?void 0:t.result)||void 0===e?void 0:e.bookingItemCodes.map(t=>({id:t,bookingItemCode:t,bookingStatusCode:i,bookingStatusName:n}));return Object(Zt.a)(s)}return Object(te.a)(t||"api response error")}))}putAssignPicItems(t){const e=T.assign({},this.api.defaultParams,{condition:t});return this.api.put(Qt.putAssignPicItems,e).pipe(Object(ee.a)(t=>t.succeedYn?Object(Zt.a)(!0):Object(te.a)(t||"api response error")))}_addRowid(t){return T.isNil(t)?[]:t.map((t,e)=>Object.assign(Object.assign({},t),{rowid:String(e)}))}}return t.\u0275fac=function(e){return new(e||t)(Xt.bc(ie.a))},t.\u0275prov=Xt.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var se=i("6UzV");let oe=(()=>{class t{constructor(t){this.fb=t,this.generateGridColumns=()=>[{field:"requestDatetime",title:"Request Date",style:{"text-align":"center"}},{field:"changeRequestStatusName",title:"Request Status"},{field:"bookingItemCode",title:"Booking Item Code",style:{"text-align":"center"},template:"bookingItemCodeTpl"},{field:"gdsSubPnr",title:"PNR"},{field:"bookingStatusName",title:"Booking Status",style:{"text-align":"center"}},{field:"paymentStatusName",title:"C.Payment Status",style:{"text-align":"center"}},{field:"ticketingStatusName",title:"Issued Date",style:{"text-align":"center"}},{field:"departureDatetime",title:"Departure Date",style:{"text-align":"center"},format:"dateTime"},{field:"ticketingDate",title:"Issued Date",style:{"text-align":"center"}},{field:"dDay",title:"D-Day",template:"dDayTpl"},{field:"airlineCode",title:"Airline",style:{"text-align":"center"}},{field:"itinerary",title:"Itinerary"},{field:"gdsCompName",title:"GDS",style:{"text-align":"center"}},{field:"refundPicName",title:"RFND PIC"}],this.generateListSearchForm=()=>this.fb.group({searchTypeCode:[null],dateRange1:this.fb.group({rangeType:[null],dates:this.fb.array([new o.g(null,o.z.required),new o.g(null,o.z.required)])},{validators:[se.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),dateRange2:this.fb.group({rangeType:[null],dates:this.fb.array([new o.g(null),new o.g(null)])},{validators:[se.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),lastRefundPicUno:[null],paymentStatusCode:[null],ticketingStatusCode:[null],bookingCode:[null],bookingItemCode:[null],gdsSubPnr:[null],airlinePnr:[null],bookerName:[null],bookerId:[null],travelerName:[null],ticketNo:[null],bookerMobileNo:[null],deviceTypeCode:[null],bookingStatusCodes:[null],gdsCompCodes:[null],autoTicketingStatusCodes:[null],requestStatusCodes:[null],changeRequestStatusCode:[null],destinationContinentCodes:[null],domesticYn:[null],airlineCodes:[null,[se.a.airlineCodesStringValidator]]}),this.initSearchFormData=()=>({searchTypeCode:"BFT03",dateRange1:{rangeType:"FDC02",dates:[I().add(-1,"weeks").format("YYYY-MM-DD"),I().format("YYYY-MM-DD")]},dateRange2:{rangeType:"FDC01",dates:[null,null]},lastRefundPicUno:null,paymentStatusCode:null,ticketingStatusCode:null,bookingCode:null,bookingItemCode:null,gdsSubPnr:null,airlinePnr:null,bookerName:null,bookerId:null,travelerName:null,ticketNo:null,bookerMobileNo:null,deviceTypeCode:null,bookingStatusCodes:null,gdsCompCodes:null,autoTicketingStatusCodes:null,requestStatusCodes:null,changeRequestStatusCode:null,destinationContinentCodes:null,domesticYn:null,airlineCodes:null}),this.initSearchCondition=()=>({searchTypeCode:"BFT03",dateRange1:{rangeType:"FDC02",dates:[I().add(-1,"weeks").format("YYYY-MM-DD"),I().format("YYYY-MM-DD")]},dateRange2:{rangeType:"FDC01",dates:[I().add(-1,"weeks").format("YYYY-MM-DD"),I().format("YYYY-MM-DD")]},lastRefundPicUno:null,paymentStatusCode:null,ticketingStatusCode:null,bookingCode:null,bookingItemCode:null,gdsSubPnr:null,airlinePnr:null,bookerName:null,bookerId:null,travelerName:null,ticketNo:null,bookerMobileNo:null,deviceTypeCode:null,bookingStatusCodes:null,gdsCompCodes:null,autoTicketingStatusCodes:null,changeRequestStatusCode:null,airlineCodes:null,requestStatusCodes:null,domesticYn:null,sortOrder:null,limits:null}),this.generateAssignPicPutForm=()=>this.fb.group({itemCategoryCode:[null],picTypeCode:[null],picUno:[null],picName:[null]}),this.initAssignPicPutForm=()=>({itemCategoryCode:"IC01",picTypeCode:"PIC05",picUno:null,picName:null})}}return t.\u0275fac=function(e){return new(e||t)(Xt.bc(o.f))},t.\u0275prov=Xt.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ae=i("+Sob"),ce=i("nMd8"),le=i("rbKv"),re=i("kd+X"),ue=i("LVFn"),de=i("U6NN"),pe=i("0xcq"),be=i("gbCm");function ge(t,e){1&t&&Xt.Rb(0,"app-input-text",43)}function he(t,e){1&t&&Xt.Rb(0,"app-input-text",44)}function me(t,e){1&t&&Xt.Rb(0,"app-input-text",45)}function fe(t,e){1&t&&Xt.Rb(0,"app-input-text",46)}function Ce(t,e){1&t&&Xt.Rb(0,"app-input-text",47)}function Se(t,e){1&t&&Xt.Rb(0,"app-input-text",48)}function ve(t,e){1&t&&Xt.Rb(0,"app-input-text",49)}function ke(t,e){1&t&&Xt.Rb(0,"app-input-text",50)}function Oe(t,e){1&t&&Xt.Rb(0,"app-input-text",51)}function je(t,e){1&t&&Xt.Rb(0,"app-input-text",52)}function Le(t,e){1&t&&Xt.Rb(0,"app-input-text",53)}const Re=function(){return["dateRange1","dates"]},ye=function(){return["dateRange2","dates"]},Pe=function(){return{standalone:!0}},Ae=function(){return{userTypeCode:"U01"}},Te=function(){return["userNo","name","deptName","positionName"]};let Ie=(()=>{class t{constructor(t,e){this.fb=t,this._dataService=e,this.clickSearchEvent=new Xt.n,this.clickResetEvent=new Xt.n,this.isShowmore=!1,this.searchForm=e.generateListSearchForm()}get dateRangeTypeList(){return this._dataRangeTypeList}set dateRangeTypeList(t){this._dataRangeTypeList=t,this._initDateRangeList(t)}get searchCondition(){return this._searchCondition}set searchCondition(t){this._searchCondition=t,this.searchFormData=this._setSearchFormData(t),this._initDateRangeList(this.dateRangeTypeList)}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(t){this._otherSearchInfo=t,this._setOtherSearchInfo(t)}get dateRange1Dates(){return this.searchForm.get("dateRange1").get("dates").value}get dateRange2Dates(){return this.searchForm.get("dateRange2").get("dates").value}get formValue(){return this.searchForm.value}get searchFormValid(){return this.searchForm.valid}ngOnInit(){this._initState()}checkIsInvalid(t){return this._checkValid&&this.searchForm.get(t)&&this.searchForm.get(t).invalid}onSubmit(){if(this.searchForm.invalid)return void(this._checkValid=!0);const t=this.setSearchCondition(),e=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:t,otherSearchInfo:e}),this._checkValid=!1}onReset(){this.clickResetEvent.emit()}onChangerangeType1({value:t}){const e=t;this.dateRangeTypeList2=this.dateRangeTypeList.filter(t=>t.detailCode!==e);const i=this.dateRangeTypeList2[0].detailCode;this.dateRangeTypeList3=this.dateRangeTypeList.filter(t=>t.detailCode!==e&&t.detailCode!==i);const n=this.dateRangeTypeList3[0].detailCode;this.searchForm.get("dateRange2").get("rangeType").setValue(i),this.searchForm.get("dateRange3").get("rangeType").setValue(n)}onChangerangeType2({value:t}){this.dateRangeTypeList3=this.dateRangeTypeList2.filter(e=>e.detailCode!==t),this.searchForm.get("dateRange3").get("rangeType").setValue(this.dateRangeTypeList2[0].detailCode)}onChangeTextSearchType({value:t}){const e=this.searchForm.get(this.selectedCodeTypeDropdown).value;let i={bookingCode:null,bookingItemCode:null,gdsSubPnr:null,airlinePnr:null,bookerName:null,bookerId:null,travelerName:null,ticketNo:null,bookerMobileNo:null,authCode:null,promotionSeq:null};i[t]=e,this.searchForm.patchValue(i),this.selectedCodeTypeDropdown=t}setSearchCondition(){const t=this._dataService.initSearchCondition(),e=T.isNil(this.searchForm.value.gdsCompCodes)?this.searchForm.value.gdsCompCodes:[this.searchForm.value.gdsCompCodes],i=Object.assign({},T.pick(this.searchForm.value,Object.keys(t)),{gdsCompCodes:e});return T.omitBy(i,T.isNil)}_setSearchFormData(t){var e;const i=this._dataService.initSearchFormData(),n=null===(e=null==t?void 0:t.gdsCompCodes)||void 0===e?void 0:e[0];return Object.assign({},i,T.pick(t,Object.keys(i)),{gdsCompCodes:n})}_setOtherSearchInfo(t){this.selectedCodeTypeDropdown=(null==t?void 0:t.selectedCodeTypeDropdown)||"bookingCode",this.lastRefundPicInput=(null==t?void 0:t.lastRefundPicInput)||null}_setOtherSearchCondition(){const t={selectedCodeTypeDropdown:this.selectedCodeTypeDropdown};return this.autoCopmpletes.forEach(e=>{Object.assign(t,e.getInputValue())}),t}_initDateRangeList(t){var e,i;const n=null===(e=this.searchCondition)||void 0===e?void 0:e.dateRange1.rangeType,s=null===(i=this.searchCondition)||void 0===i?void 0:i.dateRange2.rangeType;this.dateRangeTypeList2=null==t?void 0:t.filter(t=>t.detailCode!==n),this.dateRangeTypeList3=null==t?void 0:t.filter(t=>t.detailCode!==n&&t.detailCode!==s)}_initState(){this.isShowmore=!0,this.useYnOptions=[{value:!0,label:"Y"},{value:!1,label:"N"}],this.codeTypeOptions=[{value:"bookingCode",label:"Booking Code"},{value:"bookingItemCode",label:"Booking Item Code"},{value:"gdsSubPnr",label:"GDS PNR"},{value:"airlinePnr",label:"Airline PNR"},{value:"bookerName",label:"Booker Name"},{value:"bookerId",label:"Booker Id"},{value:"travelerName",label:"Traveler Name"},{value:"ticketNo",label:"Ticket No"},{value:"bookerMobileNo",label:"Mobile No"}],this.domesticOptions=[{value:!1,label:"International"},{value:!0,label:"Domestic"}]}}return t.\u0275fac=function(e){return new(e||t)(Xt.Qb(o.f),Xt.Qb(oe))},t.\u0275cmp=Xt.Kb({type:t,selectors:[["app-fl-reservation-list-b2c-refund-search"]],viewQuery:function(t,e){var i;1&t&&Xt.Xc(Jt.a,!0),2&t&&Xt.Dc(i=Xt.gc())&&(e.autoCopmpletes=i)},inputs:{dateRangeTypeList:"dateRangeTypeList",bookingStatusList:"bookingStatusList",gdsCompList:"gdsCompList",autoTicketingStatusList:"autoTicketingStatusList",changeRequestStatusList:"changeRequestStatusList",paymentStatusCodeList:"paymentStatusCodeList",ticketingStatusCodeList:"ticketingStatusCodeList",searchCondition:"searchCondition",otherSearchInfo:"otherSearchInfo"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:89,vars:67,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],["formGroupName","dateRange1",1,"col-2","flex-shrink1"],["formControlName","rangeType","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-shrink-0",3,"options","useAllOptionYn","onChange"],["formArrayName","dates",1,"calendar-set","flex-fill"],[1,"input","calendar","d-inline-flex","flex-fill"],[3,"for"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","formControlName"],["fromDate1",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","min","formControlName"],["toDate1",""],["formGroupName","dateRange2",1,"col-2","flex-shrink1"],["fromDate2",""],["toDate2",""],[1,"col-1"],[1,"d-inline-flex","flex-shrink-0","mr5",3,"options","ngModel","ngModelOptions","useAllOptionYn","onChange"],[3,"ngSwitch"],["formControlName","bookingCode","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","bookingItemCode","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","gdsSubPnr","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","airlinePnr","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","bookerName","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","bookerId","class","d-inline flex-fill","placeholder","","valueType","string",4,"ngSwitchCase"],["formControlName","travelerName","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","ticketNo","class","d-inline flex-fill","placeholder","","valueType","string",4,"ngSwitchCase"],["formControlName","bookerMobileNo","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","authCode","class","d-inline flex-fill","valueType","string",4,"ngSwitchCase"],["formControlName","promotionSeq","class","d-inline flex-fill","valueType","number",4,"ngSwitchCase"],[1,"form-label"],["formControlName","bookingStatusCodes","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options","useAllOptionYn"],["formControlName","paymentStatusCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options","useAllOptionYn"],["formControlName","ticketingStatusCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","requestStatusCodes","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options","useAllOptionYn"],["formControlName","airlineCodes","placeholder","e.g. KE","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","domesticYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","gdsCompCodes","displayKey","compName","dataKey","compCode",1,"d-inline-flex","flex-fill",3,"options","useAllOptionYn"],["formControlName","lastRefundPicUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","apiCondition","inputFieldFormatKeyList"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"],[1,"btn-searchbox-extend",3,"click"],["formControlName","bookingCode","valueType","string",1,"d-inline","flex-fill"],["formControlName","bookingItemCode","valueType","string",1,"d-inline","flex-fill"],["formControlName","gdsSubPnr","valueType","string",1,"d-inline","flex-fill"],["formControlName","airlinePnr","valueType","string",1,"d-inline","flex-fill"],["formControlName","bookerName","valueType","string",1,"d-inline","flex-fill"],["formControlName","bookerId","placeholder","","valueType","string",1,"d-inline","flex-fill"],["formControlName","travelerName","valueType","string",1,"d-inline","flex-fill"],["formControlName","ticketNo","placeholder","","valueType","string",1,"d-inline","flex-fill"],["formControlName","bookerMobileNo","valueType","string",1,"d-inline","flex-fill"],["formControlName","authCode","valueType","string",1,"d-inline","flex-fill"],["formControlName","promotionSeq","valueType","number",1,"d-inline","flex-fill"]],template:function(t,e){if(1&t&&(Xt.Wb(0,"form",0),Xt.fc("ngSubmit",(function(){return e.onSubmit()})),Xt.Wb(1,"div",1),Xt.Wb(2,"div",2),Xt.Wb(3,"div",3),Xt.Wb(4,"app-selectbox-detailcode",4),Xt.fc("onChange",(function(t){return e.onChangerangeType1(t)})),Xt.Vb(),Xt.Wb(5,"div",5),Xt.Wb(6,"div",6),Xt.Rb(7,"mat-datepicker-toggle",7),Xt.Rb(8,"input",8),Xt.Rb(9,"mat-datepicker",null,9),Xt.Vb(),Xt.Wb(11,"span",10),Xt.Pc(12,"~"),Xt.Vb(),Xt.Wb(13,"div",6),Xt.Rb(14,"mat-datepicker-toggle",7),Xt.Rb(15,"input",11),Xt.Rb(16,"mat-datepicker",null,12),Xt.Vb(),Xt.Vb(),Xt.Vb(),Xt.Wb(18,"div",13),Xt.Wb(19,"app-selectbox-detailcode",4),Xt.fc("onChange",(function(t){return e.onChangerangeType2(t)})),Xt.Vb(),Xt.Wb(20,"div",5),Xt.Wb(21,"div",6),Xt.Rb(22,"mat-datepicker-toggle",7),Xt.Rb(23,"input",8),Xt.Rb(24,"mat-datepicker",null,14),Xt.Vb(),Xt.Wb(26,"span",10),Xt.Pc(27,"~"),Xt.Vb(),Xt.Wb(28,"div",6),Xt.Rb(29,"mat-datepicker-toggle",7),Xt.Rb(30,"input",11),Xt.Rb(31,"mat-datepicker",null,15),Xt.Vb(),Xt.Vb(),Xt.Vb(),Xt.Vb(),Xt.Wb(33,"div",2),Xt.Wb(34,"div",16),Xt.Wb(35,"app-selectbox",17),Xt.fc("onChange",(function(t){return e.onChangeTextSearchType(t)})),Xt.Vb(),Xt.Ub(36,18),Xt.Nc(37,ge,1,0,"app-input-text",19),Xt.Nc(38,he,1,0,"app-input-text",20),Xt.Nc(39,me,1,0,"app-input-text",21),Xt.Nc(40,fe,1,0,"app-input-text",22),Xt.Nc(41,Ce,1,0,"app-input-text",23),Xt.Nc(42,Se,1,0,"app-input-text",24),Xt.Nc(43,ve,1,0,"app-input-text",25),Xt.Nc(44,ke,1,0,"app-input-text",26),Xt.Nc(45,Oe,1,0,"app-input-text",27),Xt.Nc(46,je,1,0,"app-input-text",28),Xt.Nc(47,Le,1,0,"app-input-text",29),Xt.Tb(),Xt.Vb(),Xt.Wb(48,"div",16),Xt.Wb(49,"span",30),Xt.Pc(50,"Booking Status"),Xt.Vb(),Xt.Rb(51,"app-multi-select-detailcode",31),Xt.Vb(),Xt.Wb(52,"div",16),Xt.Wb(53,"span",30),Xt.Pc(54,"C.Payment Status"),Xt.Vb(),Xt.Rb(55,"app-selectbox-detailcode",32),Xt.Vb(),Xt.Wb(56,"div",16),Xt.Wb(57,"span",30),Xt.Pc(58,"Issued Status"),Xt.Vb(),Xt.Rb(59,"app-selectbox-detailcode",33),Xt.Vb(),Xt.Vb(),Xt.Wb(60,"div",2),Xt.Wb(61,"div",16),Xt.Wb(62,"span",30),Xt.Pc(63,"Request Status"),Xt.Vb(),Xt.Rb(64,"app-multi-select-detailcode",34),Xt.Vb(),Xt.Wb(65,"div",16),Xt.Wb(66,"span",30),Xt.Pc(67,"Airline"),Xt.Vb(),Xt.Rb(68,"app-input-text",35),Xt.Vb(),Xt.Wb(69,"div",16),Xt.Wb(70,"span",30),Xt.Pc(71,"I/D"),Xt.Vb(),Xt.Rb(72,"app-selectbox",36),Xt.Vb(),Xt.Wb(73,"div",16),Xt.Wb(74,"span",30),Xt.Pc(75,"GDS"),Xt.Vb(),Xt.Rb(76,"app-selectbox",37),Xt.Vb(),Xt.Vb(),Xt.Wb(77,"div",2),Xt.Wb(78,"div",16),Xt.Wb(79,"span",30),Xt.Pc(80,"Refund PIC"),Xt.Vb(),Xt.Rb(81,"app-auto-complete",38),Xt.Vb(),Xt.Vb(),Xt.Vb(),Xt.Wb(82,"div",39),Xt.Wb(83,"button",40),Xt.Pc(84,"Search"),Xt.Vb(),Xt.Wb(85,"button",41),Xt.fc("click",(function(){return e.onReset()})),Xt.Pc(86,"Reset"),Xt.Vb(),Xt.Wb(87,"a",42),Xt.fc("click",(function(){return e.isShowmore=!e.isShowmore})),Xt.Pc(88,"\uac80\uc0c9 \uc635\uc158 \ub354\ubcf4\uae30"),Xt.Vb(),Xt.Vb(),Xt.Vb()),2&t){const t=Xt.Ec(10),i=Xt.Ec(17),n=Xt.Ec(25),s=Xt.Ec(32);Xt.pc("formGroup",e.searchForm)("connectForm",e.searchFormData),Xt.Cb(4),Xt.pc("options",e.dateRangeTypeList)("useAllOptionYn",!1),Xt.Cb(1),Xt.Gb("valid-error",e.checkIsInvalid(Xt.tc(62,Re))),Xt.Cb(2),Xt.pc("for",t),Xt.Cb(1),Xt.pc("matDatepicker",t)("formControlName",0),Xt.Cb(6),Xt.pc("for",i),Xt.Cb(1),Xt.pc("matDatepicker",i)("min",e.dateRange1Dates[0])("formControlName",1),Xt.Cb(4),Xt.pc("options",e.dateRangeTypeList2)("useAllOptionYn",!1),Xt.Cb(1),Xt.Gb("valid-error",e.checkIsInvalid(Xt.tc(63,ye))),Xt.Cb(2),Xt.pc("for",n),Xt.Cb(1),Xt.pc("matDatepicker",n)("formControlName",0),Xt.Cb(6),Xt.pc("for",s),Xt.Cb(1),Xt.pc("matDatepicker",s)("min",e.dateRange2Dates[0])("formControlName",1),Xt.Cb(5),Xt.pc("options",e.codeTypeOptions)("ngModel",e.selectedCodeTypeDropdown)("ngModelOptions",Xt.tc(64,Pe))("useAllOptionYn",!1),Xt.Cb(1),Xt.pc("ngSwitch",e.selectedCodeTypeDropdown),Xt.Cb(1),Xt.pc("ngSwitchCase","bookingCode"),Xt.Cb(1),Xt.pc("ngSwitchCase","bookingItemCode"),Xt.Cb(1),Xt.pc("ngSwitchCase","gdsSubPnr"),Xt.Cb(1),Xt.pc("ngSwitchCase","airlinePnr"),Xt.Cb(1),Xt.pc("ngSwitchCase","bookerName"),Xt.Cb(1),Xt.pc("ngSwitchCase","bookerId"),Xt.Cb(1),Xt.pc("ngSwitchCase","travelerName"),Xt.Cb(1),Xt.pc("ngSwitchCase","ticketNo"),Xt.Cb(1),Xt.pc("ngSwitchCase","bookerMobileNo"),Xt.Cb(1),Xt.pc("ngSwitchCase","authCode"),Xt.Cb(1),Xt.pc("ngSwitchCase","promotionSeq"),Xt.Cb(4),Xt.pc("options",e.bookingStatusList)("useAllOptionYn",!0),Xt.Cb(4),Xt.pc("options",e.paymentStatusCodeList)("useAllOptionYn",!0),Xt.Cb(4),Xt.pc("options",e.ticketingStatusCodeList),Xt.Cb(1),Xt.Gb("hide",e.isShowmore),Xt.Cb(4),Xt.pc("options",e.changeRequestStatusList)("useAllOptionYn",!0),Xt.Cb(4),Xt.pc("isInvalid",e.checkIsInvalid("airlineCodes")),Xt.Cb(4),Xt.pc("options",e.domesticOptions),Xt.Cb(4),Xt.pc("options",e.gdsCompList)("useAllOptionYn",!0),Xt.Cb(1),Xt.Gb("hide",e.isShowmore),Xt.Cb(4),Xt.pc("inputFieldValue",e.lastRefundPicInput)("inputId","lastRefundPicInput")("apiSearchTerm","name")("apiCondition",Xt.tc(65,Ae))("inputFieldFormatKeyList",Xt.tc(66,Te)),Xt.Cb(6),Xt.Gb("active",e.isShowmore)}},directives:[o.B,o.s,o.k,ae.a,o.l,ce.a,o.r,o.i,o.e,le.a,re.a,o.c,ue.a,de.a,o.u,s.q,s.r,pe.a,be.a,Jt.a],encapsulation:2,changeDetection:0}),t})();var Ne=i("EsKh");let Fe=(()=>{class t{constructor(t){this.alertService=t,this.changePageSizeEvent=new Xt.n,this.clickViewBookingsEvent=new Xt.n,this.clickAssignPicEvent=new Xt.n,this.clickAutoStatusEvent=new Xt.n,this.clickRefundCancelEvent=new Xt.n,this.clickUmsEvent=new Xt.n,this.excelDownloadEvent=new Xt.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onChangePageSize(t){this.changePageSizeEvent.emit(t.value)}onClickViewBookings(){this.clickViewBookingsEvent.emit()}onClickAutoStatus(){this.clickAutoStatusEvent.emit()}onClickRefundCancel(){this.clickRefundCancelEvent.emit()}onClickUMS(){this.clickUmsEvent.emit()}onClickAssignPic(){this.clickAssignPicEvent.emit()}onClickExcel(){this.excelDownloadEvent.emit()}}return t.\u0275fac=function(e){return new(e||t)(Xt.Qb(Ne.a))},t.\u0275cmp=Xt.Kb({type:t,selectors:[["app-fl-reservation-list-b2c-refund-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{changePageSizeEvent:"changePageSizeEvent",clickViewBookingsEvent:"clickViewBookingsEvent",clickAssignPicEvent:"clickAssignPicEvent",clickAutoStatusEvent:"clickAutoStatusEvent",clickRefundCancelEvent:"clickRefundCancelEvent",clickUmsEvent:"clickUmsEvent",excelDownloadEvent:"excelDownloadEvent"},decls:9,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count",2,"min-width","30px"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm","d-inline-flex","flex-glow-0",3,"click"],[1,"sm","d-inline-flex","flex-glow-0","sm",3,"options","ngModel","useAllOptionYn","onChange"]],template:function(t,e){1&t&&(Xt.Wb(0,"div",0),Xt.Wb(1,"strong",1),Xt.Pc(2),Xt.Vb(),Xt.Wb(3,"div",2),Xt.Wb(4,"button",3),Xt.fc("click",(function(){return e.onClickAssignPic()})),Xt.Pc(5,"Assign Refund PIC"),Xt.Vb(),Xt.Wb(6,"button",3),Xt.fc("click",(function(){return e.onClickExcel()})),Xt.Pc(7,"Excel"),Xt.Vb(),Xt.Wb(8,"app-selectbox",4),Xt.fc("onChange",(function(t){return e.onChangePageSize(t)})),Xt.Vb(),Xt.Vb(),Xt.Vb()),2&t&&(Xt.Cb(2),Xt.Qc(e.loading?"":e.totalCount),Xt.Cb(6),Xt.pc("options",e.pageSizeOptions)("ngModel",e.currentPageSize)("useAllOptionYn",!1))},directives:[de.a,o.r,o.u],encapsulation:2,changeDetection:0}),t})(),De=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Xt.Kb({type:t,selectors:[["app-fl-reservation-list-b2c-refund-summary"]],inputs:{summary:"summary"},decls:42,vars:15,consts:[[1,"table","table-bordered","mt30"],["width","10%"],["scope","row",1,"th-bg"]],template:function(t,e){1&t&&(Xt.Wb(0,"div",0),Xt.Wb(1,"table"),Xt.Wb(2,"caption"),Xt.Pc(3," \ud56d\uacf5 \ud658\ubd88\uc608\uc57d\uc870\ud68c summary "),Xt.Vb(),Xt.Wb(4,"colgroup"),Xt.Rb(5,"col",1),Xt.Rb(6,"col",1),Xt.Rb(7,"col",1),Xt.Rb(8,"col",1),Xt.Rb(9,"col",1),Xt.Rb(10,"col",1),Xt.Rb(11,"col",1),Xt.Rb(12,"col",1),Xt.Rb(13,"col",1),Xt.Rb(14,"col",1),Xt.Vb(),Xt.Wb(15,"tbody"),Xt.Wb(16,"tr"),Xt.Wb(17,"th",2),Xt.Pc(18,"\ucd1d \uac74\uc218"),Xt.Vb(),Xt.Wb(19,"td"),Xt.Pc(20),Xt.ic(21,"number"),Xt.Vb(),Xt.Wb(22,"th",2),Xt.Pc(23,"\ucd1d \uc778\uc6d0"),Xt.Vb(),Xt.Wb(24,"td"),Xt.Pc(25),Xt.ic(26,"number"),Xt.Vb(),Xt.Wb(27,"th",2),Xt.Pc(28,"\ud658\ubd88 TASF \ud569\uacc4"),Xt.Vb(),Xt.Wb(29,"td"),Xt.Pc(30),Xt.ic(31,"number"),Xt.Vb(),Xt.Wb(32,"th",2),Xt.Pc(33,"\ud56d\uacf5\uc0ac\uc218\uc218\ub8cc \ucd1d\uae08\uc561"),Xt.Vb(),Xt.Wb(34,"td"),Xt.Pc(35),Xt.ic(36,"number"),Xt.Vb(),Xt.Wb(37,"th",2),Xt.Pc(38,"\ud658\ubd88 TASF \uc785\uae08\uae08\uc561"),Xt.Vb(),Xt.Wb(39,"td"),Xt.Pc(40),Xt.ic(41,"number"),Xt.Vb(),Xt.Vb(),Xt.Vb(),Xt.Vb(),Xt.Vb()),2&t&&(Xt.Cb(20),Xt.Qc(Xt.jc(21,5,null==e.summary?null:e.summary.sumItemCount)),Xt.Cb(5),Xt.Qc(Xt.jc(26,7,null==e.summary?null:e.summary.sumPaxCount)),Xt.Cb(5),Xt.Qc(Xt.jc(31,9,null==e.summary?null:e.summary.sumRefundTasfAmount)),Xt.Cb(5),Xt.Qc(Xt.jc(36,11,null==e.summary?null:e.summary.sumAirlinePenaltyAmount)),Xt.Cb(5),Xt.Qc(Xt.jc(41,13,null==e.summary?null:e.summary.sumDepositAmount)))},pipes:[s.f],encapsulation:2,changeDetection:0}),t})();const Ee=function(){return{userTypeCode:"U01"}},Ve=function(){return["userNo","name","deptName","positionName"]};let xe=(()=>{class t{constructor(t){this._dataService=t,this.submitEvent=new Xt.n,this.closeEvent=new Xt.n,this._$unsubscribe=new j.a,this.putForm=t.generateAssignPicPutForm(),this.putFormData=t.initAssignPicPutForm()}get loginUser(){return this._loginUser}set loginUser(t){if(t){this.picInput=`${t.userNo}-${t.name}${t.deptName?`,${t.deptName}`:""}${t.positionName?`,${t.positionName}`:""}`;const e=this._dataService.initAssignPicPutForm();this.putFormData=Object.assign(Object.assign({},e),{picUno:t.userNo,picName:t.name})}}ngOnInit(){this._initThisState(),this._initSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.putForm.invalid)return void(this.checkValid=!0);const t=this._convertFormToItem(this.putForm.getRawValue(),this.checkedBookingList);this.submitEvent.emit(t)}onClose(){this.closeEvent.emit()}checkIsInvalid(t){return this.checkValid&&this.putForm.get(t)&&this.putForm.get(t).invalid}onSelectBookingPicUno(t){this.putForm.get("picName").setValue(t.name)}_initThisState(){this.checkValid=!1}_convertFormToItem(t,e){return{list:e.map(e=>Object.assign(Object.assign({},t),{bookingItemCode:e.bookingItemCode,changeRequestSeq:e.changeRequestSeq}))}}_initSubscription(){this.putForm.get("picUno").valueChanges.pipe(Object(A.a)(this._$unsubscribe)).subscribe(t=>{T.isNil(t)&&this.putForm.get("picName").setValue(null)})}}return t.\u0275fac=function(e){return new(e||t)(Xt.Qb(oe))},t.\u0275cmp=Xt.Kb({type:t,selectors:[["app-fl-reservation-list-b2c-refund-assign-pic-form"]],inputs:{checkedBookingList:"checkedBookingList",loginUser:"loginUser"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:20,vars:9,consts:[[1,"modal-body"],[3,"formGroup","connectForm","ngSubmit"],[1,"table","table-bordered"],["width","170px"],["scope","row",1,"th-bg"],["formControlName","picUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name",3,"inputFieldValue","apiSearchTerm","apiCondition","inputFieldFormatKeyList","isInvalid","onSelect"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(t,e){1&t&&(Xt.Wb(0,"div",0),Xt.Wb(1,"form",1),Xt.fc("ngSubmit",(function(){return e.onSubmit()})),Xt.Wb(2,"div",2),Xt.Wb(3,"table"),Xt.Wb(4,"caption"),Xt.Pc(5," Assign Refund PIC "),Xt.Vb(),Xt.Wb(6,"colgroup"),Xt.Rb(7,"col",3),Xt.Rb(8,"col"),Xt.Vb(),Xt.Wb(9,"tbody"),Xt.Wb(10,"tr"),Xt.Wb(11,"th",4),Xt.Pc(12,"\ud658\ubd88\uc790 \uc9c0\uc815"),Xt.Vb(),Xt.Wb(13,"td"),Xt.Wb(14,"app-auto-complete",5),Xt.fc("onSelect",(function(t){return e.onSelectBookingPicUno(t)})),Xt.Vb(),Xt.Vb(),Xt.Vb(),Xt.Vb(),Xt.Vb(),Xt.Vb(),Xt.Wb(15,"div",6),Xt.Wb(16,"button",7),Xt.Pc(17,"Save"),Xt.Vb(),Xt.Wb(18,"button",8),Xt.fc("click",(function(){return e.onClose()})),Xt.Pc(19,"Close"),Xt.Vb(),Xt.Vb(),Xt.Vb(),Xt.Vb()),2&t&&(Xt.Cb(1),Xt.pc("formGroup",e.putForm)("connectForm",e.putFormData),Xt.Cb(13),Xt.pc("inputFieldValue",e.picInput)("apiSearchTerm","name")("apiCondition",Xt.tc(7,Ee))("inputFieldFormatKeyList",Xt.tc(8,Ve))("isInvalid",e.checkIsInvalid("picUno")))},directives:[o.B,o.s,o.k,ae.a,Jt.a,o.r,o.i],encapsulation:2,changeDetection:0}),t})(),we=(()=>{class t{constructor(){this.saveEvent=new Xt.n,this.closeEvent=new Xt.n}ngOnInit(){}ngOnDestroy(){}onClickChangeStatus(){this.saveEvent.emit({bookingItemCodes:this.bookingItemCodes,itemCategoryCode:"IC01",bookingStatusCode:"BKS08"})}onClose(){this.closeEvent.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Xt.Kb({type:t,selectors:[["app-fl-reservation-list-b2c-refund-cancel"]],inputs:{bookingItemCodes:"bookingItemCodes"},outputs:{saveEvent:"saveEvent",closeEvent:"closeEvent"},decls:15,vars:0,consts:[[1,"component-wrap"],[1,"align-c","pt20","pb20"],[1,"font-weight-bold","font-size-lg"],[1,"color-red"],[1,"color-blue"],[1,"button-area","align-c","mt10"],["type","button",1,"btn","btn-secondary","sm",3,"click"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(t,e){1&t&&(Xt.Wb(0,"div",0),Xt.Wb(1,"div",1),Xt.Wb(2,"p",2),Xt.Pc(3," \uc9c4\ud589\uc0c1\ud0dc\ub97c "),Xt.Wb(4,"span",3),Xt.Pc(5,'"\ud658\ubd88\uc694\uccad"'),Xt.Vb(),Xt.Pc(6," \uc5d0\uc11c "),Xt.Wb(7,"span",4),Xt.Pc(8,'"\ubc1c\uad8c\uc644\ub8cc"'),Xt.Vb(),Xt.Pc(9,"\ub85c \uc77c\uad04 \ubcc0\uacbd\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? "),Xt.Vb(),Xt.Vb(),Xt.Wb(10,"div",5),Xt.Wb(11,"button",6),Xt.fc("click",(function(){return e.onClickChangeStatus()})),Xt.Pc(12,"\ubcc0\uacbd"),Xt.Vb(),Xt.Wb(13,"button",7),Xt.fc("click",(function(){return e.onClose()})),Xt.Pc(14,"\ucde8\uc18c"),Xt.Vb(),Xt.Vb(),Xt.Vb())},encapsulation:2,changeDetection:0}),t})();var Be=i("UIHd"),$e=i("7G9D"),We=i("hna1"),Ye=i("kDLv"),_e=i("i7jD"),Ue=i("/Bmo");function qe(t,e){if(1&t){const t=Xt.Xb();Xt.Wb(0,"a",15),Xt.fc("click",(function(){Xt.Fc(t);const i=e.$implicit;return Xt.hc().clickBookingItemCode(i.bookingItemCode)})),Xt.Wb(1,"span",16),Xt.Pc(2),Xt.Vb(),Xt.Vb()}if(2&t){const t=e.$implicit;Xt.Cb(2),Xt.Qc(t.bookingItemCode)}}function Me(t,e){if(1&t&&(Xt.Wb(0,"span"),Xt.Pc(1),Xt.Vb()),2&t){const t=e.$implicit;Xt.Cb(1),Xt.Qc(t.dDay||0)}}function He(t,e){if(1&t&&(Xt.Wb(0,"span"),Xt.Pc(1),Xt.Vb()),2&t){const t=e.$implicit;Xt.Cb(1),Xt.Sc("",t.ticketIssuedPaxCount,"/",t.totalPaxCount,"")}}function ze(t,e){if(1&t){const t=Xt.Xb();Xt.Wb(0,"app-auto-status",17),Xt.fc("submitEvent",(function(e){return Xt.Fc(t),Xt.hc().submitAutoStatusHandler(e)}))("closeEvent",(function(){return Xt.Fc(t),Xt.hc().closeAutoStatusHandler()})),Xt.Vb()}if(2&t){const t=Xt.hc();Xt.pc("bookingItemCodes",t.bookingItemCodes)}}function Ge(t,e){if(1&t){const t=Xt.Xb();Xt.Wb(0,"app-fl-reservation-list-b2c-refund-assign-pic-form",18),Xt.fc("submitEvent",(function(e){return Xt.Fc(t),Xt.hc().submitAssignPicHandler(e)}))("closeEvent",(function(){return Xt.Fc(t),Xt.hc().closeAssignPicHandler()})),Xt.ic(1,"async"),Xt.Vb()}if(2&t){const t=Xt.hc();Xt.pc("checkedBookingList",t.checkedBookingList)("loginUser",Xt.jc(1,2,t.loginUser$))}}function Ke(t,e){if(1&t){const t=Xt.Xb();Xt.Wb(0,"app-fl-reservation-list-b2c-refund-cancel",19),Xt.fc("saveEvent",(function(e){return Xt.Fc(t),Xt.hc().saveBookingStatusHandler(e)}))("closeEvent",(function(){return Xt.Fc(t),Xt.hc().closeRefundCancelHandler()})),Xt.Vb()}if(2&t){const t=Xt.hc();Xt.pc("bookingItemCodes",t.uniqbookingItemCodes)}}function Qe(t,e){if(1&t&&(Xt.Rb(0,"app-ums",20),Xt.ic(1,"async")),2&t){const t=Xt.hc();Xt.pc("active",Xt.jc(1,3,t.isOpenUmsPopup$))("bookers",t.umsReceiver)("bookingItemCode",t.umsBookingItemCode)}}const Xe=function(t,e,i){return{bookingItemCodeTpl:t,dDayTpl:e,ticketIssuedPaxCountTpl:i}};let Je=(()=>{class t{constructor(t,e,i,n,s,o){this.store=t,this.dataService=e,this._fileService=i,this.authStore=n,this.alertService=s,this._reservationService=o,this.unsubscribe$=new j.a,this.dateRangeTypeList$=t.pipe(Object(c.u)(Rt)),this.bookingStatusList$=t.pipe(Object(c.u)(yt)),this.gdsCompList$=t.pipe(Object(c.u)(Pt)),this.autoTicketingStatusList$=t.pipe(Object(c.u)(At)),this.changeRequestStatusList$=t.pipe(Object(c.u)(Tt)),this.paymentStatusCodeList$=t.pipe(Object(c.u)(It)),this.ticketingStatusCodeList$=t.pipe(Object(c.u)(Nt)),this.loading$=t.pipe(Object(c.u)(Ft)),this.reloadToggle$=t.pipe(Object(c.u)(Dt)),this.searchCondition$=t.pipe(Object(c.u)(Et)),this.otherSearchInfo$=t.pipe(Object(c.u)(Vt)),this.gridDataList$=t.pipe(Object(c.u)(xt)),this.gridSummary$=t.pipe(Object(c.u)(Bt)),this.gridState$=t.pipe(Object(c.u)($t)),this.gridCheckedState$=t.pipe(Object(c.u)(Wt)),this.gridDataTotal$=t.pipe(Object(c.u)(wt)),this.listPageSize$=t.pipe(Object(c.u)(Ht)),this.isOpenUmsPopup$=t.pipe(Object(c.u)(Yt)),this.isOpenAssignPicPopup$=t.pipe(Object(c.u)(_t)),this.isOpenAutoStatusPopup$=t.pipe(Object(c.u)(Ut)),this.isOpenRefundCancelPopup$=t.pipe(Object(c.u)(qt)),this.selectedRowItem$=t.pipe(Object(c.u)(Mt)),this.loginUser$=n.pipe(Object(c.u)(zt.r)),this.columns=this.dataService.generateGridColumns(),this._initSubscription()}get bookingItemCodes(){var t,e;return null===(e=null===(t=this.gridEl)||void 0===t?void 0:t.checkedDataList)||void 0===e?void 0:e.map(t=>t.bookingItemCode)}get uniqbookingItemCodes(){var t,e;return T.uniq(null===(e=null===(t=this.gridEl)||void 0===t?void 0:t.checkedDataList)||void 0===e?void 0:e.map(t=>t.bookingItemCode))}get checkedBookingList(){var t;return null===(t=this.gridEl)||void 0===t?void 0:t.checkedDataList}ngOnInit(){}ngAfterContentInit(){this.store.dispatch(n.loadDateRangeTypeListAction({condition:{masterCode:"FL057",useYn:!0}})),this.store.dispatch(n.loadBookingStatusListAction({condition:{masterCode:"BK001",referCode1:"IC01",useYn:!0}})),this.store.dispatch(n.loadGdsCompListAction({condition:{compTypeCodes:["CMP10"],limits:[0,100]}})),this.store.dispatch(n.loadAutoTicketingStatusListAction({condition:{masterCode:"FL054",useYn:!0}})),this.store.dispatch(n.loadChangeRequestStatusListAction({condition:{masterCode:"FL037",useYn:!0}})),this.store.dispatch(n.loadPaymentStatusCodeListAction({condition:{masterCode:"BK002",referCode1:"IC01"}})),this.store.dispatch(n.loadTicketingStatusCodeListAction({condition:{masterCode:"FL002"}}))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(n.initComponentStateAction()),this.store.dispatch(n.setGridCheckStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}changePageSizeHandler(t){this.store.dispatch(n.changePageSize({pageSize:t}))}clickSearchHandler({searchCondition:t,otherSearchInfo:e}){this.store.dispatch(n.changeSearchConditionAction({condition:t,otherSearchInfo:e})),this.store.dispatch(n.changePageIndex({pageIndex:0}))}clickResetHandler(){this.store.dispatch(n.changeSearchConditionAction({condition:{},otherSearchInfo:null}))}gridStateChangeHandler(t){this.store.dispatch(n.setGridStateAction({gridState:t}))}clickViewBookingsHandler(){this.gridEl.checkedDataList.length<1?this.alertService.alert("There are no items selected."):this._reservationService.openDetailWindow(this.gridEl.checkedDataList)}clickAssignPicHandler(){this.gridEl.checkedDataList.length<1?this.alertService.alert("There are no items selected."):this.store.dispatch(n.openAssignPicPopup())}closeAssignPicHandler(){this.store.dispatch(n.closeAssignPicPopup())}submitAssignPicHandler(t){const e=T.cloneDeep(t);this.store.dispatch(n.updateAssignPicItems({updateCondition:e}))}clickUmsHandler(){const t=this.gridEl.checkedDataList;t.length<1?this.alertService.alert("There are no items selected."):t.length>1?this.alertService.alert("You can't send a UMS message to multiple people."):(this.umsReceiver=t.map(t=>({name:t.bookerName,phoneNo:t.bookerMobileNo,emailAddress:t.bookerEmailAddress})),this.umsBookingItemCode=1===t.length?t[0].bookingItemCode:void 0,this.store.dispatch(n.openUmsPopup()))}closeUmsHandler(){this.umsBookingItemCode=void 0,this.store.dispatch(n.closeUmsPopup())}clickAutoStatusHandler(){this.store.dispatch(n.openAutoStatusPopupAction())}closeAutoStatusHandler(){this.store.dispatch(n.closeAutoStatusPopupAction())}submitAutoStatusHandler(t){this.store.dispatch(n.saveAutoStatusAction({condition:t}))}clickRefundCancelHandler(){this.store.dispatch(n.openRefundCancelPopupAction())}closeRefundCancelHandler(){this.store.dispatch(n.closeRefundCancelPopupAction())}saveBookingStatusHandler(t){this.store.dispatch(n.saveBookingStatusAction({condition:t}))}clickExcelHandler(){const t=this._changeConditionType(this.searchFormEl.formValue),e=this._setSearchCondition(t);this._fileService.fileDownload({url:Qt.excelDownload,filename:"\ud658\ubd88\uc608\uc57d\uc870\ud68c\ub9ac\uc2a4\ud2b8(B2C)",type:"excel",params:e,requestMethod:"post"})}clickBookingItemCode(t){window.open(`${window.location.origin}/reservation/flight/${t}?tabName=TICKET_REFUND`,"_blank","height=950,width=1800,left=0,top=0,toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=no,status=no")}isInValidDeadline(t){if(!t)return!1;const{firstInsertDatetime:e,clientCancelDeadline:i,bookingStatusCode:n}=t,s=N()(e);return N()(i).isBefore(s)&&["BKS01","BKS02"].indexOf(n)>-1}_initSubscription(){Object(L.a)([this.searchCondition$,this.gridState$]).pipe(Object(R.a)(1),Object(y.a)(200),Object(P.a)(([t,e])=>!T.isEmpty(t)),Object(A.a)(this.unsubscribe$)).subscribe(([t,{pageInfo:e,sortInfo:i}])=>{const s=this._setSortOrder(i),o=[e.skip,e.skip+e.take],a=Object.assign({},this._setSearchCondition(t),{limits:o,sortOrder:s});this.store.dispatch(n.loadListAction({condition:this._changeConditionType(a)}))}),this.reloadToggle$.pipe(Object(R.a)(1),Object(A.a)(this.unsubscribe$)).subscribe(()=>{this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()})}_setSortOrder(t){return t.filter(t=>!T.isNil(t.dir)).map(t=>({keyName:t.field,sort:t.dir}))}_setSearchCondition(t){const e=t.dateRange2.dates.some(t=>T.isNil(t))?null:t.dateRange2.dates,i=Object.assign({},t,{dateRange2:e&&t.dateRange2});return T.omitBy(i,T.isNil)}_changeConditionType(t){const e=T.isNil(t.airlineCodes)?null:t.airlineCodes.replace(/\s+/g,"").split(",").filter(t=>t),i=Object.assign({},t,{airlineCodes:e});return T.omitBy(i,T.isNil)}}return t.\u0275fac=function(e){return new(e||t)(Xt.Qb(c.h),Xt.Qb(oe),Xt.Qb($e.a),Xt.Qb(c.h),Xt.Qb(Ne.a),Xt.Qb(We.a))},t.\u0275cmp=Xt.Kb({type:t,selectors:[["app-fl-reservation-list-b2c-refund"]],viewQuery:function(t,e){var i;1&t&&(Xt.Xc(Ie,!0),Xt.Xc(Be.a,!0)),2&t&&(Xt.Dc(i=Xt.gc())&&(e.searchFormEl=i.first),Xt.Dc(i=Xt.gc())&&(e.gridEl=i.first))},decls:43,vars:89,consts:[[3,"otherSearchInfo","searchCondition","dateRangeTypeList","bookingStatusList","gdsCompList","autoTicketingStatusList","changeRequestStatusList","paymentStatusCodeList","ticketingStatusCodeList","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","changePageSizeEvent","clickViewBookingsEvent","clickAssignPicEvent","clickUmsEvent","clickAutoStatusEvent","clickRefundCancelEvent","excelDownloadEvent"],["bookingItemCodeTpl",""],["dDayTpl",""],["ticketIssuedPaxCountTpl",""],[3,"gridLoading","columns","gridState","checkedState","totalCount","checkboxUseYn","sortable","dataList","templates","stateChangeEvent"],["gridEl",""],["modalSize","sm","modalContentClass","pd-all","header","Automatic state changes",3,"visible","modal","visibleChange"],[3,"bookingItemCodes","submitEvent","closeEvent",4,"ngIf"],["modalSize","sm","modalContentClass","pd-all","header","Assign Refund PIC",3,"visible","modal","hasScroll","visibleChange"],[3,"checkedBookingList","loginUser","submitEvent","closeEvent",4,"ngIf"],["modalSize","sm","modalContentClass","pd-all","header","Canceling a refund",3,"visible","modal","visibleChange"],[3,"bookingItemCodes","saveEvent","closeEvent",4,"ngIf"],["header","UMS \ubc1c\uc1a1 \uc815\ubcf4","modalSize","md","modalContentClass","pd-all",3,"visible","modal","visibleChange"],["itemCategoryCode","IC01",3,"active","bookers","bookingItemCode",4,"ngIf"],[3,"click"],[1,"text-underline","color-dark"],[3,"bookingItemCodes","submitEvent","closeEvent"],[3,"checkedBookingList","loginUser","submitEvent","closeEvent"],[3,"bookingItemCodes","saveEvent","closeEvent"],["itemCategoryCode","IC01",3,"active","bookers","bookingItemCode"]],template:function(t,e){if(1&t&&(Xt.Wb(0,"app-fl-reservation-list-b2c-refund-search",0),Xt.fc("clickSearchEvent",(function(t){return e.clickSearchHandler(t)}))("clickResetEvent",(function(){return e.clickResetHandler()})),Xt.ic(1,"async"),Xt.ic(2,"async"),Xt.ic(3,"async"),Xt.ic(4,"async"),Xt.ic(5,"async"),Xt.ic(6,"async"),Xt.ic(7,"async"),Xt.ic(8,"async"),Xt.ic(9,"async"),Xt.Vb(),Xt.Wb(10,"app-fl-reservation-list-b2c-refund-control",1),Xt.fc("changePageSizeEvent",(function(t){return e.changePageSizeHandler(t)}))("clickViewBookingsEvent",(function(){return e.clickViewBookingsHandler()}))("clickAssignPicEvent",(function(){return e.clickAssignPicHandler()}))("clickUmsEvent",(function(){return e.clickUmsHandler()}))("clickAutoStatusEvent",(function(){return e.clickAutoStatusHandler()}))("clickRefundCancelEvent",(function(){return e.clickRefundCancelHandler()}))("excelDownloadEvent",(function(){return e.clickExcelHandler()})),Xt.ic(11,"async"),Xt.ic(12,"async"),Xt.ic(13,"async"),Xt.Vb(),Xt.Nc(14,qe,3,1,"ng-template",null,2,Xt.Oc),Xt.Nc(16,Me,2,1,"ng-template",null,3,Xt.Oc),Xt.Nc(18,He,2,2,"ng-template",null,4,Xt.Oc),Xt.Wb(20,"app-grid-simple",5,6),Xt.fc("stateChangeEvent",(function(t){return e.gridStateChangeHandler(t)})),Xt.ic(22,"async"),Xt.ic(23,"async"),Xt.ic(24,"async"),Xt.ic(25,"async"),Xt.ic(26,"async"),Xt.Vb(),Xt.Wb(27,"app-dialog",7),Xt.fc("visibleChange",(function(){return e.closeAutoStatusHandler()})),Xt.ic(28,"async"),Xt.Nc(29,ze,1,1,"app-auto-status",8),Xt.ic(30,"async"),Xt.Vb(),Xt.Wb(31,"app-dialog",9),Xt.fc("visibleChange",(function(){return e.closeAssignPicHandler()})),Xt.ic(32,"async"),Xt.Nc(33,Ge,2,4,"app-fl-reservation-list-b2c-refund-assign-pic-form",10),Xt.ic(34,"async"),Xt.Vb(),Xt.Wb(35,"app-dialog",11),Xt.fc("visibleChange",(function(){return e.closeRefundCancelHandler()})),Xt.ic(36,"async"),Xt.Nc(37,Ke,1,1,"app-fl-reservation-list-b2c-refund-cancel",12),Xt.ic(38,"async"),Xt.Vb(),Xt.Wb(39,"app-dialog",13),Xt.fc("visibleChange",(function(){return e.closeUmsHandler()})),Xt.ic(40,"async"),Xt.Nc(41,Qe,2,5,"app-ums",14),Xt.ic(42,"async"),Xt.Vb()),2&t){const t=Xt.Ec(15),i=Xt.Ec(17),n=Xt.Ec(19);Xt.pc("otherSearchInfo",Xt.jc(1,35,e.otherSearchInfo$))("searchCondition",Xt.jc(2,37,e.searchCondition$))("dateRangeTypeList",Xt.jc(3,39,e.dateRangeTypeList$))("bookingStatusList",Xt.jc(4,41,e.bookingStatusList$))("gdsCompList",Xt.jc(5,43,e.gdsCompList$))("autoTicketingStatusList",Xt.jc(6,45,e.autoTicketingStatusList$))("changeRequestStatusList",Xt.jc(7,47,e.changeRequestStatusList$))("paymentStatusCodeList",Xt.jc(8,49,e.paymentStatusCodeList$))("ticketingStatusCodeList",Xt.jc(9,51,e.ticketingStatusCodeList$)),Xt.Cb(10),Xt.pc("loading",Xt.jc(11,53,e.loading$))("currentPageSize",Xt.jc(12,55,e.listPageSize$))("totalCount",Xt.jc(13,57,e.gridDataTotal$)),Xt.Cb(10),Xt.pc("gridLoading",Xt.jc(22,59,e.loading$))("columns",e.columns)("gridState",Xt.jc(23,61,e.gridState$))("checkedState",Xt.jc(24,63,e.gridCheckedState$))("totalCount",Xt.jc(25,65,e.gridDataTotal$))("checkboxUseYn",!1)("sortable",!0)("dataList",Xt.jc(26,67,e.gridDataList$))("checkboxUseYn",!0)("templates",Xt.wc(85,Xe,t,i,n)),Xt.Cb(7),Xt.pc("visible",Xt.jc(28,69,e.isOpenAutoStatusPopup$))("modal",!0),Xt.Cb(2),Xt.pc("ngIf",Xt.jc(30,71,e.isOpenAutoStatusPopup$)),Xt.Cb(2),Xt.pc("visible",Xt.jc(32,73,e.isOpenAssignPicPopup$))("modal",!0)("hasScroll",!1),Xt.Cb(2),Xt.pc("ngIf",Xt.jc(34,75,e.isOpenAssignPicPopup$)),Xt.Cb(2),Xt.pc("visible",Xt.jc(36,77,e.isOpenRefundCancelPopup$))("modal",!0),Xt.Cb(2),Xt.pc("ngIf",Xt.jc(38,79,e.isOpenRefundCancelPopup$)),Xt.Cb(2),Xt.pc("visible",Xt.jc(40,81,e.isOpenUmsPopup$))("modal",!0),Xt.Cb(2),Xt.pc("ngIf",Xt.jc(42,83,e.isOpenUmsPopup$))}},directives:[Ie,Fe,Be.a,Ye.a,s.o,_e.a,xe,we,Ue.a],pipes:[s.b],encapsulation:2,changeDetection:0}),t})();const Ze=[{path:"",component:Je,data:{title:"\ud658\ubd88\uc608\uc57d\uc870\ud68c(B2C)"}}];let ti=(()=>{class t{}return t.\u0275mod=Xt.Ob({type:t}),t.\u0275inj=Xt.Nb({factory:function(e){return new(e||t)},imports:[[O.f.forChild(Ze)],O.f]}),t})();var ei=i("bOdf"),ii=i("zp1y"),ni=i("lJxs"),si=i("JIr8"),oi=i("vkgz"),ai=i("Xb6A");let ci=(()=>{class t{constructor(t,e,i,s,o,l){this.actions$=t,this.service=e,this._errorService=i,this.store=s,this.alertService=o,this._authStore=l,this.loadDateRangeTypeList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadDateRangeTypeListAction),Object(ei.a)(t=>Object(Zt.a)(t).pipe(Object(ii.a)(this.dateRangeTypeList$))),Object(ee.a)(([{condition:t},e])=>null===e?this.service.getCommonDetailCodeList(t).pipe(Object(ni.a)(t=>n.loadDateRangeTypeListSuccessAction({dataList:t})),Object(si.a)(t=>(this._catchErr(t,"Appointment search date code lookup failed."),[]))):Object(Zt.a)(n.loadDateRangeTypeListSuccessAction({dataList:T.cloneDeep(e)}))))),this.loadBookingStatusList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadBookingStatusListAction),Object(ei.a)(t=>Object(Zt.a)(t).pipe(Object(ii.a)(this.bookingStatusList$))),Object(ee.a)(([{condition:t},e])=>null===e?this.service.getCommonDetailCodeList(t).pipe(Object(ni.a)(t=>n.loadBookingStatusListSuccessAction({dataList:t})),Object(si.a)(t=>(this._catchErr(t,"Reservation status code lookup failed."),[]))):Object(Zt.a)(n.loadBookingStatusListSuccessAction({dataList:T.cloneDeep(e)}))))),this.loadGdsCompList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadGdsCompListAction),Object(ei.a)(t=>Object(Zt.a)(t).pipe(Object(ii.a)(this.gdsCompList$))),Object(ee.a)(([{condition:t},e])=>null===e?this.service.getCommonComp(t).pipe(Object(ni.a)(t=>n.loadGdsCompListSuccessAction({dataList:t})),Object(si.a)(t=>(this._catchErr(t,"GDS company lookup failed."),[]))):Object(Zt.a)(n.loadGdsCompListSuccessAction({dataList:T.cloneDeep(e)}))))),this.loadAutoTicketingStatusList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadAutoTicketingStatusListAction),Object(ei.a)(t=>Object(Zt.a)(t).pipe(Object(ii.a)(this.autoTicketingStatusList$))),Object(ee.a)(([{condition:t},e])=>null===e?this.service.getCommonDetailCodeList(t).pipe(Object(ni.a)(t=>n.loadAutoTicketingStatusListSuccessAction({dataList:t})),Object(si.a)(t=>(this._catchErr(t,"The automatic status code lookup failed."),[]))):Object(Zt.a)(n.loadAutoTicketingStatusListSuccessAction({dataList:T.cloneDeep(e)}))))),this.loadChangeRequestStatusList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadChangeRequestStatusListAction),Object(ei.a)(t=>Object(Zt.a)(t).pipe(Object(ii.a)(this.changeRequestStatusList$))),Object(ee.a)(([{condition:t},e])=>null===e?this.service.getCommonDetailCodeList(t).pipe(Object(ni.a)(t=>n.loadChangeRequestStatusListSuccessAction({dataList:t})),Object(si.a)(t=>(this._catchErr(t,"The request status code lookup failed."),[]))):Object(Zt.a)(n.loadChangeRequestStatusListSuccessAction({dataList:T.cloneDeep(e)}))))),this.loadPaymentStatusCodeList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadPaymentStatusCodeListAction),Object(ei.a)(t=>Object(Zt.a)(t).pipe(Object(ii.a)(this.paymentStatusCodeList$))),Object(ee.a)(([{condition:t},e])=>null===e?this.service.getCommonDetailCodeList(t).pipe(Object(ni.a)(t=>n.loadPaymentStatusCodeListSuccessAction({dataList:t})),Object(si.a)(t=>(this._catchErr(t,"Payment status code lookup failed."),[]))):Object(Zt.a)(n.loadPaymentStatusCodeListSuccessAction({dataList:e}))))),this.loadTicketingStatusCodeList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadTicketingStatusCodeListAction),Object(ei.a)(t=>Object(Zt.a)(t).pipe(Object(ii.a)(this.ticketingStatusCodeList$))),Object(ee.a)(([{condition:t},e])=>null===e?this.service.getCommonDetailCodeList(t).pipe(Object(ni.a)(t=>n.loadTicketingStatusCodeListSuccessAction({dataList:t})),Object(si.a)(t=>(this._catchErr(t,"Ticketing status code lookup failed."),[]))):Object(Zt.a)(n.loadTicketingStatusCodeListSuccessAction({dataList:e}))))),this.loadList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadListAction),Object(ee.a)(({condition:t})=>this.service.getList(t).pipe(Object(ni.a)(({list:t,totalCount:e,summary:i})=>n.loadListSuccessAction({dataList:t,totalCount:e,summary:i})),Object(si.a)(t=>{const e="Your airline refund reservation inquiry failed, please try again later.",i=[n.loadListFailureAction({error:e})];return this._catchErr(t,e,i),[]}))))),this.updateAssignPicItems$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.updateAssignPicItems),Object(ee.a)(({updateCondition:t})=>this.service.putAssignPicItems(t).pipe(Object(ni.a)(t=>({succeedYn:!0})),Object(si.a)(t=>Object(Zt.a)({succeedYn:!1,error:t})))),Object(oi.a)(({succeedYn:t,error:e})=>{if(t){const t="The bulk change to refunders was successful.",e=[n.updateAssignPicItemsSuccess(),n.closeAssignPicPopup()];this._runPage(t,e)}else this._catchErr(e,"Bulk change refunders failed.",[])})),{dispatch:!1}),this.saveAutoStatus$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.saveAutoStatusAction),Object(ee.a)(({condition:t})=>this.service.putAutoStatus(t).pipe(Object(ni.a)(t=>({succeedYn:!0,updateList:t})),Object(si.a)(t=>Object(Zt.a)({succeedYn:!1,error:t})))),Object(oi.a)(({succeedYn:t,error:e})=>{if(t){const t="Successful bulk change of auto-status.",e=[n.reloadList(),n.closeAutoStatusPopupAction()];this._runPage(t,e)}else{const t="Failed to bulk change auto-state.",i=[n.saveAutoStatusFailureAction({error:t})];this._catchErr(e,t,i)}})),{dispatch:!1}),this.saveBookingStatus$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.saveBookingStatusAction),Object(ee.a)(({condition:t})=>this.service.putBookingStatus(t).pipe(Object(ni.a)(t=>({succeedYn:!0,updateList:t})),Object(si.a)(t=>Object(Zt.a)({succeedYn:!1,error:t})))),Object(oi.a)(({succeedYn:t,error:e})=>{if(t){const t="Successful bulk change of progress status.",e=[n.reloadList(),n.closeRefundCancelPopupAction()];this._runPage(t,e)}else{const t="Bulk change progress failed.",i=[n.saveBookingStatusFailureAction({error:t})];this._catchErr(e,t,i)}})),{dispatch:!1}),this.dateRangeTypeList$=s.pipe(Object(c.u)(Rt)),this.bookingStatusList$=s.pipe(Object(c.u)(yt)),this.gdsCompList$=s.pipe(Object(c.u)(Pt)),this.autoTicketingStatusList$=s.pipe(Object(c.u)(At)),this.changeRequestStatusList$=s.pipe(Object(c.u)(Tt)),this.paymentStatusCodeList$=s.pipe(Object(c.u)(It)),this.ticketingStatusCodeList$=s.pipe(Object(c.u)(Nt))}_runPage(t,e){this.alertService.alert({message:t,accept:(null==e?void 0:e.length)>0?()=>{e.forEach(t=>{this.store.dispatch(t)})}:()=>{}})}_catchErr(t,e,i){const n=this._errorService.errorHandler(t,e);T.isNil(n)||(T.isNil(n.accept)&&(n.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(t=>{this.store.dispatch(t)})}:()=>{}),this.alertService.alert(n))}}return t.\u0275fac=function(e){return new(e||t)(Xt.bc(a.a),Xt.bc(ne),Xt.bc(ai.a),Xt.bc(c.h),Xt.bc(Ne.a),Xt.bc(c.h))},t.\u0275prov=Xt.Mb({token:t,factory:t.\u0275fac}),t})();var li=i("YH7L"),ri=i("FGZR");const ui=[Je],di=[Ie,Fe,De,we,xe];let pi=(()=>{class t{}return t.\u0275mod=Xt.Ob({type:t}),t.\u0275inj=Xt.Nb({factory:function(e){return new(e||t)},imports:[[s.c,o.m,o.w,l.a,r.a,p.a,u.a,d.a,b.a,g.a,h.a,m.a,f.a,C.a,S.a,v.a,k.a,ti,li.a,ri.a,c.j.forFeature("flReservationListB2cRefund",Ot),a.b.forFeature([ci])]]}),t})()}}]);