(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{"7G9D":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var o=i("tk/3"),s=i("IzEk"),a=i("LvDl"),n=i("fXoL"),c=i("tpT/"),r=i("EsKh");let p=(()=>{class e{constructor(e,t){this.api=e,this.alertService=t}imageCheck(e){if(0===e.target.files.length)return!1;const t=e.target.files[0];if(t.size>2e6)return this.alertService.alert("\ud30c\uc77c \uc0ac\uc774\uc988\ub294 2MB\ub97c \ub118\uae38 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"),!1;let i=this.parseFileName(t.name);const o=i.toLowerCase(),s=o.lastIndexOf("."),a=o.substring(s+1);if(s<0)i+=".jpg";else if("jpg"!==a&&"png"!==a&&"jpeg"!==a)return this.alertService.alert("\uc774\ubbf8\uc9c0 \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return t}pdfCheck(e){if(0===e.target.files.length)return!1;const t=e.target.files[0];let i=this.parseFileName(t.name);const o=i.toLowerCase(),s=o.lastIndexOf("."),a=o.substring(s+1);if(s<0)i+=".pdf";else if("pdf"!==a)return this.alertService.alert("PDF \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return t}excelCheck(e){if(0===e.target.files.length)return!1;const t=e.target.files[0];let i=this.parseFileName(t.name);const o=i.toLowerCase(),s=o.lastIndexOf("."),a=o.substring(s+1);if(s<0)i+=".xls";else if("xls"!==a&&"xlsx"!==a)return this.alertService.alert("\uc5d1\uc140 \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return t}imageUpload(e,t){const i=new FormData;for(const s in t)if(t.hasOwnProperty(s))try{i.set(s,t[s])}catch(o){i.append(s,t[s])}return this.api.post(e,i)}fileUpload(e,t){const i=new FormData;for(const s in t)if(t.hasOwnProperty(s))try{i.set(s,t[s])}catch(o){i.append(s,t[s])}return this.api.put(e,i)}fileDelete(e,t){const i=Object.assign({},this.api.defaultParams,{condition:t});return this.api.delete(e,i)}fileDownload(e){let t,i;switch(e.params||(e=Object.assign(e,{params:""})),e.type||(e.type="excel"),e.type){case"excel":t=".xls",i="application/vnd.ms-excel";break;case"pdf":t=".pdf",i="application/pdf"}const n=o=>{const s=document.createElement("a"),a=new Blob([o],{type:i});s.href=URL.createObjectURL(a),s.download=e.filename+t,s.click()};if("post"===e.requestMethod){const t=a.assign({},this.api.defaultParams,{condition:e.params});return this.api.postBlob(e.url,t).pipe(Object(s.a)(1)).subscribe(e=>{"application/json"===e.type?this.alertService.alert("You must wait a minute before making another request."):n(e)})}return this.api.get(e.url,e.params,{responseType:"blob",headers:new o.e({"Content-Type":"application/json",Accept:"application/json"})}).pipe(Object(s.a)(1)).subscribe(e=>{n(e)})}parseFileName(e){const t=/[\{\}\[\]\/?,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"' ']/gi,i=e;return t.test(i)?i.replace(t,""):i}}return e.\u0275fac=function(t){return new(t||e)(n.bc(c.a),n.bc(r.a))},e.\u0275prov=n.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"A+33":function(e,t,i){"use strict";i.r(t),i.d(t,"CONTAINERS",(function(){return mt})),i.d(t,"COMPONENTS",(function(){return gt})),i.d(t,"CpDepartmentModule",(function(){return Ct}));var o={};i.r(o),i.d(o,"initComponent",(function(){return B})),i.d(o,"loadPositionGroupList",(function(){return F})),i.d(o,"loadPositionGroupListSuccess",(function(){return N})),i.d(o,"loadPositionGroupListFailure",(function(){return W})),i.d(o,"loadCorporateDeptList",(function(){return R})),i.d(o,"loadCorporateDeptListSuccess",(function(){return $})),i.d(o,"loadCorporateDeptListFailure",(function(){return U})),i.d(o,"compList",(function(){return _})),i.d(o,"compListSuccess",(function(){return Y})),i.d(o,"loadRoleList",(function(){return G})),i.d(o,"getRoleListSuccess",(function(){return x})),i.d(o,"changeSearchCondition",(function(){return z})),i.d(o,"reloadList",(function(){return A})),i.d(o,"loadList",(function(){return H})),i.d(o,"getListSuccess",(function(){return T})),i.d(o,"getListFailure",(function(){return K})),i.d(o,"setGridStateAction",(function(){return M})),i.d(o,"setGridCheckStateAction",(function(){return q})),i.d(o,"changePageIndex",(function(){return X})),i.d(o,"changePageSize",(function(){return Q})),i.d(o,"openDetailPopup",(function(){return J})),i.d(o,"closeDetailPopup",(function(){return Z})),i.d(o,"addSelectedDetailRowInfo",(function(){return ee})),i.d(o,"delSelectedDetailRowInfo",(function(){return te})),i.d(o,"upsertMasterAction",(function(){return ie})),i.d(o,"upsertMasterSuccessAction",(function(){return oe})),i.d(o,"openBulkUpdatePopup",(function(){return se})),i.d(o,"closeBulkUpdatePopup",(function(){return ae})),i.d(o,"bulkUpdateAction",(function(){return ne})),i.d(o,"bulkUpdateSuccessAction",(function(){return ce}));var s=i("ofXK"),a=i("3Pt+"),n=i("snw9"),c=i("kt0X"),r=i("WG3B"),p=i("xoAz"),l=i("wPo9"),u=i("7rOj"),d=i("+NQf"),b=i("6LsY"),h=i("l1P7"),m=i("v7zA"),g=i("7UZF"),C=i("hHe4"),f=i("1OXJ"),O=i("5hwk"),j=i("kKjH"),v=i("w8np"),S=i("7ChT"),D=i("vu/V"),k=i("tyNb"),L=i("XNiG"),P=i("itXk"),E=i("zP0r"),I=i("1G5W"),V=i("Kj3r"),w=i("pLZG"),y=i("LvDl");const B=Object(c.o)("[CpDepartment] init this component"),F=Object(c.o)("[CpDepartment] load position group list",Object(c.t)()),N=Object(c.o)("[CpDepartment] load position group list success",Object(c.t)()),W=Object(c.o)("[CpDepartment] load position group list failure",Object(c.t)()),R=Object(c.o)("[CpDepartment] load corporate dept list",Object(c.t)()),$=Object(c.o)("[CpDepartment] load corporate dept list success",Object(c.t)()),U=Object(c.o)("[CpDepartment] load corporate dept list failure",Object(c.t)()),_=Object(c.o)("[CpDepartment] load comp group list",Object(c.t)()),Y=Object(c.o)("[CpDepartment] load comp group list success",Object(c.t)()),G=Object(c.o)("[CpDepartment] load role list",Object(c.t)()),x=Object(c.o)("[CpDepartment] get role list success",Object(c.t)()),z=Object(c.o)("[CpDepartment] change search condition",Object(c.t)()),A=Object(c.o)("[CpDepartment] reload grid data list"),H=Object(c.o)("[CpDepartment] load grid data list",Object(c.t)()),T=Object(c.o)("[CpDepartment] get list success",Object(c.t)()),K=Object(c.o)("[CpDepartment] get list failure",Object(c.t)()),M=Object(c.o)("[CpDepartment] set grid state",Object(c.t)()),q=Object(c.o)("[CpDepartment] set grid check state",Object(c.t)()),X=Object(c.o)("[CpDepartment] change page index",Object(c.t)()),Q=Object(c.o)("[CpDepartment] change page size",Object(c.t)()),J=Object(c.o)("[CpDepartment] \uc0c1\uc138\ud31d\uc5c5 \uc5f4\uae30"),Z=Object(c.o)("[CpDepartment] \uc0c1\uc138\ud31d\uc5c5 \ub2eb\uae30"),ee=Object(c.o)("[CpDepartment] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc120\ud0dd",Object(c.t)()),te=Object(c.o)("[CpDepartment] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc81c\uac70"),ie=Object(c.o)("[CpDepartment] upsert master",Object(c.t)()),oe=Object(c.o)("[CpDepartment] upsert master success",Object(c.t)()),se=Object(c.o)("[CpDepartment] \uc77c\uad04\ubcc0\uacbd \ud31d\uc5c5 \uc5f4\uae30"),ae=Object(c.o)("[CpDepartment] \uc77c\uad04\ubcc0\uacbd \ud31d\uc5c5 \ub2eb\uae30"),ne=Object(c.o)("[CpDepartment] bulk update",Object(c.t)()),ce=Object(c.o)("[CpDepartment] bulk update success",Object(c.t)());var re=i("EVqC");const pe=Object(re.a)({selectId:e=>e.rowid,sortComparer:!1}),le=pe.getInitialState({positionGroupList:null,corporateDeptList:null,roleList:null,loading:!1,reloadToggle:!1,searchCondition:null,otherSearchInfo:null,gridDataTotal:null,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},gridCheckedState:null,isOpenBulkUpdatePopup:!1,isOpenDetailPopup:!1,selectedDetailRowInfo:null,compCodeList:null}),ue=Object(c.q)(le,Object(c.s)(o.initComponent,e=>Object.assign(Object.assign({},e),{loading:!1,reloadToggle:!1,selectedDetailRowInfo:null,isOpenDetailPopup:!1})),Object(c.s)(o.loadPositionGroupListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{positionGroupList:t})),Object(c.s)(o.loadPositionGroupListFailure,(e,{})=>Object.assign(Object.assign({},e),{positionGroupList:null})),Object(c.s)(o.loadCorporateDeptListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{corporateDeptList:t})),Object(c.s)(o.loadCorporateDeptListFailure,(e,{})=>Object.assign(Object.assign({},e),{corporateDeptList:null})),Object(c.s)(o.compListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{compCodeList:t})),Object(c.s)(o.getRoleListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{roleList:t})),Object(c.s)(o.reloadList,e=>Object.assign(Object.assign({},e),{reloadToggle:!e.reloadToggle})),Object(c.s)(o.changeSearchCondition,(e,{searchCondition:t,otherSearchInfo:i})=>Object.assign(Object.assign({},e),{searchCondition:t,otherSearchInfo:i})),Object(c.s)(o.loadList,e=>Object.assign(Object.assign({},e),{loading:!0})),Object(c.s)(o.getListSuccess,(e,{dataList:t,totalCount:i})=>pe.setAll(t,Object.assign(Object.assign({},e),{loading:!1,gridDataTotal:i}))),Object(c.s)(o.getListFailure,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(c.s)(o.setGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{gridState:t})),Object(c.s)(o.setGridCheckStateAction,(e,{gridCheckedState:t})=>Object.assign(Object.assign({},e),{gridCheckedState:t})),Object(c.s)(o.changePageSize,(e,{pageSize:t})=>Object.assign(Object.assign({},e),{gridState:y.set(y.cloneDeep(e.gridState),["pageInfo","take"],t)})),Object(c.s)(o.changePageIndex,(e,{pageIndex:t})=>Object.assign(Object.assign({},e),{gridState:y.set(y.cloneDeep(e.gridState),["pageInfo","skip"],t)})),Object(c.s)(o.openDetailPopup,e=>Object.assign(Object.assign({},e),{isOpenDetailPopup:!0})),Object(c.s)(o.closeDetailPopup,e=>Object.assign(Object.assign({},e),{isOpenDetailPopup:!1})),Object(c.s)(o.addSelectedDetailRowInfo,(e,{selectedDetailRowInfo:t})=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:t})),Object(c.s)(o.delSelectedDetailRowInfo,e=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:null})),Object(c.s)(o.openBulkUpdatePopup,e=>Object.assign(Object.assign({},e),{isOpenBulkUpdatePopup:!0})),Object(c.s)(o.closeBulkUpdatePopup,e=>Object.assign(Object.assign({},e),{isOpenBulkUpdatePopup:!1})),Object(c.s)(o.upsertMasterSuccessAction,(e,{dataResult:t})=>pe.upsertOne(t,e)));function de(e,t){return Object(c.m)({cpDepartmentList:ue})(e,t)}const be=Object(c.p)("cpDepartment"),he=Object(c.r)(be,e=>e.cpDepartmentList),me=Object(c.r)(he,e=>e.positionGroupList),ge=Object(c.r)(he,e=>e.corporateDeptList),Ce=Object(c.r)(he,e=>e.compCodeList),fe=Object(c.r)(he,e=>e.roleList),Oe=Object(c.r)(he,e=>e.loading),je=Object(c.r)(he,e=>e.reloadToggle),ve=Object(c.r)(he,e=>e.searchCondition),Se=Object(c.r)(he,e=>e.otherSearchInfo),De=pe.getSelectors(he).selectAll,ke=Object(c.r)(he,e=>e.gridState),Le=Object(c.r)(he,e=>e.gridCheckedState),Pe=Object(c.r)(he,e=>e.gridDataTotal),Ee=Object(c.r)(ke,e=>y.get(e,["pageInfo","take"],20)),Ie=Object(c.r)(he,e=>e.isOpenDetailPopup),Ve=Object(c.r)(he,e=>e.selectedDetailRowInfo),we=Object(c.r)(he,e=>e.isOpenBulkUpdatePopup);var ye=i("fXoL"),Be=i("/uUt"),Fe=i("pfiq"),Ne=i("LRne"),We=i("z6cu"),Re=i("eIep"),$e=i("AytR");const{API_URL:Ue}=$e.a,_e={postCommonDetail:`${Ue}/common/detail-code`,postCorporateDept:`${Ue}/admin/user/comp/basis`,postComp:`${Ue}/common/comp`,putCorporateDept:`${Ue}/admin/user/comp/basis`,putBundleUpdate:`${Ue}/admin/user/comp/basis/bundle-update`,selectRoleSeqs:`${Ue}/admin/basis/role`};var Ye=i("tpT/");let Ge=(()=>{class e{constructor(e){this.api=e}getCorporateDeptList(e){const t=y.assign({},this.api.defaultParams,{condition:e});return this.api.post(_e.postCorporateDept,t).pipe(Object(Re.a)(e=>e.succeedYn&&e.result?Object(Ne.a)(e.result.list):Object(We.a)(e||"api response error")))}getList(e){const t=y.assign({},this.api.defaultParams,{condition:e});return this.api.post(_e.postCorporateDept,t).pipe(Object(Re.a)(e=>{if(e.succeedYn&&e.result){const{list:t,totalCount:i}=e.result,o=this._addRowid(t);return Object(Ne.a)({dataList:o,totalCount:i})}return Object(We.a)(e||"api response error")}))}getCompList(e){const t=y.assign({},this.api.defaultParams,{condition:e});return this.api.post(_e.postComp,t).pipe(Object(Re.a)(e=>{if(e.succeedYn&&e.result){const t=e.result.list;return Object(Ne.a)(t)}return Object(We.a)(e||"api response error")}))}getRoleList(e){const t=y.assign({},this.api.defaultParams,{condition:e});return this.api.post(_e.selectRoleSeqs,t).pipe(Object(Re.a)(e=>e.succeedYn?Object(Ne.a)(e.result.list):Object(We.a)(e||"api response error")))}upsertItem(e){const t=y.assign({},this.api.defaultParams,{condition:e});return this.api.put(_e.putCorporateDept,t).pipe(Object(Re.a)(e=>e.succeedYn&&e.result?Object(Ne.a)(!0):Object(We.a)(e||"api response error")))}bulkUpdate(e){const t=y.assign({},this.api.defaultParams,{condition:e});return this.api.put(_e.putBundleUpdate,t).pipe(Object(Re.a)(e=>e.succeedYn&&e.result?Object(Ne.a)(!0):Object(We.a)(e||"api response error")))}_addRowid(e){return y.isNil(e)?[]:e.map((e,t)=>Object.assign(Object.assign({},e),{rowid:String(t)}))}}return e.\u0275fac=function(t){return new(t||e)(ye.bc(Ye.a))},e.\u0275prov=ye.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),xe=(()=>{class e{constructor(e){this.fb=e,this.generateGridColumns=()=>[{field:"compCode",title:"Comp. Code"},{field:"compBasisCodeValue",title:"Dep. Code"},{field:"compBasisCodeNameEn",title:"Dep. Name(EN)"},{field:"compBasisCodeNameKo",title:"Dep. Name(KO)"},{field:"parentCompBasisCodeNameEn",title:"Parent Department"},{field:"useYn",title:"Use YN",format:"yn",style:{"text-align":"center"}},{field:"compRemark",title:"Control Remark"},{field:"lastUpdateName",title:"Last Update User"},{field:"lastUpdateDatetime",title:"Last Update Time",style:{"text-align":"center"}}],this.generateSearchForm=()=>this.fb.group({compCode:[null,[a.z.required]],compBasisCodeType:[null],positionGroupSeq:[null],compBasisCodeName:[null],useYn:[null]}),this.initSearchFormDataCondition=()=>({compCode:11e4,compBasisCodeType:"COB01",positionGroupSeq:null,compBasisCodeName:null,deptName:null}),this.generatePutForm=()=>this.fb.group({compCode:[null,[a.z.required]],compBasisCodeValue:[null,[a.z.required]],compBasisCodeType:["COB01"],compBasisCodeNameEn:[null,[a.z.required]],compBasisCodeNameKo:[null,[a.z.required]],parentCompBasisCodeValue:[null],useYn:[null,[a.z.required]],compRemark:[null]}),this.initPutFormDataCondition=()=>({compCode:null,compBasisCodeValue:null,compBasisCodeType:"COB01",compBasisCodeNameEn:null,compBasisCodeNameKo:null,parentCompBasisCodeValue:null,compRemark:null,useYn:!0})}}return e.\u0275fac=function(t){return new(t||e)(ye.bc(a.f))},e.\u0275prov=ye.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ze=i("+Sob"),Ae=i("U6NN"),He=i("gbCm");let Te=(()=>{class e{constructor(e){this._dataService=e,this.fetchPositionGroupEvent=new ye.n,this.fetchCorporateDeptEvent=new ye.n,this.clickSearchEvent=new ye.n,this.clickResetEvent=new ye.n,this.useYnOptions=[{value:!0,label:"Y"},{value:!1,label:"N"}],this.isShowmore=!1,this._$unsubscribe=new L.a,this.searchForm=this._dataService.generateSearchForm()}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(e){this._otherSearchInfo=e,this._setOtherSearchInfo(e)}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}get searchFormValid(){return this.searchForm.valid}get compCodeValue(){return this.searchForm.get("compCode").value}get formValue(){return this.searchForm&&this.searchForm.value}ngOnInit(){}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.searchForm.invalid)return void(this._checkValid=!0);const e=this.setSearchCondition(),t=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:e,otherSearchInfo:t}),this._checkValid=!1}checkIsInvalid(e){return this._checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}setSearchCondition(){const e=Object.assign({},this.searchForm.value);return y.omitBy(e,y.isNil)}_setOtherSearchInfo(e){this.corporateInput=(null==e?void 0:e.corporateInput)||null,this.departmentInput=(null==e?void 0:e.departmentInput)||null}_setSearchFormData(e){return y.isEmpty(e)?this._dataService.initSearchFormDataCondition():e}_setOtherSearchCondition(){const e={};return this.autoCompletes.forEach(t=>{Object.assign(e,t.getInputValue())}),e}_initDetailSubscription(){this.searchForm.get("compCode").valueChanges.pipe(Object(E.a)(1),Object(Be.a)(),Object(I.a)(this._$unsubscribe)).subscribe(e=>{this.fetchCorporateDeptEvent.emit(e)})}}return e.\u0275fac=function(t){return new(t||e)(ye.Qb(xe))},e.\u0275cmp=ye.Kb({type:e,selectors:[["app-cp-department-search"]],viewQuery:function(e,t){var i;1&e&&ye.Xc(Fe.a,!0),2&e&&ye.Dc(i=ye.gc())&&(t.autoCompletes=i)},inputs:{compCodeList:"compCodeList",otherSearchInfo:"otherSearchInfo",searchCondition:"searchCondition"},outputs:{fetchPositionGroupEvent:"fetchPositionGroupEvent",fetchCorporateDeptEvent:"fetchCorporateDeptEvent",clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:21,vars:6,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-1"],[1,"form-label"],["useAllOptionName","Select","dataKey","compCode","displayKey","compName","formControlName","compCode",1,"flex-fill",3,"options"],["formControlName","compBasisCodeName","placeholder","Name",1,"flex-fill"],["formControlName","useYn",1,"flex-fill",3,"options"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(e,t){1&e&&(ye.Wb(0,"form",0),ye.fc("ngSubmit",(function(){return t.onSubmit()})),ye.Wb(1,"div",1),ye.Wb(2,"div",2),ye.Wb(3,"div",3),ye.Wb(4,"span",4),ye.Wb(5,"sup"),ye.Pc(6,"Control Comp Code"),ye.Vb(),ye.Vb(),ye.Rb(7,"app-selectbox",5),ye.Vb(),ye.Wb(8,"div",3),ye.Wb(9,"span",4),ye.Pc(10,"Dep. Name"),ye.Vb(),ye.Rb(11,"app-input-text",6),ye.Vb(),ye.Wb(12,"div",3),ye.Wb(13,"span",4),ye.Pc(14,"Use YN"),ye.Vb(),ye.Rb(15,"app-selectbox",7),ye.Vb(),ye.Vb(),ye.Vb(),ye.Wb(16,"div",8),ye.Wb(17,"button",9),ye.Pc(18,"Search"),ye.Vb(),ye.Wb(19,"button",10),ye.fc("click",(function(){return t.clickResetEvent.emit()})),ye.Pc(20,"Reset"),ye.Vb(),ye.Vb(),ye.Vb()),2&e&&(ye.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),ye.Cb(7),ye.Gb("valid-error",t.checkIsInvalid("compCode")),ye.pc("options",t.compCodeList),ye.Cb(8),ye.pc("options",t.useYnOptions))},directives:[a.B,a.s,a.k,ze.a,Ae.a,a.r,a.i,He.a],encapsulation:2,changeDetection:0}),e})(),Ke=(()=>{class e{constructor(){this.clickAddEvent=new ye.n,this.clickBulkUpdateEvent=new ye.n,this.changePageSizeEvent=new ye.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onChangePageSize(e){this.changePageSizeEvent.emit(e.value)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ye.Kb({type:e,selectors:[["app-cp-department-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{clickAddEvent:"clickAddEvent",clickBulkUpdateEvent:"clickBulkUpdateEvent",changePageSizeEvent:"changePageSizeEvent"},decls:8,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&(ye.Wb(0,"div",0),ye.Wb(1,"strong",1),ye.Pc(2),ye.Vb(),ye.Wb(3,"div",2),ye.Wb(4,"button",3),ye.fc("click",(function(){return t.clickAddEvent.emit()})),ye.Pc(5,"New"),ye.Vb(),ye.Wb(6,"div",4),ye.Wb(7,"app-selectbox",5),ye.fc("onChange",(function(e){return t.onChangePageSize(e)})),ye.Vb(),ye.Vb(),ye.Vb(),ye.Vb()),2&e&&(ye.Cb(2),ye.Qc(t.loading?"":t.totalCount),ye.Cb(5),ye.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[Ae.a,a.r,a.u],encapsulation:2,changeDetection:0}),e})();var Me=i("EsKh"),qe=i("Onn4");const Xe=function(){return{compCode:11e4,compBasisCodeType:"COB01"}},Qe=function(){return["compBasisCodeValue","compBasisCodeNameEn"]};let Je=(()=>{class e{constructor(e,t){this._dataService=e,this.alertService=t,this.submitEvent=new ye.n,this.closeEvent=new ye.n,this.useYnOptions=[{value:!0,label:"Y"},{value:!1,label:"N"}],this.unsubscribe$=new L.a,this.upsertForm=this._dataService.generatePutForm()}get rowItem(){return this._rowitem}set rowItem(e){this._rowitem=e,this.upsertFormData=this._setUpsertFormData(e),y.isEmpty(e)||(this.upsertForm.get("compCode").disable(),this.upsertForm.get("compBasisCodeValue").disable(),this.deptInput=e.parentCompBasisCodeValue)}ngOnInit(){}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onSubmit(){if(this.upsertForm.invalid)return void(this.checkValid=!0);const e=this._setPutCondition();this.submitEvent.emit(e),this.checkValid=!1}checkIsInvalid(e){return this.checkValid&&this.upsertForm.get(e)&&this.upsertForm.get(e).invalid}_setUpsertFormData(e){const t=this._dataService.initPutFormDataCondition(),i=this.selectedCompCode;if(y.isEmpty(e))return Object.assign(t,{compCode:i});const{compBasisCodeValue:o,compBasisCodeNameEn:s,compBasisCodeNameKo:a,parentCompBasisCodeValue:n,compErpCode:c,positionGroupSeq:r,useYn:p,compRemark:l}=e;return Object.assign({},t,{compCode:i,compBasisCodeValue:o,compBasisCodeNameEn:s,compBasisCodeNameKo:a,parentCompBasisCodeValue:n,compErpCode:c,positionGroupSeq:r,compRemark:l,useYn:p})}_setPutCondition(){const e=this.upsertForm.getRawValue();return console.log(e),y.omit(e,["rowid"])}}return e.\u0275fac=function(t){return new(t||e)(ye.Qb(xe),ye.Qb(Me.a))},e.\u0275cmp=ye.Kb({type:e,selectors:[["app-cp-department-form"]],inputs:{selectedCompCode:"selectedCompCode",positionGroupList:"positionGroupList",corporateDeptList:"corporateDeptList",compCodeList:"compCodeList",roleList:"roleList",rowItem:"rowItem"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:56,vars:16,consts:[[1,"modal-body"],[1,"table","table-bordered"],["width","20%"],[3,"formGroup","connectForm"],["scope","row",1,"th-bg"],["formControlName","compCode","dataKey","compCode","displayKey","compName","useAllOptionName","Select",3,"options","isInvalid"],["formControlName","compBasisCodeValue",3,"isInvalid"],["formControlName","parentCompBasisCodeValue","apiUrl","admin/user/comp/basis","dataKey","compBasisCodeValue","inputFieldFormat","{0} - &{1}","placeholder","Name",3,"inputFieldValue","apiSearchTerm","apiCondition","inputFieldFormatKeyList","isInvalid"],["formControlName","compBasisCodeNameEn",3,"isInvalid"],["formControlName","compBasisCodeNameKo",3,"isInvalid"],[1,"form-group"],["formControlName","useYn","name","useYn","label","Y",3,"value"],["formControlName","useYn","name","useYn","label","N",3,"value"],["formControlName","compRemark"],[1,"button-area","align-r","mt10"],["type","button",1,"btn","btn-secondary","sm",3,"click"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(e,t){1&e&&(ye.Wb(0,"div",0),ye.Wb(1,"div",1),ye.Wb(2,"table"),ye.Wb(3,"caption"),ye.Pc(4," Department Code Info "),ye.Vb(),ye.Wb(5,"colgroup"),ye.Rb(6,"col",2),ye.Vb(),ye.Wb(7,"tbody"),ye.Ub(8,3),ye.Wb(9,"tr"),ye.Wb(10,"th",4),ye.Wb(11,"sup"),ye.Pc(12,"Control Comp Code"),ye.Vb(),ye.Vb(),ye.Wb(13,"td"),ye.Rb(14,"app-selectbox",5),ye.Vb(),ye.Vb(),ye.Wb(15,"tr"),ye.Wb(16,"th",4),ye.Wb(17,"sup"),ye.Pc(18,"Dep. Code"),ye.Vb(),ye.Vb(),ye.Wb(19,"td"),ye.Rb(20,"app-input-text",6),ye.Vb(),ye.Vb(),ye.Wb(21,"tr"),ye.Wb(22,"th",4),ye.Pc(23,"Parent Department"),ye.Vb(),ye.Wb(24,"td"),ye.Rb(25,"app-auto-complete",7),ye.Vb(),ye.Vb(),ye.Wb(26,"tr"),ye.Wb(27,"th",4),ye.Wb(28,"sup"),ye.Pc(29,"Dep. Name(EN)"),ye.Vb(),ye.Vb(),ye.Wb(30,"td"),ye.Rb(31,"app-input-text",8),ye.Vb(),ye.Vb(),ye.Wb(32,"tr"),ye.Wb(33,"th",4),ye.Wb(34,"sup"),ye.Pc(35,"Dep. Name(KO)"),ye.Vb(),ye.Vb(),ye.Wb(36,"td"),ye.Rb(37,"app-input-text",9),ye.Vb(),ye.Vb(),ye.Wb(38,"tr"),ye.Wb(39,"th",4),ye.Wb(40,"sup"),ye.Pc(41,"Use YN"),ye.Vb(),ye.Vb(),ye.Wb(42,"td"),ye.Wb(43,"div",10),ye.Rb(44,"app-radio",11),ye.Rb(45,"app-radio",12),ye.Vb(),ye.Vb(),ye.Vb(),ye.Wb(46,"tr"),ye.Wb(47,"th",4),ye.Pc(48,"Control Remark"),ye.Vb(),ye.Wb(49,"td"),ye.Rb(50,"app-input-text",13),ye.Vb(),ye.Vb(),ye.Tb(),ye.Vb(),ye.Vb(),ye.Vb(),ye.Wb(51,"div",14),ye.Wb(52,"button",15),ye.fc("click",(function(){return t.onSubmit()})),ye.Pc(53,"Save"),ye.Vb(),ye.Wb(54,"button",16),ye.fc("click",(function(){return t.closeEvent.emit()})),ye.Pc(55,"Close"),ye.Vb(),ye.Vb(),ye.Vb()),2&e&&(ye.Cb(8),ye.pc("formGroup",t.upsertForm)("connectForm",t.upsertFormData),ye.Cb(6),ye.pc("options",t.compCodeList)("isInvalid",t.checkIsInvalid("compCode")),ye.Cb(6),ye.pc("isInvalid",t.checkIsInvalid("compBasisCodeValue")),ye.Cb(5),ye.pc("inputFieldValue",t.deptInput)("apiSearchTerm","compBasisCodeName")("apiCondition",ye.tc(14,Xe))("inputFieldFormatKeyList",ye.tc(15,Qe))("isInvalid",t.checkIsInvalid("parentCompBasisCodeValue")),ye.Cb(6),ye.pc("isInvalid",t.checkIsInvalid("compBasisCodeNameEn")),ye.Cb(6),ye.pc("isInvalid",t.checkIsInvalid("compBasisCodeNameKo")),ye.Cb(7),ye.pc("value",!0),ye.Cb(1),ye.pc("value",!1))},directives:[a.s,a.k,ze.a,Ae.a,a.r,a.i,He.a,Fe.a,qe.a],encapsulation:2,changeDetection:0}),e})(),Ze=(()=>{class e{constructor(){this.submitEvent=new ye.n,this.closeEvent=new ye.n,this.useYn=!0}onSubmit(){this.submitEvent.emit(this.useYn)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ye.Kb({type:e,selectors:[["app-cp-department-bulk"]],outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:22,vars:4,consts:[[1,"modal-body"],[1,"table","table-bordered"],["width","130px"],["scope","row",1,"th-bg"],[1,"form-group"],["name","useYn","label","Y",3,"ngModel","value","ngModelChange"],["name","useYn","label","N",3,"ngModel","value","ngModelChange"],[1,"button-area","align-r","mt10"],["type","button",1,"btn","btn-secondary","sm",3,"click"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(e,t){1&e&&(ye.Wb(0,"div",0),ye.Wb(1,"div",1),ye.Wb(2,"table"),ye.Wb(3,"caption"),ye.Pc(4," \uae30\uc5c5\uccb4 \ubd80\uc11c \uc77c\uad04\ubcc0\uacbd "),ye.Vb(),ye.Wb(5,"colgroup"),ye.Rb(6,"col",2),ye.Rb(7,"col"),ye.Vb(),ye.Wb(8,"tbody"),ye.Wb(9,"tr"),ye.Wb(10,"th",3),ye.Pc(11,"\uc0ac\uc6a9\uc5ec\ubd80"),ye.Rb(12,"sup"),ye.Vb(),ye.Wb(13,"td"),ye.Wb(14,"div",4),ye.Wb(15,"app-radio",5),ye.fc("ngModelChange",(function(e){return t.useYn=e})),ye.Vb(),ye.Wb(16,"app-radio",6),ye.fc("ngModelChange",(function(e){return t.useYn=e})),ye.Vb(),ye.Vb(),ye.Vb(),ye.Vb(),ye.Vb(),ye.Vb(),ye.Vb(),ye.Wb(17,"div",7),ye.Wb(18,"button",8),ye.fc("click",(function(){return t.onSubmit()})),ye.Pc(19,"\uc800\uc7a5"),ye.Vb(),ye.Wb(20,"button",9),ye.fc("click",(function(){return t.closeEvent.emit()})),ye.Pc(21,"\ub2eb\uae30"),ye.Vb(),ye.Vb(),ye.Vb()),2&e&&(ye.Cb(15),ye.pc("ngModel",t.useYn)("value",!0),ye.Cb(1),ye.pc("ngModel",t.useYn)("value",!1))},directives:[qe.a,a.r,a.u],encapsulation:2,changeDetection:0}),e})();var et=i("UIHd"),tt=i("kDLv");function it(e,t){if(1&e){const e=ye.Xb();ye.Wb(0,"app-cp-department-form",7),ye.fc("submitEvent",(function(t){return ye.Fc(e),ye.hc().submitUpsertHandler(t)}))("closeEvent",(function(){return ye.Fc(e),ye.hc().closeDetailPopupHandler()})),ye.ic(1,"async"),ye.ic(2,"async"),ye.ic(3,"async"),ye.ic(4,"async"),ye.ic(5,"async"),ye.Vb()}if(2&e){const e=ye.hc();ye.pc("roleList",ye.jc(1,6,e.role$))("selectedCompCode",e.selectedCompCode)("corporateDeptList",ye.jc(2,8,e.corporateDeptList$))("positionGroupList",ye.jc(3,10,e.positionGroupList$))("compCodeList",ye.jc(4,12,e.compCodeList$))("rowItem",ye.jc(5,14,e.selectedRowItem$))}}function ot(e,t){if(1&e){const e=ye.Xb();ye.Wb(0,"app-cp-department-bulk",8),ye.fc("submitEvent",(function(t){return ye.Fc(e),ye.hc().submitBulkUpdateHandler(t)}))("closeEvent",(function(){return ye.Fc(e),ye.hc().closeBulkUpdatePopupHandler()})),ye.Vb()}}let st=(()=>{class e{constructor(e,t,i){this.store=e,this._dataService=t,this.alertService=i,this.unsubscribe$=new L.a,this.positionGroupList$=e.pipe(Object(c.u)(me)),this.corporateDeptList$=e.pipe(Object(c.u)(ge)),this.compCodeList$=e.pipe(Object(c.u)(Ce)),this.role$=e.pipe(Object(c.u)(fe)),this.loading$=e.pipe(Object(c.u)(Oe)),this.reloadToggle$=e.pipe(Object(c.u)(je)),this.searchCondition$=e.pipe(Object(c.u)(ve)),this.otherSearchInfo$=e.pipe(Object(c.u)(Se)),this.gridDataList$=e.pipe(Object(c.u)(De)),this.listPageSize$=e.pipe(Object(c.u)(Ee)),this.gridState$=e.pipe(Object(c.u)(ke)),this.gridCheckedState$=e.pipe(Object(c.u)(Le)),this.gridDataTotalCount$=e.pipe(Object(c.u)(Pe)),this.isOpenDetailPopup$=e.pipe(Object(c.u)(Ie)),this.selectedRowItem$=e.pipe(Object(c.u)(Ve)),this.isOpenBulkUpdatePopup$=e.pipe(Object(c.u)(we)),this.columns=this._dataService.generateGridColumns(),this._initSubscription()}ngOnInit(){this.store.dispatch(o.compList({condition:{compTypeCodes:["CMP01"],limits:[0,50]}})),this.store.dispatch(o.loadRoleList({condition:{useYn:!0}}))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(o.initComponent()),this.store.dispatch(o.setGridCheckStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}fetchPositionGroupHandler(e){}fetchCorporateDeptHandler(e){console.log(e,"corporateCompCode"),y.isNil(e)?this.store.dispatch(o.loadCorporateDeptListSuccess({dataList:null})):this.store.dispatch(o.loadCorporateDeptList({condition:{compCode:e,compBasisCodeType:"COB01",limits:[0,1e6]}}))}changePageSizeHandler(e){this.store.dispatch(o.changePageSize({pageSize:e}))}clickSearchHandler({searchCondition:e,otherSearchInfo:t}){this.store.dispatch(o.changeSearchCondition({searchCondition:e,otherSearchInfo:t}))}clickResetHandler(){this.store.dispatch(o.changeSearchCondition({searchCondition:{},otherSearchInfo:null}))}gridStateChangeHandler(e){this.store.dispatch(o.setGridStateAction({gridState:e}))}clickAddHandler(){this.searchFormEl.searchFormValid?(this.selectedCompCode=this.searchFormEl.compCodeValue,this.store.dispatch(o.addSelectedDetailRowInfo({selectedDetailRowInfo:null})),this.openDetailPopupHandler()):this.alertService.alert("Please set the search criteria for the company name.")}dbClickRowHandler(e){this.searchFormEl.searchFormValid?(this.selectedCompCode=this.searchFormEl.compCodeValue,this.store.dispatch(o.addSelectedDetailRowInfo({selectedDetailRowInfo:y.cloneDeep(e)})),this.openDetailPopupHandler()):this.alertService.alert("Please set the search criteria for the company name.")}openDetailPopupHandler(){this.store.dispatch(o.openDetailPopup())}closeDetailPopupHandler(){this.store.dispatch(o.closeDetailPopup()),this.store.dispatch(o.delSelectedDetailRowInfo())}clickBulkUpdateHandler(){this.gridEl.checkedDataList.length<1?this.alertService.alert("No data is selected."):this.openBulkUpdatePopupHandler()}openBulkUpdatePopupHandler(){this.store.dispatch(o.openBulkUpdatePopup())}closeBulkUpdatePopupHandler(){this.store.dispatch(o.closeBulkUpdatePopup())}submitBulkUpdateHandler(e){const t=this.gridEl.checkedDataList.map(e=>e.rowid);this.store.dispatch(o.bulkUpdateAction({condition:{rowids:t,useYn:e}}))}submitUpsertHandler(e){this.store.dispatch(o.upsertMasterAction({upsertCondition:e}))}_initSubscription(){this.reloadToggle$.pipe(Object(E.a)(1),Object(I.a)(this.unsubscribe$)).subscribe(()=>{this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()}),Object(P.a)([this.searchCondition$,this.gridState$]).pipe(Object(V.a)(200),Object(E.a)(1),Object(w.a)(([e])=>!y.isEmpty(e)),Object(I.a)(this.unsubscribe$)).subscribe(([e,{pageInfo:t,sortInfo:i}])=>{const s=this._setSortOrder(i),a=Object.assign({},e,{limits:[t.skip,t.skip+t.take],sortOrder:s});this.store.dispatch(o.loadList({condition:a}))})}_setSortOrder(e){return e.filter(e=>!y.isNil(e.dir)).map(e=>({keyName:e.field,sort:e.dir}))}}return e.\u0275fac=function(t){return new(t||e)(ye.Qb(c.h),ye.Qb(xe),ye.Qb(Me.a))},e.\u0275cmp=ye.Kb({type:e,selectors:[["app-cp-department"]],viewQuery:function(e,t){var i;1&e&&(ye.Xc(Te,!0),ye.Xc(et.a,!0)),2&e&&(ye.Dc(i=ye.gc())&&(t.searchFormEl=i.first),ye.Dc(i=ye.gc())&&(t.gridEl=i.first))},decls:22,vars:48,consts:[[3,"otherSearchInfo","searchCondition","compCodeList","fetchPositionGroupEvent","fetchCorporateDeptEvent","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","clickAddEvent","clickBulkUpdateEvent","changePageSizeEvent"],[3,"gridLoading","columns","gridState","checkedState","totalCount","dataList","stateChangeEvent","dbClickRowEvent"],["modalSize","sm","modalContentClass","pd-all","header","Department Code Info",3,"visible","modal","visibleChange"],[3,"roleList","selectedCompCode","corporateDeptList","positionGroupList","compCodeList","rowItem","submitEvent","closeEvent",4,"ngIf"],["modalSize","sm","modalContentClass","pd-all","header","\uc77c\uad04\ubcc0\uacbd",3,"visible","modal","visibleChange"],[3,"submitEvent","closeEvent",4,"ngIf"],[3,"roleList","selectedCompCode","corporateDeptList","positionGroupList","compCodeList","rowItem","submitEvent","closeEvent"],[3,"submitEvent","closeEvent"]],template:function(e,t){1&e&&(ye.Wb(0,"app-cp-department-search",0),ye.fc("fetchPositionGroupEvent",(function(e){return t.fetchPositionGroupHandler(e)}))("fetchCorporateDeptEvent",(function(e){return t.fetchCorporateDeptHandler(e)}))("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),ye.ic(1,"async"),ye.ic(2,"async"),ye.ic(3,"async"),ye.Vb(),ye.Wb(4,"app-cp-department-control",1),ye.fc("clickAddEvent",(function(){return t.clickAddHandler()}))("clickBulkUpdateEvent",(function(){return t.clickBulkUpdateHandler()}))("changePageSizeEvent",(function(e){return t.changePageSizeHandler(e)})),ye.ic(5,"async"),ye.ic(6,"async"),ye.ic(7,"async"),ye.Vb(),ye.Wb(8,"app-grid-simple",2),ye.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)}))("dbClickRowEvent",(function(e){return t.dbClickRowHandler(e)})),ye.ic(9,"async"),ye.ic(10,"async"),ye.ic(11,"async"),ye.ic(12,"async"),ye.ic(13,"async"),ye.Vb(),ye.Wb(14,"app-dialog",3),ye.fc("visibleChange",(function(){return t.closeDetailPopupHandler()})),ye.ic(15,"async"),ye.Nc(16,it,6,16,"app-cp-department-form",4),ye.ic(17,"async"),ye.Vb(),ye.Wb(18,"app-dialog",5),ye.fc("visibleChange",(function(){return t.closeBulkUpdatePopupHandler()})),ye.ic(19,"async"),ye.Nc(20,ot,1,0,"app-cp-department-bulk",6),ye.ic(21,"async"),ye.Vb()),2&e&&(ye.pc("otherSearchInfo",ye.jc(1,18,t.otherSearchInfo$))("searchCondition",ye.jc(2,20,t.searchCondition$))("compCodeList",ye.jc(3,22,t.compCodeList$)),ye.Cb(4),ye.pc("loading",ye.jc(5,24,t.loading$))("currentPageSize",ye.jc(6,26,t.listPageSize$))("totalCount",ye.jc(7,28,t.gridDataTotalCount$)),ye.Cb(4),ye.pc("gridLoading",ye.jc(9,30,t.loading$))("columns",t.columns)("gridState",ye.jc(10,32,t.gridState$))("checkedState",ye.jc(11,34,t.gridCheckedState$))("totalCount",ye.jc(12,36,t.gridDataTotalCount$))("dataList",ye.jc(13,38,t.gridDataList$)),ye.Cb(6),ye.pc("visible",ye.jc(15,40,t.isOpenDetailPopup$))("modal",!0),ye.Cb(2),ye.pc("ngIf",ye.jc(17,42,t.isOpenDetailPopup$)),ye.Cb(2),ye.pc("visible",ye.jc(19,44,t.isOpenBulkUpdatePopup$))("modal",!0),ye.Cb(2),ye.pc("ngIf",ye.jc(21,46,t.isOpenBulkUpdatePopup$)))},directives:[Te,Ke,et.a,tt.a,s.o,Je,Ze],pipes:[s.b],encapsulation:2,changeDetection:0}),e})();const at=[{path:"",component:st,data:{title:"\uae30\uc5c5\uccb4 \ubd80\uc11c\uad00\ub9ac"}}];let nt=(()=>{class e{}return e.\u0275mod=ye.Ob({type:e}),e.\u0275inj=ye.Nb({factory:function(t){return new(t||e)},imports:[[k.f.forChild(at)],k.f]}),e})();var ct=i("lJxs"),rt=i("JIr8"),pt=i("bOdf"),lt=i("zp1y"),ut=i("IzEk"),dt=i("vkgz"),bt=i("Xb6A");let ht=(()=>{class e{constructor(e,t,i,s,a){this.actions$=e,this.service=t,this._errorService=i,this.alertService=s,this.store=a,this.loadCorporateDeptList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(o.loadCorporateDeptList),Object(Re.a)(({condition:e})=>this.service.getCorporateDeptList(e).pipe(Object(ct.a)(e=>o.loadCorporateDeptListSuccess({dataList:e})),Object(rt.a)(e=>{const t="Department list lookup failed.",i=[o.loadCorporateDeptListFailure({error:t})];return this._catchErr(e,t,i),[]}))))),this.loadList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(o.loadList),Object(Re.a)(({condition:e})=>this.service.getList(e).pipe(Object(ct.a)(({dataList:e,totalCount:t})=>o.getListSuccess({dataList:e,totalCount:t})),Object(rt.a)(e=>{const t="List lookup failed. Please try again in a momentarily.",i=[o.getListFailure({error:t})];return this._catchErr(e,t,i),[]}))))),this.getCompList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(o.compList),Object(pt.a)(e=>Object(Ne.a)(e).pipe(Object(lt.a)(this.compCodeList$.pipe(Object(ut.a)(1))))),Object(Re.a)(([{condition:e},t])=>y.isNil(t)||0===t.length?this.service.getCompList(e).pipe(Object(ct.a)(e=>o.compListSuccess({dataList:e})),Object(rt.a)(e=>(this._catchErr(e,"List lookup failed. Please try again in a momentarily.",[]),[]))):Object(Ne.a)(o.compListSuccess({dataList:t}))))),this.loadRoleList$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(o.loadRoleList),Object(pt.a)(e=>Object(Ne.a)(e).pipe(Object(lt.a)(this.role$.pipe(Object(ut.a)(1))))),Object(Re.a)(([{condition:e},t])=>y.isNil(t)||0===t.length?this.service.getRoleList(e).pipe(Object(ct.a)(e=>o.getRoleListSuccess({dataList:e})),Object(rt.a)(e=>(this._catchErr(e,"List lookup failed. Please try again in a momentarily.",[]),[]))):Object(Ne.a)(o.getRoleListSuccess({dataList:t}))))),this.upsertItem$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(o.upsertMasterAction),Object(Re.a)(({upsertCondition:e})=>this.service.upsertItem(e).pipe(Object(ct.a)(t=>({succeedYn:!0,dataResult:t,upsertCondition:e})),Object(rt.a)(e=>Object(Ne.a)({succeedYn:!1,error:e})))),Object(dt.a)(({succeedYn:e,error:t})=>{if(e){const e="Your data has been saved.",t=[o.closeDetailPopup(),o.reloadList()];this._runPage(e,t)}else this._catchErr(t,"Failed to save.")})),{dispatch:!1}),this.bulkUpdate$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(o.bulkUpdateAction),Object(Re.a)(({condition:e})=>this.service.bulkUpdate(e).pipe(Object(ct.a)(e=>({succeedYn:!0,dataResult:e})),Object(rt.a)(e=>Object(Ne.a)({succeedYn:!1,error:e})))),Object(dt.a)(({succeedYn:e,error:t})=>{if(e){const e="Your data has been saved.",t=[o.closeBulkUpdatePopup(),o.reloadList()];this._runPage(e,t)}else this._catchErr(t,"Failed to save.")})),{dispatch:!1}),this.positionGroupList$=a.pipe(Object(c.u)(me)),this.selectedDetailRowInfo$=a.pipe(Object(c.u)(Ve)),this.compCodeList$=a.pipe(Object(c.u)(Ce)),this.role$=a.pipe(Object(c.u)(fe))}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this.store.dispatch(e)})}:()=>{}})}_catchErr(e,t,i){const o=this._errorService.errorHandler(e,t);y.isNil(o)||(y.isNil(o.accept)&&(o.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(e=>{this.store.dispatch(e)})}:()=>{}),this.alertService.alert(o))}}return e.\u0275fac=function(t){return new(t||e)(ye.bc(n.a),ye.bc(Ge),ye.bc(bt.a),ye.bc(Me.a),ye.bc(c.h))},e.\u0275prov=ye.Mb({token:e,factory:e.\u0275fac}),e})();const mt=[st],gt=[Te,Ke,Je,Ze];let Ct=(()=>{class e{}return e.\u0275mod=ye.Ob({type:e}),e.\u0275inj=ye.Nb({factory:function(t){return new(t||e)},imports:[[s.c,a.m,a.w,r.m,p.a,l.a,u.a,O.a,d.a,b.a,h.a,m.a,g.a,C.a,f.a,j.a,v.a,S.a,D.a,nt,c.j.forFeature("cpDepartment",de),n.b.forFeature([ht])]]}),e})()}}]);