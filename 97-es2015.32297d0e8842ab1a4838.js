(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{"7G9D":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var o=i("tk/3"),s=i("IzEk"),n=i("LvDl"),c=i("fXoL"),a=i("tpT/"),r=i("EsKh");let l=(()=>{class e{constructor(e,t){this.api=e,this.alertService=t}imageCheck(e){if(0===e.target.files.length)return!1;const t=e.target.files[0];if(t.size>2e6)return this.alertService.alert("\ud30c\uc77c \uc0ac\uc774\uc988\ub294 2MB\ub97c \ub118\uae38 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"),!1;let i=this.parseFileName(t.name);const o=i.toLowerCase(),s=o.lastIndexOf("."),n=o.substring(s+1);if(s<0)i+=".jpg";else if("jpg"!==n&&"png"!==n&&"jpeg"!==n)return this.alertService.alert("\uc774\ubbf8\uc9c0 \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return t}pdfCheck(e){if(0===e.target.files.length)return!1;const t=e.target.files[0];let i=this.parseFileName(t.name);const o=i.toLowerCase(),s=o.lastIndexOf("."),n=o.substring(s+1);if(s<0)i+=".pdf";else if("pdf"!==n)return this.alertService.alert("PDF \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return t}excelCheck(e){if(0===e.target.files.length)return!1;const t=e.target.files[0];let i=this.parseFileName(t.name);const o=i.toLowerCase(),s=o.lastIndexOf("."),n=o.substring(s+1);if(s<0)i+=".xls";else if("xls"!==n&&"xlsx"!==n)return this.alertService.alert("\uc5d1\uc140 \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return t}imageUpload(e,t){const i=new FormData;for(const s in t)if(t.hasOwnProperty(s))try{i.set(s,t[s])}catch(o){i.append(s,t[s])}return this.api.post(e,i)}fileUpload(e,t){const i=new FormData;for(const s in t)if(t.hasOwnProperty(s))try{i.set(s,t[s])}catch(o){i.append(s,t[s])}return this.api.put(e,i)}fileDelete(e,t){const i=Object.assign({},this.api.defaultParams,{condition:t});return this.api.delete(e,i)}fileDownload(e){let t,i;switch(e.params||(e=Object.assign(e,{params:""})),e.type||(e.type="excel"),e.type){case"excel":t=".xls",i="application/vnd.ms-excel";break;case"pdf":t=".pdf",i="application/pdf"}const c=o=>{const s=document.createElement("a"),n=new Blob([o],{type:i});s.href=URL.createObjectURL(n),s.download=e.filename+t,s.click()};if("post"===e.requestMethod){const t=n.assign({},this.api.defaultParams,{condition:e.params});return this.api.postBlob(e.url,t).pipe(Object(s.a)(1)).subscribe(e=>{"application/json"===e.type?this.alertService.alert("You must wait a minute before making another request."):c(e)})}return this.api.get(e.url,e.params,{responseType:"blob",headers:new o.e({"Content-Type":"application/json",Accept:"application/json"})}).pipe(Object(s.a)(1)).subscribe(e=>{c(e)})}parseFileName(e){const t=/[\{\}\[\]\/?,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"' ']/gi,i=e;return t.test(i)?i.replace(t,""):i}}return e.\u0275fac=function(t){return new(t||e)(c.bc(a.a),c.bc(r.a))},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},Mg9P:function(e,t,i){"use strict";i.r(t),i.d(t,"CONTAINERS",(function(){return ct})),i.d(t,"COMPONENTS",(function(){return at})),i.d(t,"CpPositionModule",(function(){return rt}));var o={};i.r(o),i.d(o,"initThisState",(function(){return F})),i.d(o,"loadPositionGroupSeqAction",(function(){return W})),i.d(o,"loadPositionGroupSeqSuccessAction",(function(){return N})),i.d(o,"loadPositionGroupSeqFailureAction",(function(){return $})),i.d(o,"changeSearchCondition",(function(){return _})),i.d(o,"reloadList",(function(){return G})),i.d(o,"loadList",(function(){return R})),i.d(o,"getListSuccess",(function(){return x})),i.d(o,"getListFailure",(function(){return B})),i.d(o,"compList",(function(){return q})),i.d(o,"compListSuccess",(function(){return z})),i.d(o,"setGridCheckStateAction",(function(){return A})),i.d(o,"setGridStateAction",(function(){return T})),i.d(o,"changePageIndex",(function(){return Y})),i.d(o,"changePageSize",(function(){return H})),i.d(o,"openDetailPopup",(function(){return K})),i.d(o,"closeDetailPopup",(function(){return U})),i.d(o,"addSelectedDetailRowInfo",(function(){return M})),i.d(o,"delSelectedDetailRowInfo",(function(){return Q})),i.d(o,"upsertItem",(function(){return X})),i.d(o,"upsertItemSuccess",(function(){return J})),i.d(o,"upsertItemFailure",(function(){return Z})),i.d(o,"selectCompCode",(function(){return ee}));var s=i("ofXK"),n=i("3Pt+"),c=i("snw9"),a=i("kt0X"),r=i("WG3B"),l=i("xoAz"),p=i("wPo9"),d=i("7rOj"),u=i("+NQf"),b=i("6LsY"),h=i("l1P7"),m=i("v7zA"),C=i("7UZF"),g=i("hHe4"),f=i("1OXJ"),O=i("5hwk"),j=i("kKjH"),S=i("qXPF"),v=i("w8np"),P=i("vu/V"),k=i("tyNb"),I=i("XNiG"),w=i("itXk"),L=i("zP0r"),y=i("1G5W"),V=i("Kj3r"),E=i("pLZG"),D=i("LvDl");const F=Object(a.o)("[CpPosition/List] init component state"),W=Object(a.o)("[CpComp/List] load position GroupSeq",Object(a.t)()),N=Object(a.o)("[CpComp/List] load position GroupSeq success",Object(a.t)()),$=Object(a.o)("[CpComp/List] load position GroupSeq failure",Object(a.t)()),_=Object(a.o)("[CpPosition/List] change search condition",Object(a.t)()),G=Object(a.o)("[CpPosition/List] reload grid data list"),R=Object(a.o)("[CpPosition/List] load grid data list",Object(a.t)()),x=Object(a.o)("[CpPosition/List] get list success",Object(a.t)()),B=Object(a.o)("[CpPosition/List] get list failure",Object(a.t)()),q=Object(a.o)("[CpPosition/List] load comp list",Object(a.t)()),z=Object(a.o)("[CpPosition/List] get comp list success",Object(a.t)()),A=Object(a.o)("[CpPosition/List] set grid checked rowids",Object(a.t)()),T=Object(a.o)("[CpPosition/List] set grid state",Object(a.t)()),Y=Object(a.o)("[CpPosition/List] change page index",Object(a.t)()),H=Object(a.o)("[CpPosition/List] change page size",Object(a.t)()),K=Object(a.o)("[CpPosition/Detail] \uc0c1\uc138\ud31d\uc5c5 \uc5f4\uae30"),U=Object(a.o)("[CpPosition/Detail] \uc0c1\uc138\ud31d\uc5c5 \ub2eb\uae30"),M=Object(a.o)("[CpPosition/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc120\ud0dd",Object(a.t)()),Q=Object(a.o)("[CpPosition/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc81c\uac70"),X=Object(a.o)("[CpPosition/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(a.t)()),J=Object(a.o)("[CpPosition/List] upsert item success",Object(a.t)()),Z=Object(a.o)("[CpPosition/List] upsert item failure",Object(a.t)()),ee=Object(a.o)("[CpPosition/Detail] \uae30\uc5c5\uccb4\uba85 \uc138\ud305",Object(a.t)());var te=i("EVqC");const ie=Object(te.a)({selectId:e=>e.id,sortComparer:!1}),oe=ie.getInitialState({positionGroupSeq:null,loading:!1,reloadToggle:!1,searchCondition:null,otherSearchInfo:null,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},gridDataTotal:null,gridCheckedState:null,selectedDetailRowInfo:null,isOpenDetailPopup:!1,selectCompCode:null,compCodeList:null}),se=Object(a.q)(oe,Object(a.s)(o.initThisState,e=>Object.assign(Object.assign({},e),{loading:!1,reloadToggle:!1,selectedDetailRowInfo:null,isOpenDetailPopup:!1})),Object(a.s)(o.loadPositionGroupSeqSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{positionGroupSeq:t})),Object(a.s)(o.compListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{compCodeList:t})),Object(a.s)(o.reloadList,e=>Object.assign(Object.assign({},e),{reloadToggle:!e.reloadToggle})),Object(a.s)(o.loadList,e=>Object.assign(Object.assign({},e),{loading:!0})),Object(a.s)(o.getListSuccess,(e,{dataList:t,totalCount:i})=>ie.setAll(t,Object.assign(Object.assign({},e),{loading:!1,gridDataTotal:i}))),Object(a.s)(o.getListFailure,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(a.s)(o.changeSearchCondition,(e,{searchCondition:t,otherSearchInfo:i})=>Object.assign(Object.assign({},e),{searchCondition:t,otherSearchInfo:i})),Object(a.s)(o.setGridCheckStateAction,(e,{gridCheckedState:t})=>Object.assign(Object.assign({},e),{gridCheckedState:t})),Object(a.s)(o.setGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{gridState:t})),Object(a.s)(o.changePageSize,(e,{pageSize:t})=>Object.assign(Object.assign({},e),{gridState:D.set(D.cloneDeep(e.gridState),["pageInfo","take"],t)})),Object(a.s)(o.changePageIndex,(e,{pageIndex:t})=>Object.assign(Object.assign({},e),{gridState:D.set(D.cloneDeep(e.gridState),["pageInfo","skip"],t)})),Object(a.s)(o.openDetailPopup,e=>Object.assign(Object.assign({},e),{isOpenDetailPopup:!0})),Object(a.s)(o.closeDetailPopup,e=>Object.assign(Object.assign({},e),{isOpenDetailPopup:!1})),Object(a.s)(o.addSelectedDetailRowInfo,(e,{selectedDetailRowInfo:t})=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:t})),Object(a.s)(o.delSelectedDetailRowInfo,e=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:null})),Object(a.s)(o.selectCompCode,(e,{compCode:t})=>Object.assign(Object.assign({},e),{selectCompCode:t})));function ne(e,t){return Object(a.m)({cpPosition:se})(e,t)}const ce=Object(a.p)("cpPosition"),ae=Object(a.r)(ce,e=>e.cpPosition),re=Object(a.r)(ae,e=>e.positionGroupSeq),le=Object(a.r)(ae,e=>e.reloadToggle),pe=Object(a.r)(ae,e=>e.loading),de=Object(a.r)(ae,e=>e.searchCondition),ue=Object(a.r)(ae,e=>e.otherSearchInfo),be=Object(a.r)(ae,e=>e.compCodeList),he=ie.getSelectors(ae).selectAll,me=(ie.getSelectors(ae),Object(a.r)(ae,e=>e.gridState)),Ce=Object(a.r)(ae,e=>e.gridDataTotal),ge=Object(a.r)(ae,e=>e.gridCheckedState),fe=Object(a.r)(me,e=>D.get(e,["pageInfo","take"],20)),Oe=Object(a.r)(ae,e=>e.selectedDetailRowInfo),je=Object(a.r)(ae,e=>e.isOpenDetailPopup),Se=Object(a.r)(ae,e=>e.selectCompCode);var ve=i("fXoL"),Pe=i("pfiq"),ke=i("LRne"),Ie=i("z6cu"),we=i("eIep"),Le=i("AytR");const{API_URL:ye}=Le.a,Ve={selectEntities:`${ye}/admin/user/comp/basis`,modifyEntity:`${ye}/admin/user/comp/basis`,positionGroup:`${ye}/admin/corporate/position-group`,postComp:`${ye}/common/comp`};var Ee=i("tpT/");let De=(()=>{class e{constructor(e){this.api=e}getList(e){const t=D.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ve.selectEntities,t).pipe(Object(we.a)(e=>{var t,i;if(e.succeedYn){const o=this.addRowId(null===(t=e.result)||void 0===t?void 0:t.list);return Object(ke.a)({dataList:o,totalCount:(null===(i=e.result)||void 0===i?void 0:i.totalCount)||0})}return Object(Ie.a)(e||"api response error")}))}getCompList(e){const t=D.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ve.postComp,t).pipe(Object(we.a)(e=>{if(e.succeedYn&&e.result){const t=e.result.list;return Object(ke.a)(t)}return Object(Ie.a)(e||"api response error")}))}upsertItem(e){const t=D.assign({},this.api.defaultParams,{condition:e});return this.api.put(Ve.modifyEntity,t).pipe(Object(we.a)(e=>e.succeedYn?Object(ke.a)(e.result):Object(Ie.a)(e||"api response error")))}getPositionGroupSeq(e){const t=D.assign({},this.api.defaultParams,{condition:e});return this.api.post(Ve.positionGroup,t).pipe(Object(we.a)(e=>e.succeedYn?Object(ke.a)(e.result.list):Object(Ie.a)(e||"api response error")))}addRowId(e){return e.map((e,t)=>{e.rowid=String(t),e.id=String(t)}),e}}return e.\u0275fac=function(t){return new(t||e)(ve.bc(Ee.a))},e.\u0275prov=ve.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Fe=(()=>{class e{constructor(e){this.fb=e,this.generateGridColumns=()=>[{field:"compCode",title:"Comp. Code",width:100},{field:"compBasisCodeValue",title:"Position Code",width:100},{field:"compBasisCodeNameEn",title:"Position Name(EN)",width:180},{field:"compBasisCodeNameKo",title:"Position Name(KO)",width:180},{field:"useYn",title:"Use YN",width:80,template:"useYnTpl",style:{"text-align":"center"}},{field:"compRemark",title:"Control Remark",width:200},{field:"lastUpdateName",title:"Last Update User",width:100},{field:"lastUpdateDatetime",title:"Last Update Time",width:150,style:{"text-align":"center"}}],this.generateListSearchForm=()=>this.fb.group({compCode:[null,[n.z.required]],compBasisCodeType:[null],positionGroupSeq:[null],compBasisCodeName:[null],useYn:[null]}),this.initListSearch=()=>({compCode:11e4,compBasisCodeType:"COB02",positionGroupSeq:null,compBasisCodeName:null,useYn:null}),this.generatePutForm=()=>this.fb.group({compCode:[{value:null,disabled:!1},[n.z.required]],compBasisCodeType:[null],compBasisCodeValue:[{value:null,disabled:!1},[n.z.required]],compBasisCodeNameEn:[null,[n.z.required]],compBasisCodeNameKo:[null,[n.z.required]],useYn:[null,[n.z.required]],compRemark:[null]}),this.initPutFormData=()=>({compCode:null,compBasisCodeType:"COB02",compBasisCodeValue:null,compBasisCodeNameEn:null,compBasisCodeNameKo:null,compRemark:null,useYn:!0})}}return e.\u0275fac=function(t){return new(t||e)(ve.bc(n.f))},e.\u0275prov=ve.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var We=i("+Sob"),Ne=i("U6NN"),$e=i("gbCm");let _e=(()=>{class e{constructor(e){this._dataService=e,this.clickSearchEvent=new ve.n,this.clickResetEvent=new ve.n,this.changeSearchConditionEvent=new ve.n,this.selectCompCode=new ve.n,this.isShowmore=!1,this.useYnOptions=[{label:"Y",value:!0},{label:"N",value:!1}],this.searchForm=this._dataService.generateListSearchForm()}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(e){this._otherSearchInfo=e,this._setOtherSearchInfo(e)}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}get searchFormValid(){return this.searchForm.valid}ngOnInit(){this._initThisState()}onSubmit(){if(this.searchForm.invalid)return void(this._checkValid=!0);const e=this.setSearchCondition(),t=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:e,otherSearchInfo:t}),this._checkValid=!1}onReset(){this.clickResetEvent.emit()}onSelectCompCode(e){const{corporateCompCode:t}=e;this.selectCompCode.emit(t)}checkIsInvalid(e){return this._checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}_initThisState(){}setSearchCondition(){const e=this._dataService.initListSearch(),t=Object.assign({},D.pick(this.searchForm.value,Object.keys(e)));return D.omitBy(t,D.isNil)}_setSearchFormData(e){const t=this._dataService.initListSearch();return Object.assign({},t,D.pick(e,Object.keys(t)))}_setOtherSearchInfo(e){this.compCodeInput=(null==e?void 0:e.compCodeInput)||null,this.positionGroupInput=(null==e?void 0:e.positionGroupInput)||null}_setOtherSearchCondition(){const e={};return this.autoCopmpletes.forEach(t=>{Object.assign(e,t.getInputValue())}),e}}return e.\u0275fac=function(t){return new(t||e)(ve.Qb(Fe))},e.\u0275cmp=ve.Kb({type:e,selectors:[["app-cp-position-search"]],viewQuery:function(e,t){var i;1&e&&ve.Xc(Pe.a,!0),2&e&&ve.Dc(i=ve.gc())&&(t.autoCopmpletes=i)},inputs:{compCodeList:"compCodeList",otherSearchInfo:"otherSearchInfo",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent",changeSearchConditionEvent:"changeSearchConditionEvent",selectCompCode:"selectCompCode"},decls:21,vars:7,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-1"],[1,"form-label"],["dataKey","compCode","displayKey","compName","formControlName","compCode",1,"flex-fill",3,"useAllOptionYn","options"],["formControlName","useYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","compBasisCodeName"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(e,t){1&e&&(ve.Wb(0,"form",0),ve.fc("ngSubmit",(function(){return t.onSubmit()})),ve.Wb(1,"div",1),ve.Wb(2,"div",2),ve.Wb(3,"div",3),ve.Wb(4,"span",4),ve.Wb(5,"sup"),ve.Pc(6,"Control Comp Code"),ve.Vb(),ve.Vb(),ve.Rb(7,"app-selectbox",5),ve.Vb(),ve.Wb(8,"div",3),ve.Wb(9,"span",4),ve.Pc(10,"Use YN"),ve.Vb(),ve.Rb(11,"app-selectbox",6),ve.Vb(),ve.Wb(12,"div",3),ve.Wb(13,"span",4),ve.Pc(14,"Position Name"),ve.Vb(),ve.Rb(15,"app-input-text",7),ve.Vb(),ve.Vb(),ve.Vb(),ve.Wb(16,"div",8),ve.Wb(17,"button",9),ve.Pc(18,"Search"),ve.Vb(),ve.Wb(19,"button",10),ve.fc("click",(function(){return t.onReset()})),ve.Pc(20,"Reset"),ve.Vb(),ve.Vb(),ve.Vb()),2&e&&(ve.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),ve.Cb(7),ve.Gb("valid-error",t.checkIsInvalid("compCode")),ve.pc("useAllOptionYn",!1)("options",t.compCodeList),ve.Cb(4),ve.pc("options",t.useYnOptions))},directives:[n.B,n.s,n.k,We.a,Ne.a,n.r,n.i,$e.a],encapsulation:2,changeDetection:0}),e})();var Ge=i("UIHd"),Re=i("EsKh"),xe=i("7G9D");let Be=(()=>{class e{constructor(e){this.alertService=e,this.clickAddEvent=new ve.n,this.changePageSizeEvent=new ve.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onClickAdd(){this.clickAddEvent.emit()}onChangePageSize(e){this.changePageSizeEvent.emit(e.value)}}return e.\u0275fac=function(t){return new(t||e)(ve.Qb(Re.a))},e.\u0275cmp=ve.Kb({type:e,selectors:[["app-cp-position-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount",selectCompCode:"selectCompCode"},outputs:{clickAddEvent:"clickAddEvent",changePageSizeEvent:"changePageSizeEvent"},decls:8,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&(ve.Wb(0,"div",0),ve.Wb(1,"strong",1),ve.Pc(2),ve.Vb(),ve.Wb(3,"div",2),ve.Wb(4,"button",3),ve.fc("click",(function(){return t.onClickAdd()})),ve.Pc(5,"New"),ve.Vb(),ve.Wb(6,"div",4),ve.Wb(7,"app-selectbox",5),ve.fc("onChange",(function(e){return t.onChangePageSize(e)})),ve.Vb(),ve.Vb(),ve.Vb(),ve.Vb()),2&e&&(ve.Cb(2),ve.Qc(t.loading?"":t.totalCount),ve.Cb(5),ve.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[Ne.a,n.r,n.u],encapsulation:2,changeDetection:0}),e})();var qe=i("kDLv"),ze=i("Onn4");let Ae=(()=>{class e{constructor(e,t){this._dataService=e,this.fb=t,this.submitEvent=new ve.n,this.closeEvent=new ve.n,this.selectPositionCode=new ve.n,this._$unsubscribe=new I.a,this.upsertForm=this._dataService.generatePutForm()}get rowItem(){return this._rowitem}set rowItem(e){this._rowitem=e,this.upsertFormData=this._setPutFormData(e),this._initThisState(e)}ngAfterContentInit(){this._initSubscription(),this._initThisState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.upsertForm.invalid)return void(this._checkValid=!0);const e=this._setPutCondition();this.submitEvent.emit(e),this._checkValid=!1}onClose(){this.closeEvent.emit()}onSelectPositionGroup(e){const{compBasisCodeValue:t}=e;this.selectPositionCode.emit(t)}checkIsInvalid(e){return this._checkValid&&this.upsertForm.get(e)&&this.upsertForm.get(e).invalid}_initThisState(e){this._checkValid=!1}_setPutFormData(e){const t=this._dataService.initPutFormData();return D.isEmpty(e)?t:(this.upsertForm.get("compCode").disable(),this.upsertForm.get("compBasisCodeValue").disable(),Object.assign({},t,D.pick(e,Object.keys(t))))}_setPutCondition(){const e=this._dataService.initPutFormData(),t=this.upsertForm.getRawValue(),i=D.omitBy(Object.assign({},D.pick(t,Object.keys(e))),this._isEmptyString);return D.pick(i,Object.keys(e))}_initSubscription(){}_isEmptyString(e){return""===e}}return e.\u0275fac=function(t){return new(t||e)(ve.Qb(Fe),ve.Qb(n.f))},e.\u0275cmp=ve.Kb({type:e,selectors:[["app-cp-position-form"]],inputs:{positionGroupSeq:"positionGroupSeq",selectCompCode:"selectCompCode",compCodeList:"compCodeList",rowItem:"rowItem"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent",selectPositionCode:"selectPositionCode"},decls:52,vars:12,consts:[[1,"modal-body"],[3,"formGroup","connectForm","ngSubmit"],[1,"table","table-bordered"],["width","150px"],["scope","row",1,"th-bg"],["useAllOptionName","Select","dataKey","compCode","displayKey","compName","formControlName","compCode",1,"flex-fill",3,"options"],["formControlName","compBasisCodeValue",3,"isInvalid"],["formControlName","compBasisCodeNameEn",3,"isInvalid"],["formControlName","compBasisCodeNameKo",3,"isInvalid"],[1,"form-group"],["formControlName","useYn","name","useYn","label","Y",3,"value"],["formControlName","useYn","name","useYn","label","N",3,"value"],["colspan","3"],[1,"textarea"],["cols","30","rows","3","formControlName","compRemark"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(e,t){1&e&&(ve.Wb(0,"div",0),ve.Wb(1,"form",1),ve.fc("ngSubmit",(function(){return t.onSubmit()})),ve.Wb(2,"div",2),ve.Wb(3,"table"),ve.Wb(4,"caption"),ve.Pc(5," Position Code Info. "),ve.Vb(),ve.Wb(6,"colgroup"),ve.Rb(7,"col",3),ve.Vb(),ve.Wb(8,"tbody"),ve.Wb(9,"tr"),ve.Wb(10,"th",4),ve.Wb(11,"sup"),ve.Pc(12,"Comp Code"),ve.Vb(),ve.Vb(),ve.Wb(13,"td"),ve.Rb(14,"app-selectbox",5),ve.Vb(),ve.Vb(),ve.Wb(15,"tr"),ve.Wb(16,"th",4),ve.Wb(17,"sup"),ve.Pc(18,"Position Code"),ve.Vb(),ve.Vb(),ve.Wb(19,"td"),ve.Rb(20,"app-input-text",6),ve.Vb(),ve.Vb(),ve.Wb(21,"tr"),ve.Wb(22,"th",4),ve.Wb(23,"sup"),ve.Pc(24,"Position Name(EN)"),ve.Vb(),ve.Vb(),ve.Wb(25,"td"),ve.Rb(26,"app-input-text",7),ve.Vb(),ve.Vb(),ve.Wb(27,"tr"),ve.Wb(28,"th",4),ve.Wb(29,"sup"),ve.Pc(30,"Position Name(KO)"),ve.Vb(),ve.Vb(),ve.Wb(31,"td"),ve.Rb(32,"app-input-text",8),ve.Vb(),ve.Vb(),ve.Wb(33,"tr"),ve.Wb(34,"th",4),ve.Wb(35,"sup"),ve.Pc(36,"Use YN"),ve.Vb(),ve.Vb(),ve.Wb(37,"td"),ve.Wb(38,"div",9),ve.Rb(39,"app-radio",10),ve.Rb(40,"app-radio",11),ve.Vb(),ve.Vb(),ve.Vb(),ve.Wb(41,"tr"),ve.Wb(42,"th",4),ve.Pc(43,"Control Remark"),ve.Vb(),ve.Wb(44,"td",12),ve.Wb(45,"div",13),ve.Rb(46,"textarea",14),ve.Vb(),ve.Vb(),ve.Vb(),ve.Vb(),ve.Vb(),ve.Vb(),ve.Wb(47,"div",15),ve.Wb(48,"button",16),ve.Pc(49,"Save"),ve.Vb(),ve.Wb(50,"button",17),ve.fc("click",(function(){return t.onClose()})),ve.Pc(51,"Close"),ve.Vb(),ve.Vb(),ve.Vb(),ve.Vb()),2&e&&(ve.Cb(1),ve.pc("formGroup",t.upsertForm)("connectForm",t.upsertFormData),ve.Cb(13),ve.Gb("valid-error",t.checkIsInvalid("compCode")),ve.pc("options",t.compCodeList),ve.Cb(6),ve.pc("isInvalid",t.checkIsInvalid("compBasisCodeValue")),ve.Cb(6),ve.pc("isInvalid",t.checkIsInvalid("compBasisCodeNameEn")),ve.Cb(6),ve.pc("isInvalid",t.checkIsInvalid("compBasisCodeNameKo")),ve.Cb(6),ve.Gb("valid-error",t.checkIsInvalid("useYn")),ve.Cb(1),ve.pc("value",!0),ve.Cb(1),ve.pc("value",!1))},directives:[n.B,n.s,n.k,We.a,Ne.a,n.r,n.i,$e.a,ze.a,n.c],encapsulation:2,changeDetection:0}),e})();function Te(e,t){1&e&&(ve.Wb(0,"span"),ve.Pc(1,"Y"),ve.Vb())}function Ye(e,t){1&e&&(ve.Wb(0,"span"),ve.Pc(1,"N"),ve.Vb())}function He(e,t){if(1&e&&(ve.Nc(0,Te,2,0,"span",7),ve.Nc(1,Ye,2,0,"span",7)),2&e){const e=t.$implicit;ve.pc("ngIf",!0===e.useYn),ve.Cb(1),ve.pc("ngIf",!1===e.useYn)}}function Ke(e,t){if(1&e){const e=ve.Xb();ve.Wb(0,"app-cp-position-form",8),ve.fc("submitEvent",(function(t){return ve.Fc(e),ve.hc().submitUpsertHandler(t)}))("closeEvent",(function(){return ve.Fc(e),ve.hc().closeUpsertHandler()})),ve.ic(1,"async"),ve.ic(2,"async"),ve.ic(3,"async"),ve.ic(4,"async"),ve.Vb()}if(2&e){const e=ve.hc();ve.pc("rowItem",ve.jc(1,4,e.selectedItem$))("selectCompCode",ve.jc(2,6,e.setCompCode$))("positionGroupSeq",ve.jc(3,8,e.positionGroupSeq$))("compCodeList",ve.jc(4,10,e.compCodeList$))}}const Ue=function(e){return{useYnTpl:e}};let Me=(()=>{class e{constructor(e,t,i,o){this.store=e,this._dataService=t,this.alertService=i,this._fileService=o,this.unsubscribe$=new I.a,this.positionGroupSeq$=e.pipe(Object(a.u)(re)),this.loading$=e.pipe(Object(a.u)(pe)),this.reloadToggle$=e.pipe(Object(a.u)(le)),this.searchCondition$=e.pipe(Object(a.u)(de)),this.otherSearchInfo$=e.pipe(Object(a.u)(ue)),this.compCodeList$=e.pipe(Object(a.u)(be)),this.gridDataList$=e.pipe(Object(a.u)(he)),this.gridState$=e.pipe(Object(a.u)(me)),this.gridDataTotalCount$=e.pipe(Object(a.u)(Ce)),this.gridCheckedState$=e.pipe(Object(a.u)(ge)),this.masterPageSize$=e.pipe(Object(a.u)(fe)),this.isOpenDetailPopup$=e.pipe(Object(a.u)(je)),this.selectedItem$=e.pipe(Object(a.u)(Oe)),this.setCompCode$=e.pipe(Object(a.u)(Se)),this.columns=this._dataService.generateGridColumns(),this._initSubscription()}ngOnInit(){this.store.dispatch(o.compList({condition:{compTypeCodes:["CMP01"],limits:[0,50]}}))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(o.initThisState()),this.store.dispatch(o.setGridCheckStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}changePageSizeHandler(e){this.store.dispatch(o.changePageSize({pageSize:e}))}clickSearchHandler({searchCondition:e,otherSearchInfo:t}){this.store.dispatch(o.changeSearchCondition({searchCondition:e,otherSearchInfo:t})),this.store.dispatch(o.changePageIndex({pageIndex:0}))}clickResetHandler(){this.store.dispatch(o.changeSearchCondition({searchCondition:{},otherSearchInfo:null}))}gridStateChangeHandler(e){this.store.dispatch(o.setGridStateAction({gridState:e}))}clickAddHandler(){this.store.dispatch(o.openDetailPopup())}dbClickRowHandler(e){this.store.dispatch(o.addSelectedDetailRowInfo({selectedDetailRowInfo:D.cloneDeep(e)})),this.clickAddHandler()}submitUpsertHandler(e){this.store.dispatch(o.upsertItem({upsertCondition:e}))}closeUpsertHandler(){this.store.dispatch(o.closeDetailPopup()),this.store.dispatch(o.delSelectedDetailRowInfo())}selectCompCodeHandler(e){this.store.dispatch(o.selectCompCode({compCode:e})),this.selectPositionHandler(e)}selectPositionHandler(e){this.store.dispatch(o.loadPositionGroupSeqAction({condition:{corporateCompCode:e,limits:[0,100]}}))}_initSubscription(){this.reloadToggle$.pipe(Object(L.a)(1),Object(y.a)(this.unsubscribe$)).subscribe(()=>{this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()}),Object(w.a)([this.searchCondition$,this.gridState$]).pipe(Object(L.a)(1),Object(V.a)(200),Object(E.a)(([e,t])=>!D.isEmpty(e)),Object(y.a)(this.unsubscribe$)).subscribe(([e,{pageInfo:t}])=>{if(e){const i=[t.skip,t.skip+t.take],s=Object.assign({},this._setSearchCondition(e),{limits:i});this.store.dispatch(o.loadList({condition:s}))}})}_setSearchCondition(e){const t=Object.keys(this._dataService.initListSearch());return D.pick(e,t)}}return e.\u0275fac=function(t){return new(t||e)(ve.Qb(a.h),ve.Qb(Fe),ve.Qb(Re.a),ve.Qb(xe.a))},e.\u0275cmp=ve.Kb({type:e,selectors:[["app-cp-position"]],viewQuery:function(e,t){var i;1&e&&(ve.Xc(_e,!0),ve.Xc(Ge.a,!0)),2&e&&(ve.Dc(i=ve.gc())&&(t.searchFormEl=i.first),ve.Dc(i=ve.gc())&&(t.gridEl=i.first))},decls:22,vars:48,consts:[[3,"otherSearchInfo","searchCondition","compCodeList","clickSearchEvent","clickResetEvent","selectCompCode"],[3,"loading","currentPageSize","totalCount","selectCompCode","clickAddEvent","changePageSizeEvent"],["useYnTpl",""],[3,"gridLoading","columns","gridState","checkedState","totalCount","sortable","dataList","templates","stateChangeEvent","dbClickRowEvent"],["gridBasis",""],["modalSize","sm","modalContentClass","pd-all","header","Position Code Info.",3,"visible","modal","visibleChange"],[3,"rowItem","selectCompCode","positionGroupSeq","compCodeList","submitEvent","closeEvent",4,"ngIf"],[4,"ngIf"],[3,"rowItem","selectCompCode","positionGroupSeq","compCodeList","submitEvent","closeEvent"]],template:function(e,t){if(1&e&&(ve.Wb(0,"app-cp-position-search",0),ve.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()}))("selectCompCode",(function(e){return t.selectCompCodeHandler(e)})),ve.ic(1,"async"),ve.ic(2,"async"),ve.ic(3,"async"),ve.Vb(),ve.Wb(4,"app-cp-position-control",1),ve.fc("clickAddEvent",(function(){return t.clickAddHandler()}))("changePageSizeEvent",(function(e){return t.changePageSizeHandler(e)})),ve.ic(5,"async"),ve.ic(6,"async"),ve.ic(7,"async"),ve.ic(8,"async"),ve.Vb(),ve.Nc(9,He,2,2,"ng-template",null,2,ve.Oc),ve.Wb(11,"app-grid-simple",3,4),ve.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)}))("dbClickRowEvent",(function(e){return t.dbClickRowHandler(e)})),ve.ic(13,"async"),ve.ic(14,"async"),ve.ic(15,"async"),ve.ic(16,"async"),ve.ic(17,"async"),ve.Vb(),ve.Wb(18,"app-dialog",5),ve.fc("visibleChange",(function(){return t.closeUpsertHandler()})),ve.ic(19,"async"),ve.Nc(20,Ke,5,12,"app-cp-position-form",6),ve.ic(21,"async"),ve.Vb()),2&e){const e=ve.Ec(10);ve.pc("otherSearchInfo",ve.jc(1,18,t.otherSearchInfo$))("searchCondition",ve.jc(2,20,t.searchCondition$))("compCodeList",ve.jc(3,22,t.compCodeList$)),ve.Cb(4),ve.pc("loading",ve.jc(5,24,t.loading$))("currentPageSize",ve.jc(6,26,t.masterPageSize$))("totalCount",ve.jc(7,28,t.gridDataTotalCount$))("selectCompCode",ve.jc(8,30,t.setCompCode$)),ve.Cb(7),ve.pc("gridLoading",ve.jc(13,32,t.loading$))("columns",t.columns)("gridState",ve.jc(14,34,t.gridState$))("checkedState",ve.jc(15,36,t.gridCheckedState$))("totalCount",ve.jc(16,38,t.gridDataTotalCount$))("sortable",!1)("dataList",ve.jc(17,40,t.gridDataList$))("templates",ve.uc(46,Ue,e)),ve.Cb(7),ve.pc("visible",ve.jc(19,42,t.isOpenDetailPopup$))("modal",!0),ve.Cb(2),ve.pc("ngIf",ve.jc(21,44,t.isOpenDetailPopup$))}},directives:[_e,Be,Ge.a,qe.a,s.o,Ae],pipes:[s.b],encapsulation:2,changeDetection:0}),e})();const Qe=[{path:"",component:Me,data:{title:"\uae30\uc5c5\uccb4 \uc9c1\uae09\uad00\ub9ac"}}];let Xe=(()=>{class e{}return e.\u0275mod=ve.Ob({type:e}),e.\u0275inj=ve.Nb({factory:function(t){return new(t||e)},imports:[[k.f.forChild(Qe)],k.f]}),e})();var Je=i("lJxs"),Ze=i("JIr8"),et=i("bOdf"),tt=i("zp1y"),it=i("IzEk"),ot=i("vkgz"),st=i("Xb6A");let nt=(()=>{class e{constructor(e,t,i,s,n){this.actions$=e,this.service=t,this._errorService=i,this.alertService=s,this.store=n,this.loadList$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(o.loadList),Object(we.a)(({condition:e})=>this.service.getList(e).pipe(Object(Je.a)(({dataList:e,totalCount:t})=>o.getListSuccess({dataList:e,totalCount:t})),Object(Ze.a)(e=>{const t="List lookup failed. Please try again in a momentarily.",i=[o.getListFailure({error:t})];return this._catchErr(e,t,i),[]}))))),this.getCompList$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(o.compList),Object(et.a)(e=>Object(ke.a)(e).pipe(Object(tt.a)(this.compCodeList$.pipe(Object(it.a)(1))))),Object(we.a)(([{condition:e},t])=>D.isNil(t)||0===t.length?this.service.getCompList(e).pipe(Object(Je.a)(e=>o.compListSuccess({dataList:e})),Object(Ze.a)(e=>(this._catchErr(e,"List lookup failed. Please try again in a momentarily.",[]),[]))):Object(ke.a)(o.compListSuccess({dataList:t}))))),this.upsertItem$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(o.upsertItem),Object(we.a)(({upsertCondition:e})=>this.service.upsertItem(e).pipe(Object(Je.a)(()=>({succeedYn:!0})),Object(Ze.a)(e=>Object(ke.a)({succeedYn:!1,error:e})))),Object(ot.a)(({succeedYn:e,error:t})=>{if(e){const e="Your data has been saved.",t=[o.reloadList(),o.closeDetailPopup(),o.delSelectedDetailRowInfo()];this._runPage(e,t)}else{const e="Failed to save.",i=[o.upsertItemFailure({error:e})];this._catchErr(t,e,i)}})),{dispatch:!1}),this.loadPositionGroupSeq$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(o.loadPositionGroupSeqAction),Object(et.a)(e=>Object(ke.a)(e).pipe(Object(tt.a)(this.positionGroupSeq$.pipe(Object(it.a)(1))))),Object(we.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this.service.getPositionGroupSeq(e).pipe(Object(Je.a)(e=>o.loadPositionGroupSeqSuccessAction({dataList:e})),Object(Ze.a)(e=>{const t="List lookup failed.",i=[o.loadPositionGroupSeqFailureAction({error:t})];return this._catchErr(e,t,i),[]})):Object(ke.a)(o.loadPositionGroupSeqSuccessAction({dataList:D.cloneDeep(i)}))))),this.positionGroupSeq$=this.store.pipe(Object(a.u)(re)),this.compCodeList$=this.store.pipe(Object(a.u)(be))}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this.store.dispatch(e)})}:()=>{}})}_catchErr(e,t,i){const o=this._errorService.errorHandler(e,t);D.isNil(o)||(D.isNil(o.accept)&&(o.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(e=>{this.store.dispatch(e)})}:()=>{}),this.alertService.alert(o))}}return e.\u0275fac=function(t){return new(t||e)(ve.bc(c.a),ve.bc(De),ve.bc(st.a),ve.bc(Re.a),ve.bc(a.h))},e.\u0275prov=ve.Mb({token:e,factory:e.\u0275fac}),e})();const ct=[Me],at=[Be,_e,Ae];let rt=(()=>{class e{}return e.\u0275mod=ve.Ob({type:e}),e.\u0275inj=ve.Nb({factory:function(t){return new(t||e)},imports:[[s.c,n.m,n.w,r.m,l.a,p.a,d.a,O.a,u.a,b.a,h.a,m.a,C.a,g.a,f.a,j.a,P.a,S.a,v.a,Xe,a.j.forFeature("cpPosition",ne),c.b.forFeature([nt])]]}),e})()},Onn4:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var o=i("fXoL"),s=i("3Pt+"),n=i("ofXK");const c=["rb"],a=function(){return{radio:!0}},r={provide:s.p,useExisting:Object(o.U)(()=>l),multi:!0};let l=(()=>{class e{constructor(e){this.cd=e,this.onClick=new o.n,this.onFocus=new o.n,this.onBlur=new o.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}handleClick(e,t,i){e.preventDefault(),this.disabled||(this.select(e),i&&t.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.onClick.emit(e))}writeValue(e){this.checked=e===this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}onChange(e){this.select(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Qb(o.h))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-radio"]],viewQuery:function(e,t){var i;1&e&&o.Kc(c,!0),2&e&&o.Dc(i=o.gc())&&(t.inputViewChild=i.first)},inputs:{value:"value",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",checked:"checked"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[o.Bb([r])],decls:5,vars:11,consts:[[3,"ngClass","click"],["type","radio",1,"radio-control-input",3,"checked","disabled","change","focus","blur"],["rb",""],[1,"radio-control-text"]],template:function(e,t){1&e&&(o.Wb(0,"label",0),o.fc("click",(function(e){return t.select(e)})),o.Wb(1,"input",1,2),o.fc("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onInputFocus(e)}))("blur",(function(e){return t.onInputBlur(e)})),o.Vb(),o.Wb(3,"span",3),o.Pc(4),o.Vb(),o.Vb()),2&e&&(o.Eb(t.styleClass),o.pc("ngClass",o.tc(10,a)),o.Cb(1),o.pc("checked",t.checked)("disabled",t.disabled),o.Db("id",t.inputId)("name",t.name)("value",t.value)("tabindex",t.tabindex),o.Cb(3),o.Qc(t.label))},directives:[n.l],encapsulation:2}),e})()}}]);