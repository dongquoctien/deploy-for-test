(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{Onn4:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("fXoL"),n=i("3Pt+"),a=i("ofXK");const o=["rb"],c=function(){return{radio:!0}},r={provide:n.p,useExisting:Object(s.U)(()=>l),multi:!0};let l=(()=>{class e{constructor(e){this.cd=e,this.onClick=new s.n,this.onFocus=new s.n,this.onBlur=new s.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}handleClick(e,t,i){e.preventDefault(),this.disabled||(this.select(e),i&&t.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.onClick.emit(e))}writeValue(e){this.checked=e===this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}onChange(e){this.select(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Qb(s.h))},e.\u0275cmp=s.Kb({type:e,selectors:[["app-radio"]],viewQuery:function(e,t){var i;1&e&&s.Kc(o,!0),2&e&&s.Dc(i=s.gc())&&(t.inputViewChild=i.first)},inputs:{value:"value",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",checked:"checked"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[s.Bb([r])],decls:5,vars:11,consts:[[3,"ngClass","click"],["type","radio",1,"radio-control-input",3,"checked","disabled","change","focus","blur"],["rb",""],[1,"radio-control-text"]],template:function(e,t){1&e&&(s.Wb(0,"label",0),s.fc("click",(function(e){return t.select(e)})),s.Wb(1,"input",1,2),s.fc("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onInputFocus(e)}))("blur",(function(e){return t.onInputBlur(e)})),s.Vb(),s.Wb(3,"span",3),s.Pc(4),s.Vb(),s.Vb()),2&e&&(s.Eb(t.styleClass),s.pc("ngClass",s.tc(10,c)),s.Cb(1),s.pc("checked",t.checked)("disabled",t.disabled),s.Db("id",t.inputId)("name",t.name)("value",t.value)("tabindex",t.tabindex),s.Cb(3),s.Qc(t.label))},directives:[a.l],encapsulation:2}),e})()},WQWF:function(e,t,i){"use strict";i.r(t),i.d(t,"CONTAINERS",(function(){return bt})),i.d(t,"COMPONENTS",(function(){return gt})),i.d(t,"BsPassportVisaModule",(function(){return ft}));var s={};i.r(s),i.d(s,"getListSuccess",(function(){return w})),i.d(s,"getListFailure",(function(){return _})),i.d(s,"getPassportTypeListSuccess",(function(){return T})),i.d(s,"getPassportTypeListFailure",(function(){return D})),i.d(s,"getVisaTypeListSuccess",(function(){return E})),i.d(s,"getVisaTypeListFailure",(function(){return F})),i.d(s,"upsertItemSuccess",(function(){return N})),i.d(s,"upsertItemFailure",(function(){return $})),i.d(s,"removeItemsSuccess",(function(){return W})),i.d(s,"removeItemsFailure",(function(){return R})),i.d(s,"loadList",(function(){return x})),i.d(s,"reloadList",(function(){return A})),i.d(s,"initList",(function(){return K})),i.d(s,"loadPassportTypeList",(function(){return Y})),i.d(s,"loadVisaTypeList",(function(){return z})),i.d(s,"loadSalesCountryList",(function(){return B})),i.d(s,"getSalesCountryListSuccess",(function(){return G})),i.d(s,"changeSearchCondition",(function(){return H})),i.d(s,"changePageSize",(function(){return U})),i.d(s,"setGridCheckRowidsAction",(function(){return M})),i.d(s,"setGridStateAction",(function(){return X})),i.d(s,"setGridCheckedStateAction",(function(){return Q})),i.d(s,"removeSelectedGridEntities",(function(){return q})),i.d(s,"openDetailPopup",(function(){return J})),i.d(s,"closeDetailPopup",(function(){return Z})),i.d(s,"addSelectedDetailRowInfo",(function(){return ee})),i.d(s,"delSelectedDetailRowInfo",(function(){return te})),i.d(s,"upsertItem",(function(){return ie}));var n=i("ofXK"),a=i("3Pt+"),o=i("snw9"),c=i("kt0X"),r=i("WG3B"),l=i("xoAz"),d=i("wPo9"),u=i("7rOj"),p=i("+NQf"),h=i("6LsY"),b=i("l1P7"),g=i("v7zA"),f=i("7UZF"),m=i("hHe4"),y=i("1OXJ"),C=i("5hwk"),O=i("htEk"),v=i("kKjH"),j=i("qXPF"),S=i("vu/V"),L=i("tyNb"),I=i("XNiG"),k=i("zP0r"),V=i("1G5W"),P=i("LvDl");const w=Object(c.o)("[BsPassportVisa/List] get list success",Object(c.t)()),_=Object(c.o)("[BsPassportVisa/List] get list failure",Object(c.t)()),T=Object(c.o)("[BsPassportVisa/List] get passport type list success",Object(c.t)()),D=Object(c.o)("[BsPassportVisa/List] get passport type list failure",Object(c.t)()),E=Object(c.o)("[BsPassportVisa/List] get visa type list success",Object(c.t)()),F=Object(c.o)("[BsPassportVisa/List] get visa type list failure",Object(c.t)()),N=Object(c.o)("[BsPassportVisa/List] upsert item success",Object(c.t)()),$=Object(c.o)("[BsPassportVisa/List] upsert item failure",Object(c.t)()),W=Object(c.o)("[FlWebTl/API] remove items success",Object(c.t)()),R=Object(c.o)("[FlWebTl/API] remove items failure",Object(c.t)()),x=Object(c.o)("[BsPassportVisa/List] load grid data list",Object(c.t)()),A=Object(c.o)("[BsPassportVisa/List] reload grid data list"),K=Object(c.o)("[BsPassportVisa/List] init grid data list"),Y=Object(c.o)("[BsPassportVisa/List] load passport type list",Object(c.t)()),z=Object(c.o)("[BsPassportVisa/List] load visa type list",Object(c.t)()),B=Object(c.o)("[BsPassportVisa/List] loadSalesCountryList",Object(c.t)()),G=Object(c.o)("[BsPassportVisa/List] getSalesCountryListSuccess",Object(c.t)()),H=Object(c.o)("[BsPassportVisa/List] change search condition",Object(c.t)()),U=Object(c.o)("[BsPassportVisa/List] change page size",Object(c.t)()),M=Object(c.o)("[BsPassportVisa/List] set grid checked rowids",Object(c.t)()),X=Object(c.o)("[BsPassportVisa/List] set grid state",Object(c.t)()),Q=Object(c.o)("[BsPassportVisa/List] set grid checked state",Object(c.t)()),q=Object(c.o)("[BsPassportVisa/List] \uc0ad\uc81c\ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(c.t)()),J=Object(c.o)("[BsPassportVisa/Detail] \uc0c1\uc138\ud31d\uc5c5 \uc5f4\uae30"),Z=Object(c.o)("[BsPassportVisa/Detail] \uc0c1\uc138\ud31d\uc5c5 \ub2eb\uae30"),ee=Object(c.o)("[BsPassportVisa/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc120\ud0dd",Object(c.t)()),te=Object(c.o)("[BsPassportVisa/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc81c\uac70"),ie=Object(c.o)("[BsPassportVisa/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(c.t)());var se=i("EVqC");const ne=Object(se.a)({selectId:e=>e.id,sortComparer:!1}),ae=ne.getInitialState({loading:!1,reloadToggle:!1,passportTypeList:[],visaTypeList:[],searchCondition:{},pageSize:20,selectedDetailRowInfo:null,isOpenDetailPopup:!1,otherSearchInfo:null,gridState:{skip:0,sortInfo:[],filter:{logic:"and",filters:[]}},gridCheckedRowids:null,gridCheckedState:null,salesCountryList:null}),oe=Object(c.q)(ae,Object(c.s)(s.loadList,e=>Object.assign(Object.assign({},e),{loading:!0})),Object(c.s)(s.reloadList,e=>Object.assign(Object.assign({},e),{reloadToggle:!e.reloadToggle})),Object(c.s)(s.initList,e=>Object.assign(Object.assign({},e),{loading:!1,reloadToggle:!1,selectedDetailRowInfo:null,isOpenDetailPopup:!1})),Object(c.s)(s.getListSuccess,(e,{dataList:t})=>ne.setAll(t,Object.assign(Object.assign({},e),{loading:!1,gridCheckedRowids:null}))),Object(c.s)(s.getListFailure,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(c.s)(s.getPassportTypeListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{passportTypeList:t})),Object(c.s)(s.getVisaTypeListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{visaTypeList:t})),Object(c.s)(s.getSalesCountryListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{salesCountryList:t})),Object(c.s)(s.changeSearchCondition,(e,{searchCondition:t,otherSearchInfo:i})=>Object.assign(Object.assign({},e),{searchCondition:t,otherSearchInfo:i})),Object(c.s)(s.changePageSize,(e,{pageSize:t})=>Object.assign(Object.assign({},e),{pageSize:t})),Object(c.s)(s.upsertItemSuccess,(e,{upsertItem:t})=>ne.upsertOne(t,Object.assign({},e))),Object(c.s)(s.openDetailPopup,e=>Object.assign(Object.assign({},e),{isOpenDetailPopup:!0})),Object(c.s)(s.closeDetailPopup,e=>Object.assign(Object.assign({},e),{isOpenDetailPopup:!1})),Object(c.s)(s.addSelectedDetailRowInfo,(e,{selectedDetailRowInfo:t})=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:t})),Object(c.s)(s.delSelectedDetailRowInfo,e=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:null})),Object(c.s)(s.setGridCheckRowidsAction,(e,{rowids:t})=>Object.assign(Object.assign({},e),{gridCheckedRowids:t})),Object(c.s)(s.setGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{gridState:t})),Object(c.s)(s.setGridCheckedStateAction,(e,{gridCheckedState:t})=>Object.assign(Object.assign({},e),{gridCheckedState:t})));function ce(e,t){return Object(c.m)({bsPassportVisaList:oe})(e,t)}const re=Object(c.p)("bsPassportVisa"),le=Object(c.r)(re,e=>e.bsPassportVisaList),de=Object(c.r)(le,e=>e.loading),ue=Object(c.r)(le,e=>e.reloadToggle),pe=Object(c.r)(le,e=>e.passportTypeList),he=Object(c.r)(le,e=>e.visaTypeList),be=Object(c.r)(le,e=>e.salesCountryList),ge=Object(c.r)(le,e=>e.searchCondition),fe=Object(c.r)(le,e=>e.pageSize),me=Object(c.r)(le,e=>e.selectedDetailRowInfo),ye=Object(c.r)(le,e=>e.isOpenDetailPopup),Ce=Object(c.r)(le,e=>e.otherSearchInfo),Oe=ne.getSelectors(le).selectAll,ve=(ne.getSelectors(le),Object(c.r)(le,e=>e.gridCheckedRowids)),je=Object(c.r)(le,e=>e.gridState),Se=Object(c.r)(le,e=>e.gridCheckedState);var Le=i("YY+H"),Ie=i("fXoL"),ke=i("pfiq"),Ve=i("LRne"),Pe=i("z6cu"),we=i("eIep"),_e=i("AytR");const{API_URL:Te}=_e.a,De={selectEntities:`${Te}/admin/basis/passport-visa`,selectDetailCodes:`${Te}/common/detail-code`,salesCountryCode:`${Te}/admin/basis/sales-country`};var Ee=i("tpT/");let Fe=(()=>{class e{constructor(e){this.api=e}getList(e){const t=P.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.selectEntities,t).pipe(Object(we.a)(e=>{var t;if(e.succeedYn){const i=this._addRowid(null===(t=e.result)||void 0===t?void 0:t.list);return console.log(i,"list"),Object(Ve.a)(i)}return Object(Pe.a)(e||"api response error")}))}removeItems(e){const t=P.assign({},this.api.defaultParams,{condition:e});return this.api.delete(De.selectEntities,t).pipe(Object(we.a)(e=>e.succeedYn?Object(Ve.a)(e.result&&e.result.counts):Object(Pe.a)(e||"api response error")))}upsertItem(e){const t=P.assign({},this.api.defaultParams,{condition:e});return this.api.put(De.selectEntities,t).pipe(Object(we.a)(e=>{if(e.succeedYn){const t=e.result;return Object(Ve.a)(Object.assign({id:t.rowid},t))}return Object(Pe.a)(e||"api response error")}))}salesCountryCodeList(e){const t=P.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.salesCountryCode,t).pipe(Object(we.a)(e=>{var t;if(e.succeedYn){const i=null===(t=e.result)||void 0===t?void 0:t.list;return Object(Ve.a)(i)}return Object(Pe.a)(e||"api response error")}))}getCommonDetailCodeList(e){const t=P.assign({},this.api.defaultParams,{condition:e});return this.api.post(De.selectDetailCodes,t).pipe(Object(we.a)(e=>e.succeedYn?Object(Ve.a)(e.result.list):Object(Pe.a)(e||"api response error")))}_addRowid(e){return P.isNil(e)?[]:e.map((e,t)=>Object.assign(Object.assign({},e),{rowid:String(t),id:String(t)}))}}return e.\u0275fac=function(t){return new(t||e)(Ie.bc(Ee.a))},e.\u0275prov=Ie.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ne=i("6UzV");let $e=(()=>{class e{constructor(e){this.fb=e,this.generateGridColumns=()=>[{field:"salesCountryCode",title:"Sales Country Code",type:"text",style:{"text-align":"center"}},{field:"travelCountryCode",title:"Travel Country Code",type:"text",style:{"text-align":"center"}},{field:"travelCountryNameLn",title:"Travel Country Name",type:"text"},{field:"passportTypeName",title:"Passport Type",type:"text"},{field:"visaTypeName",title:"Visa Type",type:"text"},{field:"apisNeededYn",title:"APIS Needed YN",type:"boolean",template:"apisNeededYnTpl",style:{"text-align":"center"}},{field:"taxRefundRate",title:"TAX Refund Rate",type:"text",style:{"text-align":"right"}},{field:"lastUpdateName",title:"Last Update User",type:"text"},{field:"lastUpdateDatetime",title:"Last Update Time",type:"text",style:{"text-align":"center"}},{field:"firstInsertName",title:"First Insert User",type:"text"},{field:"firstInsertDatetime",title:"First Insert Time",type:"text",style:{"text-align":"center"}}],this.generateListSearchForm=()=>this.fb.group({salesCountryCode:[null],travelCountryCode:[null],apisNeededYn:[null]}),this.initListSearch=()=>({salesCountryCode:null,travelCountryCode:null,apisNeededYn:null}),this.generatePutForm=()=>this.fb.group({salesCountryCode:[null,[a.z.required]],travelCountryCode:[null,[a.z.required,Ne.a.eng(),a.z.minLength(2),a.z.maxLength(2)]],passportTypeCode:[null,[a.z.required]],visaTypeCode:[null,[a.z.required]],apisNeededYn:[!1,[a.z.required]],taxRefundRate:[null]}),this.initPutFormData=()=>({rowid:null,salesCountryCode:"KR-110000",travelCountryCode:null,passportTypeCode:null,visaTypeCode:null,apisNeededYn:!1,taxRefundRate:null})}}return e.\u0275fac=function(t){return new(t||e)(Ie.bc(a.f))},e.\u0275prov=Ie.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var We=i("+Sob"),Re=i("U6NN");const xe=function(){return["countryCode","countryNameLn","countryNameEn"]};let Ae=(()=>{class e{constructor(e){this._dataService=e,this.clickSearchEvent=new Ie.n,this.clickResetEvent=new Ie.n,this.changeSearchConditionEvent=new Ie.n,this.isShowmore=!1,this.useYnOptions=[{label:"Y",value:!0},{label:"N",value:!1}],this.searchForm=this._dataService.generateListSearchForm()}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(e){this._otherSearchInfo=e,this._setOtherSearchInfo(e)}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}get searchFormValid(){return this.searchForm.valid}ngOnInit(){this._initThisState()}onSubmit(){if(this.searchForm.invalid)return void(this._checkValid=!0);const e=P.omitBy(this.searchForm.value,P.isNil),t=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:e,otherSearchInfo:t}),this._checkValid=!1}onReset(){this.clickResetEvent.emit()}checkIsInvalid(e){return this._checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}_initThisState(){}_setSearchFormData(e){const t=this._dataService.initListSearch();return Object.assign({},t,P.pick(e,Object.keys(t)))}_setOtherSearchInfo(e){this.countryInput=(null==e?void 0:e.countryInput)||null}_setOtherSearchCondition(){const e={};return this.autoCompletes.forEach(t=>{Object.assign(e,t.getInputValue())}),e}}return e.\u0275fac=function(t){return new(t||e)(Ie.Qb($e))},e.\u0275cmp=Ie.Kb({type:e,selectors:[["app-bs-passport-visa-search"]],viewQuery:function(e,t){var i;1&e&&Ie.Xc(ke.a,!0),2&e&&Ie.Dc(i=Ie.gc())&&(t.autoCompletes=i)},inputs:{passportTypeList:"passportTypeList",visaTypeList:"visaTypeList",salesCountryList:"salesCountryList",otherSearchInfo:"otherSearchInfo",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent",changeSearchConditionEvent:"changeSearchConditionEvent"},decls:20,vars:10,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-1"],[1,"form-label"],["displayKey","salesCountryCode","dataKey","salesCountryCode","formControlName","salesCountryCode",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","travelCountryCode","apiUrl","admin/common/country","dataKey","countryCode","inputFieldFormat","{0} - &{1}_&{2}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","isInvalid","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","apisNeededYn",1,"d-inline-flex","flex-fill",3,"options"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(e,t){1&e&&(Ie.Wb(0,"form",0),Ie.fc("ngSubmit",(function(){return t.onSubmit()})),Ie.Wb(1,"div",1),Ie.Wb(2,"div",2),Ie.Wb(3,"div",3),Ie.Wb(4,"span",4),Ie.Pc(5,"Sales Country Code"),Ie.Vb(),Ie.Rb(6,"app-selectbox",5),Ie.Vb(),Ie.Wb(7,"div",3),Ie.Wb(8,"span",4),Ie.Pc(9,"Travel Country Name"),Ie.Vb(),Ie.Rb(10,"app-auto-complete",6),Ie.Vb(),Ie.Wb(11,"div",3),Ie.Wb(12,"span",4),Ie.Pc(13,"APIS Needed YN"),Ie.Vb(),Ie.Rb(14,"app-selectbox",7),Ie.Vb(),Ie.Vb(),Ie.Vb(),Ie.Wb(15,"div",8),Ie.Wb(16,"button",9),Ie.Pc(17,"Search"),Ie.Vb(),Ie.Wb(18,"button",10),Ie.fc("click",(function(){return t.onReset()})),Ie.Pc(19,"Reset"),Ie.Vb(),Ie.Vb(),Ie.Vb()),2&e&&(Ie.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),Ie.Cb(6),Ie.pc("options",t.salesCountryList),Ie.Cb(4),Ie.pc("inputFieldValue",t.countryInput)("inputId","countryInput")("isInvalid",t.checkIsInvalid("travelCountryCode"))("apiSearchTerm","keyword")("inputFieldFormatKeyList",Ie.tc(9,xe)),Ie.Cb(4),Ie.pc("options",t.useYnOptions))},directives:[a.B,a.s,a.k,We.a,Re.a,a.r,a.i,ke.a],encapsulation:2,changeDetection:0}),e})();var Ke=i("G4DP"),Ye=i("EsKh"),ze=i("bMKz");let Be=(()=>{class e{constructor(){this.clickAddEvent=new Ie.n,this.clickDelEvent=new Ie.n,this.changePageSizeEvent=new Ie.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onClickAdd(){this.clickAddEvent.emit()}onClickDel(){this.clickDelEvent.emit()}onChangePageSize(e){this.changePageSizeEvent.emit(e.value)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ie.Kb({type:e,selectors:[["app-bs-passport-visa-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{clickAddEvent:"clickAddEvent",clickDelEvent:"clickDelEvent",changePageSizeEvent:"changePageSizeEvent"},decls:10,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"btn","btn-light","sm",3,"click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&(Ie.Wb(0,"div",0),Ie.Wb(1,"strong",1),Ie.Pc(2),Ie.Vb(),Ie.Wb(3,"div",2),Ie.Wb(4,"button",3),Ie.fc("click",(function(){return t.onClickAdd()})),Ie.Pc(5,"New"),Ie.Vb(),Ie.Wb(6,"button",4),Ie.fc("click",(function(){return t.onClickDel()})),Ie.Pc(7,"Delete"),Ie.Vb(),Ie.Wb(8,"div",5),Ie.Wb(9,"app-selectbox",6),Ie.fc("onChange",(function(e){return t.onChangePageSize(e)})),Ie.Vb(),Ie.Vb(),Ie.Vb(),Ie.Vb()),2&e&&(Ie.Cb(2),Ie.Qc(t.loading?"":t.totalCount),Ie.Cb(7),Ie.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[Re.a,a.r,a.u],encapsulation:2,changeDetection:0}),e})();var Ge=i("kDLv"),He=i("nMd8"),Ue=i("Onn4"),Me=i("gbCm");const Xe=function(){return["countryCode","countryNameLn","countryNameEn"]};let Qe=(()=>{class e{constructor(e,t){this._dataService=e,this.fb=t,this.submitEvent=new Ie.n,this.closeEvent=new Ie.n,this._$unsubscribe=new I.a,this.upsertForm=this._dataService.generatePutForm()}get rowItem(){return this._rowitem}set rowItem(e){this._rowitem=e,this.upsertFormData=this._setPutFormData(e),this._initThisState(e)}get countryInputField(){return this.rowItem?`${this.rowItem.travelCountryCode} - ${this.rowItem.travelCountryNameLn?`${this.rowItem.travelCountryNameLn}_`:""}${this.rowItem.travelCountryNameEn}`:null}ngAfterContentInit(){this._initSubscription(),this._initThisState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.upsertForm.invalid)return void(this._checkValid=!0);const e=this._setPutCondition();this.submitEvent.emit(e),this._checkValid=!1}onClose(){this.closeEvent.emit()}checkIsInvalid(e){return this._checkValid&&this.upsertForm.get(e)&&this.upsertForm.get(e).invalid}_initThisState(e){this._checkValid=!1}_setPutFormData(e){const t=this._dataService.initPutFormData();return e&&(this.upsertForm.get("salesCountryCode").disable(),this.upsertForm.get("travelCountryCode").disable()),P.isNil(e)?t:Object.assign({},t,P.pick(e,Object.keys(t)))}_setPutCondition(){const e=this._dataService.initPutFormData(),t=this.upsertForm.getRawValue();let i=Object.assign({},P.pick(t,Object.keys(e)));return P.isNil(i.rowid)&&(i=P.omit(i,["rowid"])),{condition:i}}_initSubscription(){}}return e.\u0275fac=function(t){return new(t||e)(Ie.Qb($e),Ie.Qb(a.f))},e.\u0275cmp=Ie.Kb({type:e,selectors:[["app-bs-passport-visa-form"]],inputs:{passportTypeList:"passportTypeList",visaTypeList:"visaTypeList",salesCountryList:"salesCountryList",rowItem:"rowItem"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:55,vars:16,consts:[[1,"modal-body"],[3,"formGroup","connectForm","ngSubmit"],[1,"table","table-bordered"],["width","150px"],["scope","row",1,"th-bg"],["formControlName","salesCountryCode","useAllOptionName","Select","displayKey","salesCountryCode","dataKey","salesCountryCode",3,"options"],["formControlName","travelCountryCode","apiUrl","admin/common/country","dataKey","countryCode","inputFieldFormat","{0} - &{1}_&{2}","placeholder","Name",3,"inputFieldValue","isInvalid","apiSearchTerm","inputFieldFormatKeyList"],["useAllOptionName","Select","formControlName","passportTypeCode","dataKey","detailCode","displayWord","detailCodeName",3,"options","isInvalid"],["useAllOptionName","Select","formControlName","visaTypeCode","dataKey","detailCode","displayWord","detailCodeName",3,"options","isInvalid"],[1,"form-group"],["formControlName","apisNeededYn","name","apisNeededYn","label","Y",3,"value"],["formControlName","apisNeededYn","name","apisNeededYn","label","N",3,"value"],["formControlName","taxRefundRate","valueType","number","inputFormat","number"],[1,"text"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(e,t){1&e&&(Ie.Wb(0,"div",0),Ie.Wb(1,"form",1),Ie.fc("ngSubmit",(function(){return t.onSubmit()})),Ie.Wb(2,"div",2),Ie.Wb(3,"table"),Ie.Wb(4,"caption"),Ie.Pc(5," Passport & Visa Info "),Ie.Vb(),Ie.Wb(6,"colgroup"),Ie.Rb(7,"col",3),Ie.Rb(8,"col"),Ie.Vb(),Ie.Wb(9,"tbody"),Ie.Wb(10,"tr"),Ie.Wb(11,"th",4),Ie.Pc(12,"Sales Country"),Ie.Rb(13,"sup"),Ie.Vb(),Ie.Wb(14,"td"),Ie.Rb(15,"app-selectbox",5),Ie.Vb(),Ie.Vb(),Ie.Wb(16,"tr"),Ie.Wb(17,"th",4),Ie.Pc(18,"Travel Country"),Ie.Rb(19,"sup"),Ie.Vb(),Ie.Wb(20,"td"),Ie.Rb(21,"app-auto-complete",6),Ie.Vb(),Ie.Vb(),Ie.Wb(22,"tr"),Ie.Wb(23,"th",4),Ie.Pc(24,"Passport Type"),Ie.Rb(25,"sup"),Ie.Vb(),Ie.Wb(26,"td"),Ie.Rb(27,"app-selectbox-detailcode",7),Ie.Vb(),Ie.Vb(),Ie.Wb(28,"tr"),Ie.Wb(29,"th",4),Ie.Pc(30,"Visa Type"),Ie.Rb(31,"sup"),Ie.Vb(),Ie.Wb(32,"td"),Ie.Rb(33,"app-selectbox-detailcode",8),Ie.Vb(),Ie.Vb(),Ie.Wb(34,"tr"),Ie.Wb(35,"th",4),Ie.Pc(36,"APIS Needed YN"),Ie.Rb(37,"sup"),Ie.Vb(),Ie.Wb(38,"td"),Ie.Wb(39,"div",9),Ie.Rb(40,"app-radio",10),Ie.Rb(41,"app-radio",11),Ie.Vb(),Ie.Vb(),Ie.Vb(),Ie.Wb(42,"tr"),Ie.Wb(43,"th",4),Ie.Pc(44,"Tax Refund Rate"),Ie.Vb(),Ie.Wb(45,"td"),Ie.Wb(46,"div",9),Ie.Rb(47,"app-input-text",12),Ie.Wb(48,"span",13),Ie.Pc(49,"%"),Ie.Vb(),Ie.Vb(),Ie.Vb(),Ie.Vb(),Ie.Vb(),Ie.Vb(),Ie.Vb(),Ie.Wb(50,"div",14),Ie.Wb(51,"button",15),Ie.Pc(52,"Save"),Ie.Vb(),Ie.Wb(53,"button",16),Ie.fc("click",(function(){return t.onClose()})),Ie.Pc(54,"Close"),Ie.Vb(),Ie.Vb(),Ie.Vb(),Ie.Vb()),2&e&&(Ie.Cb(1),Ie.pc("formGroup",t.upsertForm)("connectForm",t.upsertFormData),Ie.Cb(14),Ie.pc("options",t.salesCountryList),Ie.Cb(6),Ie.pc("inputFieldValue",t.countryInputField)("isInvalid",t.checkIsInvalid("travelCountryCode"))("apiSearchTerm","keyword")("inputFieldFormatKeyList",Ie.tc(15,Xe)),Ie.Cb(6),Ie.pc("options",t.passportTypeList)("isInvalid",t.checkIsInvalid("passportTypeCode")),Ie.Cb(6),Ie.pc("options",t.visaTypeList)("isInvalid",t.checkIsInvalid("visaTypeCode")),Ie.Cb(6),Ie.Gb("valid-error",t.checkIsInvalid("apisNeededYn")),Ie.Cb(1),Ie.pc("value",!0),Ie.Cb(1),Ie.pc("value",!1))},directives:[a.B,a.s,a.k,We.a,Re.a,a.r,a.i,ke.a,He.a,Ue.a,Me.a],encapsulation:2,changeDetection:0}),e})();function qe(e,t){1&e&&(Ie.Wb(0,"span"),Ie.Pc(1,"Y"),Ie.Vb())}function Je(e,t){1&e&&(Ie.Wb(0,"span"),Ie.Pc(1,"N"),Ie.Vb())}function Ze(e,t){if(1&e&&(Ie.Nc(0,qe,2,0,"span",7),Ie.Nc(1,Je,2,0,"span",7)),2&e){const e=t.$implicit;Ie.pc("ngIf",!0===e.apisNeededYn),Ie.Cb(1),Ie.pc("ngIf",!1===e.apisNeededYn)}}function et(e,t){if(1&e){const e=Ie.Xb();Ie.Wb(0,"app-bs-passport-visa-form",8),Ie.fc("submitEvent",(function(t){return Ie.Fc(e),Ie.hc().submitUpsertHandler(t)}))("closeEvent",(function(){return Ie.Fc(e),Ie.hc().closeUpsertHandler()})),Ie.ic(1,"async"),Ie.ic(2,"async"),Ie.ic(3,"async"),Ie.ic(4,"async"),Ie.Vb()}if(2&e){const e=Ie.hc();Ie.pc("passportTypeList",Ie.jc(1,4,e.passportTypeList$))("visaTypeList",Ie.jc(2,6,e.visaTypeList$))("salesCountryList",Ie.jc(3,8,e.salesCountryList$))("rowItem",Ie.jc(4,10,e.selectedItem$))}}const tt=function(e){return{apisNeededYnTpl:e}};let it=(()=>{class e{constructor(e,t,i,s,n){this.store=e,this.authStore=t,this._dataService=i,this.alertService=s,this.UserConditionService=n,this.unsubscribe$=new I.a,this.loading$=e.pipe(Object(c.u)(de)),this.reloadToggle$=e.pipe(Object(c.u)(ue)),this.passportTypeList$=e.pipe(Object(c.u)(pe)),this.visaTypeList$=e.pipe(Object(c.u)(he)),this.salesCountryList$=e.pipe(Object(c.u)(be)),this.searchCondition$=e.pipe(Object(c.u)(ge)),this.gridDataList$=e.pipe(Object(c.u)(Oe)),this.listPageSize$=e.pipe(Object(c.u)(fe)),this.loginUserNo$=t.pipe(Object(c.u)(Le.t)),this.isOpenDetailPopup$=e.pipe(Object(c.u)(ye)),this.selectedItem$=e.pipe(Object(c.u)(me)),this.columns=this._dataService.generateGridColumns(),this.otherSearchInfo$=e.pipe(Object(c.u)(Ce)),this.gridCheckedRowids$=e.pipe(Object(c.u)(ve)),this.gridState$=e.pipe(Object(c.u)(je)),this.gridCheckedState$=e.pipe(Object(c.u)(Se)),this.storeId$=t.pipe(Object(c.u)(Le.o)),this._initSubscription()}ngOnInit(){this.storeId$.subscribe(e=>this._storeId=e),this.initSearchCondition(),this.store.dispatch(s.loadPassportTypeList({condition:{masterCode:"BS009"}})),this.store.dispatch(s.loadVisaTypeList({condition:{masterCode:"BS010"}})),this.store.dispatch(s.loadSalesCountryList({condition:{}}))}ngOnDestroy(){this.store.dispatch(s.initList()),this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(s.setGridCheckRowidsAction({rowids:this.gridEl.checkedRows})),this.store.dispatch(s.setGridStateAction({gridState:this.gridEl.thisGridState})),this.store.dispatch(s.setGridCheckedStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}changePageSizeHandler(e){this.store.dispatch(s.changePageSize({pageSize:e}))}clickAddHandler(){this.store.dispatch(s.openDetailPopup())}clickDelHandler(){var e;(null===(e=this.gridEl.checkedRows)||void 0===e?void 0:e.length)>0?this.alertService.confirm({message:"Are you sure you want to delete the selected items?",accept:()=>{let e={deleteItems:[]};console.log(this.gridEl.checkedDataList,"this.gridEl.checkedDataList"),this.gridEl.checkedDataList.forEach(t=>{e.deleteItems.push({salesCountryCode:t.salesCountryCode,travelCountryCode:t.travelCountryCode})}),this.store.dispatch(s.removeSelectedGridEntities({condition:e}))},reject:()=>{}}):this.alertService.alert("There are no items selected.")}clickSearchHandler({searchCondition:e,otherSearchInfo:t}){const i=this._setSearchCondition(e);this.store.dispatch(s.loadList({condition:i})),this.store.dispatch(s.changeSearchCondition({searchCondition:e,otherSearchInfo:t})),this.UserConditionService.setSearchSettingSessionStorage(e,this._storeId,t)}clickResetHandler(){this.store.dispatch(s.changeSearchCondition({searchCondition:this._dataService.initListSearch(),otherSearchInfo:null}))}dbClickRowHandler(e){this.store.dispatch(s.addSelectedDetailRowInfo({selectedDetailRowInfo:P.cloneDeep(e)})),this.clickAddHandler()}submitUpsertHandler(e){const{condition:t}=e;this.store.dispatch(s.upsertItem({upsertCondition:t}))}closeUpsertHandler(){this.store.dispatch(s.closeDetailPopup()),this.store.dispatch(s.delSelectedDetailRowInfo())}_initSubscription(){this.reloadToggle$.pipe(Object(k.a)(1),Object(V.a)(this.unsubscribe$)).subscribe(()=>{this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()})}_setSearchCondition(e){return P.omitBy(e,e=>P.isNil(e)||""===e)}initSearchCondition(){if(this.searchCondition$.subscribe(e=>this._searchCondition=e),this.gridDataList$.subscribe(e=>this._searchGridDataList=e),this.otherSearchInfo$.subscribe(e=>this._otherSearchInfo=e),0===P.size(this._searchCondition)&&0===P.size(this._searchGridDataList)){const e=this._dataService.initListSearch(),t=this.UserConditionService.selectSearchSetting(e,this._storeId);this.store.dispatch(s.changeSearchCondition({searchCondition:t[0],otherSearchInfo:t[1]}))}}}return e.\u0275fac=function(t){return new(t||e)(Ie.Qb(c.h),Ie.Qb(c.h),Ie.Qb($e),Ie.Qb(Ye.a),Ie.Qb(ze.a))},e.\u0275cmp=Ie.Kb({type:e,selectors:[["app-bs-passport-visa"]],viewQuery:function(e,t){var i;1&e&&(Ie.Xc(Ae,!0),Ie.Xc(Ke.a,!0)),2&e&&(Ie.Dc(i=Ie.gc())&&(t.searchFormEl=i.first),Ie.Dc(i=Ie.gc())&&(t.gridEl=i.first))},decls:21,vars:45,consts:[[3,"salesCountryList","searchCondition","otherSearchInfo","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","clickAddEvent","clickDelEvent","changePageSizeEvent"],["apisNeededYnTpl",""],[3,"gridLoading","gridState","checkedState","columns","pageSize","checkboxUseYn","dataList","templates","dbClickRowEvent"],["gridBasis",""],["modalSize","sm","modalContentClass","pd-all","header","Passport & Visa Info",3,"visible","modal","visibleChange"],[3,"passportTypeList","visaTypeList","salesCountryList","rowItem","submitEvent","closeEvent",4,"ngIf"],[4,"ngIf"],[3,"passportTypeList","visaTypeList","salesCountryList","rowItem","submitEvent","closeEvent"]],template:function(e,t){if(1&e&&(Ie.Wb(0,"app-bs-passport-visa-search",0),Ie.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),Ie.ic(1,"async"),Ie.ic(2,"async"),Ie.ic(3,"async"),Ie.Vb(),Ie.Wb(4,"app-bs-passport-visa-control",1),Ie.fc("clickAddEvent",(function(){return t.clickAddHandler()}))("clickDelEvent",(function(){return t.clickDelHandler()}))("changePageSizeEvent",(function(e){return t.changePageSizeHandler(e)})),Ie.ic(5,"async"),Ie.ic(6,"async"),Ie.ic(7,"async"),Ie.Vb(),Ie.Nc(8,Ze,2,2,"ng-template",null,2,Ie.Oc),Ie.Wb(10,"app-grid-basis",3,4),Ie.fc("dbClickRowEvent",(function(e){return t.dbClickRowHandler(e)})),Ie.ic(12,"async"),Ie.ic(13,"async"),Ie.ic(14,"async"),Ie.ic(15,"async"),Ie.ic(16,"async"),Ie.Vb(),Ie.Wb(17,"app-dialog",5),Ie.fc("visibleChange",(function(){return t.closeUpsertHandler()})),Ie.ic(18,"async"),Ie.Nc(19,et,5,12,"app-bs-passport-visa-form",6),Ie.ic(20,"async"),Ie.Vb()),2&e){const e=Ie.Ec(9);Ie.pc("salesCountryList",Ie.jc(1,17,t.salesCountryList$))("searchCondition",Ie.jc(2,19,t.searchCondition$))("otherSearchInfo",Ie.jc(3,21,t.otherSearchInfo$)),Ie.Cb(4),Ie.pc("loading",Ie.jc(5,23,t.loading$))("currentPageSize",Ie.jc(6,25,t.listPageSize$))("totalCount",Ie.jc(7,27,t.gridDataList$).length),Ie.Cb(6),Ie.pc("gridLoading",Ie.jc(12,29,t.loading$))("gridState",Ie.jc(13,31,t.gridState$))("checkedState",Ie.jc(14,33,t.gridCheckedState$))("columns",t.columns)("pageSize",Ie.jc(15,35,t.listPageSize$))("checkboxUseYn",!0)("dataList",Ie.jc(16,37,t.gridDataList$))("templates",Ie.uc(43,tt,e)),Ie.Cb(7),Ie.pc("visible",Ie.jc(18,39,t.isOpenDetailPopup$))("modal",!0),Ie.Cb(2),Ie.pc("ngIf",Ie.jc(20,41,t.isOpenDetailPopup$))}},directives:[Ae,Be,Ke.a,Ge.a,n.o,Qe],pipes:[n.b],encapsulation:2,changeDetection:0}),e})();const st=[{path:"",component:it,data:{title:"\uad6d\uac00\ubcc4 \uc5ec\uad8c/\ube44\uc790 \uad00\ub9ac"}}];let nt=(()=>{class e{}return e.\u0275mod=Ie.Ob({type:e}),e.\u0275inj=Ie.Nb({factory:function(t){return new(t||e)},imports:[[L.f.forChild(st)],L.f]}),e})();var at=i("lJxs"),ot=i("JIr8"),ct=i("vkgz"),rt=i("bOdf"),lt=i("zp1y"),dt=i("Xb6A"),ut=i("AtUx");let pt=(()=>{class e{constructor(e,t,i,n,a,r){this.actions$=e,this.service=t,this._errorService=i,this.loader=n,this.alertService=a,this.store=r,this.loadList$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(s.loadList),Object(we.a)(({condition:e})=>this.service.getList(e).pipe(Object(at.a)(e=>s.getListSuccess({dataList:e})),Object(ot.a)(e=>{const t="List lookup failed. Please try again in a momentarily.",i=[s.getListFailure({error:t})];return this._catchErr(e,t,i),[]}))))),this.removeItems$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(s.removeSelectedGridEntities),Object(we.a)(({condition:e})=>this.service.removeItems(e).pipe(Object(at.a)(e=>({succeedYn:!0})),Object(ot.a)(e=>Object(Ve.a)({succeedYn:!1,error:e})))),Object(ct.a)(({succeedYn:e,error:t})=>{if(e){const e=[s.reloadList(),s.delSelectedDetailRowInfo()];this._runPage("Your data has been deleted.",e)}else{const e=[s.removeItemsFailure({error:"Deletion failed."})];this._catchErr(t,"Deletion failed.",e)}})),{dispatch:!1}),this.upsertItem$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(s.upsertItem),Object(we.a)(({upsertCondition:e})=>this.service.upsertItem(e).pipe(Object(at.a)(()=>({succeedYn:!0})),Object(ot.a)(e=>Object(Ve.a)({succeedYn:!1,error:e})))),Object(ct.a)(({succeedYn:e})=>{if(e){const e="Your data has been saved.",t=[s.reloadList(),s.closeDetailPopup(),s.delSelectedDetailRowInfo()];this._runPage(e,t)}else s.upsertItemFailure({error:"Failed to save."})})),{dispatch:!1}),this.loadPassportTypeList$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(s.loadPassportTypeList),Object(rt.a)(e=>Object(Ve.a)(e).pipe(Object(lt.a)(this.passportTypeList$))),Object(we.a)(([e,t])=>P.isEmpty(t)?this.service.getCommonDetailCodeList(e.condition).pipe(Object(at.a)(e=>s.getPassportTypeListSuccess({dataList:e})),Object(ot.a)(e=>{const t="List lookup failed.",i=[s.getPassportTypeListFailure({error:t})];return this._catchErr(e,t,i),[]})):[]))),this.loadVisaTypeList$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(s.loadVisaTypeList),Object(rt.a)(e=>Object(Ve.a)(e).pipe(Object(lt.a)(this.visaTypeList$))),Object(we.a)(([e,t])=>P.isEmpty(t)?this.service.getCommonDetailCodeList(e.condition).pipe(Object(at.a)(e=>s.getVisaTypeListSuccess({dataList:e})),Object(ot.a)(e=>{const t="List lookup failed.",i=[s.getVisaTypeListFailure({error:t})];return this._catchErr(e,t,i),[]})):[]))),this.salesCountryCodeList$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(s.loadSalesCountryList),Object(rt.a)(e=>Object(Ve.a)(e).pipe(Object(lt.a)(this.salesCountryList$))),Object(we.a)(([e,t])=>P.isEmpty(t)?this.service.salesCountryCodeList(e.condition).pipe(Object(at.a)(e=>s.getSalesCountryListSuccess({dataList:e})),Object(ot.a)(e=>(this._catchErr(e,"List lookup failed.",[]),[]))):[]))),this.passportTypeList$=r.pipe(Object(c.u)(pe)),this.visaTypeList$=r.pipe(Object(c.u)(he)),this.salesCountryList$=r.pipe(Object(c.u)(be))}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this.store.dispatch(e)})}:()=>{}})}_catchErr(e,t,i){const s=this._errorService.errorHandler(e,t);P.isNil(s)||(P.isNil(s.accept)&&(s.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(e=>{this.store.dispatch(e)})}:()=>{}),this.alertService.alert(s))}}return e.\u0275fac=function(t){return new(t||e)(Ie.bc(o.a),Ie.bc(Fe),Ie.bc(dt.a),Ie.bc(ut.a),Ie.bc(Ye.a),Ie.bc(c.h))},e.\u0275prov=Ie.Mb({token:e,factory:e.\u0275fac}),e})();var ht=i("YH7L");const bt=[it],gt=[Be,Qe,Ae];let ft=(()=>{class e{}return e.\u0275mod=Ie.Ob({type:e}),e.\u0275inj=Ie.Nb({factory:function(t){return new(t||e)},imports:[[n.c,a.m,a.w,r.m,l.a,d.a,u.a,C.a,p.a,h.a,ht.a,b.a,g.a,f.a,m.a,y.a,v.a,O.a,S.a,j.a,nt,c.j.forFeature("bsPassportVisa",ce),o.b.forFeature([pt])]]}),e})()},YH7L:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("ofXK"),n=i("3Pt+"),a=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=a.Ob({type:e}),e.\u0275inj=a.Nb({factory:function(t){return new(t||e)},imports:[[s.c,n.m,n.w]]}),e})()},nMd8:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var s=i("fXoL"),n=i("3Pt+"),a=i("LvDl"),o=i("XNiG"),c=i("itXk"),r=i("1G5W"),l=i("pLZG"),d=i("YY+H"),u=i("kt0X"),p=i("ofXK");function h(e,t){if(1&e&&(s.Wb(0,"option",3),s.Pc(1),s.Vb()),2&e){const e=s.hc();s.pc("ngValue",null),s.Cb(1),s.Qc(e.useAllOptionName)}}function b(e,t){if(1&e&&(s.Wb(0,"option",3),s.Pc(1),s.Vb()),2&e){const e=t.$implicit,i=s.hc();s.pc("ngValue",e),s.Cb(1),s.Qc(i.displayKey?e[i.displayKey]:e)}}const g={provide:n.p,useExisting:Object(s.U)(()=>f),multi:!0};let f=(()=>{class e{constructor(e,t){this._store=e,this._cdr=t,this.useAllOptionYn=!0,this.useAllOptionName="All",this.dataKey="detailCode",this.onChange=new s.n,this._unsubscribe$=new o.a,this._options$=new o.a,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.selectedLanguage$=this._store.select(d.f)}get invalid(){return this.isInvalid}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get options(){return this._options}set options(e){this._options=e,this._options$.next(e),this.updateSelectedOption(this.value)}ngOnInit(){this.updateSelectedOption(null),this._initSubscription()}ngAfterViewInit(){this.options&&this._options$.next(this.options)}ngOnDestroy(){this._options$.next(null),this._options$.complete(),this._unsubscribe$.next(),this._unsubscribe$.complete()}writeValue(e){this.value=e,this.updateSelectedOption(e)}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}compareFn(e,t){return this.dataKey?e[this.dataKey]===t[this.dataKey]:e===t}selectItem(e){this.selectedOption=e,this.value=this._getValue(e),this.onModelChange(this.value),this.onChange.emit({value:this.value,option:e})}updateSelectedOption(e){this.selectedOption=this._findOption(e,this.options)}_findOption(e,t){return this.dataKey?a.find(t,t=>t[this.dataKey]===e)||null:e}_getValue(e){return a.isNil(e)?null:e[this.dataKey]}_initSubscription(){if(this.displayKey)return;let e=null;Object(c.a)([this.selectedLanguage$,this._options$]).pipe(Object(r.a)(this._unsubscribe$),Object(l.a)(([e,t])=>t&&t.length>0)).subscribe(([t,i])=>{let s;if(a.isNil(t)&&(t="EN"),!e&&i&&(e=t),e===t&&(this.displayKey=this.displayWord+"Ln",Object.keys(i[0]).includes(this.displayKey)))this._cdr.detectChanges();else{switch(t){case"EN":s=this._findDisplayKey(i,this.displayWord,["En"]);break;case"KO":s=this._findDisplayKey(i,this.displayWord,["Ko","Kr"]);break;case"JA":s=this._findDisplayKey(i,this.displayWord,["Ja","Jp"]);break;case"ZH":s=this._findDisplayKey(i,this.displayWord,["Zh","Cn"]);break;case"VI":s=this._findDisplayKey(i,this.displayWord,["Vi","Vn"])}this.displayKey=s||this.displayWord+"En",this._cdr.detectChanges()}})}_findDisplayKey(e,t,i){if(!e||0===e.length)return null;if(console.log(t,"displayWord"),!t)return null;const s=Object.keys(e[0]);for(const n of i){const e=t+n;if(s.includes(e))return e;if(s.includes(t))return e}return null}}return e.\u0275fac=function(t){return new(t||e)(s.Qb(u.h),s.Qb(s.h))},e.\u0275cmp=s.Kb({type:e,selectors:[["app-selectbox-detailcode"]],hostAttrs:[1,"select-box"],hostVars:2,hostBindings:function(e,t){2&e&&s.Gb("valid-error",t.invalid)},inputs:{name:"name",useAllOptionYn:"useAllOptionYn",useAllOptionName:"useAllOptionName",dataKey:"dataKey",displayKey:"displayKey",displayWord:"displayWord",isInvalid:"isInvalid",disabled:"disabled",options:"options"},outputs:{onChange:"onChange"},features:[s.Bb([g])],decls:3,vars:6,consts:[[3,"compareWith","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngIf"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(e,t){1&e&&(s.Wb(0,"select",0),s.fc("ngModelChange",(function(e){return t.selectItem(e)})),s.Nc(1,h,2,2,"option",1),s.Nc(2,b,2,2,"option",2),s.Vb()),2&e&&(s.pc("compareWith",t.compareFn)("ngModel",t.selectedOption)("disabled",t.disabled),s.Db("name",t.name),s.Cb(1),s.pc("ngIf",t.useAllOptionYn),s.Cb(1),s.pc("ngForOf",t.options))},directives:[n.y,n.r,n.u,p.o,p.n,n.v,n.A],encapsulation:2}),e})()}}]);