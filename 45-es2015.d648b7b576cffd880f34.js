(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"2QGa":function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i("F97/"),a=i("SeVD"),s=i("pLZG"),r=i("HDdC");function l(t,e,i){return[Object(s.a)(e,i)(new r.a(Object(a.a)(t))),Object(s.a)(Object(n.a)(e,i))(new r.a(Object(a.a)(t)))]}},"7G9D":function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("tk/3"),a=i("IzEk"),s=i("LvDl"),r=i("fXoL"),l=i("tpT/"),o=i("EsKh");let c=(()=>{class t{constructor(t,e){this.api=t,this.alertService=e}imageCheck(t){if(0===t.target.files.length)return!1;const e=t.target.files[0];if(e.size>2e6)return this.alertService.alert("\ud30c\uc77c \uc0ac\uc774\uc988\ub294 2MB\ub97c \ub118\uae38 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"),!1;let i=this.parseFileName(e.name);const n=i.toLowerCase(),a=n.lastIndexOf("."),s=n.substring(a+1);if(a<0)i+=".jpg";else if("jpg"!==s&&"png"!==s&&"jpeg"!==s)return this.alertService.alert("\uc774\ubbf8\uc9c0 \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return e}pdfCheck(t){if(0===t.target.files.length)return!1;const e=t.target.files[0];let i=this.parseFileName(e.name);const n=i.toLowerCase(),a=n.lastIndexOf("."),s=n.substring(a+1);if(a<0)i+=".pdf";else if("pdf"!==s)return this.alertService.alert("PDF \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return e}excelCheck(t){if(0===t.target.files.length)return!1;const e=t.target.files[0];let i=this.parseFileName(e.name);const n=i.toLowerCase(),a=n.lastIndexOf("."),s=n.substring(a+1);if(a<0)i+=".xls";else if("xls"!==s&&"xlsx"!==s)return this.alertService.alert("\uc5d1\uc140 \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return e}imageUpload(t,e){const i=new FormData;for(const a in e)if(e.hasOwnProperty(a))try{i.set(a,e[a])}catch(n){i.append(a,e[a])}return this.api.post(t,i)}fileUpload(t,e){const i=new FormData;for(const a in e)if(e.hasOwnProperty(a))try{i.set(a,e[a])}catch(n){i.append(a,e[a])}return this.api.put(t,i)}fileDelete(t,e){const i=Object.assign({},this.api.defaultParams,{condition:e});return this.api.delete(t,i)}fileDownload(t){let e,i;switch(t.params||(t=Object.assign(t,{params:""})),t.type||(t.type="excel"),t.type){case"excel":e=".xls",i="application/vnd.ms-excel";break;case"pdf":e=".pdf",i="application/pdf"}const r=n=>{const a=document.createElement("a"),s=new Blob([n],{type:i});a.href=URL.createObjectURL(s),a.download=t.filename+e,a.click()};if("post"===t.requestMethod){const e=s.assign({},this.api.defaultParams,{condition:t.params});return this.api.postBlob(t.url,e).pipe(Object(a.a)(1)).subscribe(t=>{"application/json"===t.type?this.alertService.alert("You must wait a minute before making another request."):r(t)})}return this.api.get(t.url,t.params,{responseType:"blob",headers:new n.e({"Content-Type":"application/json",Accept:"application/json"})}).pipe(Object(a.a)(1)).subscribe(t=>{r(t)})}parseFileName(t){const e=/[\{\}\[\]\/?,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"' ']/gi,i=t;return e.test(i)?i.replace(e,""):i}}return t.\u0275fac=function(e){return new(e||t)(r.bc(l.a),r.bc(o.a))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},LVFn:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("3qRM"),a=i("W1wq"),s=i("fXoL");let r=(()=>{class t extends n.b{}return t.\u0275fac=function(e){return l(e||t)},t.\u0275cmp=s.Kb({type:t,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[s.Bb([a.b]),s.zb],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();const l=s.Yb(r)},U6NN:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("fXoL"),a=i("3Pt+"),s=i("LvDl"),r=i("ofXK");function l(t,e){if(1&t&&(n.Wb(0,"option",3),n.Pc(1),n.Vb()),2&t){const t=n.hc();n.pc("ngValue",null),n.Cb(1),n.Qc(t.useAllOptionName)}}function o(t,e){if(1&t&&(n.Wb(0,"option",3),n.Pc(1),n.Vb()),2&t){const t=e.$implicit,i=n.hc();n.pc("ngValue",t),n.Cb(1),n.Qc(i.displayKey?t[i.displayKey]:t)}}const c={provide:a.p,useExisting:Object(n.U)(()=>u),multi:!0};let u=(()=>{class t{constructor(t,e,i,a){this.el=t,this.renderer=e,this.cd=i,this.zone=a,this.dataKey="value",this.displayKey="label",this.useAllOptionYn=!0,this.useAllOptionName="All",this.onChange=new n.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get invalid(){return this.isInvalid}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this.cd.destroyed||this.cd.detectChanges()}get options(){return this._options}set options(t){this._options=t,this.updateSelectedOption(this.value)}ngOnInit(){this.updateSelectedOption(null)}ngOnDestroy(){}compareFn(t,e){return this.dataKey?t[this.dataKey]===e[this.dataKey]:t===e}selectItem(t){this.selectedOption=t,this.value=this._getValue(t),this.onModelChange(this.value),this.onChange.emit({value:this.value,option:t})}writeValue(t){this.value=t,this.updateSelectedOption(t),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t}updateSelectedOption(t){this.selectedOption=this._findOption(t,this.options)}_findOption(t,e){return this.dataKey?s.find(e,e=>e[this.dataKey]===t)||null:t}_getValue(t){return s.isNil(t)?null:t[this.dataKey]}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(n.l),n.Qb(n.E),n.Qb(n.h),n.Qb(n.z))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-selectbox"]],hostAttrs:[1,"select-box"],hostVars:2,hostBindings:function(t,e){2&t&&n.Gb("valid-error",e.invalid)},inputs:{name:"name",styleClass:"styleClass",required:"required",tabindex:"tabindex",dataKey:"dataKey",displayKey:"displayKey",isInvalid:"isInvalid",useAllOptionYn:"useAllOptionYn",useAllOptionName:"useAllOptionName",disabled:"disabled",options:"options"},outputs:{onChange:"onChange"},features:[n.Bb([c])],decls:3,vars:8,consts:[[3,"compareWith","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngIf"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,e){1&t&&(n.Wb(0,"select",0),n.fc("ngModelChange",(function(t){return e.selectItem(t)})),n.Nc(1,l,2,2,"option",1),n.Nc(2,o,2,2,"option",2),n.Vb()),2&t&&(n.pc("compareWith",e.compareFn)("ngModel",e.selectedOption)("disabled",e.disabled),n.Db("name",e.name)("required",e.required)("tabindex",e.tabindex),n.Cb(1),n.pc("ngIf",e.useAllOptionYn),n.Cb(1),n.pc("ngForOf",e.options))},directives:[a.y,a.r,a.u,a.x,r.o,r.n,a.v,a.A],encapsulation:2}),t})()},"kd+X":function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i("fXoL"),a=i("3Pt+"),s=i("baeO"),r=i("8LU1"),l=i("FtGj"),o=i("quSY"),c=i("95bG");class u{constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}}let d=(()=>{class t{constructor(t,e,i){if(this._elementRef=t,this._dateAdapter=e,this._dateFormats=i,this.dateChange=new n.n,this.dateInput=new n.n,this._valueChange=new n.n,this._disabledChange=new n.n,this._valueChangesSubscription=o.a.EMPTY,this._localeSubscription=o.a.EMPTY,this._lastValueValid=!1,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=t=>{const e=this._getValidDateOrNull(this._dateAdapter.deserialize(t.value)),i=this._getDateFilter();return i&&e&&!i(e)?{matDatepickerFilter:!0}:null},this._minValidator=t=>{const e=this._getValidDateOrNull(this._dateAdapter.deserialize(t.value)),i=this._getMinDate();return!i||!e||this._dateAdapter.compareDate(i,e)<=0?null:{matDatepickerMin:{min:i,actual:e}}},this._maxValidator=t=>{const e=this._getValidDateOrNull(this._dateAdapter.deserialize(t.value)),i=this._getMaxDate();return!i||!e||this._dateAdapter.compareDate(i,e)>=0?null:{matDatepickerMax:{max:i,actual:e}}},!this._dateAdapter)throw Object(c.a)("DateAdapter");if(!this._dateFormats)throw Object(c.a)("MAT_DATE_FORMATS");this._localeSubscription=e.localeChanges.subscribe(()=>{this.value=this.value})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(t){t=this._dateAdapter.deserialize(t),this._lastValueValid=!t||this._dateAdapter.isValid(t),t=this._getValidDateOrNull(t);const e=this.value;this._assignValue(t),this._formatValue(t),this._dateAdapter.sameDate(e,t)||this._valueChange.emit(t)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(t){const e=Object(r.c)(t),i=this._elementRef.nativeElement;this._disabled!==e&&(this._disabled=e,this._disabledChange.emit(e)),e&&this._isInitialized&&i.blur&&i.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(t){this._model=t,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(t=>{if(t.source!==this){const e=this._getValueFromModel(t.selection);this._cvaOnChange(this._dateAdapter.format(e,this._dateFormats.display.dateInput)),this._onTouched(),this._formatValue(e),this.dateInput.emit(new u(this,this._elementRef.nativeElement)),this.dateChange.emit(new u(this,this._elementRef.nativeElement)),this._outsideValueChanged&&this._outsideValueChanged()}})}ngAfterViewInit(){this._isInitialized=!0}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}writeValue(t){this.value=t}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onKeydown(t){t.altKey&&t.keyCode===l.b&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),t.preventDefault())}_onInput(t){const e=this._lastValueValid;let i=this._dateAdapter.parse(t,this._dateFormats.parse.dateInput);this._lastValueValid=!i||this._dateAdapter.isValid(i),i=this._getValidDateOrNull(i),this._dateAdapter.sameDate(i,this.value)?e!==this._lastValueValid&&this._validatorOnChange():(this._assignValue(i),this._cvaOnChange(i?this._dateAdapter.format(i,this._dateFormats.display.dateInput):null),this._valueChange.emit(i),this.dateInput.emit(new u(this,this._elementRef.nativeElement)));const n=this._convertDateInput(t);this._elementRef.nativeElement.value=n}_onChange(){this.dateChange.emit(new u(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=t?this._dateAdapter.format(t,this._dateFormats.display.dateInput):""}_getValidDateOrNull(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}_assignValue(t){this._model?(this._assignValueToModel(t),this._pendingValue=null):this._pendingValue=t}_parentDisabled(){return!1}_convertDateInput(t){if(t.length>10)return t.substr(0,10);let e=t.replace(/[^\d]/g,"");return e=e.length<7?e.replace(/(\d{4})(\d{1,2})/g,"$1-$2"):e.replace(/(\d{4})(\d{2})(\d{1,2})/g,"$1-$2-$3"),e}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(n.l),n.Qb(s.a,8),n.Qb(s.c,8))},t.\u0275dir=n.Lb({type:t,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"}}),t})();const h={provide:a.p,useExisting:Object(n.U)(()=>p),multi:!0},b={provide:a.o,useExisting:Object(n.U)(()=>p),multi:!0};let p=(()=>{class t extends d{constructor(t,e,i){super(t,e,i),this._validator=a.z.compose(super._getValidators())}set matDatepicker(t){t&&(this._datepicker=t,this._registerModel(t._registerInput(this)))}get min(){return this._min}set min(t){this._min=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._validatorOnChange()}get max(){return this._max}set max(t){this._max=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._validatorOnChange()}get dateFilter(){return this._dateFilter}set dateFilter(t){this._dateFilter=t,this._validatorOnChange()}getConnectedOverlayOrigin(){return this._elementRef}getThemePalette(){}getStartValue(){return this.value}getPopupConnectionElementRef(){return this.getConnectedOverlayOrigin()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(t){return t}_assignValueToModel(t){this._model&&this._model.updateSelection(t,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(n.l),n.Qb(s.a,8),n.Qb(s.c,8))},t.\u0275dir=n.Lb({type:t,selectors:[["input","matDatepicker",""]],hostVars:5,hostBindings:function(t,e){1&t&&n.fc("input",(function(t){return e._onInput(t.target.value)}))("change",(function(){return e._onChange()}))("blur",(function(){return e._onBlur()}))("keydown",(function(t){return e._onKeydown(t)})),2&t&&(n.Zb("disabled",e.disabled),n.Db("aria-haspopup",e._datepicker?"dialog":null)("aria-owns",(null==e._datepicker?null:e._datepicker.opened)&&e._datepicker.id||null)("min",e.min?e._dateAdapter.toIso8601(e.min):null)("max",e.max?e._dateAdapter.toIso8601(e.max):null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[n.Bb([h,b]),n.zb]}),t})()},rbKv:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i("8LU1"),a=i("quSY"),s=i("LRne"),r=i("VRyK"),l=i("fXoL"),o=i("tfFa");const c=["button"];let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=l.Lb({type:t,selectors:[["","matDatepickerToggleIcon",""]]}),t})(),d=(()=>{class t{constructor(t,e,i){this._intl=t,this._changeDetectorRef=e,this._stateChanges=a.a.EMPTY;const n=Number(i);this.tabIndex=n||0===n?n:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(t){this._disabled=Object(n.c)(t)}ngOnChanges(t){t.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(t){this.datepicker&&!this.disabled&&(this.datepicker.open(),t.stopPropagation())}_watchStateChanges(){const t=this.datepicker?this.datepicker._disabledChange:Object(s.a)(),e=this.datepicker&&this.datepicker._datepickerInput?this.datepicker._datepickerInput._disabledChange:Object(s.a)(),i=this.datepicker?Object(r.a)(this.datepicker.openedStream,this.datepicker.closedStream):Object(s.a)();this._stateChanges.unsubscribe(),this._stateChanges=Object(r.a)(this._intl.changes,t,e,i).subscribe(()=>this._changeDetectorRef.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(l.Qb(o.a),l.Qb(l.h),l.cc("tabindex"))},t.\u0275cmp=l.Kb({type:t,selectors:[["mat-datepicker-toggle"]],contentQueries:function(t,e,i){var n;1&t&&l.Ib(i,u,!0),2&t&&l.Dc(n=l.gc())&&(e._customIcon=n.first)},viewQuery:function(t,e){var i;1&t&&l.Xc(c,!0),2&t&&l.Dc(i=l.gc())&&(e._button=i.first)},hostVars:1,hostBindings:function(t,e){1&t&&l.fc("focus",(function(){return e._button.focus()})),2&t&&l.Db("tabindex",e.disabled?null:-1)},inputs:{disabled:"disabled",datepicker:["for","datepicker"],tabIndex:"tabIndex",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[l.Ab],decls:3,vars:3,consts:[[1,"ico-calendar",3,"click"],["button",""]],template:function(t,e){1&t&&(l.Wb(0,"a",0,1),l.fc("click",(function(t){return e._open(t)})),l.Pc(2,"\uce98\ub9b0\ub354 \uc5f4\uae30"),l.Vb()),2&t&&l.Db("aria-haspopup",e.datepicker?"dialog":null)("aria-label",e._intl.openCalendarLabel)("tabindex",e.disabled?-1:e.tabIndex)},encapsulation:2,changeDetection:0}),t})()},vC6N:function(t,e,i){"use strict";i.r(e),i.d(e,"CONTAINERS",(function(){return $t})),i.d(e,"COMPONENTS",(function(){return Tt})),i.d(e,"FlBillingCheckSaleModule",(function(){return zt}));var n={};i.r(n),i.d(n,"initThisStateAction",(function(){return P})),i.d(n,"loadPaymentPeriodListAction",(function(){return x})),i.d(n,"loadPaymentPeriodListSuccessAction",(function(){return L})),i.d(n,"loadPaymentPeriodListFailureAction",(function(){return I})),i.d(n,"loadControlBranchListAction",(function(){return F})),i.d(n,"loadControlBranchListSuccessAction",(function(){return N})),i.d(n,"loadControlBranchListFailureAction",(function(){return B})),i.d(n,"changeSearchConditionAction",(function(){return R})),i.d(n,"loadMainListAction",(function(){return E})),i.d(n,"loadMainListSuccessAction",(function(){return W})),i.d(n,"loadMainListFailureAction",(function(){return M})),i.d(n,"changePageSize",(function(){return Y})),i.d(n,"changePageIndex",(function(){return $})),i.d(n,"setGridStateAction",(function(){return T})),i.d(n,"setGridCheckStateAction",(function(){return z}));var a=i("ofXK"),s=i("3Pt+"),r=i("snw9"),l=i("kt0X"),o=i("WG3B"),c=i("wPo9"),u=i("7rOj"),d=i("6LsY"),h=i("l1P7"),b=i("v7zA"),p=i("hHe4"),m=i("1OXJ"),g=i("5hwk"),f=i("kKjH"),C=i("qXPF"),_=i("7UZF"),v=i("w8np"),O=i("vu/V"),y=i("tyNb"),k=i("XNiG"),S=i("itXk"),j=i("zP0r"),V=i("Kj3r"),D=i("pLZG"),w=i("1G5W"),A=i("LvDl");const P=Object(l.o)("[FlBillingCheckSale] init flight billing list"),x=Object(l.o)("[FlBillingCheckSale] load payment period list",Object(l.t)()),L=Object(l.o)("[FlBillingCheckSale] load payment period list success",Object(l.t)()),I=Object(l.o)("[FlBillingCheckSale] load payment period list failure",Object(l.t)()),F=Object(l.o)("[FlBillingCheckSale] load control branch list",Object(l.t)()),N=Object(l.o)("[FlBillingCheckSale] load control branch list success",Object(l.t)()),B=Object(l.o)("[FlBillingCheckSale] load control branch list failure",Object(l.t)()),R=Object(l.o)("[FlBillingCheckSale] change search condition",Object(l.t)()),E=Object(l.o)("[FlBillingCheckSale] load flight billing list",Object(l.t)()),W=Object(l.o)("[FlBillingCheckSale] load flight billing list success",Object(l.t)()),M=Object(l.o)("[FlBillingCheckSale] load flight billing list failure",Object(l.t)()),Y=Object(l.o)("[FlBillingCheckSale] change page size",Object(l.t)()),$=Object(l.o)("[FlBillingCheckSale] change page index",Object(l.t)()),T=Object(l.o)("[FlBillingCheckSale] set grid state",Object(l.t)()),z=Object(l.o)("[FlBillingCheckSale] set grid checked rowids",Object(l.t)());var Q=i("EVqC");const K=Object(Q.a)({selectId:t=>t.id,sortComparer:!1}),G=K.getInitialState({paymentPeriodList:null,controlBranchList:null,loading:!1,searchCondition:null,mainSummaryInfo:null,gridDataTotal:null,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},gridCheckedState:null}),X=Object(l.q)(G,Object(l.s)(n.initThisStateAction,t=>Object.assign(Object.assign({},t),{loading:!1})),Object(l.s)(n.loadPaymentPeriodListSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{paymentPeriodList:e})),Object(l.s)(n.loadControlBranchListSuccessAction,(t,{dataList:e})=>Object.assign(Object.assign({},t),{controlBranchList:e})),Object(l.s)(n.changeSearchConditionAction,(t,{condition:e})=>Object.assign(Object.assign({},t),{searchCondition:A.cloneDeep(e)})),Object(l.s)(n.loadMainListAction,t=>Object.assign(Object.assign({},t),{loading:!0})),Object(l.s)(n.loadMainListSuccessAction,(t,{dataCollection:e})=>K.setAll(e.list,Object.assign(Object.assign({},t),{loading:!1,mainSummaryInfo:e.summary,gridDataTotal:e.totalCount}))),Object(l.s)(n.loadMainListFailureAction,t=>Object.assign(Object.assign({},t),{loading:!1})),Object(l.s)(n.changePageSize,(t,{pageSize:e})=>Object.assign(Object.assign({},t),{gridState:A.set(A.cloneDeep(t.gridState),["pageInfo","take"],e)})),Object(l.s)(n.changePageIndex,(t,{pageIndex:e})=>Object.assign(Object.assign({},t),{gridState:A.set(A.cloneDeep(t.gridState),["pageInfo","skip"],e)})),Object(l.s)(n.setGridCheckStateAction,(t,{gridCheckedState:e})=>Object.assign(Object.assign({},t),{gridCheckedState:e})),Object(l.s)(n.setGridStateAction,(t,{gridState:e})=>Object.assign(Object.assign({},t),{gridState:e})));function q(t,e){return Object(l.m)({flBillingCheckSaleMain:X})(t,e)}const U=Object(l.p)("flBillingCheckSale"),H=Object(l.r)(U,t=>t.flBillingCheckSaleMain),J=Object(l.r)(H,t=>t.paymentPeriodList),Z=Object(l.r)(H,t=>t.controlBranchList),tt=Object(l.r)(H,t=>t.loading),et=Object(l.r)(H,t=>t.searchCondition),it=K.getSelectors(H).selectAll,nt=Object(l.r)(H,t=>t.mainSummaryInfo),at=Object(l.r)(H,t=>t.gridDataTotal),st=Object(l.r)(H,t=>t.gridState),rt=Object(l.r)(H,t=>t.gridCheckedState),lt=Object(l.r)(st,t=>A.get(t,["pageInfo","take"],20));var ot=i("AytR");const{API_URL:ct}=ot.a,ut={selectEntities:`${ct}/admin/flight/billing/check`,postCommonDetailCode:`${ct}/common/detail-code`,excelDownload:`${ct}/admin/flight/billing/check/excel`};var dt=i("fXoL"),ht=i("wd/R"),bt=i("6UzV");let pt=(()=>{class t{constructor(t){this.fb=t,this.generateGridColumns=()=>[{field:"checkNo",title:"No.",width:60},{groupYn:!0,title:"Ticket No.",subColums:[{field:"ticketNo",path:["bsp","ticketNo"],title:"BSP",width:130},{field:"ticketNo",path:["dsr","ticketNo"],title:"DSR",width:130}]},{groupYn:!0,title:"AIR",subColums:[{field:"airlineNumberCode",path:["bsp","airlineNumberCode"],title:"BSP",width:80},{field:"airlineNumberCode",path:["dsr","airlineNumberCode"],title:"DSR",width:80}]},{groupYn:!0,title:"VOID",subColums:[{field:"ticketVoidTypeCode",path:["bsp","ticketVoidTypeCode"],title:"BSP",width:80},{field:"ticketVoidTypeCode",path:["dsr","ticketVoidTypeCode"],title:"DSR",width:80}]},{groupYn:!0,title:"Cash",subColums:[{field:"cashAmount",path:["bsp","cashAmount"],title:"BSP",width:120,format:"currency"},{field:"cashAmount",path:["dsr","cashAmount"],title:"DSR",width:120,format:"currency"}]},{groupYn:!0,title:"Card",subColums:[{field:"cardAmount",path:["bsp","cardAmount"],title:"BSP",width:120,format:"currency"},{field:"cardAmount",path:["dsr","cardAmount"],title:"DSR",width:120,format:"currency"}]},{groupYn:!0,title:"Fare",subColums:[{field:"fareAmount",path:["bsp","fareAmount"],title:"BSP",width:120,format:"currency"},{field:"fareAmount",path:["dsr","fareAmount"],title:"DSR",width:120,format:"currency"}]},{groupYn:!0,title:"DC",subColums:[{field:"discountAmount",path:["bsp","discountAmount"],title:"BSP",width:120,format:"currency"},{field:"discountAmount",path:["dsr","discountAmount"],title:"DSR",width:120,format:"currency"}]},{groupYn:!0,title:"Com (%)",subColums:[{field:"airlineCommCode",path:["bsp","airlineCommCode"],title:"BSP",width:120},{field:"airlineCommCode",path:["dsr","airlineCommCode"],title:"DSR",width:120}]},{groupYn:!0,title:"Comm",subColums:[{field:"airlineCommAmount",path:["bsp","airlineCommAmount"],title:"BSP",width:120,format:"currency"},{field:"airlineCommAmount",path:["dsr","airlineCommAmount"],title:"DSR",width:120,format:"currency"}]},{groupYn:!0,title:"VAT",subColums:[{field:"airlineCommVat",path:["bsp","airlineCommVat"],title:"BSP",width:120,format:"currency"},{field:"airlineCommVat",path:["dsr","airlineCommVat"],title:"DSR",width:120,format:"currency"}]},{groupYn:!0,title:"Tax",subColums:[{field:"taxAmount",path:["bsp","taxAmount"],title:"BSP",width:120,format:"currency"},{field:"taxAmount",path:["dsr","taxAmount"],title:"DSR",width:120,format:"currency"}]},{groupYn:!0,title:"Balance",subColums:[{field:"balanceAmount",path:["bsp","balanceAmount"],title:"BSP",width:120,format:"currency"},{field:"balanceAmount",path:["dsr","balanceAmount"],title:"DSR",width:120,format:"currency"}]},{groupYn:!0,title:"Card No.",subColums:[{field:"cardNo",path:["bsp","cardNo"],title:"BSP",width:120},{field:"cardNo",path:["dsr","cardNo"],title:"DSR",width:120}]},{groupYn:!0,title:"CNJ",subColums:[{field:"conjunctionTypeCode",path:["bsp","conjunctionTypeCode"],title:"BSP",width:120},{field:"conjunctionTypeCode",path:["dsr","conjunctionTypeCode"],title:"DSR",width:120}]}],this.generateListSearchForm=()=>this.fb.group({salesOrRefund:[null],ticketingDates:this.fb.array([new s.g(null,[s.z.required]),new s.g(null,[s.z.required])]),controlBranchCode:[null],normalYn:[null],ticketNo:[null],excludeVoidYn:[null],weekInfo:this.fb.group({year:[null],month:[null],week:[null]})},{validators:[bt.a.compareDatesValidators("rangeCompare",[["ticketingDates",0],["ticketingDates",1]])]}),this.initFlBillingCheckSaleSearchForm=()=>({salesOrRefund:"S",ticketingDates:[ht().format("YYYY-MM-DD"),ht().format("YYYY-MM-DD")],controlBranchCode:null,normalYn:null,ticketNo:null,excludeVoidYn:null,weekInfo:{year:null,month:null,week:null}})}}return t.\u0275fac=function(e){return new(e||t)(dt.bc(s.f))},t.\u0275prov=dt.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var mt=i("LRne"),gt=i("z6cu"),ft=i("eIep"),Ct=i("tpT/");let _t=(()=>{class t{constructor(t){this.api=t}getCommonDetailCodeList(t){const e=A.assign({},this.api.defaultParams,{condition:t});return this.api.post(ut.postCommonDetailCode,e).pipe(Object(ft.a)(t=>t.succeedYn?Object(mt.a)(t.result.list):Object(gt.a)(t||"api response error")))}getMainList(t){const e=A.assign({},this.api.defaultParams,{condition:t});return this.api.post(ut.selectEntities,e).pipe(Object(ft.a)(t=>{var e,i,n,a;if(t.succeedYn){const s=(null===(i=null===(e=t.result)||void 0===e?void 0:e.list)||void 0===i?void 0:i.length)>0?t.result.list.map(t=>Object.assign({},t,{id:t.checkNo})):[],r=(null===(n=t.result)||void 0===n?void 0:n.summary)?A.cloneDeep(t.result.summary):{},l=(null===(a=t.result)||void 0===a?void 0:a.totalCount)||0;return Object(mt.a)({list:s,summary:r,totalCount:l})}return Object(gt.a)(t||"api response error")}))}}return t.\u0275fac=function(e){return new(e||t)(dt.bc(Ct.a))},t.\u0275prov=dt.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var vt=i("+Sob"),Ot=i("U6NN"),yt=i("rbKv"),kt=i("kd+X"),St=i("LVFn"),jt=i("gbCm"),Vt=i("pb6r");const Dt=function(){return["ticketingDates",0]},wt=function(){return["ticketingDates",1]};let At=(()=>{class t{constructor(t,e){this.fb=t,this._dataService=e,this.clickSearchEvent=new dt.n,this.clickResetEvent=new dt.n,this.yearOptions=[],this.monthOptions=[],this.normalYnOptions=[],this._$unsubscribe=new k.a,this._isInitLoad=!0,this.searchForm=e.generateListSearchForm()}get searchCondition(){return this._searchCondition}set searchCondition(t){this._searchCondition=t,this.searchFormData=this._setSearchFormData(t)}get formValue(){return this.searchForm&&this.searchForm.value}get dateRange(){return this.searchForm.get("ticketingDates")}get minDateRange(){const t=this.dateRange.value;return(null==t?void 0:t.length)>0?t[0]:null}get weekInfo(){return this.searchForm.get("weekInfo")}ngOnInit(){this._initState(),this._initSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){this.searchForm.invalid?this._checkValid=!0:this.clickSearchEvent.emit(this.setSearchCondition())}onReset(){this._isInitLoad=!0,this.clickResetEvent.emit()}setSearchCondition(){return A.omitBy(this.searchForm.value,A.isNil)}checkIsInvalid(t){return this._checkValid&&this.searchForm.get(t)&&this.searchForm.get(t).invalid}checkIsInvalidDateRange(){var t;return this._checkValid&&!0===(null===(t=this.searchForm.errors)||void 0===t?void 0:t.rangeCompare)}_setSearchFormData(t){if(!0===this._isInitLoad){this._isInitLoad=!1;const e=this._dataService.initFlBillingCheckSaleSearchForm();return Object.assign({},e,A.pick(t,Object.keys(e)))}}_initState(){this.yearOptions=["2020","2021","2022","2023","2024","2025","2026","2027","2028"].map(t=>({label:t,value:t}));for(let t=0;t<12;t++){const e=A.padStart(String(t+1),2,"0");this.monthOptions.push({value:e,label:`${t+1}\uc6d4`})}this.normalYnOptions=[{label:"\uc815\uc0c1",value:!0},{label:"\ube44\uc815\uc0c1",value:!1}]}_initSubscription(){this.weekInfo.get("year").valueChanges.pipe(Object(w.a)(this._$unsubscribe)).subscribe(t=>{const e=this.weekInfo.get("month");A.isNil(t)?(e.setValue(null),e.disable()):e.enable()}),this.weekInfo.get("month").valueChanges.pipe(Object(w.a)(this._$unsubscribe)).subscribe(t=>{const e=this.weekInfo.get("week");A.isNil(t)?(e.setValue(null),e.disable()):e.enable()}),this.weekInfo.valueChanges.pipe(Object(D.a)(t=>!A.isNil(null==t?void 0:t.year)&&!A.isNil(null==t?void 0:t.month)&&!A.isNil(null==t?void 0:t.week)),Object(w.a)(this._$unsubscribe)).subscribe(t=>{const[e,i,n]=t.week.split("|"),a=`${t.year}-${t.month}-${i}`;let s=`${t.year}-${t.month}-${n}`;"06"===e&&(s=ht(a).endOf("month").format("YYYY-MM-DD")),this.searchForm.get("ticketingDates").setValue([a,s])})}}return t.\u0275fac=function(e){return new(e||t)(dt.Qb(s.f),dt.Qb(pt))},t.\u0275cmp=dt.Kb({type:t,selectors:[["app-fl-billing-check-sale-search"]],inputs:{paymentPeriodList:"paymentPeriodList",controlBranchList:"controlBranchList",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:44,vars:21,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-2","flex-shrink1"],[1,"d-inline-flex","flex-shrink-0"],[1,"form-label"],["formGroupName","weekInfo",1,"form-group","flex-fill"],["formControlName","year",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","month",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","week","dataKey","detailCode","displayKey","detailCodeNameEn",1,"d-inline-flex","flex-fill",3,"options"],["formArrayName","ticketingDates",1,"calendar-set","flex-fill"],[1,"input","calendar","d-inline-flex","flex-fill"],[3,"for"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","formControlName"],["ticketingFromDate",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","min","formControlName"],["ticketingToDate",""],[1,"col-1"],["formControlName","normalYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","ticketNo",1,"d-inline-flex","flex-fill"],["formControlName","excludeVoidYn","label","Exclude VOID Tickets","binary","true"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(t,e){if(1&t&&(dt.Wb(0,"form",0),dt.fc("ngSubmit",(function(){return e.onSubmit()})),dt.Wb(1,"div",1),dt.Wb(2,"div",2),dt.Wb(3,"div",3),dt.Wb(4,"div",4),dt.Wb(5,"span",5),dt.Pc(6,"Billing Period"),dt.Vb(),dt.Vb(),dt.Wb(7,"div",6),dt.Rb(8,"app-selectbox",7),dt.Rb(9,"app-selectbox",8),dt.Rb(10,"app-selectbox",9),dt.Vb(),dt.Vb(),dt.Wb(11,"div",3),dt.Wb(12,"div",4),dt.Wb(13,"span",5),dt.Pc(14,"Billing Period Date"),dt.Vb(),dt.Vb(),dt.Wb(15,"div",10),dt.Wb(16,"div",11),dt.Rb(17,"mat-datepicker-toggle",12),dt.Rb(18,"input",13),dt.Rb(19,"mat-datepicker",null,14),dt.Vb(),dt.Wb(21,"span",15),dt.Pc(22,"~"),dt.Vb(),dt.Wb(23,"div",11),dt.Rb(24,"mat-datepicker-toggle",12),dt.Rb(25,"input",16),dt.Rb(26,"mat-datepicker",null,17),dt.Vb(),dt.Vb(),dt.Vb(),dt.Vb(),dt.Wb(28,"div",2),dt.Wb(29,"div",18),dt.Wb(30,"span",5),dt.Pc(31,"Normality YN"),dt.Vb(),dt.Rb(32,"app-selectbox",19),dt.Vb(),dt.Wb(33,"div",18),dt.Wb(34,"span",5),dt.Pc(35,"Ticket No."),dt.Vb(),dt.Rb(36,"app-input-text",20),dt.Vb(),dt.Wb(37,"div",18),dt.Rb(38,"app-checkbox",21),dt.Vb(),dt.Vb(),dt.Vb(),dt.Wb(39,"div",22),dt.Wb(40,"button",23),dt.Pc(41,"Search"),dt.Vb(),dt.Wb(42,"button",24),dt.fc("click",(function(){return e.onReset()})),dt.Pc(43,"Reset"),dt.Vb(),dt.Vb(),dt.Vb()),2&t){const t=dt.Ec(20),i=dt.Ec(27);dt.pc("formGroup",e.searchForm)("connectForm",e.searchFormData),dt.Cb(8),dt.pc("options",e.yearOptions),dt.Cb(1),dt.pc("options",e.monthOptions),dt.Cb(1),dt.pc("options",e.paymentPeriodList),dt.Cb(5),dt.Gb("valid-error",e.checkIsInvalidDateRange()),dt.Cb(1),dt.Gb("valid-error",e.checkIsInvalid(dt.tc(19,Dt))),dt.Cb(1),dt.pc("for",t),dt.Cb(1),dt.pc("matDatepicker",t)("formControlName",0),dt.Cb(5),dt.Gb("valid-error",e.checkIsInvalid(dt.tc(20,wt))),dt.Cb(1),dt.pc("for",i),dt.Cb(1),dt.pc("matDatepicker",i)("min",e.minDateRange)("formControlName",1),dt.Cb(7),dt.pc("options",e.normalYnOptions)}},directives:[s.B,s.s,s.k,vt.a,s.l,Ot.a,s.r,s.i,s.e,yt.a,kt.a,s.c,St.a,jt.a,Vt.a],styles:[""],changeDetection:0}),t})(),Pt=(()=>{class t{constructor(){this.changePageSizeEvent=new dt.n,this.excelDownloadEvent=new dt.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onChangePageSize({value:t}){this.changePageSizeEvent.emit(t)}onClickExcel(){this.excelDownloadEvent.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=dt.Kb({type:t,selectors:[["app-fl-billing-check-sale-control"]],inputs:{loading:"loading",currentPage:"currentPage",totalCount:"totalCount",checkedRows:"checkedRows"},outputs:{changePageSizeEvent:"changePageSizeEvent",excelDownloadEvent:"excelDownloadEvent"},decls:7,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm","d-inline-flex","flex-glow-0",3,"click"],[1,"sm","d-inline-flex","flex-glow-0","sm",3,"options","ngModel","useAllOptionYn","onChange"]],template:function(t,e){1&t&&(dt.Wb(0,"div",0),dt.Wb(1,"strong",1),dt.Pc(2),dt.Vb(),dt.Wb(3,"div",2),dt.Wb(4,"button",3),dt.fc("click",(function(){return e.onClickExcel()})),dt.Pc(5,"Excel"),dt.Vb(),dt.Wb(6,"app-selectbox",4),dt.fc("onChange",(function(t){return e.onChangePageSize(t)})),dt.Vb(),dt.Vb(),dt.Vb()),2&t&&(dt.Cb(2),dt.Qc(e.loading?"":e.totalCount),dt.Cb(4),dt.pc("options",e.pageSizeOptions)("ngModel",e.currentPage)("useAllOptionYn",!1))},directives:[Ot.a,s.r,s.u],styles:[""],changeDetection:0}),t})(),xt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=dt.Kb({type:t,selectors:[["app-fl-billing-check-sale-summary"]],inputs:{summary:"summary"},decls:75,vars:45,consts:[[1,"table","table-bordered","mt30"],["scope","row",1,"th-bg"],["scope","row","rowspan","2",1,"th-bg"],["rowspan","2"]],template:function(t,e){1&t&&(dt.Wb(0,"div",0),dt.Wb(1,"table"),dt.Wb(2,"caption"),dt.Pc(3," \ube4c\ub9c1\uccb4\ud06c(Sale) summary "),dt.Vb(),dt.Wb(4,"colgroup"),dt.Rb(5,"col"),dt.Rb(6,"col"),dt.Vb(),dt.Wb(7,"tbody"),dt.Wb(8,"tr"),dt.Wb(9,"th",1),dt.Pc(10,"BSP"),dt.Vb(),dt.Wb(11,"th",2),dt.Pc(12,"\ucd1d \ud2f0\ucf13"),dt.Vb(),dt.Wb(13,"td",3),dt.Pc(14),dt.ic(15,"number"),dt.Vb(),dt.Wb(16,"th",2),dt.Pc(17,"Cash"),dt.Vb(),dt.Wb(18,"td"),dt.Pc(19),dt.ic(20,"number"),dt.Vb(),dt.Wb(21,"th",2),dt.Pc(22,"Card"),dt.Vb(),dt.Wb(23,"td"),dt.Pc(24),dt.ic(25,"number"),dt.Vb(),dt.Wb(26,"th",2),dt.Pc(27,"Fare"),dt.Vb(),dt.Wb(28,"td"),dt.Pc(29),dt.ic(30,"number"),dt.Vb(),dt.Wb(31,"th",2),dt.Pc(32,"DC"),dt.Vb(),dt.Wb(33,"td"),dt.Pc(34),dt.ic(35,"number"),dt.Vb(),dt.Wb(36,"th",2),dt.Pc(37,"Comm"),dt.Vb(),dt.Wb(38,"td"),dt.Pc(39),dt.ic(40,"number"),dt.Vb(),dt.Wb(41,"th",2),dt.Pc(42,"Tax"),dt.Vb(),dt.Wb(43,"td"),dt.Pc(44),dt.ic(45,"number"),dt.Vb(),dt.Wb(46,"th",2),dt.Pc(47,"Balance"),dt.Vb(),dt.Wb(48,"td"),dt.Pc(49),dt.ic(50,"number"),dt.Vb(),dt.Vb(),dt.Wb(51,"tr"),dt.Wb(52,"th",1),dt.Pc(53,"DSR"),dt.Vb(),dt.Wb(54,"td"),dt.Pc(55),dt.ic(56,"number"),dt.Vb(),dt.Wb(57,"td"),dt.Pc(58),dt.ic(59,"number"),dt.Vb(),dt.Wb(60,"td"),dt.Pc(61),dt.ic(62,"number"),dt.Vb(),dt.Wb(63,"td"),dt.Pc(64),dt.ic(65,"number"),dt.Vb(),dt.Wb(66,"td"),dt.Pc(67),dt.ic(68,"number"),dt.Vb(),dt.Wb(69,"td"),dt.Pc(70),dt.ic(71,"number"),dt.Vb(),dt.Wb(72,"td"),dt.Pc(73),dt.ic(74,"number"),dt.Vb(),dt.Vb(),dt.Vb(),dt.Vb(),dt.Vb()),2&t&&(dt.Cb(14),dt.Qc(dt.jc(15,15,null==e.summary?null:e.summary.sumTicketCount)),dt.Cb(5),dt.Qc(dt.jc(20,17,null==e.summary||null==e.summary.bsp?null:e.summary.bsp.sumCashAmount)),dt.Cb(5),dt.Qc(dt.jc(25,19,null==e.summary||null==e.summary.bsp?null:e.summary.bsp.sumCardAmount)),dt.Cb(5),dt.Qc(dt.jc(30,21,null==e.summary||null==e.summary.bsp?null:e.summary.bsp.sumFareAmount)),dt.Cb(5),dt.Qc(dt.jc(35,23,null==e.summary||null==e.summary.bsp?null:e.summary.bsp.sumDiscountAmount)),dt.Cb(5),dt.Qc(dt.jc(40,25,null==e.summary||null==e.summary.bsp?null:e.summary.bsp.sumAirlineCommAmount)),dt.Cb(5),dt.Qc(dt.jc(45,27,null==e.summary||null==e.summary.bsp?null:e.summary.bsp.sumTaxAmount)),dt.Cb(5),dt.Qc(dt.jc(50,29,null==e.summary||null==e.summary.bsp?null:e.summary.bsp.sumBalanceAmount)),dt.Cb(6),dt.Qc(dt.jc(56,31,null==e.summary||null==e.summary.dsr?null:e.summary.dsr.sumCashAmount)),dt.Cb(3),dt.Qc(dt.jc(59,33,null==e.summary||null==e.summary.dsr?null:e.summary.dsr.sumCardAmount)),dt.Cb(3),dt.Qc(dt.jc(62,35,null==e.summary||null==e.summary.dsr?null:e.summary.dsr.sumFareAmount)),dt.Cb(3),dt.Qc(dt.jc(65,37,null==e.summary||null==e.summary.dsr?null:e.summary.dsr.sumDiscountAmount)),dt.Cb(3),dt.Qc(dt.jc(68,39,null==e.summary||null==e.summary.dsr?null:e.summary.dsr.sumAirlineCommAmount)),dt.Cb(3),dt.Qc(dt.jc(71,41,null==e.summary||null==e.summary.dsr?null:e.summary.dsr.sumTaxAmount)),dt.Cb(3),dt.Qc(dt.jc(74,43,null==e.summary||null==e.summary.dsr?null:e.summary.dsr.sumBalanceAmount)))},pipes:[a.f],encapsulation:2,changeDetection:0}),t})();var Lt=i("UIHd"),It=i("7G9D"),Ft=i("EsKh");let Nt=(()=>{class t{constructor(t,e,i,n){this.store=t,this._dataService=e,this._fileService=i,this.alertService=n,this._$unsubscribe=new k.a,this.paymentPeriodList$=t.pipe(Object(l.u)(J)),this.controlBranchList$=t.pipe(Object(l.u)(Z)),this.mainLoading$=t.pipe(Object(l.u)(tt)),this.searchCondition$=t.pipe(Object(l.u)(et)),this.mainDataList$=t.pipe(Object(l.u)(it)),this.mainSummaryInfo$=t.pipe(Object(l.u)(nt)),this.mainDataTotalCount$=t.pipe(Object(l.u)(at)),this.gridState$=t.pipe(Object(l.u)(st)),this.gridCheckedState$=t.pipe(Object(l.u)(rt)),this.listPageSize$=t.pipe(Object(l.u)(lt)),this.columns=this._dataService.generateGridColumns(),this._initSubscription()}ngAfterContentInit(){this._requestCommonDetailCodes()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete(),this.store.dispatch(n.initThisStateAction()),this.store.dispatch(n.setGridCheckStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}changePageSizeHandler(t){this.store.dispatch(n.changePageSize({pageSize:t}))}clickSearchHandler(t){this.store.dispatch(n.changeSearchConditionAction({condition:t})),this.store.dispatch(n.changePageIndex({pageIndex:0}))}clickResetHandler(){this.store.dispatch(n.changeSearchConditionAction({condition:{}}))}gridStateChangeHandler(t){this.store.dispatch(n.setGridStateAction({gridState:t}))}excelDownloadHandler(){const t=this.searchFormEl.setSearchCondition();t.limits=[0,1e4],this._fileService.fileDownload({url:ut.excelDownload,filename:"\ube4c\ub9c1\uccb4\ud06c(Sale)\ub9ac\uc2a4\ud2b8",type:"excel",params:t,requestMethod:"post"})}_initSubscription(){Object(S.a)([this.searchCondition$,this.gridState$]).pipe(Object(j.a)(1),Object(V.a)(200),Object(D.a)(([t,e])=>!A.isEmpty(t)),Object(w.a)(this._$unsubscribe)).subscribe(([t,{pageInfo:e}])=>{const i=Object.assign({},t,{limits:[e.skip,e.skip+e.take]});this.store.dispatch(n.loadMainListAction({condition:A.omit(i,["weekInfo"])}))})}_setSortOrder(t){return t.filter(t=>!A.isNil(t.dir)).map(t=>({keyName:t.field,sort:t.dir}))}_requestCommonDetailCodes(){this.store.dispatch(n.loadPaymentPeriodListAction({condition:{masterCode:"FL033"}})),this.store.dispatch(n.loadControlBranchListAction({condition:{masterCode:"US008"}}))}}return t.\u0275fac=function(e){return new(e||t)(dt.Qb(l.h),dt.Qb(pt),dt.Qb(It.a),dt.Qb(Ft.a))},t.\u0275cmp=dt.Kb({type:t,selectors:[["app-fl-billing-check-sale"]],viewQuery:function(t,e){var i;1&t&&(dt.Xc(At,!0),dt.Xc(Lt.a,!0)),2&t&&(dt.Dc(i=dt.gc())&&(e.searchFormEl=i.first),dt.Dc(i=dt.gc())&&(e.gridEl=i.first))},decls:15,vars:36,consts:[[3,"paymentPeriodList","controlBranchList","searchCondition","clickSearchEvent","clickResetEvent"],[3,"loading","currentPage","totalCount","excelDownloadEvent","changePageSizeEvent"],[3,"gridLoading","columns","gridState","checkedState","totalCount","checkboxUseYn","sortable","dataList","stateChangeEvent"],["gridBasis",""]],template:function(t,e){1&t&&(dt.Wb(0,"app-fl-billing-check-sale-search",0),dt.fc("clickSearchEvent",(function(t){return e.clickSearchHandler(t)}))("clickResetEvent",(function(){return e.clickResetHandler()})),dt.ic(1,"async"),dt.ic(2,"async"),dt.ic(3,"async"),dt.Vb(),dt.Wb(4,"app-fl-billing-check-sale-control",1),dt.fc("excelDownloadEvent",(function(){return e.excelDownloadHandler()}))("changePageSizeEvent",(function(t){return e.changePageSizeHandler(t)})),dt.ic(5,"async"),dt.ic(6,"async"),dt.ic(7,"async"),dt.Vb(),dt.Wb(8,"app-grid-simple",2,3),dt.fc("stateChangeEvent",(function(t){return e.gridStateChangeHandler(t)})),dt.ic(10,"async"),dt.ic(11,"async"),dt.ic(12,"async"),dt.ic(13,"async"),dt.ic(14,"async"),dt.Vb()),2&t&&(dt.pc("paymentPeriodList",dt.jc(1,14,e.paymentPeriodList$))("controlBranchList",dt.jc(2,16,e.controlBranchList$))("searchCondition",dt.jc(3,18,e.searchCondition$)),dt.Cb(4),dt.pc("loading",dt.jc(5,20,e.mainLoading$))("currentPage",dt.jc(6,22,e.listPageSize$))("totalCount",dt.jc(7,24,e.mainDataTotalCount$)),dt.Cb(4),dt.pc("gridLoading",dt.jc(10,26,e.mainLoading$))("columns",e.columns)("gridState",dt.jc(11,28,e.gridState$))("checkedState",dt.jc(12,30,e.gridCheckedState$))("totalCount",dt.jc(13,32,e.mainDataTotalCount$))("checkboxUseYn",!1)("sortable",!1)("dataList",dt.jc(14,34,e.mainDataList$)))},directives:[At,Pt,Lt.a],pipes:[a.b],encapsulation:2,changeDetection:0}),t})();const Bt=[{path:"",component:Nt,data:{title:"\ube4c\ub9c1\uccb4\ud06c(Sale)"}}];let Rt=(()=>{class t{}return t.\u0275mod=dt.Ob({type:t}),t.\u0275inj=dt.Nb({factory:function(e){return new(e||t)},imports:[[y.f.forChild(Bt)],y.f]}),t})();var Et=i("lJxs"),Wt=i("JIr8"),Mt=i("Xb6A");let Yt=(()=>{class t{constructor(t,e,i,a,s){this._actions$=t,this._apiService=e,this._errorService=i,this.alertService=a,this.store=s,this.loadPaymentPeriodList$=Object(r.c)(()=>this._actions$.pipe(Object(r.d)(n.loadPaymentPeriodListAction),Object(ft.a)(({condition:t})=>this._apiService.getCommonDetailCodeList(t).pipe(Object(Et.a)(t=>n.loadPaymentPeriodListSuccessAction({dataList:t})),Object(Wt.a)(t=>{const e="\uc8fc\uae30 \ub370\uc774\ud130 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",i=[n.loadPaymentPeriodListFailureAction({error:e})];return this._catchErr(t,e,i),[]}))))),this.loadControlBranchList$=Object(r.c)(()=>this._actions$.pipe(Object(r.d)(n.loadControlBranchListAction),Object(ft.a)(({condition:t})=>this._apiService.getCommonDetailCodeList(t).pipe(Object(Et.a)(t=>n.loadControlBranchListSuccessAction({dataList:t})),Object(Wt.a)(t=>{const e="\ubcf8/\uc9c0\uc0ac \uad6c\ubd84 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",i=[n.loadControlBranchListFailureAction({error:e})];return this._catchErr(t,e,i),[]}))))),this.loadMainList$=Object(r.c)(()=>this._actions$.pipe(Object(r.d)(n.loadMainListAction),Object(ft.a)(({condition:t})=>this._apiService.getMainList(t).pipe(Object(Et.a)(t=>n.loadMainListSuccessAction({dataCollection:t})),Object(Wt.a)(t=>{const e="\ube4c\ub9c1 List lookup failed. Please try again in a momentarily.",i=[n.loadMainListFailureAction({error:e})];return this._catchErr(t,e,i),[]})))))}_runPage(t,e){this.alertService.alert({message:t,accept:(null==e?void 0:e.length)>0?()=>{e.forEach(t=>{this.store.dispatch(t)})}:()=>{}})}_catchErr(t,e,i){const n=this._errorService.errorHandler(t,e);A.isNil(n)||(A.isNil(n.accept)&&(n.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(t=>{this.store.dispatch(t)})}:()=>{}),this.alertService.alert(n))}}return t.\u0275fac=function(e){return new(e||t)(dt.bc(r.a),dt.bc(_t),dt.bc(Mt.a),dt.bc(Ft.a),dt.bc(l.h))},t.\u0275prov=dt.Mb({token:t,factory:t.\u0275fac}),t})();const $t=[Nt],Tt=[At,Pt,xt];let zt=(()=>{class t{}return t.\u0275mod=dt.Ob({type:t}),t.\u0275inj=dt.Nb({factory:function(e){return new(e||t)},imports:[[a.c,s.m,s.w,o.m,c.a,u.a,d.a,h.a,b.a,p.a,m.a,g.a,f.a,C.a,_.a,v.a,O.a,Rt,l.j.forFeature("flBillingCheckSale",q),r.b.forFeature([Yt])]]}),t})()}}]);