(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{"2QGa":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var o=i("F97/"),n=i("SeVD"),r=i("pLZG"),a=i("HDdC");function l(e,t,i){return[Object(r.a)(t,i)(new a.a(Object(n.a)(e))),Object(r.a)(Object(o.a)(t,i))(new a.a(Object(n.a)(e)))]}},"7G9D":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var o=i("tk/3"),n=i("IzEk"),r=i("LvDl"),a=i("fXoL"),l=i("tpT/"),c=i("EsKh");let s=(()=>{class e{constructor(e,t){this.api=e,this.alertService=t}imageCheck(e){if(0===e.target.files.length)return!1;const t=e.target.files[0];if(t.size>2e6)return this.alertService.alert("\ud30c\uc77c \uc0ac\uc774\uc988\ub294 2MB\ub97c \ub118\uae38 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"),!1;let i=this.parseFileName(t.name);const o=i.toLowerCase(),n=o.lastIndexOf("."),r=o.substring(n+1);if(n<0)i+=".jpg";else if("jpg"!==r&&"png"!==r&&"jpeg"!==r)return this.alertService.alert("\uc774\ubbf8\uc9c0 \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return t}pdfCheck(e){if(0===e.target.files.length)return!1;const t=e.target.files[0];let i=this.parseFileName(t.name);const o=i.toLowerCase(),n=o.lastIndexOf("."),r=o.substring(n+1);if(n<0)i+=".pdf";else if("pdf"!==r)return this.alertService.alert("PDF \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return t}excelCheck(e){if(0===e.target.files.length)return!1;const t=e.target.files[0];let i=this.parseFileName(t.name);const o=i.toLowerCase(),n=o.lastIndexOf("."),r=o.substring(n+1);if(n<0)i+=".xls";else if("xls"!==r&&"xlsx"!==r)return this.alertService.alert("\uc5d1\uc140 \ud30c\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574 \uc8fc\uc138\uc694."),!1;return t}imageUpload(e,t){const i=new FormData;for(const n in t)if(t.hasOwnProperty(n))try{i.set(n,t[n])}catch(o){i.append(n,t[n])}return this.api.post(e,i)}fileUpload(e,t){const i=new FormData;for(const n in t)if(t.hasOwnProperty(n))try{i.set(n,t[n])}catch(o){i.append(n,t[n])}return this.api.put(e,i)}fileDelete(e,t){const i=Object.assign({},this.api.defaultParams,{condition:t});return this.api.delete(e,i)}fileDownload(e){let t,i;switch(e.params||(e=Object.assign(e,{params:""})),e.type||(e.type="excel"),e.type){case"excel":t=".xls",i="application/vnd.ms-excel";break;case"pdf":t=".pdf",i="application/pdf"}const a=o=>{const n=document.createElement("a"),r=new Blob([o],{type:i});n.href=URL.createObjectURL(r),n.download=e.filename+t,n.click()};if("post"===e.requestMethod){const t=r.assign({},this.api.defaultParams,{condition:e.params});return this.api.postBlob(e.url,t).pipe(Object(n.a)(1)).subscribe(e=>{"application/json"===e.type?this.alertService.alert("You must wait a minute before making another request."):a(e)})}return this.api.get(e.url,e.params,{responseType:"blob",headers:new o.e({"Content-Type":"application/json",Accept:"application/json"})}).pipe(Object(n.a)(1)).subscribe(e=>{a(e)})}parseFileName(e){const t=/[\{\}\[\]\/?,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"' ']/gi,i=e;return t.test(i)?i.replace(t,""):i}}return e.\u0275fac=function(t){return new(t||e)(a.bc(l.a),a.bc(c.a))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},KPy5:function(e,t,i){"use strict";i.r(t),i.d(t,"CONTAINERS",(function(){return On})),i.d(t,"COMPONENTS",(function(){return An})),i.d(t,"FlPromotionModule",(function(){return yn}));var o={};i.r(o),i.d(o,"loadMaxDiscountRateAction",(function(){return F})),i.d(o,"loadMaxDiscountRateSuccessAction",(function(){return S})),i.d(o,"loadRangeTypeAction",(function(){return x})),i.d(o,"loadRangeTypeSuccessAction",(function(){return P})),i.d(o,"loadTradeCompAction",(function(){return w})),i.d(o,"loadTradeCompSuccessAction",(function(){return E})),i.d(o,"loadContinentAction",(function(){return R})),i.d(o,"loadContinentSuccessAction",(function(){return T})),i.d(o,"loadDepartureArrivalTypeAction",(function(){return _})),i.d(o,"loadDepartureArrivalTypeSuccessAction",(function(){return N})),i.d(o,"loadPromotionCardAction",(function(){return Y})),i.d(o,"loadPromotionCardSuccessAction",(function(){return I})),i.d(o,"loadFareKindAction",(function(){return $})),i.d(o,"loadFareKindSuccessAction",(function(){return G})),i.d(o,"loadPaxTypeAction",(function(){return U})),i.d(o,"loadPaxTypeSuccessAction",(function(){return M})),i.d(o,"loadRoutingTypeAction",(function(){return B})),i.d(o,"loadRoutingTypeSuccessAction",(function(){return q})),i.d(o,"loadDeviceAction",(function(){return K})),i.d(o,"loadDeviceSuccessAction",(function(){return z})),i.d(o,"loadAirlineAction",(function(){return Q})),i.d(o,"loadAirlineSuccessAction",(function(){return H})),i.d(o,"loadCabinClassAction",(function(){return X})),i.d(o,"loadCabinClassSuccessAction",(function(){return J})),i.d(o,"loadClassCombineTypeAction",(function(){return Z})),i.d(o,"loadClassCombineTypeSuccessAction",(function(){return ee})),i.d(o,"loadAirportGroupAction",(function(){return te})),i.d(o,"loadAirportGroupSuccessAction",(function(){return ie})),i.d(o,"changeListSearchConditionAction",(function(){return oe})),i.d(o,"changeListPageSizeAction",(function(){return ne})),i.d(o,"reloadMainListAction",(function(){return re})),i.d(o,"initMainListAction",(function(){return ae})),i.d(o,"loadMainListAction",(function(){return le})),i.d(o,"loadMainListSuccessAction",(function(){return ce})),i.d(o,"loadMainListFailureAction",(function(){return se})),i.d(o,"addSelectedListItemAction",(function(){return de})),i.d(o,"delSelectedListItemAction",(function(){return pe})),i.d(o,"openDetailPopupAction",(function(){return ue})),i.d(o,"closeDetailPopupAction",(function(){return be})),i.d(o,"openBulkUpdatePopupAction",(function(){return he})),i.d(o,"closeBulkUpdatePopupAction",(function(){return me})),i.d(o,"bulkUpdateAction",(function(){return ge})),i.d(o,"bulkUpdateSuccessAction",(function(){return Ce})),i.d(o,"bulkUpdateFailureAction",(function(){return fe})),i.d(o,"copyAction",(function(){return ke})),i.d(o,"copySuccessAction",(function(){return ve})),i.d(o,"copyFailureAction",(function(){return Oe})),i.d(o,"loadPromotionLogListAction",(function(){return Ae})),i.d(o,"loadPromotionLogListSuccessAction",(function(){return ye})),i.d(o,"loadPromotionLogListFailureAction",(function(){return De})),i.d(o,"openPromotionLogPopupAction",(function(){return Ve})),i.d(o,"closePromotionLogPopupAction",(function(){return je})),i.d(o,"loadPromotionTreeAction",(function(){return Le})),i.d(o,"loadPromotionTreeSuccessAction",(function(){return We})),i.d(o,"loadPromotionTreeFailureAction",(function(){return Fe})),i.d(o,"loadPromotionConditionAction",(function(){return Se})),i.d(o,"loadPromotionConditionSuccessAction",(function(){return xe})),i.d(o,"loadPromotionConditionFailureAction",(function(){return Pe})),i.d(o,"clearPromotionConditionAction",(function(){return we})),i.d(o,"changeSelectedTraderCompCodeAction",(function(){return Ee})),i.d(o,"changeSelectedAirlineCodeAction",(function(){return Re})),i.d(o,"openAirportGroupPopupAction",(function(){return Te})),i.d(o,"closeAirportGroupPopupAction",(function(){return _e})),i.d(o,"upsertAirportGroupAction",(function(){return Ne})),i.d(o,"upsertAirportGroupSuccessAction",(function(){return Ye})),i.d(o,"upsertAirportGroupFailureAction",(function(){return Ie})),i.d(o,"upsertPromotionConditionAction",(function(){return $e})),i.d(o,"upsertPromotionConditionSuccessAction",(function(){return Ge})),i.d(o,"upsertPromotionConditionFailureAction",(function(){return Ue})),i.d(o,"setGridCheckRowidsAction",(function(){return Me})),i.d(o,"setGridStateAction",(function(){return Be})),i.d(o,"setGridCheckedStateAction",(function(){return qe}));var n=i("ofXK"),r=i("3Pt+"),a=i("snw9"),l=i("kt0X"),c=i("WG3B"),s=i("xoAz"),d=i("wPo9"),p=i("7rOj"),u=i("+NQf"),b=i("6LsY"),h=i("l1P7"),m=i("v7zA"),g=i("7UZF"),C=i("hHe4"),f=i("1OXJ"),k=i("5hwk"),v=i("htEk"),O=i("kKjH"),A=i("qXPF"),y=i("vu/V"),D=i("tyNb"),V=i("XNiG"),j=i("zP0r"),L=i("1G5W"),W=i("LvDl");const F=Object(l.o)("[FlPromotion] load max discount rate",Object(l.t)()),S=Object(l.o)("[FlPromotion] load max discount rate success",Object(l.t)()),x=Object(l.o)("[FlPromotion] load range type",Object(l.t)()),P=Object(l.o)("[FlPromotion] load range type success",Object(l.t)()),w=Object(l.o)("[FlPromotion] load trade comp",Object(l.t)()),E=Object(l.o)("[FlPromotion] load trade comp success",Object(l.t)()),R=Object(l.o)("[FlPromotion] load continent",Object(l.t)()),T=Object(l.o)("[FlPromotion] load continent success",Object(l.t)()),_=Object(l.o)("[FlPromotion] load departure arrival type",Object(l.t)()),N=Object(l.o)("[FlPromotion] load departure arrival type success",Object(l.t)()),Y=Object(l.o)("[FlPromotion] load promotion card",Object(l.t)()),I=Object(l.o)("[FlPromotion] load promotion card success",Object(l.t)()),$=Object(l.o)("[FlPromotion] load fare kind",Object(l.t)()),G=Object(l.o)("[FlPromotion] load fare kind success",Object(l.t)()),U=Object(l.o)("[FlPromotion] load pax type",Object(l.t)()),M=Object(l.o)("[FlPromotion] load pax type success",Object(l.t)()),B=Object(l.o)("[FlPromotion] load routing type",Object(l.t)()),q=Object(l.o)("[FlPromotion] load routing type success",Object(l.t)()),K=Object(l.o)("[FlPromotion] load device",Object(l.t)()),z=Object(l.o)("[FlPromotion] load device success",Object(l.t)()),Q=Object(l.o)("[FlPromotion] load airline",Object(l.t)()),H=Object(l.o)("[FlPromotion] load airline success",Object(l.t)()),X=Object(l.o)("[FlPromotion] load cabin class",Object(l.t)()),J=Object(l.o)("[FlPromotion] load cabin class success",Object(l.t)()),Z=Object(l.o)("[FlPromotion] load class combine type",Object(l.t)()),ee=Object(l.o)("[FlPromotion] load class combine type success",Object(l.t)()),te=Object(l.o)("[FlPromotion] load air port group",Object(l.t)()),ie=Object(l.o)("[FlPromotion] load air port group success",Object(l.t)()),oe=Object(l.o)("[FlPromotion] change list search condition",Object(l.t)()),ne=Object(l.o)("[FlPromotion] change list page size",Object(l.t)()),re=Object(l.o)("[FlPromotion] reload main list"),ae=Object(l.o)("[FlPromotion] init main list"),le=Object(l.o)("[FlPromotion] load main list",Object(l.t)()),ce=Object(l.o)("[FlPromotion] load main list success",Object(l.t)()),se=Object(l.o)("[FlPromotion] load main list failure",Object(l.t)()),de=Object(l.o)("[FlPromotion] add selected list item",Object(l.t)()),pe=Object(l.o)("[FlPromotion] del selected list item"),ue=Object(l.o)("[FlPromotion] open detail popup"),be=Object(l.o)("[FlPromotion] close detail popup"),he=Object(l.o)("[FlPromotion] open bulk update popup"),me=Object(l.o)("[FlPromotion] close bulk update popup"),ge=Object(l.o)("[FlPromotion] bulk update",Object(l.t)()),Ce=Object(l.o)("[FlPromotion] bulk update success",Object(l.t)()),fe=Object(l.o)("[FlPromotion] bulk update failure",Object(l.t)()),ke=Object(l.o)("[FlPromotion] copy",Object(l.t)()),ve=Object(l.o)("[FlPromotion] copy success",Object(l.t)()),Oe=Object(l.o)("[FlPromotion] copy failure",Object(l.t)()),Ae=Object(l.o)("[FlPromotion] load promotion log list",Object(l.t)()),ye=Object(l.o)("[FlPromotion] load promotion log list success",Object(l.t)()),De=Object(l.o)("[FlPromotion] load promotion log list failure",Object(l.t)()),Ve=Object(l.o)("[FlPromotion] open promotion log popup"),je=Object(l.o)("[FlPromotion] close promotion log popup"),Le=Object(l.o)("[FlPromotion] load promotion tree",Object(l.t)()),We=Object(l.o)("[FlPromotion] load promotion tree success",Object(l.t)()),Fe=Object(l.o)("[FlPromotion] load promotion tree failure",Object(l.t)()),Se=Object(l.o)("[FlPromotion] load promotion condition",Object(l.t)()),xe=Object(l.o)("[FlPromotion] load promotion condition success",Object(l.t)()),Pe=Object(l.o)("[FlPromotion] load promotion condition failure",Object(l.t)()),we=Object(l.o)("[FlPromotion] clear promotion condition"),Ee=Object(l.o)("[FlPromotion] change selected trader comp code",Object(l.t)()),Re=Object(l.o)("[FlPromotion] change selected airline code",Object(l.t)()),Te=Object(l.o)("[FlPromotion] open airport group popup"),_e=Object(l.o)("[FlPromotion] close airport group popup"),Ne=Object(l.o)("[FlPromotion] upsert airport group",Object(l.t)()),Ye=Object(l.o)("[FlPromotion] upsert airport group success",Object(l.t)()),Ie=Object(l.o)("[FlPromotion] upsert airport group failure",Object(l.t)()),$e=Object(l.o)("[FlPromotion] upsert promotion condition",Object(l.t)()),Ge=Object(l.o)("[FlPromotion] upsert promotion condition success",Object(l.t)()),Ue=Object(l.o)("[FlPromotion] upsert promotion condition failure",Object(l.t)()),Me=Object(l.o)("[FlPromotion] set grid checked rowids",Object(l.t)()),Be=Object(l.o)("[FlPromotion] set grid state",Object(l.t)()),qe=Object(l.o)("[FlPromotion] set grid checked state",Object(l.t)());var Ke=i("EVqC");const ze=Object(Ke.a)({selectId:e=>e.rowid,sortComparer:!1}),Qe=ze.getInitialState({maxDiscountRate:null,rangeTypeList:null,tradeCompList:null,continentList:null,departureArrivalTypeList:null,promotionCardList:null,fareKindList:null,paxTypeList:null,routingTypeList:null,deviceList:null,airlineLit:null,cabinClassCodeList:null,classCombineTypeList:null,airportGroupList:null,discountOrUpsellList:[{value:"D",label:"\ud560\uc778"},{value:"U",label:"\ud560\uc99d"}],rateOrAmountList:[{value:"R",label:"Rate(%)"},{value:"A",label:"Amount"}],loading:null,reloadYn:null,searchCondition:null,pageSize:20,selectedDetailRowInfo:null,isOpenDetailPopup:null,promotionLogList:null,isOpenLogPopup:null,promotionTree:null,selectedPromotionCondition:null,selectedTraderCompCode:null,selectedAirlineCode:null,isOpenAirportGroupPopup:null,isOpenBulkUpdatePopup:null,upsertPromotionConditionYn:null,gridState:{skip:0,sortInfo:[],filter:{logic:"and",filters:[]}},gridCheckedRowids:null,gridCheckedState:null}),He=Object(l.q)(Qe,Object(l.s)(o.loadMaxDiscountRateSuccessAction,(e,{dataResult:t})=>Object.assign(Object.assign({},e),{maxDiscountRate:t})),Object(l.s)(o.loadRangeTypeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{rangeTypeList:t})),Object(l.s)(o.loadTradeCompSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{tradeCompList:t})),Object(l.s)(o.loadContinentSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{continentList:t})),Object(l.s)(o.loadDepartureArrivalTypeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{departureArrivalTypeList:t})),Object(l.s)(o.loadPromotionCardSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{promotionCardList:t})),Object(l.s)(o.loadFareKindSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{fareKindList:t})),Object(l.s)(o.loadPaxTypeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{paxTypeList:t})),Object(l.s)(o.loadRoutingTypeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{routingTypeList:t})),Object(l.s)(o.loadDeviceSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{deviceList:t})),Object(l.s)(o.loadAirlineSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{airlineLit:t})),Object(l.s)(o.loadCabinClassSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{cabinClassCodeList:t})),Object(l.s)(o.loadClassCombineTypeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{classCombineTypeList:t})),Object(l.s)(o.loadAirportGroupSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{airportGroupList:t})),Object(l.s)(o.changeListSearchConditionAction,(e,{searchCondition:t})=>Object.assign(Object.assign({},e),{searchCondition:t})),Object(l.s)(o.changeListPageSizeAction,(e,{pageSize:t})=>Object.assign(Object.assign({},e),{pageSize:t})),Object(l.s)(o.reloadMainListAction,e=>Object.assign(Object.assign({},e),{reloadYn:!e.reloadYn})),Object(l.s)(o.initMainListAction,e=>Object.assign(Object.assign({},e),{loading:null,selectedDetailRowInfo:null,isOpenDetailPopup:null})),Object(l.s)(o.loadMainListAction,e=>Object.assign(Object.assign({},e),{loading:!0})),Object(l.s)(o.loadMainListSuccessAction,(e,{dataList:t})=>ze.setAll(t,Object.assign(Object.assign({},e),{loading:!1,gridCheckedState:null}))),Object(l.s)(o.loadMainListFailureAction,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(l.s)(o.addSelectedListItemAction,(e,{selectedItem:t})=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:t})),Object(l.s)(o.delSelectedListItemAction,e=>Object.assign(Object.assign({},e),{selectedDetailRowInfo:null})),Object(l.s)(o.openBulkUpdatePopupAction,e=>Object.assign(Object.assign({},e),{isOpenBulkUpdatePopup:!0})),Object(l.s)(o.closeBulkUpdatePopupAction,e=>Object.assign(Object.assign({},e),{isOpenBulkUpdatePopup:!1})),Object(l.s)(o.bulkUpdateSuccessAction,(e,{dataList:t})=>ze.upsertMany(t,e)),Object(l.s)(o.copySuccessAction,(e,{dataList:t})=>ze.addMany(t,Object.assign({},e))),Object(l.s)(o.openDetailPopupAction,e=>Object.assign(Object.assign({},e),{isOpenDetailPopup:!0})),Object(l.s)(o.closeDetailPopupAction,e=>Object.assign(Object.assign({},e),{isOpenDetailPopup:!1})),Object(l.s)(o.openPromotionLogPopupAction,e=>Object.assign(Object.assign({},e),{isOpenLogPopup:!0})),Object(l.s)(o.closePromotionLogPopupAction,e=>Object.assign(Object.assign({},e),{isOpenLogPopup:!1})),Object(l.s)(o.loadPromotionLogListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{promotionLogList:t})),Object(l.s)(o.loadPromotionTreeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{promotionTree:t})),Object(l.s)(o.loadPromotionConditionSuccessAction,(e,{dataResult:t})=>Object.assign(Object.assign({},e),{selectedPromotionCondition:t})),Object(l.s)(o.clearPromotionConditionAction,e=>Object.assign(Object.assign({},e),{selectedPromotionCondition:null})),Object(l.s)(o.changeSelectedTraderCompCodeAction,(e,{code:t})=>Object.assign(Object.assign({},e),{selectedTraderCompCode:t})),Object(l.s)(o.changeSelectedAirlineCodeAction,(e,{code:t})=>Object.assign(Object.assign({},e),{selectedAirlineCode:t})),Object(l.s)(o.openAirportGroupPopupAction,e=>Object.assign(Object.assign({},e),{isOpenAirportGroupPopup:!0})),Object(l.s)(o.closeAirportGroupPopupAction,e=>Object.assign(Object.assign({},e),{isOpenAirportGroupPopup:!1})),Object(l.s)(o.upsertPromotionConditionSuccessAction,(e,{dataList:t})=>ze.upsertMany(t,Object.assign(Object.assign({},e),{upsertPromotionConditionYn:!e.upsertPromotionConditionYn}))),Object(l.s)(o.setGridCheckRowidsAction,(e,{rowids:t})=>Object.assign(Object.assign({},e),{gridCheckedRowids:t})),Object(l.s)(o.setGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{gridState:t})),Object(l.s)(o.setGridCheckedStateAction,(e,{gridCheckedState:t})=>Object.assign(Object.assign({},e),{gridCheckedState:t})));function Xe(e,t){return Object(l.m)({flPromotionMaster:He})(e,t)}const Je=Object(l.p)("flPromotion"),Ze=Object(l.r)(Je,e=>e.flPromotionMaster),et=Object(l.r)(Ze,e=>e.maxDiscountRate),tt=Object(l.r)(Ze,e=>e.rangeTypeList),it=Object(l.r)(Ze,e=>e.tradeCompList),ot=Object(l.r)(Ze,e=>e.continentList),nt=Object(l.r)(Ze,e=>e.departureArrivalTypeList),rt=Object(l.r)(Ze,e=>e.promotionCardList),at=Object(l.r)(Ze,e=>e.fareKindList),lt=Object(l.r)(Ze,e=>e.paxTypeList),ct=Object(l.r)(Ze,e=>e.routingTypeList),st=Object(l.r)(Ze,e=>e.deviceList),dt=Object(l.r)(Ze,e=>e.airlineLit),pt=Object(l.r)(Ze,e=>e.cabinClassCodeList),ut=Object(l.r)(Ze,e=>e.classCombineTypeList),bt=Object(l.r)(Ze,e=>e.airportGroupList),ht=Object(l.r)(Ze,e=>e.discountOrUpsellList),mt=Object(l.r)(Ze,e=>e.rateOrAmountList),gt=Object(l.r)(Ze,e=>e.searchCondition),Ct=Object(l.r)(Ze,e=>e.loading),ft=Object(l.r)(Ze,e=>e.reloadYn),kt=Object(l.r)(Ze,e=>e.pageSize),vt=Object(l.r)(Ze,e=>e.selectedDetailRowInfo),Ot=Object(l.r)(Ze,e=>e.isOpenDetailPopup),At=ze.getSelectors(Ze).selectAll,yt=(ze.getSelectors(Ze),Object(l.r)(Ze,e=>e.isOpenBulkUpdatePopup)),Dt=Object(l.r)(Ze,e=>e.promotionLogList),Vt=Object(l.r)(Ze,e=>e.isOpenLogPopup),jt=Object(l.r)(Ze,e=>e.promotionTree),Lt=Object(l.r)(Ze,e=>e.selectedPromotionCondition),Wt=Object(l.r)(Ze,e=>e.selectedTraderCompCode),Ft=Object(l.r)(Ze,e=>e.selectedAirlineCode),St=Object(l.r)(Ze,e=>e.isOpenAirportGroupPopup),xt=Object(l.r)(Ze,e=>e.upsertPromotionConditionYn),Pt=(Object(l.r)(Ze,e=>e.gridCheckedRowids),Object(l.r)(Ze,e=>e.gridState)),wt=Object(l.r)(Ze,e=>e.gridCheckedState);var Et=i("YY+H"),Rt=i("AytR");const{API_URL:Tt}=Rt.a,_t={commonDetailCode:`${Tt}/common/detail-code`,postContinents:`${Tt}/admin/basis/continent`,postCommonComp:`${Tt}/common/comp`,postCardBrand:`${Tt}/admin/flight/promotion/card-brand`,postMainList:`${Tt}/admin/flight/promotion/condition`,postPromotionLog:`${Tt}/admin/flight/promotion/log`,putBulkUpdate:`${Tt}/admin/flight/promotion/bundle-update`,putCopy:`${Tt}/admin/flight/promotion/copy`,excelDownload:`${Tt}/admin/flight/promotion/excel`,postTreeList:`${Tt}/admin/flight/promotion/tree`,postConditionList:`${Tt}/admin/flight/promotion/condition`,postAirportGroupList:`${Tt}/admin/flight/promotion/airport-group`,putAirportGroup:`${Tt}/admin/flight/promotion/airport-group`,putCondition:`${Tt}/admin/flight/promotion/condition`};var Nt=i("fXoL"),Yt=i("itXk"),It=i("LRne"),$t=i("z6cu"),Gt=i("eIep"),Ut=i("tpT/");let Mt=(()=>{class e{constructor(e){this.api=e}getCommonDetailCodeList(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(_t.commonDetailCode,t).pipe(Object(Gt.a)(e=>e.succeedYn?Object(It.a)(e.result.list):Object($t.a)(e||"api response error")))}getCommonComp(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(_t.postCommonComp,t).pipe(Object(Gt.a)(e=>{if(e.succeedYn){const t=[];return Object(It.a)(t.concat(e.result.list.map(e=>({label:e.compName,value:e.compCode}))))}return Object($t.a)(e||"api response error")}))}getContinentList(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(_t.postContinents,t).pipe(Object(Gt.a)(e=>{if(e.succeedYn){const t=[];return Object(It.a)(t.concat(e.result.list.map(e=>({label:e.continentNameLn,value:e.continentCode}))))}return Object($t.a)(e||"api response error")}))}getCarBrandList(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(_t.postCardBrand,t).pipe(Object(Gt.a)(e=>{var t;return e.succeedYn?Object(It.a)((null===(t=e.result)||void 0===t?void 0:t.list)||[]):Object($t.a)(e||"api response error")}))}getMainList(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(_t.postMainList,t).pipe(Object(Gt.a)(e=>e.succeedYn?Object(It.a)(this._addRowid(e.result.list)):Object($t.a)(e||"api response error")))}getPromotionLog(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(_t.postPromotionLog,t).pipe(Object(Gt.a)(e=>{var t,i,o;if(e.succeedYn){const n=(null===(i=null===(t=e.result)||void 0===t?void 0:t.list)||void 0===i?void 0:i.length)>0?null===(o=e.result)||void 0===o?void 0:o.list:[];return Object(It.a)(n)}return Object($t.a)(e||"api response error")}))}bulkUpdatePromotions(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.put(_t.putBulkUpdate,t).pipe(Object(Gt.a)(e=>{if(e.succeedYn){const t=this._converBulkUpdateResult(e.result);return Object(It.a)(t)}return Object($t.a)(e||"api response error")}))}copyPromotions(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.put(_t.putCopy,t).pipe(Object(Gt.a)(e=>e.succeedYn?Object(It.a)(this._convertMainListResult(e.result.list)):Object($t.a)(e||"api response error")))}getTreeList(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(_t.postTreeList,t).pipe(Object(Gt.a)(e=>{var t,i,o,n;if(e.succeedYn){const r=(null===(i=null===(t=e.result)||void 0===t?void 0:t.list)||void 0===i?void 0:i.length)>0?null===(n=null===(o=e.result.list[0])||void 0===o?void 0:o.airlines[0])||void 0===n?void 0:n.continents:[];return Object(It.a)(r)}return Object($t.a)(e||"api response error")}))}getConditionItem(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(_t.postConditionList,t).pipe(Object(Gt.a)(e=>{var t,i;if(e.succeedYn){const o=(null===(i=null===(t=e.result)||void 0===t?void 0:t.list)||void 0===i?void 0:i.length)>0?e.result.list[0]:null;return Object(It.a)(o)}return Object($t.a)(e||"api response error")}))}getAirportGroupList(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.post(_t.postAirportGroupList,t).pipe(Object(Gt.a)(e=>{var t,i;if(e.succeedYn){const o=(null===(i=null===(t=e.result)||void 0===t?void 0:t.list)||void 0===i?void 0:i.length)>0?e.result.list:[],n=["rowid","airportGroupSeq","airportGroupNameEn","airportGroupNameLn"],r=o.map(e=>{const t=e.airports.map(e=>e.airportCode);return Object.assign({},W.pick(e,n),{airportCodes:t.join(",")})});return Object(It.a)(r)}return Object($t.a)(e||"api response error")}))}upsertAirportGroup(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.put(_t.putAirportGroup,t).pipe(Object(Gt.a)(e=>{var t;if(e.succeedYn){const i=["rowid","airportGroupSeq","airportGroupNameEn","airportGroupNameLn"],o=((null===(t=e.result)||void 0===t?void 0:t.airports)||[]).map(e=>(null==e?void 0:e.airportCode)||"").join(","),n=Object.assign({},W.pick(e.result,i),{airportCodes:o});return Object(It.a)(n)}return Object($t.a)(e||"api response error")}))}upsertPromotionCondition(e){const t=W.assign({},this.api.defaultParams,{condition:e});return this.api.put(_t.putCondition,t).pipe(Object(Gt.a)(e=>{var t,i;if(e.succeedYn&&(null===(i=null===(t=e.result)||void 0===t?void 0:t.list)||void 0===i?void 0:i.length)>0){const t=this._addRowid(this._convertMainListResult(e.result.list));return Object(It.a)(t)}return Object($t.a)(e||"api response error")}))}_convertMainListResult(e){const t=Object.keys(this._getDefaultMainListItem());return e.map(e=>W.pick(e,t))}_converBulkUpdateResult(e){var t;if((null===(t=null==e?void 0:e.promotionSeqs)||void 0===t?void 0:t.length)>0){const t=W.omit(e,["promotionSeqs"]),i=this._setDeviceInfo(e);return e.promotionSeqs.map(e=>Object.assign(Object.assign(Object.assign({},t),i),{id:e}))}return[]}_setDeviceInfo(e){const t=[];e.pcDisplayYn&&t.push("PC"),e.mobileAppDisplayYn&&t.push("MA"),e.mobileWebDisplayYn&&t.push("MW");const i=[];e.planPcDisplayYn&&i.push("PC"),e.planMobileAppDisplayYn&&i.push("MA"),e.planMobileWebDisplayYn&&i.push("MW");const o={deviceList:t.length>0?t.join(","):null,planDeviceList:i.length>0?i.join(","):null};return W.omitBy(o,W.isNil)}_getDefaultMainListItem(){return{id:null,rowid:null,promotionSeq:null,cabinClassCode:null,bookingWeekday:null,routingTypeCode:null,childDiscountOrUpsell:null,totalCount:null,adultAddRateOrAmount:null,adultDiscountOrUpsell:null,childAddAppliedValue:null,bookingToDate:null,promotionName:null,airlineNameEn:null,controlRemark:null,airlineCode:null,originAirportCodeList:null,adultAddDiscountOrUpsell:null,childAddDiscountOrUpsell:null,codeShareAppliedYn:null,firstInsertName:null,adultAddAppliedValue:null,promotionCardBrandName:null,childAddRateOrAmount:null,promotionCardCode:null,childAppliedValue:null,airlineNameLn:null,lastUpdateUno:null,salesCountryCode:null,promotionAppliedYn:null,departureFromDate:null,firstInsertUno:null,departureToDate:null,bookingFromDate:null,promotionCardBrandCode:null,adultRateOrAmount:null,promotionCardName:null,lastUpdateDatetime:null,destinationAirportCodeList:null,transitAppliedYn:null,adultAppliedValue:null,firstInsertDatetime:null,lastUpdateName:null,departureWeekday:null,childRateOrAmount:null}}_addRowid(e){return W.isNil(e)?[]:e.map((e,t)=>Object.assign(Object.assign({},e),{rowid:String(t)}))}}return e.\u0275fac=function(t){return new(t||e)(Nt.bc(Ut.a))},e.\u0275prov=Nt.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Bt=i("wd/R"),qt=i("6UzV");let Kt=(()=>{class e{constructor(e){this.fb=e,this.generateGridColumns=()=>[{field:"promotionSeq",title:"SEQ",type:"numeric",style:{"text-align":"center"}},{field:"airlineNameLn",title:"Airline",type:"text"},{field:"promotionName",title:"Promotion Name",type:"text"},{field:"adultAppliedValue",title:"ADT Value",template:"adultAppliedValueTpl",style:{"text-align":"right"}},{field:"adultAddAppliedValue",title:"ADT Add. Value",template:"adultAddAppliedValueTpl",style:{"text-align":"right"}},{field:"childAppliedValue",title:"CHD Value",template:"childAppliedValueTpl",style:{"text-align":"right"}},{field:"childAddAppliedValue",title:"CHD Add. Value",template:"childAddAppliedValueTpl",style:{"text-align":"right"}},{field:"promotionAppliedYn",title:"Use YN",boolToYN:!0,style:{"text-align":"center"}},{field:"originAirportCodeList",title:"Origin  Airport",type:"text",style:{"text-align":"center"}},{field:"destinationAirportCodeList",title:"Destination  Airport",type:"text"},{field:"bookingFromDate",title:"BKG Date From",type:"text",style:{"text-align":"center"}},{field:"bookingToDate",title:"BKG Date To",type:"text",style:{"text-align":"center"}},{field:"departureFromDate",title:"Dep Date From",type:"text",style:{"text-align":"center"}},{field:"departureToDate",title:"Dep Date To",type:"text",style:{"text-align":"center"}},{field:"promotionCardName",title:"Card Master",type:"text"},{field:"promotionCardBrandName",title:"Card Brand",type:"text"},{field:"cabinClassCode",title:"C.CLS",type:"text",style:{"text-align":"center"}},{field:"routingTypeCode",title:"Routing Type",type:"text",style:{"text-align":"center"}},{field:"lastUpdateDatetime",title:"Last Update Time",type:"text",style:{"text-align":"center"}}],this.generateListSearchForm=()=>this.fb.group({rowid:[null],promotionSeq:[null],dateRange:this.fb.group({rangeType:[null],dates:this.fb.array([new r.g(null),new r.g(null)])}),originAirportCode:[null],destinationAirportCode:[null],tradeCompCodes:[null],airlineCodes:[null,[qt.a.airlineCodesStringValidator]],promotionCode:[null],originContinentCodes:[null],destinationContinentCodes:[null],departureArrivalTypeCode:[null],folderName:[null],promotionCards:[null],fareKinds:[null],paxTypeCodes:[null],cabinClassCodes:[null],bookingClassList:[null,[qt.a.classCodesStringValidator]],excludeBookingClassList:[null,qt.a.classCodesStringValidator],routingTypeCode:[null],promotionName:[null],promotionAppliedYn:[null],planPromotionYn:[null],adultDiscountOrUpsell:[null],adultRateOrAmount:[null],adultFromValue:[null],adultToValue:[null],deviceTypeCodes:[null]}),this.initListSearchForm=()=>({rowid:null,promotionSeq:null,dateRange:{rangeType:"FPD01",dates:[Bt().format("YYYY-MM-DD"),Bt().format("YYYY-MM-DD")]},originAirportCode:null,destinationAirportCode:null,tradeCompCodes:null,airlineCodes:null,originContinentCodes:null,destinationContinentCodes:null,departureArrivalTypeCode:null,folderName:null,promotionCards:null,fareKinds:null,paxTypeCodes:null,cabinClassCodes:null,bookingClassList:null,excludeBookingClassList:null,routingTypeCode:null,promotionAppliedYn:null,planPromotionYn:null,adultDiscountOrUpsell:null,adultRateOrAmount:null,adultFromValue:null,adultToValue:null,deviceTypeCodes:null}),this.generatePutForm=()=>this.fb.group({rowid:[null],salesCountryCode:[null],promotionSeq:[{value:null,disabled:!0}],airlineCode:[null,[r.z.required,qt.a.airlineCodeValidator]],promotionName:[null,[r.z.required]],routingTypeCode:[null,[r.z.required]],cabinClassCode:[null,[r.z.required]],codeShareAppliedYn:[null],transitAppliedYn:[null],originAirportCodeList:[null,[qt.a.airportCodesStringValidator]],destinationAirportCodeList:[null,[qt.a.airportCodesStringValidator]],bookingFromDate:[null,[r.z.required]],bookingToDate:[null,[r.z.required]],bookingWeekday:this.fb.array([new r.g(!0),new r.g(!0),new r.g(!0),new r.g(!0),new r.g(!0),new r.g(!0),new r.g(!0)],{validators:this.weekdayValidators()}),departureFromDate:[null,[r.z.required]],departureToDate:[null,[r.z.required]],departureWeekday:this.fb.array([new r.g(!0),new r.g(!0),new r.g(!0),new r.g(!0),new r.g(!0),new r.g(!0),new r.g(!0)],{validators:this.weekdayValidators()}),details:this.fb.array([])}),this.generateExcludeDate=()=>this.fb.group({FromDate:[null],ToDate:[null]}),this.generatePutFormDetail=()=>this.fb.group({cardBrandCode:[null,[r.z.required]],adultDiscountOrUpsell:[null,[r.z.required]],adultRateOrAmount:[null,[r.z.required]],adultAppliedValue:[null,[r.z.required]],adultAddDiscountOrUpsell:[null],adultAddRateOrAmount:[null],adultAddAppliedValue:[null],childDiscountOrUpsell:[null],childRateOrAmount:[null],childAppliedValue:[null],childAddDiscountOrUpsell:[null],childAddRateOrAmount:[null],childAddAppliedValue:[null],promotionAppliedYn:[null,[r.z.required]]}),this.initiDefaultWeekday=()=>[!0,!0,!0,!0,!0,!0,!0],this.initiFalseWeekday=()=>[!1,!1,!1,!1,!1,!1,!1],this.initPutFormData=()=>({rowid:null,salesCountryCode:"KR-110000",airlineCode:null,promotionName:"",continentCode:null,promotionSeq:null,routingTypeCode:"OW",cabinClassCode:"Y",codeShareAppliedYn:!1,transitAppliedYn:!1,originAirportCodeList:null,destinationAirportCodeList:null,bookingFromDate:Bt().format("YYYY-MM-DD"),bookingToDate:Bt().format("YYYY-MM-DD"),bookingWeekday:this.initiDefaultWeekday(),departureFromDate:Bt().format("YYYY-MM-DD"),departureToDate:Bt().format("YYYY-MM-DD"),departureWeekday:this.initiDefaultWeekday(),promotionCardCode:null,promotionCardBrandCode:null,adultDiscountOrUpsell:"D",adultRateOrAmount:"R",adultAppliedValue:null,adultAddDiscountOrUpsell:"D",adultAddRateOrAmount:"R",adultAddAppliedValue:null,childDiscountOrUpsell:"D",childRateOrAmount:"R",childAppliedValue:null,childAddDiscountOrUpsell:"D",childAddRateOrAmount:"R",childAddAppliedValue:null,promotionAppliedYn:null}),this.initPutConditionData=()=>({rowid:null,salesCountryCode:null,stationTypeCode:"STN03",airlineCode:null,promotionName:null,continentCode:null,departureArrivalTypeCode:null,folderSeq:null,folderNameEn:null,folderNameLn:null,promotionSeq:null,fareKindList:null,routingTypeCode:"OW",cabinClassCode:"Y",bookingClassList:null,excludeBookingClassList:null,classCombineTypeCode:"CCT01",codeShareAppliedYn:!1,appliedFlightNumberList:null,excludeFlightNumberList:null,transitAppliedYn:!1,transitAirportCodeList:null,originContinentCode:null,originCountryCodeList:null,originAirportCodeList:null,originAirportGroupSeq:null,originExContinentCode:null,originExCountryCodeList:null,originExAirportCodeList:null,originExAirportGroupSeq:null,destinationContinentCode:null,destinationCountryCodeList:null,destinationAirportCodeList:null,destinationAirportGroupSeq:null,destinationExContinentCode:null,destinationExCountryCodeList:null,destinationExAirportCodeList:null,destinationExAirportGroupSeq:null,bookingFromDate:null,bookingToDate:null,bookingWeekday:null,departureFromDate:null,departureToDate:null,departureWeekday:null,returnFromDate:null,returnToDate:null,returnWeekday:null,promotionCardCode:null,promotionCardBrandCode:null,adultDiscountOrUpsell:null,adultRateOrAmount:null,adultAppliedValue:null,adultAddDiscountOrUpsell:null,adultAddRateOrAmount:null,adultAddAppliedValue:null,childDiscountOrUpsell:null,childRateOrAmount:null,childAppliedValue:null,childAddDiscountOrUpsell:null,childAddRateOrAmount:null,childAddAppliedValue:null,promotionAppliedYn:null}),this.initExcludeDateForm=()=>({FromDate:null,ToDate:null}),this.initPutFormDetailFormData=()=>({cardBrandCode:null,adultDiscountOrUpsell:"D",adultRateOrAmount:"R",adultAppliedValue:null,adultAddDiscountOrUpsell:"D",adultAddRateOrAmount:"R",adultAddAppliedValue:null,childDiscountOrUpsell:"D",childRateOrAmount:"R",childAppliedValue:null,childAddDiscountOrUpsell:"D",childAddRateOrAmount:"R",childAddAppliedValue:null,promotionAppliedYn:!1}),this.generateAirportGroupForm=()=>this.fb.group({rowid:[null],airportGroupSeq:[null],airportGroupNameEn:[null],airportGroupNameLn:[null,[r.z.required]],airportCodes:[null,[r.z.required]]}),this.generateBulkDevicePutForm=()=>this.fb.group({pcDisplayYn:[null],mobileAppDisplayYn:[null],mobileWebDisplayYn:[null]},{validators:[this.deviceRequiredValidator]}),this.initBulkDevicePutFormData=()=>({pcDisplayYn:!1,mobileAppDisplayYn:!1,mobileWebDisplayYn:!1}),this.generateBulkPricePutForm=()=>this.fb.group({adultDiscountOrUpsell:["D",[r.z.required]],adultRateOrAmount:[null,[r.z.required]],adultAppliedValue:[null,[r.z.required]],adultAddDiscountOrUpsell:["D"],adultAddRateOrAmount:[null],adultAddAppliedValue:[null],childDiscountOrUpsell:["D"],childRateOrAmount:[null],childAppliedValue:[null],childAddDiscountOrUpsell:["D"],childAddRateOrAmount:[null],childAddAppliedValue:[null],promotionAppliedYn:[null,[r.z.required]]}),this.initBulkPricePutFormData=()=>({adultDiscountOrUpsell:"D",adultRateOrAmount:"R",adultAppliedValue:null,adultAddDiscountOrUpsell:"D",adultAddRateOrAmount:"R",adultAddAppliedValue:null,childDiscountOrUpsell:"D",childRateOrAmount:"R",childAppliedValue:null,childAddDiscountOrUpsell:"D",childAddRateOrAmount:"R",childAddAppliedValue:null,promotionAppliedYn:null}),this.generateBulkBookingForm=()=>this.fb.group({bookingFromDate:[null,[r.z.required]],bookingToDate:[null,[r.z.required]],bookingWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators()}),bookingExcludeDates:this.fb.array([this.generateExcludeDate()]),bookingExcludeWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators([["bookingExcludeDates",0,"FromDate"],["bookingExcludeDates",0,"ToDate"]])})}),this.initBulkBookingFormData=()=>({bookingFromDate:null,bookingToDate:null,bookingWeekday:this.initiDefaultWeekday(),bookingExcludeDates:[{FromDate:null,ToDate:null}],bookingExcludeWeekday:this.initiFalseWeekday()}),this.generateBulkDepartureForm=()=>this.fb.group({departureFromDate:[null,[r.z.required]],departureToDate:[null,[r.z.required]],departureWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators()}),departureExcludeDates:this.fb.array([this.generateExcludeDate()]),departureExcludeWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators([["departureExcludeDates",0,"FromDate"],["departureExcludeDates",0,"ToDate"]])})}),this.initBulkDepartureFormData=()=>({departureFromDate:null,departureToDate:null,departureWeekday:this.initiDefaultWeekday(),departureExcludeDates:[{FromDate:null,ToDate:null}],departureExcludeWeekday:this.initiFalseWeekday()}),this.generateBulkReturnForm=()=>this.fb.group({returnFromDate:[null],returnToDate:[null],returnWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators(["returnFromDate","returnToDate"])}),returnExcludeDates:this.fb.array([this.generateExcludeDate()]),returnExcludeWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators([["returnExcludeDates",0,"FromDate"],["returnExcludeDates",0,"ToDate"]])})}),this.initBulkReturnFormData=()=>({bookingFromDate:null,bookingToDate:null,bookingWeekday:this.initiDefaultWeekday(),departureFromDate:null,departureToDate:null,departureWeekday:this.initiDefaultWeekday(),returnFromDate:null,returnToDate:null,returnWeekday:this.initiDefaultWeekday(),bookingExcludeDates:[{FromDate:null,ToDate:null}],bookingExcludeWeekday:this.initiDefaultWeekday(),departureExcludeDates:[{FromDate:null,ToDate:null}],departureExcludeWeekday:this.initiDefaultWeekday(),returnExcludeDates:[{FromDate:null,ToDate:null}],returnExcludeWeekday:this.initiFalseWeekday()}),this.generateBulkDateForm=()=>this.fb.group({bookingFromDate:[null,[r.z.required]],bookingToDate:[null,[r.z.required]],bookingWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators()}),departureFromDate:[null,[r.z.required]],departureToDate:[null,[r.z.required]],departureWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators()}),returnFromDate:[null],returnToDate:[null],returnWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators(["returnFromDate","returnToDate"])}),bookingExcludeDates:this.fb.array([this.generateExcludeDate()]),bookingExcludeWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators([["bookingExcludeDates",0,"FromDate"],["bookingExcludeDates",0,"ToDate"]])}),departureExcludeDates:this.fb.array([this.generateExcludeDate()]),departureExcludeWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators([["departureExcludeDates",0,"FromDate"],["departureExcludeDates",0,"ToDate"]])}),returnExcludeDates:this.fb.array([this.generateExcludeDate()]),returnExcludeWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators([["returnExcludeDates",0,"FromDate"],["returnExcludeDates",0,"ToDate"]])})}),this.initBulkDateFormData=()=>({bookingFromDate:null,bookingToDate:null,bookingWeekday:this.initiDefaultWeekday(),departureFromDate:null,departureToDate:null,departureWeekday:this.initiDefaultWeekday(),returnFromDate:null,returnToDate:null,returnWeekday:this.initiDefaultWeekday(),bookingExcludeDates:[{FromDate:null,ToDate:null}],bookingExcludeWeekday:this.initiDefaultWeekday(),departureExcludeDates:[{FromDate:null,ToDate:null}],departureExcludeWeekday:this.initiDefaultWeekday(),returnExcludeDates:[{FromDate:null,ToDate:null}],returnExcludeWeekday:this.initiDefaultWeekday()}),this.generateBulkTicketingForm=()=>this.fb.group({ticketingFromDate:[null,[r.z.required]],ticketingToDate:[null,[r.z.required]],ticketingWeekday:this.fb.array([new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1),new r.g(!1)],{validators:this.weekdayValidators()})}),this.initBulkTicketingFormData=()=>({ticketingFromDate:null,ticketingToDate:null,ticketingWeekday:this.initiDefaultWeekday()})}deviceRequiredValidator(e){return e&&!1===e.get("pcDisplayYn").value&&!1===e.get("mobileAppDisplayYn").value&&!1===e.get("mobileWebDisplayYn").value?{shouldNotAllFalse:!0}:null}planDeviceRequiredValidator(e){return e&&!1===e.get("planPcDisplayYn").value&&!1===e.get("planMobileAppDisplayYn").value&&!1===e.get("planMobileWebDisplayYn").value?{shouldNotAllPlanFalse:!0}:null}priceOverValidators(e,t){return i=>{if(!i)return null;const o=i.parent;return o&&"R"===o.get(t).value&&i.value>e?{priceOvered:!0}:null}}weekdayValidators(e){return t=>{var i,o;if(!t)return null;const n=t.parent;if(!n)return null;const r=t.value.every(e=>!1===e);return e&&(W.isNil(null===(i=n.get(e[0]))||void 0===i?void 0:i.value)||W.isNil(null===(o=n.get(e[1]))||void 0===o?void 0:o.value))?null:r?{shouldNotAllWeekdayFalse:!0}:null}}}return e.\u0275fac=function(t){return new(t||e)(Nt.bc(r.f))},e.\u0275prov=Nt.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var zt=i("+Sob"),Qt=i("U6NN"),Ht=i("rbKv"),Xt=i("kd+X"),Jt=i("LVFn"),Zt=i("gbCm");const ei=function(){return["dateRange","rangeType"]},ti=function(){return["dateRange","dates",0]},ii=function(){return["dateRange","dates",1]},oi=function(){return[0]};let ni=(()=>{class e{constructor(e){this._dataService=e,this.clickSearchEvent=new Nt.n,this.clickResetEvent=new Nt.n,this._$unsubscribe=new V.a,this.useYnOptions=[{value:!0,label:"Y"},{value:!1,label:"N"}],this.searchForm=this._dataService.generateListSearchForm()}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}get activityTypeCodeList(){return this._activityTypeCodeList}set activityTypeCodeList(e){this._activityTypeCodeList=e,e&&e.length>0?this.searchForm.get("activityTypeCodes").enable():this.searchForm.get("activityTypeCodes").disable(),this.searchForm.get("activityTypeCodes").setValue(null)}get dates(){return this.searchForm.get("dateRange").get("dates")}ngOnInit(){this._initThisState(),this._initSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.searchForm.invalid)return;const e=this.setSearchCondition();this.clickSearchEvent.emit(e)}onReset(){this.clickResetEvent.emit()}checkIsInvalid(e){return this.searchForm.get(e)&&this.searchForm.get(e).invalid}setSearchCondition(){var e;const t=(null===(e=this.searchForm.get("dateRange").value)||void 0===e?void 0:e.rangeType)?this.searchForm.get("dateRange").value:null,i=this.searchForm.value.promotionCards,o=this.searchForm.value.airlineCodes&&this.searchForm.value.airlineCodes.split(",");return W.omitBy(Object.assign({},this.searchForm.value,{dateRange:t,promotionCards:i,airlineCodes:o,cabinClassCodes:this.searchForm.value.cabinClassCodes}),W.isNil)}_setSearchFormData(e){var t;const i=this._dataService.initListSearchForm();if(!e)return i;let o=null;(null===(t=null==e?void 0:e.promotionCards)||void 0===t?void 0:t.length)>0&&(o=e.promotionCards.map(e=>e.brandCode?e.cardBrandCode+"_"+e.brandCode:e.cardBrandCode));const n=W.isEmpty(null==e?void 0:e.airlineCodes)?null:e.airlineCodes.join(",");return Object.assign({},i,W.pick(e,Object.keys(i)),{promotionCards:o,airlineCodes:n})}_initThisState(){}_initSubscription(){this.searchForm.get("dateRange").get("rangeType").valueChanges.pipe(Object(L.a)(this._$unsubscribe)).subscribe(e=>{W.isNil(e)?(this.dates.get([0]).clearValidators(),this.dates.get([1]).clearValidators(),this.dates.get([0]).disable(),this.dates.get([1]).disable()):(this.dates.get([0]).setValidators([r.z.required]),this.dates.get([1]).setValidators([r.z.required]),this.dates.get([0]).enable(),this.dates.get([1]).enable()),this.dates.get([0]).updateValueAndValidity(),this.dates.get([1]).updateValueAndValidity()}),Object(Yt.a)([this.searchForm.get("adultDiscountOrUpsell").valueChanges,this.searchForm.get("adultRateOrAmount").valueChanges]).pipe(Object(L.a)(this._$unsubscribe)).subscribe(([e,t])=>{W.isNil(e)||W.isNil(t)?(this.searchForm.get("adultFromValue").clearValidators(),this.searchForm.get("adultToValue").clearValidators(),this.searchForm.get("adultFromValue").disable(),this.searchForm.get("adultToValue").disable()):(this.searchForm.get("adultFromValue").setValidators([r.z.required]),this.searchForm.get("adultToValue").setValidators([r.z.required]),this.searchForm.get("adultFromValue").enable(),this.searchForm.get("adultToValue").enable()),this.searchForm.get("adultFromValue").updateValueAndValidity(),this.searchForm.get("adultToValue").updateValueAndValidity()})}}return e.\u0275fac=function(t){return new(t||e)(Nt.Qb(Kt))},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-search"]],inputs:{rangeTypeList:"rangeTypeList",tradeCompList:"tradeCompList",continentList:"continentList",promotionCardList:"promotionCardList",fareKindList:"fareKindList",paxTypeList:"paxTypeList",routingTypeList:"routingTypeList",deviceList:"deviceList",discountOrUpsellList:"discountOrUpsellList",rateOrAmountList:"rateOrAmountList",cabinClassCodeList:"cabinClassCodeList",searchCondition:"searchCondition",activityTypeCodeList:"activityTypeCodeList"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:57,vars:27,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],["formGroupName","dateRange",1,"col-2","flex-shrink-1"],["formControlName","rangeType","dataKey","detailCode","displayKey","detailCodeNameEn",1,"d-inline-flex","flex-shrink-0",3,"options","isInvalid","useAllOptionYn"],["formArrayName","dates",1,"calendar-set","flex-fill"],[1,"input","calendar","d-inline-flex","flex-fill"],[3,"for"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","formControlName"],["fromDate1",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","min","formControlName"],["toDate1",""],[1,"col-1"],[1,"form-label"],["formControlName","airlineCodes","inputFormat","upperCase","placeholder","e.g.KE",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","promotionSeq","valueType","number",1,"d-inline-flex","flex-fill"],["formControlName","promotionAppliedYn","useAllOptionName","All",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","originAirportCode","placeholder","e.g. JFK",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","destinationAirportCode","placeholder","e.g. JFK",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","cabinClassCodes","dataKey","detailCode","displayKey","detailCode","useAllOptionName","All",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","routingTypeCode","dataKey","detailCode","displayKey","detailCodeNameLn","useAllOptionName","All",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","promotionCards","dataKey","cardBrandCode","displayKey","cardBrandName","useAllOptionName","All",1,"d-inline-flex","flex-fill",3,"options"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(e,t){if(1&e&&(Nt.Wb(0,"form",0),Nt.fc("ngSubmit",(function(){return t.onSubmit()})),Nt.Wb(1,"div",1),Nt.Wb(2,"div",2),Nt.Wb(3,"div",3),Nt.Rb(4,"app-selectbox",4),Nt.Wb(5,"div",5),Nt.Wb(6,"div",6),Nt.Rb(7,"mat-datepicker-toggle",7),Nt.Rb(8,"input",8),Nt.Rb(9,"mat-datepicker",null,9),Nt.Vb(),Nt.Wb(11,"span",10),Nt.Pc(12,"~"),Nt.Vb(),Nt.Wb(13,"div",6),Nt.Rb(14,"mat-datepicker-toggle",7),Nt.Rb(15,"input",11),Nt.Rb(16,"mat-datepicker",null,12),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(18,"div",13),Nt.Wb(19,"span",14),Nt.Pc(20,"Airline"),Nt.Vb(),Nt.Rb(21,"app-input-text",15),Nt.Vb(),Nt.Wb(22,"div",13),Nt.Wb(23,"span",14),Nt.Pc(24,"Promotion SEQ"),Nt.Vb(),Nt.Rb(25,"app-input-text",16),Nt.Vb(),Nt.Wb(26,"div",13),Nt.Wb(27,"span",14),Nt.Pc(28,"Use YN"),Nt.Vb(),Nt.Rb(29,"app-selectbox",17),Nt.Vb(),Nt.Vb(),Nt.Wb(30,"div",2),Nt.Wb(31,"div",13),Nt.Wb(32,"span",14),Nt.Pc(33,"Origin Airport"),Nt.Vb(),Nt.Rb(34,"app-input-text",18),Nt.Vb(),Nt.Wb(35,"div",13),Nt.Wb(36,"span",14),Nt.Pc(37,"Destination Airport"),Nt.Vb(),Nt.Rb(38,"app-input-text",19),Nt.Vb(),Nt.Wb(39,"div",13),Nt.Wb(40,"span",14),Nt.Pc(41,"C.CLS"),Nt.Vb(),Nt.Rb(42,"app-selectbox",20),Nt.Vb(),Nt.Wb(43,"div",13),Nt.Wb(44,"span",14),Nt.Pc(45,"Routing Type"),Nt.Vb(),Nt.Rb(46,"app-selectbox",21),Nt.Vb(),Nt.Vb(),Nt.Wb(47,"div",2),Nt.Wb(48,"div",13),Nt.Wb(49,"span",14),Nt.Pc(50,"Promotion Card"),Nt.Vb(),Nt.Rb(51,"app-selectbox",22),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(52,"div",23),Nt.Wb(53,"button",24),Nt.Pc(54,"Search"),Nt.Vb(),Nt.Wb(55,"button",25),Nt.fc("click",(function(){return t.onReset()})),Nt.Pc(56,"Reset"),Nt.Vb(),Nt.Vb(),Nt.Vb()),2&e){const e=Nt.Ec(10),i=Nt.Ec(17);Nt.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),Nt.Cb(4),Nt.pc("options",t.rangeTypeList)("isInvalid",t.checkIsInvalid(Nt.tc(23,ei)))("useAllOptionYn",!1),Nt.Cb(2),Nt.Gb("valid-error",t.checkIsInvalid(Nt.tc(24,ti))),Nt.Cb(1),Nt.pc("for",e),Nt.Cb(1),Nt.pc("matDatepicker",e)("formControlName",0),Nt.Cb(5),Nt.Gb("valid-error",t.checkIsInvalid(Nt.tc(25,ii))),Nt.Cb(1),Nt.pc("for",i),Nt.Cb(1),Nt.pc("matDatepicker",i)("min",t.dates.get(Nt.tc(26,oi)).value)("formControlName",1),Nt.Cb(6),Nt.pc("isInvalid",t.checkIsInvalid("airlineCodes")),Nt.Cb(8),Nt.pc("options",t.useYnOptions),Nt.Cb(5),Nt.pc("isInvalid",t.checkIsInvalid("originAirportCode")),Nt.Cb(4),Nt.pc("isInvalid",t.checkIsInvalid("destinationAirportCode")),Nt.Cb(4),Nt.pc("options",t.cabinClassCodeList),Nt.Cb(4),Nt.pc("options",t.routingTypeList),Nt.Cb(5),Nt.pc("options",t.promotionCardList)}},directives:[r.B,r.s,r.k,zt.a,r.l,Qt.a,r.r,r.i,r.e,Ht.a,Xt.a,r.c,Jt.a,Zt.a],encapsulation:2,changeDetection:0}),e})(),ri=(()=>{class e{constructor(){this.clickAddEvent=new Nt.n,this.clickHistoryEvent=new Nt.n,this.clickBulkUpdateEvent=new Nt.n,this.clickCopyEvent=new Nt.n,this.clickExcelEvent=new Nt.n,this.changePageSizeEvent=new Nt.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100},{label:"500",value:500},{label:"1000",value:999}]}ngOnInit(){}onClickAdd(){this.clickAddEvent.emit()}onClickBulkUpdate(){this.clickBulkUpdateEvent.emit()}onClickHistory(){this.clickHistoryEvent.emit()}onClickCopy(){this.clickCopyEvent.emit()}onClickExcel(){this.clickExcelEvent.emit()}onChangePageSize(e){this.changePageSizeEvent.emit(e.value)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{clickAddEvent:"clickAddEvent",clickHistoryEvent:"clickHistoryEvent",clickBulkUpdateEvent:"clickBulkUpdateEvent",clickCopyEvent:"clickCopyEvent",clickExcelEvent:"clickExcelEvent",changePageSizeEvent:"changePageSizeEvent"},decls:12,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"strong",1),Nt.Pc(2),Nt.Vb(),Nt.Wb(3,"div",2),Nt.Wb(4,"button",3),Nt.fc("click",(function(){return t.onClickAdd()})),Nt.Pc(5,"New"),Nt.Vb(),Nt.Wb(6,"button",3),Nt.fc("click",(function(){return t.onClickCopy()})),Nt.Pc(7,"Copy"),Nt.Vb(),Nt.Wb(8,"button",3),Nt.fc("click",(function(){return t.onClickExcel()})),Nt.Pc(9,"Excel"),Nt.Vb(),Nt.Wb(10,"div",4),Nt.Wb(11,"app-selectbox",5),Nt.fc("onChange",(function(e){return t.onChangePageSize(e)})),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb()),2&e&&(Nt.Cb(2),Nt.Qc(t.loading?"":t.totalCount),Nt.Cb(9),Nt.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[Qt.a,r.r,r.u],encapsulation:2,changeDetection:0}),e})();var ai=i("2QGa"),li=i("Kj3r"),ci=i("yVuV"),si=i("pb6r");function di(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"app-checkbox",66),Nt.fc("onChange",(function(t){return Nt.Fc(e),Nt.hc().onCheckAll(t)})),Nt.Vb()}if(2&e){const e=Nt.hc();Nt.pc("ngModel",e.isAllChecked)}}function pi(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"app-checkbox",67),Nt.fc("ngModelChange",(function(t){return Nt.Fc(e),Nt.hc().checkedRows=t})),Nt.Vb()}if(2&e){const e=t.$implicit,i=Nt.hc();Nt.pc("value",e.promotionSeq)("ngModel",i.checkedRows)}}function ui(e,t){if(1&e&&(Nt.Ub(0),Nt.Pc(1),Nt.Tb()),2&e){const e=Nt.hc().$implicit;Nt.Cb(1),Nt.Tc(" ","D"===e.adultDiscountOrUpsell?"-":"","",e.adultAppliedValue,"","R"===e.adultRateOrAmount?"%":"\uc6d0"," ")}}function bi(e,t){1&e&&Nt.Nc(0,ui,2,3,"ng-container",68),2&e&&Nt.pc("ngIf",t.$implicit.adultAppliedValue)}function hi(e,t){if(1&e&&(Nt.Ub(0),Nt.Pc(1),Nt.Tb()),2&e){const e=Nt.hc().$implicit;Nt.Cb(1),Nt.Tc(" ","D"===e.adultAddDiscountOrUpsell?"-":"","",e.adultAddAppliedValue,"","R"===e.adultAddRateOrAmount?"%":"\uc6d0"," ")}}function mi(e,t){1&e&&Nt.Nc(0,hi,2,3,"ng-container",68),2&e&&Nt.pc("ngIf",t.$implicit.adultAddAppliedValue)}function gi(e,t){if(1&e&&(Nt.Ub(0),Nt.Pc(1),Nt.Tb()),2&e){const e=Nt.hc().$implicit;Nt.Cb(1),Nt.Tc(" ","D"===e.childDiscountOrUpsell?"-":"","",e.childAppliedValue,"","R"===e.childRateOrAmount?"%":"\uc6d0"," ")}}function Ci(e,t){1&e&&Nt.Nc(0,gi,2,3,"ng-container",68),2&e&&Nt.pc("ngIf",t.$implicit.childAppliedValue)}function fi(e,t){if(1&e&&(Nt.Ub(0),Nt.Pc(1),Nt.Tb()),2&e){const e=Nt.hc().$implicit;Nt.Cb(1),Nt.Tc(" ","D"===e.childAddDiscountOrUpsell?"-":"","",e.childAddAppliedValue,"","R"===e.childAddRateOrAmount?"%":"\uc6d0"," ")}}function ki(e,t){1&e&&Nt.Nc(0,fi,2,3,"ng-container",68),2&e&&Nt.pc("ngIf",t.$implicit.childAddAppliedValue)}function vi(e,t){1&e&&Nt.Pc(0),2&e&&Nt.Rc(" ",t.$implicit.promotionAppliedYn?"Y":"N"," ")}function Oi(e,t){if(1&e&&(Nt.Ub(0),Nt.Pc(1),Nt.Tb()),2&e){const e=Nt.hc().$implicit;Nt.Cb(1),Nt.Tc(" ","D"===e.planAdultAddDiscountOrUpsell?"-":"","",e.planAdultAddAppliedValue,"","R"===e.planAdultAddRateOrUpsell?"%":"\uc6d0"," ")}}function Ai(e,t){1&e&&Nt.Nc(0,Oi,2,3,"ng-container",68),2&e&&Nt.pc("ngIf",t.$implicit.planAdultAddAppliedValue)}function yi(e,t){if(1&e&&(Nt.Ub(0),Nt.Pc(1),Nt.Tb()),2&e){const e=Nt.hc().$implicit;Nt.Cb(1),Nt.Tc(" ","D"===e.planChildAddDiscountOrUpsell?"-":"","",e.planChildAddAppliedValue,"","R"===e.planChildAddRateOrUpsell?"%":"\uc6d0"," ")}}function Di(e,t){1&e&&Nt.Nc(0,yi,2,3,"ng-container",68),2&e&&Nt.pc("ngIf",t.$implicit.planChildAddAppliedValue)}function Vi(e,t){1&e&&Nt.Pc(0),2&e&&Nt.Rc(" ",t.$implicit.planUseYn?"Y":"N"," ")}function ji(e,t){1&e&&Nt.Pc(0),2&e&&Nt.Rc(" ",t.$implicit.bookingExcludeExistYn?"Y":"N"," ")}function Li(e,t){1&e&&Nt.Pc(0),2&e&&Nt.Rc(" ",t.$implicit.departureExcludeExistYn?"Y":"N"," ")}function Wi(e,t){1&e&&Nt.Pc(0),2&e&&Nt.Rc(" ",t.$implicit.returnExcludeExistYn?"Y":"N"," ")}const Fi=function(){return{allowUnsort:!0,mode:"multiple"}};let Si=(()=>{class e{constructor(){this.dbClickRowEvent=new Nt.n,this.skip=0,this.clickedRowSubject=new V.a,this._unsubscribe$=new V.a}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=e,this.view=new Array(e).fill({}).map(e=>({})),this._loadCurrentView()}get dataList(){return this._dataList}set dataList(e){this._dataList=e,this._initState(),this._loadCurrentView()}get isAllChecked(){var e;return(null===(e=this.checkedRows)||void 0===e?void 0:e.length)===this.view.length}get checkedDataList(){return this.checkedRows?this.view.filter(e=>this.checkedRows.indexOf(e.promotionSeq)>-1):[]}ngAfterContentInit(){this._initClickSubscription()}ngOnDestroy(){this._unsubscribe$.next(),this._unsubscribe$.complete()}onPageChange(e){this.skip=e.skip,this._loadCurrentView()}onSortChange(e){this.sort=e,this._loadCurrentView()}onFilterChange(e){this.filter=e,this._loadCurrentView()}onCheckAll(e){this.checkedRows=e?this.view.map(e=>e.promotionSeq):null}onCellClick(e){this.isDbClick?this.isDbClick=!1:this.clickedRowItem=e.dataItem}onDblClick(e){this.clickedRowItem&&(this.isDbClick=!0,this.clickedRowSubject.next("double"))}_loadCurrentView(){var e;if(W.isNil(this.dataList)||(null===(e=this.dataList)||void 0===e?void 0:e.length)<1)return this.gridView={data:[],total:0},void(this.gridLoading=!1);const t=Object(ci.c)(Object(ci.a)(this.dataList,this.filter),this.sort).slice(this.skip,this.skip+this.pageSize),i=this.view.length-t.length;i>0&&this.view.splice(t.length-1,i),t.forEach((e,t)=>{this.view[t]||(this.view[t]={}),this.view[t]=Object.assign({},W.pick(this.view[t],Object.keys(e)),e)}),this.gridView={data:this.view,total:this.dataList.length},this.gridLoading=!1}_initClickSubscription(){const e=this.clickedRowSubject.asObservable().pipe(Object(li.a)(300),Object(L.a)(this._unsubscribe$)),[t,i]=Object(ai.a)(e,e=>"single"===e);i.subscribe(()=>{this.dbClickRowEvent.emit(W.cloneDeep(this.clickedRowItem)),this.clickedRowItem=void 0})}_initState(){this.skip=0,this.sort=[{field:"lastUpdateDatetime",dir:"desc"}],this.filter={logic:"and",filters:[]},this.checkedRows=null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-grid"]],viewQuery:function(e,t){var i;1&e&&Nt.Xc(c.l,!0),2&e&&Nt.Dc(i=Nt.gc())&&(t.grid=i.first)},inputs:{gridLoading:"gridLoading",pageSize:"pageSize",dataList:"dataList"},outputs:{dbClickRowEvent:"dbClickRowEvent"},decls:78,vars:74,consts:[[2,"max-height","900px",3,"data","loading","resizable","reorderable","pageable","skip","pageSize","sortable","sort","filterable","filter","pageChange","sortChange","filterChange","cellClick","dblclick"],["title","\uc120\ud0dd","width","53"],["kendoGridHeaderTemplate",""],["kendoGridCellTemplate",""],["field","promotionSeq","title","\ud504\ub85c\ubaa8\uc158ID","filter","numeric",3,"width"],["field","traderCompName","title","\ud310\ub9e4\uc790",3,"width"],["field","airlineNameLn","title","\ud56d\uacf5\uc0ac",3,"width"],["field","continentNameLn","title","\ubaa9\uc801\ub300\ub959",3,"width"],["field","departureArrivalTypeName","title","\ucd9c/\ub3c4\ucc29",3,"width"],["field","folderNameLn","title","\ud3f4\ub354\uba85",3,"width"],["title","\uc0c1\uc2dc \uc131\uc778",3,"locked"],["field","adultAppliedValue","title","\ud504\ub85c\ubaa8\uc158","filter","numeric",3,"width"],["field","adultAddAppliedValue","title","\ucd94\uac00","filter","numeric",3,"width"],["title","\uc0c1\uc2dc \uc544\ub3d9",3,"locked"],["field","childAppliedValue","title","\ud504\ub85c\ubaa8\uc158","filter","numeric",3,"width"],["field","childAddAppliedValue","title","\ucd94\uac00","filter","numeric",3,"width"],["field","promotionAppliedYn","title","\uc801\uc6a9\uc5ec\ubd80","filter","boolean",3,"width"],["field","planAdultAddAppliedValue","title","\uc608\uc57d.P \uc131\uc778\ucd94\uac00","filter","numeric",3,"width"],["field","planChildAddAppliedValue","title","\uc608\uc57d.P \uc544\ub3d9\ucd94\uac00","filter","numeric",3,"width"],["field","planUseYn","title","\uc608\uc57d.P \uc0ac\uc6a9\uc5ec\ubd80","filter","boolean",3,"width"],["title","\ucd9c\ubc1c\uc9c0",3,"locked"],["field","originContinentNameLn","title","\ub300\ub959",3,"width"],["field","originCountryCodeList","title","\uad6d\uac00",3,"width"],["field","originAirportCodeList","title","\uacf5\ud56d\ucf54\ub4dc",3,"width"],["field","originAirportGroupNameLn","title","\uacf5\ud56d\uadf8\ub8f9",3,"width"],["title","\ubaa9\uc801\uc9c0",3,"locked"],["field","destinationContinentNameLn","title","\ub300\ub959",3,"width"],["field","destinationCountryCodeList","title","\uad6d\uac00",3,"width"],["field","destinationAirportCodeList","title","\uacf5\ud56d\ucf54\ub4dc",3,"width"],["field","destinationAirportGroupNameLn","title","\uacf5\ud56d\uadf8\ub8f9",3,"width"],["title","\ucd9c\ubc1c \uc81c\uc678",3,"locked"],["field","originExContinentNameLn","title","\ub300\ub959",3,"width"],["field","originExCountryCodeList","title","\uad6d\uac00",3,"width"],["field","originExAirportCodeList","title","\uacf5\ud56d\ucf54\ub4dc",3,"width"],["field","originExAirportGroupNameLn","title","\uacf5\ud56d\uadf8\ub8f9",3,"width"],["title","\ubaa9\uc801\uc9c0 \uc81c\uc678",3,"locked"],["field","destinationExContinentNameLn","title","\ub300\ub959",3,"width"],["field","destinationExCountryCodeList","title","\uad6d\uac00",3,"width"],["field","destinationExAirportCodeList","title","\uacf5\ud56d\ucf54\ub4dc",3,"width"],["field","destinationExAirportGroupNameLn","title","\uacf5\ud56d\uadf8\ub8f9",3,"width"],["title","\uc608\uc57d\uae30\uac04",3,"locked"],["field","bookingFromDate","title","\uc2dc\uc791\uc77c",3,"width"],["field","bookingToDate","title","\uc885\ub8cc\uc77c",3,"width"],["field","bookingExcludeExistYn","title","\uc81c\uc678\uae30\uac04\uc5ec\ubd80","filter","boolean",3,"width"],["title","\ucd9c\ubc1c\uae30\uac04",3,"locked"],["field","departureFromDate","title","\uc2dc\uc791\uc77c",3,"width"],["field","departureToDate","title","\uc885\ub8cc\uc77c",3,"width"],["field","departureExcludeExistYn","title","\uc81c\uc678\uae30\uac04\uc5ec\ubd80","filter","boolean",3,"width"],["title","\uadc0\uad6d\uae30\uac04",3,"locked"],["field","returnFromDate","title","\uc2dc\uc791\uc77c",3,"width"],["field","returnToDate","title","\uc885\ub8cc\uc77c",3,"width"],["field","returnExcludeExistYn","title","\uc81c\uc678\uae30\uac04\uc5ec\ubd80","filter","boolean",3,"width"],["title","\ubc1c\uad8c\uae30\uac04",3,"locked"],["field","ticketingFromDate","title","\uc2dc\uc791\uc77c",3,"width"],["field","ticketingToDate","title","\uc885\ub8cc\uc77c",3,"width"],["field","promotionCardName","title","\uce74\ub4dc\ub9c8\uc2a4\ud130",3,"width"],["field","promotionCardBrandName","title","\uce74\ub4dc\ube0c\ub79c\ub4dc\uba85",3,"width"],["field","paxTypeCode","title","PTC",3,"width"],["title","CLS",3,"locked"],["field","cabinClassCode","title","C.CLS",3,"width"],["field","bookingClassList","title","B.CLS",3,"width"],["field","excludeBookingClassList","title","\uc81c\uc678 B.CLS",3,"width"],["field","routingTypeCode","title","\uc5ec\uc815\uc885\ub958",3,"width"],["field","deviceList","title","\uc0c1\uc2dc\ub514\ubc14\uc774\uc2a4",3,"width"],["field","planDeviceList","title","\uc608\uc57d\ub514\ubc14\uc774\uc2a4",3,"width"],["field","lastUpdateDatetime","title","\ucd5c\uc885\uc218\uc815\uc2dc\uac01",3,"width"],["styleClass","only","binary","true",3,"ngModel","onChange"],["styleClass","only",3,"value","ngModel","ngModelChange"],[4,"ngIf"]],template:function(e,t){1&e&&(Nt.Wb(0,"kendo-grid",0),Nt.fc("pageChange",(function(e){return t.onPageChange(e)}))("sortChange",(function(e){return t.onSortChange(e)}))("filterChange",(function(e){return t.onFilterChange(e)}))("cellClick",(function(e){return t.onCellClick(e)}))("dblclick",(function(e){return t.onDblClick(e)})),Nt.Ub(1),Nt.Wb(2,"kendo-grid-column",1),Nt.Nc(3,di,1,1,"ng-template",2),Nt.Nc(4,pi,1,2,"ng-template",3),Nt.Vb(),Nt.Tb(),Nt.Rb(5,"kendo-grid-column",4),Nt.Rb(6,"kendo-grid-column",5),Nt.Rb(7,"kendo-grid-column",6),Nt.Rb(8,"kendo-grid-column",7),Nt.Rb(9,"kendo-grid-column",8),Nt.Rb(10,"kendo-grid-column",9),Nt.Wb(11,"kendo-grid-column-group",10),Nt.Wb(12,"kendo-grid-column",11),Nt.Nc(13,bi,1,1,"ng-template",3),Nt.Vb(),Nt.Wb(14,"kendo-grid-column",12),Nt.Nc(15,mi,1,1,"ng-template",3),Nt.Vb(),Nt.Vb(),Nt.Wb(16,"kendo-grid-column-group",13),Nt.Wb(17,"kendo-grid-column",14),Nt.Nc(18,Ci,1,1,"ng-template",3),Nt.Vb(),Nt.Wb(19,"kendo-grid-column",15),Nt.Nc(20,ki,1,1,"ng-template",3),Nt.Vb(),Nt.Vb(),Nt.Wb(21,"kendo-grid-column",16),Nt.Nc(22,vi,1,1,"ng-template",3),Nt.Vb(),Nt.Wb(23,"kendo-grid-column",17),Nt.Nc(24,Ai,1,1,"ng-template",3),Nt.Vb(),Nt.Wb(25,"kendo-grid-column",18),Nt.Nc(26,Di,1,1,"ng-template",3),Nt.Vb(),Nt.Wb(27,"kendo-grid-column",19),Nt.Nc(28,Vi,1,1,"ng-template",3),Nt.Vb(),Nt.Wb(29,"kendo-grid-column-group",20),Nt.Rb(30,"kendo-grid-column",21),Nt.Rb(31,"kendo-grid-column",22),Nt.Rb(32,"kendo-grid-column",23),Nt.Rb(33,"kendo-grid-column",24),Nt.Vb(),Nt.Wb(34,"kendo-grid-column-group",25),Nt.Rb(35,"kendo-grid-column",26),Nt.Rb(36,"kendo-grid-column",27),Nt.Rb(37,"kendo-grid-column",28),Nt.Rb(38,"kendo-grid-column",29),Nt.Vb(),Nt.Wb(39,"kendo-grid-column-group",30),Nt.Rb(40,"kendo-grid-column",31),Nt.Rb(41,"kendo-grid-column",32),Nt.Rb(42,"kendo-grid-column",33),Nt.Rb(43,"kendo-grid-column",34),Nt.Vb(),Nt.Wb(44,"kendo-grid-column-group",35),Nt.Rb(45,"kendo-grid-column",36),Nt.Rb(46,"kendo-grid-column",37),Nt.Rb(47,"kendo-grid-column",38),Nt.Rb(48,"kendo-grid-column",39),Nt.Vb(),Nt.Wb(49,"kendo-grid-column-group",40),Nt.Rb(50,"kendo-grid-column",41),Nt.Rb(51,"kendo-grid-column",42),Nt.Wb(52,"kendo-grid-column",43),Nt.Nc(53,ji,1,1,"ng-template",3),Nt.Vb(),Nt.Vb(),Nt.Wb(54,"kendo-grid-column-group",44),Nt.Rb(55,"kendo-grid-column",45),Nt.Rb(56,"kendo-grid-column",46),Nt.Wb(57,"kendo-grid-column",47),Nt.Nc(58,Li,1,1,"ng-template",3),Nt.Vb(),Nt.Vb(),Nt.Wb(59,"kendo-grid-column-group",48),Nt.Rb(60,"kendo-grid-column",49),Nt.Rb(61,"kendo-grid-column",50),Nt.Wb(62,"kendo-grid-column",51),Nt.Nc(63,Wi,1,1,"ng-template",3),Nt.Vb(),Nt.Vb(),Nt.Wb(64,"kendo-grid-column-group",52),Nt.Rb(65,"kendo-grid-column",53),Nt.Rb(66,"kendo-grid-column",54),Nt.Vb(),Nt.Rb(67,"kendo-grid-column",55),Nt.Rb(68,"kendo-grid-column",56),Nt.Rb(69,"kendo-grid-column",57),Nt.Wb(70,"kendo-grid-column-group",58),Nt.Rb(71,"kendo-grid-column",59),Nt.Rb(72,"kendo-grid-column",60),Nt.Rb(73,"kendo-grid-column",61),Nt.Vb(),Nt.Rb(74,"kendo-grid-column",62),Nt.Rb(75,"kendo-grid-column",63),Nt.Rb(76,"kendo-grid-column",64),Nt.Rb(77,"kendo-grid-column",65),Nt.Vb()),2&e&&(Nt.pc("data",t.gridView)("loading",t.gridLoading)("resizable",!0)("reorderable",!0)("pageable",!0)("skip",t.skip)("pageSize",t.pageSize)("sortable",Nt.tc(73,Fi))("sort",t.sort)("filterable",!0)("filter",t.filter),Nt.Cb(5),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("locked",!1),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(2),Nt.pc("width",100),Nt.Cb(2),Nt.pc("locked",!1),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(2),Nt.pc("width",100),Nt.Cb(2),Nt.pc("width",100),Nt.Cb(2),Nt.pc("width",130),Nt.Cb(2),Nt.pc("width",130),Nt.Cb(2),Nt.pc("width",130),Nt.Cb(2),Nt.pc("locked",!1),Nt.Cb(1),Nt.pc("width",80),Nt.Cb(1),Nt.pc("width",80),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("locked",!1),Nt.Cb(1),Nt.pc("width",80),Nt.Cb(1),Nt.pc("width",80),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("locked",!1),Nt.Cb(1),Nt.pc("width",80),Nt.Cb(1),Nt.pc("width",80),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("locked",!1),Nt.Cb(1),Nt.pc("width",80),Nt.Cb(1),Nt.pc("width",80),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("locked",!1),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",110),Nt.Cb(2),Nt.pc("locked",!1),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",110),Nt.Cb(2),Nt.pc("locked",!1),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",110),Nt.Cb(2),Nt.pc("locked",!1),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",110),Nt.Cb(1),Nt.pc("width",80),Nt.Cb(1),Nt.pc("locked",!1),Nt.Cb(1),Nt.pc("width",90),Nt.Cb(1),Nt.pc("width",90),Nt.Cb(1),Nt.pc("width",110),Nt.Cb(1),Nt.pc("width",100),Nt.Cb(1),Nt.pc("width",110),Nt.Cb(1),Nt.pc("width",110),Nt.Cb(1),Nt.pc("width",160))},directives:[c.l,c.d,c.n,c.c,c.e,si.a,r.r,r.u,n.o],encapsulation:2,changeDetection:0}),e})();function xi(e,t){if(1&e&&Nt.Pc(0),2&e){const e=Nt.hc(2).$implicit;Nt.Rc("-",e.cardBrandName,"")}}function Pi(e,t){if(1&e&&(Nt.Ub(0),Nt.Pc(1),Nt.Nc(2,xi,1,1,"ng-template",6),Nt.Tb()),2&e){const e=Nt.hc().$implicit;Nt.Cb(1),Nt.Rc(" ",e.cardMasterName," "),Nt.Cb(1),Nt.pc("ngIf",e.cardBrandName)}}function wi(e,t){if(1&e&&Nt.Pc(0),2&e){const e=Nt.hc().$implicit;Nt.Qc(e.promotionSeq)}}function Ei(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"li"),Nt.Wb(1,"a",3),Nt.fc("click",(function(){Nt.Fc(e);const i=t.$implicit;return Nt.hc(4).onSelectPromotion(i)})),Nt.Nc(2,Pi,3,2,"ng-container",4),Nt.Nc(3,wi,1,1,"ng-template",null,5,Nt.Oc),Nt.Vb(),Nt.Vb()}if(2&e){const e=t.$implicit,i=Nt.Ec(4),o=Nt.hc(4);Nt.Cb(1),Nt.Gb("active",e.promotionSeq===o.promotionSeq),Nt.Cb(1),Nt.pc("ngIf",e.cardMasterName)("ngIfElse",i)}}const Ri=function(e,t){return{"tree-extend":!0,has:e,active:t}};function Ti(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"li"),Nt.Wb(1,"a",2),Nt.fc("click",(function(){Nt.Fc(e);const i=t.$implicit,o=Nt.hc().$implicit,n=Nt.hc().$implicit;return Nt.hc().onOffFolder(i,n.continentCode,o.departureArrivalTypeCode)})),Nt.Pc(2),Nt.Vb(),Nt.Wb(3,"ul",0),Nt.Nc(4,Ei,5,4,"li",1),Nt.Vb(),Nt.Vb()}if(2&e){const e=t.$implicit,i=Nt.hc().$implicit,o=Nt.hc().$implicit,n=Nt.hc();Nt.Cb(1),Nt.pc("ngClass",Nt.vc(4,Ri,(null==e||null==e.promotions?null:e.promotions.length)>0,n.folderOnOffObj[o.continentCode+"__"+i.departureArrivalTypeCode+"__"+e.folderSeq.toString()])),Nt.Cb(1),Nt.Qc(e.folderNameLn),Nt.Cb(2),Nt.pc("ngForOf",e.promotions)("ngForTrackBy",n.trackByPromotionSeq)}}function _i(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"li"),Nt.Wb(1,"a",2),Nt.fc("click",(function(){Nt.Fc(e);const i=t.$implicit,o=Nt.hc().$implicit;return Nt.hc().onOffDepartureArrival(i,o.continentCode)})),Nt.Pc(2),Nt.Vb(),Nt.Wb(3,"ul",0),Nt.Nc(4,Ti,5,7,"li",1),Nt.Vb(),Nt.Vb()}if(2&e){const e=t.$implicit,i=Nt.hc().$implicit,o=Nt.hc();Nt.Cb(1),Nt.pc("ngClass",Nt.vc(4,Ri,(null==e||null==e.folders?null:e.folders.length)>0,o.departureArrivalOnoffObj[i.continentCode+"__"+e.departureArrivalTypeCode])),Nt.Cb(1),Nt.Qc(e.departureArrivalTypeName),Nt.Cb(2),Nt.pc("ngForOf",e.folders)("ngForTrackBy",o.trackByFolderSeq)}}function Ni(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"li"),Nt.Wb(1,"a",2),Nt.fc("click",(function(){Nt.Fc(e);const i=t.$implicit;return Nt.hc().onOffContinent(i)})),Nt.Pc(2),Nt.Vb(),Nt.Wb(3,"ul",0),Nt.Nc(4,_i,5,7,"li",1),Nt.Vb(),Nt.Vb()}if(2&e){const e=t.$implicit,i=Nt.hc();Nt.Cb(1),Nt.pc("ngClass",Nt.vc(4,Ri,(null==e||null==e.departureArrivals?null:e.departureArrivals.length)>0,i.continentOnOffObj[e.continentCode])),Nt.Cb(1),Nt.Qc(e.continentNameLn),Nt.Cb(2),Nt.pc("ngForOf",e.departureArrivals)("ngForTrackBy",i.trackByDepartureArrivalCode)}}let Yi=(()=>{class e{constructor(){this.onSelectPromotionEvent=new Nt.n}get treeList(){return this._treeList}set treeList(e){this._treeList=e,this._setTreeIndexing(e)}ngOnInit(){this._initState()}onOffContinent(e){var t;(null===(t=null==e?void 0:e.departureArrivals)||void 0===t?void 0:t.length)>0&&(this.continentOnOffObj[e.continentCode]=!this.continentOnOffObj[e.continentCode])}onOffDepartureArrival(e,t){var i;if((null===(i=null==e?void 0:e.folders)||void 0===i?void 0:i.length)>0){const i=t+"__"+e.departureArrivalTypeCode;this.departureArrivalOnoffObj[i]=!this.departureArrivalOnoffObj[i]}}onOffFolder(e,t,i){var o;if((null===(o=null==e?void 0:e.promotions)||void 0===o?void 0:o.length)>0){const o=t+"__"+i+"__"+e.folderSeq.toString();this.folderOnOffObj[o]=!this.folderOnOffObj[o]}}onSelectPromotion(e){this.promotionSeq!==e.promotionSeq&&this.onSelectPromotionEvent.emit(e)}trackByContinentCode(e,t){return t.continentCode}trackByDepartureArrivalCode(e,t){return t.departureArrivalTypeCode}trackByFolderSeq(e,t){return t.folderSeq}trackByPromotionSeq(e,t){return t.promotionSeq}_initState(){}_setTreeIndexing(e){if(this.continentOnOffObj={},this.departureArrivalOnoffObj={},this.folderOnOffObj={},(null==e?void 0:e.length)>0){let t=!1;e.forEach(e=>{e.departureArrivals.forEach(i=>{i.folders.forEach(o=>{const n=e.continentCode+"__"+i.departureArrivalTypeCode+"__"+o.folderSeq.toString();this.folderOnOffObj[n]=t=o.promotions.some(e=>e.promotionSeq===this.promotionSeq),!0===t&&(this.continentOnOffObj[e.continentCode]=!0,this.departureArrivalOnoffObj[e.continentCode+"__"+i.departureArrivalTypeCode]=!0)})})})}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-detail-tree-contents"]],inputs:{promotionSeq:"promotionSeq",treeList:"treeList"},outputs:{onSelectPromotionEvent:"onSelectPromotionEvent"},decls:2,vars:2,consts:[[1,"tree-group"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass","click"],[1,"tree-link",3,"click"],[4,"ngIf","ngIfElse"],["emptyCardMaster",""],[3,"ngIf"]],template:function(e,t){1&e&&(Nt.Wb(0,"ul",0),Nt.Nc(1,Ni,5,7,"li",1),Nt.Vb()),2&e&&(Nt.Cb(1),Nt.pc("ngForOf",t.treeList)("ngForTrackBy",t.trackByContinentCode))},directives:[n.n,n.l,n.o],encapsulation:2,changeDetection:0}),e})();function Ii(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"li"),Nt.Wb(1,"a",7),Nt.fc("click",(function(){Nt.Fc(e);const i=t.$implicit;return Nt.hc().onSelectComp(i)})),Nt.Pc(2),Nt.Vb(),Nt.Vb()}if(2&e){const e=t.$implicit,i=Nt.hc();Nt.Cb(1),Nt.Gb("active",e.value===i.selectedTraderCompCode),Nt.Cb(1),Nt.Qc(e.label)}}function $i(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"li"),Nt.Wb(1,"a",7),Nt.fc("click",(function(){Nt.Fc(e);const i=t.$implicit;return Nt.hc().onSelectAirline(i)})),Nt.Pc(2),Nt.Vb(),Nt.Vb()}if(2&e){const e=t.$implicit,i=Nt.hc();Nt.Cb(1),Nt.Gb("active",e.detailCode===i.selectedAirlineCode),Nt.Cb(1),Nt.Qc(e.detailCode)}}let Gi=(()=>{class e{constructor(){this.changeTradeCompEvent=new Nt.n,this.changeAirlineEvent=new Nt.n,this.selectPromotionEvent=new Nt.n}get airlineList(){return this._airlineList}set airlineList(e){this._airlineList=e,this._filteringAilineList()}get hasTraderCompCodeYn(){return!W.isNil(this.selectedTraderCompCode)}ngOnInit(){this._initState()}onSearchAirline(){this._filteringAilineList()}onSelectComp(e){e.value!==this.selectedTraderCompCode&&this.changeTradeCompEvent.emit(e.value)}onSelectAirline(e){e.detailCode!==this.selectedAirlineCode&&this.changeAirlineEvent.emit(e.detailCode)}onSelectPromotion(e){this.selectPromotionEvent.emit(e)}trackByIndex(e,t){return e}trackByAirlineCode(e,t){return t.detailCode}_initState(){this.searchKeyword=null}_filteringAilineList(){this.filteredAirlineList=W.cloneDeep(this.airlineList),W.isNil(this.searchKeyword)||""===this.searchKeyword||(this.filteredAirlineList=this.airlineList.filter(e=>e.detailCode.indexOf(this.searchKeyword)>-1))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-detail-tree"]],inputs:{promotionSeq:"promotionSeq",treeList:"treeList",tradeCompList:"tradeCompList",selectedTraderCompCode:"selectedTraderCompCode",selectedAirlineCode:"selectedAirlineCode",airlineList:"airlineList"},outputs:{changeTradeCompEvent:"changeTradeCompEvent",changeAirlineEvent:"changeAirlineEvent",selectPromotionEvent:"selectPromotionEvent"},decls:11,vars:7,consts:[[1,"form-group"],["inputFormat","upperCase","placeholder","\ucc44\ub110 \uc120\ud0dd \ud6c4 \ud56d\uacf5\uc0ac 2\ucf54\ub4dc \uac80\uc0c9",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],[1,"vertical-button-group"],[4,"ngFor","ngForOf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"tree-menu",3,"promotionSeq","treeList","onSelectPromotionEvent"],[1,"btn-selection",3,"click"]],template:function(e,t){1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"app-input-text",1),Nt.fc("ngModelChange",(function(e){return t.searchKeyword=e})),Nt.Vb(),Nt.Wb(2,"button",2),Nt.fc("click",(function(){return t.onSearchAirline()})),Nt.Pc(3,"Search"),Nt.Vb(),Nt.Vb(),Nt.Wb(4,"div",3),Nt.Wb(5,"ul"),Nt.Nc(6,Ii,3,3,"li",4),Nt.Vb(),Nt.Vb(),Nt.Wb(7,"div",3),Nt.Wb(8,"ul"),Nt.Nc(9,$i,3,3,"li",5),Nt.Vb(),Nt.Vb(),Nt.Wb(10,"app-fl-promotion-detail-tree-contents",6),Nt.fc("onSelectPromotionEvent",(function(e){return t.onSelectPromotion(e)})),Nt.Vb()),2&e&&(Nt.Cb(1),Nt.pc("ngModel",t.searchKeyword),Nt.Cb(1),Nt.pc("disabled",!t.hasTraderCompCodeYn),Nt.Cb(4),Nt.pc("ngForOf",t.tradeCompList),Nt.Cb(3),Nt.pc("ngForOf",t.filteredAirlineList)("ngForTrackBy",t.trackByAirlineCode),Nt.Cb(1),Nt.pc("promotionSeq",t.promotionSeq)("treeList",t.treeList))},directives:[Zt.a,r.r,r.u,n.n,Yi],encapsulation:2,changeDetection:0}),e})();var Ui=i("EsKh"),Mi=i("Onn4"),Bi=i("U2QM");function qi(e,t){if(1&e&&(Nt.Ub(0),Nt.Rb(1,"app-radio",46),Nt.Tb()),2&e){const e=t.$implicit;Nt.Cb(1),Nt.pc("value",e.detailCode)("label",e.detailCodeNameLn)}}function Ki(e,t){if(1&e&&(Nt.Ub(0),Nt.Rb(1,"app-radio",47),Nt.Tb()),2&e){const e=t.$implicit;Nt.Cb(1),Nt.pc("value",e.detailCode)("label",e.detailCode)}}function zi(e,t){if(1&e&&(Nt.Ub(0,48),Nt.Rb(1,"app-checkbox",49),Nt.Tb()),2&e){const e=t.$implicit,i=t.index,o=Nt.hc();Nt.pc("formGroupName",i),Nt.Cb(1),Nt.pc("binary",!0)("formControl",e)("label",o.weekDayLabelList[i])}}function Qi(e,t){if(1&e&&(Nt.Ub(0,48),Nt.Rb(1,"app-checkbox",49),Nt.Tb()),2&e){const e=t.$implicit,i=t.index,o=Nt.hc();Nt.pc("formGroupName",i),Nt.Cb(1),Nt.pc("binary",!0)("formControl",e)("label",o.weekDayLabelList[i])}}const Hi=function(){return{standalone:!0}};function Xi(e,t){if(1&e){const e=Nt.Xb();Nt.Ub(0),Nt.Wb(1,"div",50),Nt.Wb(2,"app-multi-select",51),Nt.fc("ngModelChange",(function(t){return Nt.Fc(e),Nt.hc().selectedCardList=t})),Nt.Vb(),Nt.Wb(3,"a",52),Nt.fc("click",(function(){return Nt.Fc(e),Nt.hc().onAddPrices()})),Nt.Pc(4,"Add"),Nt.Vb(),Nt.Wb(5,"a",53),Nt.fc("click",(function(){return Nt.Fc(e),Nt.hc().onDelPrices()})),Nt.Pc(6,"Cancel"),Nt.Vb(),Nt.Vb(),Nt.Tb()}if(2&e){const e=Nt.hc();Nt.Cb(2),Nt.pc("options",e.promotionCardList)("ngModel",e.selectedCardList)("ngModelOptions",Nt.tc(3,Hi))}}const Ji=function(e){return["details",e,"adultAppliedValue"]},Zi=function(e){return["details",e,"adultAddAppliedValue"]},eo=function(e){return["details",e,"childDiscountOrUpsell"]},to=function(e){return["details",e,"childAddDiscountOrUpsell"]},io=function(){return["promotionAppliedYn"]};function oo(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"tr",48),Nt.Wb(1,"td"),Nt.Wb(2,"app-checkbox",55),Nt.fc("ngModelChange",(function(t){return Nt.Fc(e),Nt.hc(2).checkedPrices=t})),Nt.Vb(),Nt.Vb(),Nt.Wb(3,"td"),Nt.Rb(4,"app-selectbox",56),Nt.Vb(),Nt.Wb(5,"td"),Nt.Wb(6,"div",9),Nt.Rb(7,"app-selectbox",57),Nt.Rb(8,"app-input-text",58),Nt.Rb(9,"app-selectbox",59),Nt.Vb(),Nt.Vb(),Nt.Wb(10,"td"),Nt.Wb(11,"div",9),Nt.Rb(12,"app-selectbox",60),Nt.Rb(13,"app-input-text",61),Nt.Rb(14,"app-selectbox",62),Nt.Vb(),Nt.Vb(),Nt.Wb(15,"td"),Nt.Wb(16,"div",9),Nt.Rb(17,"app-selectbox",63),Nt.Rb(18,"app-input-text",64),Nt.Rb(19,"app-selectbox",65),Nt.Vb(),Nt.Vb(),Nt.Wb(20,"td"),Nt.Wb(21,"div",9),Nt.Rb(22,"app-selectbox",66),Nt.Rb(23,"app-input-text",67),Nt.Rb(24,"app-selectbox",68),Nt.Vb(),Nt.Vb(),Nt.Wb(25,"td"),Nt.Rb(26,"app-selectbox",69),Nt.Vb(),Nt.Vb()}if(2&e){const e=t.index,i=Nt.hc(2);Nt.pc("formGroupName",e),Nt.Cb(2),Nt.pc("ngModel",i.checkedPrices)("ngModelOptions",Nt.tc(29,Hi))("value",e),Nt.Cb(2),Nt.pc("options",i.promotionCardList)("useAllOptionYn",!1),Nt.Cb(3),Nt.pc("options",i.discountOrUpsellList)("useAllOptionYn",!1),Nt.Cb(1),Nt.pc("isInvalid",i.checkIsInvalid(Nt.uc(30,Ji,e))),Nt.Cb(1),Nt.pc("options",i.rateOrAmountList)("useAllOptionYn",!1),Nt.Cb(3),Nt.pc("options",i.discountOrUpsellList)("useAllOptionYn",!1),Nt.Cb(1),Nt.pc("isInvalid",i.checkIsInvalid(Nt.uc(32,Zi,e))),Nt.Cb(1),Nt.pc("options",i.rateOrAmountList)("useAllOptionYn",!1),Nt.Cb(3),Nt.pc("options",i.discountOrUpsellList)("useAllOptionYn",!1),Nt.Cb(1),Nt.pc("isInvalid",i.checkIsInvalid(Nt.uc(34,eo,e))),Nt.Cb(1),Nt.pc("options",i.rateOrAmountList)("useAllOptionYn",!1),Nt.Cb(3),Nt.pc("options",i.discountOrUpsellList)("useAllOptionYn",!1),Nt.Cb(1),Nt.pc("isInvalid",i.checkIsInvalid(Nt.uc(36,to,e))),Nt.Cb(1),Nt.pc("options",i.rateOrAmountList)("useAllOptionYn",!1),Nt.Cb(2),Nt.pc("options",i.useYnOptionList)("useAllOptionYn",!1)("isInvalid",i.checkIsInvalid(Nt.tc(38,io)))}}function no(e,t){if(1&e&&(Nt.Ub(0,54),Nt.Nc(1,oo,27,39,"tr",21),Nt.Tb()),2&e){const e=Nt.hc();Nt.Cb(1),Nt.pc("ngForOf",e.details.controls)}}function ro(e,t){1&e&&(Nt.Wb(0,"tr"),Nt.Wb(1,"td",70),Nt.Pc(2,"-"),Nt.Vb(),Nt.Vb())}let ao=(()=>{class e{constructor(e,t,i){this._dataService=e,this._cd=t,this.alertService=i,this.openAirportGroupPopup=new Nt.n,this.submitEvent=new Nt.n,this.weekDayLabelList=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],this.discountOrUpsellList=[{value:"D",label:"-"},{value:"U",label:"+"}],this.useYnOptionList=[{value:!0,label:"Y"},{value:!1,label:"N"}],this.isOriginAirportCodeListDisabled=!1,this.isDestinationAirportCodeListDisabled=!1,this._$unsubscribe=new V.a,this.putForm=this._dataService.generatePutForm()}get promotionCondition(){return this._promotionCondition}set promotionCondition(e){this._promotionCondition=e,this._initState(),this._setFormArray(e),this.putFormData=this._setPutFormData(e),this._setIntiFormDisplay(e)}get selectedAirportGroup(){return this._selectedAirportGroup}set selectedAirportGroup(e){this._selectedAirportGroup=e,this._setSelectedAirportGroup(e)}get bookingWeekday(){return this.putForm.get("bookingWeekday")}get departureWeekday(){return this.putForm.get("departureWeekday")}get isAllBookWeekday(){return this.putForm.get("bookingWeekday").value.every(e=>e)}get isAllDepartureWeekday(){return this.departureWeekday.value.every(e=>e)}get details(){return this.putForm.get("details")}get isAllPriceChecked(){var e,t;return(null===(e=this.checkedPrices)||void 0===e?void 0:e.length)>0&&this.details.length===(null===(t=this.checkedPrices)||void 0===t?void 0:t.length)}ngOnInit(){this._initState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSelectFolderSeq(e){if(!e)return;const{folderNameLn:t}=e;this.putForm.get("folderNameLn").setValue(t)}onCheckAllWeekday(e,t){let i;switch(t){case"bookingWeekday":i=this.bookingWeekday;break;case"departureWeekday":i=this.departureWeekday}i.patchValue(e?[!0,!0,!0,!0,!0,!0,!0]:[!1,!1,!1,!1,!1,!1,!1])}onAddPrices(){var e;if((null===(e=this.selectedCardList)||void 0===e?void 0:e.length)>0){this.details.clear();const e=[];this.selectedCardList.forEach(t=>{this.details.push(this._dataService.generatePutFormDetail()),e.push(Object.assign({},this._dataService.initPutFormDetailFormData(),{cardBrandCode:t}))}),this.details.setValue(e),this.checkedPrices=[]}else this.alertService.alert("Please select a credit card.")}onDelPrices(){var e;if((null===(e=this.checkedPrices)||void 0===e?void 0:e.length)>0){const e=Array.from(new Array(this.details.length),(e,t)=>t).filter(e=>-1===this.checkedPrices.indexOf(e)).map(e=>this.details.at(e));this.details.clear(),e.forEach(e=>{this.details.push(e)}),this.checkedPrices=[]}else this.alertService.alert("There are no selected.")}onCheckAllPrices(e){this.checkedPrices=e?this.details.value.map((e,t)=>t):[]}onOpenAirportGroup(e){let t;switch(e){case"origin":t=this.putForm.get("originAirportGroupSeq").value;break;case"originExclude":t=this.putForm.get("originExAirportGroupSeq").value;break;case"destination":t=this.putForm.get("destinationAirportGroupSeq").value;break;case"destinationExclude":t=this.putForm.get("destinationExAirportGroupSeq").value}this.openAirportGroupPopup.emit({groupKind:e,groupSeq:t})}onSubmit(){if(this.putForm.invalid)return this._checkValid=!0,void Object.keys(this.putForm.controls).forEach(e=>{this.putForm.controls[e].invalid&&console.error(e+" is invalid")});if(!this.details||this.details.length<1)return void this.alertService.alert("You need to add charge information.");const e=this._setPutCondition();this.submitEvent.emit(W.omitBy(e,W.isNil)),this._checkValid=!1}checkIsInvalid(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}checkFolderIsInvalid(){var e;return this._checkValid&&!0===(null===(e=this.putForm.errors)||void 0===e?void 0:e.folderInfoRequired)}checkDeviceIsInvalid(e){var t;const i=this.putForm.get(e);return this._checkValid&&!0===(null===(t=i.errors)||void 0===t?void 0:t.shouldNotAllFalse)}checkPlanDeviceIsInvalid(e){var t;const i=this.putForm.get(e);return this._checkValid&&!0===(null===(t=i.errors)||void 0===t?void 0:t.shouldNotAllPlanFalse)}checkOriginInvalid(){var e;return this._checkValid&&this.putForm.get("originAirportCodeList").enabled&&!0===(null===(e=this.putForm.errors)||void 0===e?void 0:e.oneOfOriginRequired)}checkDestinationInvalid(){var e;return this._checkValid&&this.putForm.get("destinationAirportCodeList").enabled&&!0===(null===(e=this.putForm.errors)||void 0===e?void 0:e.oneOfDestinationRequired)}resetPriceArea(){}controlDisableFormControl(e,t){e?(this.putForm.get(t).reset(),this.putForm.get(t).disable(),this.putForm.get(t).clearValidators()):(this.putForm.get(t).reset(),this.putForm.get(t).enable(),this.putForm.get(t).setValidators([r.z.required])),this.putForm.get(t).updateValueAndValidity()}_initState(){this.selectedCardList=null,this.checkedPrices=[],this.originAirportGroupName=null,this.originExcludeAirportGroupName=null,this.destinationAirportGroupName=null,this.destinationExcludeAirportGroupName=null,this.folderNameInputField=null,this.newFolderUseYn=!1,this._checkValid=!1}_setPutFormData(e){var t,i,o;const n=this._dataService.initPutFormData();if(W.isEmpty(e)){const e=(null===(t=this.fareKindList)||void 0===t?void 0:t.length)>0?this.fareKindList.map(e=>e.detailCode):null;return Object.assign(n,{fareKindList:e})}const r=7===(null===(i=e.bookingWeekday)||void 0===i?void 0:i.length)?e.bookingWeekday.split("").map(e=>"1"===e):this._dataService.initiDefaultWeekday(),a=7===(null===(o=e.departureWeekday)||void 0===o?void 0:o.length)?e.departureWeekday.split("").map(e=>"1"===e):this._dataService.initiDefaultWeekday(),l=this._dataService.initPutFormDetailFormData(),c=`${e.promotionCardCode}_${e.promotionCardBrandCode||""}`,s=[Object.assign({},l,W.pick(e,Object.keys(l)),{cardBrandCode:W.trimEnd(c,"_")||null})],d=!W.isNil(e.codeShareAppliedYn)&&e.codeShareAppliedYn,p=!W.isNil(e.transitAppliedYn)&&e.transitAppliedYn;return W.isNil(e.originAirportCodeList)&&(this.controlDisableFormControl(!0,"originAirportCodeList"),this.isOriginAirportCodeListDisabled=!0),W.isNil(e.destinationAirportCodeList)&&(this.controlDisableFormControl(!0,"destinationAirportCodeList"),this.isDestinationAirportCodeListDisabled=!0),Object.assign({},n,W.pick(e,Object.keys(n)),{salesCountryCode:"KR-110000",bookingWeekday:r,departureWeekday:a,details:s,codeShareAppliedYn:d,transitAppliedYn:p})}_setFormArray(e){this.details.clear(),e&&(this.details.push(this._dataService.generatePutFormDetail()),this.putForm.controls.airlineCode.disable())}_setIntiFormDisplay(e){this.originAirportGroupName=(null==e?void 0:e.originAirportGroupNameLn)||null,this.originExcludeAirportGroupName=(null==e?void 0:e.originExAirportGroupNameLn)||null,this.destinationAirportGroupName=(null==e?void 0:e.destinationAirportGroupNameLn)||null,this.destinationExcludeAirportGroupName=(null==e?void 0:e.destinationExAirportGroupNameLn)||null,this.folderNameInputField=(null==e?void 0:e.folderNameLn)||null}_setSelectedAirportGroup(e){if(!((null==e?void 0:e.groupKind)||(null==e?void 0:e.groupSeq)&&(null==e?void 0:e.groupName)))return;const{groupSeq:t,groupName:i}=e;switch(e.groupKind){case"origin":this.putForm.get("originAirportGroupSeq").setValue(t),this.originAirportGroupName=i;break;case"originExclude":this.putForm.get("originExAirportGroupSeq").setValue(t),this.originExcludeAirportGroupName=i;break;case"destination":this.putForm.get("destinationAirportGroupSeq").setValue(t),this.destinationAirportGroupName=i;break;case"destinationExclude":this.putForm.get("destinationExAirportGroupSeq").setValue(t),this.destinationExcludeAirportGroupName=i}}_setPutCondition(){const e=this._dataService.initPutConditionData(),t=this.putForm.getRawValue(),i=t.bookingWeekday.map(e=>e?"1":"0").join(""),o=t.departureWeekday.map(e=>e?"1":"0").join("");return{promotions:this._setPriceCondition().map(n=>{const r=Object.assign({},W.pick(t,Object.keys(e)),{bookingWeekday:i,departureWeekday:o},W.pick(n,Object.keys(e)));return W.omit(W.omitBy(r,W.isNil),this.copyFlag?["rowid","promotionSeq"]:["rowid"])})}}_setPriceCondition(){return this.details.value.map((e,t)=>{const i=e.cardBrandCode.split("_"),o=i[0],n=2===i.length?i[1]:null;let{planFromTime:r,planToTime:a}=e;r=W.isNil(r)?null:1===r.split(":").length?r+":00":r,a=W.isNil(a)?null:1===a.split(":").length?a+":00":a;const l=[],c=[];return e.adultAppliedValue>this.maxDiscountRate&&"R"===e.adultRateOrAmount&&l.push("adultAppliedValue"),e.childAppliedValue>this.maxDiscountRate&&"R"===e.childRateOrAmount&&l.push("childAppliedValue"),e.adultAddAppliedValue>this.maxDiscountRate&&"R"===e.adultAddRateOrAmount&&l.push("adultAddAppliedValue"),e.childAddAppliedValue>this.maxDiscountRate&&"R"===e.childAddRateOrAmount&&l.push("childAddAppliedValue"),e.planAdultAddAppliedValue>this.maxDiscountRate&&"R"===e.planAdultAddRateOrAmount&&c.push("planAdultAddAppliedValue"),e.planChildAddAppliedValue>this.maxDiscountRate&&"R"===e.planChildAddRateOrAmount&&c.push("planChildAddAppliedValue"),W.omit(Object.assign({},e,{promotionCardCode:o,promotionCardBrandCode:n,planFromTime:r,planToTime:a}),["cardBrandCode"])})}}return e.\u0275fac=function(t){return new(t||e)(Nt.Qb(Kt),Nt.Qb(Nt.h),Nt.Qb(Ui.a))},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-detail-form"]],inputs:{promotionSeq:"promotionSeq",maxDiscountRate:"maxDiscountRate",tradeCompList:"tradeCompList",continentList:"continentList",departureArrivalTypeList:"departureArrivalTypeList",promotionCardList:"promotionCardList",fareKindList:"fareKindList",paxTypeList:"paxTypeList",routingTypeList:"routingTypeList",deviceList:"deviceList",airlineList:"airlineList",cabinClassCodeList:"cabinClassCodeList",classCombineTypeList:"classCombineTypeList",rateOrAmountList:"rateOrAmountList",copyFlag:"copyFlag",promotionCondition:"promotionCondition",selectedAirportGroup:"selectedAirportGroup"},outputs:{openAirportGroupPopup:"openAirportGroupPopup",submitEvent:"submitEvent"},decls:169,vars:68,consts:[[3,"formGroup","connectForm"],[1,"page-item"],[1,"table","table-bordered","table-responsive"],["width","130px"],["width","120px"],["scope","row",1,"th-bg"],["colspan","3"],["formControlName","promotionSeq"],["formControlName","airlineCode","inputFormat","upperCase","placeholder","e.g.KE",3,"isInvalid"],[1,"form-group"],[4,"ngFor","ngForOf"],["formControlName","promotionName",3,"isInvalid"],[1,"th-bg"],["formControlName","originAirportCodeList","placeholder","e.g. JFK,LHR,HND","inputFormat","upperCase",3,"isInvalid"],["label","All",1,"ml5",3,"binary","ngModel","ngModelOptions","ngModelChange","onChange"],["formControlName","codeShareAppliedYn","name","codeShareAppliedYn",3,"value","label"],["formControlName","destinationAirportCodeList","placeholder","e.g. JFK,LHR,HND","inputFormat","upperCase",3,"isInvalid"],["formControlName","transitAppliedYn","name","transitAppliedYn",3,"value","label"],["scope","row","rowspan","2",1,"th-bg"],["formArrayName","bookingWeekday",1,"form-group","justify-content-between","mt10"],["label","All",3,"binary","ngModel","ngModelOptions","onChange"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"mt10"],[1,"row"],[1,"form-group","mt5"],[1,"input","calendar",2,"min-width","132px"],[3,"for"],["type","text","placeholder","YYYY-MM-DD","formControlName","bookingFromDate",3,"matDatepicker"],["bookingFromDate",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD","formControlName","bookingToDate",3,"matDatepicker","min"],["bookingToDate",""],["formArrayName","departureWeekday",1,"form-group","justify-content-between","mt10"],["type","text","placeholder","YYYY-MM-DD","formControlName","departureFromDate",3,"matDatepicker"],["departureFromDate",""],["type","text","placeholder","YYYY-MM-DD","formControlName","departureToDate",3,"matDatepicker","min"],["departureToDate",""],[1,"page-item-header"],[4,"ngIf"],["scope","col",1,"align-c"],[3,"binary","ngModel","ngModelOptions","disabled","onChange"],[1,"align-c"],["formArrayName","details",4,"ngIf","ngIfElse"],["emptyPrices",""],[1,"button-area","align-r","mt10"],[1,"btn","btn-secondary","sm",3,"click"],["formControlName","routingTypeCode","name","routingTypeCode",3,"value","label"],["formControlName","cabinClassCode","name","cabinClassCode",3,"value","label"],[3,"formGroupName"],[3,"binary","formControl","label"],[1,"page-item-header","justify-content-start"],["dataKey","cardBrandCode","displayKey","cardBrandName","defaultLabel","Select",2,"min-width","220px",3,"options","ngModel","ngModelOptions","ngModelChange"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"btn","btn-outline-secondary","sm",3,"click"],["formArrayName","details"],[3,"ngModel","ngModelOptions","value","ngModelChange"],["formControlName","cardBrandCode","dataKey","cardBrandCode","displayKey","cardBrandName",2,"min-width","200px",3,"options","useAllOptionYn"],["formControlName","adultDiscountOrUpsell",2,"min-width","60px",3,"options","useAllOptionYn"],["formControlName","adultAppliedValue","valueType","number","inputFormat","number",2,"min-width","80px",3,"isInvalid"],["formControlName","adultRateOrAmount",2,"min-width","60px",3,"options","useAllOptionYn"],["formControlName","adultAddDiscountOrUpsell",2,"min-width","60px",3,"options","useAllOptionYn"],["formControlName","adultAddAppliedValue","valueType","number","inputFormat","number",2,"min-width","80px",3,"isInvalid"],["formControlName","adultAddRateOrAmount",2,"min-width","60px",3,"options","useAllOptionYn"],["formControlName","childDiscountOrUpsell",2,"min-width","60px",3,"options","useAllOptionYn"],["formControlName","childAppliedValue","valueType","number","inputFormat","number",2,"min-width","80px",3,"isInvalid"],["formControlName","childRateOrAmount",2,"min-width","60px",3,"options","useAllOptionYn"],["formControlName","childAddDiscountOrUpsell",2,"min-width","60px",3,"options","useAllOptionYn"],["formControlName","childAddAppliedValue","valueType","number","inputFormat","number",2,"min-width","80px",3,"isInvalid"],["formControlName","childAddRateOrAmount",2,"min-width","60px",3,"options","useAllOptionYn"],["formControlName","promotionAppliedYn",2,"min-width","60px",3,"options","useAllOptionYn","isInvalid"],["colspan","14",1,"align-c"]],template:function(e,t){if(1&e&&(Nt.Wb(0,"form",0),Nt.Wb(1,"div",1),Nt.Wb(2,"div",2),Nt.Wb(3,"table"),Nt.Wb(4,"caption"),Nt.Pc(5," Flight Promotion Detail "),Nt.Vb(),Nt.Wb(6,"colgroup"),Nt.Rb(7,"col",3),Nt.Rb(8,"col"),Nt.Rb(9,"col",4),Nt.Rb(10,"col"),Nt.Vb(),Nt.Wb(11,"tbody"),Nt.Wb(12,"tr"),Nt.Wb(13,"th",5),Nt.Wb(14,"sup"),Nt.Pc(15,"Promotion SEQ"),Nt.Vb(),Nt.Vb(),Nt.Wb(16,"td",6),Nt.Rb(17,"app-input-text",7),Nt.Vb(),Nt.Vb(),Nt.Wb(18,"tr"),Nt.Wb(19,"th",5),Nt.Wb(20,"sup"),Nt.Pc(21,"Airline Code"),Nt.Vb(),Nt.Vb(),Nt.Wb(22,"td"),Nt.Rb(23,"app-input-text",8),Nt.Vb(),Nt.Wb(24,"th",5),Nt.Wb(25,"sup"),Nt.Pc(26,"Routing Type"),Nt.Vb(),Nt.Vb(),Nt.Wb(27,"td"),Nt.Wb(28,"div",9),Nt.Nc(29,qi,2,2,"ng-container",10),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(30,"tr"),Nt.Wb(31,"th",5),Nt.Wb(32,"sup"),Nt.Pc(33,"Promotion Name"),Nt.Vb(),Nt.Vb(),Nt.Wb(34,"td"),Nt.Rb(35,"app-input-text",11),Nt.Vb(),Nt.Wb(36,"th",5),Nt.Wb(37,"sup"),Nt.Pc(38,"C.CLS"),Nt.Vb(),Nt.Vb(),Nt.Wb(39,"td"),Nt.Wb(40,"div",9),Nt.Nc(41,Ki,2,2,"ng-container",10),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(42,"tr"),Nt.Wb(43,"th",12),Nt.Wb(44,"sup"),Nt.Pc(45,"Origin Airport Code"),Nt.Vb(),Nt.Vb(),Nt.Wb(46,"td"),Nt.Wb(47,"div",9),Nt.Rb(48,"app-input-text",13),Nt.Wb(49,"app-checkbox",14),Nt.fc("ngModelChange",(function(e){return t.isOriginAirportCodeListDisabled=e}))("onChange",(function(e){return t.controlDisableFormControl(e,"originAirportCodeList")})),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(50,"th",5),Nt.Pc(51,"C/S Applied YN"),Nt.Vb(),Nt.Wb(52,"td"),Nt.Wb(53,"div",9),Nt.Rb(54,"app-radio",15),Nt.Rb(55,"app-radio",15),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(56,"tr"),Nt.Wb(57,"th",5),Nt.Wb(58,"sup"),Nt.Pc(59,"Destination Aiprort Code"),Nt.Vb(),Nt.Vb(),Nt.Wb(60,"td"),Nt.Wb(61,"div",9),Nt.Rb(62,"app-input-text",16),Nt.Wb(63,"app-checkbox",14),Nt.fc("ngModelChange",(function(e){return t.isDestinationAirportCodeListDisabled=e}))("onChange",(function(e){return t.controlDisableFormControl(e,"destinationAirportCodeList")})),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(64,"th",5),Nt.Pc(65,"Transit Applied YN"),Nt.Vb(),Nt.Wb(66,"td"),Nt.Wb(67,"div",9),Nt.Rb(68,"app-radio",17),Nt.Rb(69,"app-radio",17),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(70,"tr"),Nt.Wb(71,"th",18),Nt.Wb(72,"sup"),Nt.Pc(73,"Booking Date"),Nt.Vb(),Nt.Vb(),Nt.Wb(74,"td"),Nt.Wb(75,"div"),Nt.Wb(76,"tr"),Nt.Wb(77,"div"),Nt.Pc(78," Applied Weekday "),Nt.Vb(),Nt.Wb(79,"div",19),Nt.Wb(80,"app-checkbox",20),Nt.fc("onChange",(function(e){return t.onCheckAllWeekday(e,"bookingWeekday")})),Nt.Vb(),Nt.Nc(81,zi,2,4,"ng-container",21),Nt.Vb(),Nt.Vb(),Nt.Wb(82,"tr"),Nt.Wb(83,"div",22),Nt.Wb(84,"div",23),Nt.Pc(85," Applied From ~ To Date "),Nt.Vb(),Nt.Wb(86,"div",24),Nt.Wb(87,"div",25),Nt.Rb(88,"mat-datepicker-toggle",26),Nt.Rb(89,"input",27),Nt.Rb(90,"mat-datepicker",null,28),Nt.Vb(),Nt.Wb(92,"div",29),Nt.Pc(93,"~"),Nt.Vb(),Nt.Wb(94,"div",25),Nt.Rb(95,"mat-datepicker-toggle",26),Nt.Rb(96,"input",30),Nt.Rb(97,"mat-datepicker",null,31),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(99,"th",18),Nt.Wb(100,"sup"),Nt.Pc(101,"Departure Date"),Nt.Vb(),Nt.Vb(),Nt.Wb(102,"td"),Nt.Wb(103,"div"),Nt.Wb(104,"tr"),Nt.Wb(105,"div"),Nt.Pc(106," Applied Weekday "),Nt.Vb(),Nt.Wb(107,"div",32),Nt.Wb(108,"app-checkbox",20),Nt.fc("onChange",(function(e){return t.onCheckAllWeekday(e,"departureWeekday")})),Nt.Vb(),Nt.Nc(109,Qi,2,4,"ng-container",21),Nt.Vb(),Nt.Vb(),Nt.Wb(110,"tr"),Nt.Wb(111,"div",22),Nt.Wb(112,"div",9),Nt.Pc(113," Applied From ~ To Date "),Nt.Vb(),Nt.Wb(114,"div",24),Nt.Wb(115,"div",25),Nt.Rb(116,"mat-datepicker-toggle",26),Nt.Rb(117,"input",33),Nt.Rb(118,"mat-datepicker",null,34),Nt.Vb(),Nt.Wb(120,"div",29),Nt.Pc(121,"~"),Nt.Vb(),Nt.Wb(122,"div",25),Nt.Rb(123,"mat-datepicker-toggle",26),Nt.Rb(124,"input",35),Nt.Rb(125,"mat-datepicker",null,36),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(127,"div",1),Nt.Wb(128,"div",37),Nt.Pc(129," Promotion Applied Card & Amount Set Up "),Nt.Vb(),Nt.Nc(130,Xi,7,4,"ng-container",38),Nt.Wb(131,"div",2),Nt.Wb(132,"table"),Nt.Wb(133,"caption"),Nt.Pc(134," Promotion Applied Card & Promotion Amount Set Up "),Nt.Vb(),Nt.Wb(135,"colgroup"),Nt.Rb(136,"col"),Nt.Rb(137,"col"),Nt.Rb(138,"col"),Nt.Rb(139,"col"),Nt.Rb(140,"col"),Nt.Rb(141,"col"),Nt.Rb(142,"col"),Nt.Vb(),Nt.Wb(143,"thead"),Nt.Wb(144,"tr"),Nt.Wb(145,"th",39),Nt.Wb(146,"app-checkbox",40),Nt.fc("onChange",(function(e){return t.onCheckAllPrices(e)})),Nt.Vb(),Nt.Vb(),Nt.Wb(147,"th",41),Nt.Wb(148,"sup"),Nt.Pc(149,"Applied Card"),Nt.Vb(),Nt.Vb(),Nt.Wb(150,"th",41),Nt.Wb(151,"sup"),Nt.Pc(152,"ADT Value"),Nt.Vb(),Nt.Vb(),Nt.Wb(153,"th",41),Nt.Pc(154,"ADT Add. Value"),Nt.Vb(),Nt.Wb(155,"th",41),Nt.Pc(156,"CHD Value"),Nt.Vb(),Nt.Wb(157,"th",41),Nt.Pc(158,"CHD Add. Value"),Nt.Vb(),Nt.Wb(159,"th",41),Nt.Wb(160,"sup"),Nt.Pc(161,"Use YN"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(162,"tbody"),Nt.Nc(163,no,2,1,"ng-container",42),Nt.Nc(164,ro,3,0,"ng-template",null,43,Nt.Oc),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(166,"div",44),Nt.Wb(167,"a",45),Nt.fc("click",(function(){return t.onSubmit()})),Nt.Pc(168,"Save"),Nt.Vb(),Nt.Vb()),2&e){const e=Nt.Ec(91),i=Nt.Ec(98),o=Nt.Ec(119),n=Nt.Ec(126),r=Nt.Ec(165);Nt.pc("formGroup",t.putForm)("connectForm",t.putFormData),Nt.Cb(23),Nt.pc("isInvalid",t.checkIsInvalid("airlineCode")),Nt.Cb(5),Nt.Gb("valid-error",t.checkIsInvalid("routingTypeCode")),Nt.Cb(1),Nt.pc("ngForOf",t.routingTypeList),Nt.Cb(6),Nt.pc("isInvalid",t.checkIsInvalid("promotionName")),Nt.Cb(5),Nt.Gb("valid-error",t.checkIsInvalid("cabinClassCode")),Nt.Cb(1),Nt.pc("ngForOf",t.cabinClassCodeList),Nt.Cb(7),Nt.pc("isInvalid",t.checkIsInvalid("originAirportCodeList")||t.checkOriginInvalid()),Nt.Cb(1),Nt.pc("binary",!0)("ngModel",t.isOriginAirportCodeListDisabled)("ngModelOptions",Nt.tc(63,Hi)),Nt.Cb(5),Nt.pc("value",!0)("label","Y"),Nt.Cb(1),Nt.pc("value",!1)("label","N"),Nt.Cb(7),Nt.pc("isInvalid",t.checkIsInvalid("destinationAirportCodeList")||t.checkDestinationInvalid()),Nt.Cb(1),Nt.pc("binary",!0)("ngModel",t.isDestinationAirportCodeListDisabled)("ngModelOptions",Nt.tc(64,Hi)),Nt.Cb(5),Nt.pc("value",!0)("label","Y"),Nt.Cb(1),Nt.pc("value",!1)("label","N"),Nt.Cb(10),Nt.Gb("valid-error",t.checkIsInvalid("bookingWeekday")),Nt.Cb(1),Nt.pc("binary",!0)("ngModel",t.isAllBookWeekday)("ngModelOptions",Nt.tc(65,Hi)),Nt.Cb(1),Nt.pc("ngForOf",t.bookingWeekday.controls),Nt.Cb(6),Nt.Gb("valid-error",t.checkIsInvalid("bookingFromDate")),Nt.Cb(1),Nt.pc("for",e),Nt.Cb(1),Nt.pc("matDatepicker",e),Nt.Cb(5),Nt.Gb("valid-error",t.checkIsInvalid("bookingToDate")),Nt.Cb(1),Nt.pc("for",i),Nt.Cb(1),Nt.pc("matDatepicker",i)("min",t.putForm.get("bookingFromDate").value),Nt.Cb(11),Nt.Gb("valid-error",t.checkIsInvalid("departureWeekday")),Nt.Cb(1),Nt.pc("binary",!0)("ngModel",t.isAllDepartureWeekday)("ngModelOptions",Nt.tc(66,Hi)),Nt.Cb(1),Nt.pc("ngForOf",t.departureWeekday.controls),Nt.Cb(6),Nt.Gb("valid-error",t.checkIsInvalid("departureFromDate")),Nt.Cb(1),Nt.pc("for",o),Nt.Cb(1),Nt.pc("matDatepicker",o),Nt.Cb(5),Nt.Gb("valid-error",t.checkIsInvalid("departureToDate")),Nt.Cb(1),Nt.pc("for",n),Nt.Cb(1),Nt.pc("matDatepicker",n)("min",t.putForm.get("departureFromDate").value),Nt.Cb(6),Nt.pc("ngIf",!t.promotionSeq),Nt.Cb(16),Nt.pc("binary",!0)("ngModel",t.isAllPriceChecked)("ngModelOptions",Nt.tc(67,Hi))("disabled",0===t.details.length),Nt.Cb(17),Nt.pc("ngIf",t.details.length>0)("ngIfElse",r)}},directives:[r.B,r.s,r.k,zt.a,Zt.a,r.r,r.i,n.n,si.a,r.u,Mi.a,r.e,Ht.a,r.c,Xt.a,Jt.a,n.o,r.l,r.h,Bi.a,Qt.a],encapsulation:2}),e})();function lo(e,t){1&e&&Nt.Pc(0),2&e&&Nt.Qc(t.$implicit.airportGroupNameLn)}function co(e,t){if(1&e&&Nt.Rb(0,"app-input-text",15),2&e){const e=t.formGroup,i=Nt.hc();Nt.pc("formControl",e.get("airportGroupNameLn"))("isInvalid",i.checkIsInvalid("airportGroupNameLn"))}}function so(e,t){if(1&e&&(Nt.Wb(0,"div"),Nt.Pc(1),Nt.Vb()),2&e){const e=t.$implicit;Nt.Db("title",e.airportCodes),Nt.Cb(1),Nt.Qc(e.airportCodes)}}function po(e,t){if(1&e&&Nt.Rb(0,"app-input-text",15),2&e){const e=t.formGroup,i=Nt.hc();Nt.pc("formControl",e.get("airportCodes"))("isInvalid",i.checkIsInvalid("airportCodes"))}}function uo(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"button",18),Nt.fc("click",(function(){Nt.Fc(e);const t=Nt.hc().$implicit;return Nt.hc().onSelect(t)})),Nt.Pc(1,"\uc120\ud0dd"),Nt.Vb()}}function bo(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"button",19),Nt.fc("click",(function(){return Nt.Fc(e),Nt.hc(2).onSelect(null)})),Nt.Pc(1,"\ud574\uc81c"),Nt.Vb()}}function ho(e,t){if(1&e&&(Nt.Nc(0,uo,2,0,"button",16),Nt.Nc(1,bo,2,0,"button",17)),2&e){const e=t.$implicit,i=Nt.hc();Nt.pc("ngIf",e.rowid&&e.airportGroupSeq!==i.selectedAirportGroup.groupSeq),Nt.Cb(1),Nt.pc("ngIf",e.rowid&&e.airportGroupSeq===i.selectedAirportGroup.groupSeq)}}let mo=(()=>{class e{constructor(e,t,i){this._dataService=e,this._cd=t,this.alertService=i,this.searchAirportGroup=new Nt.n,this.addAirportGroupEvent=new Nt.n,this.selectAirportEvent=new Nt.n,this.skip=0,this.pageSize=10}get airportGroups(){return this._airportGroups}set airportGroups(e){var t;if(!W.isEmpty(e)&&(null===(t=this.selectedAirportGroup)||void 0===t?void 0:t.groupSeq)){const[t,i]=W.partition(e,e=>e.airportGroupSeq===this.selectedAirportGroup.groupSeq);this._airportGroups=W.concat(t,i)}else this._airportGroups=e;this._initState(),this._loadCurrentView()}ngOnInit(){}onSearch(){this.searchAirportGroup.emit({airportCode:this.airportCode,airportGroupName:this.airportGroupName})}onPageChange(e){this.skip=e.skip,this._loadCurrentView()}onAdd(e){this.onCancel(e),this.editedRowIndex=-1,this.addForm=this._dataService.generateAirportGroupForm(),e.addRow(this.addForm),this._cd.markForCheck()}onCancel(e,t=this.editedRowIndex){W.isNil(t)||(e.closeRow(t),this.editedRowIndex=void 0,this.addForm=void 0,this.checkValid=!1)}onSave(e){if(!this.addForm)return void this.alertService.alert("\uc800\uc7a5\ud560 \ud56d\ubaa9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");if(this.addForm.invalid)return void(this.checkValid=!0);this.checkValid=!1,this.gridLoading=!0;const t=this.addForm.value,i=t.airportCodes.split(","),o=Object.assign({},t,{airportGroupNameEn:t.airportGroupNameLn,airportCodes:i});this.addAirportGroupEvent.emit(W.omitBy(o,W.isNil)),this.onCancel(e)}onSelect(e){const t=Object.assign({},this.selectedAirportGroup,{groupSeq:(null==e?void 0:e.airportGroupSeq)||null,groupName:(null==e?void 0:e.airportGroupNameLn)||null});this.selectAirportEvent.emit(t)}checkIsInvalid(e){return this.checkValid&&this.addForm.get(e)&&this.addForm.get(e).invalid}_loadCurrentView(){var e;if(this.gridLoading&&(this.gridLoading=!1),W.isNil(this.airportGroups)||(null===(e=this.airportGroups)||void 0===e?void 0:e.length)<1)return;const t=this.airportGroups.slice(this.skip,this.skip+this.pageSize),i=this.view.length-t.length;i>0&&this.view.splice(t.length-1,i),t.forEach((e,t)=>{this.view[t]||(this.view[t]={}),Object.assign(this.view[t],e)}),this.gridView={data:this.view,total:this.airportGroups.length}}_initState(){this.skip=0,this.view=new Array(this.pageSize).fill({}).map(e=>({}))}}return e.\u0275fac=function(t){return new(t||e)(Nt.Qb(Kt),Nt.Qb(Nt.h),Nt.Qb(Ui.a))},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-detail-airport-group"]],inputs:{selectedAirportGroup:"selectedAirportGroup",airportGroups:"airportGroups"},outputs:{searchAirportGroup:"searchAirportGroup",addAirportGroupEvent:"addAirportGroupEvent",selectAirportEvent:"selectAirportEvent"},decls:22,vars:6,consts:[[1,"page-item"],[1,"page-item-header"],[1,"title"],[1,"control"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"btn","btn-outline-secondary","sm",3,"click"],[1,"btn","btn-secondary","sm",3,"click"],[1,"table","table-bordered","table-responsive"],[2,"max-height","500",3,"data","loading","pageable","skip","pageSize","pageChange"],["grid",""],["field","airportGroupNameLn","title","\uacf5\ud56d\uadf8\ub8f9\uc774\ub984","width","150"],["kendoGridCellTemplate",""],["kendoGridEditTemplate",""],["field","airportCodes","title","\ud3ec\ud568\ub41c \uacf5\ud56d"],["title","\uc120\ud0dd",3,"width"],[3,"formControl","isInvalid"],["class","btn btn-primary xs",3,"click",4,"ngIf"],["class","btn btn-secondary xs",3,"click",4,"ngIf"],[1,"btn","btn-primary","xs",3,"click"],[1,"btn","btn-secondary","xs",3,"click"]],template:function(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"div",0),Nt.Wb(1,"div",1),Nt.Wb(2,"p",2),Nt.Pc(3,"\uacf5\ud56d\uadf8\ub8f9"),Nt.Vb(),Nt.Wb(4,"div",3),Nt.Wb(5,"a",4),Nt.fc("click",(function(){Nt.Fc(e);const i=Nt.Ec(13);return t.onAdd(i)})),Nt.Pc(6,"\ucd94\uac00"),Nt.Vb(),Nt.Wb(7,"a",5),Nt.fc("click",(function(){Nt.Fc(e);const i=Nt.Ec(13);return t.onSave(i)})),Nt.Pc(8,"\uc800\uc7a5"),Nt.Vb(),Nt.Wb(9,"a",6),Nt.fc("click",(function(){Nt.Fc(e);const i=Nt.Ec(13);return t.onCancel(i)})),Nt.Pc(10,"\ucde8\uc18c"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(11,"div",7),Nt.Wb(12,"kendo-grid",8,9),Nt.fc("pageChange",(function(e){return t.onPageChange(e)})),Nt.Wb(14,"kendo-grid-column",10),Nt.Nc(15,lo,1,1,"ng-template",11),Nt.Nc(16,co,1,2,"ng-template",12),Nt.Vb(),Nt.Wb(17,"kendo-grid-column",13),Nt.Nc(18,so,2,2,"ng-template",11),Nt.Nc(19,po,1,2,"ng-template",12),Nt.Vb(),Nt.Wb(20,"kendo-grid-column",14),Nt.Nc(21,ho,2,2,"ng-template",11),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb()}2&e&&(Nt.Cb(12),Nt.pc("data",t.gridView)("loading",t.gridLoading)("pageable",!0)("skip",t.skip)("pageSize",t.pageSize),Nt.Cb(8),Nt.pc("width",90))},directives:[c.l,c.d,c.c,c.i,Zt.a,r.r,r.h,n.o],encapsulation:2,changeDetection:0}),e})(),go=(()=>{class e{constructor(){this.saveUseYnEvent=new Nt.n}ngOnInit(){this._initState()}onSubmit(){this.saveUseYnEvent.emit({promotionAppliedYn:this.useYn})}_initState(){this.useYn=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-bulk-use-yn"]],outputs:{saveUseYnEvent:"saveUseYnEvent"},decls:22,vars:6,consts:[[1,"page-item-header"],[1,"title"],[1,"control"],[1,"btn","btn-secondary","sm",3,"click"],[1,"table","table-bordered","table-responsive"],["width","11%"],["scope","row",1,"th-bg"],[1,"form-group"],["name","useYn",3,"ngModel","value","label","ngModelChange"]],template:function(e,t){1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"p",1),Nt.Pc(2,"\uc0c1\uc2dc\ud504\ub85c\ubaa8\uc158 \uc0ac\uc6a9\uc5ec\ubd80"),Nt.Vb(),Nt.Wb(3,"div",2),Nt.Wb(4,"a",3),Nt.fc("click",(function(){return t.onSubmit()})),Nt.Pc(5,"\uc800\uc7a5"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(6,"div",4),Nt.Wb(7,"table"),Nt.Wb(8,"caption"),Nt.Pc(9," \uc0c1\uc2dc\ud504\ub85c\ubaa8\uc158 \uc0ac\uc6a9\uc5ec\ubd80 "),Nt.Vb(),Nt.Wb(10,"colgroup"),Nt.Rb(11,"col",5),Nt.Rb(12,"col"),Nt.Vb(),Nt.Wb(13,"tbody"),Nt.Wb(14,"tr"),Nt.Wb(15,"th",6),Nt.Wb(16,"sup"),Nt.Pc(17,"\uc0ac\uc6a9\uc5ec\ubd80"),Nt.Vb(),Nt.Vb(),Nt.Wb(18,"td"),Nt.Wb(19,"div",7),Nt.Wb(20,"app-radio",8),Nt.fc("ngModelChange",(function(e){return t.useYn=e})),Nt.Vb(),Nt.Wb(21,"app-radio",8),Nt.fc("ngModelChange",(function(e){return t.useYn=e})),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb()),2&e&&(Nt.Cb(20),Nt.pc("ngModel",t.useYn)("value",!0)("label","Y"),Nt.Cb(1),Nt.pc("ngModel",t.useYn)("value",!1)("label","N"))},directives:[Mi.a,r.r,r.u],encapsulation:2,changeDetection:0}),e})(),Co=(()=>{class e{constructor(){this.savePlanUseYnEvent=new Nt.n}ngOnInit(){this._initState()}onSubmit(){this.savePlanUseYnEvent.emit({planUseYn:this.planUseYn})}_initState(){this.planUseYn=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-bulk-plan-use-yn"]],outputs:{savePlanUseYnEvent:"savePlanUseYnEvent"},decls:22,vars:6,consts:[[1,"page-item-header"],[1,"title"],[1,"control"],[1,"btn","btn-secondary","sm",3,"click"],[1,"table","table-bordered","table-responsive"],["width","11%"],["scope","row",1,"th-bg"],[1,"form-group"],["name","planUseYn",3,"ngModel","value","label","ngModelChange"]],template:function(e,t){1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"p",1),Nt.Pc(2,"\uc608\uc57d \ud504\ub85c\ubaa8\uc158 \uc0ac\uc6a9\uc5ec\ubd80"),Nt.Vb(),Nt.Wb(3,"div",2),Nt.Wb(4,"a",3),Nt.fc("click",(function(){return t.onSubmit()})),Nt.Pc(5,"\uc800\uc7a5"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(6,"div",4),Nt.Wb(7,"table"),Nt.Wb(8,"caption"),Nt.Pc(9," \uc608\uc57d \ud504\ub85c\ubaa8\uc158 \uc0ac\uc6a9\uc5ec\ubd80 "),Nt.Vb(),Nt.Wb(10,"colgroup"),Nt.Rb(11,"col",5),Nt.Rb(12,"col"),Nt.Vb(),Nt.Wb(13,"tbody"),Nt.Wb(14,"tr"),Nt.Wb(15,"th",6),Nt.Wb(16,"sup"),Nt.Pc(17,"\uc0ac\uc6a9\uc5ec\ubd80"),Nt.Vb(),Nt.Vb(),Nt.Wb(18,"td"),Nt.Wb(19,"div",7),Nt.Wb(20,"app-radio",8),Nt.fc("ngModelChange",(function(e){return t.planUseYn=e})),Nt.Vb(),Nt.Wb(21,"app-radio",8),Nt.fc("ngModelChange",(function(e){return t.planUseYn=e})),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb()),2&e&&(Nt.Cb(20),Nt.pc("ngModel",t.planUseYn)("value",!0)("label","Y"),Nt.Cb(1),Nt.pc("ngModel",t.planUseYn)("value",!1)("label","N"))},directives:[Mi.a,r.r,r.u],encapsulation:2,changeDetection:0}),e})(),fo=(()=>{class e{constructor(e){this._dataService=e,this.saveDeviceEvent=new Nt.n,this.putForm=this._dataService.generateBulkDevicePutForm(),this.putFormData=this._dataService.initBulkDevicePutFormData()}ngOnInit(){this._initState()}onSubmit(){this.putForm.invalid?this._checkValid=!0:this.saveDeviceEvent.emit(this.putForm.value)}checkDeviceIsInvalid(){var e;return this._checkValid&&!0===(null===(e=this.putForm.errors)||void 0===e?void 0:e.shouldNotAllFalse)}_initState(){this._checkValid=!1}}return e.\u0275fac=function(t){return new(t||e)(Nt.Qb(Kt))},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-bulk-device"]],outputs:{saveDeviceEvent:"saveDeviceEvent"},decls:23,vars:7,consts:[[1,"page-item-header","mb10"],[1,"title"],[1,"control"],[1,"btn","btn-secondary","sm",3,"click"],[1,"table","table-bordered","table-responsive",3,"formGroup","connectForm"],["width","11%"],["scope","row",1,"th-bg"],[1,"form-group"],["formControlName","pcDisplayYn","label","PC",3,"binary"],["formControlName","mobileAppDisplayYn","label","MA",3,"binary"],["formControlName","mobileWebDisplayYn","label","MW",3,"binary"]],template:function(e,t){1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"p",1),Nt.Pc(2,"\uc0c1\uc2dc\ub514\ubc14\uc774\uc2a4 \uc885\ub958"),Nt.Vb(),Nt.Wb(3,"div",2),Nt.Wb(4,"a",3),Nt.fc("click",(function(){return t.onSubmit()})),Nt.Pc(5,"\uc800\uc7a5"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(6,"form",4),Nt.Wb(7,"table"),Nt.Wb(8,"caption"),Nt.Pc(9," \uc0c1\uc2dc\ub514\ubc14\uc774\uc2a4 \uc885\ub958 "),Nt.Vb(),Nt.Wb(10,"colgroup"),Nt.Rb(11,"col",5),Nt.Rb(12,"col"),Nt.Vb(),Nt.Wb(13,"tbody"),Nt.Wb(14,"tr"),Nt.Wb(15,"th",6),Nt.Wb(16,"sup"),Nt.Pc(17,"\ub514\ubc14\uc774\uc2a4"),Nt.Vb(),Nt.Vb(),Nt.Wb(18,"td"),Nt.Wb(19,"div",7),Nt.Rb(20,"app-checkbox",8),Nt.Rb(21,"app-checkbox",9),Nt.Rb(22,"app-checkbox",10),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb()),2&e&&(Nt.Cb(6),Nt.pc("formGroup",t.putForm)("connectForm",t.putFormData),Nt.Cb(13),Nt.Gb("valid-error",t.checkDeviceIsInvalid()),Nt.Cb(1),Nt.pc("binary",!0),Nt.Cb(1),Nt.pc("binary",!0),Nt.Cb(1),Nt.pc("binary",!0))},directives:[r.B,r.s,r.k,zt.a,si.a,r.r,r.i],encapsulation:2,changeDetection:0}),e})();const ko=function(){return["adultDiscountOrUpsell"]},vo=function(){return["adultAppliedValue"]},Oo=function(){return["adultAddDiscountOrUpsell"]},Ao=function(){return["childDiscountOrUpsell"]},yo=function(){return["childAddDiscountOrUpsell"]};let Do=(()=>{class e{constructor(e){this._dataService=e,this.savePriceEvent=new Nt.n,this.overPriceObj={},this._$unsubscribe=new V.a,this.putForm=this._dataService.generateBulkPricePutForm(),this.putFormData=this._dataService.initBulkPricePutFormData()}get maxDiscountRate(){return this._maxDiscountRate}set maxDiscountRate(e){this._maxDiscountRate=e,this.putForm.get("adultAppliedValue").setValidators([r.z.required,this._dataService.priceOverValidators(e,"adultRateOrAmount")]),this.putForm.get("adultAddAppliedValue").setValidators([this._dataService.priceOverValidators(e,"adultAddRateOrAmount")]),this.putForm.get("childAppliedValue").setValidators([this._dataService.priceOverValidators(e,"childRateOrAmount")]),this.putForm.get("childAddAppliedValue").setValidators([this._dataService.priceOverValidators(e,"childAddRateOrAmount")]),this.putForm.get("adultAppliedValue").updateValueAndValidity(),this.putForm.get("adultAddAppliedValue").updateValueAndValidity(),this.putForm.get("childAppliedValue").updateValueAndValidity(),this.putForm.get("childAddAppliedValue").updateValueAndValidity()}ngOnInit(){this._initSubscription(),this._initState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){this.putForm.invalid?this._checkValid=!0:this.savePriceEvent.emit(this.putForm.value)}checkIsInvalid(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}checkPriceOverInvalid(e,t){return this.overPriceObj.hasOwnProperty(e)&&this.overPriceObj[e].indexOf(t)>-1}_initSubscription(){this.putForm.get("adultRateOrAmount").valueChanges.pipe(Object(L.a)(this._$unsubscribe)).subscribe(()=>{this.putForm.get("adultAppliedValue").updateValueAndValidity()}),this.putForm.get("adultAddRateOrAmount").valueChanges.pipe(Object(L.a)(this._$unsubscribe)).subscribe(()=>{this.putForm.get("adultAddAppliedValue").updateValueAndValidity()}),this.putForm.get("childRateOrAmount").valueChanges.pipe(Object(L.a)(this._$unsubscribe)).subscribe(()=>{this.putForm.get("childAppliedValue").updateValueAndValidity()}),this.putForm.get("childAddRateOrAmount").valueChanges.pipe(Object(L.a)(this._$unsubscribe)).subscribe(()=>{this.putForm.get("childAddAppliedValue").updateValueAndValidity()})}_initState(){this._checkValid=!1}}return e.\u0275fac=function(t){return new(t||e)(Nt.Qb(Kt))},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-bulk-price"]],inputs:{discountOrUpsellList:"discountOrUpsellList",rateOrAmountList:"rateOrAmountList",maxDiscountRate:"maxDiscountRate"},outputs:{savePriceEvent:"savePriceEvent"},decls:48,vars:31,consts:[[1,"page-item-header","mb10"],[1,"title"],[1,"control"],[1,"btn","btn-secondary","sm",3,"click"],[1,"table","table-bordered","table-responsive",3,"formGroup","connectForm"],["scope","col",1,"align-c"],[1,"form-group"],["formControlName","adultDiscountOrUpsell",2,"min-width","60px",3,"options","useAllOptionYn","isInvalid"],["formControlName","adultAppliedValue","valueType","number","inputFormat","number",2,"min-width","80px",3,"isInvalid"],["formControlName","adultRateOrAmount",2,"min-width","60px",3,"options","useAllOptionYn"],["formControlName","adultAddDiscountOrUpsell",2,"min-width","60px",3,"options","useAllOptionYn","isInvalid"],["formControlName","adultAddAppliedValue","valueType","number","inputFormat","number",2,"min-width","80px",3,"isInvalid"],["formControlName","adultAddRateOrAmount",2,"min-width","60px",3,"options","useAllOptionYn"],["formControlName","childDiscountOrUpsell",2,"min-width","60px",3,"options","useAllOptionYn","isInvalid"],["formControlName","childAppliedValue","valueType","number","inputFormat","number",2,"min-width","80px",3,"isInvalid"],["formControlName","childRateOrAmount",2,"min-width","60px",3,"options","useAllOptionYn"],["formControlName","childAddDiscountOrUpsell",2,"min-width","60px",3,"options","useAllOptionYn","isInvalid"],["formControlName","childAddAppliedValue","valueType","number","inputFormat","number",2,"min-width","80px",3,"isInvalid"],["formControlName","childAddRateOrAmount",2,"min-width","60px",3,"options","useAllOptionYn"]],template:function(e,t){1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"p",1),Nt.Pc(2,"\uc0c1\uc2dc \ud504\ub85c\ubaa8\uc158 \ud560\uc778\uc728/\uae08\uc561"),Nt.Vb(),Nt.Wb(3,"div",2),Nt.Wb(4,"a",3),Nt.fc("click",(function(){return t.onSubmit()})),Nt.Pc(5,"\uc800\uc7a5"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(6,"form",4),Nt.Wb(7,"table"),Nt.Wb(8,"caption"),Nt.Pc(9," \uc0c1\uc2dc \ud504\ub85c\ubaa8\uc158 \ud560\uc778\uc728/\uae08\uc561 "),Nt.Vb(),Nt.Wb(10,"colgroup"),Nt.Rb(11,"col"),Nt.Rb(12,"col"),Nt.Rb(13,"col"),Nt.Rb(14,"col"),Nt.Vb(),Nt.Wb(15,"thead"),Nt.Wb(16,"tr"),Nt.Wb(17,"th",5),Nt.Wb(18,"sup"),Nt.Pc(19,"\uc131\uc778 \uae08\uc561"),Nt.Vb(),Nt.Vb(),Nt.Wb(20,"th",5),Nt.Pc(21,"\uc131\uc778 \ucd94\uac00 \uae08\uc561"),Nt.Vb(),Nt.Wb(22,"th",5),Nt.Pc(23,"\uc544\ub3d9 \uae08\uc561\x1f"),Nt.Vb(),Nt.Wb(24,"th",5),Nt.Pc(25,"\uc544\ub3d9 \ucd94\uac00 \uae08\uc561"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(26,"tbody"),Nt.Wb(27,"tr"),Nt.Wb(28,"td"),Nt.Wb(29,"div",6),Nt.Rb(30,"app-selectbox",7),Nt.Rb(31,"app-input-text",8),Nt.Rb(32,"app-selectbox",9),Nt.Vb(),Nt.Vb(),Nt.Wb(33,"td"),Nt.Wb(34,"div",6),Nt.Rb(35,"app-selectbox",10),Nt.Rb(36,"app-input-text",11),Nt.Rb(37,"app-selectbox",12),Nt.Vb(),Nt.Vb(),Nt.Wb(38,"td"),Nt.Wb(39,"div",6),Nt.Rb(40,"app-selectbox",13),Nt.Rb(41,"app-input-text",14),Nt.Rb(42,"app-selectbox",15),Nt.Vb(),Nt.Vb(),Nt.Wb(43,"td"),Nt.Wb(44,"div",6),Nt.Rb(45,"app-selectbox",16),Nt.Rb(46,"app-input-text",17),Nt.Rb(47,"app-selectbox",18),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb()),2&e&&(Nt.Cb(6),Nt.pc("formGroup",t.putForm)("connectForm",t.putFormData),Nt.Cb(24),Nt.pc("options",t.discountOrUpsellList)("useAllOptionYn",!1)("isInvalid",t.checkIsInvalid(Nt.tc(26,ko))),Nt.Cb(1),Nt.pc("isInvalid",t.checkIsInvalid(Nt.tc(27,vo))),Nt.Cb(1),Nt.pc("options",t.rateOrAmountList)("useAllOptionYn",!1),Nt.Cb(3),Nt.pc("options",t.discountOrUpsellList)("useAllOptionYn",!1)("isInvalid",t.checkIsInvalid(Nt.tc(28,Oo))),Nt.Cb(1),Nt.pc("isInvalid",t.checkIsInvalid("adultAddAppliedValue")),Nt.Cb(1),Nt.pc("options",t.rateOrAmountList)("useAllOptionYn",!1),Nt.Cb(3),Nt.pc("options",t.discountOrUpsellList)("useAllOptionYn",!1)("isInvalid",t.checkIsInvalid(Nt.tc(29,Ao))),Nt.Cb(1),Nt.pc("isInvalid",t.checkIsInvalid("childAppliedValue")),Nt.Cb(1),Nt.pc("options",t.rateOrAmountList)("useAllOptionYn",!1),Nt.Cb(3),Nt.pc("options",t.discountOrUpsellList)("useAllOptionYn",!1)("isInvalid",t.checkIsInvalid(Nt.tc(30,yo))),Nt.Cb(1),Nt.pc("isInvalid",t.checkIsInvalid("childAddAppliedValue")),Nt.Cb(1),Nt.pc("options",t.rateOrAmountList)("useAllOptionYn",!1))},directives:[r.B,r.s,r.k,zt.a,Qt.a,r.r,r.i,Zt.a],encapsulation:2,changeDetection:0}),e})();function Vo(e,t){if(1&e&&(Nt.Ub(0,23),Nt.Rb(1,"app-checkbox",24),Nt.Tb()),2&e){const e=t.$implicit,i=t.index,o=Nt.hc();Nt.pc("formGroupName",i),Nt.Cb(1),Nt.pc("binary",!0)("formControl",e)("label",o.weekDayLabelList[i])}}function jo(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"div",25),Nt.Wb(1,"div",10),Nt.Rb(2,"mat-datepicker-toggle",11),Nt.Rb(3,"input",26),Nt.Rb(4,"mat-datepicker",null,27),Nt.Vb(),Nt.Wb(6,"div",14),Nt.Pc(7,"~"),Nt.Vb(),Nt.Wb(8,"div",10),Nt.Rb(9,"mat-datepicker-toggle",11),Nt.Rb(10,"input",28),Nt.Rb(11,"mat-datepicker",null,29),Nt.Vb(),Nt.Wb(13,"a",30),Nt.fc("click",(function(){Nt.Fc(e);const i=t.index;return Nt.hc().onChangeExcludeDates(i,"bookingExcludeDates")})),Nt.Pc(14,"\ucd94\uac00\uc0ad\uc81c"),Nt.Vb(),Nt.Vb()}if(2&e){const e=t.$implicit,i=t.index,o=Nt.Ec(5),n=Nt.Ec(12);Nt.Gb("mt10",i>0),Nt.pc("formGroupName",i),Nt.Cb(2),Nt.pc("for",o),Nt.Cb(1),Nt.pc("matDatepicker",o),Nt.Cb(6),Nt.pc("for",n),Nt.Cb(1),Nt.pc("matDatepicker",n)("min",e.get("FromDate").value),Nt.Cb(3),Nt.Gb("plus",0===i)("minus",i>0)}}function Lo(e,t){if(1&e&&(Nt.Ub(0,23),Nt.Rb(1,"app-checkbox",24),Nt.Tb()),2&e){const e=t.$implicit,i=t.index,o=Nt.hc();Nt.pc("formGroupName",i),Nt.Cb(1),Nt.pc("binary",!0)("formControl",e)("label",o.weekDayLabelList[i])}}const Wo=function(){return{standalone:!0}};let Fo=(()=>{class e{constructor(e,t){this._dataService=e,this.alertService=t,this.saveDateEvent=new Nt.n,this.weekDayLabelList=["\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0","\uc77c"],this._$unsubscribe=new V.a,this.putForm=this._dataService.generateBulkBookingForm(),this.putFormData=this._dataService.initBulkBookingFormData(),this._initSubscription()}get bookingWeekday(){return this.putForm.get("bookingWeekday")}get bookingExcludeWeekday(){return this.putForm.get("bookingExcludeWeekday")}get isAllBookWeekday(){return this.putForm.get("bookingWeekday").value.every(e=>e)}get isAllBookingExcludeWeekday(){return this.bookingExcludeWeekday.value.every(e=>e)}get bookingExcludeDates(){return this.putForm.get("bookingExcludeDates")}ngOnInit(){this._initForm(),this._initState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onCheckAllWeekday(e,t){let i;switch(t){case"bookingWeekday":i=this.bookingWeekday;break;case"bookingExcludeWeekday":i=this.bookingExcludeWeekday}i.patchValue(e?[!0,!0,!0,!0,!0,!0,!0]:[!1,!1,!1,!1,!1,!1,!1])}onChangeExcludeDates(e,t){let i;switch(t){case"bookingExcludeDates":i=this.bookingExcludeDates}if(0===e){if(i.length>4)return void this.alertService.alert("\uc81c\uc678\uae30\uac04\uc740 \ucd5c\ub300 5\uac1c\uae4c\uc9c0 \uc801\uc6a9\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.");i.push(this._dataService.generateExcludeDate())}else i.removeAt(e)}onSubmit(){this.putForm.invalid?this._checkValid=!0:this.saveDateEvent.emit({booking:this._setPutCondition()})}checkIsInvalid(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}_initForm(){}_initState(){this._checkValid=!1}_setPutCondition(){const e=this.putForm.getRawValue(),t=e.bookingWeekday.map(e=>e?"1":"0").join(""),i=e.bookingExcludeWeekday.map(e=>e?"1":"0").join(""),o=this._setExcludeDatesCondition(e.bookingExcludeDates,"bookingExclude");return Object.assign({},W.pick(e,["bookingFromDate","bookingToDate","bookingWeekday","bookingExcludeFromDate1","bookingExcludeToDate1","bookingExcludeFromDate2","bookingExcludeToDate2","bookingExcludeFromDate3","bookingExcludeToDate3","bookingExcludeFromDate4","bookingExcludeToDate4","bookingExcludeFromDate5","bookingExcludeToDate5","bookingExcludeWeekday"]),o,{bookingWeekday:t,bookingExcludeWeekday:i})}_setExcludeDatesCondition(e,t="bookingExclude"){const i={};return(null==e?void 0:e.length)>0&&e.forEach((e,o)=>{const n=t+"FromDate"+(o+1).toString(),r=t+"ToDate"+(o+1).toString();i[n]=e.FromDate||null,i[r]=e.ToDate||null}),i}_initSubscription(){this.putForm.get("bookingExcludeDates").valueChanges.pipe(Object(L.a)(this._$unsubscribe)).subscribe(()=>{this.putForm.get("bookingExcludeWeekday").updateValueAndValidity()})}}return e.\u0275fac=function(t){return new(t||e)(Nt.Qb(Kt),Nt.Qb(Ui.a))},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-bulk-booking"]],outputs:{saveDateEvent:"saveDateEvent"},decls:47,vars:26,consts:[[1,"page-item-header","mb10"],[1,"title"],[1,"control"],[1,"btn","btn-secondary","sm",3,"click"],[3,"formGroup","connectForm"],[1,"table","table-bordered","table-responsive","mt10"],["scope","col","colspan","2",1,"align-c"],["scope","col",1,"align-c"],[1,"align-c","align-t","pd10"],[1,"form-group"],[1,"input","calendar",2,"min-width","132px"],[3,"for"],["type","text","placeholder","YYYY-MM-DD","formControlName","bookingFromDate",3,"matDatepicker"],["bookingFromDate",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD","formControlName","bookingToDate",3,"matDatepicker","min"],["bookingToDate",""],["formArrayName","bookingWeekday",1,"form-group","justify-content-between","mt10"],["label","\uc804\uccb4",3,"binary","ngModel","ngModelOptions","onChange"],[3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","bookingExcludeDates"],["class","form-group",3,"mt10","formGroupName",4,"ngFor","ngForOf"],["formArrayName","bookingExcludeWeekday",1,"form-group","justify-content-between","mt10"],[3,"formGroupName"],[3,"binary","formControl","label"],[1,"form-group",3,"formGroupName"],["type","text","placeholder","YYYY-MM-DD","formControlName","FromDate",3,"matDatepicker"],["FromDate",""],["type","text","placeholder","YYYY-MM-DD","formControlName","ToDate",3,"matDatepicker","min"],["ToDate",""],[1,"icon","xs","align-m","ml10",3,"click"]],template:function(e,t){if(1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"p",1),Nt.Pc(2,"\uc608\uc57d\uae30\uac04/\uc694\uc77c"),Nt.Vb(),Nt.Wb(3,"div",2),Nt.Wb(4,"a",3),Nt.fc("click",(function(){return t.onSubmit()})),Nt.Pc(5,"\uc800\uc7a5"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(6,"form",4),Nt.Wb(7,"div",5),Nt.Wb(8,"table"),Nt.Wb(9,"colgroup"),Nt.Rb(10,"col"),Nt.Rb(11,"col"),Nt.Vb(),Nt.Wb(12,"thead"),Nt.Wb(13,"tr"),Nt.Wb(14,"th",6),Nt.Wb(15,"sup"),Nt.Pc(16,"\uc608\uc57d"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(17,"tr"),Nt.Wb(18,"th",7),Nt.Pc(19,"\uc801\uc6a9\uae30\uac04/\uc801\uc6a9\uc694\uc77c"),Nt.Vb(),Nt.Wb(20,"th",7),Nt.Pc(21,"\uc81c\uc678\uae30\uac04/\uc801\uc6a9\uc694\uc77c"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(22,"tbody"),Nt.Wb(23,"tr"),Nt.Wb(24,"td",8),Nt.Wb(25,"div",9),Nt.Wb(26,"div",10),Nt.Rb(27,"mat-datepicker-toggle",11),Nt.Rb(28,"input",12),Nt.Rb(29,"mat-datepicker",null,13),Nt.Vb(),Nt.Wb(31,"div",14),Nt.Pc(32,"~"),Nt.Vb(),Nt.Wb(33,"div",10),Nt.Rb(34,"mat-datepicker-toggle",11),Nt.Rb(35,"input",15),Nt.Rb(36,"mat-datepicker",null,16),Nt.Vb(),Nt.Vb(),Nt.Wb(38,"div",17),Nt.Wb(39,"app-checkbox",18),Nt.fc("onChange",(function(e){return t.onCheckAllWeekday(e,"bookingWeekday")})),Nt.Vb(),Nt.Nc(40,Vo,2,4,"ng-container",19),Nt.Vb(),Nt.Vb(),Nt.Wb(41,"td",8),Nt.Ub(42,20),Nt.Nc(43,jo,15,12,"div",21),Nt.Tb(),Nt.Wb(44,"div",22),Nt.Wb(45,"app-checkbox",18),Nt.fc("onChange",(function(e){return t.onCheckAllWeekday(e,"bookingExcludeWeekday")})),Nt.Vb(),Nt.Nc(46,Lo,2,4,"ng-container",19),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb()),2&e){const e=Nt.Ec(30),i=Nt.Ec(37);Nt.Cb(6),Nt.pc("formGroup",t.putForm)("connectForm",t.putFormData),Nt.Cb(20),Nt.Gb("valid-error",t.checkIsInvalid("bookingFromDate")),Nt.Cb(1),Nt.pc("for",e),Nt.Cb(1),Nt.pc("matDatepicker",e),Nt.Cb(5),Nt.Gb("valid-error",t.checkIsInvalid("bookingToDate")),Nt.Cb(1),Nt.pc("for",i),Nt.Cb(1),Nt.pc("matDatepicker",i)("min",t.putForm.get("bookingFromDate").value),Nt.Cb(3),Nt.Gb("valid-error",t.checkIsInvalid("bookingWeekday")),Nt.Cb(1),Nt.pc("binary",!0)("ngModel",t.isAllBookWeekday)("ngModelOptions",Nt.tc(24,Wo)),Nt.Cb(1),Nt.pc("ngForOf",t.bookingWeekday.controls),Nt.Cb(3),Nt.pc("ngForOf",t.bookingExcludeDates.controls),Nt.Cb(1),Nt.Gb("valid-error",t.checkIsInvalid("bookingExcludeWeekday")),Nt.Cb(1),Nt.pc("binary",!0)("ngModel",t.isAllBookingExcludeWeekday)("ngModelOptions",Nt.tc(25,Wo)),Nt.Cb(1),Nt.pc("ngForOf",t.bookingExcludeWeekday.controls)}},directives:[r.B,r.s,r.k,zt.a,Ht.a,r.c,Xt.a,r.r,r.i,Jt.a,r.e,si.a,r.u,n.n,r.l,r.h],encapsulation:2,changeDetection:0}),e})();function So(e,t){if(1&e&&(Nt.Ub(0,23),Nt.Rb(1,"app-checkbox",24),Nt.Tb()),2&e){const e=t.$implicit,i=t.index,o=Nt.hc();Nt.pc("formGroupName",i),Nt.Cb(1),Nt.pc("binary",!0)("formControl",e)("label",o.weekDayLabelList[i])}}function xo(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"div",25),Nt.Wb(1,"div",10),Nt.Rb(2,"mat-datepicker-toggle",11),Nt.Rb(3,"input",26),Nt.Rb(4,"mat-datepicker",null,27),Nt.Vb(),Nt.Wb(6,"div",14),Nt.Pc(7,"~"),Nt.Vb(),Nt.Wb(8,"div",10),Nt.Rb(9,"mat-datepicker-toggle",11),Nt.Rb(10,"input",28),Nt.Rb(11,"mat-datepicker",null,29),Nt.Vb(),Nt.Wb(13,"a",30),Nt.fc("click",(function(){Nt.Fc(e);const i=t.index;return Nt.hc().onChangeExcludeDates(i,"departureExcludeDates")})),Nt.Pc(14,"\ucd94\uac00\uc0ad\uc81c"),Nt.Vb(),Nt.Vb()}if(2&e){const e=t.$implicit,i=t.index,o=Nt.Ec(5),n=Nt.Ec(12);Nt.Gb("mt10",i>0),Nt.pc("formGroupName",i),Nt.Cb(2),Nt.pc("for",o),Nt.Cb(1),Nt.pc("matDatepicker",o),Nt.Cb(6),Nt.pc("for",n),Nt.Cb(1),Nt.pc("matDatepicker",n)("min",e.get("FromDate").value),Nt.Cb(3),Nt.Gb("plus",0===i)("minus",i>0)}}function Po(e,t){if(1&e&&(Nt.Ub(0,23),Nt.Rb(1,"app-checkbox",24),Nt.Tb()),2&e){const e=t.$implicit,i=t.index,o=Nt.hc();Nt.pc("formGroupName",i),Nt.Cb(1),Nt.pc("binary",!0)("formControl",e)("label",o.weekDayLabelList[i])}}const wo=function(){return{standalone:!0}};let Eo=(()=>{class e{constructor(e,t){this._dataService=e,this.alertService=t,this.saveDateEvent=new Nt.n,this.weekDayLabelList=["\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0","\uc77c"],this._$unsubscribe=new V.a,this.putForm=this._dataService.generateBulkDepartureForm(),this.putFormData=this._dataService.initBulkDepartureFormData(),this._initSubscription()}get departureWeekday(){return this.putForm.get("departureWeekday")}get departureExcludeWeekday(){return this.putForm.get("departureExcludeWeekday")}get isAllDepartureWeekday(){return this.departureWeekday.value.every(e=>e)}get isAllDepartureExcludeWeekday(){return this.departureExcludeWeekday.value.every(e=>e)}get departureExcludeDates(){return this.putForm.get("departureExcludeDates")}ngOnInit(){this._initForm(),this._initState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onCheckAllWeekday(e,t){let i;switch(t){case"departureWeekday":i=this.departureWeekday;break;case"departureExcludeWeekday":i=this.departureExcludeWeekday}i.patchValue(e?[!0,!0,!0,!0,!0,!0,!0]:[!1,!1,!1,!1,!1,!1,!1])}onChangeExcludeDates(e,t){let i;switch(t){case"departureExcludeDates":i=this.departureExcludeDates}if(0===e){if(i.length>4)return void this.alertService.alert("\uc81c\uc678\uae30\uac04\uc740 \ucd5c\ub300 5\uac1c\uae4c\uc9c0 \uc801\uc6a9\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.");i.push(this._dataService.generateExcludeDate())}else i.removeAt(e)}onSubmit(){this.putForm.invalid?this._checkValid=!0:this.saveDateEvent.emit({departure:this._setPutCondition()})}checkIsInvalid(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}_initForm(){}_initState(){this._checkValid=!1}_setPutCondition(){const e=this.putForm.getRawValue(),t=e.departureWeekday.map(e=>e?"1":"0").join(""),i=e.departureExcludeWeekday.map(e=>e?"1":"0").join(""),o=this._setExcludeDatesCondition(e.departureExcludeDates,"departureExclude");return Object.assign({},W.pick(e,["departureFromDate","departureToDate","departureWeekday","departureExcludeFromDate1","departureExcludeToDate1","departureExcludeFromDate2","departureExcludeToDate2","departureExcludeFromDate3","departureExcludeToDate3","departureExcludeFromDate4","departureExcludeToDate4","departureExcludeFromDate5","departureExcludeToDate5","departureExcludeWeekday"]),o,{departureWeekday:t,departureExcludeWeekday:i})}_setExcludeDatesCondition(e,t){const i={};return(null==e?void 0:e.length)>0&&e.forEach((e,o)=>{const n=t+"FromDate"+(o+1).toString(),r=t+"ToDate"+(o+1).toString();i[n]=e.FromDate||null,i[r]=e.ToDate||null}),i}_initSubscription(){this.putForm.get("departureExcludeDates").valueChanges.pipe(Object(L.a)(this._$unsubscribe)).subscribe(()=>{this.putForm.get("departureExcludeWeekday").updateValueAndValidity()})}}return e.\u0275fac=function(t){return new(t||e)(Nt.Qb(Kt),Nt.Qb(Ui.a))},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-bulk-departure"]],outputs:{saveDateEvent:"saveDateEvent"},decls:47,vars:26,consts:[[1,"page-item-header","mb10"],[1,"title"],[1,"control"],[1,"btn","btn-secondary","sm",3,"click"],[3,"formGroup","connectForm"],[1,"table","table-bordered","table-responsive","mt10"],["scope","col","colspan","2",1,"align-c"],["scope","col",1,"align-c"],[1,"align-c","align-t","pd10"],[1,"form-group"],[1,"input","calendar",2,"min-width","132px"],[3,"for"],["type","text","placeholder","YYYY-MM-DD","formControlName","departureFromDate",3,"matDatepicker"],["departureFromDate",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD","formControlName","departureToDate",3,"matDatepicker","min"],["departureToDate",""],["formArrayName","departureWeekday",1,"form-group","justify-content-between","mt10"],["label","\uc804\uccb4",3,"binary","ngModel","ngModelOptions","onChange"],[3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","departureExcludeDates"],["class","form-group",3,"mt10","formGroupName",4,"ngFor","ngForOf"],["formArrayName","departureExcludeWeekday",1,"form-group","justify-content-between","mt10"],[3,"formGroupName"],[3,"binary","formControl","label"],[1,"form-group",3,"formGroupName"],["type","text","placeholder","YYYY-MM-DD","formControlName","FromDate",3,"matDatepicker"],["FromDate",""],["type","text","placeholder","YYYY-MM-DD","formControlName","ToDate",3,"matDatepicker","min"],["ToDate",""],[1,"icon","xs","align-m","ml10",3,"click"]],template:function(e,t){if(1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"p",1),Nt.Pc(2,"\ucd9c\ubc1c\uae30\uac04/\uc694\uc77c"),Nt.Vb(),Nt.Wb(3,"div",2),Nt.Wb(4,"a",3),Nt.fc("click",(function(){return t.onSubmit()})),Nt.Pc(5,"\uc800\uc7a5"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(6,"form",4),Nt.Wb(7,"div",5),Nt.Wb(8,"table"),Nt.Wb(9,"colgroup"),Nt.Rb(10,"col"),Nt.Rb(11,"col"),Nt.Vb(),Nt.Wb(12,"thead"),Nt.Wb(13,"tr"),Nt.Wb(14,"th",6),Nt.Wb(15,"sup"),Nt.Pc(16,"\ucd9c\ubc1c"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(17,"tr"),Nt.Wb(18,"th",7),Nt.Pc(19,"\uc801\uc6a9\uae30\uac04/\uc801\uc6a9\uc694\uc77c"),Nt.Vb(),Nt.Wb(20,"th",7),Nt.Pc(21,"\uc81c\uc678\uae30\uac04/\uc801\uc6a9\uc694\uc77c"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(22,"tbody"),Nt.Wb(23,"tr"),Nt.Wb(24,"td",8),Nt.Wb(25,"div",9),Nt.Wb(26,"div",10),Nt.Rb(27,"mat-datepicker-toggle",11),Nt.Rb(28,"input",12),Nt.Rb(29,"mat-datepicker",null,13),Nt.Vb(),Nt.Wb(31,"div",14),Nt.Pc(32,"~"),Nt.Vb(),Nt.Wb(33,"div",10),Nt.Rb(34,"mat-datepicker-toggle",11),Nt.Rb(35,"input",15),Nt.Rb(36,"mat-datepicker",null,16),Nt.Vb(),Nt.Vb(),Nt.Wb(38,"div",17),Nt.Wb(39,"app-checkbox",18),Nt.fc("onChange",(function(e){return t.onCheckAllWeekday(e,"departureWeekday")})),Nt.Vb(),Nt.Nc(40,So,2,4,"ng-container",19),Nt.Vb(),Nt.Vb(),Nt.Wb(41,"td",8),Nt.Ub(42,20),Nt.Nc(43,xo,15,12,"div",21),Nt.Tb(),Nt.Wb(44,"div",22),Nt.Wb(45,"app-checkbox",18),Nt.fc("onChange",(function(e){return t.onCheckAllWeekday(e,"departureExcludeWeekday")})),Nt.Vb(),Nt.Nc(46,Po,2,4,"ng-container",19),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb()),2&e){const e=Nt.Ec(30),i=Nt.Ec(37);Nt.Cb(6),Nt.pc("formGroup",t.putForm)("connectForm",t.putFormData),Nt.Cb(20),Nt.Gb("valid-error",t.checkIsInvalid("departureFromDate")),Nt.Cb(1),Nt.pc("for",e),Nt.Cb(1),Nt.pc("matDatepicker",e),Nt.Cb(5),Nt.Gb("valid-error",t.checkIsInvalid("departureToDate")),Nt.Cb(1),Nt.pc("for",i),Nt.Cb(1),Nt.pc("matDatepicker",i)("min",t.putForm.get("departureFromDate").value),Nt.Cb(3),Nt.Gb("valid-error",t.checkIsInvalid("departureWeekday")),Nt.Cb(1),Nt.pc("binary",!0)("ngModel",t.isAllDepartureWeekday)("ngModelOptions",Nt.tc(24,wo)),Nt.Cb(1),Nt.pc("ngForOf",t.departureWeekday.controls),Nt.Cb(3),Nt.pc("ngForOf",t.departureExcludeDates.controls),Nt.Cb(1),Nt.Gb("valid-error",t.checkIsInvalid("departureExcludeWeekday")),Nt.Cb(1),Nt.pc("binary",!0)("ngModel",t.isAllDepartureExcludeWeekday)("ngModelOptions",Nt.tc(25,wo)),Nt.Cb(1),Nt.pc("ngForOf",t.departureExcludeWeekday.controls)}},directives:[r.B,r.s,r.k,zt.a,Ht.a,r.c,Xt.a,r.r,r.i,Jt.a,r.e,si.a,r.u,n.n,r.l,r.h],encapsulation:2,changeDetection:0}),e})();function Ro(e,t){if(1&e&&(Nt.Ub(0,23),Nt.Rb(1,"app-checkbox",24),Nt.Tb()),2&e){const e=t.$implicit,i=t.index,o=Nt.hc();Nt.pc("formGroupName",i),Nt.Cb(1),Nt.pc("binary",!0)("formControl",e)("label",o.weekDayLabelList[i])}}function To(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"div",25),Nt.Wb(1,"div",10),Nt.Rb(2,"mat-datepicker-toggle",11),Nt.Rb(3,"input",26),Nt.Rb(4,"mat-datepicker",null,27),Nt.Vb(),Nt.Wb(6,"div",14),Nt.Pc(7,"~"),Nt.Vb(),Nt.Wb(8,"div",10),Nt.Rb(9,"mat-datepicker-toggle",11),Nt.Rb(10,"input",28),Nt.Rb(11,"mat-datepicker",null,29),Nt.Vb(),Nt.Wb(13,"a",30),Nt.fc("click",(function(){Nt.Fc(e);const i=t.index;return Nt.hc().onChangeExcludeDates(i,"returnExcludeDates")})),Nt.Pc(14,"\ucd94\uac00\uc0ad\uc81c"),Nt.Vb(),Nt.Vb()}if(2&e){const e=t.$implicit,i=t.index,o=Nt.Ec(5),n=Nt.Ec(12);Nt.Gb("mt10",i>0),Nt.pc("formGroupName",i),Nt.Cb(2),Nt.pc("for",o),Nt.Cb(1),Nt.pc("matDatepicker",o),Nt.Cb(6),Nt.pc("for",n),Nt.Cb(1),Nt.pc("matDatepicker",n)("min",e.get("FromDate").value),Nt.Cb(3),Nt.Gb("plus",0===i)("minus",i>0)}}function _o(e,t){if(1&e&&(Nt.Ub(0,23),Nt.Rb(1,"app-checkbox",24),Nt.Tb()),2&e){const e=t.$implicit,i=t.index,o=Nt.hc();Nt.pc("formGroupName",i),Nt.Cb(1),Nt.pc("binary",!0)("formControl",e)("label",o.weekDayLabelList[i])}}const No=function(){return{standalone:!0}};let Yo=(()=>{class e{constructor(e,t){this._dataService=e,this.alertService=t,this.saveDateEvent=new Nt.n,this.weekDayLabelList=["\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0","\uc77c"],this._$unsubscribe=new V.a,this.putForm=this._dataService.generateBulkReturnForm(),this.putFormData=this._dataService.initBulkReturnFormData(),this._initSubscription()}get returnWeekday(){return this.putForm.get("returnWeekday")}get returnExcludeWeekday(){return this.putForm.get("returnExcludeWeekday")}get isAllReturnWeekday(){return this.returnWeekday.value.every(e=>e)}get isAllReturnExcludeWeekday(){return this.returnExcludeWeekday.value.every(e=>e)}get returnExcludeDates(){return this.putForm.get("returnExcludeDates")}ngOnInit(){this._initForm(),this._initState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onCheckAllWeekday(e,t){let i;switch(t){case"returnWeekday":i=this.returnWeekday;break;case"returnExcludeWeekday":i=this.returnExcludeWeekday}i.patchValue(e?[!0,!0,!0,!0,!0,!0,!0]:[!1,!1,!1,!1,!1,!1,!1])}onChangeExcludeDates(e,t){let i;switch(t){case"returnExcludeDates":i=this.returnExcludeDates}if(0===e){if(i.length>4)return void this.alertService.alert("\uc81c\uc678\uae30\uac04\uc740 \ucd5c\ub300 5\uac1c\uae4c\uc9c0 \uc801\uc6a9\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.");i.push(this._dataService.generateExcludeDate())}else i.removeAt(e)}onSubmit(){this.putForm.invalid?this._checkValid=!0:this.saveDateEvent.emit({return:this._setPutCondition()})}checkIsInvalid(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}_initForm(){}_initState(){this._checkValid=!1}_setPutCondition(){const e=this.putForm.getRawValue(),t=e.returnWeekday.map(e=>e?"1":"0").join(""),i=e.returnExcludeWeekday.map(e=>e?"1":"0").join(""),o=this._setExcludeDatesCondition(e.returnExcludeDates,"returnExclude");return Object.assign({},W.pick(e,["returnFromDate","returnToDate","returnWeekday","returnExcludeFromDate1","returnExcludeToDate1","returnExcludeFromDate2","returnExcludeToDate2","returnExcludeFromDate3","returnExcludeToDate3","returnExcludeFromDate4","returnExcludeToDate4","returnExcludeFromDate5","returnExcludeToDate5","returnExcludeWeekday"]),o,{returnWeekday:t,returnExcludeWeekday:i})}_setExcludeDatesCondition(e,t){const i={};return(null==e?void 0:e.length)>0&&e.forEach((e,o)=>{const n=t+"FromDate"+(o+1).toString(),r=t+"ToDate"+(o+1).toString();i[n]=e.FromDate||null,i[r]=e.ToDate||null}),i}_initSubscription(){Object(Yt.a)([this.putForm.get("returnFromDate").valueChanges,this.putForm.get("returnToDate").valueChanges]).pipe(Object(L.a)(this._$unsubscribe)).subscribe(()=>{this.putForm.get("returnWeekday").updateValueAndValidity()}),this.putForm.get("returnExcludeDates").valueChanges.pipe(Object(L.a)(this._$unsubscribe)).subscribe(()=>{this.putForm.get("returnExcludeWeekday").updateValueAndValidity()})}}return e.\u0275fac=function(t){return new(t||e)(Nt.Qb(Kt),Nt.Qb(Ui.a))},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-bulk-return"]],outputs:{saveDateEvent:"saveDateEvent"},decls:46,vars:26,consts:[[1,"page-item-header","mb10"],[1,"title"],[1,"control"],[1,"btn","btn-secondary","sm",3,"click"],[3,"formGroup","connectForm"],[1,"table","table-bordered","table-responsive","mt10"],["scope","col","colspan","2",1,"align-c"],["scope","col",1,"align-c"],[1,"align-c","align-t","pd10"],[1,"form-group"],[1,"input","calendar",2,"min-width","132px"],[3,"for"],["type","text","placeholder","YYYY-MM-DD","formControlName","returnFromDate",3,"matDatepicker"],["returnFromDate",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD","formControlName","returnToDate",3,"matDatepicker","min"],["returnToDate",""],["formArrayName","returnWeekday",1,"form-group","justify-content-between","mt10"],["label","\uc804\uccb4",3,"binary","ngModel","ngModelOptions","onChange"],[3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","returnExcludeDates"],["class","form-group",3,"mt10","formGroupName",4,"ngFor","ngForOf"],["formArrayName","returnExcludeWeekday",1,"form-group","justify-content-between","mt10"],[3,"formGroupName"],[3,"binary","formControl","label"],[1,"form-group",3,"formGroupName"],["type","text","placeholder","YYYY-MM-DD","formControlName","FromDate",3,"matDatepicker"],["FromDate",""],["type","text","placeholder","YYYY-MM-DD","formControlName","ToDate",3,"matDatepicker","min"],["ToDate",""],[1,"icon","xs","align-m","ml10",3,"click"]],template:function(e,t){if(1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"p",1),Nt.Pc(2,"\uadc0\uad6d\uae30\uac04/\uc694\uc77c"),Nt.Vb(),Nt.Wb(3,"div",2),Nt.Wb(4,"a",3),Nt.fc("click",(function(){return t.onSubmit()})),Nt.Pc(5,"\uc800\uc7a5"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(6,"form",4),Nt.Wb(7,"div",5),Nt.Wb(8,"table"),Nt.Wb(9,"colgroup"),Nt.Rb(10,"col"),Nt.Rb(11,"col"),Nt.Vb(),Nt.Wb(12,"thead"),Nt.Wb(13,"tr"),Nt.Wb(14,"th",6),Nt.Pc(15,"\uadc0\uad6d"),Nt.Vb(),Nt.Vb(),Nt.Wb(16,"tr"),Nt.Wb(17,"th",7),Nt.Pc(18,"\uc801\uc6a9\uae30\uac04/\uc801\uc6a9\uc694\uc77c"),Nt.Vb(),Nt.Wb(19,"th",7),Nt.Pc(20,"\uc81c\uc678\uae30\uac04/\uc801\uc6a9\uc694\uc77c"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(21,"tbody"),Nt.Wb(22,"tr"),Nt.Wb(23,"td",8),Nt.Wb(24,"div",9),Nt.Wb(25,"div",10),Nt.Rb(26,"mat-datepicker-toggle",11),Nt.Rb(27,"input",12),Nt.Rb(28,"mat-datepicker",null,13),Nt.Vb(),Nt.Wb(30,"div",14),Nt.Pc(31,"~"),Nt.Vb(),Nt.Wb(32,"div",10),Nt.Rb(33,"mat-datepicker-toggle",11),Nt.Rb(34,"input",15),Nt.Rb(35,"mat-datepicker",null,16),Nt.Vb(),Nt.Vb(),Nt.Wb(37,"div",17),Nt.Wb(38,"app-checkbox",18),Nt.fc("onChange",(function(e){return t.onCheckAllWeekday(e,"returnWeekday")})),Nt.Vb(),Nt.Nc(39,Ro,2,4,"ng-container",19),Nt.Vb(),Nt.Vb(),Nt.Wb(40,"td",8),Nt.Ub(41,20),Nt.Nc(42,To,15,12,"div",21),Nt.Tb(),Nt.Wb(43,"div",22),Nt.Wb(44,"app-checkbox",18),Nt.fc("onChange",(function(e){return t.onCheckAllWeekday(e,"returnExcludeWeekday")})),Nt.Vb(),Nt.Nc(45,_o,2,4,"ng-container",19),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb()),2&e){const e=Nt.Ec(29),i=Nt.Ec(36);Nt.Cb(6),Nt.pc("formGroup",t.putForm)("connectForm",t.putFormData),Nt.Cb(19),Nt.Gb("valid-error",t.checkIsInvalid("returnFromDate")),Nt.Cb(1),Nt.pc("for",e),Nt.Cb(1),Nt.pc("matDatepicker",e),Nt.Cb(5),Nt.Gb("valid-error",t.checkIsInvalid("returnToDate")),Nt.Cb(1),Nt.pc("for",i),Nt.Cb(1),Nt.pc("matDatepicker",i)("min",t.putForm.get("returnFromDate").value),Nt.Cb(3),Nt.Gb("valid-error",t.checkIsInvalid("returnWeekday")),Nt.Cb(1),Nt.pc("binary",!0)("ngModel",t.isAllReturnWeekday)("ngModelOptions",Nt.tc(24,No)),Nt.Cb(1),Nt.pc("ngForOf",t.returnWeekday.controls),Nt.Cb(3),Nt.pc("ngForOf",t.returnExcludeDates.controls),Nt.Cb(1),Nt.Gb("valid-error",t.checkIsInvalid("returnExcludeWeekday")),Nt.Cb(1),Nt.pc("binary",!0)("ngModel",t.isAllReturnExcludeWeekday)("ngModelOptions",Nt.tc(25,No)),Nt.Cb(1),Nt.pc("ngForOf",t.returnExcludeWeekday.controls)}},directives:[r.B,r.s,r.k,zt.a,Ht.a,r.c,Xt.a,r.r,r.i,Jt.a,r.e,si.a,r.u,n.n,r.l,r.h],encapsulation:2,changeDetection:0}),e})();function Io(e,t){if(1&e&&(Nt.Ub(0,19),Nt.Rb(1,"app-checkbox",20),Nt.Tb()),2&e){const e=t.$implicit,i=t.index,o=Nt.hc();Nt.pc("formGroupName",i),Nt.Cb(1),Nt.pc("binary",!0)("formControl",e)("label",o.weekDayLabelList[i])}}const $o=function(){return{standalone:!0}};let Go=(()=>{class e{constructor(e,t){this._dataService=e,this.alertService=t,this.saveDateEvent=new Nt.n,this.weekDayLabelList=["\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0","\uc77c"],this._$unsubscribe=new V.a,this.putForm=this._dataService.generateBulkTicketingForm(),this.putFormData=this._dataService.initBulkTicketingFormData()}get ticketingWeekday(){return this.putForm.get("ticketingWeekday")}get isAllBookWeekday(){return this.putForm.get("ticketingWeekday").value.every(e=>e)}ngOnInit(){this._initForm(),this._initState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onCheckAllWeekday(e,t){let i;switch(t){case"ticketingWeekday":i=this.ticketingWeekday}i.patchValue(e?[!0,!0,!0,!0,!0,!0,!0]:[!1,!1,!1,!1,!1,!1,!1])}onSubmit(){this.putForm.invalid?this._checkValid=!0:this.saveDateEvent.emit({ticketing:this._setPutCondition()})}checkIsInvalid(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}_initForm(){}_initState(){this._checkValid=!1}_setPutCondition(){const e=this.putForm.getRawValue(),t=e.ticketingWeekday.map(e=>e?"1":"0").join("");return Object.assign({},W.pick(e,["ticketingFromDate","ticketingToDate","ticketingWeekday"]),{ticketingWeekday:t})}}return e.\u0275fac=function(t){return new(t||e)(Nt.Qb(Kt),Nt.Qb(Ui.a))},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-bulk-ticketing"]],outputs:{saveDateEvent:"saveDateEvent"},decls:37,vars:18,consts:[[1,"page-item-header","mb10"],[1,"title"],[1,"control"],[1,"btn","btn-secondary","sm",3,"click"],[3,"formGroup","connectForm"],[1,"table","table-bordered","table-responsive","mt10"],["scope","col","colspan","2",1,"align-c"],[1,"align-c","align-t","pd10"],[1,"form-group"],[1,"input","calendar",2,"min-width","132px"],[3,"for"],["type","text","placeholder","YYYY-MM-DD","formControlName","ticketingFromDate",3,"matDatepicker"],["ticketingFromDate",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD","formControlName","ticketingToDate",3,"matDatepicker","min"],["ticketingToDate",""],["formArrayName","ticketingWeekday",1,"form-group","justify-content-between","mt10"],["label","\uc804\uccb4",3,"binary","ngModel","ngModelOptions","onChange"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],[3,"binary","formControl","label"]],template:function(e,t){if(1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"p",1),Nt.Pc(2,"\ubc1c\uad8c\uae30\uac04/\uc694\uc77c"),Nt.Vb(),Nt.Wb(3,"div",2),Nt.Wb(4,"a",3),Nt.fc("click",(function(){return t.onSubmit()})),Nt.Pc(5,"\uc800\uc7a5"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(6,"form",4),Nt.Wb(7,"div",5),Nt.Wb(8,"table"),Nt.Wb(9,"colgroup"),Nt.Rb(10,"col"),Nt.Rb(11,"col"),Nt.Vb(),Nt.Wb(12,"thead"),Nt.Wb(13,"tr"),Nt.Wb(14,"th",6),Nt.Wb(15,"sup"),Nt.Pc(16,"\ubc1c\uad8c \uc801\uc6a9\uae30\uac04/\uc801\uc6a9\uc694\uc77c"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(17,"tbody"),Nt.Wb(18,"tr"),Nt.Wb(19,"td",7),Nt.Wb(20,"div",8),Nt.Wb(21,"div",9),Nt.Rb(22,"mat-datepicker-toggle",10),Nt.Rb(23,"input",11),Nt.Rb(24,"mat-datepicker",null,12),Nt.Vb(),Nt.Wb(26,"div",13),Nt.Pc(27,"~"),Nt.Vb(),Nt.Wb(28,"div",9),Nt.Rb(29,"mat-datepicker-toggle",10),Nt.Rb(30,"input",14),Nt.Rb(31,"mat-datepicker",null,15),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(33,"td",7),Nt.Wb(34,"div",16),Nt.Wb(35,"app-checkbox",17),Nt.fc("onChange",(function(e){return t.onCheckAllWeekday(e,"ticketingWeekday")})),Nt.Vb(),Nt.Nc(36,Io,2,4,"ng-container",18),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb()),2&e){const e=Nt.Ec(25),i=Nt.Ec(32);Nt.Cb(6),Nt.pc("formGroup",t.putForm)("connectForm",t.putFormData),Nt.Cb(15),Nt.Gb("valid-error",t.checkIsInvalid("ticketingFromDate")),Nt.Cb(1),Nt.pc("for",e),Nt.Cb(1),Nt.pc("matDatepicker",e),Nt.Cb(5),Nt.Gb("valid-error",t.checkIsInvalid("ticketingToDate")),Nt.Cb(1),Nt.pc("for",i),Nt.Cb(1),Nt.pc("matDatepicker",i)("min",t.putForm.get("ticketingToDate").value),Nt.Cb(4),Nt.Gb("valid-error",t.checkIsInvalid("ticketingWeekday")),Nt.Cb(1),Nt.pc("binary",!0)("ngModel",t.isAllBookWeekday)("ngModelOptions",Nt.tc(17,$o)),Nt.Cb(1),Nt.pc("ngForOf",t.ticketingWeekday.controls)}},directives:[r.B,r.s,r.k,zt.a,Ht.a,r.c,Xt.a,r.r,r.i,Jt.a,r.e,si.a,r.u,n.n,r.l,r.h],encapsulation:2,changeDetection:0}),e})(),Uo=(()=>{class e{constructor(){this.bulkUpdateEvent=new Nt.n}ngOnInit(){this._initState()}onSubmit(e){this.bulkUpdateEvent.emit(Object.assign(Object.assign({},e),{promotionSeqs:this.promotionSeqs}))}_initState(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-bulk"]],inputs:{promotionSeqs:"promotionSeqs",discountOrUpsellList:"discountOrUpsellList",rateOrAmountList:"rateOrAmountList",maxDiscountRate:"maxDiscountRate"},outputs:{bulkUpdateEvent:"bulkUpdateEvent"},decls:17,vars:3,consts:[[1,"tab-pane","active"],[1,"page-item"],[1,"frame-wrap","both","sm"],[1,"frame",3,"saveUseYnEvent"],[1,"frame",3,"savePlanUseYnEvent"],[3,"saveDeviceEvent"],[3,"discountOrUpsellList","rateOrAmountList","maxDiscountRate","savePriceEvent"],[3,"saveDateEvent"]],template:function(e,t){1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"div",1),Nt.Wb(2,"div",2),Nt.Wb(3,"app-fl-promotion-list-bulk-use-yn",3),Nt.fc("saveUseYnEvent",(function(e){return t.onSubmit(e)})),Nt.Vb(),Nt.Wb(4,"app-fl-promotion-list-bulk-plan-use-yn",4),Nt.fc("savePlanUseYnEvent",(function(e){return t.onSubmit(e)})),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(5,"div",1),Nt.Wb(6,"app-fl-promotion-list-bulk-device",5),Nt.fc("saveDeviceEvent",(function(e){return t.onSubmit(e)})),Nt.Vb(),Nt.Vb(),Nt.Wb(7,"div",1),Nt.Wb(8,"app-fl-promotion-list-bulk-price",6),Nt.fc("savePriceEvent",(function(e){return t.onSubmit(e)})),Nt.Vb(),Nt.Vb(),Nt.Wb(9,"div",1),Nt.Wb(10,"app-fl-promotion-list-bulk-booking",7),Nt.fc("saveDateEvent",(function(e){return t.onSubmit(e)})),Nt.Vb(),Nt.Vb(),Nt.Wb(11,"div",1),Nt.Wb(12,"app-fl-promotion-list-bulk-departure",7),Nt.fc("saveDateEvent",(function(e){return t.onSubmit(e)})),Nt.Vb(),Nt.Vb(),Nt.Wb(13,"div",1),Nt.Wb(14,"app-fl-promotion-list-bulk-return",7),Nt.fc("saveDateEvent",(function(e){return t.onSubmit(e)})),Nt.Vb(),Nt.Vb(),Nt.Wb(15,"div",1),Nt.Wb(16,"app-fl-promotion-list-bulk-ticketing",7),Nt.fc("saveDateEvent",(function(e){return t.onSubmit(e)})),Nt.Vb(),Nt.Vb(),Nt.Vb()),2&e&&(Nt.Cb(8),Nt.pc("discountOrUpsellList",t.discountOrUpsellList)("rateOrAmountList",t.rateOrAmountList)("maxDiscountRate",t.maxDiscountRate))},directives:[go,Co,fo,Do,Fo,Eo,Yo,Go],encapsulation:2,changeDetection:0}),e})();function Mo(e,t){if(1&e&&(Nt.Wb(0,"tr"),Nt.Wb(1,"th",10),Nt.Pc(2),Nt.Vb(),Nt.Wb(3,"td",11),Nt.Pc(4),Nt.Vb(),Nt.Wb(5,"td",11),Nt.Pc(6),Nt.Vb(),Nt.Wb(7,"td",12),Nt.Pc(8),Nt.Vb(),Nt.Wb(9,"td",12),Nt.Pc(10),Nt.Vb(),Nt.Vb()),2&e){const e=t.$implicit;Nt.Cb(2),Nt.Qc(e.changeItemName),Nt.Cb(2),Nt.Qc(e.oldValue),Nt.Cb(2),Nt.Qc(e.newValue),Nt.Cb(2),Nt.Qc(e.changeActionName),Nt.Cb(2),Nt.Qc(e.changeDatetime)}}function Bo(e,t){if(1&e&&(Nt.Ub(0),Nt.Nc(1,Mo,11,5,"tr",9),Nt.Tb()),2&e){const e=Nt.hc();Nt.Cb(1),Nt.pc("ngForOf",e.promotionLogList)}}function qo(e,t){1&e&&(Nt.Wb(0,"td",13),Nt.Pc(1,"\uae30\ub85d\ub41c \uc774\ub825\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),Nt.Vb())}let Ko=(()=>{class e{ngOnInit(){this._initState()}_initState(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list-history"]],inputs:{promotionLogList:"promotionLogList"},decls:27,vars:2,consts:[[1,"page-item"],[1,"table","table-bordered","table-responsive","mt10"],["width","140px"],["width","370px"],["width","100px"],["width","170px"],["scope","col",1,"align-c"],[4,"ngIf","ngIfElse"],["emptyLogList",""],[4,"ngFor","ngForOf"],[1,"th-bg"],[1,"align-c","break","word-break"],[1,"align-c"],["colspan","5",1,"align-c"]],template:function(e,t){if(1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"div",1),Nt.Wb(2,"table"),Nt.Wb(3,"caption"),Nt.Pc(4," \uc774\ub825\uc870\ud68c "),Nt.Vb(),Nt.Wb(5,"colgroup"),Nt.Rb(6,"col",2),Nt.Rb(7,"col",3),Nt.Rb(8,"col",3),Nt.Rb(9,"col",4),Nt.Rb(10,"col",5),Nt.Vb(),Nt.Wb(11,"thead"),Nt.Wb(12,"tr"),Nt.Wb(13,"th",6),Nt.Pc(14,"\ud56d\ubaa9"),Nt.Vb(),Nt.Wb(15,"th",6),Nt.Pc(16,"\ubcc0\uacbd\uc804"),Nt.Vb(),Nt.Wb(17,"th",6),Nt.Pc(18,"\ubcc0\uacbd\ud6c4"),Nt.Vb(),Nt.Wb(19,"th",6),Nt.Pc(20,"\uc218\uc815\uc790"),Nt.Vb(),Nt.Wb(21,"th",6),Nt.Pc(22,"\uc218\uc815\uc2dc\uac01"),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Wb(23,"tbody"),Nt.Nc(24,Bo,2,1,"ng-container",7),Nt.Nc(25,qo,2,0,"ng-template",null,8,Nt.Oc),Nt.Vb(),Nt.Vb(),Nt.Vb(),Nt.Vb()),2&e){const e=Nt.Ec(26);Nt.Cb(24),Nt.pc("ngIf",(null==t.promotionLogList?null:t.promotionLogList.length)>0)("ngIfElse",e)}},directives:[n.o,n.n],encapsulation:2,changeDetection:0}),e})();var zo=i("G4DP"),Qo=i("7G9D"),Ho=i("bMKz"),Xo=i("kDLv");function Jo(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"app-fl-promotion-detail-airport-group",4),Nt.fc("addAirportGroupEvent",(function(t){return Nt.Fc(e),Nt.hc().onAddAirportGroupHandler(t)}))("selectAirportEvent",(function(t){return Nt.Fc(e),Nt.hc().onSelectAirportHandler(t)})),Nt.ic(1,"async"),Nt.Vb()}if(2&e){const e=Nt.hc();Nt.pc("selectedAirportGroup",e.selectedAirportGroup)("airportGroups",Nt.jc(1,2,e.airportGroupList$))}}let Zo=(()=>{class e{constructor(e,t,i){this.store=e,this.fileService=t,this._cd=i,this._$unsubscribe=new V.a,this.maxDiscountRate$=this.store.pipe(Object(l.u)(et)),this.tradeCompList$=this.store.pipe(Object(l.u)(it)),this.continentList$=this.store.pipe(Object(l.u)(ot)),this.departureArrivalTypeList$=this.store.pipe(Object(l.u)(nt)),this.fareKindList$=this.store.pipe(Object(l.u)(at)),this.paxTypeList$=this.store.pipe(Object(l.u)(lt)),this.routingTypeList$=this.store.pipe(Object(l.u)(ct)),this.deviceList$=this.store.pipe(Object(l.u)(st)),this.airlineList$=this.store.pipe(Object(l.u)(dt)),this.cabinClassCodeList$=this.store.pipe(Object(l.u)(pt)),this.classCombineTypeList$=this.store.pipe(Object(l.u)(ut)),this.airportGroupList$=this.store.pipe(Object(l.u)(bt)),this.discountOrUpsellList$=this.store.pipe(Object(l.u)(ht)),this.rateOrAmountList$=this.store.pipe(Object(l.u)(mt)),this.selectedPromotionItem$=this.store.pipe(Object(l.u)(vt)),this.selectedPromotionCondition$=this.store.pipe(Object(l.u)(Lt)),this.treeList$=this.store.pipe(Object(l.u)(jt)),this.conditionItem$=this.store.pipe(Object(l.u)(Lt)),this.selectedTraderCompCode$=this.store.pipe(Object(l.u)(Wt)),this.selectedAirlineCode$=this.store.pipe(Object(l.u)(Ft)),this.isOpenAirportGroupPopup$=this.store.pipe(Object(l.u)(St)),this.upsertPromotionConditionYn$=this.store.pipe(Object(l.u)(xt))}ngAfterContentInit(){this._initSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete(),this.store.dispatch(o.delSelectedListItemAction()),this.store.dispatch(o.changeSelectedTraderCompCodeAction({code:null})),this.store.dispatch(o.changeSelectedAirlineCodeAction({code:null}))}onClose(){this.store.dispatch(o.closeDetailPopupAction())}changeSelectedTradeCompHandler(e){this.store.dispatch(o.changeSelectedTraderCompCodeAction({code:e}))}changeSelectedAirlineHandler(e){this.store.dispatch(o.changeSelectedAirlineCodeAction({code:e}))}selectPromotionHandler(e){this.store.dispatch(o.addSelectedListItemAction({selectedItem:e}))}onOpenAirportGroupPopup(e){this.selectedAirportGroup=e,this.store.dispatch(o.openAirportGroupPopupAction())}onCloseAirportGroupPopup(){this.store.dispatch(o.closeAirportGroupPopupAction())}onAddAirportGroupHandler(e){this.store.dispatch(o.upsertAirportGroupAction({condition:e}))}onSelectAirportHandler(e){this.selectedAirportGroup=e,this.onCloseAirportGroupPopup()}upsertPromotionHandler(e){this.store.dispatch(o.upsertPromotionConditionAction({condition:e}))}_initSubscription(){this.selectedPromotionItem$.pipe(Object(L.a)(this._$unsubscribe)).subscribe(e=>{if(null==e?void 0:e.promotionSeq){const{airlineCode:t,traderCompCode:i}=e;this.promotionSeq=e.promotionSeq,this.store.dispatch(o.loadPromotionConditionAction({condition:{promotionSeq:e.promotionSeq}})),this.changeSelectedAirlineHandler(t),this.changeSelectedTradeCompHandler(i)}}),Object(Yt.a)([this.selectedTraderCompCode$,this.selectedAirlineCode$]).pipe(Object(L.a)(this._$unsubscribe)).subscribe(([e,t])=>{e&&t&&this.store.dispatch(o.loadPromotionTreeAction({condition:{traderCompCode:e,airlineCode:t}}))}),this.upsertPromotionConditionYn$.pipe(Object(j.a)(1),Object(L.a)(this._$unsubscribe)).subscribe(()=>{this.formEl.resetPriceArea()})}_loadBasisData(){this.store.dispatch(o.loadAirportGroupAction({condition:{}}))}}return e.\u0275fac=function(t){return new(t||e)(Nt.Qb(l.h),Nt.Qb(Qo.a),Nt.Qb(Nt.h))},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-detail"]],viewQuery:function(e,t){var i;1&e&&Nt.Xc(ao,!0),2&e&&Nt.Dc(i=Nt.gc())&&(t.formEl=i.first)},inputs:{promotionCardList:"promotionCardList",copyFlag:"copyFlag"},decls:19,vars:50,consts:[[1,"promotion"],[1,"frame",3,"promotionSeq","maxDiscountRate","tradeCompList","continentList","departureArrivalTypeList","promotionCardList","fareKindList","paxTypeList","routingTypeList","deviceList","airlineList","cabinClassCodeList","classCombineTypeList","rateOrAmountList","promotionCondition","copyFlag","selectedAirportGroup","openAirportGroupPopup","submitEvent"],["modalContentClass","pd-all","header","\uacf5\ud56d\uadf8\ub8f9 \uc124\uc815 \uc815\ubcf4","modalSize","sm",3,"visible","modal","visibleChange"],[3,"selectedAirportGroup","airportGroups","addAirportGroupEvent","selectAirportEvent",4,"ngIf"],[3,"selectedAirportGroup","airportGroups","addAirportGroupEvent","selectAirportEvent"]],template:function(e,t){1&e&&(Nt.Wb(0,"div",0),Nt.Wb(1,"app-fl-promotion-detail-form",1),Nt.fc("openAirportGroupPopup",(function(e){return t.onOpenAirportGroupPopup(e)}))("submitEvent",(function(e){return t.upsertPromotionHandler(e)})),Nt.ic(2,"async"),Nt.ic(3,"async"),Nt.ic(4,"async"),Nt.ic(5,"async"),Nt.ic(6,"async"),Nt.ic(7,"async"),Nt.ic(8,"async"),Nt.ic(9,"async"),Nt.ic(10,"async"),Nt.ic(11,"async"),Nt.ic(12,"async"),Nt.ic(13,"async"),Nt.ic(14,"async"),Nt.Vb(),Nt.Vb(),Nt.Wb(15,"app-dialog",2),Nt.fc("visibleChange",(function(){return t.onCloseAirportGroupPopup()})),Nt.ic(16,"async"),Nt.Nc(17,Jo,2,4,"app-fl-promotion-detail-airport-group",3),Nt.ic(18,"async"),Nt.Vb()),2&e&&(Nt.Cb(1),Nt.pc("promotionSeq",t.promotionSeq)("maxDiscountRate",Nt.jc(2,20,t.maxDiscountRate$))("tradeCompList",Nt.jc(3,22,t.tradeCompList$))("continentList",Nt.jc(4,24,t.continentList$))("departureArrivalTypeList",Nt.jc(5,26,t.departureArrivalTypeList$))("promotionCardList",t.promotionCardList)("fareKindList",Nt.jc(6,28,t.fareKindList$))("paxTypeList",Nt.jc(7,30,t.paxTypeList$))("routingTypeList",Nt.jc(8,32,t.routingTypeList$))("deviceList",Nt.jc(9,34,t.deviceList$))("airlineList",Nt.jc(10,36,t.airlineList$))("cabinClassCodeList",Nt.jc(11,38,t.cabinClassCodeList$))("classCombineTypeList",Nt.jc(12,40,t.classCombineTypeList$))("rateOrAmountList",Nt.jc(13,42,t.rateOrAmountList$))("promotionCondition",Nt.jc(14,44,t.selectedPromotionCondition$))("copyFlag",t.copyFlag)("selectedAirportGroup",t.selectedAirportGroup),Nt.Cb(14),Nt.pc("visible",Nt.jc(16,46,t.isOpenAirportGroupPopup$))("modal",!0),Nt.Cb(2),Nt.pc("ngIf",Nt.jc(18,48,t.isOpenAirportGroupPopup$)))},directives:[ao,Xo.a,n.o,mo],pipes:[n.b],encapsulation:2,changeDetection:0}),e})();function en(e,t){if(1&e&&(Nt.Wb(0,"span"),Nt.Pc(1),Nt.Vb()),2&e){const e=t.$implicit;Nt.Cb(1),Nt.Tc("","D"===e.adultDiscountOrUpsell?"-":"","",e.adultAppliedValue,"","R"===e.adultRateOrAmount?"%":"\uc6d0","")}}function tn(e,t){if(1&e&&(Nt.Wb(0,"span"),Nt.Pc(1),Nt.Vb()),2&e){const e=t.$implicit;Nt.Cb(1),Nt.Tc("","D"===e.adultAddDiscountOrUpsell?"-":"","",e.adultAddAppliedValue,"","R"===e.adultAddRateOrAmount?"%":"\uc6d0","")}}function on(e,t){if(1&e&&(Nt.Wb(0,"span"),Nt.Pc(1),Nt.Vb()),2&e){const e=t.$implicit;Nt.Cb(1),Nt.Tc("","D"===e.childDiscountOrUpsell?"-":"","",e.childAppliedValue,"","R"===e.childRateOrAmount?"%":"\uc6d0","")}}function nn(e,t){if(1&e&&(Nt.Wb(0,"span"),Nt.Pc(1),Nt.Vb()),2&e){const e=t.$implicit;Nt.Cb(1),Nt.Tc("","D"===e.childAddDiscountOrUpsell?"-":"","",e.childAddAppliedValue,"","R"===e.childAddRateOrAmount?"%":"\uc6d0","")}}function rn(e,t){if(1&e&&(Nt.Rb(0,"app-fl-promotion-detail",14),Nt.ic(1,"async")),2&e){const e=Nt.hc();Nt.pc("copyFlag",e.copyFlag)("promotionCardList",Nt.jc(1,2,e.promotionCardList$))}}function an(e,t){if(1&e){const e=Nt.Xb();Nt.Wb(0,"app-fl-promotion-list-bulk",15),Nt.fc("bulkUpdateEvent",(function(t){return Nt.Fc(e),Nt.hc().bulkUpdateHandler(t)})),Nt.ic(1,"async"),Nt.ic(2,"async"),Nt.ic(3,"async"),Nt.Vb()}if(2&e){const e=Nt.hc();Nt.pc("promotionSeqs",e.checkedPromotionSeqs)("discountOrUpsellList",Nt.jc(1,4,e.discountOrUpsellList$))("rateOrAmountList",Nt.jc(2,6,e.rateOrAmountList$))("maxDiscountRate",Nt.jc(3,8,e.maxDiscountRate$))}}function ln(e,t){if(1&e&&(Nt.Rb(0,"app-fl-promotion-list-history",16),Nt.ic(1,"async")),2&e){const e=Nt.hc();Nt.pc("promotionLogList",Nt.jc(1,1,e.promotionLogList$))}}const cn=function(e,t,i,o){return{adultAppliedValueTpl:e,adultAddAppliedValueTpl:t,childAppliedValueTpl:i,childAddAppliedValueTpl:o}};let sn=(()=>{class e{constructor(e,t,i,o,n,r){this.store=e,this._dataService=t,this._fileService=i,this.alertService=o,this.UserConditionService=n,this.authStore=r,this._$unsubscribe=new V.a,this.copyFlag=!1,this.maxDiscountRate$=this.store.pipe(Object(l.u)(et)),this.rangeTypeList$=this.store.pipe(Object(l.u)(tt)),this.tradeCompList$=this.store.pipe(Object(l.u)(it)),this.continentList$=this.store.pipe(Object(l.u)(ot)),this.departureArrivalTypeList$=this.store.pipe(Object(l.u)(nt)),this.promotionCardList$=this.store.pipe(Object(l.u)(rt)),this.fareKindList$=this.store.pipe(Object(l.u)(at)),this.paxTypeList$=this.store.pipe(Object(l.u)(lt)),this.routingTypeList$=this.store.pipe(Object(l.u)(ct)),this.deviceList$=this.store.pipe(Object(l.u)(st)),this.discountOrUpsellList$=this.store.pipe(Object(l.u)(ht)),this.rateOrAmountList$=this.store.pipe(Object(l.u)(mt)),this.cabinClassCodeList$=this.store.pipe(Object(l.u)(pt)),this.searchCondition$=this.store.pipe(Object(l.u)(gt)),this.listPageSize$=this.store.pipe(Object(l.u)(kt)),this.loading$=this.store.pipe(Object(l.u)(Ct)),this.reloadYn$=this.store.pipe(Object(l.u)(ft)),this.gridDataList$=this.store.pipe(Object(l.u)(At)),this.isOpenDetailPopup$=this.store.pipe(Object(l.u)(Ot)),this.isOpenBulkUpdatePopup$=this.store.pipe(Object(l.u)(yt)),this.selectedListItem$=this.store.pipe(Object(l.u)(vt)),this.promotionLogList$=this.store.pipe(Object(l.u)(Dt)),this.isOpenLogPopup$=this.store.pipe(Object(l.u)(Vt)),this.gridState$=e.pipe(Object(l.u)(Pt)),this.gridCheckedState$=e.pipe(Object(l.u)(wt)),this.storeId$=this.authStore.pipe(Object(l.u)(Et.o)),this.columns=this._dataService.generateGridColumns(),this._initSubscription()}ngAfterContentInit(){this._requestCommonDetailCodes(),this._initState()}ngOnInit(){this.storeId$.subscribe(e=>this._storeId=e),this.initSearchCondition()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete(),this.store.dispatch(o.initMainListAction()),this.store.dispatch(o.setGridStateAction({gridState:this.gridEl.thisGridState})),this.store.dispatch(o.setGridCheckedStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}clickSearchHandler(e){const t=this._setRequestSearchCondition(e);this.store.dispatch(o.changeListSearchConditionAction({searchCondition:e})),this.store.dispatch(o.loadMainListAction({condition:t}))}clickResetHandler(){const e=this._dataService.initListSearchForm();this.store.dispatch(o.changeListSearchConditionAction({searchCondition:e}))}clickAddHandler(){this.openUpsertPopup()}clickHistoryHandler(){const e=this.gridEl.checkedDataList;this.checkedPromotionSeqs=(null==e?void 0:e.length)>0?e.map(e=>e.promotionSeq):null,e&&0!==e.length?e.length>1?this.alertService.alert("Only one item can be inquired at a time."):(this.store.dispatch(o.loadPromotionLogListAction({condition:{promotionSeq:e[0].promotionSeq}})),this.openPromotionLogPopup()):this.alertService.alert("There are no items selected.")}clickBulkUpdateHandler(){var e;const t=this.gridEl.checkedDataList;this.checkedPromotionSeqs=(null==t?void 0:t.length)>0?t.map(e=>e.promotionSeq):null,(null===(e=this.checkedPromotionSeqs)||void 0===e?void 0:e.length)>0?this.openBulkUpdatePopup():this.alertService.alert("There are no items selected.")}clickCopyHandler(){const e=this.gridEl.checkedDataList;this.checkedPromotionSeqs=(null==e?void 0:e.length)>0?e.map(e=>e.promotionSeq):null,e&&0!==e.length?e.length>1?this.alertService.alert("You can only copy one item at a time."):(this.store.dispatch(o.addSelectedListItemAction({selectedItem:W.cloneDeep(e[0])})),this.copyFlag=!0,this.openUpsertPopup()):this.alertService.alert("There are no items selected.")}clickExcelHandler(){this.excelDownloadHandler()}clickPageSizeHandler(e){this.store.dispatch(o.changeListPageSizeAction({pageSize:e}))}dbClickRowHandler(e){this.store.dispatch(o.addSelectedListItemAction({selectedItem:W.cloneDeep(e)})),this.openUpsertPopup()}openUpsertPopup(){this.store.dispatch(o.openDetailPopupAction())}closeUpsertPopup(){this.copyFlag=!1,this.store.dispatch(o.closeDetailPopupAction()),this.store.dispatch(o.delSelectedListItemAction()),this.store.dispatch(o.clearPromotionConditionAction())}openBulkUpdatePopup(){this.store.dispatch(o.openBulkUpdatePopupAction())}closeBulkUpdatePopup(){this.store.dispatch(o.closeBulkUpdatePopupAction())}openPromotionLogPopup(){this.store.dispatch(o.openPromotionLogPopupAction())}closePromotionLogPopup(){this.store.dispatch(o.closePromotionLogPopupAction())}bulkUpdateHandler(e){this.store.dispatch(o.bulkUpdateAction({condition:e}))}excelDownloadHandler(){const e=this.searchFormEl.setSearchCondition();this._fileService.fileDownload({url:_t.excelDownload,filename:"Flight Promotion List",type:"excel",params:e,requestMethod:"post"})}_requestCommonDetailCodes(){this.store.dispatch(o.loadMaxDiscountRateAction({condition:{masterCode:"FL061"}})),this.store.dispatch(o.loadRangeTypeAction({condition:{masterCode:"FL059"}})),this.store.dispatch(o.loadTradeCompAction({condition:{compTypeCodes:["CMP01","CMP03"],limits:[0,1e3]}})),this.store.dispatch(o.loadContinentAction({condition:{parentOnlyYn:!0}})),this.store.dispatch(o.loadDepartureArrivalTypeAction({condition:{masterCode:"FL005"}})),this.store.dispatch(o.loadPromotionCardAction({condition:{}})),this.store.dispatch(o.loadFareKindAction({condition:{masterCode:"BS030"}})),this.store.dispatch(o.loadRoutingTypeAction({condition:{masterCode:"BS012"}})),this.store.dispatch(o.loadPaxTypeAction({condition:{masterCode:"FL003"}})),this.store.dispatch(o.loadDeviceAction({condition:{masterCode:"BS037"}})),this.store.dispatch(o.loadAirlineAction({condition:{masterCode:"FL051"}})),this.store.dispatch(o.loadCabinClassAction({condition:{masterCode:"FL001"}})),this.store.dispatch(o.loadClassCombineTypeAction({condition:{masterCode:"FL050"}}))}_initSubscription(){this.reloadYn$.pipe(Object(j.a)(1),Object(L.a)(this._$unsubscribe)).subscribe(()=>{this.searchFormEl.onSubmit()})}_setRequestSearchCondition(e){const t=W.cloneDeep(e);return t.promotionCards=t.promotionCards?[{cardCode:t.promotionCards}]:t.promotionCards,t.cabinClassCodes=t.cabinClassCodes?[t.cabinClassCodes]:t.cabinClassCodes,t}_initState(){}initSearchCondition(){if(this.searchCondition$.subscribe(e=>this._searchCondition=e),this.gridDataList$.subscribe(e=>this._searchGridDataList=e),0===W.size(this._searchCondition)&&0===W.size(this._searchGridDataList)){const e=this._dataService.initListSearchForm(),t=this.UserConditionService.selectSearchSetting(e,this._storeId);this.store.dispatch(o.changeListSearchConditionAction({searchCondition:t[0]}))}}}return e.\u0275fac=function(t){return new(t||e)(Nt.Qb(l.h),Nt.Qb(Kt),Nt.Qb(Qo.a),Nt.Qb(Ui.a),Nt.Qb(Ho.a),Nt.Qb(l.h))},e.\u0275cmp=Nt.Kb({type:e,selectors:[["app-fl-promotion-list"]],viewQuery:function(e,t){var i;1&e&&(Nt.Xc(ni,!0),Nt.Xc(zo.a,!0)),2&e&&(Nt.Dc(i=Nt.gc())&&(t.searchFormEl=i.first),Nt.Dc(i=Nt.gc())&&(t.gridEl=i.first))},decls:44,vars:90,consts:[[3,"searchCondition","rangeTypeList","tradeCompList","continentList","promotionCardList","fareKindList","paxTypeList","routingTypeList","deviceList","discountOrUpsellList","rateOrAmountList","cabinClassCodeList","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","clickAddEvent","clickHistoryEvent","clickBulkUpdateEvent","clickCopyEvent","clickExcelEvent","changePageSizeEvent"],["adultAppliedValueTpl",""],["adultAddAppliedValueTpl",""],["childAppliedValueTpl",""],["childAddAppliedValueTpl",""],[3,"gridLoading","gridState","checkedState","columns","pageSize","checkboxUseYn","templates","dataList","dbClickRowEvent"],["gridBasis",""],["header","Flight Promotion Detail","modalContentClass","pd-all","modalSize","lg",3,"maximizable","visible","modal","visibleChange"],[3,"copyFlag","promotionCardList",4,"ngIf"],["header","\uc77c\uad04 \ubcc0\uacbd \uc815\ubcf4","modalSize","lg",3,"visible","modal","visibleChange"],[3,"promotionSeqs","discountOrUpsellList","rateOrAmountList","maxDiscountRate","bulkUpdateEvent",4,"ngIf"],["modalContentClass","pd-all","header","\uc774\ub825\uc870\ud68c","modalSize","md",3,"visible","modal","visibleChange"],[3,"promotionLogList",4,"ngIf"],[3,"copyFlag","promotionCardList"],[3,"promotionSeqs","discountOrUpsellList","rateOrAmountList","maxDiscountRate","bulkUpdateEvent"],[3,"promotionLogList"]],template:function(e,t){if(1&e&&(Nt.Wb(0,"app-fl-promotion-list-search",0),Nt.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),Nt.ic(1,"async"),Nt.ic(2,"async"),Nt.ic(3,"async"),Nt.ic(4,"async"),Nt.ic(5,"async"),Nt.ic(6,"async"),Nt.ic(7,"async"),Nt.ic(8,"async"),Nt.ic(9,"async"),Nt.ic(10,"async"),Nt.ic(11,"async"),Nt.ic(12,"async"),Nt.Vb(),Nt.Wb(13,"app-fl-promotion-list-control",1),Nt.fc("clickAddEvent",(function(){return t.clickAddHandler()}))("clickHistoryEvent",(function(){return t.clickHistoryHandler()}))("clickBulkUpdateEvent",(function(){return t.clickBulkUpdateHandler()}))("clickCopyEvent",(function(){return t.clickCopyHandler()}))("clickExcelEvent",(function(){return t.clickExcelHandler()}))("changePageSizeEvent",(function(e){return t.clickPageSizeHandler(e)})),Nt.ic(14,"async"),Nt.ic(15,"async"),Nt.ic(16,"async"),Nt.Vb(),Nt.Nc(17,en,2,3,"ng-template",null,2,Nt.Oc),Nt.Nc(19,tn,2,3,"ng-template",null,3,Nt.Oc),Nt.Nc(21,on,2,3,"ng-template",null,4,Nt.Oc),Nt.Nc(23,nn,2,3,"ng-template",null,5,Nt.Oc),Nt.Wb(25,"app-grid-basis",6,7),Nt.fc("dbClickRowEvent",(function(e){return t.dbClickRowHandler(e)})),Nt.ic(27,"async"),Nt.ic(28,"async"),Nt.ic(29,"async"),Nt.ic(30,"async"),Nt.ic(31,"async"),Nt.Vb(),Nt.Wb(32,"app-dialog",8),Nt.fc("visibleChange",(function(){return t.closeUpsertPopup()})),Nt.ic(33,"async"),Nt.Nc(34,rn,2,4,"app-fl-promotion-detail",9),Nt.ic(35,"async"),Nt.Vb(),Nt.Wb(36,"app-dialog",10),Nt.fc("visibleChange",(function(){return t.closeBulkUpdatePopup()})),Nt.ic(37,"async"),Nt.Nc(38,an,4,10,"app-fl-promotion-list-bulk",11),Nt.ic(39,"async"),Nt.Vb(),Nt.Wb(40,"app-dialog",12),Nt.fc("visibleChange",(function(){return t.closePromotionLogPopup()})),Nt.ic(41,"async"),Nt.Nc(42,ln,2,3,"app-fl-promotion-list-history",13),Nt.ic(43,"async"),Nt.Vb()),2&e){const e=Nt.Ec(18),i=Nt.Ec(20),o=Nt.Ec(22),n=Nt.Ec(24);Nt.pc("searchCondition",Nt.jc(1,33,t.searchCondition$))("rangeTypeList",Nt.jc(2,35,t.rangeTypeList$))("tradeCompList",Nt.jc(3,37,t.tradeCompList$))("continentList",Nt.jc(4,39,t.continentList$))("promotionCardList",Nt.jc(5,41,t.promotionCardList$))("fareKindList",Nt.jc(6,43,t.fareKindList$))("paxTypeList",Nt.jc(7,45,t.paxTypeList$))("routingTypeList",Nt.jc(8,47,t.routingTypeList$))("deviceList",Nt.jc(9,49,t.deviceList$))("discountOrUpsellList",Nt.jc(10,51,t.discountOrUpsellList$))("rateOrAmountList",Nt.jc(11,53,t.rateOrAmountList$))("cabinClassCodeList",Nt.jc(12,55,t.cabinClassCodeList$)),Nt.Cb(13),Nt.pc("loading",Nt.jc(14,57,t.loading$))("currentPageSize",Nt.jc(15,59,t.listPageSize$))("totalCount",Nt.jc(16,61,t.gridDataList$).length),Nt.Cb(12),Nt.pc("gridLoading",Nt.jc(27,63,t.loading$))("gridState",Nt.jc(28,65,t.gridState$))("checkedState",Nt.jc(29,67,t.gridCheckedState$))("columns",t.columns)("pageSize",Nt.jc(30,69,t.listPageSize$))("checkboxUseYn",!0)("templates",Nt.xc(85,cn,e,i,o,n))("dataList",Nt.jc(31,71,t.gridDataList$)),Nt.Cb(7),Nt.pc("maximizable",!0)("visible",Nt.jc(33,73,t.isOpenDetailPopup$))("modal",!0),Nt.Cb(2),Nt.pc("ngIf",Nt.jc(35,75,t.isOpenDetailPopup$)),Nt.Cb(2),Nt.pc("visible",Nt.jc(37,77,t.isOpenBulkUpdatePopup$))("modal",!0),Nt.Cb(2),Nt.pc("ngIf",Nt.jc(39,79,t.isOpenBulkUpdatePopup$)),Nt.Cb(2),Nt.pc("visible",Nt.jc(41,81,t.isOpenLogPopup$))("modal",!0),Nt.Cb(2),Nt.pc("ngIf",Nt.jc(43,83,t.isOpenLogPopup$))}},directives:[ni,ri,zo.a,Xo.a,n.o,Zo,Uo,Ko],pipes:[n.b],encapsulation:2,changeDetection:0}),e})();const dn=[{path:"",component:sn,data:{title:"\ud56d\uacf5 \ud504\ub85c\ubaa8\uc158 \ub9ac\uc2a4\ud2b8"}}];let pn=(()=>{class e{}return e.\u0275mod=Nt.Ob({type:e}),e.\u0275inj=Nt.Nb({factory:function(t){return new(t||e)},imports:[[D.f.forChild(dn)],D.f]}),e})();var un=i("bOdf"),bn=i("zp1y"),hn=i("lJxs"),mn=i("JIr8"),gn=i("vkgz"),Cn=i("IzEk"),fn=i("Xb6A"),kn=i("AtUx");let vn=(()=>{class e{constructor(e,t,i,n,r,c){this._actions$=e,this._apiService=t,this._errorService=i,this.loader=n,this.alertService=r,this.store=c,this.loadMaxDiscountRate$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadMaxDiscountRateAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.maxDiscountRate$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getCommonDetailCodeList(e).pipe(Object(hn.a)(e=>{if(W.isEmpty(e))return o.loadMaxDiscountRateSuccessAction({dataResult:100});{const t=W.parseInt(e[0].detailCodeNameEn);return o.loadMaxDiscountRateSuccessAction({dataResult:t})}}),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadMaxDiscountRateSuccessAction({dataResult:W.cloneDeep(i)}))))),this.loadDateRangeType$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadRangeTypeAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.rangeTypeList$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getCommonDetailCodeList(e).pipe(Object(hn.a)(e=>o.loadRangeTypeSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadRangeTypeSuccessAction({dataList:W.cloneDeep(i)}))))),this.loadTradeComp$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadTradeCompAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.tradeCompList$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getCommonComp(e).pipe(Object(hn.a)(e=>o.loadTradeCompSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadTradeCompSuccessAction({dataList:W.cloneDeep(i)}))))),this.loadContinentList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadContinentAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.continentList$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getContinentList(e).pipe(Object(hn.a)(e=>o.loadContinentSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadContinentSuccessAction({dataList:W.cloneDeep(i)}))))),this.loadDepartureArrivalTypeList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadDepartureArrivalTypeAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.departureArrivalTypeList$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getCommonDetailCodeList(e).pipe(Object(hn.a)(e=>o.loadDepartureArrivalTypeSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadDepartureArrivalTypeSuccessAction({dataList:W.cloneDeep(i)}))))),this.loadFareKindList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadFareKindAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.fareKindList$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getCommonDetailCodeList(e).pipe(Object(hn.a)(e=>o.loadFareKindSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadFareKindSuccessAction({dataList:W.cloneDeep(i)}))))),this.loadRoutingTypeList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadRoutingTypeAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.routingTypeList$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getCommonDetailCodeList(e).pipe(Object(hn.a)(e=>o.loadRoutingTypeSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadRoutingTypeSuccessAction({dataList:W.cloneDeep(i)}))))),this.loadPaxTypeList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadPaxTypeAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.paxTypeList$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getCommonDetailCodeList(e).pipe(Object(hn.a)(e=>o.loadPaxTypeSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadPaxTypeSuccessAction({dataList:W.cloneDeep(i)}))))),this.loadDeviceList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadDeviceAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.deviceList$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getCommonDetailCodeList(e).pipe(Object(hn.a)(e=>o.loadDeviceSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadDeviceSuccessAction({dataList:W.cloneDeep(i)}))))),this.loadAirlineList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadAirlineAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.airlineList$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getCommonDetailCodeList(e).pipe(Object(hn.a)(e=>o.loadAirlineSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadAirlineSuccessAction({dataList:W.cloneDeep(i)}))))),this.loadCabinClassCodeList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadCabinClassAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.cabinClassCodeList$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getCommonDetailCodeList(e).pipe(Object(hn.a)(e=>o.loadCabinClassSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadCabinClassSuccessAction({dataList:W.cloneDeep(i)}))))),this.loadClassCombineTypeList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadClassCombineTypeAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.classCombineTypeList$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getCommonDetailCodeList(e).pipe(Object(hn.a)(e=>o.loadClassCombineTypeSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadClassCombineTypeSuccessAction({dataList:W.cloneDeep(i)}))))),this.loadCardBrandList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadPromotionCardAction),Object(un.a)(e=>Object(It.a)(e).pipe(Object(bn.a)(this.cardBrandList$))),Object(Gt.a)(([{condition:e,isForceLoad:t},i])=>!0===t||null===i?this._apiService.getCarBrandList(e).pipe(Object(hn.a)(e=>o.loadPromotionCardSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[]))):Object(It.a)(o.loadPromotionCardSuccessAction({dataList:W.cloneDeep(i)}))))),this.loadAirportGroupList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadAirportGroupAction),Object(Gt.a)(({condition:e})=>this._apiService.getAirportGroupList(e).pipe(Object(hn.a)(e=>o.loadAirportGroupSuccessAction({dataList:e})),Object(mn.a)(e=>(this._catchErr(e,"List lookup failed."),[])))))),this.loadMainList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadMainListAction),Object(Gt.a)(({condition:e})=>this._apiService.getMainList(e).pipe(Object(hn.a)(e=>o.loadMainListSuccessAction({dataList:e})),Object(mn.a)(e=>{const t="Promotion list lookup failed. Please try again in a momentarily.",i=[o.loadMainListFailureAction({error:t})];return this._catchErr(e,t,i),[]}))))),this.loadPromotionLogList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadPromotionLogListAction),Object(Gt.a)(({condition:e})=>this._apiService.getPromotionLog(e).pipe(Object(hn.a)(e=>o.loadPromotionLogListSuccessAction({dataList:e})),Object(mn.a)(e=>{const t="The promotion list history retrieval failed, please try again later.",i=[o.loadPromotionLogListFailureAction({error:t}),o.closePromotionLogPopupAction()];return this._catchErr(e,t,i),[]}))))),this.bulkUpdate$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.bulkUpdateAction),Object(Gt.a)(({condition:e})=>this._apiService.bulkUpdatePromotions(e).pipe(Object(hn.a)(e=>({succeedYn:!0,updatedList:e})),Object(mn.a)(e=>Object(It.a)({succeedYn:!1,error:e})))),Object(gn.a)(({succeedYn:e,updatedList:t,error:i})=>{if(e){const e="The fix is complete.",i=[o.bulkUpdateSuccessAction({dataList:t})];this._runPage(e,i)}else{const e="Modification failed.",t=[o.bulkUpdateFailureAction({error:e})];this._catchErr(i,e,t)}})),{dispatch:!1}),this.copy$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.copyAction),Object(Gt.a)(({condition:e})=>this._apiService.copyPromotions(e).pipe(Object(hn.a)(e=>({succeedYn:!0,insertedList:e})),Object(mn.a)(e=>(console.error(e),Object(It.a)({succeedYn:!1,error:e}))))),Object(gn.a)(({succeedYn:e,insertedList:t,error:i})=>{if(e){const e="Copy completed successfully";this.store.pipe(Object(l.u)(At),Object(Cn.a)(1)).subscribe(i=>{t[0].rowid=i.length;const n=[o.copySuccessAction({dataList:t})];this._runPage(e,n)})}else{const e="Copy failed.",t=[o.copyFailureAction({error:e})];this._catchErr(i,e,t)}})),{dispatch:!1}),this.loadTreeList$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadPromotionTreeAction),Object(Gt.a)(({condition:e})=>this._apiService.getTreeList(e).pipe(Object(hn.a)(e=>o.loadPromotionTreeSuccessAction({dataList:e})),Object(mn.a)(e=>{const t="Promotion list lookup failed. Please try again in a momentarily.",i=[o.loadPromotionTreeFailureAction({error:t})];return this._catchErr(e,t,i),[]}))))),this.loadConditionItem$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.loadPromotionConditionAction),Object(Gt.a)(({condition:e})=>this._apiService.getConditionItem(e).pipe(Object(hn.a)(e=>o.loadPromotionConditionSuccessAction({dataResult:e})),Object(mn.a)(e=>{const t="The promotion details lookup failed, please try again later.",i=[o.loadPromotionConditionFailureAction({error:t})];return this._catchErr(e,t,i),[]}))))),this.upsertAirportGroup$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.upsertAirportGroupAction),Object(Gt.a)(({condition:e})=>this._apiService.upsertAirportGroup(e).pipe(Object(hn.a)(e=>({succeedYn:!0,upsertItem:e})),Object(mn.a)(e=>Object(It.a)({succeedYn:!1,error:e})))),Object(gn.a)(({succeedYn:e,error:t})=>{if(e){const e="Your save is complete.",t=[o.loadAirportGroupAction({condition:{}})];this._runPage(e,t)}else{const e="Failed to save.",i=[o.upsertAirportGroupFailureAction({error:e})];this._catchErr(t,e,i)}})),{dispatch:!1}),this.upsertPromotionCondition$=Object(a.c)(()=>this._actions$.pipe(Object(a.d)(o.upsertPromotionConditionAction),Object(Gt.a)(({condition:e})=>this._apiService.upsertPromotionCondition(e).pipe(Object(hn.a)(e=>({succeedYn:!0,upsertList:e})),Object(mn.a)(e=>Object(It.a)({succeedYn:!1,error:e})))),Object(gn.a)(({succeedYn:e,upsertList:t,error:i})=>{if(e){const e="Your save is complete.",i=[o.upsertPromotionConditionSuccessAction({dataList:t})];this._runPage(e,i)}else{const e="Failed to save.",t=[o.upsertPromotionConditionFailureAction({error:e})];this._catchErr(i,e,t)}})),{dispatch:!1}),this.listSearchCondition$=this.store.pipe(Object(l.u)(gt)),this.maxDiscountRate$=this.store.pipe(Object(l.u)(et)),this.rangeTypeList$=this.store.pipe(Object(l.u)(tt)),this.tradeCompList$=this.store.pipe(Object(l.u)(it)),this.continentList$=this.store.pipe(Object(l.u)(ot)),this.departureArrivalTypeList$=this.store.pipe(Object(l.u)(nt)),this.fareKindList$=this.store.pipe(Object(l.u)(at)),this.routingTypeList$=this.store.pipe(Object(l.u)(ct)),this.paxTypeList$=this.store.pipe(Object(l.u)(lt)),this.deviceList$=this.store.pipe(Object(l.u)(st)),this.airlineList$=this.store.pipe(Object(l.u)(dt)),this.cabinClassCodeList$=this.store.pipe(Object(l.u)(pt)),this.classCombineTypeList$=this.store.pipe(Object(l.u)(ut)),this.cardBrandList$=this.store.pipe(Object(l.u)(rt))}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this.store.dispatch(e)})}:()=>{}})}_catchErr(e,t,i){const o=this._errorService.errorHandler(e,t);W.isNil(o)||(W.isNil(o.accept)&&(o.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(e=>{this.store.dispatch(e)})}:()=>{}),this.alertService.alert(o))}}return e.\u0275fac=function(t){return new(t||e)(Nt.bc(a.a),Nt.bc(Mt),Nt.bc(fn.a),Nt.bc(kn.a),Nt.bc(Ui.a),Nt.bc(l.h))},e.\u0275prov=Nt.Mb({token:e,factory:e.\u0275fac}),e})();const On=[sn,Zo],An=[ni,ri,Si,Gi,ao,mo,Yi,Uo,go,Co,fo,Do,Fo,Eo,Yo,Go,Ko];let yn=(()=>{class e{}return e.\u0275mod=Nt.Ob({type:e}),e.\u0275inj=Nt.Nb({factory:function(t){return new(t||e)},imports:[[n.c,r.m,r.w,c.m,s.a,d.a,p.a,k.a,u.a,b.a,h.a,m.a,g.a,C.a,f.a,O.a,A.a,v.a,y.a,pn,l.j.forFeature("flPromotion",Xe),a.b.forFeature([vn])]]}),e})()},Onn4:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var o=i("fXoL"),n=i("3Pt+"),r=i("ofXK");const a=["rb"],l=function(){return{radio:!0}},c={provide:n.p,useExisting:Object(o.U)(()=>s),multi:!0};let s=(()=>{class e{constructor(e){this.cd=e,this.onClick=new o.n,this.onFocus=new o.n,this.onBlur=new o.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}handleClick(e,t,i){e.preventDefault(),this.disabled||(this.select(e),i&&t.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.onClick.emit(e))}writeValue(e){this.checked=e===this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}onChange(e){this.select(e)}}return e.\u0275fac=function(t){return new(t||e)(o.Qb(o.h))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-radio"]],viewQuery:function(e,t){var i;1&e&&o.Kc(a,!0),2&e&&o.Dc(i=o.gc())&&(t.inputViewChild=i.first)},inputs:{value:"value",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",checked:"checked"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[o.Bb([c])],decls:5,vars:11,consts:[[3,"ngClass","click"],["type","radio",1,"radio-control-input",3,"checked","disabled","change","focus","blur"],["rb",""],[1,"radio-control-text"]],template:function(e,t){1&e&&(o.Wb(0,"label",0),o.fc("click",(function(e){return t.select(e)})),o.Wb(1,"input",1,2),o.fc("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onInputFocus(e)}))("blur",(function(e){return t.onInputBlur(e)})),o.Vb(),o.Wb(3,"span",3),o.Pc(4),o.Vb(),o.Vb()),2&e&&(o.Eb(t.styleClass),o.pc("ngClass",o.tc(10,l)),o.Cb(1),o.pc("checked",t.checked)("disabled",t.disabled),o.Db("id",t.inputId)("name",t.name)("value",t.value)("tabindex",t.tabindex),o.Cb(3),o.Qc(t.label))},directives:[r.l],encapsulation:2}),e})()},U6NN:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var o=i("fXoL"),n=i("3Pt+"),r=i("LvDl"),a=i("ofXK");function l(e,t){if(1&e&&(o.Wb(0,"option",3),o.Pc(1),o.Vb()),2&e){const e=o.hc();o.pc("ngValue",null),o.Cb(1),o.Qc(e.useAllOptionName)}}function c(e,t){if(1&e&&(o.Wb(0,"option",3),o.Pc(1),o.Vb()),2&e){const e=t.$implicit,i=o.hc();o.pc("ngValue",e),o.Cb(1),o.Qc(i.displayKey?e[i.displayKey]:e)}}const s={provide:n.p,useExisting:Object(o.U)(()=>d),multi:!0};let d=(()=>{class e{constructor(e,t,i,n){this.el=e,this.renderer=t,this.cd=i,this.zone=n,this.dataKey="value",this.displayKey="label",this.useAllOptionYn=!0,this.useAllOptionName="All",this.onChange=new o.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get invalid(){return this.isInvalid}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get options(){return this._options}set options(e){this._options=e,this.updateSelectedOption(this.value)}ngOnInit(){this.updateSelectedOption(null)}ngOnDestroy(){}compareFn(e,t){return this.dataKey?e[this.dataKey]===t[this.dataKey]:e===t}selectItem(e){this.selectedOption=e,this.value=this._getValue(e),this.onModelChange(this.value),this.onChange.emit({value:this.value,option:e})}writeValue(e){this.value=e,this.updateSelectedOption(e),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}updateSelectedOption(e){this.selectedOption=this._findOption(e,this.options)}_findOption(e,t){return this.dataKey?r.find(t,t=>t[this.dataKey]===e)||null:e}_getValue(e){return r.isNil(e)?null:e[this.dataKey]}}return e.\u0275fac=function(t){return new(t||e)(o.Qb(o.l),o.Qb(o.E),o.Qb(o.h),o.Qb(o.z))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-selectbox"]],hostAttrs:[1,"select-box"],hostVars:2,hostBindings:function(e,t){2&e&&o.Gb("valid-error",t.invalid)},inputs:{name:"name",styleClass:"styleClass",required:"required",tabindex:"tabindex",dataKey:"dataKey",displayKey:"displayKey",isInvalid:"isInvalid",useAllOptionYn:"useAllOptionYn",useAllOptionName:"useAllOptionName",disabled:"disabled",options:"options"},outputs:{onChange:"onChange"},features:[o.Bb([s])],decls:3,vars:8,consts:[[3,"compareWith","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngIf"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(e,t){1&e&&(o.Wb(0,"select",0),o.fc("ngModelChange",(function(e){return t.selectItem(e)})),o.Nc(1,l,2,2,"option",1),o.Nc(2,c,2,2,"option",2),o.Vb()),2&e&&(o.pc("compareWith",t.compareFn)("ngModel",t.selectedOption)("disabled",t.disabled),o.Db("name",t.name)("required",t.required)("tabindex",t.tabindex),o.Cb(1),o.pc("ngIf",t.useAllOptionYn),o.Cb(1),o.pc("ngForOf",t.options))},directives:[n.y,n.r,n.u,n.x,a.o,a.n,n.v,n.A],encapsulation:2}),e})()}}]);