(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"0+w5":function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var n={};o.r(n),o.d(n,"getOffPnrSuccess",(function(){return i})),o.d(n,"getOffPnrFailure",(function(){return a})),o.d(n,"getStationListSuccess",(function(){return s})),o.d(n,"getStationListFailure",(function(){return c})),o.d(n,"getRoutingTypeListSuccess",(function(){return b})),o.d(n,"getRoutingTypeListFailure",(function(){return l})),o.d(n,"loadOffPnr",(function(){return u})),o.d(n,"loadStationList",(function(){return d})),o.d(n,"loadSellerList",(function(){return p})),o.d(n,"loadRoutingTypeList",(function(){return m})),o.d(n,"sendOffPnr",(function(){return f})),o.d(n,"sendOffPnrSuccess",(function(){return g})),o.d(n,"removeOffPnr",(function(){return h}));var r=o("kt0X");const i=Object(r.o)("[FlManualBooking] get off pnr success",Object(r.t)()),a=Object(r.o)("[FlManualBooking] get off pnr failure",Object(r.t)()),s=Object(r.o)("[FlManualBooking] get station list success",Object(r.t)()),c=Object(r.o)("[FlManualBooking] get station list failure",Object(r.t)()),b=Object(r.o)("[FlManualBooking] get routing type list success",Object(r.t)()),l=Object(r.o)("[FlManualBooking] get routing type list failure",Object(r.t)()),u=Object(r.o)("[FlManualBooking] load off pnr",Object(r.t)()),d=Object(r.o)("[FlManualBooking] load station list",Object(r.t)()),p=Object(r.o)("[FlManualBooking] load seller list",Object(r.t)()),m=Object(r.o)("[FlManualBooking] load routing type list",Object(r.t)()),f=Object(r.o)("[FlManualBooking] send off pnr",Object(r.t)()),g=Object(r.o)("[FlManualBooking] send off pnr success"),h=Object(r.o)("[FlManualBooking] remove off pnr")},"1HQW":function(t,e,o){"use strict";o.d(e,"a",(function(){return a})),o.d(e,"b",(function(){return s})),o.d(e,"d",(function(){return l})),o.d(e,"f",(function(){return u})),o.d(e,"e",(function(){return d})),o.d(e,"c",(function(){return p}));var n=o("kt0X"),r=o("0+w5");const i=Object(n.q)({offPnrInfo:null,stationList:null,routingTypeList:null,bookingSuccessToggle:!1},Object(n.s)(r.a.getOffPnrSuccess,(t,{offPnrInfo:e})=>Object.assign(Object.assign({},t),{offPnrInfo:e})),Object(n.s)(r.a.removeOffPnr,t=>Object.assign(Object.assign({},t),{offPnrInfo:null})),Object(n.s)(r.a.sendOffPnrSuccess,t=>Object.assign(Object.assign({},t),{bookingSuccessToggle:!t.bookingSuccessToggle})),Object(n.s)(r.a.getStationListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{stationList:e})),Object(n.s)(r.a.getRoutingTypeListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{routingTypeList:e}))),a="flManualBooking";function s(t,e){return Object(n.m)({flManualBookingMain:i})(t,e)}const c=Object(n.p)(a),b=Object(n.r)(c,t=>t.flManualBookingMain),l=Object(n.r)(b,t=>t.offPnrInfo),u=Object(n.r)(b,t=>t.stationList),d=Object(n.r)(b,t=>t.routingTypeList),p=Object(n.r)(b,t=>t.bookingSuccessToggle)},"4Bmu":function(t,e,o){"use strict";o.d(e,"a",(function(){return A}));var n=o("fXoL"),r=o("LvDl"),i=o("XNiG"),a=o("itXk"),s=o("1G5W"),c=o("ovIH"),b=o("3Pt+"),l=o("+Sob"),u=o("Onn4"),d=o("pfiq"),p=o("gbCm"),m=o("ofXK"),f=o("U6NN");const g=function(t){return["travelers",t,"travelerName"]};function h(t,e){if(1&t&&(n.Ub(0),n.Wb(1,"tr",26),n.Wb(2,"td",27),n.Pc(3),n.Vb(),n.Wb(4,"td",27),n.Rb(5,"app-input-text",28),n.Vb(),n.Wb(6,"td",29),n.Pc(7),n.Vb(),n.Wb(8,"td",29),n.Pc(9),n.Vb(),n.Wb(10,"td",27),n.Pc(11),n.Vb(),n.Wb(12,"td",27),n.Pc(13),n.Vb(),n.Wb(14,"td",27),n.Pc(15),n.Vb(),n.Vb(),n.Tb()),2&t){const t=e.$implicit,r=e.index,i=n.hc();var o;n.Cb(1),n.pc("formGroupName",r),n.Cb(2),n.Qc(t.get("travelerSeq").value),n.Cb(2),n.pc("isInvalid",i.checkIsInvalid(n.uc(8,g,r))),n.Cb(2),n.Qc(t.get("travelerLastName").value),n.Cb(2),n.Qc(t.get("travelerFirstName").value),n.Cb(2),n.Qc(null==(o=i.getTravelerInfo(t.get("travelerSeq").value))?null:o.ageTypeName),n.Cb(2),n.Qc(t.get("travelerGender").value),n.Cb(2),n.Qc(t.get("birthday").value)}}function v(t,e){1&t&&(n.Ub(0),n.Wb(1,"tr"),n.Wb(2,"td",30),n.Pc(3,"-"),n.Vb(),n.Vb(),n.Tb())}function C(t,e){if(1&t&&(n.Ub(0),n.Wb(1,"tr"),n.Wb(2,"td",27),n.Pc(3),n.Vb(),n.Wb(4,"td",27),n.Pc(5),n.Vb(),n.Wb(6,"td",27),n.Pc(7),n.Vb(),n.Wb(8,"td",27),n.Pc(9),n.Vb(),n.Wb(10,"td",27),n.Pc(11),n.Vb(),n.Wb(12,"td",27),n.Pc(13),n.Vb(),n.Wb(14,"td",27),n.Pc(15),n.Vb(),n.Wb(16,"td",27),n.Pc(17),n.Vb(),n.Wb(18,"td",27),n.Pc(19),n.Vb(),n.Wb(20,"td",27),n.Pc(21),n.Vb(),n.Wb(22,"td",27),n.Pc(23),n.Vb(),n.Vb(),n.Tb()),2&t){const t=e.$implicit;n.Cb(3),n.Qc(t.itineraryNo),n.Cb(2),n.Qc(t.marketingAirlineCode),n.Cb(2),n.Qc(t.marketingFlightNumber),n.Cb(2),n.Qc(t.operatingAirlineCode),n.Cb(2),n.Qc(t.bookingClassCode),n.Cb(2),n.Qc(t.departureDate),n.Cb(2),n.Qc(t.departureWeekday),n.Cb(2),n.Qc(t.originAirportCode),n.Cb(2),n.Qc(t.destinationAirportCode),n.Cb(2),n.Qc(t.segmentStatusCode),n.Cb(2),n.Qc(t.airlinePnr)}}function P(t,e){1&t&&(n.Ub(0),n.Wb(1,"tr"),n.Wb(2,"td",30),n.Pc(3,"-"),n.Vb(),n.Vb(),n.Tb())}function V(t,e){if(1&t&&(n.Ub(0),n.Wb(1,"tr"),n.Wb(2,"td",27),n.Pc(3),n.Vb(),n.Wb(4,"td"),n.Pc(5),n.Vb(),n.Wb(6,"td"),n.Pc(7),n.Vb(),n.Wb(8,"td",31),n.Pc(9),n.ic(10,"number"),n.Vb(),n.Wb(11,"td",31),n.Pc(12),n.ic(13,"number"),n.Vb(),n.Wb(14,"td",31),n.Pc(15),n.ic(16,"number"),n.Vb(),n.Wb(17,"td",31),n.Pc(18),n.ic(19,"number"),n.Vb(),n.Wb(20,"td",31),n.Pc(21),n.ic(22,"number"),n.Vb(),n.Vb(),n.Tb()),2&t){const t=e.$implicit;n.Cb(3),n.Qc(t.travelerSeq),n.Cb(2),n.Qc(t.travelerLastName),n.Cb(2),n.Qc(t.travelerFirstName),n.Cb(2),n.Qc(n.jc(10,8,t.mspFareAmount)),n.Cb(3),n.Qc(n.jc(13,10,t.salesQAmount)),n.Cb(3),n.Qc(n.jc(16,12,t.salesTaxAmount)),n.Cb(3),n.Qc(n.jc(19,14,t.salesFuelAmount)),n.Cb(3),n.Qc(n.jc(22,16,t.salesSumAmount))}}function W(t,e){1&t&&(n.Ub(0),n.Wb(1,"tr"),n.Wb(2,"td",32),n.Pc(3,"-"),n.Vb(),n.Vb(),n.Tb())}function k(t,e){if(1&t&&(n.Ub(0),n.Wb(1,"tr"),n.Wb(2,"td",27),n.Pc(3),n.Vb(),n.Wb(4,"td"),n.Pc(5),n.Vb(),n.Wb(6,"td"),n.Pc(7),n.Vb(),n.Wb(8,"td",27),n.Pc(9),n.Vb(),n.Wb(10,"td",27),n.Pc(11),n.Vb(),n.Wb(12,"td",27),n.Pc(13),n.Vb(),n.Wb(14,"td",27),n.Pc(15),n.Vb(),n.Wb(16,"td",27),n.Pc(17),n.Vb(),n.Vb(),n.Tb()),2&t){const t=e.$implicit;n.Cb(3),n.Qc(t.travelerSeq),n.Cb(2),n.Qc(t.travelerLastName),n.Cb(2),n.Qc(t.travelerFirstName),n.Cb(2),n.Qc(t.ticketNo),n.Cb(2),n.Qc(t.billingTypeCode),n.Cb(2),n.Qc(t.cardCode),n.Cb(2),n.Qc(t.cardNo),n.Cb(2),n.Qc(t.expireDate)}}function O(t,e){1&t&&(n.Ub(0),n.Wb(1,"tr"),n.Wb(2,"td",32),n.Pc(3,"-"),n.Vb(),n.Vb(),n.Tb())}function y(t,e){if(1&t&&(n.Ub(0),n.Wb(1,"tr"),n.Wb(2,"td",27),n.Pc(3),n.Vb(),n.Wb(4,"td"),n.Pc(5),n.Vb(),n.Wb(6,"td"),n.Pc(7),n.Vb(),n.Wb(8,"td",27),n.Pc(9),n.Vb(),n.Wb(10,"td",27),n.Pc(11),n.Vb(),n.Wb(12,"td",27),n.Pc(13),n.Vb(),n.Wb(14,"td",27),n.Pc(15),n.Vb(),n.Vb(),n.Tb()),2&t){const t=e.$implicit;n.Cb(3),n.Qc(t.travelerSeq),n.Cb(2),n.Qc(t.travelerLastName),n.Cb(2),n.Qc(t.travelerFirstName),n.Cb(2),n.Qc(t.passportNationalityCode),n.Cb(2),n.Qc(t.passportIssueCountryCode),n.Cb(2),n.Qc(t.passportNo),n.Cb(2),n.Qc(t.expireDate)}}function F(t,e){1&t&&(n.Ub(0),n.Wb(1,"tr"),n.Wb(2,"td",33),n.Pc(3,"-"),n.Vb(),n.Vb(),n.Tb())}const N=function(){return["summary","bookerMemberYn"]},j=function(){return["summary","bookerId"]},I=function(){return["U04"]},S=function(t){return{userTypeCodeList:t}},T=function(){return["name","userNo","gender","userId"]},L=function(){return["summary","bookerEmailAddress"]},M=function(){return["summary","bookerName"]},_=function(){return["summary","bookerMobileNo"]},B=function(){return["summary","routingTypeCode"]};let A=(()=>{class t{constructor(t){this._dataService=t,this.submitEvent=new n.n,this.closeEvent=new n.n,this.bookerApiCondition={},this._$unsubscribe=new i.a,this.putForm=t.generateFlManualBookingPutForm(),this.putFormData=t.initFlManualBookingPutForm()}get bookerInfo(){return this._bookerInfo}set bookerInfo(t){this._bookerInfo=t,this._setPutSummaryFormArrayData(t),this.bookerCompInput=r.isNil(t)?"":`[${t.bookerCompCode}] ${t.bookerCompName}`,this.bookerIdInput=r.isNil(t)?"":t.bookerId}get offPnrInfo(){return this._offPnrInfo}set offPnrInfo(t){this._offPnrInfo=t,this._setPutTravelerFormArrayData(t),this._setPutTravelersForm(t)}get travelers(){var t;return(null===(t=this.offPnrInfo)||void 0===t?void 0:t.travelers)||[]}get segments(){var t;return(null===(t=this.offPnrInfo)||void 0===t?void 0:t.segments)||[]}get prices(){var t;return(null===(t=this.offPnrInfo)||void 0===t?void 0:t.prices)||[]}get tickets(){var t;return(null===(t=this.offPnrInfo)||void 0===t?void 0:t.tickets)||[]}get travelerFormArray(){var t;return null===(t=this.putForm)||void 0===t?void 0:t.get("travelers")}ngOnInit(){this._initSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}checkIsInvalid(t){return this.putForm.get(t).invalid&&console.log(t),this.checkValid&&this.putForm.get(t)&&this.putForm.get(t).invalid}onSubmit(){if(this.putForm.invalid)return void(this.checkValid=!0);const t=this._setPutCondition();this.submitEvent.emit(t)}onSelectUser(t){this.putForm.get("summary").get("bookerName").setValue(t.name),this.putForm.get("summary").get("bookerUno").setValue(t.userNo),this.putForm.get("summary").get("bookerMobileNo").setValue(t.mobileNo),this.putForm.get("summary").get("bookerEmailAddress").setValue(t.emailAddress)}getTravelerInfo(t){return r.find(this.travelers,e=>e.travelerSeq===t)}_setPutSummaryFormArrayData(t){const e=this._dataService.initFlManualBookingPutForm(),o=Object.assign(Object.assign({},e.summary),r.pick(Object.assign({},t),Object.keys(e.summary)));this.putFormData=Object.assign(Object.assign({},this.putFormData),{summary:o})}_setPutTravelerFormArrayData(t){const e=[...t.travelers];this.putFormData=Object.assign(Object.assign({},this.putFormData),{travelers:e})}_setPutTravelersForm(t){r.isNil(t)||(this.travelerFormArray.clear(),t.travelers.forEach(t=>{const e=this._dataService.generateFlManualBookingTravelerPutForm(t);this.travelerFormArray.push(e)}))}_setPutCondition(){const t=this._dataService.getFlManualBookingPutSummaryCondition(),e=this._dataService.getFlManualBookingPutPriceCondition(),o=this._dataService.getFlManualBookingPutTicketCondition(),n=r.isNil(this.bookingCode)?this._dataService.getFlManualBookingPutTravelerMatchCondition():this._dataService.getFlManualBookingPutTravelerCondition(),i=this.putForm.getRawValue(),a=this.loginUser.userNo,s=Object.assign({},r.pick(Object.assign(Object.assign(Object.assign({},this.offPnrInfo.summary),i.summary),{ticketingPicUno:a,bookingCode:this.bookingCode,stationTypeCode:"STN01",bookerCompCode:11e4,deviceTypeCode:"PC"}),Object.keys(t))),c=i.travelers.map(t=>r.pick(r.omitBy(t,t=>r.isNil(t)||""===t),Object.keys(n))),b=this.offPnrInfo.prices.map(t=>Object.assign({},r.pick(Object.assign({},t),Object.keys(e)))),l=this.offPnrInfo.tickets.map(t=>Object.assign({},r.pick(Object.assign({},t),Object.keys(o))));return Object.assign(Object.assign({},this.offPnrInfo),{summary:s,travelers:c,prices:b,tickets:l})}_initSubscription(){const t=[this.putForm.get(["summary","bookerMemberYn"]).valueChanges];Object(a.a)(t).pipe(Object(s.a)(this._$unsubscribe)).subscribe(([t])=>{!1===t?(this.bookerIdInput="smart_guest_110000",this.putForm.get(["summary","bookerId"]).setValue("smart_guest_110000"),this.putForm.get(["summary","bookerId"]).disable()):(this.bookerIdInput=null,this.putForm.get(["summary","bookerId"]).setValue(null),this.putForm.get(["summary","bookerId"]).enable())})}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(c.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-fl-manual-booking-form"]],inputs:{loginUser:"loginUser",bookingCode:"bookingCode",stationList:"stationList",routingTypeList:"routingTypeList",bookerInfo:"bookerInfo",offPnrInfo:"offPnrInfo"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:204,vars:36,consts:[[3,"formGroup","connectForm","ngSubmit"],["formGroupName","summary",1,"page-item",2,"margin-top","40px"],[1,"page-item-header"],[1,"title"],[1,"table","table-bordered"],["width","15%"],["width","35%"],["scope","row",1,"th-bg"],[1,"form-group"],["formControlName","bookerMemberYn","name","bookerMemberYn","label","Y",3,"value"],["formControlName","bookerMemberYn","name","bookerMemberYn","label","N",3,"value"],["formControlName","bookerId","apiUrl","admin/common/client","dataKey","userId","inputFieldFormat","{0}({1})&, {2}&, {3}&","placeholder","Name",3,"inputFieldValue","isInvalid","apiCondition","apiSearchTerm","inputFieldFormatKeyList","onSelect"],["formControlName","bookerEmailAddress",3,"isInvalid"],["formControlName","bookerName",3,"isInvalid"],["formControlName","bookerMobileNo",1,"mr5",3,"isInvalid"],["formArrayName","travelers",1,"page-item"],[1,"table","table-bordered","table-responsive"],["scope","col",1,"align-c"],[4,"ngFor","ngForOf"],[4,"ngIf"],["formGroupName","summary",1,"page-item"],["formControlName","routingTypeCode","dataKey","detailCode","displayKey","detailCodeNameEn","useAllOptionName","Routing Type",1,"ml5",3,"options","isInvalid"],[1,"page-item"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],["type","button",1,"btn","btn-light","sm",3,"click"],[3,"formGroupName"],[1,"align-c"],["formControlName","travelerName",3,"isInvalid"],[1,"align-l"],["colspan","14",1,"align-c"],[1,"align-r"],["colspan","8",1,"align-c"],["colspan","7",1,"align-c"]],template:function(t,e){1&t&&(n.Wb(0,"form",0),n.fc("ngSubmit",(function(){return e.onSubmit()})),n.Wb(1,"div",1),n.Wb(2,"div",2),n.Wb(3,"p",3),n.Pc(4,"Booker"),n.Vb(),n.Vb(),n.Wb(5,"div",4),n.Wb(6,"table"),n.Wb(7,"caption"),n.Pc(8," Booker "),n.Vb(),n.Wb(9,"colgroup"),n.Rb(10,"col",5),n.Rb(11,"col",6),n.Rb(12,"col",5),n.Rb(13,"col",6),n.Vb(),n.Wb(14,"tbody"),n.Wb(15,"tr"),n.Wb(16,"th",7),n.Wb(17,"sup"),n.Pc(18,"Member YN"),n.Vb(),n.Vb(),n.Wb(19,"td"),n.Wb(20,"div",8),n.Rb(21,"app-radio",9),n.Rb(22,"app-radio",10),n.Vb(),n.Vb(),n.Vb(),n.Wb(23,"tr"),n.Wb(24,"th",7),n.Wb(25,"sup"),n.Pc(26,"Booker ID"),n.Vb(),n.Vb(),n.Wb(27,"td"),n.Wb(28,"app-auto-complete",11),n.fc("onSelect",(function(t){return e.onSelectUser(t)})),n.Vb(),n.Vb(),n.Wb(29,"th",7),n.Wb(30,"sup"),n.Pc(31,"Email"),n.Vb(),n.Vb(),n.Wb(32,"td"),n.Rb(33,"app-input-text",12),n.Vb(),n.Vb(),n.Wb(34,"tr"),n.Wb(35,"th",7),n.Wb(36,"sup"),n.Pc(37,"Booker Name"),n.Vb(),n.Vb(),n.Wb(38,"td"),n.Rb(39,"app-input-text",13),n.Vb(),n.Wb(40,"th",7),n.Wb(41,"sup"),n.Pc(42,"Mobile No."),n.Vb(),n.Vb(),n.Wb(43,"td"),n.Wb(44,"div",8),n.Rb(45,"app-input-text",14),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(46,"div",15),n.Wb(47,"div",2),n.Wb(48,"p",3),n.Pc(49,"Travelers"),n.Vb(),n.Vb(),n.Wb(50,"div",16),n.Wb(51,"table"),n.Wb(52,"caption"),n.Pc(53," Travelers "),n.Vb(),n.Rb(54,"colgroup"),n.Wb(55,"thead"),n.Wb(56,"tr"),n.Wb(57,"th",17),n.Pc(58,"No."),n.Vb(),n.Wb(59,"th",17),n.Pc(60,"Name(KO)"),n.Vb(),n.Wb(61,"th",17),n.Pc(62,"Last Name(EN)"),n.Vb(),n.Wb(63,"th",17),n.Pc(64,"First Name(EN)"),n.Vb(),n.Wb(65,"th",17),n.Pc(66,"Age Type"),n.Vb(),n.Wb(67,"th",17),n.Pc(68,"Gender"),n.Vb(),n.Wb(69,"th",17),n.Pc(70,"Birthday"),n.Vb(),n.Vb(),n.Vb(),n.Wb(71,"tbody"),n.Nc(72,h,16,10,"ng-container",18),n.Nc(73,v,4,0,"ng-container",19),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(74,"div",20),n.Wb(75,"div",2),n.Wb(76,"div",3),n.Pc(77,"Schedule"),n.Vb(),n.Rb(78,"app-selectbox",21),n.Vb(),n.Wb(79,"div",16),n.Wb(80,"table"),n.Wb(81,"caption"),n.Pc(82," Schedule "),n.Vb(),n.Rb(83,"colgroup"),n.Wb(84,"thead"),n.Wb(85,"tr"),n.Wb(86,"th",17),n.Pc(87,"No."),n.Vb(),n.Wb(88,"th",17),n.Pc(89,"Airline"),n.Vb(),n.Wb(90,"th",17),n.Pc(91,"FLT No."),n.Vb(),n.Wb(92,"th",17),n.Pc(93,"C/S Airline"),n.Vb(),n.Wb(94,"th",17),n.Pc(95,"B.CLS"),n.Vb(),n.Wb(96,"th",17),n.Pc(97,"Dep. Date"),n.Vb(),n.Wb(98,"th",17),n.Pc(99,"Weekday"),n.Vb(),n.Wb(100,"th",17),n.Pc(101,"Depature"),n.Vb(),n.Wb(102,"th",17),n.Pc(103,"Arrive"),n.Vb(),n.Wb(104,"th",17),n.Pc(105,"Status"),n.Vb(),n.Wb(106,"th",17),n.Pc(107,"Airline R/N"),n.Vb(),n.Vb(),n.Vb(),n.Wb(108,"tbody"),n.Nc(109,C,24,11,"ng-container",18),n.Nc(110,P,4,0,"ng-container",19),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(111,"div",22),n.Wb(112,"div",2),n.Wb(113,"p",3),n.Pc(114,"Price"),n.Vb(),n.Vb(),n.Wb(115,"div",16),n.Wb(116,"table"),n.Wb(117,"caption"),n.Pc(118," Price "),n.Vb(),n.Rb(119,"colgroup"),n.Wb(120,"thead"),n.Wb(121,"tr"),n.Wb(122,"th",17),n.Pc(123,"No."),n.Vb(),n.Wb(124,"th",17),n.Pc(125,"Last Name(EN)"),n.Vb(),n.Wb(126,"th",17),n.Pc(127,"First Name(EN)"),n.Vb(),n.Wb(128,"th",17),n.Pc(129,"Fare"),n.Vb(),n.Wb(130,"th",17),n.Pc(131,"Q-CHG"),n.Vb(),n.Wb(132,"th",17),n.Pc(133,"Tax"),n.Vb(),n.Wb(134,"th",17),n.Pc(135,"Fuel Charge"),n.Vb(),n.Wb(136,"th",17),n.Pc(137,"Sum Amount"),n.Vb(),n.Vb(),n.Vb(),n.Wb(138,"tbody"),n.Nc(139,V,23,18,"ng-container",18),n.Nc(140,W,4,0,"ng-container",19),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(141,"div",22),n.Wb(142,"div",2),n.Wb(143,"p",3),n.Pc(144,"Ticketing & Payment"),n.Vb(),n.Vb(),n.Wb(145,"div",16),n.Wb(146,"table"),n.Wb(147,"caption"),n.Pc(148," Ticketing & Payment "),n.Vb(),n.Rb(149,"colgroup"),n.Wb(150,"thead"),n.Wb(151,"tr"),n.Wb(152,"th",17),n.Pc(153,"No."),n.Vb(),n.Wb(154,"th",17),n.Pc(155,"Last Name(EN)"),n.Vb(),n.Wb(156,"th",17),n.Pc(157,"First Name(EN)"),n.Vb(),n.Wb(158,"th",17),n.Pc(159,"Ticket No."),n.Vb(),n.Wb(160,"th",17),n.Pc(161,"FOP"),n.Vb(),n.Wb(162,"th",17),n.Pc(163,"CC Type"),n.Vb(),n.Wb(164,"th",17),n.Pc(165,"CC No."),n.Vb(),n.Wb(166,"th",17),n.Pc(167,"Valid Thru"),n.Vb(),n.Vb(),n.Vb(),n.Wb(168,"tbody"),n.Nc(169,k,18,8,"ng-container",18),n.Nc(170,O,4,0,"ng-container",19),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(171,"div",22),n.Wb(172,"div",2),n.Wb(173,"p",3),n.Pc(174,"Passport"),n.Vb(),n.Vb(),n.Wb(175,"div",16),n.Wb(176,"table"),n.Wb(177,"caption"),n.Pc(178," Passport "),n.Vb(),n.Rb(179,"colgroup"),n.Wb(180,"thead"),n.Wb(181,"tr"),n.Wb(182,"th",17),n.Pc(183,"No."),n.Vb(),n.Wb(184,"th",17),n.Pc(185,"Last Name(EN)"),n.Vb(),n.Wb(186,"th",17),n.Pc(187,"First Name(EN)"),n.Vb(),n.Wb(188,"th",17),n.Pc(189,"Nationality"),n.Vb(),n.Wb(190,"th",17),n.Pc(191,"Issue Country"),n.Vb(),n.Wb(192,"th",17),n.Pc(193,"Passport No."),n.Vb(),n.Wb(194,"th",17),n.Pc(195,"Valid Thru"),n.Vb(),n.Vb(),n.Vb(),n.Wb(196,"tbody"),n.Nc(197,y,16,7,"ng-container",18),n.Nc(198,F,4,0,"ng-container",19),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(199,"div",23),n.Wb(200,"button",24),n.Pc(201,"Save"),n.Vb(),n.Wb(202,"button",25),n.fc("click",(function(){return e.closeEvent.emit()})),n.Pc(203,"Close"),n.Vb(),n.Vb(),n.Vb()),2&t&&(n.pc("formGroup",e.putForm)("connectForm",e.putFormData),n.Cb(20),n.Gb("valid-error",e.checkIsInvalid(n.tc(26,N))),n.Cb(1),n.pc("value",!0),n.Cb(1),n.pc("value",!1),n.Cb(6),n.pc("inputFieldValue",e.bookerIdInput)("isInvalid",e.checkIsInvalid(n.tc(27,j)))("apiCondition",n.uc(29,S,n.tc(28,I)))("apiSearchTerm","name")("inputFieldFormatKeyList",n.tc(31,T)),n.Cb(5),n.pc("isInvalid",e.checkIsInvalid(n.tc(32,L))),n.Cb(6),n.pc("isInvalid",e.checkIsInvalid(n.tc(33,M))),n.Cb(6),n.pc("isInvalid",e.checkIsInvalid(n.tc(34,_))),n.Cb(27),n.pc("ngForOf",e.travelerFormArray.controls),n.Cb(1),n.pc("ngIf",e.travelers.length<1),n.Cb(5),n.pc("options",e.routingTypeList)("isInvalid",e.checkIsInvalid(n.tc(35,B))),n.Cb(31),n.pc("ngForOf",e.segments),n.Cb(1),n.pc("ngIf",e.segments.length<1),n.Cb(29),n.pc("ngForOf",e.prices),n.Cb(1),n.pc("ngIf",e.prices.length<1),n.Cb(29),n.pc("ngForOf",e.tickets),n.Cb(1),n.pc("ngIf",0===e.tickets.length),n.Cb(27),n.pc("ngForOf",e.travelers),n.Cb(1),n.pc("ngIf",e.travelers.length<1))},directives:[b.B,b.s,b.k,l.a,b.l,u.a,b.r,b.i,d.a,p.a,b.e,m.n,m.o,f.a],pipes:[m.f],encapsulation:2,changeDetection:0}),t})()},HxJV:function(t,e,o){"use strict";o.d(e,"a",(function(){return w}));var n=o("ofXK"),r=o("3Pt+"),i=o("snw9"),a=o("kt0X"),s=o("WG3B"),c=o("wPo9"),b=o("7rOj"),l=o("6LsY"),u=o("l1P7"),d=o("v7zA"),p=o("hHe4"),m=o("1OXJ"),f=o("5hwk"),g=o("qXPF"),h=o("kKjH"),v=o("vu/V"),C=o("tyNb"),P=o("fXoL");const V=[];let W=(()=>{class t{}return t.\u0275mod=P.Ob({type:t}),t.\u0275inj=P.Nb({factory:function(e){return new(e||t)},imports:[[C.f.forChild(V)],C.f]}),t})();o("iO9o"),o("W1D1"),o("4Bmu");var k=o("1HQW"),O=o("LRne"),y=o("bOdf"),F=o("zp1y"),N=o("eIep"),j=o("lJxs"),I=o("JIr8"),S=o("vkgz"),T=o("LvDl"),L=o("0+w5"),M=o("z6cu"),_=o("AytR");const{API_URL:B}=_.a,A={postOffPnr:`${B}/admin/booking/flight/off-pnr`,putOffPnr:`${B}/admin/booking/flight/off-pnr`,postCommonDetailCode:`${B}/common/detail-code`,postCommonComp:`${B}/common/comp`};var E=o("tpT/");let Q=(()=>{class t{constructor(t){this.api=t}getOffPnr(t){const e=T.assign({},this.api.defaultParams,{condition:t});return this.api.post(A.postOffPnr,e).pipe(Object(N.a)(t=>t.succeedYn?Object(O.a)(t.result):Object(M.a)(t||"api response error")))}putOffPnr(t){const e=T.assign({},this.api.defaultParams,{condition:t});return this.api.put(A.putOffPnr,e).pipe(Object(N.a)(t=>t.succeedYn?Object(O.a)(t.result):Object(M.a)(t||"api response error")))}getCommonDetailCodeList(t){const e=T.assign({},this.api.defaultParams,{condition:t});return this.api.post(A.postCommonDetailCode,e).pipe(Object(N.a)(t=>t.succeedYn?Object(O.a)(t.result.list):Object(M.a)("api response error")))}getCommonCompList(t){const e=T.assign({},this.api.defaultParams,{condition:t});return this.api.post(A.postCommonComp,e).pipe(Object(N.a)(t=>t.succeedYn?Object(O.a)(t.result.list):Object(M.a)("api response error")))}}return t.\u0275fac=function(e){return new(e||t)(P.bc(E.a))},t.\u0275prov=P.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var D=o("Xb6A"),$=o("EsKh");let R=(()=>{class t{constructor(t,e,o,n,r){this._actions$=t,this._apiService=e,this._store$=o,this._errorService=n,this.alertService=r,this.loadStationList$=Object(i.c)(()=>this._actions$.pipe(Object(i.d)(L.a.loadStationList),Object(y.a)(t=>Object(O.a)(t).pipe(Object(F.a)(this.stationList$))),Object(N.a)(([{condition:t},e])=>T.isEmpty(e)?this._apiService.getCommonDetailCodeList(t).pipe(Object(j.a)(t=>L.a.getStationListSuccess({dataList:t})),Object(I.a)(t=>(this._catchErr(t,"\uc2a4\ud14c\uc774\uc158 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[L.a.getStationListSuccess({dataList:e})]))),this.loadRoutingTypeList$=Object(i.c)(()=>this._actions$.pipe(Object(i.d)(L.a.loadRoutingTypeList),Object(y.a)(t=>Object(O.a)(t).pipe(Object(F.a)(this.routingTypeList$))),Object(N.a)(([{condition:t},e])=>T.isEmpty(e)?this._apiService.getCommonDetailCodeList(t).pipe(Object(j.a)(t=>L.a.getRoutingTypeListSuccess({dataList:t})),Object(I.a)(t=>(this._catchErr(t,"\ub8e8\ud305\uad6c\ubd84\ucf54\ub4dc \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[L.a.getRoutingTypeListSuccess({dataList:e})]))),this.loadOffPnr$=Object(i.c)(()=>this._actions$.pipe(Object(i.d)(L.a.loadOffPnr),Object(N.a)(({condition:t})=>this._apiService.getOffPnr(t).pipe(Object(j.a)(t=>L.a.getOffPnrSuccess({offPnrInfo:t})),Object(I.a)(t=>{const e="\ud56d\uacf5 \ub9e4\ub274\uc5bc \uc608\uc57d \uc815\ubcf4 \uc870\ud68c\ub97c \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",o=[L.a.getOffPnrFailure({error:e})];return this._catchErr(t,e,o),[]}))))),this.sendOffPnr$=Object(i.c)(()=>this._actions$.pipe(Object(i.d)(L.a.sendOffPnr),Object(N.a)(({condition:t})=>this._apiService.putOffPnr(t).pipe(Object(j.a)(()=>({succeedYn:!0})),Object(I.a)(t=>Object(O.a)({succeedYn:!1,error:t})))),Object(S.a)(({succeedYn:t,error:e})=>{if(t){const t="Your data has been saved.",e=[L.a.sendOffPnrSuccess()];this._runPage(t,e)}else this._catchErr(e,"Failed to save.",[])})),{dispatch:!1}),this.stationList$=o.pipe(Object(a.u)(k.f)),this.routingTypeList$=o.pipe(Object(a.u)(k.e))}_runPage(t,e){this.alertService.alert({message:t,accept:(null==e?void 0:e.length)>0?()=>{e.forEach(t=>{this._store$.dispatch(t)})}:()=>{}})}_catchErr(t,e,o){const n=this._errorService.errorHandler(t,e);T.isNil(n)||(T.isNil(n.accept)&&(n.accept=(null==o?void 0:o.length)>0?()=>{o.forEach(t=>{this._store$.dispatch(t)})}:()=>{}),this.alertService.alert(n))}}return t.\u0275fac=function(e){return new(e||t)(P.bc(i.a),P.bc(Q),P.bc(a.h),P.bc(D.a),P.bc($.a))},t.\u0275prov=P.Mb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{}return t.\u0275mod=P.Ob({type:t}),t.\u0275inj=P.Nb({factory:function(e){return new(e||t)},imports:[[n.c,r.m,r.w,s.m,c.a,b.a,l.a,u.a,d.a,p.a,m.a,f.a,h.a,g.a,v.a,W,a.j.forFeature(k.a,k.b),i.b.forFeature([R])]]}),t})()},W1D1:function(t,e,o){"use strict";o.d(e,"a",(function(){return b}));var n=o("fXoL"),r=o("ovIH"),i=o("3Pt+"),a=o("+Sob"),s=o("Onn4"),c=o("gbCm");let b=(()=>{class t{constructor(t){this._dataService=t,this.submitEvent=new n.n,this.searchForm=t.generateFlManualBookingSearchForm(),this.searchFormData=t.initFlManualBookingSearchForm()}ngOnInit(){}ngOnDestroy(){}checkIsInvalid(t){return this.checkValid&&this.searchForm.get(t)&&this.searchForm.get(t).invalid}onSubmit(){if(this.searchForm.invalid)return void(this.checkValid=!0);const t=Object.assign({},this.searchForm.value);this.submitEvent.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(r.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-fl-manual-booking-search"]],outputs:{submitEvent:"submitEvent"},decls:25,vars:7,consts:[[3,"formGroup","connectForm","ngSubmit"],[1,"table","table-bordered","table-responsive"],["width","15%"],["width","30%"],["width","40%"],["scope","row",1,"th-bg"],[1,"form-group"],["name","gdsCompCode","label","1A","formControlName","gdsCompCode",3,"value"],["name","gdsCompCode","label","1S","formControlName","gdsCompCode",3,"value"],["formControlName","gdsSubPnr",3,"isInvalid"],[1,"btn","btn-outline-dark","sm","d-inline-flex","flex-glow-0","ml5"]],template:function(t,e){1&t&&(n.Wb(0,"form",0),n.fc("ngSubmit",(function(){return e.onSubmit()})),n.Wb(1,"div",1),n.Wb(2,"table"),n.Wb(3,"colgroup"),n.Rb(4,"col",2),n.Rb(5,"col",3),n.Rb(6,"col",2),n.Rb(7,"col",4),n.Vb(),n.Wb(8,"tbody"),n.Wb(9,"tr"),n.Wb(10,"th",5),n.Wb(11,"sup"),n.Pc(12,"Select GDS"),n.Vb(),n.Vb(),n.Wb(13,"td"),n.Wb(14,"div",6),n.Rb(15,"app-radio",7),n.Rb(16,"app-radio",8),n.Vb(),n.Vb(),n.Wb(17,"th",5),n.Wb(18,"sup"),n.Pc(19,"PNR"),n.Vb(),n.Vb(),n.Wb(20,"td"),n.Wb(21,"div",6),n.Rb(22,"app-input-text",9),n.Wb(23,"button",10),n.Pc(24,"Retreive"),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb()),2&t&&(n.pc("formGroup",e.searchForm)("connectForm",e.searchFormData),n.Cb(14),n.Gb("valid-error",e.checkIsInvalid("gdsCompCode")),n.Cb(1),n.pc("value",900001),n.Cb(1),n.pc("value",900002),n.Cb(6),n.pc("isInvalid",e.checkIsInvalid("gdsSubPnr")))},directives:[i.B,i.s,i.k,a.a,s.a,i.r,i.i,c.a],encapsulation:2,changeDetection:0}),t})()},iO9o:function(t,e,o){"use strict";o.d(e,"a",(function(){return f}));var n=o("fXoL"),r=o("kt0X"),i=o("XNiG"),a=o("0+w5"),s=o("1HQW"),c=o("YY+H"),b=o("zP0r"),l=o("1G5W"),u=o("W1D1"),d=o("ofXK"),p=o("4Bmu");function m(t,e){if(1&t){const t=n.Xb();n.Wb(0,"app-fl-manual-booking-form",3),n.fc("closeEvent",(function(){return n.Fc(t),n.hc().clickCloseEvent.emit()}))("submitEvent",(function(e){return n.Fc(t),n.hc().sendOffPnrHandler(e)})),n.ic(1,"async"),n.ic(2,"async"),n.ic(3,"async"),n.ic(4,"async"),n.Vb()}if(2&t){const t=n.hc();n.pc("bookingCode",t.bookingCode)("bookerInfo",t.bookerInfo)("loginUser",n.jc(1,6,t.loginUser$))("offPnrInfo",n.jc(2,8,t.offPnrInfo$))("stationList",n.jc(3,10,t.stationList$))("routingTypeList",n.jc(4,12,t.routingTypeList$))}}let f=(()=>{class t{constructor(t,e){this.store=t,this.authStore=e,this.clickCloseEvent=new n.n,this._$unsubscribe=new i.a,this.offPnrInfo$=t.pipe(Object(r.u)(s.d)),this.stationList$=t.pipe(Object(r.u)(s.f)),this.routingTypeList$=t.pipe(Object(r.u)(s.e)),this.loginUser$=e.pipe(Object(r.u)(c.r)),this.bookingSuccessToggle$=t.pipe(Object(r.u)(s.c))}ngOnInit(){this._loadBasisData(),this._initSubscription()}ngOnDestroy(){this.store.dispatch(a.a.removeOffPnr()),this._$unsubscribe.next(),this._$unsubscribe.complete()}searchOffPnrHandler(t){this.store.dispatch(a.a.loadOffPnr({condition:t}))}sendOffPnrHandler(t){this.store.dispatch(a.a.sendOffPnr({condition:t}))}_loadBasisData(){this.store.dispatch(a.a.loadStationList({condition:{masterCode:"BS002"}})),this.store.dispatch(a.a.loadRoutingTypeList({condition:{masterCode:"BS012"}}))}_initSubscription(){this.bookingSuccessToggle$.pipe(Object(b.a)(1),Object(l.a)(this._$unsubscribe)).subscribe(t=>{this.clickCloseEvent.emit(!0)})}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(r.h),n.Qb(r.h))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-fl-manual-booking"]],inputs:{bookerInfo:"bookerInfo",bookingCode:"bookingCode"},outputs:{clickCloseEvent:"clickCloseEvent"},decls:4,vars:3,consts:[[2,"min-height","600px","overflow","auto"],[3,"submitEvent"],[3,"bookingCode","bookerInfo","loginUser","offPnrInfo","stationList","routingTypeList","closeEvent","submitEvent",4,"ngIf"],[3,"bookingCode","bookerInfo","loginUser","offPnrInfo","stationList","routingTypeList","closeEvent","submitEvent"]],template:function(t,e){1&t&&(n.Wb(0,"div",0),n.Wb(1,"app-fl-manual-booking-search",1),n.fc("submitEvent",(function(t){return e.searchOffPnrHandler(t)})),n.Vb(),n.Nc(2,m,5,14,"app-fl-manual-booking-form",2),n.ic(3,"async"),n.Vb()),2&t&&(n.Cb(2),n.pc("ngIf",n.jc(3,1,e.offPnrInfo$)))},directives:[u.a,d.o,p.a],pipes:[d.b],encapsulation:2,changeDetection:0}),t})()},ovIH:function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));var n=o("3Pt+"),r=o("fXoL");let i=(()=>{class t{constructor(t){this.fb=t,this.generateFlManualBookingSearchForm=()=>this.fb.group({gdsCompCode:[null,[n.z.required]],gdsSubPnr:[null,[n.z.required]]}),this.initFlManualBookingSearchForm=()=>({gdsCompCode:900001,gdsSubPnr:null}),this.generateFlManualBookingPutForm=()=>this.fb.group({summary:this.fb.group({bookerMemberYn:[null,[n.z.required]],bookerId:[null,[n.z.required]],bookerName:[null,[n.z.required]],bookerUno:[null,[n.z.required]],bookerMobileNo:[null,[n.z.required]],bookerEmailAddress:[null,[n.z.required]],routingTypeCode:[null,[n.z.required]]}),travelers:this.fb.array([])}),this.generateFlManualBookingTravelerPutForm=t=>this.fb.group({travelerSeq:[t.travelerSeq||null],paxTatoo:[t.paxTatoo||null],travelerName:[t.travelerName||null,[n.z.required]],travelerFirstName:[t.travelerFirstName||null],travelerLastName:[t.travelerLastName||null],travelerGender:[t.travelerGender||null],ageTypeCode:[t.ageTypeCode||null],birthday:[t.birthday||null],domesticFareCode:[t.domesticFareCode||null],policyAppliedTravelerYn:[t.policyAppliedTravelerYn||null],apisTypeCode:[t.apisTypeCode||null],passportNationalityCode:[t.passportNationalityCode||null],passportIssueCountryCode:[t.passportIssueCountryCode||null],passportNo:[t.passportNo||null],expireDate:[t.expireDate||null],mileageCards:[t.expireDate||null],seats:[t.seats||null]}),this.initFlManualBookingPutForm=()=>({summary:{bookerMemberYn:!0,bookerId:null,bookerName:null,bookerUno:null,bookerMobileNo:null,bookerEmailAddress:null,routingTypeCode:null},travelers:[]}),this.getFlManualBookingPutSummaryCondition=()=>({bookingCode:null,gdsCompCode:null,gdsMainPnr:null,gdsSubPnr:null,domesticYn:null,bookingStatusCode:null,ticketingPicUno:null,stationTypeCode:null,bookerCompCode:null,bookerUno:null,bookerId:null,bookerName:null,bookerMobileNo:null,bookerEmailAddress:null,bookerMemberYn:null,clientCancelDeadline:null,airlineCancelDeadline:null,onOffManual:null,inflowTypeCode:null,deviceTypeCode:null,routingTypeCode:null,stockAirlineCode:null}),this.getFlManualBookingPutTravelerCondition=()=>({travelerSeq:null,paxTatoo:null,travelerName:null,travelerFirstName:null,travelerLastName:null,travelerGender:null,ageTypeCode:null,travelerBirthday:null,domesticFareCode:null,policyAppliedTravelerYn:null,apisTypeCode:null,passportNationalityCode:null,passportIssueCountryCode:null,passportNo:null,expireDate:null,mileageCards:null,seats:null}),this.getFlManualBookingPutTravelerMatchCondition=()=>({travelerSeq:null,bookingTravelerCode:null,paxTatoo:null,travelerName:null,travelerFirstName:null,travelerLastName:null,travelerGender:null,ageTypeCode:null,travelerBirthday:null,domesticFareCode:null,policyAppliedTravelerYn:null,apisTypeCode:null,passportNationalityCode:null,passportIssueCountryCode:null,passportNo:null,expireDate:null,mileageCards:null,seats:null}),this.getFlManualBookingPutPriceCondition=()=>({travelerSeq:null,travelerName:null,travelerFirstName:null,travelerLastName:null,travelerGender:null,ageTypeCode:null,salesNetAmount:null,salesTaxAmount:null,salesFuelAmount:null,salesQAmount:null,salesTasfAmount:null,salesSumAmount:null,airlineCommCode:null,airlineCommAmount:null,airlineCommVat:null,iataFareAmount:null,mspFareAmount:null}),this.getFlManualBookingPutTicketCondition=()=>({travelerSeq:null,travelerName:null,travelerFirstName:null,travelerLastName:null,travelerGender:null,ageTypeCode:null,billingTypeCode:null,airlineNumberCode:null,ticketNo:null,ticketingDate:null,fopCode:null,cardCode:null,cardNo:null,cardValidPeriod:null,conjunctionTypeCode:null})}}return t.\u0275fac=function(e){return new(e||t)(r.bc(n.f))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);