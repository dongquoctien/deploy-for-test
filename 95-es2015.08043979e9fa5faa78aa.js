(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{"2QGa":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("F97/"),n=i("SeVD"),c=i("pLZG"),o=i("HDdC");function a(t,e,i){return[Object(c.a)(e,i)(new o.a(Object(n.a)(t))),Object(c.a)(Object(s.a)(e,i))(new o.a(Object(n.a)(t)))]}},Onn4:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var s=i("fXoL"),n=i("3Pt+"),c=i("ofXK");const o=["rb"],a=function(){return{radio:!0}},r={provide:n.p,useExisting:Object(s.U)(()=>l),multi:!0};let l=(()=>{class t{constructor(t){this.cd=t,this.onClick=new s.n,this.onFocus=new s.n,this.onBlur=new s.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}handleClick(t,e,i){t.preventDefault(),this.disabled||(this.select(t),i&&e.focus())}select(t){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.onClick.emit(t))}writeValue(t){this.checked=t===this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t}onInputFocus(t){this.focused=!0,this.onFocus.emit(t)}onInputBlur(t){this.focused=!1,this.onModelTouched(),this.onBlur.emit(t)}onChange(t){this.select(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Qb(s.h))},t.\u0275cmp=s.Kb({type:t,selectors:[["app-radio"]],viewQuery:function(t,e){var i;1&t&&s.Kc(o,!0),2&t&&s.Dc(i=s.gc())&&(e.inputViewChild=i.first)},inputs:{value:"value",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",checked:"checked"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[s.Bb([r])],decls:5,vars:11,consts:[[3,"ngClass","click"],["type","radio",1,"radio-control-input",3,"checked","disabled","change","focus","blur"],["rb",""],[1,"radio-control-text"]],template:function(t,e){1&t&&(s.Wb(0,"label",0),s.fc("click",(function(t){return e.select(t)})),s.Wb(1,"input",1,2),s.fc("change",(function(t){return e.onChange(t)}))("focus",(function(t){return e.onInputFocus(t)}))("blur",(function(t){return e.onInputBlur(t)})),s.Vb(),s.Wb(3,"span",3),s.Pc(4),s.Vb(),s.Vb()),2&t&&(s.Eb(e.styleClass),s.pc("ngClass",s.tc(10,a)),s.Cb(1),s.pc("checked",e.checked)("disabled",e.disabled),s.Db("id",e.inputId)("name",e.name)("value",e.value)("tabindex",e.tabindex),s.Cb(3),s.Qc(e.label))},directives:[c.l],encapsulation:2}),t})()},U6NN:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var s=i("fXoL"),n=i("3Pt+"),c=i("LvDl"),o=i("ofXK");function a(t,e){if(1&t&&(s.Wb(0,"option",3),s.Pc(1),s.Vb()),2&t){const t=s.hc();s.pc("ngValue",null),s.Cb(1),s.Qc(t.useAllOptionName)}}function r(t,e){if(1&t&&(s.Wb(0,"option",3),s.Pc(1),s.Vb()),2&t){const t=e.$implicit,i=s.hc();s.pc("ngValue",t),s.Cb(1),s.Qc(i.displayKey?t[i.displayKey]:t)}}const l={provide:n.p,useExisting:Object(s.U)(()=>d),multi:!0};let d=(()=>{class t{constructor(t,e,i,n){this.el=t,this.renderer=e,this.cd=i,this.zone=n,this.dataKey="value",this.displayKey="label",this.useAllOptionYn=!0,this.useAllOptionName="All",this.onChange=new s.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get invalid(){return this.isInvalid}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this.cd.destroyed||this.cd.detectChanges()}get options(){return this._options}set options(t){this._options=t,this.updateSelectedOption(this.value)}ngOnInit(){this.updateSelectedOption(null)}ngOnDestroy(){}compareFn(t,e){return this.dataKey?t[this.dataKey]===e[this.dataKey]:t===e}selectItem(t){this.selectedOption=t,this.value=this._getValue(t),this.onModelChange(this.value),this.onChange.emit({value:this.value,option:t})}writeValue(t){this.value=t,this.updateSelectedOption(t),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t}updateSelectedOption(t){this.selectedOption=this._findOption(t,this.options)}_findOption(t,e){return this.dataKey?c.find(e,e=>e[this.dataKey]===t)||null:t}_getValue(t){return c.isNil(t)?null:t[this.dataKey]}}return t.\u0275fac=function(e){return new(e||t)(s.Qb(s.l),s.Qb(s.E),s.Qb(s.h),s.Qb(s.z))},t.\u0275cmp=s.Kb({type:t,selectors:[["app-selectbox"]],hostAttrs:[1,"select-box"],hostVars:2,hostBindings:function(t,e){2&t&&s.Gb("valid-error",e.invalid)},inputs:{name:"name",styleClass:"styleClass",required:"required",tabindex:"tabindex",dataKey:"dataKey",displayKey:"displayKey",isInvalid:"isInvalid",useAllOptionYn:"useAllOptionYn",useAllOptionName:"useAllOptionName",disabled:"disabled",options:"options"},outputs:{onChange:"onChange"},features:[s.Bb([l])],decls:3,vars:8,consts:[[3,"compareWith","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngIf"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,e){1&t&&(s.Wb(0,"select",0),s.fc("ngModelChange",(function(t){return e.selectItem(t)})),s.Nc(1,a,2,2,"option",1),s.Nc(2,r,2,2,"option",2),s.Vb()),2&t&&(s.pc("compareWith",e.compareFn)("ngModel",e.selectedOption)("disabled",e.disabled),s.Db("name",e.name)("required",e.required)("tabindex",e.tabindex),s.Cb(1),s.pc("ngIf",e.useAllOptionYn),s.Cb(1),s.pc("ngForOf",e.options))},directives:[n.y,n.r,n.u,n.x,o.o,o.n,n.v,n.A],encapsulation:2}),t})()},Zxd9:function(t,e,i){"use strict";i.r(e),i.d(e,"CONTAINERS",(function(){return pe})),i.d(e,"COMPONENTS",(function(){return be})),i.d(e,"VdGdsSetupModule",(function(){return he}));var s={};i.r(s),i.d(s,"getListSuccess",(function(){return y})),i.d(s,"getListFailure",(function(){return D})),i.d(s,"getCompListSuccess",(function(){return A})),i.d(s,"getCompListFailure",(function(){return P})),i.d(s,"getContinentListSuccess",(function(){return F})),i.d(s,"getContinentListFailure",(function(){return $})),i.d(s,"upsertItemSuccess",(function(){return R})),i.d(s,"upsertItemFailure",(function(){return _})),i.d(s,"removeItemsSuccess",(function(){return x})),i.d(s,"removeItemsFailure",(function(){return G})),i.d(s,"loadList",(function(){return N})),i.d(s,"reloadList",(function(){return W})),i.d(s,"initList",(function(){return z})),i.d(s,"loadContinentList",(function(){return T})),i.d(s,"loadCompList",(function(){return Y})),i.d(s,"changeSearchCondition",(function(){return K})),i.d(s,"changePageSize",(function(){return M})),i.d(s,"setGridCheckRowidsAction",(function(){return U})),i.d(s,"setGridStateAction",(function(){return H})),i.d(s,"setGridCheckedStateAction",(function(){return Q})),i.d(s,"removeSelectedGridEntities",(function(){return B})),i.d(s,"openDetailPopup",(function(){return X})),i.d(s,"closeDetailPopup",(function(){return q})),i.d(s,"addSelectedDetailRowInfo",(function(){return J})),i.d(s,"delSelectedDetailRowInfo",(function(){return Z})),i.d(s,"upsertItem",(function(){return tt}));var n=i("ofXK"),c=i("3Pt+"),o=i("snw9"),a=i("kt0X"),r=i("WG3B"),l=i("xoAz"),d=i("wPo9"),u=i("7rOj"),p=i("+NQf"),b=i("6LsY"),h=i("l1P7"),g=i("v7zA"),m=i("7UZF"),O=i("hHe4"),C=i("1OXJ"),f=i("5hwk"),v=i("htEk"),j=i("kKjH"),S=i("qXPF"),L=i("vu/V"),k=i("tyNb"),w=i("XNiG"),V=i("zP0r"),I=i("1G5W"),E=i("LvDl");const y=Object(a.o)("[VdGdsSetup/List] get list success",Object(a.t)()),D=Object(a.o)("[VdGdsSetup/List] get list failure",Object(a.t)()),A=Object(a.o)("[VdGdsSetup/List] get comp list success",Object(a.t)()),P=Object(a.o)("[VdGdsSetup/List] get comp list failure",Object(a.t)()),F=Object(a.o)("[VdGdsSetup/List] get continent list success",Object(a.t)()),$=Object(a.o)("[VdGdsSetup/List] get continent list failure",Object(a.t)()),R=Object(a.o)("[VdGdsSetup/List] upsert item success",Object(a.t)()),_=Object(a.o)("[VdGdsSetup/List] upsert item failure",Object(a.t)()),x=Object(a.o)("[VdGdsSetup/API] remove items success",Object(a.t)()),G=Object(a.o)("[VdGdsSetup/API] remove items failure",Object(a.t)()),N=Object(a.o)("[VdGdsSetup/List] load grid data list",Object(a.t)()),W=Object(a.o)("[VdGdsSetup/List] reload grid data list"),z=Object(a.o)("[VdGdsSetup/List] init grid data list"),T=Object(a.o)("[VdGdsSetup/List] load continent list",Object(a.t)()),Y=Object(a.o)("[VdGdsSetup/List] load comp list",Object(a.t)()),K=Object(a.o)("[VdGdsSetup/List] change search condition",Object(a.t)()),M=Object(a.o)("[VdGdsSetup/List] change page size",Object(a.t)()),U=Object(a.o)("[VdGdsSetup/List] set grid checked rowids",Object(a.t)()),H=Object(a.o)("[VdGdsSetup/List] set grid state",Object(a.t)()),Q=Object(a.o)("[VdGdsSetup/List] set grid checked state",Object(a.t)()),B=Object(a.o)("[VdGdsSetup/List] \uc0ad\uc81c\ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(a.t)()),X=Object(a.o)("[VdGdsSetup/Detail] \uc0c1\uc138\ud31d\uc5c5 \uc5f4\uae30"),q=Object(a.o)("[VdGdsSetup/Detail] \uc0c1\uc138\ud31d\uc5c5 \ub2eb\uae30"),J=Object(a.o)("[VdGdsSetup/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc120\ud0dd",Object(a.t)()),Z=Object(a.o)("[VdGdsSetup/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc81c\uac70"),tt=Object(a.o)("[VdGdsSetup/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(a.t)());var et=i("EVqC");const it=Object(et.a)({selectId:t=>t.rowid,sortComparer:!1}),st=it.getInitialState({loading:!1,reloadToggle:!1,continentList:[],compList:[],searchCondition:{},autoCompleteExt:{},pageSize:20,selectedDetailRowInfo:null,isOpenDetailPopup:!1,gridState:{skip:0,sortInfo:[],filter:{logic:"and",filters:[]}},gridCheckedRowids:null,gridCheckedState:null}),nt=Object(a.q)(st,Object(a.s)(s.loadList,t=>Object.assign(Object.assign({},t),{loading:!0})),Object(a.s)(s.reloadList,t=>Object.assign(Object.assign({},t),{reloadToggle:!t.reloadToggle})),Object(a.s)(s.initList,t=>Object.assign(Object.assign({},t),{loading:!1,reloadToggle:!1,selectedDetailRowInfo:null,isOpenDetailPopup:!1})),Object(a.s)(s.getListSuccess,(t,{dataList:e})=>it.setAll(e,Object.assign(Object.assign({},t),{loading:!1,gridCheckedRowids:null}))),Object(a.s)(s.getListFailure,t=>Object.assign(Object.assign({},t),{loading:!1})),Object(a.s)(s.getContinentListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{continentList:e})),Object(a.s)(s.getCompListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{compList:e})),Object(a.s)(s.changeSearchCondition,(t,{searchCondition:e,autoCompleteExt:i})=>Object.assign(Object.assign({},t),{searchCondition:e,autoCompleteExt:i})),Object(a.s)(s.changePageSize,(t,{pageSize:e})=>Object.assign(Object.assign({},t),{pageSize:e})),Object(a.s)(s.upsertItemSuccess,(t,{upsertItem:e})=>it.upsertOne(e,Object.assign({},t))),Object(a.s)(s.openDetailPopup,t=>Object.assign(Object.assign({},t),{isOpenDetailPopup:!0})),Object(a.s)(s.closeDetailPopup,t=>Object.assign(Object.assign({},t),{isOpenDetailPopup:!1})),Object(a.s)(s.addSelectedDetailRowInfo,(t,{selectedDetailRowInfo:e})=>Object.assign(Object.assign({},t),{selectedDetailRowInfo:e})),Object(a.s)(s.delSelectedDetailRowInfo,t=>Object.assign(Object.assign({},t),{selectedDetailRowInfo:null})),Object(a.s)(s.setGridCheckRowidsAction,(t,{rowids:e})=>Object.assign(Object.assign({},t),{gridCheckedRowids:e})),Object(a.s)(s.setGridStateAction,(t,{gridState:e})=>Object.assign(Object.assign({},t),{gridState:e})),Object(a.s)(s.setGridCheckedStateAction,(t,{gridCheckedState:e})=>Object.assign(Object.assign({},t),{gridCheckedState:e})));function ct(t,e){return Object(a.m)({vdGdsSetupList:nt})(t,e)}const ot=Object(a.p)("vdGdsSetup"),at=Object(a.r)(ot,t=>t.vdGdsSetupList),rt=Object(a.r)(at,t=>t.loading),lt=Object(a.r)(at,t=>t.reloadToggle),dt=Object(a.r)(at,t=>t.continentList),ut=Object(a.r)(at,t=>t.compList),pt=Object(a.r)(at,t=>t.searchCondition),bt=Object(a.r)(at,t=>t.autoCompleteExt),ht=Object(a.r)(at,t=>t.pageSize),gt=Object(a.r)(at,t=>t.selectedDetailRowInfo),mt=Object(a.r)(at,t=>t.isOpenDetailPopup),Ot=it.getSelectors(at).selectAll,Ct=(it.getSelectors(at),Object(a.r)(at,t=>t.gridCheckedRowids)),ft=Object(a.r)(at,t=>t.gridState),vt=Object(a.r)(at,t=>t.gridCheckedState);var jt=i("YY+H"),St=i("fXoL"),Lt=i("LRne"),kt=i("z6cu"),wt=i("eIep"),Vt=i("AytR");const{API_URL:It}=Vt.a,Et={selectEntities:`${It}/admin/vendor/gds-setup`,modifyEntity:`${It}/admin/vendor/gds-setup`,selectDetailCodes:`${It}/common/detail-code`,selectContinents:`${It}/admin/basis/continent`,selectCommonComps:`${It}/common/comp`};var yt=i("tpT/"),Dt=i("VMfx");let At=(()=>{class t{constructor(t,e){this.api=t,this.languageService=e}getList(t){const e=E.assign({},this.api.defaultParams,{condition:t});return this.api.post(Et.selectEntities,e).pipe(Object(wt.a)(t=>{var e;if(t.succeedYn){const i=this._addRowid(null===(e=t.result)||void 0===e?void 0:e.list);return Object(Lt.a)(i)}return Object(kt.a)(t||"api response error")}))}upsertItem(t){const e=new URL(Et.selectEntities),i=E.assign({},this.api.defaultParams,{condition:Object.assign(Object.assign({},t),{redirectUrl:e.pathname})});return this.api.put(Et.modifyEntity,i).pipe(Object(wt.a)(t=>{if(t.succeedYn){const e=t.result.list[0];return Object(Lt.a)(Object.assign({id:e.rowid},e))}return Object(kt.a)(t||"api response error")}))}removeItems(t){const e=E.assign({},this.api.defaultParams,{condition:t});return this.api.delete(Et.selectEntities,e).pipe(Object(wt.a)(t=>t.succeedYn?Object(Lt.a)(t.result&&t.result.counts):Object(kt.a)(t||"api response error")))}getCommonDetailCodeList(t){const e=E.assign({},this.api.defaultParams,{condition:t});return this.api.post(Et.selectDetailCodes,e).pipe(Object(wt.a)(t=>t.succeedYn?Object(Lt.a)(t.result.list):Object(kt.a)(t||"api response error")))}getContinentList(t){const e=E.assign({},this.api.defaultParams,{condition:t});return this.api.post(Et.selectContinents,e).pipe(Object(wt.a)(t=>{if(t.succeedYn){const e=[];return Object(Lt.a)(e.concat(t.result.list.map(t=>({label:"KO"===this.languageService.currentLanguage?t.continentNameKo:t.continentNameEn,value:t.continentCode}))))}return Object(kt.a)(t||"api response error")}))}getCompList(t){const e=E.assign({},this.api.defaultParams,{condition:t});return this.api.post(Et.selectCommonComps,e).pipe(Object(wt.a)(t=>t.succeedYn?Object(Lt.a)(t.result.list):Object(kt.a)(t||"api response error")))}_addRowid(t){return E.isNil(t)?[]:t.map((t,e)=>Object.assign(Object.assign({},t),{rowid:String(e)}))}}return t.\u0275fac=function(e){return new(e||t)(St.bc(yt.a),St.bc(Dt.a))},t.\u0275prov=St.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Pt=(()=>{class t{constructor(t){this.fb=t,this.generateGridColumns=()=>[{field:"continentNameEn",title:"Continent Name",type:"text"},{field:"amadeusAirlineCodeList",title:"Amadeus",type:"text"},{field:"sabreAirlineCodeList",title:"Sabre",type:"text"},{field:"controlRemark",title:"Control Remark",type:"text"},{field:"lastUpdateName",title:"Last Update User",type:"text"},{field:"lastUpdateDatetime",title:"Last Update Time",type:"text",template:"updateTpl",style:{"text-align":"center"}}],this.generateListSearchForm=()=>this.fb.group({compCodes:[null],continentCode:[null]}),this.initListSearch=()=>({compCodes:null,continentCode:null}),this.generatePutForm=()=>this.fb.group({rowid:[null],compCode:[null,[c.z.required]],continentCode:[null,[c.z.required]],gdsType:["A",[c.z.required]],amadeusAirlineCodeList:[null,[this.airlineCodesStringValidator]],sabreAirlineCodeList:[null,[this.airlineCodesStringValidator]],controlRemark:[null]},{validators:[this.oneOfAirlineCodeValidator]}),this.initPutFormData=()=>({rowid:null,compCode:null,continentCode:null,amadeusAirlineCodeList:null,sabreAirlineCodeList:null,controlRemark:null})}oneOfAirlineCodeValidator(t){if(!t)return null;const e=E.isNil(t.get("amadeusAirlineCodeList").value),i=E.isNil(t.get("sabreAirlineCodeList").value);return e&&i?{oneOfAirlineListRequired:!0}:null}airlineCodesStringValidator(t){if(!t)return null;const e=/^[A-Z0-9+]{2}$/,i=t.value;return i&&i.split(",").length>0&&i.split(",").some(t=>!e.test(t))&&"*"!==i?{airlineInvalid:!0}:null}}return t.\u0275fac=function(e){return new(e||t)(St.bc(c.f))},t.\u0275prov=St.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ft=i("+Sob"),$t=i("U6NN");let Rt=(()=>{class t{constructor(t){this._dataService=t,this.selectAutoCompleteEvent=new St.n,this.clickSearchEvent=new St.n,this.clickResetEvent=new St.n,this.changeSearchConditionEvent=new St.n,this.searchForm=this._dataService.generateListSearchForm()}get searchCondition(){return this._searchCondition}set searchCondition(t){this._searchCondition=t,this.searchFormData=this._setSearchFormData(t),this._initThisState(t)}get searchFormValid(){return this.searchForm.valid}ngOnInit(){this._initThisState()}onSubmit(){this.clickSearchEvent.emit({searchCondition:this.searchForm.value})}onReset(){this.clickResetEvent.emit()}_initThisState(t){}_setSearchFormData(t){const e=this._dataService.initListSearch();return Object.assign({},e,E.pick(t,Object.keys(e)))}}return t.\u0275fac=function(e){return new(e||t)(St.Qb(Pt))},t.\u0275cmp=St.Kb({type:t,selectors:[["app-vd-gds-setup-search"]],inputs:{continentList:"continentList",compList:"compList",autoCompleteExt:"autoCompleteExt",searchCondition:"searchCondition"},outputs:{selectAutoCompleteEvent:"selectAutoCompleteEvent",clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent",changeSearchConditionEvent:"changeSearchConditionEvent"},decls:12,vars:3,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-1"],[1,"form-label"],["formControlName","continentCode","useAllOptionName","Select",1,"d-inline-flex","flex-fill",3,"options"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(t,e){1&t&&(St.Wb(0,"form",0),St.fc("ngSubmit",(function(){return e.onSubmit()})),St.Wb(1,"div",1),St.Wb(2,"div",2),St.Wb(3,"div",3),St.Wb(4,"span",4),St.Pc(5,"Continent"),St.Vb(),St.Rb(6,"app-selectbox",5),St.Vb(),St.Vb(),St.Vb(),St.Wb(7,"div",6),St.Wb(8,"button",7),St.Pc(9,"Search"),St.Vb(),St.Wb(10,"button",8),St.fc("click",(function(){return e.onReset()})),St.Pc(11,"Reset"),St.Vb(),St.Vb(),St.Vb()),2&t&&(St.pc("formGroup",e.searchForm)("connectForm",e.searchFormData),St.Cb(6),St.pc("options",e.continentList))},directives:[c.B,c.s,c.k,Ft.a,$t.a,c.r,c.i],styles:[""],changeDetection:0}),t})();var _t=i("G4DP"),xt=i("EsKh"),Gt=i("bMKz");let Nt=(()=>{class t{constructor(){this.clickAddEvent=new St.n,this.clickDelEvent=new St.n,this.changePageSizeEvent=new St.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onClickAdd(){this.clickAddEvent.emit()}onClickDel(){this.clickDelEvent.emit()}onChangePageSize(t){this.changePageSizeEvent.emit(t.value)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=St.Kb({type:t,selectors:[["app-vd-gds-setup-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{clickAddEvent:"clickAddEvent",clickDelEvent:"clickDelEvent",changePageSizeEvent:"changePageSizeEvent"},decls:6,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(t,e){1&t&&(St.Wb(0,"div",0),St.Wb(1,"strong",1),St.Pc(2),St.Vb(),St.Wb(3,"div",2),St.Wb(4,"div",3),St.Wb(5,"app-selectbox",4),St.fc("onChange",(function(t){return e.onChangePageSize(t)})),St.Vb(),St.Vb(),St.Vb(),St.Vb()),2&t&&(St.Cb(2),St.Qc(e.loading?"":e.totalCount),St.Cb(3),St.pc("options",e.pageSizeOptions)("ngModel",e.currentPageSize)("useAllOptionYn",!1))},directives:[$t.a,c.r,c.u],styles:[""],changeDetection:0}),t})();var Wt=i("kDLv"),zt=i("Onn4"),Tt=i("gbCm");function Yt(t,e){if(1&t&&St.Rb(0,"app-input-text",17),2&t){const t=St.hc();St.pc("isInvalid",t.checkIsInvalid("amadeusAirlineCodeList")||t.checkOneOfAirlineCodeInvalid())}}function Kt(t,e){if(1&t&&St.Rb(0,"app-input-text",18),2&t){const t=St.hc();St.pc("isInvalid",t.checkIsInvalid("sabreAirlineCodeList")||t.checkOneOfAirlineCodeInvalid())}}let Mt=(()=>{class t{constructor(t){this._dataService=t,this.submitEvent=new St.n,this.closeEvent=new St.n,this._$unsubscribe=new w.a,this.upsertForm=this._dataService.generatePutForm()}get rowItem(){return this._rowitem}set rowItem(t){this._rowitem=t,this.upsertFormData=this.setPutFormData(t),this._initThisState(t)}ngAfterContentInit(){this._initSubscription(),this._initThisState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.upsertForm.invalid)return void(this._checkValid=!0);const t=this.setPutCondition(),e=this.upsertForm.get("gdsType").value;"A"===e&&(t.sabreAirlineCodeList="*"),"S"===e&&(t.amadeusAirlineCodeList="*"),this.submitEvent.emit(t),this._checkValid=!1}onClose(){this.closeEvent.emit()}checkIsInvalid(t){return this._checkValid&&this.upsertForm.get(t)&&this.upsertForm.get(t).invalid}checkOneOfAirlineCodeInvalid(){var t;return this._checkValid&&!0===(null===(t=this.upsertForm.errors)||void 0===t?void 0:t.oneOfAirlineListRequired)}_initThisState(t){this._checkValid=!1,t&&this.upsertForm.patchValue({gdsType:"*"===this.rowItem.sabreAirlineCodeList?"A":"S"})}setPutFormData(t){const e=this._dataService.initPutFormData();return E.isNil(t)?e:Object.assign({},e,E.pick(t,Object.keys(e)))}setPutCondition(){const t=this._dataService.initPutFormData(),e=this.upsertForm.getRawValue();let i=Object.assign({},E.pick(e,Object.keys(t)));return E.isNil(i.rowid)&&(i=E.omit(i,["rowid"])),i}_initSubscription(){this.upsertForm.get("gdsType").valueChanges.pipe(Object(I.a)(this._$unsubscribe)).subscribe(t=>{"A"===t?(this.upsertForm.get("amadeusAirlineCodeList").enable(),this.upsertForm.get("sabreAirlineCodeList").disable()):(this.upsertForm.get("amadeusAirlineCodeList").disable(),this.upsertForm.get("sabreAirlineCodeList").enable()),this.upsertForm.patchValue({amadeusAirlineCodeList:"A"===t&&this.rowItem?this.rowItem.amadeusAirlineCodeList:null,sabreAirlineCodeList:"S"===t&&this.rowItem?this.rowItem.sabreAirlineCodeList:null})})}}return t.\u0275fac=function(e){return new(e||t)(St.Qb(Pt))},t.\u0275cmp=St.Kb({type:t,selectors:[["app-vd-gds-setup-form"]],inputs:{rowItem:"rowItem",continentList:"continentList",compList:"compList"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:44,vars:7,consts:[[1,"modal-body"],[3,"formGroup","connectForm","ngSubmit"],[1,"table","table-bordered"],["width","150px"],["scope","row",1,"th-bg"],["formControlName","continentCode",3,"options","isInvalid","disabled"],[1,"form-group"],["formControlName","gdsType","name","gdsType","value","A","label","Amadeus"],["formControlName","gdsType","name","gdsType","value","S","label","Sabre",1,"mr15"],[1,"color-danger"],["formControlName","amadeusAirlineCodeList","inputFormat","upperCase",3,"isInvalid",4,"ngIf"],["formControlName","sabreAirlineCodeList","inputFormat","upperCase",3,"isInvalid",4,"ngIf"],[1,"textarea"],["cols","30","rows","3","formControlName","controlRemark"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],["type","button",1,"btn","btn-light","sm",3,"click"],["formControlName","amadeusAirlineCodeList","inputFormat","upperCase",3,"isInvalid"],["formControlName","sabreAirlineCodeList","inputFormat","upperCase",3,"isInvalid"]],template:function(t,e){1&t&&(St.Wb(0,"div",0),St.Wb(1,"form",1),St.fc("ngSubmit",(function(){return e.onSubmit()})),St.Wb(2,"div",2),St.Wb(3,"table"),St.Wb(4,"caption"),St.Pc(5," GDS Set Up Info. "),St.Vb(),St.Wb(6,"colgroup"),St.Rb(7,"col",3),St.Rb(8,"col"),St.Vb(),St.Wb(9,"tbody"),St.Wb(10,"tr"),St.Wb(11,"th",4),St.Pc(12,"Continent Name"),St.Rb(13,"sup"),St.Vb(),St.Wb(14,"td"),St.Rb(15,"app-selectbox",5),St.Vb(),St.Vb(),St.Wb(16,"tr"),St.Wb(17,"th",4),St.Pc(18,"GDS"),St.Rb(19,"sup"),St.Vb(),St.Wb(20,"td"),St.Wb(21,"div",6),St.Rb(22,"app-radio",7),St.Rb(23,"app-radio",8),St.Wb(24,"p",9),St.Pc(25,"\u203b Not seleceted GDS will be applied all except below airlines."),St.Vb(),St.Vb(),St.Vb(),St.Vb(),St.Wb(26,"tr"),St.Wb(27,"th",4),St.Pc(28,"Airline Code List"),St.Rb(29,"sup"),St.Vb(),St.Wb(30,"td"),St.Nc(31,Yt,1,1,"app-input-text",10),St.Nc(32,Kt,1,1,"app-input-text",11),St.Vb(),St.Vb(),St.Wb(33,"tr"),St.Wb(34,"th",4),St.Pc(35,"Control Remark"),St.Vb(),St.Wb(36,"td"),St.Wb(37,"div",12),St.Rb(38,"textarea",13),St.Vb(),St.Vb(),St.Vb(),St.Vb(),St.Vb(),St.Vb(),St.Wb(39,"div",14),St.Wb(40,"button",15),St.Pc(41,"Save"),St.Vb(),St.Wb(42,"button",16),St.fc("click",(function(){return e.onClose()})),St.Pc(43,"Cancel"),St.Vb(),St.Vb(),St.Vb(),St.Vb()),2&t&&(St.Cb(1),St.pc("formGroup",e.upsertForm)("connectForm",e.upsertFormData),St.Cb(14),St.pc("options",e.continentList)("isInvalid",e.checkIsInvalid("continentCode"))("disabled",!0),St.Cb(16),St.pc("ngIf","A"===e.upsertForm.value.gdsType),St.Cb(1),St.pc("ngIf","S"===e.upsertForm.value.gdsType))},directives:[c.B,c.s,c.k,Ft.a,$t.a,c.r,c.i,zt.a,n.o,c.c,Tt.a],styles:[""],changeDetection:0}),t})();function Ut(t,e){1&t&&(St.Wb(0,"span"),St.Pc(1,"Y"),St.Vb())}function Ht(t,e){1&t&&(St.Wb(0,"span"),St.Pc(1,"N"),St.Vb())}function Qt(t,e){if(1&t&&(St.Nc(0,Ut,2,0,"span",9),St.Nc(1,Ht,2,0,"span",9)),2&t){const t=e.$implicit;St.pc("ngIf",!0===t.gridYn),St.Cb(1),St.pc("ngIf",!1===t.gridYn)}}function Bt(t,e){1&t&&(St.Wb(0,"span"),St.Pc(1,"Y"),St.Vb())}function Xt(t,e){1&t&&(St.Wb(0,"span"),St.Pc(1,"N"),St.Vb())}function qt(t,e){if(1&t&&(St.Nc(0,Bt,2,0,"span",9),St.Nc(1,Xt,2,0,"span",9)),2&t){const t=e.$implicit;St.pc("ngIf",!0===t.useYn),St.Cb(1),St.pc("ngIf",!1===t.useYn)}}function Jt(t,e){if(1&t&&(St.Wb(0,"span"),St.Pc(1),St.Vb()),2&t){const t=e.$implicit;St.Cb(1),St.Qc(t.lastUpdateDatetime)}}function Zt(t,e){if(1&t){const t=St.Xb();St.Wb(0,"app-vd-gds-setup-form",10),St.fc("submitEvent",(function(e){return St.Fc(t),St.hc().submitUpsertHandler(e)}))("closeEvent",(function(){return St.Fc(t),St.hc().closeUpsertHandler()})),St.ic(1,"async"),St.ic(2,"async"),St.ic(3,"async"),St.Vb()}if(2&t){const t=St.hc();St.pc("compList",St.jc(1,3,t.compList$))("continentList",St.jc(2,5,t.continentList$))("rowItem",St.jc(3,7,t.selectedItem$))}}const te=function(t,e,i){return{gridYnTpl:t,useYnTpl:e,updateTpl:i}};let ee=(()=>{class t{constructor(t,e,i,s,n){this.store=t,this.authStore=e,this._dataService=i,this.alertService=s,this.UserConditionService=n,this.unsubscribe$=new w.a,this.loading$=t.pipe(Object(a.u)(rt)),this.reloadToggle$=t.pipe(Object(a.u)(lt)),this.continentList$=t.pipe(Object(a.u)(dt)),this.compList$=t.pipe(Object(a.u)(ut)),this.searchCondition$=t.pipe(Object(a.u)(pt)),this.autoCompleteExt$=t.pipe(Object(a.u)(bt)),this.gridDataList$=t.pipe(Object(a.u)(Ot)),this.listPageSize$=t.pipe(Object(a.u)(ht)),this.loginUserNo$=e.pipe(Object(a.u)(jt.t)),this.isOpenDetailPopup$=t.pipe(Object(a.u)(mt)),this.selectedItem$=t.pipe(Object(a.u)(gt)),this.columns=this._dataService.generateGridColumns(),this.gridCheckedRowids$=t.pipe(Object(a.u)(Ct)),this.gridState$=t.pipe(Object(a.u)(ft)),this.gridCheckedState$=t.pipe(Object(a.u)(vt)),this.storeId$=e.pipe(Object(a.u)(jt.o)),this._initSubscription()}ngOnInit(){this.store.dispatch(s.loadContinentList({condition:{parentOnlyYn:!0}})),this.store.dispatch(s.loadCompList({condition:{compTypeCodes:["CMP01","CMP03"],limits:[0,100]}})),this.storeId$.subscribe(t=>this._storeId=t),this.initSearchCondition()}ngOnDestroy(){this.store.dispatch(s.initList()),this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(s.setGridCheckRowidsAction({rowids:this.gridEl.checkedRows})),this.store.dispatch(s.setGridStateAction({gridState:this.gridEl.thisGridState})),this.store.dispatch(s.setGridCheckedStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}changePageSizeHandler(t){this.store.dispatch(s.changePageSize({pageSize:t}))}clickAddHandler(){this.store.dispatch(s.openDetailPopup())}clickDelHandler(){var t;(null===(t=this.gridEl.checkedRows)||void 0===t?void 0:t.length)>0?this.alertService.confirm({message:"Are you sure you want to delete the selected items?",accept:()=>{this.store.dispatch(s.removeSelectedGridEntities({rowids:this.gridEl.checkedRows}))},reject:()=>{}}):this.alertService.alert("There are no items selected.")}clickSearchHandler({searchCondition:t,autoCompleteExt:e}){const i=this._setSearchCondition(t);this.store.dispatch(s.loadList({condition:i})),this.store.dispatch(s.changeSearchCondition({searchCondition:E.cloneDeep(i),autoCompleteExt:e})),this.UserConditionService.setSearchSettingSessionStorage(i,this._storeId)}clickResetHandler(){this.store.dispatch(s.changeSearchCondition({searchCondition:this._dataService.initListSearch(),autoCompleteExt:{}}))}dbClickRowHandler(t){this.store.dispatch(s.addSelectedDetailRowInfo({selectedDetailRowInfo:E.cloneDeep(t)})),this.clickAddHandler()}submitUpsertHandler(t){const e=E.cloneDeep(t);this.store.dispatch(s.upsertItem({upsertCondition:e}))}closeUpsertHandler(){this.store.dispatch(s.closeDetailPopup()),this.store.dispatch(s.delSelectedDetailRowInfo())}_initSubscription(){this.reloadToggle$.pipe(Object(V.a)(1),Object(I.a)(this.unsubscribe$)).subscribe(()=>{this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()})}_setSearchCondition(t){return E.omitBy(t,t=>E.isNil(t)||""===t)}initSearchCondition(){if(this.searchCondition$.subscribe(t=>this._searchCondition=t),this.gridDataList$.subscribe(t=>this._searchGridDataList=t),this.autoCompleteExt$.subscribe(t=>this._autoCompleteExt=t),0===E.size(this._searchCondition)&&0===E.size(this._searchGridDataList)){const t=this._dataService.initListSearch(),e=this.UserConditionService.selectSearchSetting(t,this._storeId,this._autoCompleteExt);this.store.dispatch(s.changeSearchCondition({searchCondition:e[0],autoCompleteExt:e[1]}))}}}return t.\u0275fac=function(e){return new(e||t)(St.Qb(a.h),St.Qb(a.h),St.Qb(Pt),St.Qb(xt.a),St.Qb(Gt.a))},t.\u0275cmp=St.Kb({type:t,selectors:[["app-vd-gds-setup"]],viewQuery:function(t,e){var i;1&t&&(St.Xc(Rt,!0),St.Xc(_t.a,!0)),2&t&&(St.Dc(i=St.gc())&&(e.searchFormEl=i.first),St.Dc(i=St.gc())&&(e.gridEl=i.first))},decls:26,vars:49,consts:[[3,"compList","continentList","autoCompleteExt","searchCondition","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","clickAddEvent","clickDelEvent","changePageSizeEvent"],["gridYnTpl",""],["useYnTpl",""],["updateTpl",""],[3,"gridLoading","gridState","checkedState","columns","pageSize","dataList","templates","dbClickRowEvent"],["gridBasis",""],["modalSize","sm","modalContentClass","pd-all","header","GDS Set Up Info.",3,"visible","modal","visibleChange"],[3,"compList","continentList","rowItem","submitEvent","closeEvent",4,"ngIf"],[4,"ngIf"],[3,"compList","continentList","rowItem","submitEvent","closeEvent"]],template:function(t,e){if(1&t&&(St.Wb(0,"app-vd-gds-setup-search",0),St.fc("clickSearchEvent",(function(t){return e.clickSearchHandler(t)}))("clickResetEvent",(function(){return e.clickResetHandler()})),St.ic(1,"async"),St.ic(2,"async"),St.ic(3,"async"),St.ic(4,"async"),St.Vb(),St.Wb(5,"app-vd-gds-setup-control",1),St.fc("clickAddEvent",(function(){return e.clickAddHandler()}))("clickDelEvent",(function(){return e.clickDelHandler()}))("changePageSizeEvent",(function(t){return e.changePageSizeHandler(t)})),St.ic(6,"async"),St.ic(7,"async"),St.ic(8,"async"),St.Vb(),St.Nc(9,Qt,2,2,"ng-template",null,2,St.Oc),St.Nc(11,qt,2,2,"ng-template",null,3,St.Oc),St.Nc(13,Jt,2,1,"ng-template",null,4,St.Oc),St.Wb(15,"app-grid-basis",5,6),St.fc("dbClickRowEvent",(function(t){return e.dbClickRowHandler(t)})),St.ic(17,"async"),St.ic(18,"async"),St.ic(19,"async"),St.ic(20,"async"),St.ic(21,"async"),St.Vb(),St.Wb(22,"app-dialog",7),St.fc("visibleChange",(function(){return e.closeUpsertHandler()})),St.ic(23,"async"),St.Nc(24,Zt,4,9,"app-vd-gds-setup-form",8),St.ic(25,"async"),St.Vb()),2&t){const t=St.Ec(10),i=St.Ec(12),s=St.Ec(14);St.pc("compList",St.jc(1,17,e.compList$))("continentList",St.jc(2,19,e.continentList$))("autoCompleteExt",St.jc(3,21,e.autoCompleteExt$))("searchCondition",St.jc(4,23,e.searchCondition$)),St.Cb(5),St.pc("loading",St.jc(6,25,e.loading$))("currentPageSize",St.jc(7,27,e.listPageSize$))("totalCount",St.jc(8,29,e.gridDataList$).length),St.Cb(10),St.pc("gridLoading",St.jc(17,31,e.loading$))("gridState",St.jc(18,33,e.gridState$))("checkedState",St.jc(19,35,e.gridCheckedState$))("columns",e.columns)("pageSize",St.jc(20,37,e.listPageSize$))("dataList",St.jc(21,39,e.gridDataList$))("templates",St.wc(45,te,t,i,s)),St.Cb(7),St.pc("visible",St.jc(23,41,e.isOpenDetailPopup$))("modal",!0),St.Cb(2),St.pc("ngIf",St.jc(25,43,e.isOpenDetailPopup$))}},directives:[Rt,Nt,_t.a,Wt.a,n.o,Mt],pipes:[n.b],encapsulation:2,changeDetection:0}),t})();const ie=[{path:"",component:ee,data:{title:"GDS\ubcc4 \ud56d\uacf5\uc0ac \uc124\uc815"}}];let se=(()=>{class t{}return t.\u0275mod=St.Ob({type:t}),t.\u0275inj=St.Nb({factory:function(e){return new(e||t)},imports:[[k.f.forChild(ie)],k.f]}),t})();var ne=i("lJxs"),ce=i("JIr8"),oe=i("vkgz"),ae=i("bOdf"),re=i("zp1y"),le=i("Xb6A"),de=i("AtUx");let ue=(()=>{class t{constructor(t,e,i,n,c,r){this.actions$=t,this.service=e,this._errorService=i,this.loader=n,this.alertService=c,this.store=r,this.loadList$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(s.loadList),Object(wt.a)(({condition:t})=>this.service.getList(t).pipe(Object(ne.a)(t=>s.getListSuccess({dataList:t})),Object(ce.a)(t=>{const e="List lookup failed. Please try again in a momentarily.",i=[s.getListFailure({error:e})];return this._catchErr(t,e,i),[]}))))),this.removeItems$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(s.removeSelectedGridEntities),Object(wt.a)(({rowids:t})=>this.service.removeItems({rowids:t}).pipe(Object(ne.a)(t=>({succeedYn:!0})),Object(ce.a)(t=>Object(Lt.a)({succeedYn:!1,error:t})))),Object(oe.a)(({succeedYn:t,error:e})=>{if(t){const t=[s.reloadList(),s.delSelectedDetailRowInfo()];this._runPage("Your data has been deleted.",t)}else{const t=[s.removeItemsFailure({error:"Deletion failed."})];this._catchErr(e,"Deletion failed.",t)}})),{dispatch:!1}),this.upsertItem$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(s.upsertItem),Object(wt.a)(({upsertCondition:t})=>this.service.upsertItem(t).pipe(Object(ne.a)(()=>({succeedYn:!0})),Object(ce.a)(t=>Object(Lt.a)({succeedYn:!1,error:t})))),Object(oe.a)(({succeedYn:t,error:e})=>{if(t){const t="Your data has been saved.",e=[s.reloadList(),s.closeDetailPopup(),s.delSelectedDetailRowInfo()];this._runPage(t,e)}else{const t="Failed to save.",i=[s.upsertItemFailure({error:t})];this._catchErr(e,t,i)}})),{dispatch:!1}),this.loadContinentList$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(s.loadContinentList),Object(ae.a)(t=>Object(Lt.a)(t).pipe(Object(re.a)(this.continentList$))),Object(wt.a)(([{condition:t},e])=>E.isNil(e)||0===e.length?this.service.getContinentList(t).pipe(Object(ne.a)(t=>s.getContinentListSuccess({dataList:t})),Object(ce.a)(t=>{const e="\ub300\ub959\ucf54\ub4dc \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",i=[s.getContinentListFailure({error:e})];return this._catchErr(t,e,i),[]})):Object(Lt.a)(s.getContinentListSuccess({dataList:e}))))),this.loadCompList$=Object(o.c)(()=>this.actions$.pipe(Object(o.d)(s.loadCompList),Object(ae.a)(t=>Object(Lt.a)(t).pipe(Object(re.a)(this.compList$))),Object(wt.a)(([{condition:t},e])=>E.isNil(e)||0===e.length?this.service.getCompList(t).pipe(Object(ne.a)(t=>s.getCompListSuccess({dataList:t})),Object(ce.a)(t=>{const e="\ud68c\uc0ac\ucf54\ub4dc \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",i=[s.getCompListFailure({error:e})];return this._catchErr(t,e,i),[]})):Object(Lt.a)(s.getCompListSuccess({dataList:e}))))),this.continentList$=this.store.pipe(Object(a.u)(dt)),this.compList$=this.store.pipe(Object(a.u)(ut))}_runPage(t,e){this.alertService.alert({message:t,accept:(null==e?void 0:e.length)>0?()=>{e.forEach(t=>{this.store.dispatch(t)})}:()=>{}})}_catchErr(t,e,i){const s=this._errorService.errorHandler(t,e);E.isNil(s)||(E.isNil(s.accept)&&(s.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(t=>{this.store.dispatch(t)})}:()=>{}),this.alertService.alert(s))}}return t.\u0275fac=function(e){return new(e||t)(St.bc(o.a),St.bc(At),St.bc(le.a),St.bc(de.a),St.bc(xt.a),St.bc(a.h))},t.\u0275prov=St.Mb({token:t,factory:t.\u0275fac}),t})();const pe=[ee],be=[Nt,Mt,Rt];let he=(()=>{class t{}return t.\u0275mod=St.Ob({type:t}),t.\u0275inj=St.Nb({factory:function(e){return new(e||t)},imports:[[n.c,c.m,c.w,r.m,l.a,d.a,u.a,f.a,p.a,b.a,h.a,g.a,m.a,O.a,C.a,j.a,v.a,L.a,se,S.a,a.j.forFeature("vdGdsSetup",ct),o.b.forFeature([ue])]]}),t})()}}]);