(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"4qxg":function(e,t,o){"use strict";o.d(t,"a",(function(){return B}));var n=o("fXoL"),i=o("3Pt+"),a=o("XNiG"),r=o("LvDl"),s=o("KTtZ"),l=o("1G5W"),c=o("JX91"),u=o("zP0r"),b=o("kt0X"),d=o("5uJM"),p=o("EsKh"),m=o("xDUJ"),h=o("ofXK"),g=o("Onn4"),f=o("gbCm"),P=o("U6NN"),C=o("rbKv"),y=o("kd+X"),O=o("LVFn"),v=o("pb6r");function V(e,t){if(1&e){const e=n.Xb();n.Wb(0,"li"),n.Wb(1,"app-checkbox",79),n.fc("ngModelChange",(function(t){return n.Fc(e),n.hc().checkedAllPlan=t}))("onChange",(function(t){return n.Fc(e),n.hc().onPlanCheckAll(t)})),n.Vb(),n.Vb()}if(2&e){const e=n.hc();n.Cb(1),n.pc("ngModel",e.checkedAllPlan)("value",!0)("disabled",e.isCopyMode||e.isModifyMode||e.addWithOnlyDate)}}function k(e,t){if(1&e){const e=n.Xb();n.Wb(0,"li"),n.Wb(1,"app-checkbox",80),n.fc("ngModelChange",(function(t){return n.Fc(e),n.hc().checkedPlanList=t}))("onChange",(function(){n.Fc(e);const o=t.$implicit;return n.hc().onPlanCheck(o)})),n.Vb(),n.Vb()}if(2&e){const e=t.$implicit,o=n.hc();n.Cb(1),n.pc("ngModel",o.checkedPlanList)("value",null==e?null:e.vendorRoomPlanSeq)("label",o.planLabel(e))("disabled",o.isCopyMode||o.isModifyMode||o.addWithOnlyDate)}}function I(e,t){if(1&e&&(n.Wb(0,"div",14),n.Rb(1,"app-radio",81),n.Rb(2,"app-radio",82),n.Vb()),2&e){const e=n.hc();n.Gb("valid-error",e.checkIsInvalid("__specialPromotionTypeCode")),n.Cb(1),n.pc("value",e._SPECIAL_PROMOTION_TYPE.EARLY_BIRD_AND_MIN_NIGHTS),n.Cb(1),n.pc("value",e._SPECIAL_PROMOTION_TYPE.LAST_MINUTE_AND_MIN_NIGHTS)}}function D(e,t){if(1&e&&(n.Wb(0,"div",14),n.Wb(1,"div",83),n.Rb(2,"app-input-text",84),n.Vb(),n.Pc(3," Days in Advance "),n.Vb()),2&e){const e=n.hc();n.Cb(2),n.pc("isInvalid",e.checkIsInvalid("earlyBirdDays"))}}function M(e,t){if(1&e&&(n.Wb(0,"div",14),n.Pc(1," Within "),n.Wb(2,"div",85),n.Rb(3,"app-input-text",86),n.Vb(),n.Pc(4," Days until check in "),n.Vb()),2&e){const e=n.hc();n.Cb(3),n.pc("isInvalid",e.checkIsInvalid("lastMinuteDays"))}}function F(e,t){if(1&e&&(n.Wb(0,"div",14),n.Wb(1,"div",83),n.Rb(2,"app-input-text",87),n.Vb(),n.Pc(3," Min. Nights "),n.Vb()),2&e){const e=n.hc();n.Cb(2),n.pc("isInvalid",e.checkIsInvalid("minNights"))}}function T(e,t){if(1&e&&(n.Wb(0,"div",14),n.Wb(1,"div",83),n.Rb(2,"app-input-text",88),n.Vb(),n.Pc(3," Nth Night Free "),n.Vb()),2&e){const e=n.hc();n.Cb(2),n.pc("isInvalid",e.checkIsInvalid("nthNightFree"))}}function j(e,t){if(1&e&&(n.Ub(0),n.Wb(1,"div",83),n.Rb(2,"app-input-text",84),n.Vb(),n.Wb(3,"span",89),n.Pc(4,"Days in Advance"),n.Vb(),n.Wb(5,"span",90),n.Pc(6,"&"),n.Vb(),n.Wb(7,"div",85),n.Rb(8,"app-input-text",87),n.Vb(),n.Wb(9,"span",89),n.Pc(10,"Min. Nights"),n.Vb(),n.Tb()),2&e){const e=n.hc(2);n.Cb(2),n.pc("isInvalid",e.checkIsInvalid("earlyBirdDays")),n.Cb(6),n.pc("isInvalid",e.checkIsInvalid("minNights"))}}function N(e,t){if(1&e&&(n.Ub(0),n.Wb(1,"span",89),n.Pc(2,"Within"),n.Vb(),n.Wb(3,"div",85),n.Rb(4,"app-input-text",86),n.Vb(),n.Wb(5,"span",89),n.Pc(6,"Days until check in"),n.Vb(),n.Wb(7,"span",90),n.Pc(8,"&"),n.Vb(),n.Wb(9,"div",85),n.Rb(10,"app-input-text",87),n.Vb(),n.Wb(11,"span",89),n.Pc(12,"Min. Nights"),n.Vb(),n.Tb()),2&e){const e=n.hc(2);n.Cb(4),n.pc("isInvalid",e.checkIsInvalid("lastMinuteDays")),n.Cb(6),n.pc("isInvalid",e.checkIsInvalid("minNights"))}}function _(e,t){if(1&e&&(n.Wb(0,"div",14),n.Nc(1,j,11,2,"ng-container",5),n.Nc(2,N,13,2,"ng-container",5),n.Vb()),2&e){const e=n.hc();n.Cb(1),n.pc("ngIf",e.upsertForm.get("__specialPromotionTypeCode").value===e._SPECIAL_PROMOTION_TYPE.EARLY_BIRD_AND_MIN_NIGHTS),n.Cb(1),n.pc("ngIf",e.upsertForm.get("__specialPromotionTypeCode").value===e._SPECIAL_PROMOTION_TYPE.LAST_MINUTE_AND_MIN_NIGHTS)}}const W=function(){return{standalone:!0}};function S(e,t){if(1&e){const e=n.Xb();n.Wb(0,"app-radio",91),n.fc("ngModelChange",(function(t){return n.Fc(e),n.hc().cancelPenaltyBasisCode=t})),n.Vb()}if(2&e){const e=t.$implicit,o=n.hc();n.qc("label",e.label),n.pc("disabled",o.isCancelPenaltyBasisCodeControlDisabled)("ngModel",o.cancelPenaltyBasisCode)("ngModelOptions",n.tc(5,W))("value",e.value)}}const Y=function(e,t){return{"fa-plus":e,"fa-minus":t}};function L(e,t){if(1&e){const e=n.Xb();n.Wb(0,"div",14),n.Ub(1,92),n.Wb(2,"div",93),n.Rb(3,"app-input-text",94),n.Vb(),n.Wb(4,"span",95),n.Pc(5,"Days Before Check In"),n.Vb(),n.Pc(6," Charge "),n.Wb(7,"div",96),n.Rb(8,"app-selectbox",97),n.Vb(),n.Wb(9,"div",98),n.Rb(10,"app-input-text",99),n.Vb(),n.Wb(11,"div",100),n.Wb(12,"button",101),n.fc("click",(function(){n.Fc(e);const o=t.index;return n.hc().addRemoveCancelPolicy(o)})),n.Rb(13,"i",102),n.Vb(),n.Vb(),n.Tb(),n.Vb()}if(2&e){const e=t.index,o=n.hc();n.Cb(1),n.qc("formGroupName",e),n.Cb(2),n.pc("disabled",!o.isCopyMode&&(!0===o.upsertForm.get("planCancelPolicyYn").value||o.addWithOnlyDate||o.cancelPenaltyDisabled))("isInvalid",o.checkIsInvalid2("cancelPolicyDate",e)),n.Cb(5),n.pc("options",o.rateOrAmountOptions)("useAllOptionYn",!1)("disabled",!o.isCopyMode&&(!0===o.upsertForm.get("planCancelPolicyYn").value||o.addWithOnlyDate||o.cancelPenaltyDisabled)),n.Cb(2),n.pc("disabled",!o.isCopyMode&&(!0===o.upsertForm.get("planCancelPolicyYn").value||o.addWithOnlyDate||o.cancelPenaltyDisabled))("isInvalid",o.checkIsInvalid2("cancelPenaltyValue",e)),n.Cb(2),n.pc("disabled",!o.isCopyMode&&(!0===o.upsertForm.get("planCancelPolicyYn").value||o.addWithOnlyDate||o.cancelPenaltyDisabled)),n.Cb(1),n.pc("ngClass",n.vc(10,Y,0==e,e>0))}}const R=function(e){return{"valid-error":e}};let B=(()=>{class e{constructor(e,t,o,i){this.store=e,this._dataService=t,this.alertService=o,this.formService=i,this.submitEvent=new n.n,this.closeEvent=new n.n,this.cancelPenaltyDisabled=!1,this.rateOrAmountOptions=[{value:"R",label:"Rate"},{value:"A",label:"Amount"}],this.discountOrUpsellOptions=[{value:"D",label:"-"},{value:"U",label:"+"}],this.checkedPlanList=[],this.checkedAllPlan=[],this.isAllCheckIn=!0,this.isAllBooking=!0,this.bookingFromTime="00:00",this.bookingToTime="23:59",this._SPECIAL_PROMOTION_TYPE=s.b,this._PLAN_PROMOTION_TYPE_CODE=s.a,this.unsubscribe$=new a.a,this._cancelPenaltyBasisCode="A",this.upsertForm=this._dataService.generateVendorPromotionPutForm(this.cancelPenaltyBasisCode)}get masterItem(){return this._masterItem}set masterItem(e){var t;if(this._masterItem=e,e){this.currencyCode=e.currencyCode,this.upsertForm.patchValue(e);const o=this.cancelPolicyArray();o.clear(),this.cancelPenaltyBasisCode=null===(t=e.cancellationPolicies[0])||void 0===t?void 0:t.cancelPenaltyBasisCode,e.cancellationPolicies.forEach(e=>{o.push(this._dataService.generateCancelPolicyGroups(e.cancelPenaltyBasisCode)),r.last(o.controls).patchValue(e)}),this._setPromotionTypeCodeControl(e);const{derivedRoomPlanSeq:n,bookingFromDatetime:i,bookingToDatetime:a}=e,s=r.split(i," "),l=r.split(a," ");2==s.length&&(this.upsertForm.get("bookingFromDatetime").patchValue(s[0]),this.bookingFromTime=s[1]),2==l.length&&(this.upsertForm.get("bookingToDatetime").patchValue(l[0]),this.bookingToTime=l[1]),this.checkedPlanList.push(n),this.onBookingDayCheck(null),this.onCheckInDayCheck(null)}}set cancelPenaltyBasisCode(e){this._cancelPenaltyBasisCode=e,this.cancelPolicyArray().controls.forEach(t=>{t.get("cancelPenaltyBasisCode").patchValue(e)})}get cancelPenaltyBasisCode(){return this._cancelPenaltyBasisCode}get isCancelPenaltyBasisCodeControlDisabled(){return!this.isCopyMode&&(!0===this.upsertForm.get("planCancelPolicyYn").value||this.addWithOnlyDate||this.cancelPenaltyDisabled)}get isCancelPenaltyBasisCodeControlInvalid(){return!this.isCancelPenaltyBasisCodeControlDisabled&&!this.cancelPenaltyBasisCode}get isShowSpecialPromotionType(){return this.upsertForm.get("planPromotionTypeCode").value===this._PLAN_PROMOTION_TYPE_CODE.SPECIAL_PROMOTION}get isShowAllPlanCheckbox(){return!this.masterItem}ngOnInit(){this._initSubscription(),console.log(this.isModifyMode,"this.isModifyMode"),this.isCopyMode||(this.isModifyMode?(this.upsertForm.get("planPromotionName").disable(),this.upsertForm.get("planPromotionTypeCode").disable(),this.upsertForm.get("__specialPromotionTypeCode").disable(),this.upsertForm.get("nonRefundableYn").disable(),this.upsertForm.get("manualInsertYn").disable(),this._enableDisablePromotionTypeGroupControl(!1),!0===this.upsertForm.get("manualInsertYn").value&&(this.upsertForm.get("discountOrUpsell").disable(),this.upsertForm.get("appliedValue").disable(),this.upsertForm.get("rateOrAmount").disable())):(this.upsertForm.get("planCancelPolicyYn").setValue(!1),this.upsertForm.get("planCancelPolicyYn").disable(),this.cancelPenaltyBasisCode=null,this.cancelPenaltyDisabled=!0),this.addWithOnlyDate&&(this.upsertForm.get("planPromotionName").disable(),this.upsertForm.get("planPromotionTypeCode").disable(),this.upsertForm.get("__specialPromotionTypeCode").disable(),this.upsertForm.get("nonRefundableYn").disable(),this.upsertForm.get("manualInsertYn").disable(),this.upsertForm.get("salesStopYn").disable(),this.upsertForm.get("planCancelPolicyYn").disable(),this.upsertForm.get("planMealBasisYn").disable(),this.upsertForm.get("mealBasisCode").disable(),this.upsertForm.get("freeBreakfastCode").disable(),this.upsertForm.get("discountOrUpsell").disable(),this.upsertForm.get("appliedValue").disable(),this.upsertForm.get("rateOrAmount").disable(),this.upsertForm.get("vendorRemark").disable()),this.isResetPromotionSeq&&this.upsertForm.get("planPromotionSeq").reset()),this.promotionTypeList=r.cloneDeep(this.promotionTypes),this._initFormControlValue()}ngOnChanges(e){e.planList&&(this.sortedPlanList=r.sortBy(this.planList,["vendorRoomTypeNameEn","roomPlanNameEn"])),e.isCopyMode&&this.isCopyMode&&(this.upsertForm.get("planPromotionSeq").reset(),this.upsertForm.get("planPromotionName").enable(),this.upsertForm.get("planPromotionTypeCode").enable(),this.upsertForm.get("nonRefundableYn").enable(),this.upsertForm.get("manualInsertYn").enable(),this.upsertForm.get("salesStopYn").enable(),this.upsertForm.get("planCancelPolicyYn").enable(),this.upsertForm.get("planMealBasisYn").enable(),this.upsertForm.get("mealBasisCode").enable(),this.upsertForm.get("freeBreakfastCode").enable(),this.upsertForm.get("discountOrUpsell").enable(),this.upsertForm.get("appliedValue").enable(),this.upsertForm.get("rateOrAmount").enable(),this.upsertForm.get("vendorRemark").enable())}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}cancelPolicyArray(){return this.upsertForm.get("cancellationPolicies")}cancelPolicyGroup(e){return this.cancelPolicyArray().at(e)}onSubmit(){var e;if(this.upsertForm.get("roomPlans").patchValue(this.checkedPlanList),this._isUpsertFormInvalid())return void(this.checkValid=!0);const t=r.cloneDeep(this.upsertForm.getRawValue());!1===this._isCheckCancellationPolicyNeccessary()&&(t.cancellationPolicies=null),this.bookingFromTime&&t.bookingFromDatetime&&(8==this.bookingFromTime.length&&(this.bookingFromTime=this.bookingFromTime.substring(0,5)),t.bookingFromDatetime=`${t.bookingFromDatetime} ${this.bookingFromTime}:00`),this.bookingToTime&&t.bookingToDatetime&&(8==this.bookingToTime.length&&(this.bookingToTime=this.bookingToTime.substring(0,5)),t.bookingToDatetime=`${t.bookingToDatetime} ${this.bookingToTime}:59`),0==(null===(e=null==t?void 0:t.vendorRemark)||void 0===e?void 0:e.length)&&delete t.vendorRemark,delete t.__specialPromotionTypeCode,this.submitEvent.emit(t),this.checkValid=!1}onClose(){this.closeEvent.emit()}checkIsInvalid(e){return"bookingFromTime"==e?this.upsertForm.get("bookingFromDatetime").value&&this.checkValid&&(null==this.bookingFromTime||0==this.bookingFromTime.length):"bookingToTime"==e?this.upsertForm.get("bookingToDatetime").value&&this.checkValid&&(null==this.bookingToTime||0==this.bookingToTime.length):this.checkValid&&this.upsertForm.get(e)&&this.upsertForm.get(e).invalid}checkIsInvalid2(e,t){return!!this.upsertForm.get("planCancelPolicyYn").value&&this.checkValid&&this.cancelPolicyGroup(t).get(e)&&this.cancelPolicyGroup(t).get(e).invalid}addRemoveCancelPolicy(e){if(e)this.removePolicy(e);else{const e=this.cancelPolicyArray();e.length<11&&e.push(this._dataService.generateCancelPolicyGroups(this.cancelPenaltyBasisCode))}}removePolicy(e){this.cancelPolicyArray().removeAt(e)}onBookingDayCheckAll(e){this.upsertForm.get("bookingMonYn").patchValue(e),this.upsertForm.get("bookingTueYn").patchValue(e),this.upsertForm.get("bookingWedYn").patchValue(e),this.upsertForm.get("bookingThuYn").patchValue(e),this.upsertForm.get("bookingFriYn").patchValue(e),this.upsertForm.get("bookingSatYn").patchValue(e),this.upsertForm.get("bookingSunYn").patchValue(e)}onBookingDayCheck(e){this.isAllBooking=r.every([this.upsertForm.get("bookingMonYn").value,this.upsertForm.get("bookingTueYn").value,this.upsertForm.get("bookingWedYn").value,this.upsertForm.get("bookingThuYn").value,this.upsertForm.get("bookingFriYn").value,this.upsertForm.get("bookingSatYn").value,this.upsertForm.get("bookingSunYn").value],Boolean)}onCheckInDayCheckAll(e){this.upsertForm.get("checkInMonYn").patchValue(e),this.upsertForm.get("checkInTueYn").patchValue(e),this.upsertForm.get("checkInWedYn").patchValue(e),this.upsertForm.get("checkInThuYn").patchValue(e),this.upsertForm.get("checkInFriYn").patchValue(e),this.upsertForm.get("checkInSatYn").patchValue(e),this.upsertForm.get("checkInSunYn").patchValue(e)}onCheckInDayCheck(e){this.isAllCheckIn=r.every([this.upsertForm.get("checkInMonYn").value,this.upsertForm.get("checkInTueYn").value,this.upsertForm.get("checkInWedYn").value,this.upsertForm.get("checkInThuYn").value,this.upsertForm.get("checkInFriYn").value,this.upsertForm.get("checkInSatYn").value,this.upsertForm.get("checkInSunYn").value])}onPlanCheck(e){if(null!=this.currencyCode&&""!=this.currencyCode&&this.currencyCode!=e.currencyCode){this.alertService.alert("There are plan with different currency.");const t=r.cloneDeep(this.checkedPlanList);setTimeout(()=>{this.checkedPlanList=r.pull(t,e.vendorRoomPlanSeq)},0)}else this.currencyCode=e.currencyCode;0==this.checkedPlanList.length&&(this.currencyCode="")}onPlanCheckAll(e){if(null!=this.planList&&0!=this.planList.length){if(r.uniq(r.map(this.planList,"currencyCode")).length>1)return this.alertService.alert("There are plan with different currency."),void(this.checkedAllPlan=[]);this.currencyCode=this.planList[0].currencyCode,e?this.checkedPlanList=r.uniq(r.map(this.planList,"vendorRoomPlanSeq")):(this.checkedPlanList=[],this.currencyCode="")}else this.checkedAllPlan=[]}onSelectFreeBreakfast(e){this.upsertForm.get("freeBreakfastName").patchValue(e.label)}onSelectMealBasis(e){this.upsertForm.get("mealBasisName").patchValue(e.label)}planLabel(e){return(null==e?void 0:e.hotelContractTypeName)?`${null==e?void 0:e.hotelContractTypeName} [${null==e?void 0:e.vendorRoomPlanSeq}] ${null==e?void 0:e.vendorRoomTypeNameEn} - ${null==e?void 0:e.roomPlanNameEn}`:`${null==e?void 0:e.vendorRoomPlanSeq} ${null==e?void 0:e.vendorRoomTypeNameEn} - ${null==e?void 0:e.roomPlanNameEn}`}_initSubscription(){this.upsertForm.get("planCancelPolicyYn").valueChanges.pipe(Object(l.a)(this.unsubscribe$)).subscribe(e=>{e?(this.upsertForm.get("rateOrAmount").setValue("R"),this.cancelPenaltyBasisCode=null,this.cancelPolicyArray().clear(),this.cancelPolicyArray().push(this._dataService.generateCancelPolicyGroups(this.cancelPenaltyBasisCode))):this.cancelPenaltyBasisCode="B"}),this.upsertForm.get("planMealBasisYn").valueChanges.pipe(Object(l.a)(this.unsubscribe$)).subscribe(e=>{this._planMealBasisYnEffects(e)}),this.upsertForm.get("nonRefundableYn").valueChanges.pipe(Object(l.a)(this.unsubscribe$)).subscribe(e=>{e?(this.upsertForm.get("planCancelPolicyYn").setValue(!1),this.upsertForm.get("planCancelPolicyYn").disable(),this.cancelPenaltyBasisCode=null,this.cancelPenaltyDisabled=!0):(this.upsertForm.get("planCancelPolicyYn").enable(),this.cancelPenaltyDisabled=!1)}),this.upsertForm.get("planPromotionTypeCode").valueChanges.pipe(Object(c.a)(this.upsertForm.get("planPromotionTypeCode").value),Object(l.a)(this.unsubscribe$)).subscribe(e=>{this.selectedValue=e,this.isModifyMode&&!this.isCopyMode?this._enableDisablePromotionTypeGroupControl(!1):(this.isCopyMode||this._resetPromotionTypeGroupControl(),this._updatePromotionTypeGroupControlValidator(e),this._enableDisablePromotionTypeGroupControl(!0))}),this.upsertForm.get("__specialPromotionTypeCode").valueChanges.pipe(Object(u.a)(1),Object(l.a)(this.unsubscribe$)).subscribe(e=>{this._resetPromotionTypeGroupControl(),this._updateSpecialPromotionTypeCodeControlValidator(),this._updatePromotionTypeGroupControlValidity()})}_planMealBasisYnEffects(e){e?(this.upsertForm.get("mealBasisCode").setValue(null),this.upsertForm.get("mealBasisCode").clearValidators(),this.upsertForm.get("freeBreakfastCode").setValue(null),this.upsertForm.get("freeBreakfastCode").clearValidators()):(this.upsertForm.get("mealBasisCode").setValidators([i.z.required]),this.upsertForm.get("freeBreakfastCode").setValidators([i.z.required])),this.upsertForm.get("mealBasisCode").updateValueAndValidity(),this.upsertForm.get("freeBreakfastCode").updateValueAndValidity()}_isUpsertFormInvalid(){let e=!1;return Object.keys(this.upsertForm.controls).forEach(t=>{this.upsertForm.controls[t].invalid&&"cancellationPolicies"!==t&&(console.error(t+" is invalid"),e=!0)}),this._isCheckCancellationPolicyNeccessary()&&(this.upsertForm.controls.cancellationPolicies.invalid||0===this.upsertForm.controls.cancellationPolicies.value.length||r.isNil(this.cancelPenaltyBasisCode))&&(console.error("cancellationPolicies is invalid"),e=!0),e}_isCheckCancellationPolicyNeccessary(){return!1===this.upsertForm.controls.planCancelPolicyYn.value&&!1===this.upsertForm.controls.nonRefundableYn.value}_initFormControlValue(){this.upsertForm.get("planCancelPolicyYn").value&&(this._cancelPenaltyBasisCode=null),this._planMealBasisYnEffects(this.upsertForm.get("planMealBasisYn").value)}_enableDisablePromotionTypeGroupControl(e){e?(this.upsertForm.get("earlyBirdDays").enable(),this.upsertForm.get("lastMinuteDays").enable(),this.upsertForm.get("minNights").enable(),this.upsertForm.get("nthNightFree").enable()):(this.upsertForm.get("earlyBirdDays").disable(),this.upsertForm.get("lastMinuteDays").disable(),this.upsertForm.get("minNights").disable(),this.upsertForm.get("nthNightFree").disable())}_resetPromotionTypeGroupControl(){this.upsertForm.get("earlyBirdDays").reset(),this.upsertForm.get("lastMinuteDays").reset(),this.upsertForm.get("minNights").reset(),this.upsertForm.get("nthNightFree").reset()}_setPromotionTypeCodeControl(e){if(e.planPromotionTypeCode==this._PLAN_PROMOTION_TYPE_CODE.SPECIAL_PROMOTION){const t=!r.isNil(e.earlyBirdDays),o=!r.isNil(e.lastMinuteDays);t&&o&&console.error("Early Bird and Last Minute cannot be used at the same time."),t&&this.upsertForm.get("__specialPromotionTypeCode").setValue(this._SPECIAL_PROMOTION_TYPE.EARLY_BIRD_AND_MIN_NIGHTS),o&&this.upsertForm.get("__specialPromotionTypeCode").setValue(this._SPECIAL_PROMOTION_TYPE.LAST_MINUTE_AND_MIN_NIGHTS)}}_updatePromotionTypeGroupControlValidator(e){switch(this._clearPromotionTypeGroupControlValidity(),this.upsertForm.get("__specialPromotionTypeCode").clearValidators(),e){case this._PLAN_PROMOTION_TYPE_CODE.EARLY_BIRD:this.upsertForm.get("earlyBirdDays").setValidators([i.z.required]);break;case this._PLAN_PROMOTION_TYPE_CODE.LAST_MINUTE:this.upsertForm.get("lastMinuteDays").setValidators([i.z.required]);break;case this._PLAN_PROMOTION_TYPE_CODE.MIN_NIGHTS:this.upsertForm.get("minNights").setValidators([i.z.required]);break;case this._PLAN_PROMOTION_TYPE_CODE.NTH_NIGHTS_FREE:this.upsertForm.get("nthNightFree").setValidators([i.z.required]);break;case this._PLAN_PROMOTION_TYPE_CODE.SPECIAL_PROMOTION:this.upsertForm.get("__specialPromotionTypeCode").setValidators([i.z.required])}this._updatePromotionTypeGroupControlValidity(),this.upsertForm.get("__specialPromotionTypeCode").updateValueAndValidity()}_clearPromotionTypeGroupControlValidity(){this.upsertForm.get("earlyBirdDays").clearValidators(),this.upsertForm.get("lastMinuteDays").clearValidators(),this.upsertForm.get("minNights").clearValidators(),this.upsertForm.get("nthNightFree").clearValidators()}_updatePromotionTypeGroupControlValidity(){this.upsertForm.get("earlyBirdDays").updateValueAndValidity(),this.upsertForm.get("lastMinuteDays").updateValueAndValidity(),this.upsertForm.get("minNights").updateValueAndValidity(),this.upsertForm.get("nthNightFree").updateValueAndValidity()}_updateSpecialPromotionTypeCodeControlValidator(){const e=this.upsertForm.get("__specialPromotionTypeCode").value;this.upsertForm.get("earlyBirdDays").clearValidators(),this.upsertForm.get("lastMinuteDays").clearValidators(),this.upsertForm.get("minNights").clearValidators(),e===this._SPECIAL_PROMOTION_TYPE.EARLY_BIRD_AND_MIN_NIGHTS?(this.upsertForm.get("earlyBirdDays").setValidators([i.z.required]),this.upsertForm.get("minNights").setValidators([i.z.required])):e===this._SPECIAL_PROMOTION_TYPE.LAST_MINUTE_AND_MIN_NIGHTS&&(this.upsertForm.get("lastMinuteDays").setValidators([i.z.required]),this.upsertForm.get("minNights").setValidators([i.z.required]))}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(b.h),n.Qb(d.b),n.Qb(p.a),n.Qb(m.a))},e.\u0275cmp=n.Kb({type:e,selectors:[["app-vendor-promotion-detail-master"]],inputs:{planList:"planList",freeBreakfastList:"freeBreakfastList",mealBasisList:"mealBasisList",cancelPenaltyList:"cancelPenaltyList",promotionTypes:"promotionTypes",isModifyMode:"isModifyMode",isCopyMode:"isCopyMode",addWithOnlyDate:"addWithOnlyDate",isResetPromotionSeq:"isResetPromotionSeq",masterItem:"masterItem"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},features:[n.Ab],decls:179,vars:80,consts:[[1,"promotion-rate"],[1,"room-type",2,"flex","0 0 300px"],[1,"page-item"],[1,"page-item-header"],[1,"item-box",3,"ngClass"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"detail-option"],[3,"formGroup"],[1,"table","table-bordered","table-responsive-all"],["width","130px"],["scope","row",1,"th-bg"],[1,"input"],["type","text","disabled","",3,"value"],[1,"form-group"],["formControlName","salesStopYn","name","salesStopYn","label","Y",3,"value"],["formControlName","salesStopYn","name","salesStopYn","label","N",3,"value"],["formControlName","planPromotionName",3,"isInvalid"],[1,"pd10"],["formControlName","planPromotionTypeCode","useAllOptionName","Select",1,"mb10",3,"options","isInvalid"],["class","form-group",3,"valid-error",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"input","calendar"],[3,"for"],["type","text","placeholder","YYYY-MM-DD","formControlName","bookingFromDatetime",3,"matDatepicker"],["bookingFromDatetime",""],["dataType","string","inputFormat","time","placeholder","hh:mm",2,"max-width","100px",3,"ngModel","ngModelOptions","ngModelChange"],[1,"dash"],["type","text","placeholder","YYYY-MM-DD","formControlName","bookingToDatetime",3,"matDatepicker"],["bookingToDatetime",""],["binary","true","label","All",3,"ngModel","ngModelOptions","onChange","ngModelChange"],["formControlName","bookingMonYn","binary","true","label","Mon",3,"onChange"],["formControlName","bookingTueYn","binary","true","label","Tue",3,"onChange"],["formControlName","bookingWedYn","binary","true","label","Wed",3,"onChange"],["formControlName","bookingThuYn","binary","true","label","Thu",3,"onChange"],["formControlName","bookingFriYn","binary","true","label","Fri",3,"onChange"],["formControlName","bookingSatYn","binary","true","label","Sat",3,"onChange"],["formControlName","bookingSunYn","binary","true","label","Sun",3,"onChange"],["type","text","placeholder","YYYY-MM-DD","formControlName","checkInFromDate",3,"matDatepicker"],["checkInFromDate",""],["type","text","placeholder","YYYY-MM-DD","formControlName","checkInToDate",3,"matDatepicker"],["checkInToDate",""],["formControlName","checkInMonYn","binary","true","label","Mon",3,"onChange"],["formControlName","checkInTueYn","binary","true","label","Tue",3,"onChange"],["formControlName","checkInWedYn","binary","true","label","Wed",3,"onChange"],["formControlName","checkInThuYn","binary","true","label","Thu",3,"onChange"],["formControlName","checkInFriYn","binary","true","label","Fri",3,"onChange"],["formControlName","checkInSatYn","binary","true","label","Sat",3,"onChange"],["formControlName","checkInSunYn","binary","true","label","Sun",3,"onChange"],["formControlName","nonRefundableYn","name","nonRefundableYn","label","Y",3,"value"],["formControlName","nonRefundableYn","name","nonRefundableYn","label","N",3,"value"],[1,"color-danger","ml15","font-size-xs"],[1,"form-group","mb20"],["formControlName","planCancelPolicyYn","name","planCancelPolicyYn","label","Follow Plan",3,"value"],["formControlName","planCancelPolicyYn","name","planCancelPolicyYn","label","Set Up New",3,"value"],[1,"form-group","mb10"],[3,"disabled","ngModel","ngModelOptions","value","label","ngModelChange",4,"ngFor","ngForOf"],[1,"form-item-box"],["formArrayName","cancellationPolicies"],["class","form-group",4,"ngFor","ngForOf"],["formControlName","planMealBasisYn","name","planMealBasisYn","label","Follow Plan",3,"value"],["formControlName","planMealBasisYn","name","planMealBasisYn","label","Set Up New",3,"value"],[1,"mr10"],[1,"select-box",2,"flex","0 0 200px"],["formControlName","mealBasisCode",3,"options","useAllOptionName","isInvalid","disabled","onChange"],["formControlName","freeBreakfastCode",3,"options","useAllOptionName","isInvalid","disabled","onChange"],["formControlName","manualInsertYn","name","manualInsertYn","label","Y",3,"value"],["formControlName","manualInsertYn","name","manualInsertYn","label","N",3,"value"],[1,"color-red","font-size-sm","ml-auto"],[1,"select-box","mr10",2,"flex","0 0 50px"],["formControlName","discountOrUpsell",3,"options","useAllOptionYn","disabled"],[1,"input","mr10",2,"flex","0 0 120px"],["valueType","number","inputFormat","positiveNumber","styleClass","align-r","placeholder","0.00 (rate)","formControlName","appliedValue",3,"disabled"],[1,"input","ml5",2,"flex","0 0 120px"],["formControlName","rateOrAmount",3,"options","useAllOptionYn","disabled"],["formControlName","vendorRemark"],[1,"button-area","align-r","mt10"],[1,"btn","btn-secondary","sm",3,"click"],[1,"btn","btn-light","sm",3,"click"],["label","All Plan",3,"ngModel","value","disabled","ngModelChange","onChange"],[3,"ngModel","value","label","disabled","ngModelChange","onChange"],["formControlName","__specialPromotionTypeCode","name","__specialPromotionTypeCode","label","Early Bird + Min Nights",3,"value"],["formControlName","__specialPromotionTypeCode","name","__specialPromotionTypeCode","label","Last Minute + Min Nights",3,"value"],[1,"input","mr10",2,"flex","0 0 60px"],["formControlName","earlyBirdDays","valueType","number","inputFormat","number",1,"align-c",3,"isInvalid"],[1,"input","ml10","mr10",2,"flex","0 0 60px"],["formControlName","lastMinuteDays","valueType","number","inputFormat","number",1,"align-c",3,"isInvalid"],["formControlName","minNights","valueType","number","inputFormat","number",1,"align-c",3,"isInvalid"],["formControlName","nthNightFree","valueType","number","inputFormat","number",1,"align-c",3,"isInvalid"],[1,"font-weight-medium"],[1,"ml10","mr10"],[3,"disabled","ngModel","ngModelOptions","value","label","ngModelChange"],[3,"formGroupName"],[1,"input","ml20","mr5",2,"flex","0 0 80px"],["valueType","number","formControlName","cancelPolicyDate",3,"disabled","isInvalid"],[1,"mr70"],[1,"input","mr10","ml10",2,"flex","0 0 80px"],["formControlName","cancelPenaltyRateOrAmount",3,"options","useAllOptionYn","disabled"],[1,"input",2,"flex","0 0 80px"],["valueType","number","formControlName","cancelPenaltyValue",3,"disabled","isInvalid"],[1,"input",2,"flex","0 0 32px"],["type","button",1,"btn","btn-outline-secondary","btn-icon-only","xs","ml-auto",3,"disabled","click"],[1,"fas",3,"ngClass"]],template:function(e,t){if(1&e&&(n.Wb(0,"div",0),n.Wb(1,"div",1),n.Wb(2,"div",2),n.Wb(3,"div",3),n.Wb(4,"strong"),n.Wb(5,"sup"),n.Pc(6,"Select Room Type & Plan"),n.Vb(),n.Vb(),n.Vb(),n.Wb(7,"div",4),n.Wb(8,"ul"),n.Nc(9,V,2,3,"li",5),n.Nc(10,k,2,4,"li",6),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(11,"div",7),n.Wb(12,"form",8),n.Wb(13,"div",2),n.Wb(14,"div",9),n.Wb(15,"table"),n.Wb(16,"caption"),n.Pc(17,"Detail"),n.Vb(),n.Wb(18,"colgroup"),n.Rb(19,"col",10),n.Rb(20,"col"),n.Vb(),n.Wb(21,"tbody"),n.Wb(22,"tr"),n.Wb(23,"th",11),n.Wb(24,"sup"),n.Pc(25,"Promotion SEQ"),n.Vb(),n.Vb(),n.Wb(26,"td"),n.Wb(27,"div",12),n.Rb(28,"input",13),n.Vb(),n.Vb(),n.Vb(),n.Wb(29,"tr"),n.Wb(30,"th",11),n.Wb(31,"sup"),n.Pc(32,"Sales Stop YN"),n.Vb(),n.Vb(),n.Wb(33,"td"),n.Wb(34,"div",14),n.Rb(35,"app-radio",15),n.Rb(36,"app-radio",16),n.Vb(),n.Vb(),n.Vb(),n.Wb(37,"tr"),n.Wb(38,"th",11),n.Wb(39,"sup"),n.Pc(40,"Promotion Name"),n.Vb(),n.Vb(),n.Wb(41,"td"),n.Rb(42,"app-input-text",17),n.Vb(),n.Vb(),n.Wb(43,"tr"),n.Wb(44,"th",11),n.Wb(45,"sup"),n.Pc(46,"Promotion Type"),n.Vb(),n.Vb(),n.Wb(47,"td",18),n.Rb(48,"app-selectbox",19),n.Nc(49,I,3,4,"div",20),n.Nc(50,D,4,1,"div",21),n.Nc(51,M,5,1,"div",21),n.Nc(52,F,4,1,"div",21),n.Nc(53,T,4,1,"div",21),n.Nc(54,_,3,2,"div",21),n.Vb(),n.Vb(),n.Wb(55,"tr"),n.Wb(56,"th",11),n.Pc(57,"Booking From ~ To Date"),n.Vb(),n.Wb(58,"td"),n.Wb(59,"div",14),n.Wb(60,"div",22),n.Rb(61,"mat-datepicker-toggle",23),n.Rb(62,"input",24),n.Rb(63,"mat-datepicker",null,25),n.Vb(),n.Wb(65,"app-input-text",26),n.fc("ngModelChange",(function(e){return t.bookingFromTime=e})),n.Vb(),n.Wb(66,"div",27),n.Pc(67,"~"),n.Vb(),n.Wb(68,"div",22),n.Rb(69,"mat-datepicker-toggle",23),n.Rb(70,"input",28),n.Rb(71,"mat-datepicker",null,29),n.Vb(),n.Wb(73,"app-input-text",26),n.fc("ngModelChange",(function(e){return t.bookingToTime=e})),n.Vb(),n.Vb(),n.Wb(74,"div",14),n.Wb(75,"app-checkbox",30),n.fc("onChange",(function(e){return t.onBookingDayCheckAll(e)}))("ngModelChange",(function(e){return t.isAllBooking=e})),n.Vb(),n.Wb(76,"app-checkbox",31),n.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),n.Vb(),n.Wb(77,"app-checkbox",32),n.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),n.Vb(),n.Wb(78,"app-checkbox",33),n.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),n.Vb(),n.Wb(79,"app-checkbox",34),n.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),n.Vb(),n.Wb(80,"app-checkbox",35),n.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),n.Vb(),n.Wb(81,"app-checkbox",36),n.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),n.Vb(),n.Wb(82,"app-checkbox",37),n.fc("onChange",(function(e){return t.onBookingDayCheck(e)})),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(83,"tr"),n.Wb(84,"th",11),n.Wb(85,"sup"),n.Pc(86,"Check In From ~ To Date"),n.Vb(),n.Vb(),n.Wb(87,"td"),n.Wb(88,"div",14),n.Wb(89,"div",22),n.Rb(90,"mat-datepicker-toggle",23),n.Rb(91,"input",38),n.Rb(92,"mat-datepicker",null,39),n.Vb(),n.Wb(94,"div",27),n.Pc(95,"~"),n.Vb(),n.Wb(96,"div",22),n.Rb(97,"mat-datepicker-toggle",23),n.Rb(98,"input",40),n.Rb(99,"mat-datepicker",null,41),n.Vb(),n.Vb(),n.Wb(101,"div",14),n.Wb(102,"app-checkbox",30),n.fc("onChange",(function(e){return t.onCheckInDayCheckAll(e)}))("ngModelChange",(function(e){return t.isAllCheckIn=e})),n.Vb(),n.Wb(103,"app-checkbox",42),n.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),n.Vb(),n.Wb(104,"app-checkbox",43),n.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),n.Vb(),n.Wb(105,"app-checkbox",44),n.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),n.Vb(),n.Wb(106,"app-checkbox",45),n.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),n.Vb(),n.Wb(107,"app-checkbox",46),n.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),n.Vb(),n.Wb(108,"app-checkbox",47),n.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),n.Vb(),n.Wb(109,"app-checkbox",48),n.fc("onChange",(function(e){return t.onCheckInDayCheck(e)})),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(110,"tr"),n.Wb(111,"th",11),n.Wb(112,"sup"),n.Pc(113,"Non Refundable YN"),n.Vb(),n.Vb(),n.Wb(114,"td"),n.Wb(115,"div",14),n.Rb(116,"app-radio",49),n.Rb(117,"app-radio",50),n.Wb(118,"span",51),n.Pc(119,"It will have order of prioriy than Plan CancellationPolicy"),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(120,"tr"),n.Wb(121,"th",11),n.Pc(122,"Plan Cancellation Policy"),n.Vb(),n.Wb(123,"td"),n.Wb(124,"div",52),n.Rb(125,"app-radio",53),n.Rb(126,"app-radio",54),n.Vb(),n.Wb(127,"div",55),n.Nc(128,S,1,6,"app-radio",56),n.Vb(),n.Wb(129,"div",57),n.Ub(130,58),n.Nc(131,L,14,13,"div",59),n.Tb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(132,"tr"),n.Wb(133,"th",11),n.Wb(134,"sup"),n.Pc(135,"Plan Meal Basis"),n.Vb(),n.Vb(),n.Wb(136,"td"),n.Wb(137,"div",55),n.Rb(138,"app-radio",60),n.Rb(139,"app-radio",61),n.Vb(),n.Wb(140,"div",57),n.Wb(141,"div",14),n.Wb(142,"span",62),n.Pc(143,"Meal Basis Code"),n.Vb(),n.Wb(144,"div",63),n.Wb(145,"app-selectbox",64),n.fc("onChange",(function(e){return t.onSelectMealBasis(e.option)})),n.Vb(),n.Vb(),n.Vb(),n.Wb(146,"div",14),n.Wb(147,"span",62),n.Pc(148,"Free Breakfast"),n.Vb(),n.Wb(149,"div",63),n.Wb(150,"app-selectbox",65),n.fc("onChange",(function(e){return t.onSelectFreeBreakfast(e.option)})),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(151,"tr"),n.Wb(152,"th",11),n.Wb(153,"sup"),n.Pc(154,"Manual Rate Insert YN"),n.Vb(),n.Vb(),n.Wb(155,"td"),n.Wb(156,"div",55),n.Rb(157,"app-radio",66),n.Rb(158,"app-radio",67),n.Wb(159,"strong",68),n.Pc(160),n.Vb(),n.Vb(),n.Wb(161,"div",57),n.Wb(162,"div",14),n.Wb(163,"div",69),n.Rb(164,"app-selectbox",70),n.Vb(),n.Wb(165,"div",71),n.Rb(166,"app-input-text",72),n.Vb(),n.Wb(167,"div",73),n.Rb(168,"app-selectbox",74),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(169,"tr"),n.Wb(170,"th",11),n.Pc(171,"Vendor Remark"),n.Vb(),n.Wb(172,"td"),n.Rb(173,"app-input-text",75),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(174,"div",76),n.Wb(175,"button",77),n.fc("click",(function(){return t.onSubmit()})),n.Pc(176,"Save"),n.Vb(),n.Wb(177,"button",78),n.fc("click",(function(){return t.onClose()})),n.Pc(178,"Close"),n.Vb(),n.Vb()),2&e){const e=n.Ec(64),o=n.Ec(72),i=n.Ec(93),a=n.Ec(100);n.Cb(7),n.pc("ngClass",n.uc(74,R,t.checkValid&&0==(null==t.checkedPlanList?null:t.checkedPlanList.length))),n.Cb(2),n.pc("ngIf",t.isShowAllPlanCheckbox),n.Cb(1),n.pc("ngForOf",t.sortedPlanList),n.Cb(2),n.pc("formGroup",t.upsertForm),n.Cb(16),n.pc("value",t.upsertForm.get("planPromotionSeq").value),n.Cb(7),n.pc("value",!0),n.Cb(1),n.pc("value",!1),n.Cb(6),n.pc("isInvalid",t.checkIsInvalid("planPromotionName")),n.Cb(6),n.pc("options",t.promotionTypeList)("isInvalid",t.checkIsInvalid("planPromotionTypeCode")),n.Cb(1),n.pc("ngIf",t.isShowSpecialPromotionType),n.Cb(1),n.pc("ngIf",t.selectedValue===t._PLAN_PROMOTION_TYPE_CODE.EARLY_BIRD),n.Cb(1),n.pc("ngIf",t.selectedValue===t._PLAN_PROMOTION_TYPE_CODE.LAST_MINUTE),n.Cb(1),n.pc("ngIf",t.selectedValue===t._PLAN_PROMOTION_TYPE_CODE.MIN_NIGHTS),n.Cb(1),n.pc("ngIf",t.selectedValue===t._PLAN_PROMOTION_TYPE_CODE.NTH_NIGHTS_FREE),n.Cb(1),n.pc("ngIf",t.selectedValue===t._PLAN_PROMOTION_TYPE_CODE.SPECIAL_PROMOTION),n.Cb(6),n.Gb("valid-error",t.checkIsInvalid("bookingFromDatetime")),n.Cb(1),n.pc("for",e),n.Cb(1),n.pc("matDatepicker",e),n.Cb(3),n.Gb("valid-error",t.checkIsInvalid("bookingFromTime")),n.pc("ngModel",t.bookingFromTime)("ngModelOptions",n.tc(76,W)),n.Cb(3),n.Gb("valid-error",t.checkIsInvalid("bookingToDatetime")),n.Cb(1),n.pc("for",o),n.Cb(1),n.pc("matDatepicker",o),n.Cb(3),n.Gb("valid-error",t.checkIsInvalid("bookingToTime")),n.pc("ngModel",t.bookingToTime)("ngModelOptions",n.tc(77,W)),n.Cb(2),n.pc("ngModel",t.isAllBooking)("ngModelOptions",n.tc(78,W)),n.Cb(14),n.Gb("valid-error",t.checkIsInvalid("checkInFromDate")),n.Cb(1),n.pc("for",i),n.Cb(1),n.pc("matDatepicker",i),n.Cb(5),n.Gb("valid-error",t.checkIsInvalid("checkInToDate")),n.Cb(1),n.pc("for",a),n.Cb(1),n.pc("matDatepicker",a),n.Cb(4),n.pc("ngModel",t.isAllCheckIn)("ngModelOptions",n.tc(79,W)),n.Cb(14),n.pc("value",!0),n.Cb(1),n.pc("value",!1),n.Cb(8),n.pc("value",!0),n.Cb(1),n.pc("value",!1),n.Cb(1),n.Gb("valid-error",t.checkValid&&t.isCancelPenaltyBasisCodeControlInvalid),n.Cb(1),n.pc("ngForOf",t.cancelPenaltyList),n.Cb(3),n.pc("ngForOf",t.cancelPolicyArray().controls),n.Cb(6),n.Gb("valid-error",t.checkIsInvalid("planMealBasisYn")),n.Cb(1),n.pc("value",!0),n.Cb(1),n.pc("value",!1),n.Cb(6),n.pc("options",t.mealBasisList)("useAllOptionName","Select")("isInvalid",t.checkIsInvalid("mealBasisCode"))("disabled",!t.isCopyMode&&!1!==t.upsertForm.get("planMealBasisYn").value),n.Cb(5),n.pc("options",t.freeBreakfastList)("useAllOptionName","Select")("isInvalid",t.checkIsInvalid("freeBreakfastCode"))("disabled",!t.isCopyMode&&!1!==t.upsertForm.get("planMealBasisYn").value),n.Cb(7),n.pc("value",!0),n.Cb(1),n.pc("value",!1),n.Cb(2),n.Rc("Currency : ",t.currencyCode,""),n.Cb(4),n.pc("options",t.discountOrUpsellOptions)("useAllOptionYn",!1)("disabled",!t.isCopyMode&&!0===t.upsertForm.get("manualInsertYn").value),n.Cb(2),n.pc("disabled",!t.isCopyMode&&!0===t.upsertForm.get("manualInsertYn").value),n.Cb(2),n.pc("options",t.rateOrAmountOptions)("useAllOptionYn",!1)("disabled",!t.isCopyMode&&!0===t.upsertForm.get("manualInsertYn").value)}},directives:[h.l,h.o,h.n,i.B,i.s,i.k,g.a,i.r,i.i,f.a,P.a,C.a,i.c,y.a,O.a,i.u,v.a,i.e,i.l],encapsulation:2,changeDetection:0}),e})()},"5uJM":function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"a",(function(){return m}));var n=o("3Pt+"),i=o("wd/R"),a=o("fXoL");let r=(()=>{class e{constructor(e){this.fb=e,this.generateVendorPromotionPutForm=e=>this.fb.group({appliedValue:[null],bookingFriYn:[!0],bookingFromDatetime:[i().format("YYYY-MM-DD")],bookingMonYn:[!0],bookingSatYn:[!0],bookingSunYn:[!0],bookingThuYn:[!0],bookingToDatetime:[null],bookingTueYn:[!0],bookingWedYn:[!0],cancellationPolicies:this.fb.array([this.generateCancelPolicyGroups(e)]),checkInFriYn:[!0,[n.z.required]],checkInFromDate:[i().format("YYYY-MM-DD"),[n.z.required]],checkInMonYn:[!0,[n.z.required]],checkInSatYn:[!0,[n.z.required]],checkInSunYn:[!0,[n.z.required]],checkInThuYn:[!0,[n.z.required]],checkInToDate:[null,[n.z.required]],checkInTueYn:[!0,[n.z.required]],checkInWedYn:[!0,[n.z.required]],discountOrUpsell:["D"],earlyBirdDays:[null],freeBreakfastCode:[null],freeBreakfastName:[null],lastMinuteDays:[null],manualInsertYn:[!0,[n.z.required]],mealBasisCode:[null],mealBasisName:[null],minNights:[null],nonRefundableYn:[!0,[n.z.required]],nthNightFree:[null],originPlanPromotionSeq:[null],planCancelPolicyYn:[!1],planMealBasisYn:[null,[n.z.required]],planPromotionName:[null,[n.z.required]],planPromotionSeq:[null],planPromotionTypeCode:[null,[n.z.required]],__specialPromotionTypeCode:[null],rateOrAmount:["R"],roomPlans:[null,[n.z.required]],salesStopYn:[!0,[n.z.required]],vendorRemark:[null],earlyBirdDaysVersion2:[null],lastMinuteDaysVersion2:[null],minNightsVersion2:[null],minNightsVersion3:[{value:null,disabled:!0}]}),this.generateCancelPolicyGroups=e=>this.fb.group({cancelPenaltyBasisCode:[e,[n.z.required]],cancelPenaltyRateOrAmount:["R",[n.z.required]],cancelPenaltyValue:[0,[n.z.required]],cancelPolicyDate:[0,[n.z.required]],firstCancelDeadlineTime:[null],promotionCancelPolicySeq:[null]}),this.generateDetailInfoPutForm=()=>this.fb.group({planPromotionSeq:[null,[n.z.required]],planPromotionDetailEn:[null],planPromotionDetailKo:[null],planPromotionDetailJa:[null],planPromotionDetailVi:[null],planPromotionDetailZh:[null]}),this.initDetailInfoPutFormData=()=>({planPromotionSeq:null,planPromotionDetailEn:null,planPromotionDetailKo:null,planPromotionDetailJa:null,planPromotionDetailVi:null,planPromotionDetailZh:null})}}return e.\u0275fac=function(t){return new(t||e)(a.bc(n.f))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var s=o("LRne"),l=o("z6cu"),c=o("eIep"),u=o("LvDl"),b=o("KTtZ"),d=o("tpT/"),p=o("VMfx");let m=(()=>{class e{constructor(e,t){this.api=e,this.languageService=t}getDetailCodeList(e,t="KO"){const o=u.assign({},Object.assign(this.api.defaultParams,{language:t}),{condition:e});return this.api.post(b.c.commonDetailCode,o).pipe(Object(c.a)(e=>e.succeedYn?Object(s.a)(e.result.list.map(e=>({label:"KO"===this.languageService.currentLanguage?e.detailCodeNameLn:e.detailCodeNameEn,value:e.detailCode,referCode1:e.referCode1}))):Object(l.a)(e||"api response error")))}getMasterList(e){const t=u.assign({},this.api.defaultParams,{condition:e});return this.api.post(b.c.masterList,t).pipe(Object(c.a)(e=>{var t,o;return e.succeedYn&&(null===(o=null===(t=e.result)||void 0===t?void 0:t.list)||void 0===o?void 0:o.length)>0?Object(s.a)(e.result.list):Object(l.a)(e||"api response error")}))}upsertMaster(e){const t=u.assign({},this.api.defaultParams,{condition:e});return this.api.put(b.c.putMasterInfo,t).pipe(Object(c.a)(e=>{var t,o;if(e.succeedYn&&(null===(o=null===(t=e.result)||void 0===t?void 0:t.list)||void 0===o?void 0:o.length)>0){const t=u.last(e.result.list);return Object(s.a)(Object.assign({},t))}return Object(l.a)(e||"api response error")}))}getDetailInformation(e){const t=u.assign({},this.api.defaultParams,{condition:e});return this.api.post(b.c.description,t).pipe(Object(c.a)(e=>e.succeedYn?Object(s.a)(e.result):Object(l.a)(e||"api response error")))}getFacilities(e){const t=u.assign({},this.api.defaultParams,{condition:e});return this.api.post(b.c.commonDetailCode,t).pipe(Object(c.a)(e=>e.succeedYn?Object(s.a)(e.result.list.map(e=>({detailCodeNameEn:"KO"===this.languageService.currentLanguage?e.detailCodeNameLn:e.detailCodeNameEn,detailCode:e.detailCode}))):Object(l.a)(e||"api response error")))}upsertInformation(e){const t=u.assign({},this.api.defaultParams,{condition:e});return this.api.put(b.c.putDescription,t).pipe(Object(c.a)(e=>e.succeedYn&&e.result?Object(s.a)(e.result):Object(l.a)(e||"api response error")))}}return e.\u0275fac=function(t){return new(t||e)(a.bc(d.a),a.bc(p.a))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},KTtZ:function(e,t,o){"use strict";o.d(t,"c",(function(){return a})),o.d(t,"b",(function(){return r})),o.d(t,"a",(function(){return s}));var n=o("AytR");const{API_URL:i}=n.a,a={commonDetailCode:`${i}/common/detail-code`,masterList:`${i}/admin/vendor/promotion`,putMasterInfo:`${i}/admin/vendor/promotion`,description:`${i}/admin/vendor/promotion/detail`,putDescription:`${i}/admin/vendor/promotion/detail`},r={EARLY_BIRD_AND_MIN_NIGHTS:0,LAST_MINUTE_AND_MIN_NIGHTS:1},s={EARLY_BIRD:"PPT01",LAST_MINUTE:"PPT02",MIN_NIGHTS:"PPT03",NTH_NIGHTS_FREE:"PPT04",HOTEL_PACKAGE:"PPT05",SPECIAL_PROMOTION:"PPT06",DYNAMIC:"PPT07",NONE:"PPT99"}},Nje5:function(e,t,o){"use strict";o.d(t,"g",(function(){return i})),o.d(t,"p",(function(){return a})),o.d(t,"f",(function(){return r})),o.d(t,"e",(function(){return s})),o.d(t,"i",(function(){return l})),o.d(t,"d",(function(){return c})),o.d(t,"c",(function(){return u})),o.d(t,"h",(function(){return b})),o.d(t,"b",(function(){return d})),o.d(t,"a",(function(){return p})),o.d(t,"n",(function(){return m})),o.d(t,"o",(function(){return h})),o.d(t,"m",(function(){return g})),o.d(t,"u",(function(){return f})),o.d(t,"v",(function(){return P})),o.d(t,"q",(function(){return C})),o.d(t,"r",(function(){return y})),o.d(t,"j",(function(){return O})),o.d(t,"l",(function(){return v})),o.d(t,"k",(function(){return V})),o.d(t,"s",(function(){return k})),o.d(t,"t",(function(){return I}));var n=o("kt0X");const i=Object(n.o)("[VendorPromotionDetailShared] init module state"),a=Object(n.o)("[VendorPromotionDetailShared] MealBasis \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(n.t)()),r=Object(n.o)("[VendorPromotionDetailShared] MealBasis \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(n.t)()),s=Object(n.o)("[VendorPromotionDetailShared] MealBasis \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(n.t)()),l=Object(n.o)("[VendorPromotionDetailShared] FreeBreakfast \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(n.t)()),c=Object(n.o)("[VendorPromotionDetailShared] FreeBreakfast \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(n.t)()),u=Object(n.o)("[VendorPromotionDetailShared] FreeBreakfast \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(n.t)()),b=Object(n.o)("[VendorPromotionDetailShared] CancelPenalty \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(n.t)()),d=Object(n.o)("[VendorPromotionDetailShared] CancelPenalty \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(n.t)()),p=Object(n.o)("[VendorPromotionDetailShared] CancelPenalty \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(n.t)()),m=Object(n.o)("[VendorPromotionDetailShared] load master info",Object(n.t)()),h=Object(n.o)("[VendorPromotionDetailShared] load master success",Object(n.t)()),g=Object(n.o)("[VendorPromotionDetailShared] load master failure",Object(n.t)()),f=Object(n.o)("[VendorPromotionDetailShared] upsert master",Object(n.t)()),P=Object(n.o)("[VendorPromotionDetailShared] upsert master success",Object(n.t)()),C=(Object(n.o)("[VendorPromotionDetailShared] upsert master failure",Object(n.t)()),Object(n.o)("[VendorPromotionDetailShared] selected hotel package")),y=Object(n.o)("[VendorPromotionDetailShared] unselected hotel package"),O=Object(n.o)("[VendorPromotionDetailShared] load detai information",Object(n.t)()),v=Object(n.o)("[VendorPromotionDetailShared] load detail information success",Object(n.t)()),V=Object(n.o)("[VendorPromotionDetailShared] load detail information failure",Object(n.t)()),k=Object(n.o)("[VendorPromotionDetailShared] upsert information",Object(n.t)()),I=Object(n.o)("[VendorPromotionDetailShared] upsert information failure",Object(n.t)())},O2vt:function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return l})),o.d(t,"i",(function(){return b})),o.d(t,"d",(function(){return d})),o.d(t,"c",(function(){return p})),o.d(t,"h",(function(){return m})),o.d(t,"g",(function(){return h})),o.d(t,"f",(function(){return g})),o.d(t,"e",(function(){return f}));var n=o("kt0X"),i=o("Nje5");const a="VendorPromotionDetailSharedMaster",r=Object(n.q)({selectedHotelPackage:null,mealBasisList:null,freeBreakfastList:null,cancelPenaltyList:null,masterLoading:!1,masterInfo:null,informationItem:null},Object(n.s)(i.g,e=>({masterLoading:!1,selectedHotelPackage:!1,masterInfo:null,informationItem:null})),Object(n.s)(i.d,(e,{dataList:t})=>Object.assign(Object.assign({},e),{freeBreakfastList:t})),Object(n.s)(i.f,(e,{dataList:t})=>Object.assign(Object.assign({},e),{mealBasisList:t})),Object(n.s)(i.b,(e,{dataList:t})=>Object.assign(Object.assign({},e),{cancelPenaltyList:t})),Object(n.s)(i.n,e=>Object.assign(Object.assign({},e),{masterLoading:!0})),Object(n.s)(i.o,(e,{masterInfo:t})=>Object.assign(Object.assign({},e),{masterInfo:t,masterLoading:!1})),Object(n.s)(i.q,e=>Object.assign(Object.assign({},e),{selectedHotelPackage:!0})),Object(n.s)(i.r,e=>Object.assign(Object.assign({},e),{selectedHotelPackage:!1})),Object(n.s)(i.v,(e,{upsertInfo:t})=>Object.assign(Object.assign({},e),{masterInfo:t})),Object(n.s)(i.l,(e,{informationItem:t})=>Object.assign(Object.assign({},e),{informationItem:t}))),s="VendorPromotionDetailShared";function l(e,t){return Object(n.m)({[a]:r})(e,t)}const c=Object(n.p)(s),u=Object(n.r)(c,e=>e[a]),b=Object(n.r)(u,e=>e.mealBasisList),d=Object(n.r)(u,e=>e.freeBreakfastList),p=Object(n.r)(u,e=>e.cancelPenaltyList),m=Object(n.r)(u,e=>e.masterLoading),h=Object(n.r)(u,e=>e.masterInfo),g=Object(n.r)(u,e=>e.informationItem),f=Object(n.r)(u,e=>e.selectedHotelPackage)},TEiF:function(e,t,o){"use strict";o.d(t,"a",(function(){return B}));var n=o("ofXK"),i=o("3Pt+"),a=o("snw9"),r=o("kt0X"),s=o("pxUr"),l=o("WG3B"),c=o("wPo9"),u=o("7rOj"),b=o("l1P7"),d=o("v7zA"),p=o("7UZF"),m=o("hHe4"),h=o("1OXJ"),g=o("5hwk"),f=o("6LsY"),P=o("kKjH"),C=o("eXiR"),y=o("vu/V"),O=o("tyNb"),v=o("fXoL");const V=[];let k=(()=>{class e{}return e.\u0275mod=v.Ob({type:e}),e.\u0275inj=v.Nb({factory:function(t){return new(t||e)},imports:[[O.f.forChild(V)],O.f]}),e})();o("asRa"),o("4qxg"),o("nidz");var I=o("O2vt"),D=o("LRne"),M=o("eIep"),F=o("lJxs"),T=o("JIr8"),j=o("Kj3r"),N=o("vkgz"),_=o("LvDl"),W=o("Nje5"),S=o("5uJM"),Y=o("EsKh"),L=o("Xb6A");let R=(()=>{class e{constructor(e,t,o,n,i){this.actions$=e,this.service=t,this.alertService=o,this._errorService=n,this.store=i,this.loadMealBasisList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(W.p),Object(M.a)(({condition:e})=>this.service.getDetailCodeList(e).pipe(Object(F.a)(e=>W.f({dataList:e})),Object(T.a)(e=>{const t="Meal basis list lookup failed. Please try again in a momentarily.",o=[W.e({error:t})];return this._catchErr(e,t,o),[]}))))),this.loadFreeBreakfastList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(W.i),Object(M.a)(({condition:e})=>this.service.getDetailCodeList(e).pipe(Object(F.a)(e=>W.d({dataList:e})),Object(T.a)(e=>{const t="Free breakfast list lookup failed. Please try again in a momentarily.",o=[W.c({error:t})];return this._catchErr(e,t,o),[]}))))),this.loadCancelPenaltyList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(W.h),Object(M.a)(({condition:e})=>this.service.getDetailCodeList(e).pipe(Object(F.a)(e=>W.b({dataList:e})),Object(T.a)(e=>{const t="Cancel penalty list lookup failed. Please try again in a momentarily.",o=[W.a({error:t})];return this._catchErr(e,t,o),[]}))))),this.loadMasterInfo$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(W.n),Object(M.a)(({condition:e})=>this.service.getMasterList(e).pipe(Object(F.a)(e=>W.o({masterInfo:e[0]})),Object(T.a)(e=>{const t="\ub9c8\uc2a4\ud130\uc815\ubcf4 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc\ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.",o=[W.m({error:t})];return this._catchErr(e,t,o),[]}))))),this.upsertMaster$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(W.u),Object(j.a)(500),Object(M.a)(({upsertCondition:e})=>this.service.upsertMaster(e).pipe(Object(F.a)(e=>({succeedYn:!0,upsertItem:e})),Object(T.a)(e=>Object(D.a)({succeedYn:!1,error:e})))),Object(N.a)(({succeedYn:e,upsertItem:t,error:o})=>{if(e){const e="Your save is complete.",o=[W.v({upsertInfo:t})];this._runPage(e,o)}else this._catchErr(o,"Failed to save.")})),{dispatch:!1}),this.loadInformation$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(W.j),Object(M.a)(({condition:e})=>this.service.getDetailInformation(e).pipe(Object(F.a)(e=>W.l({informationItem:e})),Object(T.a)(e=>{const t="\uc0c1\uc138\uc815\ubcf4 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc\ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.",o=[W.k({error:t})];return this._catchErr(e,t,o),[]}))))),this.upsertInformation$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(W.s),Object(M.a)(({upsertCondition:e})=>this.service.upsertInformation(e).pipe(Object(F.a)(e=>({succeedYn:!0,upsertItem:e})),Object(T.a)(e=>Object(D.a)({succeedYn:!1,error:e})))),Object(N.a)(({succeedYn:e,upsertItem:t,error:o})=>{if(e){const e="Your save is complete.",o=[W.l({informationItem:t})];this._runPage(e,o)}else{const e="Failed to save.",t=[W.t({error:e})];this._catchErr(o,e,t)}})),{dispatch:!1})}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this.store.dispatch(e)})}:()=>{}})}_catchErr(e,t,o){const n=this._errorService.errorHandler(e,t);_.isNil(n)||(_.isNil(n.accept)&&(n.accept=(null==o?void 0:o.length)>0?()=>{o.forEach(e=>{this.store.dispatch(e)})}:()=>{}),this.alertService.alert(n))}_setRoomCodeCondition({roomCode:e}){return{roomCode:e}}}return e.\u0275fac=function(t){return new(t||e)(v.bc(a.a),v.bc(S.a),v.bc(Y.a),v.bc(L.a),v.bc(r.h))},e.\u0275prov=v.Mb({token:e,factory:e.\u0275fac}),e})(),B=(()=>{class e{}return e.\u0275mod=v.Ob({type:e}),e.\u0275inj=v.Nb({factory:function(t){return new(t||e)},imports:[[n.c,i.m,i.w,s.a,l.m,c.a,u.a,g.a,b.a,d.a,p.a,m.a,h.a,P.a,y.a,C.a,f.a,k,r.j.forFeature(I.a,I.b),a.b.forFeature([R])]]}),e})()},asRa:function(e,t,o){"use strict";o.d(t,"a",(function(){return f}));var n=o("fXoL"),i=o("kt0X"),a=o("LvDl"),r=o("XNiG"),s=o("1G5W"),l=o("lOOf"),c=o("Nje5"),u=o("O2vt"),b=o("xDUJ"),d=o("ofXK"),p=o("4qxg"),m=o("nidz");const h=function(e){return{disabled:e}},g=function(e){return{active:e}};let f=(()=>{class e{constructor(e,t,o){this.store=e,this.parentStore=t,this.formService=o,this.closeEvent=new n.n,this.unsubscribe$=new r.a,this.mealBasisList$=e.pipe(Object(i.u)(u.i)),this.freeBreakfastList$=this.store.pipe(Object(i.u)(u.d)),this.cancelPenaltyList$=this.store.pipe(Object(i.u)(u.c)),this.masterLoading$=this.store.pipe(Object(i.u)(u.h)),this.masterInfo$=this.store.pipe(Object(i.u)(u.g)),this.informationItem$=this.store.pipe(Object(i.u)(u.f)),this.isSelectHotelPackage$=this.store.pipe(Object(i.u)(u.e))}ngOnInit(){this.tabIndex=0,this._setMasterInfo(),this._requestCommonDetail(),this._initSubscription()}ngOnDestroy(){this.store.dispatch(c.g()),this.parentStore.dispatch(l.a.unsetCopyMode()),this.unsubscribe$.next(),this.unsubscribe$.complete()}onChangeTab(e){this.tabIndex!==e&&(this.isCopyMode||this.isModifyMode||this.isSelectHotelPackage)&&(this.tabIndex=e)}upsertMasterHandler(e){var t;this.formService.cleanUp(e),this.addWithOnlyDate&&0==(null===(t=e.vendorRemark)||void 0===t?void 0:t.length)&&delete e.vendorRemark,this.store.dispatch(c.u({upsertCondition:e})),this.closeEvent.emit()}upsertInformationHandler(e){this.formService.cleanUp(e),this.store.dispatch(c.s({upsertCondition:e})),this.closeEvent.emit()}closeDetailHandler(){this.closeEvent.emit()}_setMasterInfo(){a.isNil(this.masterInfo)||this.store.dispatch(c.o({masterInfo:this.masterInfo}))}_requestCommonDetail(){this.store.dispatch(c.p({condition:{masterCode:"HO006"}})),this.store.dispatch(c.i({condition:{masterCode:"HO007"}})),this.store.dispatch(c.h({condition:{masterCode:"HO014"}}))}_initSubscription(){this.masterInfo$.pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{if(!a.isNil(e)){const{planPromotionSeq:t,planPromotionTypeCode:o}=e;this.masterInfo=e,this.addWithOnlyDate||(this.isModifyMode=!0),"PPT05"===o&&(this.isSelectHotelPackage=!0),this.store.dispatch(c.j({condition:{planPromotionSeq:t}}))}}),this.isSelectHotelPackage$.pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{null!=e&&(this.isSelectHotelPackage=e)})}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(i.h),n.Qb(i.h),n.Qb(b.a))},e.\u0275cmp=n.Kb({type:e,selectors:[["app-vendor-promotion-detail"]],inputs:{isCopyMode:"isCopyMode",isModifyMode:"isModifyMode",isResetPromotionSeq:"isResetPromotionSeq",addWithOnlyDate:"addWithOnlyDate",masterInfo:"masterInfo",planList:"planList",promotionTypes:"promotionTypes"},outputs:{closeEvent:"closeEvent"},decls:19,vars:33,consts:[[1,"tabs-main-group","no-btn"],[1,"tabs-main-group-outer"],[1,"tabs-nav"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"nav-link",3,"ngClass","click"],[1,"tabs-content","tabs-main-contents","contents-scroll"],["tabContainer",""],[1,"tab-pane",3,"ngClass"],[3,"masterItem","planList","isModifyMode","isResetPromotionSeq","isCopyMode","addWithOnlyDate","freeBreakfastList","mealBasisList","cancelPenaltyList","promotionTypes","submitEvent","closeEvent"],[3,"planPromotionSeq","detailInfo","submitEvent","closeEvent"]],template:function(e,t){1&e&&(n.Wb(0,"div",0),n.Wb(1,"div",1),n.Wb(2,"ul",2),n.Wb(3,"li",3),n.Wb(4,"a",4),n.fc("click",(function(){return t.onChangeTab(0)})),n.Pc(5,"Detail"),n.Vb(),n.Vb(),n.Wb(6,"li",3),n.Wb(7,"a",5),n.fc("click",(function(){return t.onChangeTab(1)})),n.Pc(8,"Description"),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(9,"div",6,7),n.Wb(11,"div",8),n.Wb(12,"app-vendor-promotion-detail-master",9),n.fc("submitEvent",(function(e){return t.upsertMasterHandler(e)}))("closeEvent",(function(){return t.closeDetailHandler()})),n.ic(13,"async"),n.ic(14,"async"),n.ic(15,"async"),n.Vb(),n.Vb(),n.Wb(16,"div",8),n.Wb(17,"app-vendor-promotion-detail-information",10),n.fc("submitEvent",(function(e){return t.upsertInformationHandler(e)}))("closeEvent",(function(){return t.closeDetailHandler()})),n.ic(18,"async"),n.Vb(),n.Vb(),n.Vb()),2&e&&(n.Cb(3),n.Gb("active",0===t.tabIndex),n.Cb(3),n.Gb("active",1===t.tabIndex),n.Cb(1),n.pc("ngClass",n.uc(27,h,!t.isCopyMode&&!t.isModifyMode&&!t.isSelectHotelPackage)),n.Cb(4),n.pc("ngClass",n.uc(29,g,0===t.tabIndex)),n.Cb(1),n.pc("masterItem",t.masterInfo)("planList",t.planList)("isModifyMode",t.isModifyMode)("isResetPromotionSeq",t.isResetPromotionSeq)("isCopyMode",t.isCopyMode)("addWithOnlyDate",t.addWithOnlyDate)("freeBreakfastList",n.jc(13,19,t.freeBreakfastList$))("mealBasisList",n.jc(14,21,t.mealBasisList$))("cancelPenaltyList",n.jc(15,23,t.cancelPenaltyList$))("promotionTypes",t.promotionTypes),n.Cb(4),n.pc("ngClass",n.uc(31,g,1===t.tabIndex)),n.Cb(1),n.pc("planPromotionSeq",null==t.masterInfo?null:t.masterInfo.planPromotionSeq)("detailInfo",n.jc(18,25,t.informationItem$)))},directives:[d.l,p.a,m.a],pipes:[d.b],encapsulation:2,changeDetection:0}),e})()},lOOf:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var n={};o.r(n),o.d(n,"loadRegisterStatusList",(function(){return a})),o.d(n,"getRegisterStatusListSuccess",(function(){return r})),o.d(n,"getRegisterStatusListFailure",(function(){return s})),o.d(n,"loadHotelTypeList",(function(){return l})),o.d(n,"getHotelTypeListSuccess",(function(){return c})),o.d(n,"getHotelTypeListFailure",(function(){return u})),o.d(n,"loadStarRatingList",(function(){return b})),o.d(n,"getStarRatingListSuccess",(function(){return d})),o.d(n,"getStarRatingListFailure",(function(){return p})),o.d(n,"loadDataStatusList",(function(){return m})),o.d(n,"getDataStatusSuccess",(function(){return h})),o.d(n,"getDataStatusFailure",(function(){return g})),o.d(n,"loadPromotionTypeList",(function(){return f})),o.d(n,"getPromotionTypeListSuccess",(function(){return P})),o.d(n,"getPromotionTypeListFailure",(function(){return C})),o.d(n,"loadPlanList",(function(){return y})),o.d(n,"getPlanListSuccess",(function(){return O})),o.d(n,"getPlanListFailure",(function(){return v})),o.d(n,"loadRoomTypeList",(function(){return V})),o.d(n,"getRoomTypeSuccess",(function(){return k})),o.d(n,"getRoomTypeFailure",(function(){return I})),o.d(n,"initStateAction",(function(){return D})),o.d(n,"changeSearchCondition",(function(){return M})),o.d(n,"changePageSize",(function(){return F})),o.d(n,"changePageIndex",(function(){return T})),o.d(n,"loadList",(function(){return j})),o.d(n,"getListSuccess",(function(){return N})),o.d(n,"getListFailure",(function(){return _})),o.d(n,"upsertList",(function(){return W})),o.d(n,"getHistories",(function(){return S})),o.d(n,"openDetailPopup",(function(){return Y})),o.d(n,"closeDetailPopup",(function(){return L})),o.d(n,"setCopyMode",(function(){return R})),o.d(n,"unsetCopyMode",(function(){return B})),o.d(n,"addSelectedDetailRowInfo",(function(){return E})),o.d(n,"delSelectedDetailRowInfo",(function(){return A})),o.d(n,"addRetrievedHotelSimple",(function(){return H})),o.d(n,"delRetrievedHotelSimple",(function(){return x})),o.d(n,"putAllotment",(function(){return q})),o.d(n,"setGridStateAction",(function(){return G})),o.d(n,"setGridCheckedStateAction",(function(){return $}));var i=o("kt0X");const a=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub4f1\ub85d\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),r=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub4f1\ub85d\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),s=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub4f1\ub85d\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),l=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ud638\ud154\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),c=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ud638\ud154\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),u=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ud638\ud154\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),b=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ud638\ud154\ub4f1\uae09 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),d=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ud638\ud154\ub4f1\uae09 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),p=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ud638\ud154\ub4f1\uae09 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),m=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub370\uc774\ud130\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),h=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub370\uc774\ud130\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),g=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub370\uc774\ud130\uc0c1\ud0dc \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),f=Object(i.o)("[HoHotelVendorPromotionMaster/List] promotion type \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),P=Object(i.o)("[HoHotelVendorPromotionMaster/List] promotion type \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),C=Object(i.o)("[HoHotelVendorPromotionMaster/List] promotion type \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),y=Object(i.o)("[HoHotelVendorPromotionMaster/List] plan \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),O=Object(i.o)("[HoHotelVendorPromotionMaster/List] plan \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),v=Object(i.o)("[HoHotelVendorPromotionMaster/List] plan \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),V=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub8f8\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c",Object(i.t)()),k=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub8f8\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc131\uacf5",Object(i.t)()),I=Object(i.o)("[HoHotelVendorPromotionMaster/List] \ub8f8\ud0c0\uc785 \ub9ac\uc2a4\ud2b8 \ud638\ucd9c \uc2e4\ud328",Object(i.t)()),D=Object(i.o)("[HoHotelVendorPromotionMaster/List] init state"),M=Object(i.o)("[HoHotelVendorPromotionMaster/List] change search condition",Object(i.t)()),F=Object(i.o)("[HoHotelVendorPromotionMaster/List] change page size",Object(i.t)()),T=Object(i.o)("[HoHotelVendorPromotionMaster/List] change page index",Object(i.t)()),j=Object(i.o)("[HoHotelVendorPromotionMaster/List] load grid data list",Object(i.t)()),N=Object(i.o)("[HoHotelVendorPromotionMaster/List] get list success",Object(i.t)()),_=Object(i.o)("[HoHotelVendorPromotionMaster/List] get list failure",Object(i.t)()),W=Object(i.o)("[HoHotelVendorPromotionMaster/List] upsert grid data list",Object(i.t)()),S=Object(i.o)("[HoHotelVendorPromotionMaster/History] load room history list",Object(i.t)()),Y=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \uc0c1\uc138\ud31d\uc5c5 \uc5f4\uae30"),L=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \uc0c1\uc138\ud31d\uc5c5 \ub2eb\uae30"),R=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \ubcf5\uc0ac\ubaa8\ub4dc \uc124\uc815"),B=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \ubcf5\uc0ac\ubaa8\ub4dc \uc124\uc815\ud574\uc81c"),E=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc120\ud0dd",Object(i.t)()),A=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc81c\uac70"),H=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \uac80\uc0c9\ud55c \ud638\ud154 \uc800\uc7a5",Object(i.t)()),x=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] \uac80\uc0c9\ud55c \ud638\ud154 \uc81c\uac70"),q=Object(i.o)("[HoHotelVendorPromotionMaster/Detail] put allotment",Object(i.t)()),G=Object(i.o)("[HoHotelVendorPromotionMaster/List] set grid state",Object(i.t)()),$=Object(i.o)("[HoHotelVendorPromotionMaster/List] set grid checked state",Object(i.t)())},nidz:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var n=o("fXoL"),i=o("XNiG"),a=o("LvDl"),r=o("5uJM"),s=o("3Pt+"),l=o("RfQl");let c=(()=>{class e{constructor(e){this.dataService=e,this.submitEvent=new n.n,this.closeEvent=new n.n,this.unsubscribe$=new i.a,this.upsertForm=this.dataService.generateDetailInfoPutForm()}get detailInfo(){return this._detailInfo}set detailInfo(e){if(this._detailInfo=e,e){const{planPromotionDetailEn:t,planPromotionDetailKo:o,planPromotionDetailJa:n,planPromotionDetailVi:i,planPromotionDetailZh:a,planPromotionSeq:r}=e;this.upsertForm.patchValue({planPromotionDetailEn:t,planPromotionDetailKo:o,planPromotionDetailJa:n,planPromotionDetailVi:i,planPromotionDetailZh:a,planPromotionSeq:r})}}ngOnInit(){}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onSubmit(){const e=this._setUpsertCondition();this.submitEvent.emit(e)}onClose(){this.closeEvent.emit()}_setUpsertCondition(){const e=this.dataService.initDetailInfoPutFormData(),t=this.planPromotionSeq;return Object.assign({},a.pick(this.upsertForm.value,Object.keys(e)),{planPromotionSeq:t})}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(r.b))},e.\u0275cmp=n.Kb({type:e,selectors:[["app-vendor-promotion-detail-information"]],inputs:{loading:"loading",planPromotionSeq:"planPromotionSeq",detailInfo:"detailInfo"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:43,vars:1,consts:[[1,"table","table-bordered","mb10",3,"formGroup"],["width","11%"],["scope","row",1,"th-bg"],[1,"textarea"],["toolBarType","full","formControlName","planPromotionDetailEn"],["toolBarType","full","formControlName","planPromotionDetailKo"],["toolBarType","full","formControlName","planPromotionDetailJa"],["toolBarType","full","formControlName","planPromotionDetailVi"],["toolBarType","full","formControlName","planPromotionDetailZh"],[1,"button-area","d-flex","justify-content-end","mt10"],[1,"btn","btn-secondary","sm",3,"click"],[1,"btn","btn-light","sm",3,"click"]],template:function(e,t){1&e&&(n.Wb(0,"form",0),n.Wb(1,"table"),n.Wb(2,"caption"),n.Pc(3," Description "),n.Vb(),n.Wb(4,"colgroup"),n.Rb(5,"col",1),n.Rb(6,"col"),n.Vb(),n.Wb(7,"tbody"),n.Wb(8,"tr"),n.Wb(9,"th",2),n.Pc(10,"Promotion Description(EN)"),n.Vb(),n.Wb(11,"td"),n.Wb(12,"div",3),n.Rb(13,"app-editor",4),n.Vb(),n.Vb(),n.Vb(),n.Wb(14,"tr"),n.Wb(15,"th",2),n.Pc(16,"Promotion Description(KO)"),n.Vb(),n.Wb(17,"td"),n.Wb(18,"div",3),n.Rb(19,"app-editor",5),n.Vb(),n.Vb(),n.Vb(),n.Wb(20,"tr"),n.Wb(21,"th",2),n.Pc(22,"Promotion Description(JA)"),n.Vb(),n.Wb(23,"td"),n.Wb(24,"div",3),n.Rb(25,"app-editor",6),n.Vb(),n.Vb(),n.Vb(),n.Wb(26,"tr"),n.Wb(27,"th",2),n.Pc(28,"Promotion Description(VI)"),n.Vb(),n.Wb(29,"td"),n.Wb(30,"div",3),n.Rb(31,"app-editor",7),n.Vb(),n.Vb(),n.Vb(),n.Wb(32,"tr"),n.Wb(33,"th",2),n.Pc(34,"Promotion Description(ZH)"),n.Vb(),n.Wb(35,"td"),n.Wb(36,"div",3),n.Rb(37,"app-editor",8),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(38,"div",9),n.Wb(39,"button",10),n.fc("click",(function(){return t.onSubmit()})),n.Pc(40,"Save"),n.Vb(),n.Wb(41,"button",11),n.fc("click",(function(){return t.onClose()})),n.Pc(42,"Close"),n.Vb(),n.Vb()),2&e&&n.pc("formGroup",t.upsertForm)},directives:[s.B,s.s,s.k,l.a,s.r,s.i],encapsulation:2,changeDetection:0}),e})()}}]);