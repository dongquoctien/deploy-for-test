(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{cQ4z:function(e,t,i){"use strict";i.r(t),i.d(t,"CONTAINERS",(function(){return gi})),i.d(t,"COMPONENTS",(function(){return Ci})),i.d(t,"HoReservationListOtaModule",(function(){return fi}));var o={};i.r(o),i.d(o,"setFunctionAuths",(function(){return V})),i.d(o,"loadDateRangeTypeAction",(function(){return w})),i.d(o,"loadDateRangeTypeSuccessAction",(function(){return W})),i.d(o,"loadDateRangeTypeFailureAction",(function(){return A})),i.d(o,"loadStationTypeAction",(function(){return x})),i.d(o,"loadStationTypeSuccessAction",(function(){return D})),i.d(o,"loadStationTypeFailureAction",(function(){return _})),i.d(o,"loadDeviceTypeAction",(function(){return F})),i.d(o,"loadDeviceTypeSuccessAction",(function(){return $})),i.d(o,"loadDeviceTypeFailureAction",(function(){return E})),i.d(o,"loadBookingStatusAction",(function(){return B})),i.d(o,"loadBookingStatusSuccessAction",(function(){return M})),i.d(o,"loadBookingStatusFailureAction",(function(){return H})),i.d(o,"loadContractTypeAction",(function(){return Y})),i.d(o,"loadContractTypesSuccessAction",(function(){return K})),i.d(o,"loadPaymentStatusListAction",(function(){return z})),i.d(o,"loadPaymentStatusListSuccessAction",(function(){return U})),i.d(o,"loadClientPaymentStatusCodeListAction",(function(){return G})),i.d(o,"loadClientPaymentStatusCodeListSuccessAction",(function(){return Q})),i.d(o,"loadClientPaymentStatusCodeListFailureAction",(function(){return q})),i.d(o,"initThisStateAction",(function(){return X})),i.d(o,"loadMainListAction",(function(){return J})),i.d(o,"loadMainListSuccessAction",(function(){return Z})),i.d(o,"loadMainListFailureAction",(function(){return ee})),i.d(o,"changeSearchConditionAction",(function(){return te})),i.d(o,"changeMainListPageSizeAction",(function(){return ie})),i.d(o,"changeMainListPageIndexAction",(function(){return oe})),i.d(o,"setGridStateAction",(function(){return ne})),i.d(o,"updateAssignPicItems",(function(){return ae})),i.d(o,"openAssignPicModalAction",(function(){return se})),i.d(o,"closeAssignPicModalAction",(function(){return ce})),i.d(o,"updateAssignPicItemsSuccess",(function(){return le})),i.d(o,"updateAssignPicItemsFailure",(function(){return re})),i.d(o,"openOffRegistPopup",(function(){return de})),i.d(o,"closeOffRegistPopup",(function(){return ue})),i.d(o,"openUmsPopup",(function(){return pe})),i.d(o,"closeUmsPopup",(function(){return be})),i.d(o,"updateCountryCode",(function(){return me}));var n=i("ofXK"),a=i("3Pt+"),s=i("snw9"),c=i("kt0X"),l=i("WG3B"),r=i("wPo9"),d=i("7rOj"),u=i("6LsY"),p=i("l1P7"),b=i("v7zA"),m=i("hHe4"),h=i("1OXJ"),g=i("5hwk"),C=i("kKjH"),f=i("qXPF"),v=i("/AQM"),y=i("YyVL"),k=i("9kH+"),S=i("vu/V"),O=i("tyNb"),j=i("XNiG"),L=i("itXk"),R=i("zP0r"),P=i("Kj3r"),T=i("pLZG"),N=i("1G5W"),I=i("LvDl");const V=Object(c.o)("[HoReservationListOta] set function auths",Object(c.t)()),w=Object(c.o)("[HoReservationListOta] load date range type",Object(c.t)()),W=Object(c.o)("[HoReservationListOta] load date range type success",Object(c.t)()),A=Object(c.o)("[HoReservationListOta] load date range type failure",Object(c.t)()),x=Object(c.o)("[HoReservationListOta] load station type",Object(c.t)()),D=Object(c.o)("[HoReservationListOta] load station type success",Object(c.t)()),_=Object(c.o)("[HoReservationListOta] load station type failure",Object(c.t)()),F=Object(c.o)("[HoReservationListOta] load device type",Object(c.t)()),$=Object(c.o)("[HoReservationListOta] load device type success",Object(c.t)()),E=Object(c.o)("[HoReservationListOta] load device type failure",Object(c.t)()),B=Object(c.o)("[HoReservationListOta] load booking status",Object(c.t)()),M=Object(c.o)("[HoReservationListOta] load booking status success",Object(c.t)()),H=Object(c.o)("[HoReservationListOta] load booking status failure",Object(c.t)()),Y=Object(c.o)("[HoReservationListOta] load contractTypeList",Object(c.t)()),K=Object(c.o)("[HoReservationListOta] load contractTypeList success",Object(c.t)()),z=Object(c.o)("[HoReservationListOta] load paymentStatusList",Object(c.t)()),U=Object(c.o)("[HoReservationListOta] load paymentStatusList success",Object(c.t)()),G=Object(c.o)("[HoReservationListOta] load clientPaymentStatusCodeList",Object(c.t)()),Q=Object(c.o)("[HoReservationListOta] load clientPaymentStatusCodeList success",Object(c.t)()),q=Object(c.o)("[HoReservationListOta] load clientPaymentStatusCodeList failure"),X=Object(c.o)("[HoReservationListOta] init hotel reservation list ota"),J=Object(c.o)("[HoReservationListOta] load hotel reservation list ota",Object(c.t)()),Z=Object(c.o)("[HoReservationListOta] load hotel reservation list success",Object(c.t)()),ee=Object(c.o)("[HoReservationListOta] load hotel reservation list failure",Object(c.t)()),te=Object(c.o)("[HoReservationListOta] change search condition",Object(c.t)()),ie=Object(c.o)("[HoReservationListOta] change hotel reservation list ota page size",Object(c.t)()),oe=Object(c.o)("[HoReservationListOta] change hotel reservation list ota page index",Object(c.t)()),ne=Object(c.o)("[HoReservationListOta] set grid state",Object(c.t)()),ae=Object(c.o)("[HoReservationListOta/AssignPicUpdate] \uc77c\uad04\ubcc0\uacbd \ud31d\uc5c5\uc5d0\uc11c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(c.t)()),se=Object(c.o)("[HoReservationListOta] open assign pic modal"),ce=Object(c.o)("[HoReservationListOta] close assign pic modal"),le=Object(c.o)("[HoReservationListOta] update items success",Object(c.t)()),re=Object(c.o)("[HoReservationListOta] update items failure",Object(c.t)()),de=Object(c.o)("[HoReservationListOta] open off regist popup"),ue=Object(c.o)("[HoReservationListOta] close off regist popup"),pe=Object(c.o)("[HoReservationListOta] open ums popup"),be=Object(c.o)("[HoReservationListOta] close ums popup"),me=Object(c.o)("[HoReservationListOta] update country code",Object(c.t)());var he=i("EVqC");const ge=Object(he.a)({selectId:e=>e.rowid,sortComparer:!1}),Ce=ge.getInitialState({dateRangeTypeList:null,stationTypeList:null,deviceTypeList:null,onOffManualList:null,bookingStatusList:null,clientPaymentStatusCodeList:null,vendorList:null,continentList:null,loading:!1,searchCondition:null,otherSearchInfo:null,mainSummaryInfo:null,mainDataTotalCount:0,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},contractTypeList:null,paymentStatusList:null,pageSize:20,countryCode:""}),fe=Object(c.q)(Ce,Object(c.s)(o.loadDateRangeTypeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{dateRangeTypeList:t})),Object(c.s)(o.loadStationTypeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{stationTypeList:t})),Object(c.s)(o.loadDeviceTypeSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{deviceTypeList:t})),Object(c.s)(o.loadBookingStatusSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{bookingStatusList:t})),Object(c.s)(o.loadContractTypesSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{contractTypeList:t})),Object(c.s)(o.loadPaymentStatusListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{paymentStatusList:t})),Object(c.s)(o.loadClientPaymentStatusCodeListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{clientPaymentStatusCodeList:t})),Object(c.s)(o.changeSearchConditionAction,(e,{searchCondition:t,otherSearchInfo:i})=>Object.assign(Object.assign({},e),{searchCondition:I.cloneDeep(t),otherSearchInfo:i})),Object(c.s)(o.initThisStateAction,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(c.s)(o.loadMainListAction,e=>Object.assign(Object.assign({},e),{loading:!0,checkedRowIds:[]})),Object(c.s)(o.loadMainListSuccessAction,(e,{dataCollection:t})=>ge.setAll(t.list,Object.assign(Object.assign({},e),{loading:!1,mainSummaryInfo:t.summary,mainDataTotalCount:t.totalCount}))),Object(c.s)(o.loadMainListFailureAction,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(c.s)(o.changeMainListPageSizeAction,(e,{pageSize:t})=>Object.assign(Object.assign({},e),{gridState:I.set(I.cloneDeep(e.gridState),["pageInfo","take"],t),pageSize:t})),Object(c.s)(o.changeMainListPageIndexAction,(e,{pageIndex:t})=>Object.assign(Object.assign({},e),{gridState:I.set(I.cloneDeep(e.gridState),["pageInfo","skip"],t)})),Object(c.s)(o.setGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{gridState:t})),Object(c.s)(o.updateAssignPicItemsSuccess,(e,{updateList:t})=>ge.upsertMany(t,Object.assign(Object.assign({},e),{checkedRowIds:[]}))),Object(c.s)(o.updateCountryCode,(e,{countryCode:t})=>Object.assign(Object.assign({},e),{countryCode:t})));function ve(e,t){return Object(c.m)({hoReservationListOtaMain:fe})(e,t)}const ye=Object(c.p)("hoReservationListOta"),ke=Object(c.r)(ye,e=>e.hoReservationListOtaMain),Se=Object(c.r)(ke,e=>e.dateRangeTypeList),Oe=Object(c.r)(ke,e=>e.stationTypeList),je=Object(c.r)(ke,e=>e.deviceTypeList),Le=Object(c.r)(ke,e=>e.bookingStatusList),Re=(Object(c.r)(ke,e=>e.vendorList),Object(c.r)(ke,e=>e.contractTypeList)),Pe=Object(c.r)(ke,e=>e.paymentStatusList),Te=Object(c.r)(ke,e=>e.clientPaymentStatusCodeList),Ne=Object(c.r)(ke,e=>e.searchCondition),Ie=Object(c.r)(ke,e=>e.otherSearchInfo),Ve=Object(c.r)(ke,e=>e.loading),we=ge.getSelectors(ke).selectAll,We=Object(c.r)(ke,e=>e.mainSummaryInfo),Ae=Object(c.r)(ke,e=>e.mainDataTotalCount),xe=Object(c.r)(ke,e=>e.gridState),De=Object(c.r)(ke,e=>e.pageSize),_e=Object(c.r)(ke,e=>e.countryCode);var Fe=i("YY+H"),$e=i("fXoL"),Ee=i("pfiq"),Be=i("/uUt"),Me=i("wd/R"),He=i("6UzV");let Ye=(()=>{class e{constructor(e){this.fb=e,this.generateGridColumns=()=>[{field:"firstInsertDatetime",title:"Booking Date",template:"bookingDateTpl"},{field:"bookerCompName",title:"Seller",template:"sellerTpl"},{field:"hotelNameEn",title:"Hotel",template:"hotelTpl"},{field:"checkInDate",title:"Check In / Room Type",template:"checkInRoomTypeTpl"},{field:"travelerName",title:"1st Traveler Name"},{field:"bookingStatusName",title:"Booking Status",template:"bookingStatusTpl"},{field:"clientPaymentStatusName",title:"Payment Status",template:"paymentStatusTpl"},{field:"vendorCompCode",title:"Vendor",template:"vendorTpl"}],this.generateHoReservationListOtaSearchForm=()=>this.fb.group({searchTypeCode:[null],dateRange1:this.fb.group({rangeType:[null],dates:this.fb.array([new a.g(null,[a.z.required]),new a.g(null,[a.z.required])])},{validators:[He.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),dateRange2:this.fb.group({rangeType:[null],dates:this.fb.array([new a.g(null),new a.g(null)])},{validators:[He.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),dateRange3:this.fb.group({rangeType:[null],dates:this.fb.array([new a.g(null),new a.g(null)])},{validators:[He.a.compareDatesValidators("rangeCompare",[["dates",0],["dates",1]])]}),stationTypeCode:null,domainAddresses:null,deviceTypeCode:null,onOffManual:null,bookingItemCode:null,bookerId:null,travelerName:null,bookerMobileNo:null,bookerName:null,bookingStatusCodes:null,hotelContractTypeCode:null,mutualContractBookingYn:null,countryCode:null,hotelName:null,hotelCode:null,bookerCompCode:null,sellerBookingCode:null,vendorPaymentStatusCode:null,clientPaymentStatusCode:null,vendorCompCodes:null,vendorBookingCode:null,vendorBookingItemCode:null,bookingCmsPmsCompCode:null,cancelConfirmYn:null,bookingPicName:null,bookingPicUno:null,destinationCountryCode:null,selectedBookerDropdown:null,groupYn:null,directYn:null}),this.initHoReservationListOtaSearchForm=()=>({dateRange1:{rangeType:"HDA01",dates:[Me().format("YYYY-MM-DD"),Me().format("YYYY-MM-DD")]},dateRange2:{rangeType:"HDA02",dates:[null,null]},dateRange3:{rangeType:"HDA03",dates:[null,null]},stationTypeCode:null,domainAddresses:null,deviceTypeCode:null,onOffManual:null,bookingItemCode:null,bookerId:null,travelerName:null,bookerMobileNo:null,bookerName:null,bookingStatusCodes:null,hotelContractTypeCode:null,mutualContractBookingYn:null,countryCode:null,hotelName:null,hotelCode:null,bookerCompCode:null,sellerBookingCode:null,vendorPaymentStatusCode:null,clientPaymentStatusCode:null,vendorCompCodes:null,vendorBookingCode:null,vendorBookingItemCode:null,bookingCmsPmsCompCode:null,cancelConfirmYn:null,bookingPicName:null,bookingPicUno:null,destinationCountryCode:null,selectedBookerDropdown:"bookerName",groupYn:null,directYn:!1}),this.generateAssignPicPutForm=()=>this.fb.group({itemCategoryCode:[null],picTypeCode:[null],picUno:[null,[a.z.required]],picName:[null]}),this.initAssignPicPutForm=()=>({itemCategoryCode:"IC02",picTypeCode:"PIC01",picUno:null,picName:null})}}return e.\u0275fac=function(t){return new(t||e)($e.bc(a.f))},e.\u0275prov=$e.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ke=i("LRne"),ze=i("z6cu"),Ue=i("eIep"),Ge=i("AytR");const{API_URL:Qe}=Ge.a,qe={postCommonDetailCode:`${Qe}/common/detail-code`,postCommonComp:`${Qe}/common/comp`,postBasicContinent:`${Qe}/admin/basis/continent`,postHotelList:`${Qe}/admin/booking/hotel/list`,putAssignPicItems:`${Qe}/admin/booking/pic-assign`,excelDownload:`${Qe}/admin/booking/hotel/excel`,postFunction:`${Qe}/admin/basis/function`,bookingListExport:`${Qe}/batch/download/hotel-booking-list`};var Xe=i("tpT/");let Je=(()=>{class e{constructor(e){this.api=e}getCommonDetailCodeList(e){const t=I.assign({},this.api.defaultParams,{condition:e});return this.api.post(qe.postCommonDetailCode,t).pipe(Object(Ue.a)(e=>e.succeedYn?Object(Ke.a)(e.result.list):Object(ze.a)(e||"api response error")))}getVendorList(e){const t=I.assign({},this.api.defaultParams,{condition:e});return this.api.post(qe.postCommonComp,t).pipe(Object(Ue.a)(e=>e.succeedYn?Object(Ke.a)(e.result.list):Object(ze.a)(e||"api response error")))}getContinentList(e){const t=I.assign({},this.api.defaultParams,{condition:e});return this.api.post(qe.postBasicContinent,t).pipe(Object(Ue.a)(e=>e.succeedYn?Object(Ke.a)(e.result.list):Object(ze.a)(e||"api response error")))}getMainList(e){const t=I.assign({},this.api.defaultParams,{condition:e});return this.api.post(qe.postHotelList,t).pipe(Object(Ue.a)(e=>{var t,i,o;if(e.succeedYn){const n=this._addRowid(null===(t=e.result)||void 0===t?void 0:t.list),a=(null===(i=e.result)||void 0===i?void 0:i.summary)?e.result.summary:{},s=(null===(o=e.result)||void 0===o?void 0:o.totalCount)||0;return Object(Ke.a)({list:n,summary:a,totalCount:s})}return Object(ze.a)(e||"api response error")}))}updateAssignPicItems(e){const t=I.assign({},this.api.defaultParams,{condition:e});return this.api.put(qe.putAssignPicItems,t).pipe(Object(Ue.a)(e=>e.succeedYn?Object(Ke.a)(e.result.list.map(e=>({id:e.bookingItemCode,bookingPicUno:e.picUno,bookingPicName:e.picName,bookingItemCode:e.bookingItemCode}))):Object(ze.a)(e||"api response error")))}bookingListExport(e){const t=I.assign({},this.api.defaultParams,{condition:e});return this.api.put(qe.bookingListExport,t).pipe(Object(Ue.a)(e=>{if(e.succeedYn){const t=e;return Object(Ke.a)(t)}return Object(ze.a)(e||"api response error")}))}getBasisFunctions(e){const t=I.assign({},this.api.defaultParams,{condition:e});return this.api.post(qe.postFunction,t).pipe(Object(Ue.a)(e=>e.succeedYn&&e.result?Object(Ke.a)(e.result.list||[]):Object(ze.a)(e||"api response error")))}_addRowid(e){return I.isNil(e)?[]:e.map((e,t)=>Object.assign(Object.assign({},e),{rowid:String(t)}))}}return e.\u0275fac=function(t){return new(t||e)($e.bc(Xe.a))},e.\u0275prov=$e.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ze=i("EsKh"),et=i("+Sob"),tt=i("nMd8"),it=i("rbKv"),ot=i("kd+X"),nt=i("LVFn"),at=i("0xcq"),st=i("gbCm"),ct=i("pb6r"),lt=i("U6NN"),rt=i("U2QM");function dt(e,t){1&e&&$e.Rb(0,"app-input-text",51)}function ut(e,t){1&e&&$e.Rb(0,"app-input-text",52)}function pt(e,t){1&e&&$e.Rb(0,"app-input-text",53)}function bt(e,t){1&e&&$e.Rb(0,"app-input-text",54)}const mt=function(){return["countryCode","countryNameEn"]},ht=function(){return["CMP02","CMP03"]},gt=function(e){return{compTypeCodes:e}},Ct=function(){return["compName","compCode"]},ft=function(){return["CMP04","CMP05","CMP06","CMP11"]},vt=function(){return["compCode","compName"]},yt=function(){return["CMP07","CMP08"]},kt=function(){return{userTypeCode:"U01"}},St=function(){return["userNo","name","deptName","positionName"]};let Ot=(()=>{class e{constructor(e,t,i){this._dataService=e,this._alertService=t,this.store=i,this.clickSearchEvent=new $e.n,this.clickResetEvent=new $e.n,this.isShowmore=!1,this._$unsubscribe=new j.a,this.searchForm=e.generateHoReservationListOtaSearchForm()}get clientPaymentStatusCodeList(){return this._clientPaymentStatusCodeList}set clientPaymentStatusCodeList(e){e&&(this._clientPaymentStatusCodeList=e.filter(e=>e.referCode1.includes("IC02")))}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(e){this._otherSearchInfo=e,this._setOtherSearchInfo(e)}get dateRangeTypeList(){return this._dataRangeTypeList}set dateRangeTypeList(e){this._dataRangeTypeList=e,this._initDateRangeList(e)}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}get dateRange1Dates(){return this.searchForm.get("dateRange1").get("dates").value}get dateRange2Dates(){return this.searchForm.get("dateRange2").get("dates").value}get dateRange3Dates(){return this.searchForm.get("dateRange3").get("dates").value}get formValue(){return this.searchForm&&this.searchForm.value}ngOnInit(){this._initOptionLists(),this._initSubscription()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}checkIsInvalidDateRange(e){var t;return this._checkValid&&(!0===(null===(t=e.errors)||void 0===t?void 0:t.rangeCompare)||e.invalid)}onSubmit(){if(this.searchForm.invalid)return Object.keys(this.searchForm.controls).forEach(e=>{this.searchForm.controls[e].invalid&&console.log(e+" is invalid")}),void(this._checkValid=!0);const e=this.setSearchCondition(),t=this._setOtherSearchCondition(),i=["handleStatusCode","bookingCode","bookingItemCode","vendorBookingCode","bookerName","bookerId","travelerName","bookerMobileNo"];let o=0;Object.keys(e).forEach(e=>{i.includes(e)&&o++}),o>1?this._alertService.alert("Booking TAG, Unified Booking Code, Booking Code, V.Booking Code, Booking Name, Booking ID, Guest Name, Mobile Number\nThese conditions cannot be used together."):(this.clickSearchEvent.emit({searchCondition:e,otherSearchInfo:t}),this._checkValid=!1)}onReset(){this.clickResetEvent.emit()}onChangerangeType1({value:e}){const t=e;this.dateRangeTypeList2=this.dateRangeTypeList.filter(e=>e.detailCode!==t);const i=this.dateRangeTypeList2[0].detailCode;this.dateRangeTypeList3=this.dateRangeTypeList.filter(e=>e.detailCode!==t&&e.detailCode!==i);const o=this.dateRangeTypeList3[0].detailCode;this.searchForm.get("dateRange2").get("rangeType").setValue(i),this.searchForm.get("dateRange3").get("rangeType").setValue(o)}onChangerangeType2({value:e}){this.dateRangeTypeList3=this.dateRangeTypeList2.filter(t=>t.detailCode!==e),this.searchForm.get("dateRange3").get("rangeType").setValue(this.dateRangeTypeList2[0].detailCode)}setSearchCondition(){const e=this._dataService.initHoReservationListOtaSearchForm(),t=Object.assign({},I.pick(this.searchForm.value,Object.keys(e)));return t.vendorCompCodes&&(t.vendorCompCodes=t.vendorCompCodes.length>0?t.vendorCompCodes:[t.vendorCompCodes]),I.omitBy(t,I.isNil)}changeCountryCode(e){setTimeout(()=>{this.store.dispatch(o.updateCountryCode({countryCode:this.searchForm.get("destinationCountryCode").value||""}))},500)}_setOtherSearchInfo(e){this.bookingPicUnoInputFieldValue=(null==e?void 0:e.picUnoInput)||null,this.countryInputFieldValue=(null==e?void 0:e.countryInput)||null,this.vendorCompCodesInputFieldValue=(null==e?void 0:e.vendorCompInput)||null,this.bookingCmsPmsCompCodeInputFieldValue=(null==e?void 0:e.cmsPmsCompInput)||null,this.bookerCompCodeInputFieldValue=(null==e?void 0:e.sellerCompInput)||null}_setOtherSearchCondition(){const e={};return this.autoCopmpletes.forEach(t=>{Object.assign(e,t.getInputValue())}),e}_setSearchFormData(e){const t=this._dataService.initHoReservationListOtaSearchForm();return this.bookingPicUnoInputFieldValue=I.isNil(null==e?void 0:e.bookingPicUno)?"":null==e?void 0:e.bookingPicUno.toString(),this.countryInputFieldValue=I.isNil(null==e?void 0:e.destinationCountryCode)?"":null==e?void 0:e.destinationCountryCode,this.vendorCompCodesInputFieldValue=I.isNil(null==e?void 0:e.vendorCompCodes)?"":null==e?void 0:e.vendorCompCodes.toString(),this.bookingCmsPmsCompCodeInputFieldValue=I.isNil(null==e?void 0:e.bookingCmsPmsCompCode)?"":null==e?void 0:e.bookingCmsPmsCompCode.toString(),this.bookerCompCodeInputFieldValue=I.isNil(null==e?void 0:e.bookerCompCode)?"":null==e?void 0:e.bookerCompCode.toString(),Object.assign({},t,I.pick(e,Object.keys(t)))}_initDateRangeList(e){var t,i;const o=null===(t=this.searchCondition)||void 0===t?void 0:t.dateRange1.rangeType,n=null===(i=this.searchCondition)||void 0===i?void 0:i.dateRange2.rangeType;this.dateRangeTypeList2=null==e?void 0:e.filter(e=>e.detailCode!==o),this.dateRangeTypeList3=null==e?void 0:e.filter(e=>e.detailCode!==o&&e.detailCode!==n)}_initOptionLists(){this.regionList=[{value:"I",label:"\ud574\uc678\ud638\ud154"},{value:"D",label:"\uad6d\ub0b4\uc219\ubc15"}],this.onOffList=[{value:"O",label:"Online"},{value:"F",label:"Offline"}],this.bookerDropdownOptions=[{value:"bookerName",label:"Booker Name"},{value:"bookerId",label:"Booker ID"},{value:"travelerName",label:"Traveler"},{value:"bookerMobileNo",label:"Mobile No."}],this.domainTypeList=[{value:"www.ohmyhotel.com"},{value:"www.ohmytrip.com"},{value:"ohmyhotel.biz"},{value:"m.ohmytrip.com"},{value:"m.ohmyhotel.com"}],this.useYnOptions=[{value:!0,label:"Y"},{value:!1,label:"N"}]}_initSubscription(){this.searchForm.get("dateRange1").get("rangeType").valueChanges.pipe(Object(N.a)(this._$unsubscribe)).subscribe(e=>{this.dateRangeTypeList2=this.dateRangeTypeList?this.dateRangeTypeList.filter(t=>t.detailCode!==e):[];const t=this.dateRangeTypeList2.length?this.dateRangeTypeList2[0].detailCode:null;this.searchForm.get("dateRange2").get("rangeType").setValue(t)}),this.searchForm.get("dateRange2").get("rangeType").valueChanges.pipe(Object(N.a)(this._$unsubscribe)).subscribe(e=>{this.dateRangeTypeList3=this.dateRangeTypeList2?this.dateRangeTypeList2.filter(t=>t.detailCode!==e):[];const t=this.dateRangeTypeList3.length?this.dateRangeTypeList3[0].detailCode:null;this.searchForm.get("dateRange3").get("rangeType").setValue(t)}),this.searchForm.get("selectedBookerDropdown").valueChanges.pipe(Object(Be.a)(),Object(N.a)(this._$unsubscribe)).subscribe(()=>{this.searchForm.get("bookerId").reset(),this.searchForm.get("travelerName").reset(),this.searchForm.get("bookerMobileNo").reset(),this.searchForm.get("bookerName").reset()})}}return e.\u0275fac=function(t){return new(t||e)($e.Qb(Ye),$e.Qb(Ze.a),$e.Qb(c.h))},e.\u0275cmp=$e.Kb({type:e,selectors:[["app-ho-reservation-list-ota-search"]],viewQuery:function(e,t){var i;1&e&&$e.Xc(Ee.a,!0),2&e&&$e.Dc(i=$e.gc())&&(t.autoCopmpletes=i)},inputs:{stationTypeList:"stationTypeList",deviceTypeList:"deviceTypeList",bookingStatusList:"bookingStatusList",contractTypeList:"contractTypeList",paymentList:"paymentList",clientPaymentStatusCodeList:"clientPaymentStatusCodeList",otherSearchInfo:"otherSearchInfo",dateRangeTypeList:"dateRangeTypeList",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent"},decls:136,vars:90,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],["formGroupName","dateRange1",1,"col-2","flex-shrink1"],["formControlName","rangeType","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-shrink-0",3,"options","useAllOptionYn","onChange"],["formArrayName","dates",1,"calendar-set","flex-fill"],[1,"input","calendar","d-inline-flex","flex-fill"],[3,"for"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","formControlName"],["fromDate1",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","min","formControlName"],["toDate1",""],[1,"col-1"],[1,"form-label"],["formControlName","stationTypeCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","bookingStatusCodes","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options","useAllOptionYn"],["formControlName","bookingItemCode",1,"d-inline-flex","flex-fill"],["formGroupName","dateRange2",1,"col-2","flex-shrink1"],["fromDate2",""],["toDate2",""],["apiUrl","admin/common/country","formControlName","destinationCountryCode","dataKey","countryCode","inputFieldFormat","[{0}] {1}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiSearchTerm","inputFieldFormatKeyList","change"],["formControlName","hotelCode","valueType","number",1,"d-inline-flex","flex-fill"],["formControlName","hotelName","placeholder","Name",1,"d-inline-flex","flex-fill"],["formControlName","bookerCompCode","apiUrl","common/comp","dataKey","compCode","inputFieldFormat","{0} - {1}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","sellerBookingCode","placeholder","Seller Booking Code",1,"d-inline-flex","flex-fill"],["formControlName","clientPaymentStatusCode","displayWord","detailCodeName","dataKey","detailCode",1,"d-inline-flex","flex-fill",3,"options"],["displayWord","detailCodeName","dataKey","detailCode","formControlName","vendorPaymentStatusCode",1,"d-inline-flex","flex-fill",3,"options"],[1,"d-inline-flex","flex-fill"],["apiUrl","common/comp","formControlName","vendorCompCodes","dataKey","compCode","inputFieldFormat","[{0}] {1}","placeholder","Name",2,"width","60%",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","groupYn","label","Grouping Y",1,"flex-glow-0","ml5",3,"binary"],["formControlName","vendorBookingItemCode","placeholder","Hotel Confirm No",1,"d-inline-flex","flex-fill"],["apiUrl","common/comp","formControlName","bookingCmsPmsCompCode","dataKey","compCode","inputFieldFormat","{0} - {1}","placeholder","Name",1,"flex-fill",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","vendorBookingCode","placeholder","Vendor Booking Code",1,"d-inline-flex","flex-fill"],["formControlName","hotelContractTypeCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","deviceTypeCode","dataKey","detailCode","displayWord","detailCodeName",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","onOffManual",1,"d-inline-flex","flex-fill",3,"options"],["displayKey","value","formControlName","domainAddresses",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","mutualContractBookingYn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","bookingPicUno","apiUrl","admin/common/staff","dataKey","userNo","inputFieldFormat","{0}-{1}&,{2}&,{3}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","selectedBookerDropdown","displayKey","label",1,"d-inline-flex","flex-shrink-0","mr5",3,"options","useAllOptionYn"],[3,"ngSwitch"],["formControlName","bookerId","class","d-inline-flex flex-fill",4,"ngSwitchCase"],["formControlName","travelerName","class","d-inline-flex flex-fill",4,"ngSwitchCase"],["formControlName","bookerMobileNo","class","d-inline-flex flex-fill",4,"ngSwitchCase"],["formControlName","bookerName","class","d-inline-flex flex-fill",4,"ngSwitchDefault"],["formControlName","directYn","binary","true","label","Direct Only"],[1,"form-button-area"],["type","submit","data-function","2000032","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"],[1,"btn-searchbox-extend",3,"click"],["formControlName","bookerId",1,"d-inline-flex","flex-fill"],["formControlName","travelerName",1,"d-inline-flex","flex-fill"],["formControlName","bookerMobileNo",1,"d-inline-flex","flex-fill"],["formControlName","bookerName",1,"d-inline-flex","flex-fill"]],template:function(e,t){if(1&e&&($e.Wb(0,"form",0),$e.fc("ngSubmit",(function(){return t.onSubmit()})),$e.Wb(1,"div",1),$e.Wb(2,"div",2),$e.Wb(3,"div",3),$e.Wb(4,"app-selectbox-detailcode",4),$e.fc("onChange",(function(e){return t.onChangerangeType1(e)})),$e.Vb(),$e.Wb(5,"div",5),$e.Wb(6,"div",6),$e.Rb(7,"mat-datepicker-toggle",7),$e.Rb(8,"input",8),$e.Rb(9,"mat-datepicker",null,9),$e.Vb(),$e.Wb(11,"span",10),$e.Pc(12,"~"),$e.Vb(),$e.Wb(13,"div",6),$e.Rb(14,"mat-datepicker-toggle",7),$e.Rb(15,"input",11),$e.Rb(16,"mat-datepicker",null,12),$e.Vb(),$e.Vb(),$e.Vb(),$e.Wb(18,"div",13),$e.Wb(19,"span",14),$e.Pc(20,"Station"),$e.Vb(),$e.Rb(21,"app-selectbox-detailcode",15),$e.Vb(),$e.Wb(22,"div",13),$e.Wb(23,"span",14),$e.Pc(24,"BKG Status"),$e.Vb(),$e.Rb(25,"app-multi-select-detailcode",16),$e.Vb(),$e.Wb(26,"div",13),$e.Wb(27,"span",14),$e.Pc(28,"BKG Item Code"),$e.Vb(),$e.Rb(29,"app-input-text",17),$e.Vb(),$e.Vb(),$e.Wb(30,"div",2),$e.Wb(31,"div",18),$e.Wb(32,"app-selectbox-detailcode",4),$e.fc("onChange",(function(e){return t.onChangerangeType2(e)})),$e.Vb(),$e.Wb(33,"div",5),$e.Wb(34,"div",6),$e.Rb(35,"mat-datepicker-toggle",7),$e.Rb(36,"input",8),$e.Rb(37,"mat-datepicker",null,19),$e.Vb(),$e.Wb(39,"span",10),$e.Pc(40,"~"),$e.Vb(),$e.Wb(41,"div",6),$e.Rb(42,"mat-datepicker-toggle",7),$e.Rb(43,"input",11),$e.Rb(44,"mat-datepicker",null,20),$e.Vb(),$e.Vb(),$e.Vb(),$e.Wb(46,"div",13),$e.Wb(47,"span",14),$e.Pc(48,"Country"),$e.Vb(),$e.Wb(49,"app-auto-complete",21),$e.fc("change",(function(e){return t.changeCountryCode(e)})),$e.Vb(),$e.Vb(),$e.Wb(50,"div",13),$e.Wb(51,"span",14),$e.Pc(52,"Hotel Code"),$e.Vb(),$e.Rb(53,"app-input-text",22),$e.Vb(),$e.Wb(54,"div",13),$e.Wb(55,"span",14),$e.Pc(56,"Hotel Name"),$e.Vb(),$e.Rb(57,"app-input-text",23),$e.Vb(),$e.Vb(),$e.Wb(58,"div",2),$e.Wb(59,"div",13),$e.Wb(60,"span",14),$e.Pc(61,"Seller"),$e.Vb(),$e.Rb(62,"app-auto-complete",24),$e.Vb(),$e.Wb(63,"div",13),$e.Wb(64,"span",14),$e.Pc(65,"S.BKG Code"),$e.Vb(),$e.Rb(66,"app-input-text",25),$e.Vb(),$e.Wb(67,"div",13),$e.Wb(68,"span",14),$e.Pc(69,"C. Payment Status"),$e.Vb(),$e.Rb(70,"app-selectbox-detailcode",26),$e.Vb(),$e.Wb(71,"div",13),$e.Wb(72,"span",14),$e.Pc(73,"V. Payment Status"),$e.Vb(),$e.Rb(74,"app-selectbox-detailcode",27),$e.Vb(),$e.Vb(),$e.Wb(75,"div",2),$e.Wb(76,"div",13),$e.Wb(77,"span",14),$e.Pc(78,"Vendor"),$e.Vb(),$e.Wb(79,"div",28),$e.Rb(80,"app-auto-complete",29),$e.Rb(81,"app-checkbox",30),$e.Vb(),$e.Vb(),$e.Wb(82,"div",13),$e.Wb(83,"span",14),$e.Pc(84,"CNFM No."),$e.Vb(),$e.Rb(85,"app-input-text",31),$e.Vb(),$e.Wb(86,"div",13),$e.Wb(87,"span",14),$e.Pc(88,"CMS/PMS"),$e.Vb(),$e.Rb(89,"app-auto-complete",32),$e.Vb(),$e.Wb(90,"div",13),$e.Wb(91,"span",14),$e.Pc(92,"V. BKG Code"),$e.Vb(),$e.Rb(93,"app-input-text",33),$e.Vb(),$e.Vb(),$e.Wb(94,"div",2),$e.Wb(95,"div",13),$e.Wb(96,"span",14),$e.Pc(97,"Contract"),$e.Vb(),$e.Rb(98,"app-selectbox-detailcode",34),$e.Vb(),$e.Wb(99,"div",13),$e.Wb(100,"span",14),$e.Pc(101,"Device"),$e.Vb(),$e.Rb(102,"app-selectbox-detailcode",35),$e.Vb(),$e.Wb(103,"div",13),$e.Wb(104,"span",14),$e.Pc(105,"On/Off"),$e.Vb(),$e.Rb(106,"app-selectbox",36),$e.Vb(),$e.Wb(107,"div",13),$e.Wb(108,"span",14),$e.Pc(109,"Domain"),$e.Vb(),$e.Rb(110,"app-multi-select",37),$e.Vb(),$e.Vb(),$e.Wb(111,"div",2),$e.Wb(112,"div",13),$e.Wb(113,"span",14),$e.Pc(114,"Mutual YN"),$e.Vb(),$e.Rb(115,"app-selectbox",38),$e.Vb(),$e.Wb(116,"div",13),$e.Wb(117,"span",14),$e.Pc(118,"BKG PIC"),$e.Vb(),$e.Rb(119,"app-auto-complete",39),$e.Vb(),$e.Wb(120,"div",13),$e.Rb(121,"app-selectbox",40),$e.Ub(122,41),$e.Nc(123,dt,1,0,"app-input-text",42),$e.Nc(124,ut,1,0,"app-input-text",43),$e.Nc(125,pt,1,0,"app-input-text",44),$e.Nc(126,bt,1,0,"app-input-text",45),$e.Tb(),$e.Vb(),$e.Wb(127,"div",13),$e.Rb(128,"app-checkbox",46),$e.Vb(),$e.Vb(),$e.Vb(),$e.Wb(129,"div",47),$e.Wb(130,"button",48),$e.Pc(131,"Search"),$e.Vb(),$e.Wb(132,"button",49),$e.fc("click",(function(){return t.onReset()})),$e.Pc(133,"Reset"),$e.Vb(),$e.Wb(134,"a",50),$e.fc("click",(function(){return t.isShowmore=!t.isShowmore})),$e.Pc(135,"\uac80\uc0c9 \uc635\uc158 \ub354\ubcf4\uae30"),$e.Vb(),$e.Vb(),$e.Vb()),2&e){const e=$e.Ec(10),i=$e.Ec(17),o=$e.Ec(38),n=$e.Ec(45);$e.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),$e.Cb(4),$e.pc("options",t.dateRangeTypeList)("useAllOptionYn",!1),$e.Cb(1),$e.Gb("valid-error",t.checkIsInvalidDateRange(t.searchForm.get("dateRange1"))),$e.Cb(2),$e.pc("for",e),$e.Cb(1),$e.pc("matDatepicker",e)("formControlName",0),$e.Cb(6),$e.pc("for",i),$e.Cb(1),$e.pc("matDatepicker",i)("min",t.dateRange1Dates[0])("formControlName",1),$e.Cb(6),$e.pc("options",t.stationTypeList),$e.Cb(4),$e.pc("options",t.bookingStatusList)("useAllOptionYn",!0),$e.Cb(7),$e.pc("options",t.dateRangeTypeList2)("useAllOptionYn",!1),$e.Cb(1),$e.Gb("valid-error",t.checkIsInvalidDateRange(t.searchForm.get("dateRange2"))),$e.Cb(2),$e.pc("for",o),$e.Cb(1),$e.pc("matDatepicker",o)("formControlName",0),$e.Cb(6),$e.pc("for",n),$e.Cb(1),$e.pc("matDatepicker",n)("min",t.dateRange2Dates[0])("formControlName",1),$e.Cb(6),$e.pc("inputFieldValue",t.countryInputFieldValue)("inputId","countryInput")("apiSearchTerm","keyword")("inputFieldFormatKeyList",$e.tc(75,mt)),$e.Cb(9),$e.Gb("hide",!t.isShowmore),$e.Cb(4),$e.pc("inputFieldValue",t.bookerCompCodeInputFieldValue)("inputId","sellerCompInput")("apiCondition",$e.uc(77,gt,$e.tc(76,ht)))("apiSearchTerm","compName")("inputFieldFormatKeyList",$e.tc(79,Ct)),$e.Cb(8),$e.pc("options",t.clientPaymentStatusCodeList),$e.Cb(4),$e.pc("options",t.paymentList),$e.Cb(1),$e.Gb("hide",!t.isShowmore),$e.Cb(5),$e.pc("inputFieldValue",t.vendorCompCodesInputFieldValue)("inputId","vendorCompInput")("apiCondition",$e.uc(81,gt,$e.tc(80,ft)))("apiSearchTerm","compName")("inputFieldFormatKeyList",$e.tc(83,vt)),$e.Cb(1),$e.pc("binary",!0),$e.Cb(8),$e.pc("inputFieldValue",t.bookingCmsPmsCompCodeInputFieldValue)("inputId","cmsPmsCompInput")("apiCondition",$e.uc(85,gt,$e.tc(84,yt)))("apiSearchTerm","compName")("inputFieldFormatKeyList",$e.tc(87,Ct)),$e.Cb(5),$e.Gb("hide",!t.isShowmore),$e.Cb(4),$e.pc("options",t.contractTypeList),$e.Cb(4),$e.pc("options",t.deviceTypeList),$e.Cb(4),$e.pc("options",t.onOffList),$e.Cb(4),$e.pc("options",t.domainTypeList),$e.Cb(1),$e.Gb("hide",!t.isShowmore),$e.Cb(4),$e.pc("options",t.useYnOptions),$e.Cb(4),$e.pc("inputFieldValue",t.bookingPicUnoInputFieldValue)("inputId","picUnoInput")("apiCondition",$e.tc(88,kt))("apiSearchTerm","name")("inputFieldFormatKeyList",$e.tc(89,St)),$e.Cb(2),$e.pc("options",t.bookerDropdownOptions)("useAllOptionYn",!1),$e.Cb(1),$e.pc("ngSwitch",t.searchForm.get("selectedBookerDropdown").value),$e.Cb(1),$e.pc("ngSwitchCase","bookerId"),$e.Cb(1),$e.pc("ngSwitchCase","travelerName"),$e.Cb(1),$e.pc("ngSwitchCase","bookerMobileNo"),$e.Cb(9),$e.Gb("active",t.isShowmore)}},directives:[a.B,a.s,a.k,et.a,a.l,tt.a,a.r,a.i,a.e,it.a,ot.a,a.c,nt.a,at.a,st.a,Ee.a,ct.a,lt.a,rt.a,n.q,n.r,n.s],styles:[""],changeDetection:0}),e})(),jt=(()=>{class e{constructor(e){this.router=e,this.changePageSizeEvent=new $e.n,this.excelDownloadEvent=new $e.n,this.exportBookingListEvent=new $e.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onChangePageSize({value:e}){this.changePageSizeEvent.emit(e)}onClickExcel(){this.excelDownloadEvent.emit()}onBookingListExport(){this.exportBookingListEvent.emit()}onRedirectToPageDataDownload(){this.router.navigate(["/hotel/file-download"])}}return e.\u0275fac=function(t){return new(t||e)($e.Qb(O.c))},e.\u0275cmp=$e.Kb({type:e,selectors:[["app-ho-reservation-list-ota-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{changePageSizeEvent:"changePageSizeEvent",excelDownloadEvent:"excelDownloadEvent",exportBookingListEvent:"exportBookingListEvent"},decls:9,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm","d-inline-flex","flex-glow-0",3,"click"],[1,"sm","d-inline-flex","flex-glow-0","sm",3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&($e.Wb(0,"div",0),$e.Wb(1,"strong",1),$e.Pc(2),$e.Vb(),$e.Wb(3,"div",2),$e.Wb(4,"button",3),$e.fc("click",(function(){return t.onClickExcel()})),$e.Pc(5,"Booking List"),$e.Vb(),$e.Wb(6,"button",3),$e.fc("click",(function(){return t.onRedirectToPageDataDownload()})),$e.Pc(7,"Data Download"),$e.Vb(),$e.Wb(8,"app-selectbox",4),$e.fc("onChange",(function(e){return t.onChangePageSize(e)})),$e.Vb(),$e.Vb(),$e.Vb()),2&e&&($e.Cb(2),$e.Qc(t.loading?"":t.totalCount),$e.Cb(6),$e.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[lt.a,a.r,a.u],styles:[""],changeDetection:0}),e})();var Lt=i("2QGa");function Rt(e,t){if(1&e){const e=$e.Xb();$e.Wb(0,"a",27),$e.fc("click",(function(){$e.Fc(e);const i=t.$implicit;return $e.hc().onClickBookingItemCode(i)})),$e.Pc(1),$e.Vb()}if(2&e){const e=t.$implicit;$e.Cb(1),$e.Qc(e.bookingItemCode)}}function Pt(e,t){if(1&e&&$e.Pc(0),2&e){const e=t.$implicit;$e.Rc(" ",e.hotelNameEn||e.hotelNameLn," ")}}function Tt(e,t){if(1&e&&$e.Pc(0),2&e){const e=t.$implicit;$e.Sc(" ",e.checkInDate,"[",e.nightCount,"] ")}}function Nt(e,t){if(1&e&&$e.Pc(0),2&e){const e=t.$implicit;$e.Sc(" ",e.roomTypeNameEn,"[",e.roomCount,"] ")}}function It(e,t){1&e&&($e.Pc(0),$e.ic(1,"number")),2&e&&$e.Rc(" ",$e.jc(1,1,t.$implicit.billingSumAmount)," ")}function Vt(e,t){1&e&&($e.Pc(0),$e.ic(1,"number")),2&e&&$e.Rc(" ",$e.jc(1,1,t.$implicit.billingBalanceAmount)," ")}function wt(e,t){1&e&&($e.Ub(0),$e.Pc(1," Y "),$e.Tb())}function Wt(e,t){1&e&&($e.Ub(0),$e.Pc(1," N "),$e.Tb())}function At(e,t){if(1&e&&($e.Nc(0,wt,2,0,"ng-container",28),$e.Nc(1,Wt,2,0,"ng-container",28)),2&e){const e=t.$implicit;$e.pc("ngIf",e.mutualContractBookingYn),$e.Cb(1),$e.pc("ngIf",!e.mutualContractBookingYn)}}const xt=function(){return{allowUnsort:!0,mode:"multiple"}};let Dt=(()=>{class e{constructor(){this.pageChangeEvent=new $e.n,this.sortChangeEvent=new $e.n,this.checkRowEvent=new $e.n,this.clickRowEvent=new $e.n,this.checkAllEvent=new $e.n,this.clickedRowSubject=new j.a,this.unsubscribe$=new j.a,this.getIsRowSelected=e=>{var t;return(null===(t=this.checkedRows)||void 0===t?void 0:t.indexOf(e.dataItem.rowid))>-1||e.index===this._singleClickedRowIndex}}get checkedState(){return this._checkedState}set checkedState(e){this._checkedState=e,this._setCheckedState()}get checkedRows(){return this._checkedRows}set checkedRows(e){this._checkedRows=e.length>0?e:null}get gridView(){return{data:this.dataList||[],total:this.totalCount||0}}get currentPageSize(){var e;return null===(e=this.pageInfo)||void 0===e?void 0:e.take}get isAllChecked(){return this.checkedRows&&this.checkedRows.length===this.dataList.length}get checkedStateOutput(){return I.isNil(this._singleClickedRowIndex)?null:{clickedRowIndex:I.isNil(this._singleClickedRowIndex)?null:this._singleClickedRowIndex}}get thisGridState(){return{pageInfo:this.pageInfo,sortInfo:this.sortInfo}}ngOnInit(){this._initClickSubscription()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onPageChange(e){this.pageChangeEvent.emit(e)}onSortChange(e){setTimeout(()=>{this.sortChangeEvent.emit(e),this.pageChangeEvent.emit({skip:0,take:this.pageInfo.take})},0)}onCheckAll(e){if(!e)return void this.checkAllEvent.emit({isChecked:e});if(this.dataList.length<1)return;const t=this.dataList.map(e=>e&&e.rowid);this.checkAllEvent.emit({isChecked:e,rowids:t})}onCheckRow(e,t){this.checkRowEvent.emit({rowid:t.rowid,isChecked:e})}onDblClick(e){this.clickedRowItem&&(this.isDbClick=!0,this.clickedRowSubject.next("double"))}displayRequests(e){return null==e?void 0:e.map(e=>{const{requestTypeCode:t,requestValue:i,requestTypeName:o}=e;return"BRQ99"===t?i:o}).join(", ")}onClickBookingItemCode(e){this.clickedRowItem=e,this.clickedRowSubject.next("single")}onCellClick(e){var t,i,o;0===e.columnIndex&&(null===(o=null===(i=null===(t=null==e?void 0:e.originalEvent)||void 0===t?void 0:t.target)||void 0===i?void 0:i.className)||void 0===o?void 0:o.indexOf("checkbox-control-text"))>-1||(this._singleClickedRowIndex=null==e?void 0:e.rowIndex)}_setCheckedState(){if(this._singleClickedRowIndex=null,!I.isEmpty(this.checkedState)){const{clickedRowIndex:e}=this.checkedState;this._singleClickedRowIndex=I.isNil(e)?null:e}}_initClickSubscription(){const e=this.clickedRowSubject.pipe(Object(P.a)(500),Object(N.a)(this.unsubscribe$)),[t,i]=Object(Lt.a)(e,e=>"single"===e);t.subscribe(()=>{this.clickRowEvent.emit(I.cloneDeep(this.clickedRowItem)),this.clickedRowItem=void 0}),i.subscribe(()=>{})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e.Kb({type:e,selectors:[["app-ho-reservation-list-ota-grid"]],viewQuery:function(e,t){var i;1&e&&$e.Xc(l.l,!0),2&e&&$e.Dc(i=$e.gc())&&(t.grid=i.first)},inputs:{loading:"loading",totalCount:"totalCount",checkedState:"checkedState",dataList:"dataList",pageInfo:"pageInfo",sortInfo:"sortInfo",checkedRows:"checkedRows"},outputs:{pageChangeEvent:"pageChangeEvent",sortChangeEvent:"sortChangeEvent",checkRowEvent:"checkRowEvent",clickRowEvent:"clickRowEvent",checkAllEvent:"checkAllEvent"},decls:33,vars:37,consts:[[1,"grid-max-height-650",3,"loading","data","resizable","reorderable","pageable","skip","pageSize","sortable","sort","selectable","rowSelected","pageChange","sortChange","cellClick"],["field","firstInsertDatetime","title","Booking Date",3,"width"],["field","stationTypeName","title","Station",3,"width"],["field","bookingItemCode","title","Booking Item Code",3,"width"],["kendoGridCellTemplate",""],["field","bookingStatusName","title","Booking Status",3,"width"],["field","hotelNameEn","title","Hotel Name","format","{0:n}",3,"width"],["field","clientCancelDeadline","title","Client Cancel D/L",3,"width"],["field","checkInDate","title","C/ In Date & Nts",3,"width"],["field","roomCount","title","Room Type & Count",3,"width"],["field","travelerName","title","1st Traveler Name",3,"width"],["field","billingSumAmount","title","Billing Sum Amt",3,"width"],["field","billingBalanceAmount","title","Billing Balance",3,"width"],["field","cancelDatetime","title","BKG Cancel Date",3,"width"],["field","bookerCompName","title","Seller Name",3,"width"],["field","sellerBookingCode","title","Seller BKG Code",3,"width"],["field","vendorCompName","title","Vendor Name",3,"width"],["field","vendorBookingCode","title","Vendor BKG Code",3,"width"],["field","vendorBookingItemCode","title","Vendor CNFM No.",3,"width"],["field","vendorPaymentStatusName","title","V.Payment Status",3,"width"],["field","hotelContractTypeName","title","Contract Type",3,"width"],["field","bookingCmsPmsCompName","title","CMS/PMS Name",3,"width"],["field","sendCmsPmsCompName","title","Notify CMS/PMS",3,"width"],["field","mutualContractBookingYn","title","Mutual YN",3,"width"],["field","domainAddress","title","B2C BKG Domain",3,"width"],["field","cancelConfirmUno","title","Cancel Confirm User",3,"width"],["field","cancelConfirmNo","title","Cancel Cofirm No.",3,"width"],[1,"text-underline",3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&($e.Wb(0,"kendo-grid",0),$e.fc("pageChange",(function(e){return t.onPageChange(e)}))("sortChange",(function(e){return t.onSortChange(e)}))("cellClick",(function(e){return t.onCellClick(e)})),$e.Rb(1,"kendo-grid-column",1),$e.Rb(2,"kendo-grid-column",2),$e.Wb(3,"kendo-grid-column",3),$e.Nc(4,Rt,2,1,"ng-template",4),$e.Vb(),$e.Rb(5,"kendo-grid-column",5),$e.Wb(6,"kendo-grid-column",6),$e.Nc(7,Pt,1,1,"ng-template",4),$e.Vb(),$e.Rb(8,"kendo-grid-column",7),$e.Wb(9,"kendo-grid-column",8),$e.Nc(10,Tt,1,2,"ng-template",4),$e.Vb(),$e.Wb(11,"kendo-grid-column",9),$e.Nc(12,Nt,1,2,"ng-template",4),$e.Vb(),$e.Rb(13,"kendo-grid-column",10),$e.Wb(14,"kendo-grid-column",11),$e.Nc(15,It,2,3,"ng-template",4),$e.Vb(),$e.Wb(16,"kendo-grid-column",12),$e.Nc(17,Vt,2,3,"ng-template",4),$e.Vb(),$e.Rb(18,"kendo-grid-column",13),$e.Rb(19,"kendo-grid-column",14),$e.Rb(20,"kendo-grid-column",15),$e.Rb(21,"kendo-grid-column",16),$e.Rb(22,"kendo-grid-column",17),$e.Rb(23,"kendo-grid-column",18),$e.Rb(24,"kendo-grid-column",19),$e.Rb(25,"kendo-grid-column",20),$e.Rb(26,"kendo-grid-column",21),$e.Rb(27,"kendo-grid-column",22),$e.Wb(28,"kendo-grid-column",23),$e.Nc(29,At,2,2,"ng-template",4),$e.Vb(),$e.Rb(30,"kendo-grid-column",24),$e.Rb(31,"kendo-grid-column",25),$e.Rb(32,"kendo-grid-column",26),$e.Vb()),2&e&&($e.pc("loading",t.loading)("data",t.gridView)("resizable",!0)("reorderable",!0)("pageable",!0)("skip",t.pageInfo.skip)("pageSize",t.pageInfo.take)("sortable",$e.tc(36,xt))("sort",t.sortInfo)("selectable",!0)("rowSelected",t.getIsRowSelected),$e.Cb(1),$e.pc("width",100),$e.Cb(1),$e.pc("width",70),$e.Cb(1),$e.pc("width",140),$e.Cb(2),$e.pc("width",120),$e.Cb(1),$e.pc("width",90),$e.Cb(2),$e.pc("width",120),$e.Cb(1),$e.pc("width",120),$e.Cb(2),$e.pc("width",140),$e.Cb(2),$e.pc("width",130),$e.Cb(1),$e.pc("width",120),$e.Cb(2),$e.pc("width",120),$e.Cb(2),$e.pc("width",120),$e.Cb(1),$e.pc("width",100),$e.Cb(1),$e.pc("width",120),$e.Cb(1),$e.pc("width",100),$e.Cb(1),$e.pc("width",130),$e.Cb(1),$e.pc("width",130),$e.Cb(1),$e.pc("width",120),$e.Cb(1),$e.pc("width",120),$e.Cb(1),$e.pc("width",120),$e.Cb(1),$e.pc("width",120),$e.Cb(1),$e.pc("width",80),$e.Cb(2),$e.pc("width",130),$e.Cb(1),$e.pc("width",140),$e.Cb(1),$e.pc("width",140))},directives:[l.l,l.d,l.c,n.o],pipes:[n.f],styles:[""],changeDetection:0}),e})(),_t=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$e.Kb({type:e,selectors:[["app-ho-reservation-list-ota-summary"]],inputs:{summary:"summary",totalCount:"totalCount"},decls:80,vars:36,consts:[[1,"table","table-bordered","mt30"],["width","8%"],["scope","row",1,"th-bg"]],template:function(e,t){1&e&&($e.Wb(0,"div",0),$e.Wb(1,"table"),$e.Wb(2,"caption"),$e.Pc(3," \ud638\ud154 OTA \ud1b5\ud569\uc608\uc57d\uc870\ud68c summary "),$e.Vb(),$e.Wb(4,"colgroup"),$e.Rb(5,"col",1),$e.Rb(6,"col",1),$e.Rb(7,"col",1),$e.Rb(8,"col",1),$e.Rb(9,"col",1),$e.Rb(10,"col",1),$e.Rb(11,"col",1),$e.Rb(12,"col",1),$e.Rb(13,"col",1),$e.Rb(14,"col",1),$e.Rb(15,"col",1),$e.Rb(16,"col",1),$e.Vb(),$e.Wb(17,"tbody"),$e.Wb(18,"tr"),$e.Wb(19,"th",2),$e.Pc(20,"\ucd1d \uac74\uc218"),$e.Vb(),$e.Wb(21,"td"),$e.Pc(22),$e.ic(23,"number"),$e.Vb(),$e.Wb(24,"th",2),$e.Pc(25,"\ucd1d\uc0c1\ud488\uac00"),$e.Vb(),$e.Wb(26,"td"),$e.Pc(27),$e.ic(28,"number"),$e.Vb(),$e.Wb(29,"th",2),$e.Pc(30,"\ucd1d \uacf5\uae09\uac00"),$e.Vb(),$e.Wb(31,"td"),$e.Pc(32),$e.ic(33,"number"),$e.Vb(),$e.Wb(34,"th",2),$e.Pc(35,"\uacb0\uc81c\uae08\uc561"),$e.Vb(),$e.Wb(36,"td"),$e.Pc(37),$e.ic(38,"number"),$e.Vb(),$e.Wb(39,"th",2),$e.Pc(40,"\ucd1d \uc778\uc6d0"),$e.Vb(),$e.Wb(41,"td"),$e.Pc(42),$e.ic(43,"number"),$e.Vb(),$e.Wb(44,"th",2),$e.Pc(45,"\ub8f8\ub098\uc787"),$e.Vb(),$e.Wb(46,"td"),$e.Pc(47),$e.ic(48,"number"),$e.Vb(),$e.Vb(),$e.Wb(49,"tr"),$e.Wb(50,"th",2),$e.Pc(51,"\ud504\ub85c\ubaa8\uc158"),$e.Vb(),$e.Wb(52,"td"),$e.Pc(53),$e.ic(54,"number"),$e.Vb(),$e.Wb(55,"th",2),$e.Pc(56,"\ucfe0\ud3f0\ud560\uc778"),$e.Vb(),$e.Wb(57,"td"),$e.Pc(58),$e.ic(59,"number"),$e.Vb(),$e.Wb(60,"th",2),$e.Pc(61,"\ud310\ub9e4\uac00"),$e.Vb(),$e.Wb(62,"td"),$e.Pc(63),$e.ic(64,"number"),$e.Vb(),$e.Wb(65,"th",2),$e.Pc(66,"\uc218\uc775"),$e.Vb(),$e.Wb(67,"td"),$e.Pc(68),$e.ic(69,"number"),$e.Vb(),$e.Wb(70,"th",2),$e.Pc(71,"\ucee4\ubbf8\uc158(\uc81c)\uae08\uc561"),$e.Vb(),$e.Wb(72,"td"),$e.Pc(73),$e.ic(74,"number"),$e.Vb(),$e.Wb(75,"th",2),$e.Pc(76,"\uc2e4\uc218\uc775"),$e.Vb(),$e.Wb(77,"td"),$e.Pc(78),$e.ic(79,"number"),$e.Vb(),$e.Vb(),$e.Vb(),$e.Vb(),$e.Vb()),2&e&&($e.Cb(22),$e.Qc($e.jc(23,12,t.totalCount)),$e.Cb(5),$e.Qc($e.jc(28,14,null==t.summary?null:t.summary.salesAmount)),$e.Cb(5),$e.Qc($e.jc(33,16,null==t.summary?null:t.summary.sumNetAmount)),$e.Cb(5),$e.Qc($e.jc(38,18,null==t.summary?null:t.summary.paidAmount)),$e.Cb(5),$e.Qc($e.jc(43,20,null==t.summary?null:t.summary.travelerCount)),$e.Cb(5),$e.Qc($e.jc(48,22,null==t.summary?null:t.summary.roomNightCount)),$e.Cb(6),$e.Qc($e.jc(54,24,null==t.summary?null:t.summary.discountAmount)),$e.Cb(5),$e.Qc($e.jc(59,26,null==t.summary?null:t.summary.couponAmount)),$e.Cb(5),$e.Qc($e.jc(64,28,null==t.summary?null:t.summary.sumAmount)),$e.Cb(5),$e.Qc($e.jc(69,30,null==t.summary?null:t.summary.revenueNetAmount)),$e.Cb(5),$e.Qc($e.jc(74,32,null==t.summary?null:t.summary.affiliateCommAmount)),$e.Cb(5),$e.Qc($e.jc(79,34,null==t.summary?null:t.summary.revenueAmount)))},pipes:[n.f],encapsulation:2,changeDetection:0}),e})();var Ft=i("7G9D"),$t=i("bMKz"),Et=i("xfNr"),Bt=i("UIHd");function Mt(e,t){if(1&e){const e=$e.Xb();$e.Wb(0,"div",11),$e.Pc(1),$e.ic(2,"date"),$e.Vb(),$e.Wb(3,"div",12),$e.Wb(4,"a",13),$e.fc("click",(function(){$e.Fc(e);const i=t.$implicit;return $e.hc().onClickBookingItemCode(i)})),$e.Pc(5),$e.Vb(),$e.Vb()}if(2&e){const e=t.$implicit;$e.Cb(1),$e.Rc(" ",$e.kc(2,2,e.firstInsertDatetime,"yyyy-MM-dd HH:mm")," "),$e.Cb(4),$e.Qc(e.bookingItemCode)}}function Ht(e,t){if(1&e&&($e.Wb(0,"div",14),$e.Wb(1,"span",15),$e.Pc(2),$e.Vb(),$e.Wb(3,"span",16),$e.Pc(4),$e.Vb(),$e.Vb(),$e.Wb(5,"div",12),$e.Wb(6,"span",11),$e.Pc(7),$e.Vb(),$e.Vb()),2&e){const e=t.$implicit;$e.Cb(2),$e.Qc(e.stationTypeName),$e.Cb(2),$e.Qc(e.bookerCompName),$e.Cb(3),$e.Qc(e.sellerBookingCode)}}function Yt(e,t){if(1&e&&($e.Wb(0,"span",11),$e.Pc(1),$e.Vb()),2&e){const e=$e.hc().$implicit;$e.Cb(1),$e.Rc(" ",e.hotelContractTypeName," ")}}function Kt(e,t){if(1&e&&($e.Ub(0,11),$e.Wb(1,"span",18),$e.Wb(2,"span",19),$e.Pc(3,"B"),$e.Vb(),$e.Pc(4),$e.Vb(),$e.Tb()),2&e){const e=$e.hc().$implicit;$e.Cb(4),$e.Rc("",e.bookingCmsPmsCompName," ")}}function zt(e,t){if(1&e&&($e.Ub(0,11),$e.Wb(1,"span",18),$e.Wb(2,"span",19),$e.Pc(3,"N"),$e.Vb(),$e.Pc(4),$e.Vb(),$e.Tb()),2&e){const e=$e.hc().$implicit;$e.Cb(4),$e.Rc("",e.sendCmsPmsCompName," ")}}function Ut(e,t){if(1&e&&($e.Wb(0,"div",14),$e.Wb(1,"span",15),$e.Pc(2),$e.Vb(),$e.Wb(3,"span",16),$e.Pc(4),$e.Vb(),$e.Vb(),$e.Wb(5,"div",12),$e.Nc(6,Yt,2,1,"span",17),$e.Nc(7,Kt,5,1,"ng-container",17),$e.Nc(8,zt,5,1,"ng-container",17),$e.Vb()),2&e){const e=t.$implicit;$e.Cb(2),$e.Rc(" ",e.hotelCode," "),$e.Cb(2),$e.Rc(" ",e.hotelNameEn," "),$e.Cb(2),$e.pc("ngIf",e.hotelContractTypeName),$e.Cb(1),$e.pc("ngIf",e.bookingCmsPmsCompName),$e.Cb(1),$e.pc("ngIf",e.sendCmsPmsCompName)}}function Gt(e,t){if(1&e&&($e.Wb(0,"div"),$e.Wb(1,"span",11),$e.Pc(2),$e.ic(3,"date"),$e.Vb(),$e.Vb(),$e.Wb(4,"div",12),$e.Wb(5,"span",20),$e.Pc(6),$e.Vb(),$e.Vb()),2&e){const e=t.$implicit;$e.Cb(2),$e.Sc(" ",$e.kc(3,4,e.checkInDate,"yyyy-MM-dd")," / ",e.nightCount,"N "),$e.Cb(4),$e.Sc(" ",e.roomTypeNameEn," X ",e.roomCount," ")}}function Qt(e,t){if(1&e&&($e.Wb(0,"span"),$e.Pc(1),$e.Vb()),2&e){const e=$e.hc(2).$implicit;$e.Cb(1),$e.Rc(" / ",e.vendorBookingItemCode,"")}}function qt(e,t){if(1&e&&($e.Wb(0,"span"),$e.Nc(1,Qt,2,1,"span",22),$e.Vb()),2&e){const e=$e.hc().$implicit;$e.Cb(1),$e.pc("ngIf",e.directYn)}}function Xt(e,t){if(1&e&&($e.Wb(0,"span",11),$e.Pc(1),$e.ic(2,"date"),$e.Vb()),2&e){const e=$e.hc().$implicit;$e.Cb(1),$e.Rc(" TL ",$e.kc(2,1,e.clientCancelDeadline,"yyyy-MM-dd HH:mm")," ")}}function Jt(e,t){if(1&e&&($e.Wb(0,"div"),$e.Wb(1,"span",21),$e.Pc(2),$e.Vb(),$e.Nc(3,qt,2,1,"span",22),$e.Vb(),$e.Wb(4,"div",12),$e.Nc(5,Xt,3,4,"span",17),$e.Vb()),2&e){const e=t.$implicit;$e.Cb(1),$e.Gb("color-red","BKS03"===e.bookingStatusCode||"BKS06"===e.bookingStatusCode),$e.Cb(1),$e.Rc(" ",e.bookingStatusName," "),$e.Cb(1),$e.pc("ngIf",e.vendorBookingItemCode),$e.Cb(2),$e.pc("ngIf",e.clientCancelDeadline)}}function Zt(e,t){if(1&e&&($e.Wb(0,"div"),$e.Wb(1,"span",18),$e.Wb(2,"span",23),$e.Pc(3,"C"),$e.Vb(),$e.Wb(4,"span"),$e.Pc(5),$e.Vb(),$e.Vb(),$e.Vb(),$e.Wb(6,"div",12),$e.Wb(7,"span",18),$e.Wb(8,"span",23),$e.Pc(9,"V"),$e.Vb(),$e.Wb(10,"span"),$e.Pc(11),$e.Vb(),$e.Vb(),$e.Vb()),2&e){const e=t.$implicit;$e.Cb(5),$e.Qc(e.clientPaymentStatusName),$e.Cb(6),$e.Qc(e.vendorPaymentStatusName)}}function ei(e,t){if(1&e&&($e.Wb(0,"div",14),$e.Wb(1,"span",15),$e.Pc(2),$e.Vb(),$e.Wb(3,"span",16),$e.Pc(4),$e.Vb(),$e.Vb(),$e.Wb(5,"div",12),$e.Wb(6,"span",11),$e.Pc(7),$e.Vb(),$e.Vb()),2&e){const e=t.$implicit;$e.Cb(2),$e.Rc(" ",e.vendorCompCode," "),$e.Cb(2),$e.Rc(" ",e.vendorCompName," "),$e.Cb(3),$e.Rc(" ",e.vendorBookingCode," ")}}const ti=function(e,t,i,o,n,a,s){return{bookingDateTpl:e,sellerTpl:t,hotelTpl:i,checkInRoomTypeTpl:o,bookingStatusTpl:n,paymentStatusTpl:a,vendorTpl:s}};let ii=(()=>{class e{constructor(e,t,i,n,a,s,l,r){this.store=e,this._dataService=t,this._fileService=i,this.authStore=n,this.UserConditionService=a,this._commonUtilService=s,this.alertService=l,this.hoReservationListOtaApiService=r,this.mainDataListSubject$=new j.a,this._$unsubscribe=new j.a,this.countryCodeData="",this.columns=this._dataService.generateGridColumns(),this.pageSize$=e.pipe(Object(c.u)(De)),this.dateRangeTypeList$=e.pipe(Object(c.u)(Se)),this.stationTypeList$=e.pipe(Object(c.u)(Oe)),this.deviceTypeList$=e.pipe(Object(c.u)(je)),this.bookingStatusList$=e.pipe(Object(c.u)(Le)),this.contractTypeList$=e.pipe(Object(c.u)(Re)),this.mainLoading$=e.pipe(Object(c.u)(Ve)),this.searchCondition$=e.pipe(Object(c.u)(Ne)),this.otherSearchInfo$=e.pipe(Object(c.u)(Ie)),this.mainDataList$=e.pipe(Object(c.u)(we)),this.mainSummaryInfo$=e.pipe(Object(c.u)(We)),this.mainDataTotalCount$=e.pipe(Object(c.u)(Ae)),this.gridState$=e.pipe(Object(c.u)(xe)),this.paymentStatusList$=e.pipe(Object(c.u)(Pe)),this.clientPaymentStatusCodeList$=e.pipe(Object(c.u)(Te)),this.countryCodeSelect$=e.pipe(Object(c.u)(_e)),this.storeId$=n.pipe(Object(c.u)(Fe.o)),e.dispatch(o.initThisStateAction())}ngAfterViewInit(){this._requestCommonDetailCodes(),this._initSubscription()}ngOnInit(){this._initSearchCondition(),this.storeId$.subscribe(e=>this._storeId=e)}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete(),this.mainDataListSubject$.next(null),this.mainDataListSubject$.complete()}gridPageChangeHandler(e){this._isSearchClick=!0,this.store.dispatch(o.changeMainListPageIndexAction({pageIndex:e}))}changePageSizeHandler(e){this._isSearchClick=!0,this.store.dispatch(o.changeMainListPageSizeAction({pageSize:e})),this.store.dispatch(o.changeMainListPageIndexAction({pageIndex:0}))}clickOffRegistHandler(){this.store.dispatch(o.openOffRegistPopup())}closeOffRegistHandler(){this.store.dispatch(o.closeOffRegistPopup())}clickAssignPicHandler(){this.store.dispatch(o.openAssignPicModalAction())}closeAssignPicHandler(){this.store.dispatch(o.closeAssignPicModalAction())}submitAssignPicHandler(e){const t=I.cloneDeep(e);this.store.dispatch(o.updateAssignPicItems({updateCondition:t})),this.closeAssignPicHandler()}clickSearchHandler({searchCondition:e,otherSearchInfo:t}){this._isSearchClick=!0,this.store.dispatch(o.changeSearchConditionAction({searchCondition:e,otherSearchInfo:t})),this.store.dispatch(o.changeMainListPageIndexAction({pageIndex:0}))}clickResetHandler(){const e=this._dataService.initHoReservationListOtaSearchForm();this.store.dispatch(o.changeSearchConditionAction({searchCondition:e,otherSearchInfo:null}))}bookingListHandler(){const e=this._setSearchCondition(this.searchFormEl.formValue);this.hoReservationListOtaApiService.bookingListExport(Object.assign(Object.assign({},e),{batchCode:"BT045"})).subscribe(e=>{console.log("res: ",e),this.alertService.alert("Create Success Export Booking List")})}onClickBookingItemCode(e){window.open(`${window.location.origin}/reservation/hotel/${e.bookingItemCode}?tabName=BOOKING_DETAIL`,"_blank","height=950,width=1800,left=0,top=0,toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=no,status=no")}gridStateChangeHandler(e){this._isSearchClick=!0,this.store.dispatch(o.setGridStateAction({gridState:e}))}_initSubscription(){if(Object(L.a)([this.searchCondition$,this.gridState$]).pipe(Object(R.a)(1),Object(P.a)(200),Object(T.a)(()=>!0===this._isSearchClick),Object(N.a)(this._$unsubscribe)).subscribe(([e,{pageInfo:t}])=>{const i=[t.skip,t.skip+t.take],n=Object.assign({},this._setSearchCondition(e),{limits:i});this._isSearchClick=!1,this.store.dispatch(o.loadMainListAction({condition:n}))}),this.searchCondition$.subscribe(e=>this._searchCondition=e),this.mainDataList$.subscribe(e=>this._searchGridDataList=e),this.otherSearchInfo$.subscribe(e=>this._otherSearchInfo=e),this.countryCodeSelect$.subscribe(e=>this.countryCodeData=e),0===I.size(this._searchCondition)&&0===I.size(this._searchGridDataList)){const e=this._dataService.initHoReservationListOtaSearchForm(),t=this.UserConditionService.selectSearchSetting(e,this._storeId,this._otherSearchInfo);this.store.dispatch(o.changeSearchConditionAction({searchCondition:t[0],otherSearchInfo:t[1]}))}this._initDataWidthForWidthList()}_setSearchCondition(e){const t=(e.dateRange2.dates.some(e=>I.isNil(e))?null:e.dateRange2.dates)&&e.dateRange2,i=e.dateRange3.dates.some(e=>I.isNil(e))?null:e.dateRange3.dates,o=Object.assign({},e,{dateRange2:t,dateRange3:i&&e.dateRange3});return I.omitBy(o,I.isNil)}_requestCommonDetailCodes(){this.store.dispatch(o.loadDateRangeTypeAction({condition:{masterCode:"HO017"}})),this.store.dispatch(o.loadStationTypeAction({condition:{masterCode:"BS002"}})),this.store.dispatch(o.loadDeviceTypeAction({condition:{masterCode:"BS037"}})),this.store.dispatch(o.loadBookingStatusAction({condition:{masterCode:"BK001",referCode1:"IC02"}})),this.store.dispatch(o.loadContractTypeAction({condition:{masterCode:"HO023"}})),this.store.dispatch(o.loadPaymentStatusListAction({condition:{masterCode:"BK014"}})),this.store.dispatch(o.loadClientPaymentStatusCodeListAction({condition:{masterCode:"BK002"}}))}_initSearchCondition(){}_initDataWidthForWidthList(){this.mainDataList$.pipe(Object(N.a)(this._$unsubscribe)).subscribe(e=>{const t=null==e?void 0:e.map(e=>{var t;return Object.assign(Object.assign({},e),{firstInsertDatetime:e.bookingItemCode,bookerCompName:e.stationTypeName+" "+e.bookerCompName,hotelNameEn:e.hotelCode+" "+e.hotelNameEn,checkInDate:e.roomTypeNameEn+" X "+e.roomCount,bookingStatusName:e.bookingStatusName+" / "+e.vendorBookingItemCode,clientPaymentStatusName:"C : "+e.clientPaymentStatusName,vendorCompCode:this._commonUtilService.selectMaxString([(null!==(t=e.vendorCompCode)&&void 0!==t?t:"")+" "+e.vendorCompName,e.vendorBookingCode])})});t&&(this.dataListForWidth=t),this.mainDataListSubject$.subscribe(e=>console.log(e)),this.mainDataListSubject$.next(e)})}}return e.\u0275fac=function(t){return new(t||e)($e.Qb(c.h),$e.Qb(Ye),$e.Qb(Ft.a),$e.Qb(c.h),$e.Qb($t.a),$e.Qb(Et.a),$e.Qb(Ze.a),$e.Qb(Je))},e.\u0275cmp=$e.Kb({type:e,selectors:[["app-ho-reservation-list-ota"]],viewQuery:function(e,t){var i;1&e&&($e.Xc(Ot,!0),$e.Xc(Dt,!0)),2&e&&($e.Dc(i=$e.gc())&&(t.searchFormEl=i.first),$e.Dc(i=$e.gc())&&(t.gridEl=i.first))},decls:34,vars:61,consts:[[3,"searchCondition","dateRangeTypeList","stationTypeList","deviceTypeList","bookingStatusList","contractTypeList","paymentList","clientPaymentStatusCodeList","otherSearchInfo","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","changePageSizeEvent","excelDownloadEvent"],["bookingDateTpl",""],["sellerTpl",""],["hotelTpl",""],["checkInRoomTypeTpl",""],["bookingStatusTpl",""],["paymentStatusTpl",""],["vendorTpl",""],[3,"gridLoading","columns","gridState","totalCount","checkboxUseYn","dataListForWidth","dataList","sortable","templates","stateChangeEvent"],["gridEl",""],[1,"color-dark-color2"],[1,"mt4"],[1,"text-underline","font-weight-medium",3,"click"],[1,"d-flex","align-items-center"],[1,"k-grid-label","type1"],[1,"flex-none","font-weight-regular","ml5"],["class","color-dark-color2",4,"ngIf"],[1,"text-mark"],[1,"label","square","mark","ml5"],[1,"font-weight-regular"],[1,"font-weight-medium"],[4,"ngIf"],[1,"label","square","mark"]],template:function(e,t){if(1&e&&($e.Wb(0,"app-ho-reservation-list-ota-search",0),$e.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()})),$e.ic(1,"async"),$e.ic(2,"async"),$e.ic(3,"async"),$e.ic(4,"async"),$e.ic(5,"async"),$e.ic(6,"async"),$e.ic(7,"async"),$e.ic(8,"async"),$e.ic(9,"async"),$e.Vb(),$e.Wb(10,"app-ho-reservation-list-ota-control",1),$e.fc("changePageSizeEvent",(function(e){return t.changePageSizeHandler(e)}))("excelDownloadEvent",(function(){return t.bookingListHandler()})),$e.ic(11,"async"),$e.ic(12,"async"),$e.ic(13,"async"),$e.Vb(),$e.Nc(14,Mt,6,5,"ng-template",null,2,$e.Oc),$e.Nc(16,Ht,8,3,"ng-template",null,3,$e.Oc),$e.Nc(18,Ut,9,5,"ng-template",null,4,$e.Oc),$e.Nc(20,Gt,7,7,"ng-template",null,5,$e.Oc),$e.Nc(22,Jt,6,5,"ng-template",null,6,$e.Oc),$e.Nc(24,Zt,12,2,"ng-template",null,7,$e.Oc),$e.Nc(26,ei,8,3,"ng-template",null,8,$e.Oc),$e.Wb(28,"app-grid-simple",9,10),$e.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)})),$e.ic(30,"async"),$e.ic(31,"async"),$e.ic(32,"async"),$e.ic(33,"async"),$e.Vb()),2&e){const e=$e.Ec(15),i=$e.Ec(17),o=$e.Ec(19),n=$e.Ec(21),a=$e.Ec(23),s=$e.Ec(25),c=$e.Ec(27);$e.pc("searchCondition",$e.jc(1,21,t.searchCondition$))("dateRangeTypeList",$e.jc(2,23,t.dateRangeTypeList$))("stationTypeList",$e.jc(3,25,t.stationTypeList$))("deviceTypeList",$e.jc(4,27,t.deviceTypeList$))("bookingStatusList",$e.jc(5,29,t.bookingStatusList$))("contractTypeList",$e.jc(6,31,t.contractTypeList$))("paymentList",$e.jc(7,33,t.paymentStatusList$))("clientPaymentStatusCodeList",$e.jc(8,35,t.clientPaymentStatusCodeList$))("otherSearchInfo",$e.jc(9,37,t.otherSearchInfo$)),$e.Cb(10),$e.pc("loading",$e.jc(11,39,t.mainLoading$))("currentPageSize",$e.jc(12,41,t.pageSize$))("totalCount",$e.jc(13,43,t.mainDataTotalCount$)),$e.Cb(18),$e.pc("gridLoading",$e.jc(30,45,t.mainLoading$))("columns",t.columns)("gridState",$e.jc(31,47,t.gridState$))("totalCount",$e.jc(32,49,t.mainDataTotalCount$))("checkboxUseYn",!1)("dataListForWidth",t.dataListForWidth)("dataList",$e.jc(33,51,t.mainDataListSubject$))("sortable",!0)("templates",$e.Ac(53,ti,e,i,o,n,a,s,c))}},directives:[Ot,jt,Bt.a,n.o],pipes:[n.b,n.e],encapsulation:2,changeDetection:0}),e})();const oi=[{path:"",component:ii}];let ni=(()=>{class e{}return e.\u0275mod=$e.Ob({type:e}),e.\u0275inj=$e.Nb({factory:function(t){return new(t||e)},imports:[[O.f.forChild(oi)],O.f]}),e})();var ai=i("bOdf"),si=i("zp1y"),ci=i("IzEk"),li=i("lJxs"),ri=i("JIr8"),di=i("vkgz"),ui=i("Xb6A");let pi=(()=>{class e{constructor(e,t,i,n,a){this._actions=e,this._apiService=t,this._errorService=i,this._alertService=n,this._store=a,this.loadDateRangeType$=Object(s.c)(()=>this._actions.pipe(Object(s.d)(o.loadDateRangeTypeAction),Object(ai.a)(e=>Object(Ke.a)(e).pipe(Object(si.a)(this.dateRangeTypeList$.pipe(Object(ci.a)(1))))),Object(Ue.a)(([{condition:e},t])=>I.isNil(t)||0===t.length?this._apiService.getCommonDetailCodeList(e).pipe(Object(li.a)(e=>o.loadDateRangeTypeSuccessAction({dataList:e})),Object(ri.a)(e=>{const t="DateRangeType list lookup failed.",i=[o.loadDateRangeTypeFailureAction({error:t})];return this._catchErr(e,t,i),[]})):Object(Ke.a)(o.loadDateRangeTypeSuccessAction({dataList:t}))))),this.loadStationType$=Object(s.c)(()=>this._actions.pipe(Object(s.d)(o.loadStationTypeAction),Object(ai.a)(e=>Object(Ke.a)(e).pipe(Object(si.a)(this.stationTypeList$.pipe(Object(ci.a)(1))))),Object(Ue.a)(([{condition:e},t])=>I.isNil(t)||0===t.length?this._apiService.getCommonDetailCodeList(e).pipe(Object(li.a)(e=>o.loadStationTypeSuccessAction({dataList:e})),Object(ri.a)(e=>{const t="The StationType list lookup failed.",i=[o.loadStationTypeFailureAction({error:t})];return this._catchErr(e,t,i),[]})):Object(Ke.a)(o.loadStationTypeSuccessAction({dataList:t}))))),this.loadDeviceType$=Object(s.c)(()=>this._actions.pipe(Object(s.d)(o.loadDeviceTypeAction),Object(ai.a)(e=>Object(Ke.a)(e).pipe(Object(si.a)(this.deviceTypeList$.pipe(Object(ci.a)(1))))),Object(Ue.a)(([{condition:e},t])=>I.isNil(t)||0===t.length?this._apiService.getCommonDetailCodeList(e).pipe(Object(li.a)(e=>o.loadDeviceTypeSuccessAction({dataList:e})),Object(ri.a)(e=>{const t="The DeviceType list lookup failed.",i=[o.loadDeviceTypeFailureAction({error:t})];return this._catchErr(e,t,i),[]})):Object(Ke.a)(o.loadDeviceTypeSuccessAction({dataList:t}))))),this.loadBookingStatus$=Object(s.c)(()=>this._actions.pipe(Object(s.d)(o.loadBookingStatusAction),Object(ai.a)(e=>Object(Ke.a)(e).pipe(Object(si.a)(this.bookingStatusList$.pipe(Object(ci.a)(1))))),Object(Ue.a)(([{condition:e},t])=>I.isNil(t)||0===t.length?this._apiService.getCommonDetailCodeList(e).pipe(Object(li.a)(e=>o.loadBookingStatusSuccessAction({dataList:e})),Object(ri.a)(e=>{const t="The BookingStatus list lookup failed.",i=[o.loadBookingStatusFailureAction({error:t})];return this._catchErr(e,t,i),[]})):Object(Ke.a)(o.loadBookingStatusSuccessAction({dataList:t}))))),this.loadClientPaymentStatusCode$=Object(s.c)(()=>this._actions.pipe(Object(s.d)(o.loadClientPaymentStatusCodeListAction),Object(ai.a)(e=>Object(Ke.a)(e).pipe(Object(si.a)(this.clientPaymentStatusCodeList$.pipe(Object(ci.a)(1))))),Object(Ue.a)(([{condition:e},t])=>I.isNil(t)||0===t.length?this._apiService.getCommonDetailCodeList(e).pipe(Object(li.a)(e=>o.loadClientPaymentStatusCodeListSuccessAction({dataList:e})),Object(ri.a)(e=>{const t=[o.loadClientPaymentStatusCodeListFailureAction()];return this._catchErr(e,"The ClientPaymentStatusCode list lookup failed.",t),[]})):Object(Ke.a)(o.loadClientPaymentStatusCodeListSuccessAction({dataList:t}))))),this.loadMainList$=Object(s.c)(()=>this._actions.pipe(Object(s.d)(o.loadMainListAction),Object(Ue.a)(({condition:e})=>(e=I.omit(e,["selectedBookerDropdown"]),this._apiService.getMainList(e).pipe(Object(li.a)(e=>o.loadMainListSuccessAction({dataCollection:e})),Object(ri.a)(e=>{const t="List lookup failed. Please try again in a momentarily.",i=[o.loadMainListFailureAction({error:t})];return this._catchErr(e,t,i),[]})))))),this.updateAssignPicItems$=Object(s.c)(()=>this._actions.pipe(Object(s.d)(o.updateAssignPicItems),Object(Ue.a)(({updateCondition:e})=>this._apiService.updateAssignPicItems(e).pipe(Object(li.a)(e=>({succeedYn:!0,updateList:e})),Object(ri.a)(e=>Object(Ke.a)({succeedYn:!1,error:e})))),Object(di.a)(({succeedYn:e,error:t,updateList:i})=>{if(e){const e="The bulk change of assignee was successful.",t=[o.updateAssignPicItemsSuccess({updateList:i}),o.closeAssignPicModalAction()];this._runPage(e,t)}else{const e="The bulk change of assignee failed.",i=[o.updateAssignPicItemsFailure({error:e})];this._catchErr(t,e,i)}})),{dispatch:!1}),this.loadPaymentStatusList$=Object(s.c)(()=>this._actions.pipe(Object(s.d)(o.loadPaymentStatusListAction),Object(Ue.a)(({condition:e})=>this._apiService.getCommonDetailCodeList(e).pipe(Object(li.a)(e=>o.loadPaymentStatusListSuccessAction({dataList:e})),Object(ri.a)(e=>(this._catchErr(e,"List lookup failed. Please try again in a momentarily.",[]),[])))))),this.loadContractTypeAction$=Object(s.c)(()=>this._actions.pipe(Object(s.d)(o.loadContractTypeAction),Object(Ue.a)(({condition:e})=>this._apiService.getCommonDetailCodeList(e).pipe(Object(li.a)(e=>o.loadContractTypesSuccessAction({dataList:e})),Object(ri.a)(e=>(this._catchErr(e,"List lookup failed. Please try again in a momentarily.",[]),[])))))),this.dateRangeTypeList$=this._store.select(Se),this.stationTypeList$=this._store.select(Oe),this.deviceTypeList$=this._store.select(je),this.bookingStatusList$=this._store.select(Le),this.clientPaymentStatusCodeList$=this._store.select(Te)}_runPage(e,t){this._alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this._store.dispatch(e)})}:()=>{}})}_catchErr(e,t,i){const o=this._errorService.errorHandler(e,t);I.isNil(o)||(I.isNil(o.accept)&&(o.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(e=>{this._store.dispatch(e)})}:()=>{}),this._alertService.alert(o))}}return e.\u0275fac=function(t){return new(t||e)($e.bc(s.a),$e.bc(Je),$e.bc(ui.a),$e.bc(Ze.a),$e.bc(c.h))},e.\u0275prov=$e.Mb({token:e,factory:e.\u0275fac}),e})();var bi=i("w8np"),mi=i("YH7L"),hi=i("FGZR");const gi=[ii],Ci=[Ot,jt,Dt,_t];let fi=(()=>{class e{}return e.\u0275mod=$e.Ob({type:e}),e.\u0275inj=$e.Nb({factory:function(t){return new(t||e)},imports:[[n.c,a.m,a.w,l.m,r.a,d.a,u.a,p.a,b.a,m.a,h.a,g.a,C.a,f.a,v.a,y.a,k.a,S.a,ni,mi.a,hi.a,c.j.forFeature("hoReservationListOta",ve),s.b.forFeature([pi]),bi.a]]}),e})()}}]);