(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{Duyv:function(t,e,i){"use strict";i.r(e),i.d(e,"CONTAINERS",(function(){return be})),i.d(e,"COMPONENTS",(function(){return he})),i.d(e,"BsCityCodeModule",(function(){return pe}));var n={};i.r(n),i.d(n,"getListSuccess",(function(){return w})),i.d(n,"getListFailure",(function(){return W})),i.d(n,"getStateListSuccess",(function(){return E})),i.d(n,"getStateListFailure",(function(){return D})),i.d(n,"upsertItemSuccess",(function(){return F})),i.d(n,"upsertItemFailure",(function(){return R})),i.d(n,"loadList",(function(){return _})),i.d(n,"reloadList",(function(){return x})),i.d(n,"initList",(function(){return $})),i.d(n,"loadStateList",(function(){return z})),i.d(n,"changeSearchCondition",(function(){return A})),i.d(n,"changePageSize",(function(){return T})),i.d(n,"removeSelectedGridEntities",(function(){return Y})),i.d(n,"setGridCheckRowidsAction",(function(){return B})),i.d(n,"setGridStateAction",(function(){return U})),i.d(n,"setGridCheckedStateAction",(function(){return H})),i.d(n,"openDetailPopup",(function(){return G})),i.d(n,"closeDetailPopup",(function(){return K})),i.d(n,"addSelectedDetailRowInfo",(function(){return Q})),i.d(n,"delSelectedDetailRowInfo",(function(){return Z})),i.d(n,"upsertItem",(function(){return J}));var c=i("ofXK"),s=i("3Pt+"),a=i("snw9"),o=i("kt0X"),r=i("WG3B"),l=i("xoAz"),d=i("wPo9"),u=i("7rOj"),b=i("+NQf"),h=i("6LsY"),p=i("l1P7"),m=i("v7zA"),C=i("7UZF"),g=i("hHe4"),f=i("1OXJ"),y=i("5hwk"),S=i("htEk"),v=i("kKjH"),O=i("qXPF"),j=i("vu/V"),I=i("tyNb"),N=i("fXoL"),L=i("XNiG"),k=i("zP0r"),V=i("1G5W"),P=i("LvDl");const w=Object(o.o)("[BsCityCode/List] get list success",Object(o.t)()),W=Object(o.o)("[BsCityCode/List] get list failure",Object(o.t)()),E=Object(o.o)("[BsCityCode/List] get state list success",Object(o.t)()),D=Object(o.o)("[BsCityCode/List] get state list failure",Object(o.t)()),F=Object(o.o)("[BsCityCode/List] upsert item success",Object(o.t)()),R=Object(o.o)("[BsCityCode/List] upsert item failure",Object(o.t)()),_=Object(o.o)("[BsCityCode/List] load grid data list",Object(o.t)()),x=Object(o.o)("[BsCityCode/List] reload grid data list"),$=Object(o.o)("[BsCityCode/List] init grid data list"),z=Object(o.o)("[BsCityCode/List] load state list",Object(o.t)()),A=Object(o.o)("[BsCityCode/List] change search condition",Object(o.t)()),T=Object(o.o)("[BsCityCode/List] change page size",Object(o.t)()),Y=Object(o.o)("[BsCityCode/List] \uc0ad\uc81c\ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(o.t)()),B=Object(o.o)("[BsCityCode/List] set grid checked rowids",Object(o.t)()),U=Object(o.o)("[BsCityCode/List] set grid state",Object(o.t)()),H=Object(o.o)("[BsCityCode/List] set grid checked state",Object(o.t)()),G=Object(o.o)("[BsCityCode/Detail] \uc0c1\uc138\ud31d\uc5c5 \uc5f4\uae30"),K=Object(o.o)("[BsCityCode/Detail] \uc0c1\uc138\ud31d\uc5c5 \ub2eb\uae30"),Q=Object(o.o)("[BsCityCode/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc120\ud0dd",Object(o.t)()),Z=Object(o.o)("[BsCityCode/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \ubcf4\uc5ec\uc9c8 \ud56d\ubaa9 \uc81c\uac70"),J=Object(o.o)("[BsCityCode/Detail] \uc0c1\uc138\ud31d\uc5c5\uc5d0\uc11c \uc800\uc7a5 \ubc84\ud2bc \ud074\ub9ad \uc561\uc158",Object(o.t)());var X=i("EVqC");const q=Object(X.a)({selectId:t=>t.rowid,sortComparer:!1}),M=q.getInitialState({loading:!1,reloadToggle:!1,stateList:[],searchCondition:{},otherSearchInfo:null,pageSize:20,selectedDetailRowInfo:null,isOpenDetailPopup:!1,gridState:{skip:0,sortInfo:[],filter:{logic:"and",filters:[]}},gridCheckedRowids:null,gridCheckedState:null}),tt=Object(o.q)(M,Object(o.s)(n.loadList,t=>Object.assign(Object.assign({},t),{loading:!0})),Object(o.s)(n.reloadList,t=>Object.assign(Object.assign({},t),{reloadToggle:!t.reloadToggle})),Object(o.s)(n.initList,t=>Object.assign(Object.assign({},t),{loading:!1,reloadToggle:!1,selectedDetailRowInfo:null,isOpenDetailPopup:!1})),Object(o.s)(n.getListSuccess,(t,{dataList:e})=>q.setAll(e,Object.assign(Object.assign({},t),{loading:!1,gridCheckedRowids:null}))),Object(o.s)(n.getListFailure,t=>Object.assign(Object.assign({},t),{loading:!1})),Object(o.s)(n.getStateListSuccess,(t,{dataList:e})=>Object.assign(Object.assign({},t),{stateList:e})),Object(o.s)(n.changeSearchCondition,(t,{searchCondition:e,otherSearchInfo:i})=>Object.assign(Object.assign({},t),{searchCondition:e,otherSearchInfo:i})),Object(o.s)(n.changePageSize,(t,{pageSize:e})=>Object.assign(Object.assign({},t),{pageSize:e})),Object(o.s)(n.upsertItemSuccess,(t,{upsertItem:e})=>q.upsertOne(Object.assign(Object.assign({},e),{id:t.stateList.length}),Object.assign({},t))),Object(o.s)(n.openDetailPopup,t=>Object.assign(Object.assign({},t),{isOpenDetailPopup:!0})),Object(o.s)(n.closeDetailPopup,t=>Object.assign(Object.assign({},t),{isOpenDetailPopup:!1})),Object(o.s)(n.addSelectedDetailRowInfo,(t,{selectedDetailRowInfo:e})=>Object.assign(Object.assign({},t),{selectedDetailRowInfo:e})),Object(o.s)(n.delSelectedDetailRowInfo,t=>Object.assign(Object.assign({},t),{selectedDetailRowInfo:null})),Object(o.s)(n.setGridCheckRowidsAction,(t,{rowids:e})=>Object.assign(Object.assign({},t),{gridCheckedRowids:e})),Object(o.s)(n.setGridStateAction,(t,{gridState:e})=>Object.assign(Object.assign({},t),{gridState:e})),Object(o.s)(n.setGridCheckedStateAction,(t,{gridCheckedState:e})=>Object.assign(Object.assign({},t),{gridCheckedState:e})));function et(t,e){return Object(o.m)({bsCityCodeList:tt})(t,e)}const it=Object(o.p)("bsCityCode"),nt=Object(o.r)(it,t=>t.bsCityCodeList),ct=Object(o.r)(nt,t=>t.loading),st=Object(o.r)(nt,t=>t.reloadToggle),at=Object(o.r)(nt,t=>t.stateList),ot=Object(o.r)(nt,t=>t.searchCondition),rt=Object(o.r)(nt,t=>t.otherSearchInfo),lt=Object(o.r)(nt,t=>t.pageSize),dt=Object(o.r)(nt,t=>t.selectedDetailRowInfo),ut=Object(o.r)(nt,t=>t.isOpenDetailPopup),bt=q.getSelectors(nt).selectAll,ht=(q.getSelectors(nt),Object(o.r)(nt,t=>t.gridState)),pt=Object(o.r)(nt,t=>t.gridCheckedRowids),mt=Object(o.r)(nt,t=>t.gridCheckedState);var Ct=i("YY+H"),gt=i("pfiq"),ft=i("LRne"),yt=i("z6cu"),St=i("eIep"),vt=i("AytR");const{API_URL:Ot}=vt.a,jt={selectEntities:`${Ot}/admin/basis/city`,modifyEntity:`${Ot}/admin/basis/city`,selectDetailCodes:`${Ot}/common/detail-code`,selectStates:`${Ot}/admin/basis/state`,displayEntity:`${Ot}/control/bs/city-code`};var It=i("tpT/");let Nt=(()=>{class t{constructor(t){this.api=t}getList(t){const e=P.assign({},this.api.defaultParams,{condition:t});return this.api.post(jt.selectEntities,e).pipe(Object(St.a)(t=>{var e;if(t.succeedYn){const i=(null===(e=t.result)||void 0===e?void 0:e.list)||[];return Object(ft.a)(this._addRowid(i))}return Object(yt.a)(t||"api response error")}))}upsertItem(t){const e=P.assign({},this.api.defaultParams,{condition:t});return this.api.put(jt.modifyEntity,e).pipe(Object(St.a)(t=>{if(t.succeedYn){const e=t.result;return Object(ft.a)(e)}return Object(yt.a)(t||"api response error")}))}getCommonDetailCodeList(t){const e=P.assign({},this.api.defaultParams,{condition:t});return this.api.post(jt.selectDetailCodes,e).pipe(Object(St.a)(t=>t.succeedYn?Object(ft.a)(t.result.list):Object(yt.a)(t||"api response error")))}getStateList(t){const e=P.assign({},this.api.defaultParams,{condition:t});return this.api.post(jt.selectStates,e).pipe(Object(St.a)(t=>t.succeedYn?Object(ft.a)(t.result.list.map(t=>({label:`[${t.stateCode}] ${t.stateNameKo}`,value:t.stateCode,countryCode:t.countryCode}))):Object(yt.a)(t||"api response error")))}_addRowid(t){return P.isNil(t)?[]:t.map((t,e)=>Object.assign(Object.assign({},t),{rowid:String(e)}))}}return t.\u0275fac=function(e){return new(e||t)(N.bc(It.a))},t.\u0275prov=N.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Lt=i("6UzV");let kt=(()=>{class t{constructor(t){this.fb=t,this.generateGridColumns=()=>[{field:"countryCode",title:"City Code",type:"text",style:{"text-align":"center"}},{field:"cityCode",title:"  Country Code  ",type:"text",style:{"text-align":"center"}},{field:"stateCode",title:"State Code",type:"text",style:{"text-align":"center"}},{field:"cityNameKo",title:"City Name(KO)",type:"text"},{field:"cityNameEn",title:"City Name(EN)",type:"text"},{field:"cityNameJa",title:"City Name(JA)",type:"text"},{field:"cityNameVi",title:"City Name(VI)",type:"text"},{field:"cityNameZh",title:"City Name(ZH)",type:"text"},{field:"cityNameSearch",title:"City Name Search",type:"text",template:"cityNameSearchTpl"},{field:"timeZoneName",title:"Time Zone Name",type:"text"},{field:"cityCodeIata",title:"IATA City Code",type:"text",style:{"text-align":"center"}},{field:"latitude",title:"Latitude",type:"text",style:{"text-align":"center"}},{field:"longitude",title:"Longitude",type:"text",style:{"text-align":"center"}},{field:"zoomLevel",title:"Zoom Level",type:"text",style:{"text-align":"center"}},{field:"displayOrder",title:"Display Order",type:"text"},{field:"lastUpdateName",title:"Last Update User",type:"text"},{field:"lastUpdateDatetime",title:"Last Update Time",type:"text",style:{"text-align":"center"}},{field:"firstInsertName",title:"First Insert User",type:"text"},{field:"firstInsertDatetime",title:"First Insert Time",type:"text",style:{"text-align":"center"}}],this.generateListSearchForm=()=>this.fb.group({countryCode:[null],cityCode:[null,[Lt.a.cityCodeValidator]],cityCodeIata:[null,[Lt.a.iataCityCodeValidator]],cityName:[null]}),this.initListSearch=()=>({countryCode:null,cityCode:null,cityCodeIata:null,cityName:null}),this.generatePutForm=()=>this.fb.group({rowid:[null],cityCode:[{value:null,disabled:!0},[s.z.required]],countryCode:[null,[s.z.required]],stateCode:[null],cityNameEn:[null,[s.z.required]],cityNameKo:[null,[s.z.required]],cityNameJa:[null],cityNameVi:[null],cityNameZh:[null],cityNameSearch:[null,[s.z.required]],timeZoneName:[null],cityCodeIata:[null],latitude:[null,[Lt.a.latLon()]],longitude:[null,[Lt.a.latLon()]],zoomLevel:[null,[Lt.a.num()]],displayOrder:[null,[Lt.a.num()]],controlRemark:[null],vendorCityCount:[{value:null,disabled:!0}],vendorHotelCount:[{value:null,disabled:!0}],systemHotelCount:[{value:null,disabled:!0}]}),this.initPutFormData=()=>({rowid:null,cityCode:null,cityNameEn:null,cityNameKo:null,cityNameJa:null,cityNameVi:null,cityNameZh:null,cityNameSearch:null,countryCode:null,stateCode:null,timeZoneName:null,cityCodeIata:null,latitude:null,longitude:null,zoomLevel:null,displayOrder:1,controlRemark:null})}}return t.\u0275fac=function(e){return new(e||t)(N.bc(s.f))},t.\u0275prov=N.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Vt=i("EsKh"),Pt=i("+Sob"),wt=i("gbCm");const Wt=function(){return{}},Et=function(){return["countryCode","countryNameLn"]};let Dt=(()=>{class t{constructor(t,e){this._dataService=t,this.alertService=e,this.clickSearchEvent=new N.n,this.clickResetEvent=new N.n,this.changeSearchConditionEvent=new N.n,this.isShowmore=!1,this.useYnOptions=[{label:"Y",value:!0},{label:"N",value:!1}],this.searchForm=this._dataService.generateListSearchForm()}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(t){this._otherSearchInfo=t,this._setOtherSearchInfo(t)}get searchCondition(){return this._searchCondition}set searchCondition(t){this._searchCondition=t,this.searchFormData=this._setSearchFormData(t)}get searchFormValid(){return this.searchForm.valid}ngOnInit(){this._initThisState()}onSubmit(){if(this.searchForm.invalid)this._checkValid=!0;else{if(Object.values(this.searchForm.value).find(t=>!(!t&&0!==t))){const t=P.omitBy(this.searchForm.value,P.isNil),e=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:t,otherSearchInfo:e})}else this.alertService.alert("Please enter at least one search condition.");this._checkValid=!1}}onReset(){this.clickResetEvent.emit()}checkIsInvalid(t){return this._checkValid&&this.searchForm.get(t)&&this.searchForm.get(t).invalid}_initThisState(){}_setSearchFormData(t){const e=this._dataService.initListSearch();return Object.assign({},e,P.pick(t,Object.keys(e)))}_setOtherSearchInfo(t){this.countryInput=(null==t?void 0:t.countryInput)||null}_setOtherSearchCondition(){const t={};return this.autoCompletes.forEach(e=>{Object.assign(t,e.getInputValue())}),t}}return t.\u0275fac=function(e){return new(e||t)(N.Qb(kt),N.Qb(Vt.a))},t.\u0275cmp=N.Kb({type:t,selectors:[["app-bs-city-code-search"]],viewQuery:function(t,e){var i;1&t&&N.Xc(gt.a,!0),2&t&&N.Dc(i=N.gc())&&(e.autoCompletes=i)},inputs:{stateList:"stateList",otherSearchInfo:"otherSearchInfo",searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent",changeSearchConditionEvent:"changeSearchConditionEvent"},decls:24,vars:11,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-1"],[1,"form-label"],["apiUrl","admin/common/country","formControlName","countryCode","dataKey","countryCode","inputFieldFormat","[{0}] {1}","placeholder","Name",1,"d-inline-flex","flex-fill",3,"inputFieldValue","inputId","apiCondition","apiSearchTerm","inputFieldFormatKeyList"],["formControlName","cityCode","placeholder","Code (5letters)","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","cityCodeIata","placeholder","Code (3letters)","inputFormat","upperCase",1,"d-inline-flex","flex-fill",3,"isInvalid"],["formControlName","cityName","placeholder","Name",1,"d-inline-flex","flex-fill"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"]],template:function(t,e){1&t&&(N.Wb(0,"form",0),N.fc("ngSubmit",(function(){return e.onSubmit()})),N.Wb(1,"div",1),N.Wb(2,"div",2),N.Wb(3,"div",3),N.Wb(4,"span",4),N.Pc(5,"Country Name"),N.Vb(),N.Rb(6,"app-auto-complete",5),N.Vb(),N.Wb(7,"div",3),N.Wb(8,"span",4),N.Pc(9,"City Code"),N.Vb(),N.Rb(10,"app-input-text",6),N.Vb(),N.Wb(11,"div",3),N.Wb(12,"span",4),N.Pc(13,"IATA City Code"),N.Vb(),N.Rb(14,"app-input-text",7),N.Vb(),N.Wb(15,"div",3),N.Wb(16,"span",4),N.Pc(17,"City Name"),N.Vb(),N.Rb(18,"app-input-text",8),N.Vb(),N.Vb(),N.Vb(),N.Wb(19,"div",9),N.Wb(20,"button",10),N.Pc(21,"Search"),N.Vb(),N.Wb(22,"button",11),N.fc("click",(function(){return e.onReset()})),N.Pc(23,"Reset"),N.Vb(),N.Vb(),N.Vb()),2&t&&(N.pc("formGroup",e.searchForm)("connectForm",e.searchFormData),N.Cb(6),N.pc("inputFieldValue",e.countryInput)("inputId","countryInput")("apiCondition",N.tc(9,Wt))("apiSearchTerm","keyword")("inputFieldFormatKeyList",N.tc(10,Et)),N.Cb(4),N.pc("isInvalid",e.checkIsInvalid("cityCode")),N.Cb(4),N.pc("isInvalid",e.checkIsInvalid("cityCodeIata")))},directives:[s.B,s.s,s.k,Pt.a,gt.a,s.r,s.i,wt.a],encapsulation:2,changeDetection:0}),t})();var Ft=i("G4DP"),Rt=i("nj7W"),_t=i("bMKz"),xt=i("U6NN");let $t=(()=>{class t{constructor(t){this.alertService=t,this.clickAddEvent=new N.n,this.clickDelEvent=new N.n,this.changePageSizeEvent=new N.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onClickAdd(){this.clickAddEvent.emit()}onClickDel(){}onChangePageSize(t){this.changePageSizeEvent.emit(t.value)}}return t.\u0275fac=function(e){return new(e||t)(N.Qb(Vt.a))},t.\u0275cmp=N.Kb({type:t,selectors:[["app-bs-city-code-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{clickAddEvent:"clickAddEvent",clickDelEvent:"clickDelEvent",changePageSizeEvent:"changePageSizeEvent"},decls:8,vars:4,consts:[[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(t,e){1&t&&(N.Wb(0,"div",0),N.Wb(1,"strong",1),N.Pc(2),N.Vb(),N.Wb(3,"div",2),N.Wb(4,"button",3),N.fc("click",(function(){return e.onClickAdd()})),N.Pc(5,"New"),N.Vb(),N.Wb(6,"div",4),N.Wb(7,"app-selectbox",5),N.fc("onChange",(function(t){return e.onChangePageSize(t)})),N.Vb(),N.Vb(),N.Vb(),N.Vb()),2&t&&(N.Cb(2),N.Qc(e.loading?"":e.totalCount),N.Cb(5),N.pc("options",e.pageSizeOptions)("ngModel",e.currentPageSize)("useAllOptionYn",!1))},directives:[xt.a,s.r,s.u],encapsulation:2,changeDetection:0}),t})();var zt=i("kDLv");const At=function(){return{}},Tt=function(){return["countryCode","countryNameLn"]};let Yt=(()=>{class t{constructor(t,e){this._dataService=t,this.fb=e,this.submitEvent=new N.n,this.closeEvent=new N.n,this.displayStateList=[],this._$unsubscribe=new L.a,this.upsertForm=this._dataService.generatePutForm()}get rowItem(){return this._rowitem}set rowItem(t){this._rowitem=t,this.upsertFormData=this._setPutFormData(t),this._initThisState(t)}disableDisplayState(){return!this.displayStateList||this.displayStateList.length<2}ngAfterContentInit(){this._initSubscription(),this._initThisState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.upsertForm.invalid)return void(this._checkValid=!0);const t=this._setPutCondition();this.submitEvent.emit(t),this._checkValid=!1}onClose(){this.closeEvent.emit()}checkIsInvalid(t){return this._checkValid&&this.upsertForm.get(t)&&this.upsertForm.get(t).invalid}_initThisState(t){this._checkValid=!1,t&&this.upsertForm.get("cityCode").disable()}_setPutFormData(t){const e=this._dataService.initPutFormData();return P.isNil(t)?e:Object.assign({},e,P.pick(t,Object.keys(e)))}_setPutCondition(){const t=this._dataService.initPutFormData(),e=this.upsertForm.getRawValue();let i=Object.assign({},P.pick(e,Object.keys(t)));return P.isNil(i.rowid)&&(i=P.omit(i,["rowid","cityCode"])),{condition:i}}_initSubscription(){this.upsertForm.get("countryCode").valueChanges.pipe(Object(V.a)(this._$unsubscribe)).subscribe(t=>{this.upsertForm.get("stateCode").setValue(null);const e=this.upsertForm.get("countryCode").value;this.displayStateList=this.stateList.filter(t=>null==t.value||t.countryCode===e&&["US","CA","AU"].includes(e))})}}return t.\u0275fac=function(e){return new(e||t)(N.Qb(kt),N.Qb(s.f))},t.\u0275cmp=N.Kb({type:t,selectors:[["app-bs-city-code-form"]],inputs:{stateList:"stateList",rowItem:"rowItem"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent"},decls:101,vars:18,consts:[[1,"modal-body"],[3,"formGroup","connectForm","ngSubmit"],[1,"table","table-bordered"],["width","150px"],["scope","row",1,"th-bg"],["apiUrl","admin/common/country","formControlName","countryCode","dataKey","countryCode","inputFieldFormat","[{0}] {1}",3,"inputFieldValue","apiCondition","apiSearchTerm","inputFieldFormatKeyList","isInvalid"],["formControlName","cityCode","inputFormat","upperCase"],["useAllOptionName","Select","formControlName","stateCode","inputFormat","upperCase",3,"options","disabled"],["formControlName","cityNameEn",3,"isInvalid"],["formControlName","cityNameKo",3,"isInvalid"],["formControlName","cityNameJa",3,"isInvalid"],["formControlName","cityNameVi",3,"isInvalid"],["formControlName","cityNameZh",3,"isInvalid"],["formControlName","cityNameSearch",3,"isInvalid"],["formControlName","timeZoneName"],["formControlName","cityCodeIata","inputFormat","upperCase"],["valueType","number","formControlName","latitude"],["valueType","number","formControlName","longitude"],["valueType","number","formControlName","zoomLevel"],["valueType","number","formControlName","displayOrder",3,"isInvalid"],["formControlName","controlRemark"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(t,e){1&t&&(N.Wb(0,"div",0),N.Wb(1,"form",1),N.fc("ngSubmit",(function(){return e.onSubmit()})),N.Wb(2,"div",2),N.Wb(3,"table"),N.Wb(4,"caption"),N.Pc(5," Country Info. "),N.Vb(),N.Wb(6,"colgroup"),N.Rb(7,"col",3),N.Rb(8,"col"),N.Vb(),N.Wb(9,"tbody"),N.Wb(10,"tr"),N.Wb(11,"th",4),N.Pc(12,"Country Name"),N.Rb(13,"sup"),N.Vb(),N.Wb(14,"td"),N.Rb(15,"app-auto-complete",5),N.Vb(),N.Vb(),N.Wb(16,"tr"),N.Wb(17,"th",4),N.Pc(18,"City Code"),N.Rb(19,"sup"),N.Vb(),N.Wb(20,"td"),N.Rb(21,"app-input-text",6),N.Vb(),N.Vb(),N.Wb(22,"tr"),N.Wb(23,"th",4),N.Pc(24,"State Code"),N.Vb(),N.Wb(25,"td"),N.Rb(26,"app-selectbox",7),N.Vb(),N.Vb(),N.Wb(27,"tr"),N.Wb(28,"th",4),N.Pc(29,"City Name(EN)"),N.Rb(30,"sup"),N.Vb(),N.Wb(31,"td"),N.Rb(32,"app-input-text",8),N.Vb(),N.Vb(),N.Wb(33,"tr"),N.Wb(34,"th",4),N.Pc(35,"City Name(KO)"),N.Rb(36,"sup"),N.Vb(),N.Wb(37,"td"),N.Rb(38,"app-input-text",9),N.Vb(),N.Vb(),N.Wb(39,"tr"),N.Wb(40,"th",4),N.Pc(41,"City Name(JA)"),N.Vb(),N.Wb(42,"td"),N.Rb(43,"app-input-text",10),N.Vb(),N.Vb(),N.Wb(44,"tr"),N.Wb(45,"th",4),N.Pc(46,"City Name(VI)"),N.Vb(),N.Wb(47,"td"),N.Rb(48,"app-input-text",11),N.Vb(),N.Vb(),N.Wb(49,"tr"),N.Wb(50,"th",4),N.Pc(51,"City Name(ZH)"),N.Vb(),N.Wb(52,"td"),N.Rb(53,"app-input-text",12),N.Vb(),N.Vb(),N.Wb(54,"tr"),N.Wb(55,"th",4),N.Pc(56,"City Name Search"),N.Rb(57,"sup"),N.Vb(),N.Wb(58,"td"),N.Rb(59,"app-input-text",13),N.Vb(),N.Vb(),N.Wb(60,"tr"),N.Wb(61,"th",4),N.Pc(62,"Time Zone Name"),N.Vb(),N.Wb(63,"td"),N.Rb(64,"app-input-text",14),N.Vb(),N.Vb(),N.Wb(65,"tr"),N.Wb(66,"th",4),N.Pc(67,"IATA City Code"),N.Vb(),N.Wb(68,"td"),N.Rb(69,"app-input-text",15),N.Vb(),N.Vb(),N.Wb(70,"tr"),N.Wb(71,"th",4),N.Pc(72,"Latitude"),N.Vb(),N.Wb(73,"td"),N.Rb(74,"app-input-text",16),N.Vb(),N.Vb(),N.Wb(75,"tr"),N.Wb(76,"th",4),N.Pc(77,"Longitude"),N.Vb(),N.Wb(78,"td"),N.Rb(79,"app-input-text",17),N.Vb(),N.Vb(),N.Wb(80,"tr"),N.Wb(81,"th",4),N.Pc(82,"Zoom Level"),N.Vb(),N.Wb(83,"td"),N.Rb(84,"app-input-text",18),N.Vb(),N.Vb(),N.Wb(85,"tr"),N.Wb(86,"th",4),N.Pc(87,"Display Order"),N.Rb(88,"sup"),N.Vb(),N.Wb(89,"td"),N.Rb(90,"app-input-text",19),N.Vb(),N.Vb(),N.Wb(91,"tr"),N.Wb(92,"th",4),N.Pc(93,"Control Remark"),N.Vb(),N.Wb(94,"td"),N.Rb(95,"app-input-text",20),N.Vb(),N.Vb(),N.Vb(),N.Vb(),N.Vb(),N.Wb(96,"div",21),N.Wb(97,"button",22),N.Pc(98,"Save"),N.Vb(),N.Wb(99,"button",23),N.fc("click",(function(){return e.onClose()})),N.Pc(100,"Close"),N.Vb(),N.Vb(),N.Vb(),N.Vb()),2&t&&(N.Cb(1),N.pc("formGroup",e.upsertForm)("connectForm",e.upsertFormData),N.Cb(14),N.pc("inputFieldValue",e.rowItem?"["+e.rowItem.countryCode+"] "+e.rowItem.countryNameLn:null)("apiCondition",N.tc(16,At))("apiSearchTerm","keyword")("inputFieldFormatKeyList",N.tc(17,Tt))("isInvalid",e.checkIsInvalid("countryCode")),N.Cb(11),N.pc("options",e.displayStateList)("disabled",e.disableDisplayState()),N.Cb(6),N.pc("isInvalid",e.checkIsInvalid("cityNameEn")),N.Cb(6),N.pc("isInvalid",e.checkIsInvalid("cityNameKo")),N.Cb(5),N.pc("isInvalid",e.checkIsInvalid("cityNameJa")),N.Cb(5),N.pc("isInvalid",e.checkIsInvalid("cityNameVi")),N.Cb(5),N.pc("isInvalid",e.checkIsInvalid("cityNameZh")),N.Cb(6),N.pc("isInvalid",e.checkIsInvalid("cityNameSearch")),N.Cb(31),N.pc("isInvalid",e.checkIsInvalid("displayOrder")))},directives:[s.B,s.s,s.k,Pt.a,gt.a,s.r,s.i,wt.a,xt.a],encapsulation:2,changeDetection:0}),t})();function Bt(t,e){if(1&t&&(N.Wb(0,"div"),N.Pc(1),N.Vb()),2&t){const t=e.$implicit;N.Db("title",t.cityNameSearch),N.Cb(1),N.Qc(t.cityNameSearch)}}function Ut(t,e){1&t&&(N.Wb(0,"span"),N.Pc(1,"Y"),N.Vb())}function Ht(t,e){1&t&&(N.Wb(0,"span"),N.Pc(1,"N"),N.Vb())}function Gt(t,e){if(1&t&&(N.Nc(0,Ut,2,0,"span",10),N.Nc(1,Ht,2,0,"span",10)),2&t){const t=e.$implicit;N.pc("ngIf",!0===t.hotelSearchYn),N.Cb(1),N.pc("ngIf",!1===t.hotelSearchYn)}}function Kt(t,e){1&t&&(N.Wb(0,"span"),N.Pc(1,"Y"),N.Vb())}function Qt(t,e){1&t&&(N.Wb(0,"span"),N.Pc(1,"N"),N.Vb())}function Zt(t,e){if(1&t&&(N.Nc(0,Kt,2,0,"span",10),N.Nc(1,Qt,2,0,"span",10)),2&t){const t=e.$implicit;N.pc("ngIf",!0===t.rentSearchYn),N.Cb(1),N.pc("ngIf",!1===t.rentSearchYn)}}function Jt(t,e){1&t&&(N.Wb(0,"span"),N.Pc(1,"Y"),N.Vb())}function Xt(t,e){1&t&&(N.Wb(0,"span"),N.Pc(1,"N"),N.Vb())}function qt(t,e){if(1&t&&(N.Nc(0,Jt,2,0,"span",10),N.Nc(1,Xt,2,0,"span",10)),2&t){const t=e.$implicit;N.pc("ngIf",!0===t.activitySearchYn),N.Cb(1),N.pc("ngIf",!1===t.activitySearchYn)}}function Mt(t,e){if(1&t){const t=N.Xb();N.Wb(0,"app-bs-city-code-form",11),N.fc("submitEvent",(function(e){return N.Fc(t),N.hc().submitUpsertHandler(e)}))("closeEvent",(function(){return N.Fc(t),N.hc().closeUpsertHandler()})),N.ic(1,"async"),N.ic(2,"async"),N.Vb()}if(2&t){const t=N.hc();N.pc("stateList",N.jc(1,2,t.stateList$))("rowItem",N.jc(2,4,t.selectedItem$))}}const te=function(t,e,i,n){return{cityNameSearchTpl:t,hotelSearchYnTpl:e,rentSearchYnTpl:i,activitySearchYnTpl:n}};let ee=(()=>{class t{constructor(t,e,i,n,c,s){this.store=t,this.authStore=e,this._dataService=i,this._disPlayOrder=n,this.UserConditionService=c,this.alertService=s,this.unsubscribe$=new L.a,this.clickDisPlayOrderEvent=new N.n,this.loading$=t.pipe(Object(o.u)(ct)),this.reloadToggle$=t.pipe(Object(o.u)(st)),this.stateList$=t.pipe(Object(o.u)(at)),this.searchCondition$=t.pipe(Object(o.u)(ot)),this.otherSearchInfo$=t.pipe(Object(o.u)(rt)),this.gridDataList$=t.pipe(Object(o.u)(bt)),this.listPageSize$=t.pipe(Object(o.u)(lt)),this.loginUserNo$=e.pipe(Object(o.u)(Ct.t)),this.isOpenDetailPopup$=t.pipe(Object(o.u)(ut)),this.selectedItem$=t.pipe(Object(o.u)(dt)),this.gridCheckedRowids$=t.pipe(Object(o.u)(pt)),this.gridState$=t.pipe(Object(o.u)(ht)),this.gridCheckedState$=t.pipe(Object(o.u)(mt)),this.columns=this._dataService.generateGridColumns(),this.storeId$=e.pipe(Object(o.u)(Ct.o)),this._initSubscription()}ngOnInit(){this.storeId$.subscribe(t=>this._storeId=t),this.initSearchCondition(),this.store.dispatch(n.loadStateList({condition:{}}))}ngOnDestroy(){this.store.dispatch(n.initList()),this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(n.setGridCheckRowidsAction({rowids:this.gridEl.checkedRows})),this.store.dispatch(n.setGridStateAction({gridState:this.gridEl.thisGridState})),this.store.dispatch(n.setGridCheckedStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}changePageSizeHandler(t){this.store.dispatch(n.changePageSize({pageSize:t}))}clickAddHandler(){this.store.dispatch(n.openDetailPopup())}clickDelHandler(t){const{rowids:e,hotelRowids:i}=t;this.store.dispatch(n.removeSelectedGridEntities({rowids:e,hotelRowids:i}))}clickSearchHandler({searchCondition:t,otherSearchInfo:e}){const i=this._setSearchCondition(t);this.store.dispatch(n.loadList({condition:i})),this.store.dispatch(n.changeSearchCondition({searchCondition:t,otherSearchInfo:e})),this.UserConditionService.setSearchSettingSessionStorage(i,this._storeId,e)}clickResetHandler(){this.store.dispatch(n.changeSearchCondition({searchCondition:this._dataService.initListSearch(),otherSearchInfo:null})),this.UserConditionService.setSearchSettingSessionStorage(this._dataService.initListSearch(),this._storeId,null)}dbClickRowHandler(t){this.store.dispatch(n.addSelectedDetailRowInfo({selectedDetailRowInfo:P.cloneDeep(t)})),this.clickAddHandler()}submitUpsertHandler(t){const{condition:e}=t;this.store.dispatch(n.upsertItem({upsertCondition:e}))}closeUpsertHandler(){this.store.dispatch(n.closeDetailPopup()),this.store.dispatch(n.delSelectedDetailRowInfo())}_initSubscription(){this.reloadToggle$.pipe(Object(k.a)(1),Object(V.a)(this.unsubscribe$)).subscribe(()=>{this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()})}_setSearchCondition(t){return P.omitBy(t,t=>P.isNil(t)||""===t)}initSearchCondition(){this.searchCondition$.subscribe(t=>this._searchCondition=t),this.gridDataList$.subscribe(t=>this._searchGridDataList=t),this.otherSearchInfo$.subscribe(t=>this._otherSearchInfo=t);const t=this._setSearchCondition(this._searchCondition);if(0===P.size(t)&&0===P.size(this._searchGridDataList)){const t=this._dataService.initListSearch(),e=this.UserConditionService.selectSearchSetting(t,this._storeId,this._otherSearchInfo),i=e[0],c=e[1];0!=P.size(P.omitBy(i,P.isNil))&&this.store.dispatch(n.changeSearchCondition({searchCondition:i,otherSearchInfo:c}))}}}return t.\u0275fac=function(e){return new(e||t)(N.Qb(o.h),N.Qb(o.h),N.Qb(kt),N.Qb(Rt.a),N.Qb(_t.a),N.Qb(Vt.a))},t.\u0275cmp=N.Kb({type:t,selectors:[["app-bs-city-code"]],viewQuery:function(t,e){var i;1&t&&(N.Xc(Dt,!0),N.Xc(Ft.a,!0)),2&t&&(N.Dc(i=N.gc())&&(e.searchFormEl=i.first),N.Dc(i=N.gc())&&(e.gridEl=i.first))},outputs:{clickDisPlayOrderEvent:"clickDisPlayOrderEvent"},decls:27,vars:48,consts:[[3,"stateList","searchCondition","otherSearchInfo","clickSearchEvent","clickResetEvent"],[3,"loading","currentPageSize","totalCount","clickAddEvent","clickDelEvent","changePageSizeEvent"],["cityNameSearchTpl",""],["hotelSearchYnTpl",""],["rentSearchYnTpl",""],["activitySearchYnTpl",""],["defaultSortOrder","asc",3,"gridLoading","gridState","checkedState","columns","pageSize","checkboxUseYn","dataList","templates","dbClickRowEvent"],["gridBasis",""],["modalSize","sm","modalContentClass","pd-all","header","City Code Info",3,"visible","modal","visibleChange"],[3,"stateList","rowItem","submitEvent","closeEvent",4,"ngIf"],[4,"ngIf"],[3,"stateList","rowItem","submitEvent","closeEvent"]],template:function(t,e){if(1&t&&(N.Wb(0,"app-bs-city-code-search",0),N.fc("clickSearchEvent",(function(t){return e.clickSearchHandler(t)}))("clickResetEvent",(function(){return e.clickResetHandler()})),N.ic(1,"async"),N.ic(2,"async"),N.ic(3,"async"),N.Vb(),N.Wb(4,"app-bs-city-code-control",1),N.fc("clickAddEvent",(function(){return e.clickAddHandler()}))("clickDelEvent",(function(t){return e.clickDelHandler(t)}))("changePageSizeEvent",(function(t){return e.changePageSizeHandler(t)})),N.ic(5,"async"),N.ic(6,"async"),N.ic(7,"async"),N.Vb(),N.Nc(8,Bt,2,2,"ng-template",null,2,N.Oc),N.Nc(10,Gt,2,2,"ng-template",null,3,N.Oc),N.Nc(12,Zt,2,2,"ng-template",null,4,N.Oc),N.Nc(14,qt,2,2,"ng-template",null,5,N.Oc),N.Wb(16,"app-grid-basis",6,7),N.fc("dbClickRowEvent",(function(t){return e.dbClickRowHandler(t)})),N.ic(18,"async"),N.ic(19,"async"),N.ic(20,"async"),N.ic(21,"async"),N.ic(22,"async"),N.Vb(),N.Wb(23,"app-dialog",8),N.fc("visibleChange",(function(){return e.closeUpsertHandler()})),N.ic(24,"async"),N.Nc(25,Mt,3,6,"app-bs-city-code-form",9),N.ic(26,"async"),N.Vb()),2&t){const t=N.Ec(9),i=N.Ec(11),n=N.Ec(13),c=N.Ec(15);N.pc("stateList",N.jc(1,17,e.stateList$))("searchCondition",N.jc(2,19,e.searchCondition$))("otherSearchInfo",N.jc(3,21,e.otherSearchInfo$)),N.Cb(4),N.pc("loading",N.jc(5,23,e.loading$))("currentPageSize",N.jc(6,25,e.listPageSize$))("totalCount",N.jc(7,27,e.gridDataList$).length),N.Cb(12),N.pc("gridLoading",N.jc(18,29,e.loading$))("gridState",N.jc(19,31,e.gridState$))("checkedState",N.jc(20,33,e.gridCheckedState$))("columns",e.columns)("pageSize",N.jc(21,35,e.listPageSize$))("checkboxUseYn",!1)("dataList",N.jc(22,37,e.gridDataList$))("templates",N.xc(43,te,t,i,n,c)),N.Cb(7),N.pc("visible",N.jc(24,39,e.isOpenDetailPopup$))("modal",!0),N.Cb(2),N.pc("ngIf",N.jc(26,41,e.isOpenDetailPopup$))}},directives:[Dt,$t,Ft.a,zt.a,c.o,Yt],pipes:[c.b],encapsulation:2,changeDetection:0}),t})();const ie=[{path:"",component:ee,data:{title:"\ub3c4\uc2dc\ucf54\ub4dc"}}];let ne=(()=>{class t{}return t.\u0275mod=N.Ob({type:t}),t.\u0275inj=N.Nb({factory:function(e){return new(e||t)},imports:[[I.f.forChild(ie)],I.f]}),t})();var ce=i("lJxs"),se=i("JIr8"),ae=i("vkgz"),oe=i("bOdf"),re=i("zp1y"),le=i("Xb6A"),de=i("AtUx");let ue=(()=>{class t{constructor(t,e,i,c,s,r){this.actions$=t,this.service=e,this._errorService=i,this.loader=c,this.alertService=s,this.store=r,this.loadList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadList),Object(St.a)(({condition:t})=>this.service.getList(t).pipe(Object(ce.a)(t=>n.getListSuccess({dataList:t})),Object(se.a)(t=>{const e="List lookup failed. Please try again in a momentarily.",i=[n.getListFailure({error:e})];return this._catchErr(t,e,i),[]}))))),this.upsertItem$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.upsertItem),Object(St.a)(({upsertCondition:t})=>this.service.upsertItem(t).pipe(Object(ce.a)(t=>({succeedYn:!0,upsertItem:t})),Object(se.a)(t=>Object(ft.a)({succeedYn:!1,error:t})))),Object(ae.a)(({succeedYn:t,error:e,upsertItem:i})=>{if(t){const t="Your data has been saved.",e=[n.reloadList(),n.closeDetailPopup(),n.delSelectedDetailRowInfo(),n.upsertItemSuccess(i)];this._runPage(t,e)}else{const t="Failed to save.",i=[n.upsertItemFailure({error:t})];this._catchErr(e,t,i)}})),{dispatch:!1}),this.loadStateList$=Object(a.c)(()=>this.actions$.pipe(Object(a.d)(n.loadStateList),Object(oe.a)(t=>Object(ft.a)(t).pipe(Object(re.a)(this.stateList$))),Object(St.a)(([t,e])=>P.isEmpty(e)?this.service.getStateList(t.condition).pipe(Object(ce.a)(t=>n.getStateListSuccess({dataList:t})),Object(se.a)(t=>{const e="List lookup failed.",i=[n.getStateListFailure({error:e})];return this._catchErr(t,e,i),[]})):[]))),this.stateList$=r.pipe(Object(o.u)(at))}_runPage(t,e){this.alertService.alert({message:t,accept:(null==e?void 0:e.length)>0?()=>{e.forEach(t=>{this.store.dispatch(t)})}:()=>{}})}_catchErr(t,e,i){const n=this._errorService.errorHandler(t,e);P.isNil(n)||(P.isNil(n.accept)&&(n.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(t=>{this.store.dispatch(t)})}:()=>{}),this.alertService.alert(n))}}return t.\u0275fac=function(e){return new(e||t)(N.bc(a.a),N.bc(Nt),N.bc(le.a),N.bc(de.a),N.bc(Vt.a),N.bc(o.h))},t.\u0275prov=N.Mb({token:t,factory:t.\u0275fac}),t})();const be=[ee],he=[$t,Yt,Dt];let pe=(()=>{class t{}return t.\u0275mod=N.Ob({type:t}),t.\u0275inj=N.Nb({factory:function(e){return new(e||t)},imports:[[c.c,s.m,s.w,r.m,l.a,d.a,u.a,y.a,b.a,h.a,p.a,m.a,C.a,g.a,f.a,v.a,S.a,j.a,O.a,ne,o.j.forFeature("bsCityCode",et),a.b.forFeature([ue])]]}),t})()}}]);