(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{htEk:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var s=i("ofXK"),c=i("3Pt+"),n=i("WG3B"),a=i("wPo9"),o=i("7rOj"),r=i("l1P7"),l=i("fXoL");let p=(()=>{class e{}return e.\u0275mod=l.Ob({type:e}),e.\u0275inj=l.Nb({factory:function(t){return new(t||e)},imports:[[s.c,c.m,c.w,n.m,a.a,o.a,r.a]]}),e})()},"o+sh":function(e,t,i){"use strict";i.r(t),i.d(t,"CONTAINERS",(function(){return ys})),i.d(t,"COMPONENTS",(function(){return Ds})),i.d(t,"FlSalesReportModule",(function(){return Ts}));var s={};i.r(s),i.d(s,"loadUserCompBasis",(function(){return B})),i.d(s,"loadUserCompBasisSuccess",(function(){return U})),i.d(s,"loadUserCompBasisFailure",(function(){return Y})),i.d(s,"changePageIndex",(function(){return G})),i.d(s,"setGridStateAction",(function(){return H})),i.d(s,"changeSearchConditionAction",(function(){return z})),i.d(s,"setDeptList",(function(){return Q}));var c={};i.r(c),i.d(c,"initThisState",(function(){return de})),i.d(c,"changeSearchCondition",(function(){return ue})),i.d(c,"loadList",(function(){return be})),i.d(c,"getListSuccess",(function(){return he})),i.d(c,"getListFailure",(function(){return me})),i.d(c,"changePageSize",(function(){return ge})),i.d(c,"changePageIndex",(function(){return fe})),i.d(c,"setGridStateAction",(function(){return Oe})),i.d(c,"setGridCheckStateAction",(function(){return Ce})),i.d(c,"mapDsr",(function(){return Se})),i.d(c,"mapDsrSuccess",(function(){return je}));var n={};i.r(n),i.d(n,"initComponent",(function(){return Ke})),i.d(n,"loadDateRangeTypeList",(function(){return Xe})),i.d(n,"getDateRangeTypeListSuccessAction",(function(){return qe})),i.d(n,"loadStationList",(function(){return Je})),i.d(n,"getStationListSuccess",(function(){return Ze})),i.d(n,"loadBillingTypeList",(function(){return et})),i.d(n,"getBillingTypeListSuccess",(function(){return tt})),i.d(n,"loadEtEmdOtherTypeList",(function(){return it})),i.d(n,"getEtEmdOtherTypeListSuccess",(function(){return st})),i.d(n,"loadGdsCompList",(function(){return ct})),i.d(n,"getGdsCompListSuccess",(function(){return nt})),i.d(n,"loadControlBranchTypeList",(function(){return at})),i.d(n,"getControlBranchTypeListSuccess",(function(){return ot})),i.d(n,"loadTicketVoidTypeList",(function(){return rt})),i.d(n,"getTicketVoidTypeListSuccess",(function(){return lt})),i.d(n,"loadFopCodeList",(function(){return pt})),i.d(n,"getFopCodeListSuccess",(function(){return dt})),i.d(n,"loadAffiliateCompList",(function(){return ut})),i.d(n,"getAffiliateCompListSuccess",(function(){return bt})),i.d(n,"loadCheckItemList",(function(){return ht})),i.d(n,"getCheckItemListSuccess",(function(){return mt})),i.d(n,"loadUploadFileTypeListAction",(function(){return gt})),i.d(n,"getUploadFileTypeListSuccessAction",(function(){return ft})),i.d(n,"changeSearchCondition",(function(){return Ot})),i.d(n,"changeSelectedDeptList",(function(){return Ct})),i.d(n,"reloadList",(function(){return St})),i.d(n,"loadList",(function(){return jt})),i.d(n,"getListSuccess",(function(){return kt})),i.d(n,"getListFailure",(function(){return vt})),i.d(n,"setGridStateAction",(function(){return Lt})),i.d(n,"setGridCheckStateAction",(function(){return yt})),i.d(n,"changePageIndex",(function(){return Dt})),i.d(n,"changePageSize",(function(){return Tt})),i.d(n,"openDeptSelectPopup",(function(){return Et})),i.d(n,"closeDeptSelectPopup",(function(){return Rt})),i.d(n,"openDsrBookingMappingPopup",(function(){return Ft})),i.d(n,"closeDsrBookingMappingPopup",(function(){return Pt})),i.d(n,"openDsrUploadPopup",(function(){return It})),i.d(n,"closeDsrUploadPopup",(function(){return Vt})),i.d(n,"closeCommitOrCancel",(function(){return Nt})),i.d(n,"bundleCloseCommitOrCancel",(function(){return $t})),i.d(n,"getDsrMappingListSuccess",(function(){return wt})),i.d(n,"getDsrMappingListFailure",(function(){return _t})),i.d(n,"loadDsrMappingList",(function(){return xt})),i.d(n,"uploadDsr",(function(){return Wt})),i.d(n,"openRemarkPopup",(function(){return At})),i.d(n,"closeRemarkPopup",(function(){return Mt})),i.d(n,"saveRemark",(function(){return Bt})),i.d(n,"saveRemarkSuccess",(function(){return Ut})),i.d(n,"saveRemarkFailure",(function(){return Yt})),i.d(n,"addSalesInfo",(function(){return Gt})),i.d(n,"delSalesInfo",(function(){return Ht})),i.d(n,"salesSlip",(function(){return zt})),i.d(n,"salesSlipSuccess",(function(){return Qt})),i.d(n,"salesSlipAll",(function(){return Kt})),i.d(n,"salesSlipAllSuccess",(function(){return Xt})),i.d(n,"chorusSlip",(function(){return qt})),i.d(n,"chorusSlipSuccess",(function(){return Jt})),i.d(n,"chorusSlipAll",(function(){return Zt})),i.d(n,"chorusSlipAllSuccess",(function(){return ei}));var a=i("ofXK"),o=i("3Pt+"),r=i("snw9"),l=i("kt0X"),p=i("WG3B"),d=i("xoAz"),u=i("wPo9"),b=i("7rOj"),h=i("+NQf"),m=i("6LsY"),g=i("l1P7"),f=i("v7zA"),O=i("7UZF"),C=i("hHe4"),S=i("1OXJ"),j=i("5hwk"),k=i("w8np"),v=i("kKjH"),L=i("qXPF"),y=i("htEk"),D=i("vu/V"),T=i("fXoL"),E=i("LvDl"),R=i("LRne"),F=i("z6cu"),P=i("eIep"),I=i("AytR");const{API_URL:V}=I.a,N={postUserCompBasis:`${V}/admin/user/comp/basis`};var $=i("tpT/");let w=(()=>{class e{constructor(e){this.api=e}getDeptList(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.post(N.postUserCompBasis,t).pipe(Object(P.a)(e=>e.succeedYn?Object(R.a)(e.result):Object(F.a)("api response error")))}}return e.\u0275fac=function(t){return new(t||e)(T.bc($.a))},e.\u0275prov=T.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _=i("+Sob"),x=i("gbCm"),W=i("pb6r"),A=i("XNiG"),M=i("itXk");const B=Object(l.o)("[DeptSelectModal] load dept select type",Object(l.t)()),U=Object(l.o)("[DeptSelectModal] load dept select type success",Object(l.t)()),Y=Object(l.o)("[DeptSelectModal] load dept select type failure",Object(l.t)()),G=Object(l.o)("[DeptSelectModal] change page index",Object(l.t)()),H=Object(l.o)("[DeptSelectModal] set grid state",Object(l.t)()),z=Object(l.o)("[DeptSelectModal] change search condition",Object(l.t)()),Q=Object(l.o)("[DeptSelectModal] load dept select type success",Object(l.t)()),K=Object(l.q)({loading:!1,totalCount:null,searchCondition:{compCode:11e4,compBasisCodeType:"COB01"},deptList:null,gridState:{pageInfo:{skip:0,take:20},sortInfo:[{field:"lastUpdateDatetime",dir:"desc"}]},gridCheckedState:null},Object(l.s)(s.loadUserCompBasis,e=>Object.assign(Object.assign({},e),{loading:!0})),Object(l.s)(s.loadUserCompBasisSuccess,(e,{list:t,totalCount:i})=>Object.assign(Object.assign({},e),{deptList:t,totalCount:i,loading:!1})),Object(l.s)(s.loadUserCompBasisFailure,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(l.s)(s.changeSearchConditionAction,(e,{searchCondition:t})=>Object.assign(Object.assign({},e),{searchCondition:t})),Object(l.s)(s.setGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{gridState:t})),Object(l.s)(s.changePageIndex,(e,{pageIndex:t})=>Object.assign(Object.assign({},e),{gridState:E.set(E.cloneDeep(e.gridState),["pageInfo","skip"],t)})),Object(l.s)(s.setDeptList,(e,{list:t})=>Object.assign(Object.assign({},e),{deptList:t,totalCount:t.length})));function X(e,t){return Object(l.m)({main:K})(e,t)}const q=Object(l.p)("deptSelectModal"),J=Object(l.r)(q,e=>e.main);Object(l.r)(J,e=>e.loading),Object(l.r)(J,e=>e.deptList),Object(l.r)(J,e=>e.totalCount),Object(l.r)(J,e=>e.searchCondition),Object(l.r)(J,e=>e.gridState),Object(l.r)(J,e=>e.gridCheckedState);var Z=i("zP0r"),ee=i("Kj3r"),te=i("pLZG"),ie=i("1G5W"),se=i("UIHd"),ce=i("JIr8"),ne=i("Xb6A"),ae=i("EsKh");let oe=(()=>{class e{constructor(e,t,i,c,n){this._actions$=e,this._apiService=t,this._errorService=i,this._store$=c,this.alertService=n,this.loadUserCompBasis$=Object(r.c)(()=>this._actions$.pipe(Object(r.d)(s.loadUserCompBasis),Object(P.a)(({condition:e})=>this._apiService.getDeptList(e).pipe(Object(P.a)(({list:e,totalCount:t})=>[s.loadUserCompBasisSuccess({list:e,totalCount:t})]),Object(ce.a)(e=>{const t="\uc561\ud2f0\ube44\ud2f0 \uc0c1\ud488\ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.",i=[s.loadUserCompBasisFailure({error:t})];return this._catchErr(e,t,i),[]})))))}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this._store$.dispatch(e)})}:()=>{}})}_catchErr(e,t,i){const s=this._errorService.errorHandler(e,t);E.isNil(s)||(E.isNil(s.accept)&&(s.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(e=>{this._store$.dispatch(e)})}:()=>{}),this.alertService.alert(s))}}return e.\u0275fac=function(t){return new(t||e)(T.bc(r.a),T.bc(w),T.bc(ne.a),T.bc(l.h),T.bc(ae.a))},e.\u0275prov=T.Mb({token:e,factory:e.\u0275fac}),e})(),re=(()=>{class e{}return e.\u0275mod=T.Ob({type:e}),e.\u0275inj=T.Nb({factory:function(t){return new(t||e)},imports:[[a.c,o.m,o.w,d.a,m.a,f.a,g.a,k.a,D.a,l.j.forFeature("deptSelectModal",X),r.b.forFeature([oe])]]}),e})();var le=i("65ZF"),pe=i("VpzQ");const de=Object(l.o)("[SharedPagesDsrMapping] init component state"),ue=Object(l.o)("[SharedPagesDsrMapping] change search condition",Object(l.t)()),be=Object(l.o)("[SharedPagesDsrMapping] load dept data list",Object(l.t)()),he=Object(l.o)("[SharedPagesDsrMapping] get dept list success",Object(l.t)()),me=Object(l.o)("[SharedPagesDsrMapping] get dept list failure",Object(l.t)()),ge=Object(l.o)("[SharedPagesDsrMapping] change page size",Object(l.t)()),fe=Object(l.o)("[SharedPagesDsrMapping] change page index",Object(l.t)()),Oe=Object(l.o)("[SharedPagesDsrMapping] set dept grid state",Object(l.t)()),Ce=Object(l.o)("[SharedPagesDsrMapping] set dept grid checked rowids",Object(l.t)()),Se=Object(l.o)("[SharedPagesDsrMapping] map dsr",Object(l.t)()),je=Object(l.o)("[SharedPagesDsrMapping] map dsr success",Object(l.t)());var ke=i("EVqC");const ve=Object(ke.a)({selectId:e=>e.id,sortComparer:!1}),Le=ve.getInitialState({loading:null,searchCondition:null,gridState:{pageInfo:{skip:0,take:40},sortInfo:[]},gridDataTotal:null,gridCheckedState:null,mapSuccessYn:null}),ye=Object(l.q)(Le,Object(l.s)(c.initThisState,e=>ve.removeAll(E.cloneDeep(Le))),Object(l.s)(c.changeSearchCondition,(e,{searchCondition:t})=>Object.assign(Object.assign({},e),{searchCondition:t})),Object(l.s)(c.loadList,e=>Object.assign(Object.assign({},e),{loading:!0})),Object(l.s)(c.getListSuccess,(e,{dataList:t,totalCount:i})=>ve.setAll(t,Object.assign(Object.assign({},e),{loading:!1,gridDataTotal:i}))),Object(l.s)(c.getListFailure,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(l.s)(c.changePageSize,(e,{pageSize:t})=>Object.assign(Object.assign({},e),{gridState:E.set(E.cloneDeep(e.gridState),["pageInfo","take"],t)})),Object(l.s)(c.changePageIndex,(e,{pageIndex:t})=>Object.assign(Object.assign({},e),{gridState:E.set(E.cloneDeep(e.gridState),["pageInfo","skip"],t)})),Object(l.s)(c.setGridCheckStateAction,(e,{gridCheckedState:t})=>Object.assign(Object.assign({},e),{gridCheckedState:t})),Object(l.s)(c.setGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{gridState:t})),Object(l.s)(c.mapDsrSuccess,(e,{})=>Object.assign(Object.assign({},e),{mapSuccessYn:!0})));function De(e,t){return Object(l.m)({dsrMappingList:ye})(e,t)}const Te=Object(l.p)("dsrMapping"),Ee=Object(l.r)(Te,e=>e.dsrMappingList),Re=e=>Object(l.r)(Ee,e),Fe=Re(e=>e.loading),Pe=Re(e=>e.searchCondition),Ie=ve.getSelectors(Ee).selectAll,Ve=Re(e=>e.gridCheckedState),Ne=Re(e=>e.gridState),$e=Re(e=>e.gridDataTotal),we=(Object(l.r)(Ne,e=>E.get(e,["pageInfo","take"],20)),Re(e=>e.mapSuccessYn)),{API_URL:_e}=I.a,xe={postBookingList:`${_e}/admin/booking/flight/dsr-mapping`,putDsrMapping:`${_e}/admin/booking/flight/dsr-mapping`};let We=(()=>{class e{constructor(e){this.api=e}getList(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.post(xe.postBookingList,t).pipe(Object(P.a)(e=>{var t,i;if(e.succeedYn&&e.result){const s=(null===(t=e.result.list)||void 0===t?void 0:t.length)>0?e.result.list.map((e,t)=>Object.assign({id:e.rowid||t.toString(),rowid:e.rowid||t.toString()},e)):[];return Object(R.a)({dataList:s,totalCount:(null===(i=e.result.list)||void 0===i?void 0:i.length)||0})}return Object(F.a)(e||"api response error")}))}putMapping(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.put(xe.putDsrMapping,t).pipe(Object(P.a)(e=>e.succeedYn&&e.result?Object(R.a)(e.result):Object(F.a)(e||"api response error")))}}return e.\u0275fac=function(t){return new(t||e)(T.bc($.a))},e.\u0275prov=T.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ae=(()=>{class e{constructor(e){this.fb=e,this.generateSearchForm=()=>this.fb.group({bookingItemCode:[null,[o.z.required]]}),this.initSearchForm=()=>({bookingItemCode:null})}}return e.\u0275fac=function(t){return new(t||e)(T.bc(o.f))},e.\u0275prov=T.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Me=(()=>{class e{constructor(e){this._dataService=e,this.clickSearchEvent=new T.n,this.unsubscribe$=new A.a,this.searchForm=this._dataService.generateSearchForm(),this._initSubscription()}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}get formValue(){return this.searchForm&&this.searchForm.value}ngOnInit(){}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onSubmit(){if(this.searchForm.invalid)return void(this._checkValid=!0);const e=this.setSearchCondition();this.clickSearchEvent.emit({searchCondition:e}),this._checkValid=!1}checkIsInvalid(e){return this._checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}setSearchCondition(){return E.omitBy(Object.assign({},this.searchForm.value),E.isNil)}_initState(){}_setSearchFormData(e){const t=this._dataService.initSearchForm();return E.isEmpty(e)?t:e}_initSubscription(){}}return e.\u0275fac=function(t){return new(t||e)(T.Qb(Ae))},e.\u0275cmp=T.Kb({type:e,selectors:[["app-dsr-mapping-search"]],inputs:{searchCondition:"searchCondition"},outputs:{clickSearchEvent:"clickSearchEvent"},decls:10,vars:4,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],[1,"col-2"],[1,"form-label"],["formControlName","bookingItemCode","placeholder","\ucf54\ub4dc \uc785\ub825",1,"d-inline-flex","flex-fill",3,"isInvalid"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"]],template:function(e,t){1&e&&(T.Wb(0,"form",0),T.fc("ngSubmit",(function(){return t.onSubmit()})),T.Wb(1,"div",1),T.Wb(2,"div",2),T.Wb(3,"div",3),T.Wb(4,"span",4),T.Pc(5,"\uc608\uc57d\ucf54\ub4dc"),T.Vb(),T.Rb(6,"app-input-text",5),T.Vb(),T.Vb(),T.Vb(),T.Wb(7,"div",6),T.Wb(8,"button",7),T.Pc(9,"\uac80\uc0c9"),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),T.Cb(6),T.pc("isInvalid",t.checkIsInvalid("bookingItemCode"))("isInvalid",t.checkIsInvalid("bookingItemCode")))},directives:[o.B,o.s,o.k,_.a,x.a,o.r,o.i],encapsulation:2,changeDetection:0}),e})();function Be(e,t){if(1&e){const e=T.Xb();T.Wb(0,"tr"),T.Wb(1,"td",5),T.Wb(2,"app-checkbox",6),T.fc("ngModelChange",(function(t){return T.Fc(e),T.hc().checkedRows=t})),T.Vb(),T.Vb(),T.Wb(3,"td",5),T.Pc(4),T.Vb(),T.Wb(5,"td",5),T.Pc(6),T.Vb(),T.Wb(7,"td",5),T.Pc(8),T.Vb(),T.Wb(9,"td",7),T.Pc(10),T.ic(11,"number"),T.Vb(),T.Vb()}if(2&e){const e=t.$implicit,i=t.index,s=T.hc();T.Cb(2),T.pc("value",i)("ngModel",s.checkedRows),T.Cb(2),T.Qc(e.gdsSubPnr),T.Cb(2),T.Tc("",e.lastName," ",e.firstName," ",e.paxTitle,""),T.Cb(2),T.Qc(e.ticketNo),T.Cb(2),T.Qc(T.jc(11,8,e.ticketingNetAmount))}}let Ue=(()=>{class e{constructor(){this.clickSearchEvent=new T.n}get checkedDataList(){return E.isEmpty(this.checkedRows)?null:this.targetTicketList.filter((e,t)=>this.checkedRows.indexOf(t)>-1)}ngOnInit(){}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=T.Kb({type:e,selectors:[["app-dsr-mapping-tickets"]],inputs:{targetTicketList:"targetTicketList"},outputs:{clickSearchEvent:"clickSearchEvent"},decls:26,vars:1,consts:[[1,"page-item-header"],[1,"title"],[1,"table","table-bordered","table-responsive"],["scope","col",1,"align-c"],[4,"ngFor","ngForOf"],[1,"align-c"],["styleClass","only",3,"value","ngModel","ngModelChange"],[1,"align-r"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"p",1),T.Pc(2,"\uc120\ud0dd\ud55c DSR \ud2f0\ucf13\ubc88\ud638"),T.Vb(),T.Vb(),T.Wb(3,"div",2),T.Wb(4,"table"),T.Wb(5,"caption"),T.Pc(6," DSR \ud2f0\ucf13 "),T.Vb(),T.Wb(7,"colgroup"),T.Rb(8,"col"),T.Rb(9,"col"),T.Rb(10,"col"),T.Rb(11,"col"),T.Rb(12,"col"),T.Vb(),T.Wb(13,"thead"),T.Wb(14,"tr"),T.Rb(15,"th",3),T.Wb(16,"th",3),T.Pc(17,"PNR"),T.Vb(),T.Wb(18,"th",3),T.Pc(19,"\ud0d1\uc2b9\uc790\uba85"),T.Vb(),T.Wb(20,"th",3),T.Pc(21,"\ud2f0\ucf13\ubc88\ud638"),T.Vb(),T.Wb(22,"th",3),T.Pc(23,"\ubc1c\uad8cNET"),T.Vb(),T.Vb(),T.Vb(),T.Wb(24,"tbody"),T.Nc(25,Be,12,10,"tr",4),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Cb(25),T.pc("ngForOf",t.targetTicketList))},directives:[a.n,W.a,o.r,o.u],pipes:[a.f],encapsulation:2,changeDetection:0}),e})(),Ye=(()=>{class e{constructor(e,t){this.store=e,this.alertService=t,this.closeEvent=new T.n,this.columns=[{field:"gdsSubPnr",title:"PNR",width:100},{field:"nameEn",title:"\ud0d1\uc2b9\uc790\uba85"},{field:"bookingFareTypeName",title:"\uc6b4\uc784\uad6c\ubd84",width:100},{field:"ticketingNetAmount",title:"\uc608\uc57d\uc0c1\uc138 \ubc1c\uad8cNET",width:120,format:"currency"}],this.unsubscribe$=new A.a,this.loading$=this.store.pipe(Object(l.u)(Fe)),this.searchCondition$=this.store.pipe(Object(l.u)(Pe)),this.dataList$=this.store.pipe(Object(l.u)(Ie)),this.totalCount$=this.store.pipe(Object(l.u)($e)),this.gridState$=this.store.pipe(Object(l.u)(Ne)),this.gridCheckedState$=this.store.pipe(Object(l.u)(Ve)),this.mapSuccessYn$=this.store.pipe(Object(l.u)(we)),this._initSubscription()}ngOnInit(){}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(c.initThisState()),this.store.dispatch(c.setGridCheckStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}clickSearchHandler({searchCondition:e}){this.store.dispatch(c.changeSearchCondition({searchCondition:e})),this.store.dispatch(c.changePageIndex({pageIndex:0}))}gridStateChangeHandler(e){this.store.dispatch(c.setGridStateAction({gridState:e}))}onMapping(){const e=this.ticketGridEl.checkedDataList;if(E.isEmpty(e))return void this.alertService.alert("\uc120\ud0dd\ub41c \ud2f0\ucf13\ubc88\ud638\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");if(e.length>1)return void this.alertService.alert("\ud2f0\ucf13\ubc88\ud638\ub294 \ud55c\uac1c\ub9cc \uc120\ud0dd \uac00\ub2a5\ud569\ub2c8\ub2e4.");const t=this.gridEl.checkedDataList;if(E.isEmpty(t))return void this.alertService.alert("\uc120\ud0dd\ub41c \uc608\uc57d\ubc88\ud638\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");if(t.length>1)return void this.alertService.alert("\uc608\uc57d\ubc88\ud638\ub294 \ud55c\uac1c\ub9cc \uc120\ud0dd \uac00\ub2a5\ud569\ub2c8\ub2e4.");const{ticketNo:i,ticketingDate:s}=e[0],{bookingItemCode:n,bookingTravelerCode:a,paxFareSeq:o}=t[0];this.store.dispatch(c.mapDsr({condition:{ticketingDate:s,ticketNo:i,bookingItemCode:n,bookingTravelerCode:a,paxFareSeq:o}}))}_initSubscription(){Object(M.a)([this.searchCondition$,this.gridState$]).pipe(Object(Z.a)(1),Object(ee.a)(200),Object(te.a)(([e,t])=>!E.isEmpty(e)),Object(ie.a)(this.unsubscribe$)).subscribe(([e,{sortInfo:t}])=>{this._setSortOrder(t);const i=Object.assign({},e);this.store.dispatch(c.loadList({condition:i}))}),this.mapSuccessYn$.pipe(Object(ie.a)(this.unsubscribe$)).subscribe(e=>{e&&this.alertService.alert({message:"DSR \uc608\uc57d\ub9e4\ud551\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",accept:()=>{this.closeEvent.emit(!0)}})})}_setSortOrder(e){return e.filter(e=>!E.isNil(e.dir)).map(e=>({keyName:e.field,sort:e.dir}))}}return e.\u0275fac=function(t){return new(t||e)(T.Qb(l.h),T.Qb(ae.a))},e.\u0275cmp=T.Kb({type:e,selectors:[["app-dsr-mapping"]],viewQuery:function(e,t){var i;1&e&&(T.Xc(Ue,!0),T.Xc(se.a,!0)),2&e&&(T.Dc(i=T.gc())&&(t.ticketGridEl=i.first),T.Dc(i=T.gc())&&(t.gridEl=i.first))},inputs:{targetTicketList:"targetTicketList"},outputs:{closeEvent:"closeEvent"},decls:19,vars:25,consts:[[1,"modal-body"],[1,"page-item",3,"targetTicketList"],[1,"page-item"],[3,"searchCondition","clickSearchEvent"],[1,"grid-control-area"],[1,"grid-count"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[3,"gridLoading","columns","sortable","checkedState","gridState","totalCount","checkboxUseYn","dataList","stateChangeEvent"],["gridBasis",""]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Rb(1,"app-dsr-mapping-tickets",1),T.Wb(2,"div",2),T.Wb(3,"app-dsr-mapping-search",3),T.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)})),T.ic(4,"async"),T.Vb(),T.Wb(5,"div",4),T.Wb(6,"strong",5),T.Pc(7),T.ic(8,"async"),T.Vb(),T.Wb(9,"div",6),T.Wb(10,"button",7),T.fc("click",(function(){return t.onMapping()})),T.Pc(11,"\ub9e4\ud551"),T.Vb(),T.Vb(),T.Vb(),T.Wb(12,"app-grid-simple",8,9),T.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)})),T.ic(14,"async"),T.ic(15,"async"),T.ic(16,"async"),T.ic(17,"async"),T.ic(18,"async"),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Cb(1),T.pc("targetTicketList",t.targetTicketList),T.Cb(2),T.pc("searchCondition",T.jc(4,11,t.searchCondition$)),T.Cb(4),T.Qc(T.jc(8,13,t.totalCount$)||0),T.Cb(5),T.pc("gridLoading",T.jc(14,15,t.loading$))("columns",t.columns)("sortable",!1)("checkedState",T.jc(15,17,t.gridCheckedState$))("gridState",T.jc(16,19,t.gridState$))("totalCount",T.jc(17,21,t.totalCount$))("checkboxUseYn",!0)("dataList",T.jc(18,23,t.dataList$)))},directives:[Ue,Me,se.a],pipes:[a.b],encapsulation:2,changeDetection:0}),e})();var Ge=i("lJxs");let He=(()=>{class e{constructor(e,t,i,s,n){this.actions$=e,this.service=t,this._errorService=i,this.alertService=s,this.store=n,this.loadList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(c.loadList),Object(P.a)(({condition:e})=>this.service.getList(e).pipe(Object(Ge.a)(({dataList:e,totalCount:t})=>c.getListSuccess({dataList:e,totalCount:t})),Object(ce.a)(e=>{const t="List lookup failed. Please try again in a momentarily.",i=[c.getListFailure({error:t})];return this._catchErr(e,t,i),[]}))))),this.map$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(c.mapDsr),Object(P.a)(({condition:e})=>this.service.putMapping(e).pipe(Object(Ge.a)(e=>c.mapDsrSuccess({dataResult:e})),Object(ce.a)(e=>(this._catchErr(e,"\ub9e4\ud551\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc\ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694."),[]))))))}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this.store.dispatch(e)})}:()=>{}})}_catchErr(e,t,i){const s=this._errorService.errorHandler(e,t);E.isNil(s)||(E.isNil(s.accept)&&(s.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(e=>{this.store.dispatch(e)})}:()=>{}),this.alertService.alert(s))}}return e.\u0275fac=function(t){return new(t||e)(T.bc(r.a),T.bc(We),T.bc(ne.a),T.bc(ae.a),T.bc(l.h))},e.\u0275prov=T.Mb({token:e,factory:e.\u0275fac}),e})(),ze=(()=>{class e{}return e.\u0275mod=T.Ob({type:e}),e.\u0275inj=T.Nb({factory:function(t){return new(t||e)},imports:[[a.c,o.m,o.w,b.a,g.a,f.a,O.a,D.a,m.a,k.a,l.j.forFeature("dsrMapping",De),r.b.forFeature([He])]]}),e})();var Qe=i("tyNb");const Ke=Object(l.o)("[FlSalesReport/List] init this component"),Xe=Object(l.o)("[FlSalesReport/List] load date range type list"),qe=Object(l.o)("[FlSalesReport/List] get date range type list success",Object(l.t)()),Je=Object(l.o)("[FlSalesReport/List] load station list"),Ze=Object(l.o)("[FlSalesReport/List] get station list success",Object(l.t)()),et=Object(l.o)("[FlSalesReport/List] load billing type list"),tt=Object(l.o)("[FlSalesReport/List] get billing type list success",Object(l.t)()),it=Object(l.o)("[FlSalesReport/List] load et emd other type list"),st=Object(l.o)("[FlSalesReport/List] get et emd other type list success",Object(l.t)()),ct=Object(l.o)("[FlSalesReport/List] load gds comp list"),nt=Object(l.o)("[FlSalesReport/List] get gds list success",Object(l.t)()),at=Object(l.o)("[PmUnpaid/List] load control branch type list"),ot=Object(l.o)("[PmUnpaid/List] get control branch type list success",Object(l.t)()),rt=Object(l.o)("[PmUnpaid/List] load ticket void type list"),lt=Object(l.o)("[PmUnpaid/List] get ticket void type list success",Object(l.t)()),pt=Object(l.o)("[PmUnpaid/List] load fop code list"),dt=Object(l.o)("[PmUnpaid/List] get fop code list success",Object(l.t)()),ut=Object(l.o)("[FlSalesReport/List] load affiliate comp list"),bt=Object(l.o)("[FlSalesReport/List] get affiliate comp list success",Object(l.t)()),ht=Object(l.o)("[FlSalesReport/List] load check item list"),mt=Object(l.o)("[FlSalesReport/List] get check item list success",Object(l.t)()),gt=Object(l.o)("[FlReservationListB2cTicketing] load upload file type list"),ft=Object(l.o)("[FlReservationListB2cTicketing] get upload file type list success",Object(l.t)()),Ot=Object(l.o)("[FlSalesReport/List] change search condition",Object(l.t)()),Ct=Object(l.o)("[FlSalesReport/List] change selected department list",Object(l.t)()),St=Object(l.o)("[FlSalesReport/List] reload grid data list"),jt=Object(l.o)("[FlSalesReport/List] load grid data list",Object(l.t)()),kt=Object(l.o)("[FlSalesReport/List] get list success",Object(l.t)()),vt=Object(l.o)("[FlSalesReport/List] get list failure",Object(l.t)()),Lt=Object(l.o)("[FlSalesReport/List] set grid state",Object(l.t)()),yt=Object(l.o)("[FlSalesReport/List] set grid check state",Object(l.t)()),Dt=Object(l.o)("[FlSalesReport/List] change page index",Object(l.t)()),Tt=Object(l.o)("[FlSalesReport/List] change page size",Object(l.t)()),Et=Object(l.o)("[FlSalesReport/Detail] \ubd80\uc11c \uc120\ud0dd \ud31d\uc5c5 \uc5f4\uae30"),Rt=Object(l.o)("[FlSalesReport/Detail] \ubd80\uc11c \uc120\ud0dd\ud31d\uc5c5 \ub2eb\uae30"),Ft=Object(l.o)("[FlSalesReport/Detail] DSR/\uc608\uc57d\ub9e4\ud551 \ud31d\uc5c5 \uc5f4\uae30"),Pt=Object(l.o)("[FlSalesReport/Detail] DSR/\uc608\uc57d\ub9e4\ud551 \ud31d\uc5c5 \ub2eb\uae30"),It=Object(l.o)("[FlSalesReport/Detail] DSR \uc5c5\ub85c\ub4dc \ud31d\uc5c5 \uc5f4\uae30"),Vt=Object(l.o)("[FlSalesReport/Detail] DSR \uc5c5\ub85c\ub4dc \ud31d\uc5c5 \ub2eb\uae30"),Nt=Object(l.o)("[FlSalesReport/Detail] close commit or cancel",Object(l.t)()),$t=Object(l.o)("[FlSalesReport/Detail] bundle close commit or cancel",Object(l.t)()),wt=Object(l.o)("[FlSalesReport/List] get dsr mapping list success",Object(l.t)()),_t=Object(l.o)("[FlSalesReport/List] get dsr mapping list failure",Object(l.t)()),xt=Object(l.o)("[FlSalesReport/List] load dsr mapping list",Object(l.t)()),Wt=Object(l.o)("[FlSalesReport/Detail] upload dsr",Object(l.t)()),At=Object(l.o)("[FlSalesReport/List] open remark popup"),Mt=Object(l.o)("[FlSalesReport/List] close remark popup"),Bt=Object(l.o)("[FlSalesReport/List] save remark",Object(l.t)()),Ut=Object(l.o)("[FlSalesReport/List] save remark success",Object(l.t)()),Yt=Object(l.o)("[FlSalesReport/List] save remark failure",Object(l.t)()),Gt=Object(l.o)("[FlSalesReport/List] add sales info",Object(l.t)()),Ht=Object(l.o)("[FlSalesReport/List] del sales info"),zt=Object(l.o)("[FlSalesReport/Detail] sales Slip",Object(l.t)()),Qt=Object(l.o)("[FlSalesReport/Detail] sales Slip success",Object(l.t)()),Kt=Object(l.o)("[FlSalesReport/Detail] sales slip all",Object(l.t)()),Xt=Object(l.o)("[FlSalesReport/Detail] sales Slip success",Object(l.t)()),qt=Object(l.o)("[FlSalesReport/Detail] chorusSlip",Object(l.t)()),Jt=Object(l.o)("[FlSalesReport/Detail] chorusSlip success",Object(l.t)()),Zt=Object(l.o)("[FlSalesReport/Detail] chorusSlip all",Object(l.t)()),ei=Object(l.o)("[FlSalesReport/Detail] chorusSlip success",Object(l.t)()),ti=Object(ke.a)({selectId:e=>e.id,sortComparer:!1}),ii=ti.getInitialState({dateRangeTypeList:null,stationList:null,billingTypeList:null,etEmdOtherTypeList:null,gdsCompList:null,controlBranchTypeList:null,ticketVoidTypeList:null,fopCodeList:null,affiliateCompList:null,checkItemList:null,uploadFileTypeList:null,loading:!1,reloadToggle:!1,searchCondition:null,otherSearchInfo:null,selectedDeptList:null,summaryInfo:null,gridDataTotal:null,gridState:{pageInfo:{skip:0,take:20},sortInfo:[]},gridCheckedState:null,selectedRowItem:null,isOpenDeptSelectPopup:!1,isOpenDsrBookingMappingPopup:!1,isOpenDsrUploadPopup:!1,isOpenRemarkPopup:!1,selectedSalesInfo:null}),si=Object(l.q)(ii,Object(l.s)(n.initComponent,e=>Object.assign(Object.assign({},e),{loading:!1,reloadToggle:!1,selectedRowItem:null,isOpenDeptSelectPopup:!1,isOpenDsrBookingMappingPopup:!1,isOpenDsrUploadPopup:!1,isOpenRemarkPopup:!1})),Object(l.s)(n.getDateRangeTypeListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{dateRangeTypeList:t})),Object(l.s)(n.getControlBranchTypeListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{controlBranchTypeList:t})),Object(l.s)(n.getTicketVoidTypeListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{ticketVoidTypeList:t})),Object(l.s)(n.getFopCodeListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{fopCodeList:t})),Object(l.s)(n.getStationListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{stationList:t})),Object(l.s)(n.getAffiliateCompListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{affiliateCompList:t})),Object(l.s)(n.getCheckItemListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{checkItemList:t})),Object(l.s)(n.getBillingTypeListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{billingTypeList:t})),Object(l.s)(n.getEtEmdOtherTypeListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{etEmdOtherTypeList:t})),Object(l.s)(n.getGdsCompListSuccess,(e,{dataList:t})=>Object.assign(Object.assign({},e),{gdsCompList:t})),Object(l.s)(n.getUploadFileTypeListSuccessAction,(e,{dataList:t})=>Object.assign(Object.assign({},e),{uploadFileTypeList:t})),Object(l.s)(n.changeSearchCondition,(e,{searchCondition:t,otherSearchInfo:i})=>Object.assign(Object.assign({},e),{searchCondition:t,otherSearchInfo:i})),Object(l.s)(n.changeSelectedDeptList,(e,{deptList:t})=>Object.assign(Object.assign({},e),{selectedDeptList:t})),Object(l.s)(n.loadList,e=>Object.assign(Object.assign({},e),{loading:!0})),Object(l.s)(n.reloadList,e=>Object.assign(Object.assign({},e),{reloadToggle:!e.reloadToggle})),Object(l.s)(n.getListSuccess,(e,{dataList:t,totalCount:i,summaryInfo:s})=>ti.setAll(t,Object.assign(Object.assign({},e),{loading:!1,gridDataTotal:i,summaryInfo:s}))),Object(l.s)(n.getListFailure,e=>Object.assign(Object.assign({},e),{loading:!1})),Object(l.s)(n.setGridStateAction,(e,{gridState:t})=>Object.assign(Object.assign({},e),{gridState:t})),Object(l.s)(n.setGridCheckStateAction,(e,{gridCheckedState:t})=>Object.assign(Object.assign({},e),{gridCheckedState:t})),Object(l.s)(n.changePageSize,(e,{pageSize:t})=>Object.assign(Object.assign({},e),{gridState:E.set(E.cloneDeep(e.gridState),["pageInfo","take"],t)})),Object(l.s)(n.changePageIndex,(e,{pageIndex:t})=>Object.assign(Object.assign({},e),{gridState:E.set(E.cloneDeep(e.gridState),["pageInfo","skip"],t)})),Object(l.s)(n.openDeptSelectPopup,e=>Object.assign(Object.assign({},e),{isOpenDeptSelectPopup:!0})),Object(l.s)(n.closeDeptSelectPopup,e=>Object.assign(Object.assign({},e),{isOpenDeptSelectPopup:!1})),Object(l.s)(n.openDsrBookingMappingPopup,e=>Object.assign(Object.assign({},e),{isOpenDsrBookingMappingPopup:!0})),Object(l.s)(n.closeDsrBookingMappingPopup,e=>Object.assign(Object.assign({},e),{isOpenDsrBookingMappingPopup:!1})),Object(l.s)(n.openDsrUploadPopup,e=>Object.assign(Object.assign({},e),{isOpenDsrUploadPopup:!0})),Object(l.s)(n.closeDsrUploadPopup,e=>Object.assign(Object.assign({},e),{isOpenDsrUploadPopup:!1})),Object(l.s)(n.openRemarkPopup,e=>Object.assign(Object.assign({},e),{isOpenRemarkPopup:!0})),Object(l.s)(n.closeRemarkPopup,e=>Object.assign(Object.assign({},e),{isOpenRemarkPopup:!1})),Object(l.s)(n.saveRemarkSuccess,(e,{upsertList:t})=>ti.upsertMany(t,Object.assign({},e))));function ci(e,t){return Object(l.m)({FlSalesReportList:si})(e,t)}const ni=Object(l.p)("FlSalesReport"),ai=Object(l.r)(ni,e=>e.FlSalesReportList),oi=Object(l.r)(ai,e=>e.dateRangeTypeList),ri=Object(l.r)(ai,e=>e.stationList),li=Object(l.r)(ai,e=>e.billingTypeList),pi=Object(l.r)(ai,e=>e.etEmdOtherTypeList),di=Object(l.r)(ai,e=>e.gdsCompList),ui=Object(l.r)(ai,e=>e.controlBranchTypeList),bi=Object(l.r)(ai,e=>e.ticketVoidTypeList),hi=Object(l.r)(ai,e=>e.fopCodeList),mi=Object(l.r)(ai,e=>e.affiliateCompList),gi=Object(l.r)(ai,e=>e.checkItemList),fi=Object(l.r)(ai,e=>e.uploadFileTypeList),Oi=Object(l.r)(ai,e=>e.loading),Ci=Object(l.r)(ai,e=>e.reloadToggle),Si=Object(l.r)(ai,e=>e.searchCondition),ji=Object(l.r)(ai,e=>e.otherSearchInfo),ki=Object(l.r)(ai,e=>e.selectedDeptList),vi=ti.getSelectors(ai).selectAll,Li=Object(l.r)(ai,e=>e.summaryInfo),yi=Object(l.r)(ai,e=>e.gridState),Di=Object(l.r)(ai,e=>e.gridCheckedState),Ti=Object(l.r)(ai,e=>e.gridDataTotal),Ei=Object(l.r)(yi,e=>E.get(e,["pageInfo","take"],20)),Ri=(Object(l.r)(ai,e=>e.selectedRowItem),Object(l.r)(ai,e=>e.isOpenDeptSelectPopup)),Fi=Object(l.r)(ai,e=>e.isOpenDsrBookingMappingPopup),Pi=Object(l.r)(ai,e=>e.isOpenDsrUploadPopup),Ii=Object(l.r)(ai,e=>e.isOpenRemarkPopup),Vi=Object(l.r)(ai,e=>e.selectedSalesInfo);var Ni=i("YY+H");const{API_URL:$i}=I.a,wi={postFlightSalesReport:`${$i}/admin/flight/sales-report`,putRefundAccount:`${$i}/admin/account/payments/refund-account`,postCommonDetailCodes:`${$i}/common/detail-code`,postCommonComp:`${$i}/common/comp`,excelDownload:`${$i}/admin/flight/sales-report/excel`,uploadDsr:`${$i}/admin/flight/dsr/upload`,putCloseCommitOrCancel:`${$i}/admin/flight/sales-report/close`,putBundleCloseCommitOrCancel:`${$i}/admin/flight/sales-report/bundle/close`,putSaveRemark:`${$i}/admin/flight/sales-report/remark`,putSlipCreate:`${$i}/admin/account/slip/sales-create`,putChorusCreate:`${$i}/chorus/flight/dsr-send`};var _i=i("U6NN");let xi=(()=>{class e{constructor(){this.changePageSizeEvent=new T.n,this.excelDownloadEvent=new T.n,this.clickDsrBookingMappingEvent=new T.n,this.clickDsrUploadEvent=new T.n,this.clickCommitOrCancelEvent=new T.n,this.clickBundleCommitOrCancelEvent=new T.n,this.clickRemarkEvent=new T.n,this.clickTotalSlipEvent=new T.n,this.clickSlipEvent=new T.n,this.clickChorusEvent=new T.n,this.clickChorusAllEvent=new T.n,this.pageSizeOptions=[{label:"20",value:20},{label:"40",value:40},{label:"60",value:60},{label:"80",value:80},{label:"100",value:100}]}ngOnInit(){}onChangePageSize(e){this.changePageSizeEvent.emit(e.value)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=T.Kb({type:e,selectors:[["app-fl-sales-report-control"]],inputs:{loading:"loading",currentPageSize:"currentPageSize",totalCount:"totalCount"},outputs:{changePageSizeEvent:"changePageSizeEvent",excelDownloadEvent:"excelDownloadEvent",clickDsrBookingMappingEvent:"clickDsrBookingMappingEvent",clickDsrUploadEvent:"clickDsrUploadEvent",clickCommitOrCancelEvent:"clickCommitOrCancelEvent",clickBundleCommitOrCancelEvent:"clickBundleCommitOrCancelEvent",clickRemarkEvent:"clickRemarkEvent",clickTotalSlipEvent:"clickTotalSlipEvent",clickSlipEvent:"clickSlipEvent",clickChorusEvent:"clickChorusEvent",clickChorusAllEvent:"clickChorusAllEvent"},decls:8,vars:3,consts:[[1,"grid-control-area"],[1,"ml-auto","d-inline-flex","flex-glow-0"],[1,"btn","btn-outline-dark","sm",3,"click"],[1,"select-box","sm","d-inline-flex","flex-glow-0"],[3,"options","ngModel","useAllOptionYn","onChange"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"div",1),T.Wb(2,"button",2),T.fc("click",(function(){return t.clickDsrUploadEvent.emit()})),T.Pc(3,"DSR Upload"),T.Vb(),T.Wb(4,"button",2),T.fc("click",(function(){return t.excelDownloadEvent.emit()})),T.Pc(5,"Excel"),T.Vb(),T.Wb(6,"div",3),T.Wb(7,"app-selectbox",4),T.fc("onChange",(function(e){return t.onChangePageSize(e)})),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Cb(7),T.pc("options",t.pageSizeOptions)("ngModel",t.currentPageSize)("useAllOptionYn",!1))},directives:[_i.a,o.r,o.u],encapsulation:2,changeDetection:0}),e})();var Wi=i("pfiq");let Ai=(()=>{class e{constructor(e,t){this.api=e,this.alertService=t}getCommonDetailCodeList(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.post(wi.postCommonDetailCodes,t).pipe(Object(P.a)(e=>e.succeedYn&&e.result?Object(R.a)(e.result.list):Object(F.a)(e||"api response error")))}getCommonComp(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.post(wi.postCommonComp,t).pipe(Object(P.a)(e=>e.succeedYn&&e.result?Object(R.a)(e.result.list):Object(F.a)(e||"api response error")))}getList(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.post(wi.postFlightSalesReport,t).pipe(Object(P.a)(e=>{if(e.succeedYn&&e.result){const t=this._convertSearchResultList(e.result.list),i=e.result.totalCount,s=e.result.summary||null;return Object(R.a)({dataList:t,totalCount:i,summaryInfo:s})}return Object(F.a)(e||"api response error")}))}putRefundAccount(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.put(wi.putRefundAccount,t).pipe(Object(P.a)(e=>e.succeedYn?Object(R.a)(e.result):Object(F.a)(e||"api response error")))}uploadDsr(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.put(wi.uploadDsr,t).pipe(Object(P.a)(e=>e.succeedYn?Object(R.a)(e.result):Object(F.a)(e||"api response error")))}closeCommitOrCancel(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.put(wi.putCloseCommitOrCancel,t).pipe(Object(P.a)(e=>e.succeedYn?Object(R.a)(e.result):Object(F.a)(e||"api response error")))}bundleCloseCommitOrCancel(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.put(wi.putBundleCloseCommitOrCancel,t).pipe(Object(P.a)(e=>e.succeedYn?Object(R.a)(e.result):Object(F.a)(e||"api response error")))}putSaveRemark(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.put(wi.putSaveRemark,t).pipe(Object(P.a)(e=>{if(e.succeedYn){const{remarks:t}=e.result,i=t.map(e=>Object.assign({},e,{id:e.rowid}));return Object(R.a)(i)}return Object(F.a)(e||"api response error")}))}_convertSearchResultList(e){return E.isEmpty(e)?[]:e.map((e,t)=>{const i=(null==e?void 0:e.rowid)||t.toString();return Object.assign({},e,{rowid:i,id:i})})}putSlipCreate(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.put(wi.putSlipCreate,t).pipe(Object(P.a)(e=>e.succeedYn?(this.alertService.alert(e.result.salesSlipCount+"\uac1c \uc0dd\uc131\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Object(R.a)(e.result)):Object(F.a)(e||"api response error")))}putSlipAllCreate(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.put(wi.putSlipCreate,t).pipe(Object(P.a)(e=>e.succeedYn?(this.alertService.alert(e.result.salesSlipCount+"\uac1c \uc0dd\uc131\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),Object(R.a)(e.result)):Object(F.a)(e||"api response error")))}putChorusSlipCreate(e){const t=E.assign({},this.api.defaultParams,{condition:e});return this.api.put(wi.putChorusCreate,t).pipe(Object(P.a)(e=>e.succeedYn?Object(R.a)(e.result):Object(F.a)(e||"api response error")))}}return e.\u0275fac=function(t){return new(t||e)(T.bc($.a),T.bc(ae.a))},e.\u0275prov=T.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Mi=i("6UzV"),Bi=i("wd/R");let Ui=(()=>{class e{constructor(e){this.fb=e,this.generateGridColumns=()=>[{field:"ticketNo",title:"Ticket No.",width:"100",template:"ticketNoTpl"},{field:"airlineCode",title:"Airline No",width:"70"},{field:"airlineNumberCode",title:"Airline",width:"70"},{field:"billingTypeName",title:"ATR/BSP",width:"80"},{field:"internationalOrDomestic",title:"I/D",width:"80"},{field:"ticketVoidTypeName",title:"Sales Type",width:"130"},{field:"ticketingDate",title:"Issued Date",width:"80"},{field:"bookingItemCode",title:"Booking Item Code",width:"130",template:"bookingItemCodeTpl"},{field:"gdsSubPnr",title:"PNR",width:"120",template:"gdsSubPnrTpl"},{field:"conjTicketTypeCode",title:"CONJ",width:"100"},{field:"etEmdOtherTypeName",title:"ET/EMD",width:"100"},{field:"firstName",title:"Traveler",width:"150",template:"nameTpl"},{field:"salesNetAmount",title:"Selling Net",width:"100",format:"currency"},{field:"dsrNetAmount",title:"DSR NET",width:"100",format:"currency"},{field:"salesTaxAmount",title:"Selling Tax",width:"100",format:"currency"},{field:"dsrTaxAmount",title:"DSR Tax",width:"100",format:"currency"},{field:"salesCashAmount",title:"Selling Cash",width:"100",format:"currency"},{field:"dsrCashAmount",title:"DSR Cash",width:"100",format:"currency"},{field:"salesCardAmount",title:"Selling CC",width:"100",format:"currency"},{field:"dsrCardAmount",title:"DSR CC",width:"100",format:"currency"}],this.generateGridColumnsSRC01=()=>[{field:"bookingItemCode",title:"\uc608\uc57d\ucf54\ub4dc",width:"130",template:"bookingItemCodeTpl"},{field:"gdsSubPnr",title:"PNR",width:"120",template:"gdsSubPnrTpl"},{field:"airlineCode",title:"\ud56d\uacf5\uc0ac",width:"70"},{field:"airlineNumberCode",title:"\uc22b\uc790\ucf54\ub4dc",width:"80"},{field:"ticketNo",title:"\ud2f0\ucf13\ubc88\ud638",width:"100",template:"ticketNoTpl"},{field:"conjTicketTypeCode",title:"CONJ",width:"100"},{field:"etEmdOtherTypeName",title:"\ud2f0\ucf13\uad6c\ubd84",width:"100"},{field:"sumDifferAmount",title:"\ucd1d\ucc28\uc561",width:"100",format:"currency"},{field:"netDifferAmount",title:"NET\ucc28\uc561",width:"100",format:"currency"},{field:"taxDifferAmount",title:"TAX\ucc28\uc561",width:"100",format:"currency"},{field:"cashDifferAmount",title:"CASH\ucc28\uc561",width:"100",format:"currency"},{field:"cardDifferAmount",title:"CC\ucc28\uc561",width:"100",format:"currency"},{field:"tasfDifferAmount",title:"TASF \ucc28\uc561",width:"100",format:"currency"},{field:"salesDiscountAppliedValue",title:"\ud560\uc778/\ud560\uc99d",width:"100",format:"currency"},{field:"salesOthersAmount",title:"TAX\uc870\uc815",width:"100",format:"currency"},{field:"dsrNetAmount",title:"DSR NET",width:"100",format:"currency"},{field:"ticketingNetAmount",title:"\uc608\uc57d\uc0c1\uc138 \ubc1c\uad8cNET",width:"100",format:"currency"},{field:"salesNetAmount",title:"\ud310\ub9e4NET",width:"100",format:"currency"},{field:"dsrTaxAmount",title:"\ubc1c\uad8cTAX",width:"100",format:"currency"},{field:"salesTaxAmount",title:"\ud310\ub9e4TAX",width:"100",format:"currency"},{field:"dsrCardAmount",title:"\ubc1c\uad8cCC",width:"100",format:"currency"},{field:"salesCardAmount",title:"\ud310\ub9e4CC",width:"100",format:"currency"},{field:"dsrCashAmount",title:"\ubc1c\uad8c CASH",width:"100",format:"currency"},{field:"salesCashAmount",title:"\ud310\ub9e4CASH",width:"100",format:"currency"},{field:"dsrTasfAmount",title:"\uc2b9\uc778TASF",width:"100",format:"currency"},{field:"salesTasfAmount",title:"\ud310\ub9e4TASF",width:"100",format:"currency"},{field:"controlRemark",title:"\ube44\uace0",width:"100"}],this.generateGridColumnsSRC03=()=>[{field:"bookingItemCode",title:"\uc608\uc57d\ucf54\ub4dc",width:"130",template:"bookingItemCodeTpl"},{field:"gdsSubPnr",title:"PNR",width:"120",template:"gdsSubPnrTpl"},{field:"airlineCode",title:"\ud56d\uacf5\uc0ac",width:"70"},{field:"airlineNumberCode",title:"\uc22b\uc790\ucf54\ub4dc",width:"80"},{field:"ticketNo",title:"\ud2f0\ucf13\ubc88\ud638",width:"100",template:"ticketNoTpl"},{field:"etEmdOtherTypeName",title:"\ud2f0\ucf13\uad6c\ubd84",width:"100"},{field:"firstName",title:"\ud0d1\uc2b9\uac1d",width:"150",template:"nameTpl"},{field:"cabinClassCode",title:"C.CLS",width:"70"},{field:"bookingClassCode",title:"B.CLS",width:"70"},{field:"departureDate",title:"\ucd9c\ubc1c\uc77c",width:"100"},{field:"itineraryDetail",title:"\uc5ec\uc815",width:"250"},{field:"dsrAirlineCommCode",title:"\ubc1c\uad8c\ucef4",width:"100"},{field:"salesTourCode",title:"\uc608\uc57dAUTH No.",width:"120"},{field:"dsrTourCode",title:"\ubc1c\uad8cAUTH No.",width:"120"}],this.generateListSearchForm=()=>this.fb.group({dateRange:this.fb.group({rangeType:["SRD01"],dates:this.fb.array([new o.g(null,[o.z.required]),new o.g(null,[o.z.required])],{validators:[Mi.a.compareDatesValidators("rangeCompare",[[0],[1]])]})}),stationTypeCodes:[null],ticketingPicUno:[null],refundPicUno:[null],ticketingPicDeptCodes:[null],ticketNo:[null],bookingItemCode:[null],gdsSubPnr:[null],paxName:[null],packageCode:[null],onOffManual:[null],internationalOrDomestic:[null],billingTypeCode:[null],etEmdOtherTypeCodes:[null],gdsCompCodes:[null],controlBranchCode:[null],ticketVoidTypeCode:["N"],airlineCodes:[null,[Mi.a.airlineCodesStringValidator]],fopCodes:[null],dsrBookingMappedYn:[null],conjTicketYn:[null],bookerCompCode:[null],affiliateCompCodes:[null],dsrFinishYn:[null],slipYn:[null],checkItemCode:[null],checkItemIncludeYn:[null],multiSelector1:[null],multiSelector2:[null],airlineCode:[null]}),this.initListSearchFormData=()=>({dateRange:{rangeType:"SRD01",dates:[Bi().add(-1,"weeks").format("YYYY-MM-DD"),Bi().format("YYYY-MM-DD")]},stationTypeCodes:null,ticketingPicUno:null,refundPicUno:null,ticketingPicDeptCodes:null,ticketNo:null,bookingItemCode:null,gdsSubPnr:null,paxName:null,packageCode:null,onOffManual:null,internationalOrDomestic:null,billingTypeCode:null,etEmdOtherTypeCodes:null,gdsCompCodes:null,controlBranchCode:null,ticketVoidTypeCode:null,airlineCodes:null,fopCodes:null,dsrBookingMappedYn:null,conjTicketYn:null,bookerCompCode:null,affiliateCompCodes:null,dsrFinishYn:null,slipYn:null,checkItemCode:null,checkItemIncludeYn:!0,multiSelector1:"ticketingPicUno",multiSelector2:"bookingItemCode",airlineCode:null}),this.initListSearchCondition=()=>({dateRange:null,stationTypeCodes:null,ticketingPicUno:null,refundPicUno:null,ticketingPicDeptCodes:null,ticketNo:null,bookingItemCode:null,gdsSubPnr:null,paxName:null,packageCode:null,onOffManual:null,internationalOrDomestic:null,billingTypeCode:null,etEmdOtherTypeCodes:null,gdsCompCodes:null,controlBranchCode:null,ticketVoidTypeCode:"N",airlineCodes:null,destinationAirportCodes:null,bookingClassCodes:null,fopCodes:null,dsrBookingMappedYn:null,conjTicketYn:null,bookerCompCode:null,affiliateCompCodes:null,dsrFinishYn:null,slipYn:null,checkItemCode:null,checkItemIncludeYn:null,sortOrder:null,limits:null}),this.generateDsrBookingMappingSearchForm=()=>this.fb.group({bookingItemCode:[null,[o.z.required]]}),this.initDsrBookingMappingSearchForm=()=>({bookingItemCode:null}),this.generateDsrUploadForm=()=>this.fb.group({gdsCompCode:[null],fileTypeCode:[null],fileContent:[null],uploadUserNo:[null]}),this.initDsrUploadForm=()=>({gdsCompCode:null,fileTypeCode:null,fileContent:null,uploadUserNo:null}),this.generateFlSalesReportRemarkForm=()=>this.fb.group({controlRemark:[null,[o.z.required]]}),this.initFlSalesReportRemarkForm=()=>({controlRemark:null})}}return e.\u0275fac=function(t){return new(t||e)(T.bc(o.f))},e.\u0275prov=T.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Yi=i("rbKv"),Gi=i("kd+X"),Hi=i("LVFn"),zi=i("U2QM");function Qi(e,t){1&e&&T.Rb(0,"app-input-text",34)}function Ki(e,t){1&e&&T.Rb(0,"app-input-text",35)}function Xi(e,t){1&e&&T.Rb(0,"app-input-text",36)}function qi(e,t){1&e&&T.Rb(0,"app-input-text",37)}function Ji(e,t){1&e&&T.Rb(0,"app-input-text",38)}function Zi(e,t){1&e&&T.Rb(0,"app-input-text",35)}let es=(()=>{class e{constructor(e){this._dataService=e,this.clickSearchEvent=new T.n,this.clickResetEvent=new T.n,this.clickOpenDeptModalEvent=new T.n,this.clickClearDeptEvent=new T.n,this.isShowmore=!1,this.useYnOptions=[{value:!0,label:"Y"},{value:!1,label:"N"}],this.codeTypeOptions=[{value:"ticketNo",label:"Ticket No."},{value:"bookingItemCode",label:"Booking Item Code"},{value:"firstName",label:"Travelrs"}],this.internationalOrDomesticOptions=[{label:"Domestic",value:"D"},{label:"International",value:"I"}],this.unsubscribe$=new A.a,this.searchForm=this._dataService.generateListSearchForm(),this._initSubscription()}get otherSearchInfo(){return this._otherSearchInfo}set otherSearchInfo(e){this._otherSearchInfo=e,this._setOtherSearchInfo(e)}get searchCondition(){return this._searchCondition}set searchCondition(e){this._searchCondition=e,this.searchFormData=this._setSearchFormData(e)}get selectedDeptList(){return this._selectedDeptList}set selectedDeptList(e){this._selectedDeptList=e,this._setDeptCodes(e)}get searchFormValid(){return this.searchForm.valid}get formValue(){return this.searchForm&&this.searchForm.value}get dateRange1Dates(){return this.searchForm.get("dateRange").get("dates").value}get selectedPicTypeDropdown(){return this.searchForm.get("multiSelector1").value}get selectedCodeTypeDropdown(){return this.searchForm.get("multiSelector2").value}ngOnInit(){}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onSubmit(){if(this.searchForm.invalid)return void(this._checkValid=!0);const e=this.setSearchCondition(),t=this._setOtherSearchCondition();this.clickSearchEvent.emit({searchCondition:e,otherSearchInfo:t}),this._checkValid=!1}onReset(){this.clickResetEvent.emit()}clickOpenDeptModal(){this.clickOpenDeptModalEvent.emit()}checkIsInvalid(e){return this._checkValid&&this.searchForm.get(e)&&this.searchForm.get(e).invalid}checkIsInvalidDateRange(e){var t;return this._checkValid&&(!0===(null===(t=e.errors)||void 0===t?void 0:t.rangeCompare)||e.invalid)}setSearchCondition(){const e=this.searchForm.value,t=E.isEmpty(this.selectedDeptList)?null:this.selectedDeptList.map(e=>e.compBasisCodeValue),i=e.dateRange.dates;e.dateRange=void 0;const s=Object.assign({},e,{ticketingPicDeptCodes:t,issueDates:i});return E.omitBy(s,E.isNil)}_initState(){}_setSearchFormData(e){const t=this._dataService.initListSearchFormData();return E.isEmpty(e)?t:e}_setOtherSearchInfo(e){this.ticketingPicInput=(null==e?void 0:e.ticketingPicInput)||null,this.refundPicInput=(null==e?void 0:e.refundPicInput)||null,this.bookerCompInput=(null==e?void 0:e.bookerCompInput)||null}_setOtherSearchCondition(){const e={deptCodesDesc:this.deptCodesDesc||null};return this.autoCompletes.forEach(t=>{Object.assign(e,t.getInputValue())}),e}_setDeptCodes(e){if(E.isEmpty(e))return void(this.deptCodesDesc=null);const t=e.map(e=>e.compBasisCodeValue);this.deptCodesDesc=t.length+"\uac1c \uc120\ud0dd"}_initSubscription(){Object(M.a)([this.searchForm.get("bookerCompCode").valueChanges,this.searchForm.get("affiliateCompCodes").valueChanges]).pipe(Object(ie.a)(this.unsubscribe$)).subscribe(([e,t])=>{const i=this.searchForm.get("bookerCompCode"),s=this.searchForm.get("affiliateCompCodes");E.isNil(e)&&E.isNil(t)?(i.disabled&&i.enable(),s.disabled&&s.enable()):!E.isNil(e)&&E.isNil(t)?s.enabled&&(s.disable(),s.setValue(null)):i.enabled&&(i.disable(),i.setValue(null))}),this.searchForm.get("checkItemCode").valueChanges.pipe(Object(ie.a)(this.unsubscribe$)).subscribe(e=>{const t=this.searchForm.get("checkItemIncludeYn");E.isNil(e)?(t.disable(),t.setValue(!0)):(t.enable(),t.setValue(!0))})}}return e.\u0275fac=function(t){return new(t||e)(T.Qb(Ui))},e.\u0275cmp=T.Kb({type:e,selectors:[["app-fl-sales-report-search"]],viewQuery:function(e,t){var i;1&e&&T.Xc(Wi.a,!0),2&e&&T.Dc(i=T.gc())&&(t.autoCompletes=i)},inputs:{dateRangeTypeList:"dateRangeTypeList",stationList:"stationList",billingTypeList:"billingTypeList",etEmdOtherTypeList:"etEmdOtherTypeList",gdsCompList:"gdsCompList",controlBranchTypeList:"controlBranchTypeList",ticketVoidTypeList:"ticketVoidTypeList",fopCodeList:"fopCodeList",affiliateCompList:"affiliateCompList",checkItemList:"checkItemList",otherSearchInfo:"otherSearchInfo",searchCondition:"searchCondition",selectedDeptList:"selectedDeptList"},outputs:{clickSearchEvent:"clickSearchEvent",clickResetEvent:"clickResetEvent",clickOpenDeptModalEvent:"clickOpenDeptModalEvent",clickClearDeptEvent:"clickClearDeptEvent"},decls:69,vars:32,consts:[[1,"grid-search-box","multi",3,"formGroup","connectForm","ngSubmit"],[1,"form-option-area"],[1,"row"],["formGroupName","dateRange",1,"col-1"],[1,"form-label"],["formArrayName","dates",1,"calendar-set","flex-fill"],[1,"input","calendar","d-inline-flex","flex-fill"],[3,"for"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","formControlName"],["fromDate",""],[1,"dash"],["type","text","placeholder","YYYY-MM-DD",3,"matDatepicker","min","formControlName"],["toDate",""],[1,"col-1"],["formControlName","billingTypeCode","dataKey","detailCode","displayKey","detailCodeNameEn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","internationalOrDomestic",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","gdsCompCodes","dataKey","compCode","displayKey","compName",1,"d-inline-flex","flex-fill",3,"useAllOptionYn","options"],["formControlName","multiSelector2",1,"d-inline-flex","flex-fill","ml5",3,"options","useAllOptionYn"],[3,"ngSwitch"],["formControlName","ticketNo","class","d-inline-flex flex-fill ml5",4,"ngSwitchCase"],["formControlName","bookingItemCode","class","d-inline-flex flex-fill ml5",4,"ngSwitchCase"],["formControlName","gdsSubPnr","class","d-inline-flex flex-fill ml5",4,"ngSwitchCase"],["formControlName","paxName","class","d-inline-flex flex-fill ml5",4,"ngSwitchCase"],["formControlName","packageCode","class","d-inline-flex flex-fill ml5",4,"ngSwitchCase"],["formControlName","bookingItemCode","class","d-inline-flex flex-fill ml5",4,"ngSwitchDefault"],["formControlName","ticketVoidTypeCode","dataKey","detailCode","displayKey","detailCodeNameEn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","airlineCode",1,"d-inline-flex","flex-fill"],["formControlName","fopCodes","dataKey","detailCode","displayKey","detailCodeNameEn",1,"d-inline-flex","flex-fill",3,"options"],["formControlName","etEmdOtherTypeCodes","dataKey","detailCode","displayKey","detailCodeNameEn",1,"d-inline-flex","flex-fill",3,"useAllOptionYn","options"],["formControlName","conjTicketYn",1,"d-inline-flex","flex-fill",3,"options"],[1,"form-button-area"],["type","submit","role","button",1,"btn","btn-primary","sm"],["type","button","role","button",1,"btn","btn-reset","sm",3,"click"],[1,"btn-searchbox-extend",3,"click"],["formControlName","ticketNo",1,"d-inline-flex","flex-fill","ml5"],["formControlName","bookingItemCode",1,"d-inline-flex","flex-fill","ml5"],["formControlName","gdsSubPnr",1,"d-inline-flex","flex-fill","ml5"],["formControlName","paxName",1,"d-inline-flex","flex-fill","ml5"],["formControlName","packageCode",1,"d-inline-flex","flex-fill","ml5"]],template:function(e,t){if(1&e&&(T.Wb(0,"form",0),T.fc("ngSubmit",(function(){return t.onSubmit()})),T.Wb(1,"div",1),T.Wb(2,"div",2),T.Wb(3,"div",3),T.Wb(4,"span",4),T.Pc(5,"Issued Date"),T.Vb(),T.Wb(6,"div",5),T.Wb(7,"div",6),T.Rb(8,"mat-datepicker-toggle",7),T.Rb(9,"input",8),T.Rb(10,"mat-datepicker",null,9),T.Vb(),T.Wb(12,"span",10),T.Pc(13,"~"),T.Vb(),T.Wb(14,"div",6),T.Rb(15,"mat-datepicker-toggle",7),T.Rb(16,"input",11),T.Rb(17,"mat-datepicker",null,12),T.Vb(),T.Vb(),T.Vb(),T.Wb(19,"div",13),T.Wb(20,"span",4),T.Pc(21,"ATR/BSP"),T.Vb(),T.Rb(22,"app-selectbox",14),T.Vb(),T.Wb(23,"div",13),T.Wb(24,"span",4),T.Pc(25,"I/D"),T.Vb(),T.Rb(26,"app-selectbox",15),T.Vb(),T.Wb(27,"div",13),T.Wb(28,"span",4),T.Pc(29,"GDS"),T.Vb(),T.Rb(30,"app-selectbox",16),T.Vb(),T.Vb(),T.Wb(31,"div",2),T.Wb(32,"div",13),T.Rb(33,"app-selectbox",17),T.Ub(34,18),T.Nc(35,Qi,1,0,"app-input-text",19),T.Nc(36,Ki,1,0,"app-input-text",20),T.Nc(37,Xi,1,0,"app-input-text",21),T.Nc(38,qi,1,0,"app-input-text",22),T.Nc(39,Ji,1,0,"app-input-text",23),T.Nc(40,Zi,1,0,"app-input-text",24),T.Tb(),T.Vb(),T.Wb(41,"div",13),T.Wb(42,"span",4),T.Pc(43,"Sales Type"),T.Vb(),T.Rb(44,"app-selectbox",25),T.Vb(),T.Wb(45,"div",13),T.Wb(46,"span",4),T.Pc(47,"Airline"),T.Vb(),T.Rb(48,"app-input-text",26),T.Vb(),T.Wb(49,"div",13),T.Wb(50,"span",4),T.Pc(51,"FOP"),T.Vb(),T.Rb(52,"app-multi-select",27),T.Vb(),T.Vb(),T.Wb(53,"div",2),T.Wb(54,"div",13),T.Wb(55,"span",4),T.Pc(56,"ET/EMD"),T.Vb(),T.Rb(57,"app-multi-select",28),T.Vb(),T.Wb(58,"div",13),T.Wb(59,"span",4),T.Pc(60,"CONJ"),T.Vb(),T.Rb(61,"app-selectbox",29),T.Vb(),T.Vb(),T.Vb(),T.Wb(62,"div",30),T.Wb(63,"button",31),T.Pc(64,"Search"),T.Vb(),T.Wb(65,"button",32),T.fc("click",(function(){return t.onReset()})),T.Pc(66,"Reset"),T.Vb(),T.Wb(67,"a",33),T.fc("click",(function(){return t.isShowmore=!t.isShowmore})),T.Pc(68,"\uac80\uc0c9 \uc635\uc158 \ub354\ubcf4\uae30"),T.Vb(),T.Vb(),T.Vb()),2&e){const e=T.Ec(11),i=T.Ec(18);T.pc("formGroup",t.searchForm)("connectForm",t.searchFormData),T.Cb(6),T.Gb("valid-error",t.checkIsInvalidDateRange(t.searchForm.get("dateRange"))),T.Cb(2),T.pc("for",e),T.Cb(1),T.pc("matDatepicker",e)("formControlName",0),T.Cb(6),T.pc("for",i),T.Cb(1),T.pc("matDatepicker",i)("min",t.dateRange1Dates[0])("formControlName",1),T.Cb(6),T.pc("options",t.billingTypeList),T.Cb(4),T.pc("options",t.internationalOrDomesticOptions),T.Cb(4),T.pc("useAllOptionYn",!0)("options",t.gdsCompList),T.Cb(3),T.pc("options",t.codeTypeOptions)("useAllOptionYn",!1),T.Cb(1),T.pc("ngSwitch",t.selectedCodeTypeDropdown),T.Cb(1),T.pc("ngSwitchCase","ticketNo"),T.Cb(1),T.pc("ngSwitchCase","bookingItemCode"),T.Cb(1),T.pc("ngSwitchCase","gdsSubPnr"),T.Cb(1),T.pc("ngSwitchCase","paxName"),T.Cb(1),T.pc("ngSwitchCase","packageCode"),T.Cb(5),T.pc("options",t.ticketVoidTypeList),T.Cb(8),T.pc("options",t.fopCodeList),T.Cb(1),T.Gb("hide",!t.isShowmore),T.Cb(4),T.pc("useAllOptionYn",!0)("options",t.etEmdOtherTypeList),T.Cb(4),T.pc("options",t.useYnOptions),T.Cb(6),T.Gb("active",t.isShowmore)}},directives:[o.B,o.s,o.k,_.a,o.l,o.e,Yi.a,Gi.a,o.c,o.r,o.i,Hi.a,_i.a,a.q,a.r,a.s,x.a,zi.a],encapsulation:2,changeDetection:0}),e})(),ts=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=T.Kb({type:e,selectors:[["app-fl-sales-report-summary"]],inputs:{summary:"summary"},decls:51,vars:24,consts:[[1,"table","table-bordered","mt30"],["width","150px"],["scope","col",1,"align-c"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"table"),T.Wb(2,"caption"),T.Pc(3," SALES REPORT "),T.Vb(),T.Wb(4,"colgroup"),T.Rb(5,"col",1),T.Rb(6,"col"),T.Vb(),T.Wb(7,"thead"),T.Wb(8,"tr"),T.Wb(9,"th",2),T.Pc(10,"Issued Ticket"),T.Vb(),T.Wb(11,"th",2),T.Pc(12,"Void Ticket"),T.Vb(),T.Wb(13,"th",2),T.Pc(14,"DSR Net"),T.Vb(),T.Wb(15,"th",2),T.Pc(16,"DSR Tax"),T.Vb(),T.Wb(17,"th",2),T.Pc(18,"CC"),T.Vb(),T.Wb(19,"th",2),T.Pc(20,"Cash"),T.Vb(),T.Wb(21,"th",2),T.Pc(22,"COM"),T.Vb(),T.Wb(23,"th",2),T.Pc(24,"VAT"),T.Vb(),T.Vb(),T.Vb(),T.Wb(25,"tbody"),T.Wb(26,"tr"),T.Wb(27,"td"),T.Pc(28),T.ic(29,"number"),T.Vb(),T.Wb(30,"td"),T.Pc(31),T.ic(32,"number"),T.Vb(),T.Wb(33,"td"),T.Pc(34),T.ic(35,"number"),T.Vb(),T.Wb(36,"td"),T.Pc(37),T.ic(38,"number"),T.Vb(),T.Wb(39,"td"),T.Pc(40),T.ic(41,"number"),T.Vb(),T.Wb(42,"td"),T.Pc(43),T.ic(44,"number"),T.Vb(),T.Wb(45,"td"),T.Pc(46),T.ic(47,"number"),T.Vb(),T.Wb(48,"td"),T.Pc(49),T.ic(50,"number"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Cb(28),T.Qc(T.jc(29,8,null==t.summary?null:t.summary.ticketCount)),T.Cb(3),T.Qc(T.jc(32,10,null==t.summary?null:t.summary.voidTicketCount)),T.Cb(3),T.Qc(T.jc(35,12,null==t.summary?null:t.summary.dsrNetAmount)),T.Cb(3),T.Qc(T.jc(38,14,null==t.summary?null:t.summary.dsrTaxAmount)),T.Cb(3),T.Qc(T.jc(41,16,null==t.summary?null:t.summary.dsrCardAmount)),T.Cb(3),T.Qc(T.jc(44,18,null==t.summary?null:t.summary.dsrCashAmount)),T.Cb(3),T.Qc(T.jc(47,20,null==t.summary?null:t.summary.dsrAirlineCommAmount)),T.Cb(3),T.Qc(T.jc(50,22,null==t.summary?null:t.summary.dsrAirlineCommVat)))},pipes:[a.f],encapsulation:2,changeDetection:0}),e})(),is=(()=>{class e{constructor(e){this._dataService=e,this.saveEvent=new T.n,this.deleteEvent=new T.n,this.closeEvent=new T.n,this.putForm=e.generateFlSalesReportRemarkForm()}get salesInfo(){return this._salesInfo}set salesInfo(e){this._salesInfo=e,this.putFormData=this._setPutFormData(e)}ngOnInit(){}onClickSave(){this.putForm.invalid?this._checkValid=!0:(this.saveEvent.emit(this.putForm.value),this._checkValid=!1)}onClickDelete(){this.deleteEvent.emit()}onClose(){this.closeEvent.emit()}checkIsInvalid(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}_setPutFormData(e){const t=this._dataService.initFlSalesReportRemarkForm();return Object.assign({},E.pick(e,Object.keys(t)))}}return e.\u0275fac=function(t){return new(t||e)(T.Qb(Ui))},e.\u0275cmp=T.Kb({type:e,selectors:[["app-fl-sales-report-remark-form"]],inputs:{salesInfo:"salesInfo"},outputs:{saveEvent:"saveEvent",deleteEvent:"deleteEvent",closeEvent:"closeEvent"},decls:9,vars:4,consts:[[1,"page-item"],[3,"formGroup","connectForm"],[1,"textarea"],["formControlName","controlRemark","cols","30","rows","3"],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm",3,"click"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"form",1),T.Wb(2,"div",2),T.Rb(3,"textarea",3),T.Vb(),T.Vb(),T.Wb(4,"div",4),T.Wb(5,"button",5),T.fc("click",(function(){return t.onClickSave()})),T.Pc(6,"\uc800\uc7a5"),T.Vb(),T.Wb(7,"button",6),T.fc("click",(function(){return t.onClose()})),T.Pc(8,"\uc544\ub2c8\uc624"),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Cb(1),T.pc("formGroup",t.putForm)("connectForm",t.putFormData),T.Cb(1),T.Gb("valid-error",t.checkIsInvalid("controlRemark")))},directives:[o.B,o.s,o.k,_.a,o.c,o.r,o.i],encapsulation:2,changeDetection:0}),e})();var ss=i("BA+4");let cs=(()=>{class e{constructor(e,t,i){this._dataService=e,this.fb=t,this.alertService=i,this.submitEvent=new T.n,this.closeEvent=new T.n,this.uploadFileEvent=new T.n,this._$unsubscribe=new A.a,this.putForm=e.generateDsrUploadForm(),this.putFormData=e.initDsrUploadForm()}get loginUserNo(){return this._loginUserNo}set loginUserNo(e){this._loginUserNo=e,this.putFormData=Object.assign(Object.assign({},this.putFormData),{uploadUserNo:e})}ngAfterContentInit(){this._initSubscription(),this._initThisState()}ngOnDestroy(){this._$unsubscribe.next(),this._$unsubscribe.complete()}onSubmit(){if(this.putForm.invalid)return void(this._checkValid=!0);if(E.isNil(this.file))return void this.alertService.alert("\ud30c\uc77c\uc744 \uc5c5\ub85c\ub4dc \ud574 \uc8fc\uc138\uc694.");const e=Object.assign(Object.assign({},this.putForm.value),{fileContent:this.file});this.submitEvent.emit(e),this._checkValid=!1}onClose(){this.closeEvent.emit()}onFileError(e){this.alertService.alert(e)}onFileSelect({files:e,isInvalid:t}){if(e.length>0&&!t){const t=e[0];this.displayFileName=t.name,this.file=t}else this.alertService.alert("It is not a valid file.")}checkIsInvalid(e){return this._checkValid&&this.putForm.get(e)&&this.putForm.get(e).invalid}_initThisState(){this._checkValid=!1}_initSubscription(){}}return e.\u0275fac=function(t){return new(t||e)(T.Qb(Ui),T.Qb(o.f),T.Qb(ae.a))},e.\u0275cmp=T.Kb({type:e,selectors:[["app-fl-sales-report-dsr-upload"]],inputs:{gdsCompList:"gdsCompList",uploadFileTypeList:"uploadFileTypeList",loginUserNo:"loginUserNo"},outputs:{submitEvent:"submitEvent",closeEvent:"closeEvent",uploadFileEvent:"uploadFileEvent"},decls:34,vars:6,consts:[[1,"modal-body"],[3,"formGroup","connectForm","ngSubmit"],[1,"table","table-bordered"],["width","170px"],["scope","row",1,"th-bg"],["formControlName","gdsCompCode","displayKey","compName","dataKey","compCode",3,"options"],["formControlName","fileTypeCode","displayKey","detailCodeNameEn","dataKey","detailCode",3,"options"],[3,"displayValue","maxFileSize","onError","onSelect"],["compFileUpload",""],[1,"button-area","align-r","mt10"],["type","submit",1,"btn","btn-secondary","sm"],["type","button",1,"btn","btn-light","sm",3,"click"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"form",1),T.fc("ngSubmit",(function(){return t.onSubmit()})),T.Wb(2,"div",2),T.Wb(3,"table"),T.Wb(4,"caption"),T.Pc(5," DSR Upload "),T.Vb(),T.Wb(6,"colgroup"),T.Rb(7,"col",3),T.Rb(8,"col"),T.Vb(),T.Wb(9,"tbody"),T.Wb(10,"tr"),T.Wb(11,"th",4),T.Wb(12,"sup"),T.Pc(13,"Select GDS"),T.Vb(),T.Vb(),T.Wb(14,"td"),T.Rb(15,"app-selectbox",5),T.Vb(),T.Vb(),T.Wb(16,"tr"),T.Wb(17,"th",4),T.Wb(18,"sup"),T.Pc(19,"Data Type"),T.Vb(),T.Vb(),T.Wb(20,"td"),T.Rb(21,"app-selectbox",6),T.Vb(),T.Vb(),T.Wb(22,"tr"),T.Wb(23,"th",4),T.Wb(24,"sup"),T.Pc(25,"File"),T.Vb(),T.Vb(),T.Wb(26,"td"),T.Wb(27,"app-file-upload",7,8),T.fc("onError",(function(e){return t.onFileError(e)}))("onSelect",(function(e){return t.onFileSelect(e)})),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(29,"div",9),T.Wb(30,"button",10),T.Pc(31,"Upload"),T.Vb(),T.Wb(32,"button",11),T.fc("click",(function(){return t.onClose()})),T.Pc(33,"Cancel"),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Cb(1),T.pc("formGroup",t.putForm)("connectForm",t.putFormData),T.Cb(14),T.pc("options",t.gdsCompList),T.Cb(6),T.pc("options",t.uploadFileTypeList),T.Cb(6),T.pc("displayValue",t.displayFileName)("maxFileSize",2e6))},directives:[o.B,o.s,o.k,_.a,_i.a,o.r,o.i,ss.a],encapsulation:2,changeDetection:0}),e})();var ns=i("7G9D"),as=i("kDLv"),os=i("rdgV"),rs=i("CGgD");function ls(e,t){if(1&e&&(T.Wb(0,"span"),T.Pc(1),T.Vb()),2&e){const e=t.$implicit;T.Cb(1),T.Tc("",e.lastName," ",e.firstName," ",e.paxTitle,"")}}function ps(e,t){if(1&e){const e=T.Xb();T.Wb(0,"a",17),T.fc("click",(function(){T.Fc(e);const i=t.$implicit;return T.hc().clickBookingItemCode(i.bookingItemCode)})),T.Wb(1,"span",18),T.Pc(2),T.Vb(),T.Vb()}if(2&e){const e=t.$implicit;T.Cb(2),T.Qc(e.bookingItemCode)}}function ds(e,t){if(1&e){const e=T.Xb();T.Wb(0,"a",17),T.fc("click",(function(){T.Fc(e);const i=t.$implicit;return T.hc().clickBookingItemCode(i.bookingItemCode)})),T.Wb(1,"span",18),T.Pc(2),T.Vb(),T.Vb()}if(2&e){const e=t.$implicit;T.Cb(2),T.Qc(e.gdsSubPnr)}}function us(e,t){if(1&e){const e=T.Xb();T.Wb(0,"a",17),T.fc("click",(function(){T.Fc(e);const t=T.hc().$implicit;return T.hc().clickTicketNo(t.bookingItemCode)})),T.Wb(1,"span",18),T.Pc(2),T.Vb(),T.Vb()}if(2&e){const e=T.hc().$implicit;T.Cb(2),T.Qc(e.ticketNo)}}function bs(e,t){1&e&&T.Nc(0,us,3,1,"a",19),2&e&&T.pc("ngIf",t.$implicit.ticketNo)}function hs(e,t){if(1&e){const e=T.Xb();T.Wb(0,"app-dsr-mapping",20),T.fc("closeEvent",(function(t){return T.Fc(e),T.hc().closeDsrBookingMappingHandler(t)})),T.Vb()}if(2&e){const e=T.hc();T.pc("targetTicketList",e.selectedMappingList)}}function ms(e,t){if(1&e){const e=T.Xb();T.Wb(0,"app-dsr-upload",21),T.fc("closeEvent",(function(t){return T.Fc(e),T.hc().closeDsrUploadHandler(t)})),T.Vb()}}function gs(e,t){if(1&e){const e=T.Xb();T.Wb(0,"app-fl-sales-report-remark-form",22),T.fc("closeEvent",(function(){return T.Fc(e),T.hc().closeRemarkPopup()}))("saveEvent",(function(t){return T.Fc(e),T.hc().saveRemarkHandler(t)})),T.ic(1,"async"),T.Vb()}if(2&e){const e=T.hc();T.pc("salesInfo",T.jc(1,1,e.selectedSalesInfo$))}}const fs=function(e,t,i,s){return{nameTpl:e,bookingItemCodeTpl:t,gdsSubPnrTpl:i,ticketNoTpl:s}};let Os=(()=>{class e{constructor(e,t,i,s,c){this.store=e,this._dataService=t,this._fileService=i,this.alertService=s,this.authStore=c,this.unsubscribe$=new A.a,this.dateRangeTypeList$=e.pipe(Object(l.u)(oi)),this.stationList$=e.pipe(Object(l.u)(ri)),this.billingTypeList$=e.pipe(Object(l.u)(li)),this.etEmdOtherTypeList$=e.pipe(Object(l.u)(pi)),this.gdsCompList$=e.pipe(Object(l.u)(di)),this.controlBranchTypeList$=e.pipe(Object(l.u)(ui)),this.ticketVoidTypeList$=e.pipe(Object(l.u)(bi)),this.fopCodeList$=e.pipe(Object(l.u)(hi)),this.affiliateCompList$=e.pipe(Object(l.u)(mi)),this.checkItemList$=e.pipe(Object(l.u)(gi)),this.uploadFileTypeList$=e.pipe(Object(l.u)(fi)),this.loading$=e.pipe(Object(l.u)(Oi)),this.reloadToggle$=e.pipe(Object(l.u)(Ci)),this.searchCondition$=e.pipe(Object(l.u)(Si)),this.otherSearchInfo$=e.pipe(Object(l.u)(ji)),this.selectedDeptList$=e.pipe(Object(l.u)(ki)),this.summaryInfo$=e.pipe(Object(l.u)(Li)),this.gridDataList$=e.pipe(Object(l.u)(vi)),this.listPageSize$=e.pipe(Object(l.u)(Ei)),this.gridState$=e.pipe(Object(l.u)(yi)),this.gridCheckedState$=e.pipe(Object(l.u)(Di)),this.gridDataTotalCount$=e.pipe(Object(l.u)(Ti)),this.isOpenDeptSelectPopup$=e.pipe(Object(l.u)(Ri)),this.isOpenDsrBookingMappingPopup$=e.pipe(Object(l.u)(Fi)),this.isOpenDsrUploadPopup$=e.pipe(Object(l.u)(Pi)),this.isOpenRemarkPopup$=e.pipe(Object(l.u)(Ii)),this.selectedSalesInfo$=e.pipe(Object(l.u)(Vi)),this.loginUserNo$=c.pipe(Object(l.u)(Ni.t)),this._initSubscription()}ngOnInit(){this.store.dispatch(n.loadDateRangeTypeList()),this.store.dispatch(n.loadStationList()),this.store.dispatch(n.loadBillingTypeList()),this.store.dispatch(n.loadEtEmdOtherTypeList()),this.store.dispatch(n.loadGdsCompList()),this.store.dispatch(n.loadControlBranchTypeList()),this.store.dispatch(n.loadTicketVoidTypeList()),this.store.dispatch(n.loadFopCodeList()),this.store.dispatch(n.loadAffiliateCompList()),this.store.dispatch(n.loadCheckItemList()),this.store.dispatch(n.loadUploadFileTypeListAction()),this.loginUserNo$.subscribe(e=>this.userNo=e)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.store.dispatch(n.initComponent()),this.store.dispatch(n.setGridCheckStateAction({gridCheckedState:this.gridEl.checkedStateOutput}))}changePageSizeHandler(e){this.store.dispatch(n.changePageSize({pageSize:e}))}clickSearchHandler({searchCondition:e,otherSearchInfo:t}){this.searchCondition=e,this.store.dispatch(n.changeSearchCondition({searchCondition:e,otherSearchInfo:t})),this.store.dispatch(n.changePageIndex({pageIndex:0}))}clickResetHandler(){this.store.dispatch(n.changeSearchCondition({searchCondition:{},otherSearchInfo:null})),this.store.dispatch(n.changeSelectedDeptList({deptList:null}))}clickBookingItemCode(e){e?window.open(`${window.location.origin}/reservation/flight/${e}?tabName=PRICE`,"_blank","height=950,width=1800,left=0,top=0,toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=no,status=no"):this.alertService.alert("\uc720\ud6a8\ud55c \uc608\uc57d\ubc88\ud638\uac00 \uc544\ub2d9\ub2c8\ub2e4.")}clickTicketNo(e){e?window.open(`${window.location.origin}/reservation/flight/${e}?tabName=SALE_TICKETING`,"_blank","height=950,width=1800,left=0,top=0,toolbar=no,menubar=no,scrollbars=no,resizable=yes,location=no,status=no"):this.alertService.alert("\uc720\ud6a8\ud55c \uc608\uc57d\ubc88\ud638\uac00 \uc544\ub2d9\ub2c8\ub2e4.")}gridStateChangeHandler(e){this.store.dispatch(n.setGridStateAction({gridState:e}))}openDeptSelectModalHandler(){this.store.dispatch(n.openDeptSelectPopup())}closeDeptSelectModalHandler(){this.store.dispatch(n.closeDeptSelectPopup())}openDsrBookingMappingHandler(){const e=this.gridEl.checkedDataList;if((null==e?void 0:e.length)<1)return void this.alertService.alert("No data is selected.");const t=e[0].gdsSubPnr;e.some(e=>e.gdsSubPnr!==t)?this.alertService.alert("PNR\uc774 \ub3d9\uc77c\ud55c \ud56d\ubaa9\ub4e4\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694."):(this.selectedMappingList=E.cloneDeep(e),this.store.dispatch(n.openDsrBookingMappingPopup()))}closeDsrBookingMappingHandler(e){this.store.dispatch(n.closeDsrBookingMappingPopup()),!0===e&&this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()}openDsrUploadHandler(){this.store.dispatch(n.openDsrUploadPopup())}closeDsrUploadHandler(e){!0===e||this.store.dispatch(n.closeDsrUploadPopup())}selectDeptsHandler(e){this.store.dispatch(n.changeSelectedDeptList({deptList:E.cloneDeep(e)})),this.closeDeptSelectModalHandler()}clickClearDeptHandler(){this.store.dispatch(n.changeSelectedDeptList({deptList:null})),this.deptClearFlag=0===this.deptClearFlag?1:0}excelDownloadHandler(){const e=this._changeConditionType(this.searchFormEl.formValue),t=this._setSearchCondition(e);this._fileService.fileDownload({url:wi.excelDownload,filename:"SalesReport",type:"excel",params:t,requestMethod:"post"})}clickBundleCloseCommitOrCancelHandler(e){if(!this.searchFormEl.searchFormValid)return;const t=this._changeConditionType(this.searchFormEl.formValue),i=this._setSearchCondition(t);this.store.dispatch(n.bundleCloseCommitOrCancel({condition:Object.assign({},i,{closeYn:e})}))}clickCloseCommitOrCancelHandler(e){const t=this.gridEl.checkedDataList;if((null==t?void 0:t.length)<1)return void this.alertService.alert("No data is selected.");if(t.some(t=>(t=>e?!0===t.dsrFinishYn:!t.dsrFinishYn)(t)))return void this.alertService.alert(e?"\ub9c8\uac10\uc644\ub8cc\ub41c \ub370\uc774\ud130\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.":"\ub9c8\uac10\ud574\uc81c\ub41c \ub370\uc774\ud130\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.");if(t.some(e=>E.isNil(e.ticketingDate)||E.isNil(e.ticketingDate)))return void this.alertService.alert("\ubc1c\uad8c\ubc88\ud638 \ud639\uc740 \ubc1c\uad8c\uc77c\uc774 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");if(t.some(e=>!E.isNil(e.slipNo)))return void this.alertService.alert("\uc804\ud45c\ubc88\ud638\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4.");const i=t.map(e=>({ticketingDate:e.ticketingDate,ticketNo:e.ticketNo}));this.store.dispatch(n.closeCommitOrCancel({condition:{list:i,closeYn:e}}))}openRemarkPopup(){this.gridEl.checkedDataList.length<1?this.alertService.alert("No data is selected."):this.gridEl.checkedDataList.length>1?this.alertService.alert("\ud558\ub098\uc758 \ub370\uc774\ud130\ub9cc \uc120\ud0dd \ud574 \uc8fc\uc138\uc694."):(this.store.dispatch(n.addSalesInfo({salesInfo:this.gridEl.checkedDataList[0]})),this.store.dispatch(n.openRemarkPopup()))}closeRemarkPopup(){this.store.dispatch(n.delSalesInfo()),this.store.dispatch(n.closeRemarkPopup())}saveRemarkHandler({controlRemark:e}){const t=this.gridEl.checkedDataList.map(t=>({rowid:t.rowid,controlRemark:e}));this.store.dispatch(n.saveRemark({condition:{remarks:t}}))}_initSubscription(){this.reloadToggle$.pipe(Object(Z.a)(1),Object(ie.a)(this.unsubscribe$)).subscribe(()=>{this.searchFormEl.searchFormValid&&this.searchFormEl.onSubmit()}),this.searchCondition$.pipe(Object(ie.a)(this.unsubscribe$)).subscribe(e=>{switch(null==e?void 0:e.checkItemCode){case"SRC01":case"SRC02":this.columns=this._dataService.generateGridColumnsSRC01();break;case"IC03":this.columns=this._dataService.generateGridColumnsSRC03();break;default:this.columns=this._dataService.generateGridColumns()}}),Object(M.a)([this.searchCondition$,this.gridState$]).pipe(Object(Z.a)(1),Object(ee.a)(200),Object(te.a)(([e,t])=>!E.isEmpty(e)),Object(ie.a)(this.unsubscribe$)).subscribe(([e,{pageInfo:t,sortInfo:i}])=>{this._setSortOrder(i);const s=Object.assign({},e,{limits:[t.skip,t.skip+t.take]});this.store.dispatch(n.loadList({condition:this._changeConditionType(s)}))})}_setSortOrder(e){return e.filter(e=>!E.isNil(e.dir)).map(e=>({keyName:e.field,sort:e.dir}))}_setSearchCondition(e){const t=Object.keys(this._dataService.initListSearchCondition());return E.pick(e,t)}_changeConditionType(e){const t=E.isNil(e.airlineCodes)?null:e.airlineCodes.replace(/\s+/g,"").split(",").filter(e=>e),i=E.isNil(e.destinationAirportCodes)?null:e.destinationAirportCodes.replace(/\s+/g,"").split(",").filter(e=>e),s=E.isNil(e.bookingClassCodes)?null:e.bookingClassCodes.replace(/\s+/g,"").split(",").filter(e=>e),c=Object.assign({},e,{airlineCodes:t,destinationAirportCodes:i,bookingClassCodes:s}),n=E.omit(c,["multiSelector1","multiSelector2"]);return E.omitBy(n,E.isNil)}clickSlipEvent(e){const t=this.gridEl.checkedDataList;if((null==t?void 0:t.length)<1)this.alertService.alert("No data is selected.");else if(e){const i={salesSlipTypeCode:"SST01",ticketNos:[],accountingDate:e,slipWriterUno:this.userNo};t.forEach(e=>{i.ticketNos.push({ticketingDate:e.ticketingDate,ticketNo:e.ticketNo}),this.store.dispatch(n.salesSlip({condition:i}))})}else this.alertService.alert("\ub0a0\uc9dc\ub97c \uc120\ud0dd\ud558\uc138\uc694.")}clickTotalSlipEvent(e){if(e){let t=Object.assign(Object.assign({},this.searchCondition),{accountingDate:e,slipWriterUno:this.userNo,salesSlipTypeCode:"SST02"});return t=E.omit(t,["multiSelector1","multiSelector2"]),void this.store.dispatch(n.salesSlipAll({condition:t}))}}clickChorusEvent(e){const t=this.gridEl.checkedDataList;(null==t?void 0:t.length)<1?this.alertService.alert("No data is selected."):this.gridEl.checkedDataList.length>1?this.alertService.alert("\ud558\ub098\uc758 \ub370\uc774\ud130\ub9cc \uc120\ud0dd \ud574 \uc8fc\uc138\uc694."):(this.store.dispatch(n.chorusSlip({condition:{bookingItemCodes:[this.gridEl.checkedDataList[0].bookingItemCode]}})),this.alertService.alert("\ucf54\ub7ec\uc2a4\uc804\uc1a1\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))}clickChorusAllEvent(e){const t=this._changeConditionType(this.searchFormEl.formValue),i=this._setSearchCondition(t);this.store.dispatch(n.chorusSlipAll({condition:i})),this.alertService.alert("\ucf54\ub7ec\uc2a4\uc77c\uad04\uc804\uc1a1\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}}return e.\u0275fac=function(t){return new(t||e)(T.Qb(l.h),T.Qb(Ui),T.Qb(ns.a),T.Qb(ae.a),T.Qb(l.h))},e.\u0275cmp=T.Kb({type:e,selectors:[["app-fl-sales-report"]],viewQuery:function(e,t){var i;1&e&&(T.Xc(es,!0),T.Xc(se.a,!0)),2&e&&(T.Dc(i=T.gc())&&(t.searchFormEl=i.first),T.Dc(i=T.gc())&&(t.gridEl=i.first))},decls:50,vars:101,consts:[[3,"dateRangeTypeList","stationList","billingTypeList","etEmdOtherTypeList","gdsCompList","controlBranchTypeList","ticketVoidTypeList","fopCodeList","affiliateCompList","checkItemList","selectedDeptList","otherSearchInfo","searchCondition","clickSearchEvent","clickResetEvent","clickOpenDeptModalEvent","clickClearDeptEvent"],[3,"loading","currentPageSize","totalCount","changePageSizeEvent","excelDownloadEvent","clickDsrBookingMappingEvent","clickDsrUploadEvent","clickCommitOrCancelEvent","clickSlipEvent","clickTotalSlipEvent","clickChorusAllEvent","clickChorusEvent","clickBundleCommitOrCancelEvent","clickRemarkEvent"],["nameTpl",""],["bookingItemCodeTpl",""],["gdsSubPnrTpl",""],["ticketNoTpl",""],[3,"gridLoading","columns","gridState","checkedState","totalCount","dataList","templates","checkboxUseYn","stateChangeEvent"],["gridBasis",""],[3,"summary"],["modalSize","sm","modalContentClass","pd-all","header","\ubd80\uc11c",3,"visible","modal","visibleChange"],[3,"componentKey","clearSateFlag","clickApplyEvent"],["modalSize","sm","modalContentClass","pd-all","header","DSR/\uc608\uc57d\ub9e4\ud551",3,"visible","modal","visibleChange"],[3,"targetTicketList","closeEvent",4,"ngIf"],["modalSize","sm","modalContentClass","pd-all","header","DSR Upload",3,"visible","modal","visibleChange"],[3,"closeEvent",4,"ngIf"],["modalContentClass","pd-all","header","\ube44\uace0\ub4f1\ub85d","modalSize","sm",3,"visible","modal","visibleChange"],[3,"salesInfo","closeEvent","saveEvent",4,"ngIf"],[3,"click"],[1,"text-underline","color-dark"],[3,"click",4,"ngIf"],[3,"targetTicketList","closeEvent"],[3,"closeEvent"],[3,"salesInfo","closeEvent","saveEvent"]],template:function(e,t){if(1&e&&(T.Wb(0,"app-fl-sales-report-search",0),T.fc("clickSearchEvent",(function(e){return t.clickSearchHandler(e)}))("clickResetEvent",(function(){return t.clickResetHandler()}))("clickOpenDeptModalEvent",(function(){return t.openDeptSelectModalHandler()}))("clickClearDeptEvent",(function(){return t.clickClearDeptHandler()})),T.ic(1,"async"),T.ic(2,"async"),T.ic(3,"async"),T.ic(4,"async"),T.ic(5,"async"),T.ic(6,"async"),T.ic(7,"async"),T.ic(8,"async"),T.ic(9,"async"),T.ic(10,"async"),T.ic(11,"async"),T.ic(12,"async"),T.ic(13,"async"),T.Vb(),T.Wb(14,"app-fl-sales-report-control",1),T.fc("changePageSizeEvent",(function(e){return t.changePageSizeHandler(e)}))("excelDownloadEvent",(function(){return t.excelDownloadHandler()}))("clickDsrBookingMappingEvent",(function(){return t.openDsrBookingMappingHandler()}))("clickDsrUploadEvent",(function(){return t.openDsrUploadHandler()}))("clickCommitOrCancelEvent",(function(e){return t.clickCloseCommitOrCancelHandler(e)}))("clickSlipEvent",(function(e){return t.clickSlipEvent(e)}))("clickTotalSlipEvent",(function(e){return t.clickTotalSlipEvent(e)}))("clickChorusAllEvent",(function(e){return t.clickChorusAllEvent(e)}))("clickChorusEvent",(function(e){return t.clickChorusEvent(e)}))("clickBundleCommitOrCancelEvent",(function(e){return t.clickBundleCloseCommitOrCancelHandler(e)}))("clickRemarkEvent",(function(){return t.openRemarkPopup()})),T.ic(15,"async"),T.ic(16,"async"),T.ic(17,"async"),T.Vb(),T.Nc(18,ls,2,3,"ng-template",null,2,T.Oc),T.Nc(20,ps,3,1,"ng-template",null,3,T.Oc),T.Nc(22,ds,3,1,"ng-template",null,4,T.Oc),T.Nc(24,bs,1,1,"ng-template",null,5,T.Oc),T.Wb(26,"app-grid-simple",6,7),T.fc("stateChangeEvent",(function(e){return t.gridStateChangeHandler(e)})),T.ic(28,"async"),T.ic(29,"async"),T.ic(30,"async"),T.ic(31,"async"),T.ic(32,"async"),T.Vb(),T.Rb(33,"app-fl-sales-report-summary",8),T.ic(34,"async"),T.Wb(35,"app-dialog",9),T.fc("visibleChange",(function(){return t.closeDeptSelectModalHandler()})),T.ic(36,"async"),T.Wb(37,"app-department-selector",10),T.fc("clickApplyEvent",(function(e){return t.selectDeptsHandler(e)})),T.Vb(),T.Vb(),T.Wb(38,"app-dialog",11),T.fc("visibleChange",(function(e){return t.closeDsrBookingMappingHandler(e)})),T.ic(39,"async"),T.Nc(40,hs,1,1,"app-dsr-mapping",12),T.ic(41,"async"),T.Vb(),T.Wb(42,"app-dialog",13),T.fc("visibleChange",(function(e){return t.closeDsrUploadHandler(e)})),T.ic(43,"async"),T.Nc(44,ms,1,0,"app-dsr-upload",14),T.ic(45,"async"),T.Vb(),T.Wb(46,"app-dialog",15),T.fc("visibleChange",(function(){return t.closeRemarkPopup()})),T.ic(47,"async"),T.Nc(48,gs,2,3,"app-fl-sales-report-remark-form",16),T.ic(49,"async"),T.Vb()),2&e){const e=T.Ec(19),i=T.Ec(21),s=T.Ec(23),c=T.Ec(25);T.pc("dateRangeTypeList",T.jc(1,38,t.dateRangeTypeList$))("stationList",T.jc(2,40,t.stationList$))("billingTypeList",T.jc(3,42,t.billingTypeList$))("etEmdOtherTypeList",T.jc(4,44,t.etEmdOtherTypeList$))("gdsCompList",T.jc(5,46,t.gdsCompList$))("controlBranchTypeList",T.jc(6,48,t.controlBranchTypeList$))("ticketVoidTypeList",T.jc(7,50,t.ticketVoidTypeList$))("fopCodeList",T.jc(8,52,t.fopCodeList$))("affiliateCompList",T.jc(9,54,t.affiliateCompList$))("checkItemList",T.jc(10,56,t.checkItemList$))("selectedDeptList",T.jc(11,58,t.selectedDeptList$))("otherSearchInfo",T.jc(12,60,t.otherSearchInfo$))("searchCondition",T.jc(13,62,t.searchCondition$)),T.Cb(14),T.pc("loading",T.jc(15,64,t.loading$))("currentPageSize",T.jc(16,66,t.listPageSize$))("totalCount",T.jc(17,68,t.gridDataTotalCount$)),T.Cb(12),T.pc("gridLoading",T.jc(28,70,t.loading$))("columns",t.columns)("gridState",T.jc(29,72,t.gridState$))("checkedState",T.jc(30,74,t.gridCheckedState$))("totalCount",T.jc(31,76,t.gridDataTotalCount$))("dataList",T.jc(32,78,t.gridDataList$))("templates",T.xc(96,fs,e,i,s,c))("checkboxUseYn",!0),T.Cb(7),T.pc("summary",T.jc(34,80,t.summaryInfo$)),T.Cb(2),T.pc("visible",T.jc(36,82,t.isOpenDeptSelectPopup$))("modal",!0),T.Cb(2),T.pc("componentKey","flSalesReport")("clearSateFlag",t.deptClearFlag),T.Cb(1),T.pc("visible",T.jc(39,84,t.isOpenDsrBookingMappingPopup$))("modal",!0),T.Cb(2),T.pc("ngIf",T.jc(41,86,t.isOpenDsrBookingMappingPopup$)),T.Cb(2),T.pc("visible",T.jc(43,88,t.isOpenDsrUploadPopup$))("modal",!0),T.Cb(2),T.pc("ngIf",T.jc(45,90,t.isOpenDsrUploadPopup$)),T.Cb(2),T.pc("visible",T.jc(47,92,t.isOpenRemarkPopup$))("modal",!0),T.Cb(2),T.pc("ngIf",T.jc(49,94,t.isOpenRemarkPopup$))}},directives:[es,xi,se.a,ts,as.a,os.a,a.o,Ye,rs.a,is],pipes:[a.b],encapsulation:2,changeDetection:0}),e})();const Cs=[{path:"",component:Os,data:{title:"Sales Report"}}];let Ss=(()=>{class e{}return e.\u0275mod=T.Ob({type:e}),e.\u0275inj=T.Nb({factory:function(t){return new(t||e)},imports:[[Qe.f.forChild(Cs)],Qe.f]}),e})();var js=i("bOdf"),ks=i("zp1y"),vs=i("vkgz");let Ls=(()=>{class e{constructor(e,t,i,s,c){this.actions$=e,this._store$=t,this._apiService=i,this._errorService=s,this.alertService=c,this.loadDateRangeTypeList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadDateRangeTypeList),Object(js.a)(e=>Object(R.a)(e).pipe(Object(ks.a)(this.dateRangeTypeList$))),Object(P.a)(([e,t])=>E.isNil(t)?this._apiService.getCommonDetailCodeList({masterCode:"FL085"}).pipe(Object(Ge.a)(e=>n.getDateRangeTypeListSuccessAction({dataList:e})),Object(ce.a)(e=>(this._catchErr(e,"\ub0a0\uc9dc\ud0c0\uc785 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[]))),this.loadStationList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadStationList),Object(js.a)(e=>Object(R.a)(e).pipe(Object(ks.a)(this.stationList$))),Object(P.a)(([e,t])=>E.isNil(t)?this._apiService.getCommonDetailCodeList({masterCode:"BS002"}).pipe(Object(Ge.a)(e=>n.getStationListSuccess({dataList:e})),Object(ce.a)(e=>(this._catchErr(e,"\uc2a4\ud14c\uc774\uc158 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[]))),this.loadBillingTypeList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadBillingTypeList),Object(js.a)(e=>Object(R.a)(e).pipe(Object(ks.a)(this.billingTypeList$))),Object(P.a)(([e,t])=>E.isNil(t)?this._apiService.getCommonDetailCodeList({masterCode:"FL031"}).pipe(Object(Ge.a)(e=>n.getBillingTypeListSuccess({dataList:e})),Object(ce.a)(e=>(this._catchErr(e,"ATR/BSP \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[]))),this.loadEtEmdOtherTypeList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadEtEmdOtherTypeList),Object(js.a)(e=>Object(R.a)(e).pipe(Object(ks.a)(this.etEmdOtherTypeList$))),Object(P.a)(([e,t])=>E.isNil(t)?this._apiService.getCommonDetailCodeList({masterCode:"FL077"}).pipe(Object(Ge.a)(e=>n.getEtEmdOtherTypeListSuccess({dataList:e})),Object(ce.a)(e=>(this._catchErr(e,"\ud2f0\ucf13\uad6c\ubd84 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[]))),this.loadGdsCompList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadGdsCompList),Object(js.a)(e=>Object(R.a)(e).pipe(Object(ks.a)(this.gdsCompList$))),Object(P.a)(([e,t])=>E.isNil(t)?this._apiService.getCommonComp({compTypeCodes:["CMP10"],limits:[0,100]}).pipe(Object(Ge.a)(e=>n.getGdsCompListSuccess({dataList:e})),Object(ce.a)(e=>(this._catchErr(e,"GdsComp \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[]))),this.loadControlBranchTypeList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadControlBranchTypeList),Object(js.a)(e=>Object(R.a)(e).pipe(Object(ks.a)(this.controlBranchTypeList$))),Object(P.a)(([e,t])=>E.isNil(t)?this._apiService.getCommonDetailCodeList({masterCode:"US008"}).pipe(Object(Ge.a)(e=>n.getControlBranchTypeListSuccess({dataList:e})),Object(ce.a)(e=>(this._catchErr(e,"ControlBranchType \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[]))),this.loadTicketVoidTypeList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadTicketVoidTypeList),Object(js.a)(e=>Object(R.a)(e).pipe(Object(ks.a)(this.ticketVoidTypeList$))),Object(P.a)(([e,t])=>E.isNil(t)?this._apiService.getCommonDetailCodeList({masterCode:"FL027"}).pipe(Object(Ge.a)(e=>n.getTicketVoidTypeListSuccess({dataList:e})),Object(ce.a)(e=>(this._catchErr(e,"\ud310\ub9e4\uad6c\ubd84 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[]))),this.loadFopCodeList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadFopCodeList),Object(js.a)(e=>Object(R.a)(e).pipe(Object(ks.a)(this.fopCodeList$))),Object(P.a)(([e,t])=>E.isNil(t)?this._apiService.getCommonDetailCodeList({masterCode:"PM015"}).pipe(Object(Ge.a)(e=>n.getFopCodeListSuccess({dataList:e})),Object(ce.a)(e=>(this._catchErr(e,"\uacb0\uc81c\uc218\ub2e8 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[]))),this.loadAffiliateCompList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadAffiliateCompList),Object(js.a)(e=>Object(R.a)(e).pipe(Object(ks.a)(this.affiliateCompList$))),Object(P.a)(([e,t])=>E.isNil(t)?this._apiService.getCommonComp({compTypeCodes:["CMP03"],limits:[0,100]}).pipe(Object(Ge.a)(e=>n.getAffiliateCompListSuccess({dataList:e})),Object(ce.a)(e=>(this._catchErr(e,"AffiliateCompList \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[]))),this.loadCheckItemList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadCheckItemList),Object(js.a)(e=>Object(R.a)(e).pipe(Object(ks.a)(this.checkItemList$))),Object(P.a)(([e,t])=>E.isNil(t)?this._apiService.getCommonDetailCodeList({masterCode:"FL086"}).pipe(Object(Ge.a)(e=>n.getCheckItemListSuccess({dataList:e})),Object(ce.a)(e=>(this._catchErr(e,"\ud655\uc778\ud56d\ubaa9 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[]))),this.loadUploadFileTypeList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadUploadFileTypeListAction),Object(js.a)(e=>Object(R.a)(e).pipe(Object(ks.a)(this.uploadFileTypeList$))),Object(P.a)(([e,t])=>E.isNil(t)?this._apiService.getCommonDetailCodeList({masterCode:"FL029"}).pipe(Object(Ge.a)(e=>n.getUploadFileTypeListSuccessAction({dataList:e})),Object(ce.a)(e=>(this._catchErr(e,"GDS/\ud56d\uacf5\uc0ac \ub370\uc774\ud130 \uad6c\ubd84 \ub9ac\uc2a4\ud2b8 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),[]))):[]))),this.loadList$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.loadList),Object(P.a)(({condition:e})=>this._apiService.getList(e).pipe(Object(Ge.a)(({dataList:e,totalCount:t,summaryInfo:i})=>n.getListSuccess({dataList:e,totalCount:t,summaryInfo:i})),Object(ce.a)(e=>{const t="List lookup failed. Please try again in a momentarily.",i=[n.getListFailure({error:t})];return this._catchErr(e,t,i),[]}))))),this.uploadDsr$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.uploadDsr),Object(P.a)(({condition:e})=>this._apiService.uploadDsr(e).pipe(Object(Ge.a)(e=>({succeedYn:!0,updateList:e})),Object(ce.a)(e=>Object(R.a)({succeedYn:!1,error:e})))),Object(vs.a)(({succeedYn:e,error:t})=>{e?this._runPage("DSR \uc5c5\ub85c\ub4dc\ub97c \uc131\uacf5\ud558\uc600\uc2b5\ub2c8\ub2e4.",[]):this._catchErr(t,"DSR \uc5c5\ub85c\ub4dc\ub97c \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",[])})),{dispatch:!1}),this.closeCommitOrCancel$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.closeCommitOrCancel),Object(P.a)(({condition:e})=>this._apiService.closeCommitOrCancel(e).pipe(Object(Ge.a)(()=>({succeedYn:!0})),Object(ce.a)(e=>Object(R.a)({succeedYn:!1,error:e})))),Object(vs.a)(({succeedYn:e,error:t})=>{if(e){const e=[n.reloadList()];this._runPage("\ub9c8\uac10\uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",e)}else this._catchErr(t,"\ub9c8\uac10\uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.")})),{dispatch:!1}),this.bundleCloseCommitOrCancel$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.bundleCloseCommitOrCancel),Object(P.a)(({condition:e})=>this._apiService.bundleCloseCommitOrCancel(e).pipe(Object(Ge.a)(()=>({succeedYn:!0})),Object(ce.a)(e=>Object(R.a)({succeedYn:!1,error:e})))),Object(vs.a)(({succeedYn:e,error:t})=>{if(e){const e=[n.reloadList()];this._runPage("\ub9c8\uac10\uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",e)}else this._catchErr(t,"\ub9c8\uac10\uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.")})),{dispatch:!1}),this.saveRemark$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.saveRemark),Object(P.a)(({condition:e})=>this._apiService.putSaveRemark(e).pipe(Object(Ge.a)(e=>({succeedYn:!0,upsertList:e})),Object(ce.a)(e=>Object(R.a)({succeedYn:!1,error:e})))),Object(vs.a)(({succeedYn:e,error:t,upsertList:i})=>{if(e){const e="\ube44\uace0\ub4f1\ub85d\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",t=[n.saveRemarkSuccess({upsertList:i}),n.closeRemarkPopup(),n.delSalesInfo()];this._runPage(e,t)}else{const e="\ube44\uace0\ub4f1\ub85d\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",i=[n.saveRemarkFailure({error:e})];this._catchErr(t,e,i)}})),{dispatch:!1}),this.salesSlip$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.salesSlip),Object(P.a)(({condition:e})=>this._apiService.putSlipCreate(e).pipe(Object(Ge.a)(e=>{console.log(e,"dataList"),n.salesSlipSuccess({dataList:e})}),Object(ce.a)(e=>{const t=[n.saveRemarkFailure({error:"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."})];return this._catchErr(e,"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",t),[]})))),{dispatch:!1}),this.salesSlipAll$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.salesSlipAll),Object(P.a)(({condition:e})=>this._apiService.putSlipAllCreate(e).pipe(Object(Ge.a)(e=>{console.log(e,"salesSlipAll"),n.salesSlipAllSuccess({dataList:e})}),Object(ce.a)(e=>{const t=[n.saveRemarkFailure({error:"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."})];return this._catchErr(e,"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",t),[]})))),{dispatch:!1}),this.chorusSlip$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.chorusSlip),Object(P.a)(({condition:e})=>this._apiService.putChorusSlipCreate(e).pipe(Object(Ge.a)(e=>n.chorusSlipSuccess({dataList:e})),Object(ce.a)(e=>{const t=[n.saveRemarkFailure({error:"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."})];return this._catchErr(e,"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",t),[]}))))),this.chorusSlipAll$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(n.chorusSlipAll),Object(P.a)(({condition:e})=>this._apiService.putChorusSlipCreate(e).pipe(Object(Ge.a)(e=>n.chorusSlipAllSuccess({dataList:e})),Object(ce.a)(e=>{const t=[n.saveRemarkFailure({error:"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."})];return this._catchErr(e,"\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",t),[]}))))),this.dateRangeTypeList$=t.pipe(Object(l.u)(oi)),this.stationList$=t.pipe(Object(l.u)(ri)),this.billingTypeList$=t.pipe(Object(l.u)(li)),this.etEmdOtherTypeList$=t.pipe(Object(l.u)(pi)),this.gdsCompList$=t.pipe(Object(l.u)(di)),this.controlBranchTypeList$=t.pipe(Object(l.u)(ui)),this.ticketVoidTypeList$=t.pipe(Object(l.u)(bi)),this.fopCodeList$=t.pipe(Object(l.u)(hi)),this.affiliateCompList$=t.pipe(Object(l.u)(mi)),this.checkItemList$=t.pipe(Object(l.u)(gi)),this.uploadFileTypeList$=t.pipe(Object(l.u)(fi))}_runPage(e,t){this.alertService.alert({message:e,accept:(null==t?void 0:t.length)>0?()=>{t.forEach(e=>{this._store$.dispatch(e)})}:()=>{}})}_catchErr(e,t,i){const s=this._errorService.errorHandler(e,t);E.isNil(s)||(E.isNil(s.accept)&&(s.accept=(null==i?void 0:i.length)>0?()=>{i.forEach(e=>{this._store$.dispatch(e)})}:()=>{}),this.alertService.alert(s))}}return e.\u0275fac=function(t){return new(t||e)(T.bc(r.a),T.bc(l.h),T.bc(Ai),T.bc(ne.a),T.bc(ae.a))},e.\u0275prov=T.Mb({token:e,factory:e.\u0275fac}),e})();const ys=[Os],Ds=[xi,es,ts,is,cs];let Ts=(()=>{class e{}return e.\u0275mod=T.Ob({type:e}),e.\u0275inj=T.Nb({factory:function(t){return new(t||e)},imports:[[a.c,o.m,o.w,p.m,d.a,u.a,b.a,j.a,h.a,m.a,g.a,f.a,O.a,C.a,S.a,v.a,k.a,y.a,D.a,L.a,Ss,re,le.a,pe.a,ze,l.j.forFeature("FlSalesReport",ci),r.b.forFeature([Ls])]]}),e})()}}]);